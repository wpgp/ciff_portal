<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Family Health at Subnational Level" />
    <meta name="author" content="SDI Worldpop" />

    <title>Second Portal ?</title>
    <link rel="icon" type="image/x-icon" href="./fig/wp_tiny.png">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../src/index.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
  </head>

  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <header>
      <div class="navbar shadow-sm navbar-expand navbar-static-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Second Portal ?</a>
          <div class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item"><a class="nav-link" href="#" id="btnGuide">Guide</a></li>
              <li class="nav-item"><a class="nav-link" href="#" id="btnAbout">About</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <div id="root">
      <div class="d-flex justify-content-center" style="height:90vh;padding-top:40vh;">
        <div class="spinner-border" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </div>

    <iframe id="ifmcontentstoprint" style="height: 0px; width: 0px; position: absolute"></iframe>

    <div id="modal" class="modal">
      <div class="modal-content">
        <div class="col p-0">
          <div id="modalTitle" class="float-start title"></div>
          <div class="float-end" style="margin-top:20px;">
            <a href="#" title="Close" id="bclose" style="font-size:x-large;"><span class="fa fa-times-circle"></span></a>
          </div>
        </div>
        <div id="modalBody" class="frame" style="font-size:medium; overflow:auto; border-radius:0 0 0 0;"></div>
        <div id="modalFoot" class="float-end"></div>
      </div>
    </div>

    <footer class="shadow-sm p-2 fixed-bottom" style="text-align: right; background: rgba(255,255,255,0.8);">
      &copy 2023 <a href="https://sdi.worldpop.org">WorldPop SDI</a>
    </footer>
  </body>

  <script>
    var modal = document.getElementById("modal");
    var modalTitle = document.getElementById("modalTitle");
    var modalBody = document.getElementById("modalBody")
    var btnAbout = document.getElementById("btnAbout");
    var btnGuide = document.getElementById("btnGuide");
    var btnClose = document.getElementById("bclose");

    var contentAbout;
    var contentGuide;

    fetch('./about.inc').then(resp => resp.text()).then(text => {contentAbout = text});
    fetch('./guide.inc').then(resp => resp.text()).then(text => {contentGuide = text});

    btnAbout.onclick = () => {
      modal.style.display = "block";
      modalTitle.innerHTML = '<h4>About</h4>';
      modalBody.innerHTML = contentAbout;
    };

    btnGuide.onclick = () => {
      modal.style.display = "block";
      modalTitle.innerHTML = '<h4>Guide</h4>';
      modalBody.innerHTML = contentGuide;
    };

    btnClose.onclick = () => {
      modal.style.display = "none";
    };

    window.onclick = (e) => {if (e.target == modal) {modal.style.display = "none"}};
  </script>

</html>