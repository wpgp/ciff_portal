function Xie(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var k8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Td(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function R8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var T8={exports:{}},s2={},A8={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=Symbol.for("react.element"),Kie=Symbol.for("react.portal"),Jie=Symbol.for("react.fragment"),Qie=Symbol.for("react.strict_mode"),ere=Symbol.for("react.profiler"),tre=Symbol.for("react.provider"),nre=Symbol.for("react.context"),ire=Symbol.for("react.forward_ref"),rre=Symbol.for("react.suspense"),ore=Symbol.for("react.memo"),are=Symbol.for("react.lazy"),HD=Symbol.iterator;function sre(e){return e===null||typeof e!="object"?null:(e=HD&&e[HD]||e["@@iterator"],typeof e=="function"?e:null)}var F8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M8=Object.assign,N8={};function pm(e,t,n){this.props=e,this.context=t,this.refs=N8,this.updater=n||F8}pm.prototype.isReactComponent={};pm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function P8(){}P8.prototype=pm.prototype;function uM(e,t,n){this.props=e,this.context=t,this.refs=N8,this.updater=n||F8}var cM=uM.prototype=new P8;cM.constructor=uM;M8(cM,pm.prototype);cM.isPureReactComponent=!0;var UD=Array.isArray,$8=Object.prototype.hasOwnProperty,fM={current:null},O8={key:!0,ref:!0,__self:!0,__source:!0};function I8(e,t,n){var i,r={},o=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)$8.call(t,i)&&!O8.hasOwnProperty(i)&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return{$$typeof:fv,type:e,key:o,ref:a,props:r,_owner:fM.current}}function lre(e,t){return{$$typeof:fv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dM(e){return typeof e=="object"&&e!==null&&e.$$typeof===fv}function ure(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var WD=/\/+/g;function xE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ure(""+e.key):t.toString(36)}function e_(e,t,n,i,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fv:case Kie:a=!0}}if(a)return a=e,r=r(a),e=i===""?"."+xE(a,0):i,UD(r)?(n="",e!=null&&(n=e.replace(WD,"$&/")+"/"),e_(r,t,n,"",function(u){return u})):r!=null&&(dM(r)&&(r=lre(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(WD,"$&/")+"/")+e)),t.push(r)),1;if(a=0,i=i===""?".":i+":",UD(e))for(var s=0;s<e.length;s++){o=e[s];var l=i+xE(o,s);a+=e_(o,t,n,l,r)}else if(l=sre(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=i+xE(o,s++),a+=e_(o,t,n,l,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function W1(e,t,n){if(e==null)return e;var i=[],r=0;return e_(e,i,"","",function(o){return t.call(n,o,r++)}),i}function cre(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xr={current:null},t_={transition:null},fre={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:t_,ReactCurrentOwner:fM};Nt.Children={map:W1,forEach:function(e,t,n){W1(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return W1(e,function(){t++}),t},toArray:function(e){return W1(e,function(t){return t})||[]},only:function(e){if(!dM(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=pm;Nt.Fragment=Jie;Nt.Profiler=ere;Nt.PureComponent=uM;Nt.StrictMode=Qie;Nt.Suspense=rre;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fre;Nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=M8({},e.props),r=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=fM.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)$8.call(t,l)&&!O8.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}return{$$typeof:fv,type:e.type,key:r,ref:o,props:i,_owner:a}};Nt.createContext=function(e){return e={$$typeof:nre,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tre,_context:e},e.Consumer=e};Nt.createElement=I8;Nt.createFactory=function(e){var t=I8.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:ire,render:e}};Nt.isValidElement=dM;Nt.lazy=function(e){return{$$typeof:are,_payload:{_status:-1,_result:e},_init:cre}};Nt.memo=function(e,t){return{$$typeof:ore,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=t_.transition;t_.transition={};try{e()}finally{t_.transition=t}};Nt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Nt.useCallback=function(e,t){return xr.current.useCallback(e,t)};Nt.useContext=function(e){return xr.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return xr.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return xr.current.useEffect(e,t)};Nt.useId=function(){return xr.current.useId()};Nt.useImperativeHandle=function(e,t,n){return xr.current.useImperativeHandle(e,t,n)};Nt.useInsertionEffect=function(e,t){return xr.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return xr.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return xr.current.useMemo(e,t)};Nt.useReducer=function(e,t,n){return xr.current.useReducer(e,t,n)};Nt.useRef=function(e){return xr.current.useRef(e)};Nt.useState=function(e){return xr.current.useState(e)};Nt.useSyncExternalStore=function(e,t,n){return xr.current.useSyncExternalStore(e,t,n)};Nt.useTransition=function(){return xr.current.useTransition()};Nt.version="18.2.0";A8.exports=Nt;var M=A8.exports;const Pt=Td(M),dre=Xie({__proto__:null,default:Pt},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hre=M,pre=Symbol.for("react.element"),mre=Symbol.for("react.fragment"),gre=Object.prototype.hasOwnProperty,yre=hre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vre={key:!0,ref:!0,__self:!0,__source:!0};function L8(e,t,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)gre.call(t,i)&&!vre.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:pre,type:e,key:o,ref:a,props:r,_owner:yre.current}}s2.Fragment=mre;s2.jsx=L8;s2.jsxs=L8;T8.exports=s2;var w=T8.exports,FR={},D8={exports:{}},So={},z8={exports:{}},j8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,Q){var K=H.length;H.push(Q);e:for(;0<K;){var ne=K-1>>>1,he=H[ne];if(0<r(he,Q))H[ne]=Q,H[K]=he,K=ne;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Q=H[0],K=H.pop();if(K!==Q){H[0]=K;e:for(var ne=0,he=H.length,$e=he>>>1;ne<$e;){var Ee=2*(ne+1)-1,we=H[Ee],Ae=Ee+1,It=H[Ae];if(0>r(we,K))Ae<he&&0>r(It,we)?(H[ne]=It,H[Ae]=K,ne=Ae):(H[ne]=we,H[Ee]=K,ne=Ee);else if(Ae<he&&0>r(It,K))H[ne]=It,H[Ae]=K,ne=Ae;else break e}}return Q}function r(H,Q){var K=H.sortIndex-Q.sortIndex;return K!==0?K:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var Q=n(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=H)i(u),Q.sortIndex=Q.expirationTime,t(l,Q);else break;Q=n(u)}}function k(H){if(y=!1,S(H),!g)if(n(l)!==null)g=!0,Z(R);else{var Q=n(u);Q!==null&&J(k,Q.startTime-H)}}function R(H,Q){g=!1,y&&(y=!1,_(P),P=-1),m=!0;var K=h;try{for(S(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||H&&!D());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,h=d.priorityLevel;var he=ne(d.expirationTime<=Q);Q=e.unstable_now(),typeof he=="function"?d.callback=he:d===n(l)&&i(l),S(Q)}else i(l);d=n(l)}if(d!==null)var $e=!0;else{var Ee=n(u);Ee!==null&&J(k,Ee.startTime-Q),$e=!1}return $e}finally{d=null,h=K,m=!1}}var F=!1,T=null,P=-1,B=5,O=-1;function D(){return!(e.unstable_now()-O<B)}function W(){if(T!==null){var H=e.unstable_now();O=H;var Q=!0;try{Q=T(!0,H)}finally{Q?j():(F=!1,T=null)}}else F=!1}var j;if(typeof b=="function")j=function(){b(W)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,G=U.port2;U.port1.onmessage=W,j=function(){G.postMessage(null)}}else j=function(){v(W,0)};function Z(H){T=H,F||(F=!0,j())}function J(H,Q){P=v(function(){H(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,Z(R))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var K=h;h=Q;try{return H()}finally{h=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=h;h=H;try{return Q()}finally{h=K}},e.unstable_scheduleCallback=function(H,Q,K){var ne=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=K+he,H={id:c++,callback:Q,priorityLevel:H,startTime:K,expirationTime:he,sortIndex:-1},K>ne?(H.sortIndex=K,t(u,H),n(l)===null&&H===n(u)&&(y?(_(P),P=-1):y=!0,J(k,K-ne))):(H.sortIndex=he,t(l,H),g||m||(g=!0,Z(R))),H},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(H){var Q=h;return function(){var K=h;h=Q;try{return H.apply(this,arguments)}finally{h=K}}}})(j8);z8.exports=j8;var xre=z8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B8=M,go=xre;function xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H8=new Set,ay={};function Ad(e,t){Sp(e,t),Sp(e+"Capture",t)}function Sp(e,t){for(ay[e]=t,e=0;e<t.length;e++)H8.add(t[e])}var Il=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MR=Object.prototype.hasOwnProperty,_re=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GD={},qD={};function bre(e){return MR.call(qD,e)?!0:MR.call(GD,e)?!1:_re.test(e)?qD[e]=!0:(GD[e]=!0,!1)}function wre(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sre(e,t,n,i){if(t===null||typeof t>"u"||wre(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,n,i,r,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fi[e]=new _r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fi[t]=new _r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fi[e]=new _r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fi[e]=new _r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fi[e]=new _r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fi[e]=new _r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fi[e]=new _r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fi[e]=new _r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fi[e]=new _r(e,5,!1,e.toLowerCase(),null,!1,!1)});var hM=/[\-:]([a-z])/g;function pM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hM,pM);Fi[t]=new _r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hM,pM);Fi[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hM,pM);Fi[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fi[e]=new _r(e,1,!1,e.toLowerCase(),null,!1,!1)});Fi.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fi[e]=new _r(e,1,!1,e.toLowerCase(),null,!0,!0)});function mM(e,t,n,i){var r=Fi.hasOwnProperty(t)?Fi[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sre(t,n,r,i)&&(n=null),i||r===null?bre(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Vl=B8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G1=Symbol.for("react.element"),zh=Symbol.for("react.portal"),jh=Symbol.for("react.fragment"),gM=Symbol.for("react.strict_mode"),NR=Symbol.for("react.profiler"),U8=Symbol.for("react.provider"),W8=Symbol.for("react.context"),yM=Symbol.for("react.forward_ref"),PR=Symbol.for("react.suspense"),$R=Symbol.for("react.suspense_list"),vM=Symbol.for("react.memo"),xu=Symbol.for("react.lazy"),G8=Symbol.for("react.offscreen"),VD=Symbol.iterator;function vg(e){return e===null||typeof e!="object"?null:(e=VD&&e[VD]||e["@@iterator"],typeof e=="function"?e:null)}var An=Object.assign,_E;function i0(e){if(_E===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_E=t&&t[1]||""}return`
`+_E+e}var bE=!1;function wE(e,t){if(!e||bE)return"";bE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||r[a]!==o[s]){var l=`
`+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{bE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?i0(e):""}function Cre(e){switch(e.tag){case 5:return i0(e.type);case 16:return i0("Lazy");case 13:return i0("Suspense");case 19:return i0("SuspenseList");case 0:case 2:case 15:return e=wE(e.type,!1),e;case 11:return e=wE(e.type.render,!1),e;case 1:return e=wE(e.type,!0),e;default:return""}}function OR(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jh:return"Fragment";case zh:return"Portal";case NR:return"Profiler";case gM:return"StrictMode";case PR:return"Suspense";case $R:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W8:return(e.displayName||"Context")+".Consumer";case U8:return(e._context.displayName||"Context")+".Provider";case yM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vM:return t=e.displayName||null,t!==null?t:OR(e.type)||"Memo";case xu:t=e._payload,e=e._init;try{return OR(e(t))}catch{}}return null}function Ere(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OR(t);case 8:return t===gM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kre(e){var t=q8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function q1(e){e._valueTracker||(e._valueTracker=kre(e))}function V8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q8(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function j_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function IR(e,t){var n=t.checked;return An({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function YD(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=rc(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y8(e,t){t=t.checked,t!=null&&mM(e,"checked",t,!1)}function LR(e,t){Y8(e,t);var n=rc(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?DR(e,t.type,n):t.hasOwnProperty("defaultValue")&&DR(e,t.type,rc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ZD(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function DR(e,t,n){(t!=="number"||j_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var r0=Array.isArray;function op(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+rc(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function zR(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xe(91));return An({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function XD(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(xe(92));if(r0(n)){if(1<n.length)throw Error(xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:rc(n)}}function Z8(e,t){var n=rc(t.value),i=rc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function KD(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function X8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jR(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?X8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var V1,K8=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(V1=V1||document.createElement("div"),V1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=V1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sy(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var P0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rre=["Webkit","ms","Moz","O"];Object.keys(P0).forEach(function(e){Rre.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),P0[t]=P0[e]})});function J8(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||P0.hasOwnProperty(e)&&P0[e]?(""+t).trim():t+"px"}function Q8(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=J8(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var Tre=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BR(e,t){if(t){if(Tre[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xe(62))}}function HR(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UR=null;function xM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var WR=null,ap=null,sp=null;function JD(e){if(e=pv(e)){if(typeof WR!="function")throw Error(xe(280));var t=e.stateNode;t&&(t=d2(t),WR(e.stateNode,e.type,t))}}function e9(e){ap?sp?sp.push(e):sp=[e]:ap=e}function t9(){if(ap){var e=ap,t=sp;if(sp=ap=null,JD(e),t)for(e=0;e<t.length;e++)JD(t[e])}}function n9(e,t){return e(t)}function i9(){}var SE=!1;function r9(e,t,n){if(SE)return e(t,n);SE=!0;try{return n9(e,t,n)}finally{SE=!1,(ap!==null||sp!==null)&&(i9(),t9())}}function ly(e,t){var n=e.stateNode;if(n===null)return null;var i=d2(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(xe(231,t,typeof n));return n}var GR=!1;if(Il)try{var xg={};Object.defineProperty(xg,"passive",{get:function(){GR=!0}}),window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch{GR=!1}function Are(e,t,n,i,r,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var $0=!1,B_=null,H_=!1,qR=null,Fre={onError:function(e){$0=!0,B_=e}};function Mre(e,t,n,i,r,o,a,s,l){$0=!1,B_=null,Are.apply(Fre,arguments)}function Nre(e,t,n,i,r,o,a,s,l){if(Mre.apply(this,arguments),$0){if($0){var u=B_;$0=!1,B_=null}else throw Error(xe(198));H_||(H_=!0,qR=u)}}function Fd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function o9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function QD(e){if(Fd(e)!==e)throw Error(xe(188))}function Pre(e){var t=e.alternate;if(!t){if(t=Fd(e),t===null)throw Error(xe(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return QD(r),e;if(o===i)return QD(r),t;o=o.sibling}throw Error(xe(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,s=r.child;s;){if(s===n){a=!0,n=r,i=o;break}if(s===i){a=!0,i=r,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=r;break}if(s===i){a=!0,i=o,n=r;break}s=s.sibling}if(!a)throw Error(xe(189))}}if(n.alternate!==i)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?e:t}function a9(e){return e=Pre(e),e!==null?s9(e):null}function s9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=s9(e);if(t!==null)return t;e=e.sibling}return null}var l9=go.unstable_scheduleCallback,e5=go.unstable_cancelCallback,$re=go.unstable_shouldYield,Ore=go.unstable_requestPaint,Dn=go.unstable_now,Ire=go.unstable_getCurrentPriorityLevel,_M=go.unstable_ImmediatePriority,u9=go.unstable_UserBlockingPriority,U_=go.unstable_NormalPriority,Lre=go.unstable_LowPriority,c9=go.unstable_IdlePriority,l2=null,ps=null;function Dre(e){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(l2,e,void 0,(e.current.flags&128)===128)}catch{}}var Ta=Math.clz32?Math.clz32:Bre,zre=Math.log,jre=Math.LN2;function Bre(e){return e>>>=0,e===0?32:31-(zre(e)/jre|0)|0}var Y1=64,Z1=4194304;function o0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function W_(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~r;s!==0?i=o0(s):(o&=a,o!==0&&(i=o0(o)))}else a=n&~r,a!==0?i=o0(a):o!==0&&(i=o0(o));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Ta(t),r=1<<n,i|=e[n],t&=~r;return i}function Hre(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ure(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ta(o),s=1<<a,l=r[a];l===-1?(!(s&n)||s&i)&&(r[a]=Hre(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function VR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function f9(){var e=Y1;return Y1<<=1,!(Y1&4194240)&&(Y1=64),e}function CE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ta(t),e[t]=n}function Wre(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Ta(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}function bM(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ta(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var en=0;function d9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var h9,wM,p9,m9,g9,YR=!1,X1=[],Uu=null,Wu=null,Gu=null,uy=new Map,cy=new Map,Ru=[],Gre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t5(e,t){switch(e){case"focusin":case"focusout":Uu=null;break;case"dragenter":case"dragleave":Wu=null;break;case"mouseover":case"mouseout":Gu=null;break;case"pointerover":case"pointerout":uy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cy.delete(t.pointerId)}}function _g(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=pv(t),t!==null&&wM(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function qre(e,t,n,i,r){switch(t){case"focusin":return Uu=_g(Uu,e,t,n,i,r),!0;case"dragenter":return Wu=_g(Wu,e,t,n,i,r),!0;case"mouseover":return Gu=_g(Gu,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return uy.set(o,_g(uy.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,cy.set(o,_g(cy.get(o)||null,e,t,n,i,r)),!0}return!1}function y9(e){var t=Rf(e.target);if(t!==null){var n=Fd(t);if(n!==null){if(t=n.tag,t===13){if(t=o9(n),t!==null){e.blockedOn=t,g9(e.priority,function(){p9(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function n_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ZR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);UR=i,n.target.dispatchEvent(i),UR=null}else return t=pv(n),t!==null&&wM(t),e.blockedOn=n,!1;t.shift()}return!0}function n5(e,t,n){n_(e)&&n.delete(t)}function Vre(){YR=!1,Uu!==null&&n_(Uu)&&(Uu=null),Wu!==null&&n_(Wu)&&(Wu=null),Gu!==null&&n_(Gu)&&(Gu=null),uy.forEach(n5),cy.forEach(n5)}function bg(e,t){e.blockedOn===t&&(e.blockedOn=null,YR||(YR=!0,go.unstable_scheduleCallback(go.unstable_NormalPriority,Vre)))}function fy(e){function t(r){return bg(r,e)}if(0<X1.length){bg(X1[0],e);for(var n=1;n<X1.length;n++){var i=X1[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Uu!==null&&bg(Uu,e),Wu!==null&&bg(Wu,e),Gu!==null&&bg(Gu,e),uy.forEach(t),cy.forEach(t),n=0;n<Ru.length;n++)i=Ru[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ru.length&&(n=Ru[0],n.blockedOn===null);)y9(n),n.blockedOn===null&&Ru.shift()}var lp=Vl.ReactCurrentBatchConfig,G_=!0;function Yre(e,t,n,i){var r=en,o=lp.transition;lp.transition=null;try{en=1,SM(e,t,n,i)}finally{en=r,lp.transition=o}}function Zre(e,t,n,i){var r=en,o=lp.transition;lp.transition=null;try{en=4,SM(e,t,n,i)}finally{en=r,lp.transition=o}}function SM(e,t,n,i){if(G_){var r=ZR(e,t,n,i);if(r===null)$E(e,t,i,q_,n),t5(e,i);else if(qre(r,e,t,n,i))i.stopPropagation();else if(t5(e,i),t&4&&-1<Gre.indexOf(e)){for(;r!==null;){var o=pv(r);if(o!==null&&h9(o),o=ZR(e,t,n,i),o===null&&$E(e,t,i,q_,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else $E(e,t,i,null,n)}}var q_=null;function ZR(e,t,n,i){if(q_=null,e=xM(i),e=Rf(e),e!==null)if(t=Fd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=o9(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return q_=e,null}function v9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ire()){case _M:return 1;case u9:return 4;case U_:case Lre:return 16;case c9:return 536870912;default:return 16}default:return 16}}var Mu=null,CM=null,i_=null;function x9(){if(i_)return i_;var e,t=CM,n=t.length,i,r="value"in Mu?Mu.value:Mu.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[o-i];i++);return i_=r.slice(e,1<i?1-i:void 0)}function r_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function K1(){return!0}function i5(){return!1}function Co(e){function t(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?K1:i5,this.isPropagationStopped=i5,this}return An(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=K1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=K1)},persist:function(){},isPersistent:K1}),t}var mm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EM=Co(mm),hv=An({},mm,{view:0,detail:0}),Xre=Co(hv),EE,kE,wg,u2=An({},hv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kM,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wg&&(wg&&e.type==="mousemove"?(EE=e.screenX-wg.screenX,kE=e.screenY-wg.screenY):kE=EE=0,wg=e),EE)},movementY:function(e){return"movementY"in e?e.movementY:kE}}),r5=Co(u2),Kre=An({},u2,{dataTransfer:0}),Jre=Co(Kre),Qre=An({},hv,{relatedTarget:0}),RE=Co(Qre),eoe=An({},mm,{animationName:0,elapsedTime:0,pseudoElement:0}),toe=Co(eoe),noe=An({},mm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ioe=Co(noe),roe=An({},mm,{data:0}),o5=Co(roe),ooe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aoe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},soe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function loe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=soe[e])?!!t[e]:!1}function kM(){return loe}var uoe=An({},hv,{key:function(e){if(e.key){var t=ooe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=r_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aoe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kM,charCode:function(e){return e.type==="keypress"?r_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?r_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),coe=Co(uoe),foe=An({},u2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a5=Co(foe),doe=An({},hv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kM}),hoe=Co(doe),poe=An({},mm,{propertyName:0,elapsedTime:0,pseudoElement:0}),moe=Co(poe),goe=An({},u2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yoe=Co(goe),voe=[9,13,27,32],RM=Il&&"CompositionEvent"in window,O0=null;Il&&"documentMode"in document&&(O0=document.documentMode);var xoe=Il&&"TextEvent"in window&&!O0,_9=Il&&(!RM||O0&&8<O0&&11>=O0),s5=" ",l5=!1;function b9(e,t){switch(e){case"keyup":return voe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bh=!1;function _oe(e,t){switch(e){case"compositionend":return w9(t);case"keypress":return t.which!==32?null:(l5=!0,s5);case"textInput":return e=t.data,e===s5&&l5?null:e;default:return null}}function boe(e,t){if(Bh)return e==="compositionend"||!RM&&b9(e,t)?(e=x9(),i_=CM=Mu=null,Bh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _9&&t.locale!=="ko"?null:t.data;default:return null}}var woe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!woe[e.type]:t==="textarea"}function S9(e,t,n,i){e9(i),t=V_(t,"onChange"),0<t.length&&(n=new EM("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var I0=null,dy=null;function Soe(e){$9(e,0)}function c2(e){var t=Wh(e);if(V8(t))return e}function Coe(e,t){if(e==="change")return t}var C9=!1;if(Il){var TE;if(Il){var AE="oninput"in document;if(!AE){var c5=document.createElement("div");c5.setAttribute("oninput","return;"),AE=typeof c5.oninput=="function"}TE=AE}else TE=!1;C9=TE&&(!document.documentMode||9<document.documentMode)}function f5(){I0&&(I0.detachEvent("onpropertychange",E9),dy=I0=null)}function E9(e){if(e.propertyName==="value"&&c2(dy)){var t=[];S9(t,dy,e,xM(e)),r9(Soe,t)}}function Eoe(e,t,n){e==="focusin"?(f5(),I0=t,dy=n,I0.attachEvent("onpropertychange",E9)):e==="focusout"&&f5()}function koe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return c2(dy)}function Roe(e,t){if(e==="click")return c2(t)}function Toe(e,t){if(e==="input"||e==="change")return c2(t)}function Aoe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pa=typeof Object.is=="function"?Object.is:Aoe;function hy(e,t){if(Pa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!MR.call(t,r)||!Pa(e[r],t[r]))return!1}return!0}function d5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function h5(e,t){var n=d5(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d5(n)}}function k9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?k9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function R9(){for(var e=window,t=j_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=j_(e.document)}return t}function TM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Foe(e){var t=R9(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&k9(n.ownerDocument.documentElement,n)){if(i!==null&&TM(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=h5(n,o);var a=h5(n,i);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Moe=Il&&"documentMode"in document&&11>=document.documentMode,Hh=null,XR=null,L0=null,KR=!1;function p5(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;KR||Hh==null||Hh!==j_(i)||(i=Hh,"selectionStart"in i&&TM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),L0&&hy(L0,i)||(L0=i,i=V_(XR,"onSelect"),0<i.length&&(t=new EM("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Hh)))}function J1(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Uh={animationend:J1("Animation","AnimationEnd"),animationiteration:J1("Animation","AnimationIteration"),animationstart:J1("Animation","AnimationStart"),transitionend:J1("Transition","TransitionEnd")},FE={},T9={};Il&&(T9=document.createElement("div").style,"AnimationEvent"in window||(delete Uh.animationend.animation,delete Uh.animationiteration.animation,delete Uh.animationstart.animation),"TransitionEvent"in window||delete Uh.transitionend.transition);function f2(e){if(FE[e])return FE[e];if(!Uh[e])return e;var t=Uh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in T9)return FE[e]=t[n];return e}var A9=f2("animationend"),F9=f2("animationiteration"),M9=f2("animationstart"),N9=f2("transitionend"),P9=new Map,m5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rc(e,t){P9.set(e,t),Ad(t,[e])}for(var ME=0;ME<m5.length;ME++){var NE=m5[ME],Noe=NE.toLowerCase(),Poe=NE[0].toUpperCase()+NE.slice(1);Rc(Noe,"on"+Poe)}Rc(A9,"onAnimationEnd");Rc(F9,"onAnimationIteration");Rc(M9,"onAnimationStart");Rc("dblclick","onDoubleClick");Rc("focusin","onFocus");Rc("focusout","onBlur");Rc(N9,"onTransitionEnd");Sp("onMouseEnter",["mouseout","mouseover"]);Sp("onMouseLeave",["mouseout","mouseover"]);Sp("onPointerEnter",["pointerout","pointerover"]);Sp("onPointerLeave",["pointerout","pointerover"]);Ad("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ad("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ad("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ad("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var a0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$oe=new Set("cancel close invalid load scroll toggle".split(" ").concat(a0));function g5(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,Nre(i,t,void 0,e),e.currentTarget=null}function $9(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;g5(r,s,u),o=l}else for(a=0;a<i.length;a++){if(s=i[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;g5(r,s,u),o=l}}}if(H_)throw e=qR,H_=!1,qR=null,e}function pn(e,t){var n=t[nT];n===void 0&&(n=t[nT]=new Set);var i=e+"__bubble";n.has(i)||(O9(t,e,2,!1),n.add(i))}function PE(e,t,n){var i=0;t&&(i|=4),O9(n,e,i,t)}var Q1="_reactListening"+Math.random().toString(36).slice(2);function py(e){if(!e[Q1]){e[Q1]=!0,H8.forEach(function(n){n!=="selectionchange"&&($oe.has(n)||PE(n,!1,e),PE(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Q1]||(t[Q1]=!0,PE("selectionchange",!1,t))}}function O9(e,t,n,i){switch(v9(t)){case 1:var r=Yre;break;case 4:r=Zre;break;default:r=SM}n=r.bind(null,t,n,e),r=void 0,!GR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function $E(e,t,n,i,r){var o=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var s=i.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;s!==null;){if(a=Rf(s),a===null)return;if(l=a.tag,l===5||l===6){i=o=a;continue e}s=s.parentNode}}i=i.return}r9(function(){var u=o,c=xM(n),d=[];e:{var h=P9.get(e);if(h!==void 0){var m=EM,g=e;switch(e){case"keypress":if(r_(n)===0)break e;case"keydown":case"keyup":m=coe;break;case"focusin":g="focus",m=RE;break;case"focusout":g="blur",m=RE;break;case"beforeblur":case"afterblur":m=RE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=r5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Jre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hoe;break;case A9:case F9:case M9:m=toe;break;case N9:m=moe;break;case"scroll":m=Xre;break;case"wheel":m=yoe;break;case"copy":case"cut":case"paste":m=ioe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=a5}var y=(t&4)!==0,v=!y&&e==="scroll",_=y?h!==null?h+"Capture":null:h;y=[];for(var b=u,S;b!==null;){S=b;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,_!==null&&(k=ly(b,_),k!=null&&y.push(my(b,k,S)))),v)break;b=b.return}0<y.length&&(h=new m(h,g,null,n,c),d.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==UR&&(g=n.relatedTarget||n.fromElement)&&(Rf(g)||g[Ll]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Rf(g):null,g!==null&&(v=Fd(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=r5,k="onMouseLeave",_="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=a5,k="onPointerLeave",_="onPointerEnter",b="pointer"),v=m==null?h:Wh(m),S=g==null?h:Wh(g),h=new y(k,b+"leave",m,n,c),h.target=v,h.relatedTarget=S,k=null,Rf(c)===u&&(y=new y(_,b+"enter",g,n,c),y.target=S,y.relatedTarget=v,k=y),v=k,m&&g)t:{for(y=m,_=g,b=0,S=y;S;S=yh(S))b++;for(S=0,k=_;k;k=yh(k))S++;for(;0<b-S;)y=yh(y),b--;for(;0<S-b;)_=yh(_),S--;for(;b--;){if(y===_||_!==null&&y===_.alternate)break t;y=yh(y),_=yh(_)}y=null}else y=null;m!==null&&y5(d,h,m,y,!1),g!==null&&v!==null&&y5(d,v,g,y,!0)}}e:{if(h=u?Wh(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var R=Coe;else if(u5(h))if(C9)R=Toe;else{R=koe;var F=Eoe}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=Roe);if(R&&(R=R(e,u))){S9(d,R,n,c);break e}F&&F(e,h,u),e==="focusout"&&(F=h._wrapperState)&&F.controlled&&h.type==="number"&&DR(h,"number",h.value)}switch(F=u?Wh(u):window,e){case"focusin":(u5(F)||F.contentEditable==="true")&&(Hh=F,XR=u,L0=null);break;case"focusout":L0=XR=Hh=null;break;case"mousedown":KR=!0;break;case"contextmenu":case"mouseup":case"dragend":KR=!1,p5(d,n,c);break;case"selectionchange":if(Moe)break;case"keydown":case"keyup":p5(d,n,c)}var T;if(RM)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Bh?b9(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(_9&&n.locale!=="ko"&&(Bh||P!=="onCompositionStart"?P==="onCompositionEnd"&&Bh&&(T=x9()):(Mu=c,CM="value"in Mu?Mu.value:Mu.textContent,Bh=!0)),F=V_(u,P),0<F.length&&(P=new o5(P,e,null,n,c),d.push({event:P,listeners:F}),T?P.data=T:(T=w9(n),T!==null&&(P.data=T)))),(T=xoe?_oe(e,n):boe(e,n))&&(u=V_(u,"onBeforeInput"),0<u.length&&(c=new o5("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}$9(d,t)})}function my(e,t,n){return{instance:e,listener:t,currentTarget:n}}function V_(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ly(e,n),o!=null&&i.unshift(my(e,o,r)),o=ly(e,t),o!=null&&i.push(my(e,o,r))),e=e.return}return i}function yh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y5(e,t,n,i,r){for(var o=t._reactName,a=[];n!==null&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===i)break;s.tag===5&&u!==null&&(s=u,r?(l=ly(n,o),l!=null&&a.unshift(my(n,l,s))):r||(l=ly(n,o),l!=null&&a.push(my(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Ooe=/\r\n?/g,Ioe=/\u0000|\uFFFD/g;function v5(e){return(typeof e=="string"?e:""+e).replace(Ooe,`
`).replace(Ioe,"")}function ex(e,t,n){if(t=v5(t),v5(e)!==t&&n)throw Error(xe(425))}function Y_(){}var JR=null,QR=null;function eT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tT=typeof setTimeout=="function"?setTimeout:void 0,Loe=typeof clearTimeout=="function"?clearTimeout:void 0,x5=typeof Promise=="function"?Promise:void 0,Doe=typeof queueMicrotask=="function"?queueMicrotask:typeof x5<"u"?function(e){return x5.resolve(null).then(e).catch(zoe)}:tT;function zoe(e){setTimeout(function(){throw e})}function OE(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),fy(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);fy(t)}function qu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gm=Math.random().toString(36).slice(2),us="__reactFiber$"+gm,gy="__reactProps$"+gm,Ll="__reactContainer$"+gm,nT="__reactEvents$"+gm,joe="__reactListeners$"+gm,Boe="__reactHandles$"+gm;function Rf(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ll]||n[us]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_5(e);e!==null;){if(n=e[us])return n;e=_5(e)}return t}e=n,n=e.parentNode}return null}function pv(e){return e=e[us]||e[Ll],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xe(33))}function d2(e){return e[gy]||null}var iT=[],Gh=-1;function Tc(e){return{current:e}}function yn(e){0>Gh||(e.current=iT[Gh],iT[Gh]=null,Gh--)}function un(e,t){Gh++,iT[Gh]=e.current,e.current=t}var oc={},Ki=Tc(oc),zr=Tc(!1),Kf=oc;function Cp(e,t){var n=e.type.contextTypes;if(!n)return oc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function jr(e){return e=e.childContextTypes,e!=null}function Z_(){yn(zr),yn(Ki)}function b5(e,t,n){if(Ki.current!==oc)throw Error(xe(168));un(Ki,t),un(zr,n)}function I9(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(xe(108,Ere(e)||"Unknown",r));return An({},n,i)}function X_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oc,Kf=Ki.current,un(Ki,e),un(zr,zr.current),!0}function w5(e,t,n){var i=e.stateNode;if(!i)throw Error(xe(169));n?(e=I9(e,t,Kf),i.__reactInternalMemoizedMergedChildContext=e,yn(zr),yn(Ki),un(Ki,e)):yn(zr),un(zr,n)}var ll=null,h2=!1,IE=!1;function L9(e){ll===null?ll=[e]:ll.push(e)}function Hoe(e){h2=!0,L9(e)}function Ac(){if(!IE&&ll!==null){IE=!0;var e=0,t=en;try{var n=ll;for(en=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}ll=null,h2=!1}catch(r){throw ll!==null&&(ll=ll.slice(e+1)),l9(_M,Ac),r}finally{en=t,IE=!1}}return null}var qh=[],Vh=0,K_=null,J_=0,Mo=[],No=0,Jf=null,gl=1,yl="";function mf(e,t){qh[Vh++]=J_,qh[Vh++]=K_,K_=e,J_=t}function D9(e,t,n){Mo[No++]=gl,Mo[No++]=yl,Mo[No++]=Jf,Jf=e;var i=gl;e=yl;var r=32-Ta(i)-1;i&=~(1<<r),n+=1;var o=32-Ta(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,gl=1<<32-Ta(t)+r|n<<r|i,yl=o+e}else gl=1<<o|n<<r|i,yl=e}function AM(e){e.return!==null&&(mf(e,1),D9(e,1,0))}function FM(e){for(;e===K_;)K_=qh[--Vh],qh[Vh]=null,J_=qh[--Vh],qh[Vh]=null;for(;e===Jf;)Jf=Mo[--No],Mo[No]=null,yl=Mo[--No],Mo[No]=null,gl=Mo[--No],Mo[No]=null}var ho=null,lo=null,wn=!1,ya=null;function z9(e,t){var n=Oo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function S5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ho=e,lo=qu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ho=e,lo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Jf!==null?{id:gl,overflow:yl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Oo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ho=e,lo=null,!0):!1;default:return!1}}function rT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oT(e){if(wn){var t=lo;if(t){var n=t;if(!S5(e,t)){if(rT(e))throw Error(xe(418));t=qu(n.nextSibling);var i=ho;t&&S5(e,t)?z9(i,n):(e.flags=e.flags&-4097|2,wn=!1,ho=e)}}else{if(rT(e))throw Error(xe(418));e.flags=e.flags&-4097|2,wn=!1,ho=e}}}function C5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ho=e}function tx(e){if(e!==ho)return!1;if(!wn)return C5(e),wn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eT(e.type,e.memoizedProps)),t&&(t=lo)){if(rT(e))throw j9(),Error(xe(418));for(;t;)z9(e,t),t=qu(t.nextSibling)}if(C5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){lo=qu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}lo=null}}else lo=ho?qu(e.stateNode.nextSibling):null;return!0}function j9(){for(var e=lo;e;)e=qu(e.nextSibling)}function Ep(){lo=ho=null,wn=!1}function MM(e){ya===null?ya=[e]:ya.push(e)}var Uoe=Vl.ReactCurrentBatchConfig;function da(e,t){if(e&&e.defaultProps){t=An({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Q_=Tc(null),eb=null,Yh=null,NM=null;function PM(){NM=Yh=eb=null}function $M(e){var t=Q_.current;yn(Q_),e._currentValue=t}function aT(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function up(e,t){eb=e,NM=Yh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Lr=!0),e.firstContext=null)}function Uo(e){var t=e._currentValue;if(NM!==e)if(e={context:e,memoizedValue:t,next:null},Yh===null){if(eb===null)throw Error(xe(308));Yh=e,eb.dependencies={lanes:0,firstContext:e}}else Yh=Yh.next=e;return t}var Tf=null;function OM(e){Tf===null?Tf=[e]:Tf.push(e)}function B9(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,OM(t)):(n.next=r.next,r.next=n),t.interleaved=n,Dl(e,i)}function Dl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _u=!1;function IM(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H9(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function El(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vu(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Dl(e,n)}return r=i.interleaved,r===null?(t.next=t,OM(i)):(t.next=r.next,r.next=t),i.interleaved=t,Dl(e,n)}function o_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,bM(e,n)}}function E5(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function tb(e,t,n,i){var r=e.updateQueue;_u=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;a=0,c=u=l=null,s=o;do{var h=s.lane,m=s.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,y=s;switch(h=t,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=An({},d,h);break e;case 2:_u=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[s]:h.push(s))}else m={eventTime:m,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,a|=h;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;h=s,s=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);ed|=a,e.lanes=a,e.memoizedState=d}}function k5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(xe(191,r));r.call(i)}}}var U9=new B8.Component().refs;function sT(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:An({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var p2={isMounted:function(e){return(e=e._reactInternals)?Fd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=dr(),r=Zu(e),o=El(i,r);o.payload=t,n!=null&&(o.callback=n),t=Vu(e,o,r),t!==null&&(Aa(t,e,r,i),o_(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=dr(),r=Zu(e),o=El(i,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Vu(e,o,r),t!==null&&(Aa(t,e,r,i),o_(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dr(),i=Zu(e),r=El(n,i);r.tag=2,t!=null&&(r.callback=t),t=Vu(e,r,i),t!==null&&(Aa(t,e,i,n),o_(t,e,i))}};function R5(e,t,n,i,r,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,a):t.prototype&&t.prototype.isPureReactComponent?!hy(n,i)||!hy(r,o):!0}function W9(e,t,n){var i=!1,r=oc,o=t.contextType;return typeof o=="object"&&o!==null?o=Uo(o):(r=jr(t)?Kf:Ki.current,i=t.contextTypes,o=(i=i!=null)?Cp(e,r):oc),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=p2,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function T5(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&p2.enqueueReplaceState(t,t.state,null)}function lT(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=U9,IM(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=Uo(o):(o=jr(t)?Kf:Ki.current,r.context=Cp(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(sT(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&p2.enqueueReplaceState(r,r.state,null),tb(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Sg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xe(309));var i=n.stateNode}if(!i)throw Error(xe(147,e));var r=i,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=r.refs;s===U9&&(s=r.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(xe(284));if(!n._owner)throw Error(xe(290,e))}return e}function nx(e,t){throw e=Object.prototype.toString.call(t),Error(xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function A5(e){var t=e._init;return t(e._payload)}function G9(e){function t(_,b){if(e){var S=_.deletions;S===null?(_.deletions=[b],_.flags|=16):S.push(b)}}function n(_,b){if(!e)return null;for(;b!==null;)t(_,b),b=b.sibling;return null}function i(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function r(_,b){return _=Xu(_,b),_.index=0,_.sibling=null,_}function o(_,b,S){return _.index=S,e?(S=_.alternate,S!==null?(S=S.index,S<b?(_.flags|=2,b):S):(_.flags|=2,b)):(_.flags|=1048576,b)}function a(_){return e&&_.alternate===null&&(_.flags|=2),_}function s(_,b,S,k){return b===null||b.tag!==6?(b=UE(S,_.mode,k),b.return=_,b):(b=r(b,S),b.return=_,b)}function l(_,b,S,k){var R=S.type;return R===jh?c(_,b,S.props.children,k,S.key):b!==null&&(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===xu&&A5(R)===b.type)?(k=r(b,S.props),k.ref=Sg(_,b,S),k.return=_,k):(k=f_(S.type,S.key,S.props,null,_.mode,k),k.ref=Sg(_,b,S),k.return=_,k)}function u(_,b,S,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=WE(S,_.mode,k),b.return=_,b):(b=r(b,S.children||[]),b.return=_,b)}function c(_,b,S,k,R){return b===null||b.tag!==7?(b=Df(S,_.mode,k,R),b.return=_,b):(b=r(b,S),b.return=_,b)}function d(_,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=UE(""+b,_.mode,S),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case G1:return S=f_(b.type,b.key,b.props,null,_.mode,S),S.ref=Sg(_,null,b),S.return=_,S;case zh:return b=WE(b,_.mode,S),b.return=_,b;case xu:var k=b._init;return d(_,k(b._payload),S)}if(r0(b)||vg(b))return b=Df(b,_.mode,S,null),b.return=_,b;nx(_,b)}return null}function h(_,b,S,k){var R=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:s(_,b,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case G1:return S.key===R?l(_,b,S,k):null;case zh:return S.key===R?u(_,b,S,k):null;case xu:return R=S._init,h(_,b,R(S._payload),k)}if(r0(S)||vg(S))return R!==null?null:c(_,b,S,k,null);nx(_,S)}return null}function m(_,b,S,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(S)||null,s(b,_,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case G1:return _=_.get(k.key===null?S:k.key)||null,l(b,_,k,R);case zh:return _=_.get(k.key===null?S:k.key)||null,u(b,_,k,R);case xu:var F=k._init;return m(_,b,S,F(k._payload),R)}if(r0(k)||vg(k))return _=_.get(S)||null,c(b,_,k,R,null);nx(b,k)}return null}function g(_,b,S,k){for(var R=null,F=null,T=b,P=b=0,B=null;T!==null&&P<S.length;P++){T.index>P?(B=T,T=null):B=T.sibling;var O=h(_,T,S[P],k);if(O===null){T===null&&(T=B);break}e&&T&&O.alternate===null&&t(_,T),b=o(O,b,P),F===null?R=O:F.sibling=O,F=O,T=B}if(P===S.length)return n(_,T),wn&&mf(_,P),R;if(T===null){for(;P<S.length;P++)T=d(_,S[P],k),T!==null&&(b=o(T,b,P),F===null?R=T:F.sibling=T,F=T);return wn&&mf(_,P),R}for(T=i(_,T);P<S.length;P++)B=m(T,_,P,S[P],k),B!==null&&(e&&B.alternate!==null&&T.delete(B.key===null?P:B.key),b=o(B,b,P),F===null?R=B:F.sibling=B,F=B);return e&&T.forEach(function(D){return t(_,D)}),wn&&mf(_,P),R}function y(_,b,S,k){var R=vg(S);if(typeof R!="function")throw Error(xe(150));if(S=R.call(S),S==null)throw Error(xe(151));for(var F=R=null,T=b,P=b=0,B=null,O=S.next();T!==null&&!O.done;P++,O=S.next()){T.index>P?(B=T,T=null):B=T.sibling;var D=h(_,T,O.value,k);if(D===null){T===null&&(T=B);break}e&&T&&D.alternate===null&&t(_,T),b=o(D,b,P),F===null?R=D:F.sibling=D,F=D,T=B}if(O.done)return n(_,T),wn&&mf(_,P),R;if(T===null){for(;!O.done;P++,O=S.next())O=d(_,O.value,k),O!==null&&(b=o(O,b,P),F===null?R=O:F.sibling=O,F=O);return wn&&mf(_,P),R}for(T=i(_,T);!O.done;P++,O=S.next())O=m(T,_,P,O.value,k),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?P:O.key),b=o(O,b,P),F===null?R=O:F.sibling=O,F=O);return e&&T.forEach(function(W){return t(_,W)}),wn&&mf(_,P),R}function v(_,b,S,k){if(typeof S=="object"&&S!==null&&S.type===jh&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case G1:e:{for(var R=S.key,F=b;F!==null;){if(F.key===R){if(R=S.type,R===jh){if(F.tag===7){n(_,F.sibling),b=r(F,S.props.children),b.return=_,_=b;break e}}else if(F.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===xu&&A5(R)===F.type){n(_,F.sibling),b=r(F,S.props),b.ref=Sg(_,F,S),b.return=_,_=b;break e}n(_,F);break}else t(_,F);F=F.sibling}S.type===jh?(b=Df(S.props.children,_.mode,k,S.key),b.return=_,_=b):(k=f_(S.type,S.key,S.props,null,_.mode,k),k.ref=Sg(_,b,S),k.return=_,_=k)}return a(_);case zh:e:{for(F=S.key;b!==null;){if(b.key===F)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(_,b.sibling),b=r(b,S.children||[]),b.return=_,_=b;break e}else{n(_,b);break}else t(_,b);b=b.sibling}b=WE(S,_.mode,k),b.return=_,_=b}return a(_);case xu:return F=S._init,v(_,b,F(S._payload),k)}if(r0(S))return g(_,b,S,k);if(vg(S))return y(_,b,S,k);nx(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(_,b.sibling),b=r(b,S),b.return=_,_=b):(n(_,b),b=UE(S,_.mode,k),b.return=_,_=b),a(_)):n(_,b)}return v}var kp=G9(!0),q9=G9(!1),mv={},ms=Tc(mv),yy=Tc(mv),vy=Tc(mv);function Af(e){if(e===mv)throw Error(xe(174));return e}function LM(e,t){switch(un(vy,t),un(yy,e),un(ms,mv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jR(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jR(t,e)}yn(ms),un(ms,t)}function Rp(){yn(ms),yn(yy),yn(vy)}function V9(e){Af(vy.current);var t=Af(ms.current),n=jR(t,e.type);t!==n&&(un(yy,e),un(ms,n))}function DM(e){yy.current===e&&(yn(ms),yn(yy))}var Rn=Tc(0);function nb(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var LE=[];function zM(){for(var e=0;e<LE.length;e++)LE[e]._workInProgressVersionPrimary=null;LE.length=0}var a_=Vl.ReactCurrentDispatcher,DE=Vl.ReactCurrentBatchConfig,Qf=0,Tn=null,Yn=null,li=null,ib=!1,D0=!1,xy=0,Woe=0;function Oi(){throw Error(xe(321))}function jM(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pa(e[n],t[n]))return!1;return!0}function BM(e,t,n,i,r,o){if(Qf=o,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,a_.current=e===null||e.memoizedState===null?Yoe:Zoe,e=n(i,r),D0){o=0;do{if(D0=!1,xy=0,25<=o)throw Error(xe(301));o+=1,li=Yn=null,t.updateQueue=null,a_.current=Xoe,e=n(i,r)}while(D0)}if(a_.current=rb,t=Yn!==null&&Yn.next!==null,Qf=0,li=Yn=Tn=null,ib=!1,t)throw Error(xe(300));return e}function HM(){var e=xy!==0;return xy=0,e}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Tn.memoizedState=li=e:li=li.next=e,li}function Wo(){if(Yn===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=Yn.next;var t=li===null?Tn.memoizedState:li.next;if(t!==null)li=t,Yn=e;else{if(e===null)throw Error(xe(310));Yn=e,e={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},li===null?Tn.memoizedState=li=e:li=li.next=e}return li}function _y(e,t){return typeof t=="function"?t(e):t}function zE(e){var t=Wo(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var i=Yn,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((Qf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=i):l=l.next=d,Tn.lanes|=c,ed|=c}u=u.next}while(u!==null&&u!==o);l===null?a=i:l.next=s,Pa(i,t.memoizedState)||(Lr=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do o=r.lane,Tn.lanes|=o,ed|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jE(e){var t=Wo(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=e(o,a.action),a=a.next;while(a!==r);Pa(o,t.memoizedState)||(Lr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Y9(){}function Z9(e,t){var n=Tn,i=Wo(),r=t(),o=!Pa(i.memoizedState,r);if(o&&(i.memoizedState=r,Lr=!0),i=i.queue,UM(J9.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||li!==null&&li.memoizedState.tag&1){if(n.flags|=2048,by(9,K9.bind(null,n,i,r,t),void 0,null),gi===null)throw Error(xe(349));Qf&30||X9(n,t,r)}return r}function X9(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function K9(e,t,n,i){t.value=n,t.getSnapshot=i,Q9(t)&&e7(e)}function J9(e,t,n){return n(function(){Q9(t)&&e7(e)})}function Q9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pa(e,n)}catch{return!0}}function e7(e){var t=Dl(e,1);t!==null&&Aa(t,e,1,-1)}function F5(e){var t=os();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:e},t.queue=e,e=e.dispatch=Voe.bind(null,Tn,e),[t.memoizedState,e]}function by(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function t7(){return Wo().memoizedState}function s_(e,t,n,i){var r=os();Tn.flags|=e,r.memoizedState=by(1|t,n,void 0,i===void 0?null:i)}function m2(e,t,n,i){var r=Wo();i=i===void 0?null:i;var o=void 0;if(Yn!==null){var a=Yn.memoizedState;if(o=a.destroy,i!==null&&jM(i,a.deps)){r.memoizedState=by(t,n,o,i);return}}Tn.flags|=e,r.memoizedState=by(1|t,n,o,i)}function M5(e,t){return s_(8390656,8,e,t)}function UM(e,t){return m2(2048,8,e,t)}function n7(e,t){return m2(4,2,e,t)}function i7(e,t){return m2(4,4,e,t)}function r7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o7(e,t,n){return n=n!=null?n.concat([e]):null,m2(4,4,r7.bind(null,t,e),n)}function WM(){}function a7(e,t){var n=Wo();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&jM(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function s7(e,t){var n=Wo();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&jM(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function l7(e,t,n){return Qf&21?(Pa(n,t)||(n=f9(),Tn.lanes|=n,ed|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Lr=!0),e.memoizedState=n)}function Goe(e,t){var n=en;en=n!==0&&4>n?n:4,e(!0);var i=DE.transition;DE.transition={};try{e(!1),t()}finally{en=n,DE.transition=i}}function u7(){return Wo().memoizedState}function qoe(e,t,n){var i=Zu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},c7(e))f7(t,n);else if(n=B9(e,t,n,i),n!==null){var r=dr();Aa(n,e,i,r),d7(n,t,i)}}function Voe(e,t,n){var i=Zu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(c7(e))f7(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,Pa(s,a)){var l=t.interleaved;l===null?(r.next=r,OM(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=B9(e,t,r,i),n!==null&&(r=dr(),Aa(n,e,i,r),d7(n,t,i))}}function c7(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function f7(e,t){D0=ib=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function d7(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,bM(e,n)}}var rb={readContext:Uo,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},Yoe={readContext:Uo,useCallback:function(e,t){return os().memoizedState=[e,t===void 0?null:t],e},useContext:Uo,useEffect:M5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,s_(4194308,4,r7.bind(null,t,e),n)},useLayoutEffect:function(e,t){return s_(4194308,4,e,t)},useInsertionEffect:function(e,t){return s_(4,2,e,t)},useMemo:function(e,t){var n=os();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=os();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qoe.bind(null,Tn,e),[i.memoizedState,e]},useRef:function(e){var t=os();return e={current:e},t.memoizedState=e},useState:F5,useDebugValue:WM,useDeferredValue:function(e){return os().memoizedState=e},useTransition:function(){var e=F5(!1),t=e[0];return e=Goe.bind(null,e[1]),os().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Tn,r=os();if(wn){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=t(),gi===null)throw Error(xe(349));Qf&30||X9(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,M5(J9.bind(null,i,o,e),[e]),i.flags|=2048,by(9,K9.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=os(),t=gi.identifierPrefix;if(wn){var n=yl,i=gl;n=(i&~(1<<32-Ta(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=xy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Woe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zoe={readContext:Uo,useCallback:a7,useContext:Uo,useEffect:UM,useImperativeHandle:o7,useInsertionEffect:n7,useLayoutEffect:i7,useMemo:s7,useReducer:zE,useRef:t7,useState:function(){return zE(_y)},useDebugValue:WM,useDeferredValue:function(e){var t=Wo();return l7(t,Yn.memoizedState,e)},useTransition:function(){var e=zE(_y)[0],t=Wo().memoizedState;return[e,t]},useMutableSource:Y9,useSyncExternalStore:Z9,useId:u7,unstable_isNewReconciler:!1},Xoe={readContext:Uo,useCallback:a7,useContext:Uo,useEffect:UM,useImperativeHandle:o7,useInsertionEffect:n7,useLayoutEffect:i7,useMemo:s7,useReducer:jE,useRef:t7,useState:function(){return jE(_y)},useDebugValue:WM,useDeferredValue:function(e){var t=Wo();return Yn===null?t.memoizedState=e:l7(t,Yn.memoizedState,e)},useTransition:function(){var e=jE(_y)[0],t=Wo().memoizedState;return[e,t]},useMutableSource:Y9,useSyncExternalStore:Z9,useId:u7,unstable_isNewReconciler:!1};function Tp(e,t){try{var n="",i=t;do n+=Cre(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function BE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function uT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Koe=typeof WeakMap=="function"?WeakMap:Map;function h7(e,t,n){n=El(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ab||(ab=!0,xT=i),uT(e,t)},n}function p7(e,t,n){n=El(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){uT(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){uT(e,t),typeof i!="function"&&(Yu===null?Yu=new Set([this]):Yu.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function N5(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Koe;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=fae.bind(null,e,t,n),t.then(e,e))}function P5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $5(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=El(-1,1),t.tag=2,Vu(n,t,1))),n.lanes|=1),e)}var Joe=Vl.ReactCurrentOwner,Lr=!1;function or(e,t,n,i){t.child=e===null?q9(t,null,n,i):kp(t,e.child,n,i)}function O5(e,t,n,i,r){n=n.render;var o=t.ref;return up(t,r),i=BM(e,t,n,i,o,r),n=HM(),e!==null&&!Lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zl(e,t,r)):(wn&&n&&AM(t),t.flags|=1,or(e,t,i,r),t.child)}function I5(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!JM(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,m7(e,t,o,i,r)):(e=f_(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:hy,n(a,i)&&e.ref===t.ref)return zl(e,t,r)}return t.flags|=1,e=Xu(o,i),e.ref=t.ref,e.return=t,t.child=e}function m7(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if(hy(o,i)&&e.ref===t.ref)if(Lr=!1,t.pendingProps=i=o,(e.lanes&r)!==0)e.flags&131072&&(Lr=!0);else return t.lanes=e.lanes,zl(e,t,r)}return cT(e,t,n,i,r)}function g7(e,t,n){var i=t.pendingProps,r=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Xh,io),io|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,un(Xh,io),io|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,un(Xh,io),io|=i}else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,un(Xh,io),io|=i;return or(e,t,r,n),t.child}function y7(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cT(e,t,n,i,r){var o=jr(n)?Kf:Ki.current;return o=Cp(t,o),up(t,r),n=BM(e,t,n,i,o,r),i=HM(),e!==null&&!Lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zl(e,t,r)):(wn&&i&&AM(t),t.flags|=1,or(e,t,n,r),t.child)}function L5(e,t,n,i,r){if(jr(n)){var o=!0;X_(t)}else o=!1;if(up(t,r),t.stateNode===null)l_(e,t),W9(t,n,i),lT(t,n,i,r),i=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Uo(u):(u=jr(n)?Kf:Ki.current,u=Cp(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==i||l!==u)&&T5(t,a,i,u),_u=!1;var h=t.memoizedState;a.state=h,tb(t,i,a,r),l=t.memoizedState,s!==i||h!==l||zr.current||_u?(typeof c=="function"&&(sT(t,n,c,i),l=t.memoizedState),(s=_u||R5(t,n,s,i,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,H9(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:da(t.type,s),a.props=u,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Uo(l):(l=jr(n)?Kf:Ki.current,l=Cp(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&T5(t,a,i,l),_u=!1,h=t.memoizedState,a.state=h,tb(t,i,a,r);var g=t.memoizedState;s!==d||h!==g||zr.current||_u?(typeof m=="function"&&(sT(t,n,m,i),g=t.memoizedState),(u=_u||R5(t,n,u,i,h,g,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),a.props=i,a.state=g,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return fT(e,t,n,i,o,r)}function fT(e,t,n,i,r,o){y7(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return r&&w5(t,n,!1),zl(e,t,o);i=t.stateNode,Joe.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=kp(t,e.child,null,o),t.child=kp(t,null,s,o)):or(e,t,s,o),t.memoizedState=i.state,r&&w5(t,n,!0),t.child}function v7(e){var t=e.stateNode;t.pendingContext?b5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&b5(e,t.context,!1),LM(e,t.containerInfo)}function D5(e,t,n,i,r){return Ep(),MM(r),t.flags|=256,or(e,t,n,i),t.child}var dT={dehydrated:null,treeContext:null,retryLane:0};function hT(e){return{baseLanes:e,cachePool:null,transitions:null}}function x7(e,t,n){var i=t.pendingProps,r=Rn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),un(Rn,r&1),e===null)return oT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=v2(a,i,0,null),e=Df(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=hT(n),t.memoizedState=dT,e):GM(t,a));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return Qoe(e,t,a,i,s,r,n);if(o){o=i.fallback,a=t.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Xu(r,l),i.subtreeFlags=r.subtreeFlags&14680064),s!==null?o=Xu(s,o):(o=Df(o,a,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=e.child.memoizedState,a=a===null?hT(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=dT,i}return o=e.child,e=o.sibling,i=Xu(o,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function GM(e,t){return t=v2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ix(e,t,n,i){return i!==null&&MM(i),kp(t,e.child,null,n),e=GM(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qoe(e,t,n,i,r,o,a){if(n)return t.flags&256?(t.flags&=-257,i=BE(Error(xe(422))),ix(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=v2({mode:"visible",children:i.children},r,0,null),o=Df(o,r,a,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,t.mode&1&&kp(t,e.child,null,a),t.child.memoizedState=hT(a),t.memoizedState=dT,o);if(!(t.mode&1))return ix(e,t,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var s=i.dgst;return i=s,o=Error(xe(419)),i=BE(o,i,void 0),ix(e,t,a,i)}if(s=(a&e.childLanes)!==0,Lr||s){if(i=gi,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Dl(e,r),Aa(i,e,r,-1))}return KM(),i=BE(Error(xe(421))),ix(e,t,a,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=dae.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,lo=qu(r.nextSibling),ho=t,wn=!0,ya=null,e!==null&&(Mo[No++]=gl,Mo[No++]=yl,Mo[No++]=Jf,gl=e.id,yl=e.overflow,Jf=t),t=GM(t,i.children),t.flags|=4096,t)}function z5(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),aT(e.return,t,n)}function HE(e,t,n,i,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function _7(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(or(e,t,i.children,n),i=Rn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&z5(e,n,t);else if(e.tag===19)z5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(un(Rn,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&nb(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),HE(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&nb(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}HE(t,!0,n,null,o);break;case"together":HE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function l_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ed|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xe(153));if(t.child!==null){for(e=t.child,n=Xu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function eae(e,t,n){switch(t.tag){case 3:v7(t),Ep();break;case 5:V9(t);break;case 1:jr(t.type)&&X_(t);break;case 4:LM(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;un(Q_,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(un(Rn,Rn.current&1),t.flags|=128,null):n&t.child.childLanes?x7(e,t,n):(un(Rn,Rn.current&1),e=zl(e,t,n),e!==null?e.sibling:null);un(Rn,Rn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return _7(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),un(Rn,Rn.current),i)break;return null;case 22:case 23:return t.lanes=0,g7(e,t,n)}return zl(e,t,n)}var b7,pT,w7,S7;b7=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pT=function(){};w7=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Af(ms.current);var o=null;switch(n){case"input":r=IR(e,r),i=IR(e,i),o=[];break;case"select":r=An({},r,{value:void 0}),i=An({},i,{value:void 0}),o=[];break;case"textarea":r=zR(e,r),i=zR(e,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Y_)}BR(n,i);var a;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var s=r[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ay.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var l=i[u];if(s=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ay.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};S7=function(e,t,n,i){n!==i&&(t.flags|=4)};function Cg(e,t){if(!wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ii(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function tae(e,t,n){var i=t.pendingProps;switch(FM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(t),null;case 1:return jr(t.type)&&Z_(),Ii(t),null;case 3:return i=t.stateNode,Rp(),yn(zr),yn(Ki),zM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(tx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ya!==null&&(wT(ya),ya=null))),pT(e,t),Ii(t),null;case 5:DM(t);var r=Af(vy.current);if(n=t.type,e!==null&&t.stateNode!=null)w7(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(xe(166));return Ii(t),null}if(e=Af(ms.current),tx(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[us]=t,i[gy]=o,e=(t.mode&1)!==0,n){case"dialog":pn("cancel",i),pn("close",i);break;case"iframe":case"object":case"embed":pn("load",i);break;case"video":case"audio":for(r=0;r<a0.length;r++)pn(a0[r],i);break;case"source":pn("error",i);break;case"img":case"image":case"link":pn("error",i),pn("load",i);break;case"details":pn("toggle",i);break;case"input":YD(i,o),pn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},pn("invalid",i);break;case"textarea":XD(i,o),pn("invalid",i)}BR(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?i.textContent!==s&&(o.suppressHydrationWarning!==!0&&ex(i.textContent,s,e),r=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&ex(i.textContent,s,e),r=["children",""+s]):ay.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&pn("scroll",i)}switch(n){case"input":q1(i),ZD(i,o,!0);break;case"textarea":q1(i),KD(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Y_)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=X8(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(n,{is:i.is}):(e=a.createElement(n),n==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,n),e[us]=t,e[gy]=i,b7(e,t,!1,!1),t.stateNode=e;e:{switch(a=HR(n,i),n){case"dialog":pn("cancel",e),pn("close",e),r=i;break;case"iframe":case"object":case"embed":pn("load",e),r=i;break;case"video":case"audio":for(r=0;r<a0.length;r++)pn(a0[r],e);r=i;break;case"source":pn("error",e),r=i;break;case"img":case"image":case"link":pn("error",e),pn("load",e),r=i;break;case"details":pn("toggle",e),r=i;break;case"input":YD(e,i),r=IR(e,i),pn("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=An({},i,{value:void 0}),pn("invalid",e);break;case"textarea":XD(e,i),r=zR(e,i),pn("invalid",e);break;default:r=i}BR(n,r),s=r;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Q8(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&K8(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sy(e,l):typeof l=="number"&&sy(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ay.hasOwnProperty(o)?l!=null&&o==="onScroll"&&pn("scroll",e):l!=null&&mM(e,o,l,a))}switch(n){case"input":q1(e),ZD(e,i,!1);break;case"textarea":q1(e),KD(e);break;case"option":i.value!=null&&e.setAttribute("value",""+rc(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?op(e,!!i.multiple,o,!1):i.defaultValue!=null&&op(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Y_)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ii(t),null;case 6:if(e&&t.stateNode!=null)S7(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(xe(166));if(n=Af(vy.current),Af(ms.current),tx(t)){if(i=t.stateNode,n=t.memoizedProps,i[us]=t,(o=i.nodeValue!==n)&&(e=ho,e!==null))switch(e.tag){case 3:ex(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ex(i.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[us]=t,t.stateNode=i}return Ii(t),null;case 13:if(yn(Rn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wn&&lo!==null&&t.mode&1&&!(t.flags&128))j9(),Ep(),t.flags|=98560,o=!1;else if(o=tx(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(xe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(xe(317));o[us]=t}else Ep(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ii(t),o=!1}else ya!==null&&(wT(ya),ya=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Rn.current&1?Kn===0&&(Kn=3):KM())),t.updateQueue!==null&&(t.flags|=4),Ii(t),null);case 4:return Rp(),pT(e,t),e===null&&py(t.stateNode.containerInfo),Ii(t),null;case 10:return $M(t.type._context),Ii(t),null;case 17:return jr(t.type)&&Z_(),Ii(t),null;case 19:if(yn(Rn),o=t.memoizedState,o===null)return Ii(t),null;if(i=(t.flags&128)!==0,a=o.rendering,a===null)if(i)Cg(o,!1);else{if(Kn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=nb(e),a!==null){for(t.flags|=128,Cg(o,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,e=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return un(Rn,Rn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Dn()>Ap&&(t.flags|=128,i=!0,Cg(o,!1),t.lanes=4194304)}else{if(!i)if(e=nb(a),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wn)return Ii(t),null}else 2*Dn()-o.renderingStartTime>Ap&&n!==1073741824&&(t.flags|=128,i=!0,Cg(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Dn(),t.sibling=null,n=Rn.current,un(Rn,i?n&1|2:n&1),t):(Ii(t),null);case 22:case 23:return XM(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?io&1073741824&&(Ii(t),t.subtreeFlags&6&&(t.flags|=8192)):Ii(t),null;case 24:return null;case 25:return null}throw Error(xe(156,t.tag))}function nae(e,t){switch(FM(t),t.tag){case 1:return jr(t.type)&&Z_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rp(),yn(zr),yn(Ki),zM(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return DM(t),null;case 13:if(yn(Rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xe(340));Ep()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yn(Rn),null;case 4:return Rp(),null;case 10:return $M(t.type._context),null;case 22:case 23:return XM(),null;case 24:return null;default:return null}}var rx=!1,Hi=!1,iae=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Zh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Pn(e,t,i)}else n.current=null}function mT(e,t,n){try{n()}catch(i){Pn(e,t,i)}}var j5=!1;function rae(e,t){if(JR=G_,e=R9(),TM(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(s=a+r),d!==o||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===r&&(s=a),h===o&&++c===i&&(l=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(QR={focusedElem:e,selectionRange:n},G_=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,_=t.stateNode,b=_.getSnapshotBeforeUpdate(t.elementType===t.type?y:da(t.type,y),v);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(k){Pn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return g=j5,j5=!1,g}function z0(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&mT(t,n,o)}r=r.next}while(r!==i)}}function g2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function gT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function C7(e){var t=e.alternate;t!==null&&(e.alternate=null,C7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[us],delete t[gy],delete t[nT],delete t[joe],delete t[Boe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function E7(e){return e.tag===5||e.tag===3||e.tag===4}function B5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||E7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yT(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Y_));else if(i!==4&&(e=e.child,e!==null))for(yT(e,t,n),e=e.sibling;e!==null;)yT(e,t,n),e=e.sibling}function vT(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(vT(e,t,n),e=e.sibling;e!==null;)vT(e,t,n),e=e.sibling}var Si=null,pa=!1;function hu(e,t,n){for(n=n.child;n!==null;)k7(e,t,n),n=n.sibling}function k7(e,t,n){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(l2,n)}catch{}switch(n.tag){case 5:Hi||Zh(n,t);case 6:var i=Si,r=pa;Si=null,hu(e,t,n),Si=i,pa=r,Si!==null&&(pa?(e=Si,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Si.removeChild(n.stateNode));break;case 18:Si!==null&&(pa?(e=Si,n=n.stateNode,e.nodeType===8?OE(e.parentNode,n):e.nodeType===1&&OE(e,n),fy(e)):OE(Si,n.stateNode));break;case 4:i=Si,r=pa,Si=n.stateNode.containerInfo,pa=!0,hu(e,t,n),Si=i,pa=r;break;case 0:case 11:case 14:case 15:if(!Hi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&mT(n,t,a),r=r.next}while(r!==i)}hu(e,t,n);break;case 1:if(!Hi&&(Zh(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Pn(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:n.mode&1?(Hi=(i=Hi)||n.memoizedState!==null,hu(e,t,n),Hi=i):hu(e,t,n);break;default:hu(e,t,n)}}function H5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iae),t.forEach(function(i){var r=hae.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function sa(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Si=s.stateNode,pa=!1;break e;case 3:Si=s.stateNode.containerInfo,pa=!0;break e;case 4:Si=s.stateNode.containerInfo,pa=!0;break e}s=s.return}if(Si===null)throw Error(xe(160));k7(o,a,r),Si=null,pa=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Pn(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)R7(t,e),t=t.sibling}function R7(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sa(t,e),es(e),i&4){try{z0(3,e,e.return),g2(3,e)}catch(y){Pn(e,e.return,y)}try{z0(5,e,e.return)}catch(y){Pn(e,e.return,y)}}break;case 1:sa(t,e),es(e),i&512&&n!==null&&Zh(n,n.return);break;case 5:if(sa(t,e),es(e),i&512&&n!==null&&Zh(n,n.return),e.flags&32){var r=e.stateNode;try{sy(r,"")}catch(y){Pn(e,e.return,y)}}if(i&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Y8(r,o),HR(s,a);var u=HR(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?Q8(r,d):c==="dangerouslySetInnerHTML"?K8(r,d):c==="children"?sy(r,d):mM(r,c,d,u)}switch(s){case"input":LR(r,o);break;case"textarea":Z8(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?op(r,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?op(r,!!o.multiple,o.defaultValue,!0):op(r,!!o.multiple,o.multiple?[]:"",!1))}r[gy]=o}catch(y){Pn(e,e.return,y)}}break;case 6:if(sa(t,e),es(e),i&4){if(e.stateNode===null)throw Error(xe(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(y){Pn(e,e.return,y)}}break;case 3:if(sa(t,e),es(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fy(t.containerInfo)}catch(y){Pn(e,e.return,y)}break;case 4:sa(t,e),es(e);break;case 13:sa(t,e),es(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(YM=Dn())),i&4&&H5(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Hi=(u=Hi)||c,sa(t,e),Hi=u):sa(t,e),es(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Be=e,c=e.child;c!==null;){for(d=Be=c;Be!==null;){switch(h=Be,m=h.child,h.tag){case 0:case 11:case 14:case 15:z0(4,h,h.return);break;case 1:Zh(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Pn(i,n,y)}}break;case 5:Zh(h,h.return);break;case 22:if(h.memoizedState!==null){W5(d);continue}}m!==null?(m.return=h,Be=m):W5(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=J8("display",a))}catch(y){Pn(e,e.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Pn(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sa(t,e),es(e),i&4&&H5(e);break;case 21:break;default:sa(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(E7(n)){var i=n;break e}n=n.return}throw Error(xe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(sy(r,""),i.flags&=-33);var o=B5(e);vT(e,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,s=B5(e);yT(e,s,a);break;default:throw Error(xe(161))}}catch(l){Pn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oae(e,t,n){Be=e,T7(e)}function T7(e,t,n){for(var i=(e.mode&1)!==0;Be!==null;){var r=Be,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||rx;if(!a){var s=r.alternate,l=s!==null&&s.memoizedState!==null||Hi;s=rx;var u=Hi;if(rx=a,(Hi=l)&&!u)for(Be=r;Be!==null;)a=Be,l=a.child,a.tag===22&&a.memoizedState!==null?G5(r):l!==null?(l.return=a,Be=l):G5(r);for(;o!==null;)Be=o,T7(o),o=o.sibling;Be=r,rx=s,Hi=u}U5(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Be=o):U5(e)}}function U5(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Hi||g2(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Hi)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:da(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&k5(t,o,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}k5(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&fy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}Hi||t.flags&512&&gT(t)}catch(h){Pn(t,t.return,h)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function W5(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function G5(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{g2(4,t)}catch(l){Pn(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){Pn(t,r,l)}}var o=t.return;try{gT(t)}catch(l){Pn(t,o,l)}break;case 5:var a=t.return;try{gT(t)}catch(l){Pn(t,a,l)}}}catch(l){Pn(t,t.return,l)}if(t===e){Be=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Be=s;break}Be=t.return}}var aae=Math.ceil,ob=Vl.ReactCurrentDispatcher,qM=Vl.ReactCurrentOwner,jo=Vl.ReactCurrentBatchConfig,zt=0,gi=null,Gn=null,Ri=0,io=0,Xh=Tc(0),Kn=0,wy=null,ed=0,y2=0,VM=0,j0=null,Pr=null,YM=0,Ap=1/0,ol=null,ab=!1,xT=null,Yu=null,ox=!1,Nu=null,sb=0,B0=0,_T=null,u_=-1,c_=0;function dr(){return zt&6?Dn():u_!==-1?u_:u_=Dn()}function Zu(e){return e.mode&1?zt&2&&Ri!==0?Ri&-Ri:Uoe.transition!==null?(c_===0&&(c_=f9()),c_):(e=en,e!==0||(e=window.event,e=e===void 0?16:v9(e.type)),e):1}function Aa(e,t,n,i){if(50<B0)throw B0=0,_T=null,Error(xe(185));dv(e,n,i),(!(zt&2)||e!==gi)&&(e===gi&&(!(zt&2)&&(y2|=n),Kn===4&&Tu(e,Ri)),Br(e,i),n===1&&zt===0&&!(t.mode&1)&&(Ap=Dn()+500,h2&&Ac()))}function Br(e,t){var n=e.callbackNode;Ure(e,t);var i=W_(e,e===gi?Ri:0);if(i===0)n!==null&&e5(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&e5(n),t===1)e.tag===0?Hoe(q5.bind(null,e)):L9(q5.bind(null,e)),Doe(function(){!(zt&6)&&Ac()}),n=null;else{switch(d9(i)){case 1:n=_M;break;case 4:n=u9;break;case 16:n=U_;break;case 536870912:n=c9;break;default:n=U_}n=I7(n,A7.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function A7(e,t){if(u_=-1,c_=0,zt&6)throw Error(xe(327));var n=e.callbackNode;if(cp()&&e.callbackNode!==n)return null;var i=W_(e,e===gi?Ri:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=lb(e,i);else{t=i;var r=zt;zt|=2;var o=M7();(gi!==e||Ri!==t)&&(ol=null,Ap=Dn()+500,Lf(e,t));do try{uae();break}catch(s){F7(e,s)}while(!0);PM(),ob.current=o,zt=r,Gn!==null?t=0:(gi=null,Ri=0,t=Kn)}if(t!==0){if(t===2&&(r=VR(e),r!==0&&(i=r,t=bT(e,r))),t===1)throw n=wy,Lf(e,0),Tu(e,i),Br(e,Dn()),n;if(t===6)Tu(e,i);else{if(r=e.current.alternate,!(i&30)&&!sae(r)&&(t=lb(e,i),t===2&&(o=VR(e),o!==0&&(i=o,t=bT(e,o))),t===1))throw n=wy,Lf(e,0),Tu(e,i),Br(e,Dn()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(xe(345));case 2:gf(e,Pr,ol);break;case 3:if(Tu(e,i),(i&130023424)===i&&(t=YM+500-Dn(),10<t)){if(W_(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){dr(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=tT(gf.bind(null,e,Pr,ol),t);break}gf(e,Pr,ol);break;case 4:if(Tu(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-Ta(i);o=1<<a,a=t[a],a>r&&(r=a),i&=~o}if(i=r,i=Dn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aae(i/1960))-i,10<i){e.timeoutHandle=tT(gf.bind(null,e,Pr,ol),i);break}gf(e,Pr,ol);break;case 5:gf(e,Pr,ol);break;default:throw Error(xe(329))}}}return Br(e,Dn()),e.callbackNode===n?A7.bind(null,e):null}function bT(e,t){var n=j0;return e.current.memoizedState.isDehydrated&&(Lf(e,t).flags|=256),e=lb(e,t),e!==2&&(t=Pr,Pr=n,t!==null&&wT(t)),e}function wT(e){Pr===null?Pr=e:Pr.push.apply(Pr,e)}function sae(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Pa(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tu(e,t){for(t&=~VM,t&=~y2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ta(t),i=1<<n;e[n]=-1,t&=~i}}function q5(e){if(zt&6)throw Error(xe(327));cp();var t=W_(e,0);if(!(t&1))return Br(e,Dn()),null;var n=lb(e,t);if(e.tag!==0&&n===2){var i=VR(e);i!==0&&(t=i,n=bT(e,i))}if(n===1)throw n=wy,Lf(e,0),Tu(e,t),Br(e,Dn()),n;if(n===6)throw Error(xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gf(e,Pr,ol),Br(e,Dn()),null}function ZM(e,t){var n=zt;zt|=1;try{return e(t)}finally{zt=n,zt===0&&(Ap=Dn()+500,h2&&Ac())}}function td(e){Nu!==null&&Nu.tag===0&&!(zt&6)&&cp();var t=zt;zt|=1;var n=jo.transition,i=en;try{if(jo.transition=null,en=1,e)return e()}finally{en=i,jo.transition=n,zt=t,!(zt&6)&&Ac()}}function XM(){io=Xh.current,yn(Xh)}function Lf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Loe(n)),Gn!==null)for(n=Gn.return;n!==null;){var i=n;switch(FM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Z_();break;case 3:Rp(),yn(zr),yn(Ki),zM();break;case 5:DM(i);break;case 4:Rp();break;case 13:yn(Rn);break;case 19:yn(Rn);break;case 10:$M(i.type._context);break;case 22:case 23:XM()}n=n.return}if(gi=e,Gn=e=Xu(e.current,null),Ri=io=t,Kn=0,wy=null,VM=y2=ed=0,Pr=j0=null,Tf!==null){for(t=0;t<Tf.length;t++)if(n=Tf[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Tf=null}return e}function F7(e,t){do{var n=Gn;try{if(PM(),a_.current=rb,ib){for(var i=Tn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ib=!1}if(Qf=0,li=Yn=Tn=null,D0=!1,xy=0,qM.current=null,n===null||n.return===null){Kn=1,wy=t,Gn=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Ri,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=P5(a);if(m!==null){m.flags&=-257,$5(m,a,s,o,t),m.mode&1&&N5(o,u,t),t=m,l=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break e}else{if(!(t&1)){N5(o,u,t),KM();break e}l=Error(xe(426))}}else if(wn&&s.mode&1){var v=P5(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),$5(v,a,s,o,t),MM(Tp(l,s));break e}}o=l=Tp(l,s),Kn!==4&&(Kn=2),j0===null?j0=[o]:j0.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var _=h7(o,l,t);E5(o,_);break e;case 1:s=l;var b=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Yu===null||!Yu.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=p7(o,s,t);E5(o,k);break e}}o=o.return}while(o!==null)}P7(n)}catch(R){t=R,Gn===n&&n!==null&&(Gn=n=n.return);continue}break}while(!0)}function M7(){var e=ob.current;return ob.current=rb,e===null?rb:e}function KM(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),gi===null||!(ed&268435455)&&!(y2&268435455)||Tu(gi,Ri)}function lb(e,t){var n=zt;zt|=2;var i=M7();(gi!==e||Ri!==t)&&(ol=null,Lf(e,t));do try{lae();break}catch(r){F7(e,r)}while(!0);if(PM(),zt=n,ob.current=i,Gn!==null)throw Error(xe(261));return gi=null,Ri=0,Kn}function lae(){for(;Gn!==null;)N7(Gn)}function uae(){for(;Gn!==null&&!$re();)N7(Gn)}function N7(e){var t=O7(e.alternate,e,io);e.memoizedProps=e.pendingProps,t===null?P7(e):Gn=t,qM.current=null}function P7(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nae(n,t),n!==null){n.flags&=32767,Gn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kn=6,Gn=null;return}}else if(n=tae(n,t,io),n!==null){Gn=n;return}if(t=t.sibling,t!==null){Gn=t;return}Gn=t=e}while(t!==null);Kn===0&&(Kn=5)}function gf(e,t,n){var i=en,r=jo.transition;try{jo.transition=null,en=1,cae(e,t,n,i)}finally{jo.transition=r,en=i}return null}function cae(e,t,n,i){do cp();while(Nu!==null);if(zt&6)throw Error(xe(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(xe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Wre(e,o),e===gi&&(Gn=gi=null,Ri=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ox||(ox=!0,I7(U_,function(){return cp(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=jo.transition,jo.transition=null;var a=en;en=1;var s=zt;zt|=4,qM.current=null,rae(e,n),R7(n,e),Foe(QR),G_=!!JR,QR=JR=null,e.current=n,oae(n),Ore(),zt=s,en=a,jo.transition=o}else e.current=n;if(ox&&(ox=!1,Nu=e,sb=r),o=e.pendingLanes,o===0&&(Yu=null),Dre(n.stateNode),Br(e,Dn()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ab)throw ab=!1,e=xT,xT=null,e;return sb&1&&e.tag!==0&&cp(),o=e.pendingLanes,o&1?e===_T?B0++:(B0=0,_T=e):B0=0,Ac(),null}function cp(){if(Nu!==null){var e=d9(sb),t=jo.transition,n=en;try{if(jo.transition=null,en=16>e?16:e,Nu===null)var i=!1;else{if(e=Nu,Nu=null,sb=0,zt&6)throw Error(xe(331));var r=zt;for(zt|=4,Be=e.current;Be!==null;){var o=Be,a=o.child;if(Be.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Be=u;Be!==null;){var c=Be;switch(c.tag){case 0:case 11:case 15:z0(8,c,o)}var d=c.child;if(d!==null)d.return=c,Be=d;else for(;Be!==null;){c=Be;var h=c.sibling,m=c.return;if(C7(c),c===u){Be=null;break}if(h!==null){h.return=m,Be=h;break}Be=m}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Be=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Be=a;else e:for(;Be!==null;){if(o=Be,o.flags&2048)switch(o.tag){case 0:case 11:case 15:z0(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,Be=_;break e}Be=o.return}}var b=e.current;for(Be=b;Be!==null;){a=Be;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,Be=S;else e:for(a=b;Be!==null;){if(s=Be,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:g2(9,s)}}catch(R){Pn(s,s.return,R)}if(s===a){Be=null;break e}var k=s.sibling;if(k!==null){k.return=s.return,Be=k;break e}Be=s.return}}if(zt=r,Ac(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(l2,e)}catch{}i=!0}return i}finally{en=n,jo.transition=t}}return!1}function V5(e,t,n){t=Tp(n,t),t=h7(e,t,1),e=Vu(e,t,1),t=dr(),e!==null&&(dv(e,1,t),Br(e,t))}function Pn(e,t,n){if(e.tag===3)V5(e,e,n);else for(;t!==null;){if(t.tag===3){V5(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yu===null||!Yu.has(i))){e=Tp(n,e),e=p7(t,e,1),t=Vu(t,e,1),e=dr(),t!==null&&(dv(t,1,e),Br(t,e));break}}t=t.return}}function fae(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=dr(),e.pingedLanes|=e.suspendedLanes&n,gi===e&&(Ri&n)===n&&(Kn===4||Kn===3&&(Ri&130023424)===Ri&&500>Dn()-YM?Lf(e,0):VM|=n),Br(e,t)}function $7(e,t){t===0&&(e.mode&1?(t=Z1,Z1<<=1,!(Z1&130023424)&&(Z1=4194304)):t=1);var n=dr();e=Dl(e,t),e!==null&&(dv(e,t,n),Br(e,n))}function dae(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$7(e,n)}function hae(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(xe(314))}i!==null&&i.delete(t),$7(e,n)}var O7;O7=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)Lr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Lr=!1,eae(e,t,n);Lr=!!(e.flags&131072)}else Lr=!1,wn&&t.flags&1048576&&D9(t,J_,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;l_(e,t),e=t.pendingProps;var r=Cp(t,Ki.current);up(t,n),r=BM(null,t,i,e,r,n);var o=HM();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jr(i)?(o=!0,X_(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,IM(t),r.updater=p2,t.stateNode=r,r._reactInternals=t,lT(t,i,e,n),t=fT(null,t,i,!0,o,n)):(t.tag=0,wn&&o&&AM(t),or(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(l_(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=mae(i),e=da(i,e),r){case 0:t=cT(null,t,i,e,n);break e;case 1:t=L5(null,t,i,e,n);break e;case 11:t=O5(null,t,i,e,n);break e;case 14:t=I5(null,t,i,da(i.type,e),n);break e}throw Error(xe(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:da(i,r),cT(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:da(i,r),L5(e,t,i,r,n);case 3:e:{if(v7(t),e===null)throw Error(xe(387));i=t.pendingProps,o=t.memoizedState,r=o.element,H9(e,t),tb(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=Tp(Error(xe(423)),t),t=D5(e,t,i,n,r);break e}else if(i!==r){r=Tp(Error(xe(424)),t),t=D5(e,t,i,n,r);break e}else for(lo=qu(t.stateNode.containerInfo.firstChild),ho=t,wn=!0,ya=null,n=q9(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ep(),i===r){t=zl(e,t,n);break e}or(e,t,i,n)}t=t.child}return t;case 5:return V9(t),e===null&&oT(t),i=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,a=r.children,eT(i,r)?a=null:o!==null&&eT(i,o)&&(t.flags|=32),y7(e,t),or(e,t,a,n),t.child;case 6:return e===null&&oT(t),null;case 13:return x7(e,t,n);case 4:return LM(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=kp(t,null,i,n):or(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:da(i,r),O5(e,t,i,r,n);case 7:return or(e,t,t.pendingProps,n),t.child;case 8:return or(e,t,t.pendingProps.children,n),t.child;case 12:return or(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,un(Q_,i._currentValue),i._currentValue=a,o!==null)if(Pa(o.value,a)){if(o.children===r.children&&!zr.current){t=zl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=El(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),aT(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(xe(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),aT(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}or(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,up(t,n),r=Uo(r),i=i(r),t.flags|=1,or(e,t,i,n),t.child;case 14:return i=t.type,r=da(i,t.pendingProps),r=da(i.type,r),I5(e,t,i,r,n);case 15:return m7(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:da(i,r),l_(e,t),t.tag=1,jr(i)?(e=!0,X_(t)):e=!1,up(t,n),W9(t,i,r),lT(t,i,r,n),fT(null,t,i,!0,e,n);case 19:return _7(e,t,n);case 22:return g7(e,t,n)}throw Error(xe(156,t.tag))};function I7(e,t){return l9(e,t)}function pae(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oo(e,t,n,i){return new pae(e,t,n,i)}function JM(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mae(e){if(typeof e=="function")return JM(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yM)return 11;if(e===vM)return 14}return 2}function Xu(e,t){var n=e.alternate;return n===null?(n=Oo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function f_(e,t,n,i,r,o){var a=2;if(i=e,typeof e=="function")JM(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jh:return Df(n.children,r,o,t);case gM:a=8,r|=8;break;case NR:return e=Oo(12,n,t,r|2),e.elementType=NR,e.lanes=o,e;case PR:return e=Oo(13,n,t,r),e.elementType=PR,e.lanes=o,e;case $R:return e=Oo(19,n,t,r),e.elementType=$R,e.lanes=o,e;case G8:return v2(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U8:a=10;break e;case W8:a=9;break e;case yM:a=11;break e;case vM:a=14;break e;case xu:a=16,i=null;break e}throw Error(xe(130,e==null?e:typeof e,""))}return t=Oo(a,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function Df(e,t,n,i){return e=Oo(7,e,i,t),e.lanes=n,e}function v2(e,t,n,i){return e=Oo(22,e,i,t),e.elementType=G8,e.lanes=n,e.stateNode={isHidden:!1},e}function UE(e,t,n){return e=Oo(6,e,null,t),e.lanes=n,e}function WE(e,t,n){return t=Oo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gae(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=CE(0),this.expirationTimes=CE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=CE(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function QM(e,t,n,i,r,o,a,s,l){return e=new gae(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Oo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},IM(o),e}function yae(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function L7(e){if(!e)return oc;e=e._reactInternals;e:{if(Fd(e)!==e||e.tag!==1)throw Error(xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xe(171))}if(e.tag===1){var n=e.type;if(jr(n))return I9(e,n,t)}return t}function D7(e,t,n,i,r,o,a,s,l){return e=QM(n,i,!0,e,r,o,a,s,l),e.context=L7(null),n=e.current,i=dr(),r=Zu(n),o=El(i,r),o.callback=t??null,Vu(n,o,r),e.current.lanes=r,dv(e,r,i),Br(e,i),e}function x2(e,t,n,i){var r=t.current,o=dr(),a=Zu(r);return n=L7(n),t.context===null?t.context=n:t.pendingContext=n,t=El(o,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Vu(r,t,a),e!==null&&(Aa(e,r,a,o),o_(e,r,a)),a}function ub(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eN(e,t){Y5(e,t),(e=e.alternate)&&Y5(e,t)}function vae(){return null}var z7=typeof reportError=="function"?reportError:function(e){console.error(e)};function tN(e){this._internalRoot=e}_2.prototype.render=tN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xe(409));x2(e,t,null,null)};_2.prototype.unmount=tN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;td(function(){x2(null,e,null,null)}),t[Ll]=null}};function _2(e){this._internalRoot=e}_2.prototype.unstable_scheduleHydration=function(e){if(e){var t=m9();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ru.length&&t!==0&&t<Ru[n].priority;n++);Ru.splice(n,0,e),n===0&&y9(e)}};function nN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Z5(){}function xae(e,t,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var u=ub(a);o.call(u)}}var a=D7(t,i,e,0,null,!1,!1,"",Z5);return e._reactRootContainer=a,e[Ll]=a.current,py(e.nodeType===8?e.parentNode:e),td(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var s=i;i=function(){var u=ub(l);s.call(u)}}var l=QM(e,0,!1,null,null,!1,!1,"",Z5);return e._reactRootContainer=l,e[Ll]=l.current,py(e.nodeType===8?e.parentNode:e),td(function(){x2(t,l,n,i)}),l}function w2(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var s=r;r=function(){var l=ub(a);s.call(l)}}x2(t,a,e,r)}else a=xae(n,t,e,r,i);return ub(a)}h9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=o0(t.pendingLanes);n!==0&&(bM(t,n|1),Br(t,Dn()),!(zt&6)&&(Ap=Dn()+500,Ac()))}break;case 13:td(function(){var i=Dl(e,1);if(i!==null){var r=dr();Aa(i,e,1,r)}}),eN(e,1)}};wM=function(e){if(e.tag===13){var t=Dl(e,134217728);if(t!==null){var n=dr();Aa(t,e,134217728,n)}eN(e,134217728)}};p9=function(e){if(e.tag===13){var t=Zu(e),n=Dl(e,t);if(n!==null){var i=dr();Aa(n,e,t,i)}eN(e,t)}};m9=function(){return en};g9=function(e,t){var n=en;try{return en=e,t()}finally{en=n}};WR=function(e,t,n){switch(t){case"input":if(LR(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=d2(i);if(!r)throw Error(xe(90));V8(i),LR(i,r)}}}break;case"textarea":Z8(e,n);break;case"select":t=n.value,t!=null&&op(e,!!n.multiple,t,!1)}};n9=ZM;i9=td;var _ae={usingClientEntryPoint:!1,Events:[pv,Wh,d2,e9,t9,ZM]},Eg={findFiberByHostInstance:Rf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bae={bundleType:Eg.bundleType,version:Eg.version,rendererPackageName:Eg.rendererPackageName,rendererConfig:Eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=a9(e),e===null?null:e.stateNode},findFiberByHostInstance:Eg.findFiberByHostInstance||vae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ax=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ax.isDisabled&&ax.supportsFiber)try{l2=ax.inject(bae),ps=ax}catch{}}So.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_ae;So.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nN(t))throw Error(xe(200));return yae(e,t,null,n)};So.createRoot=function(e,t){if(!nN(e))throw Error(xe(299));var n=!1,i="",r=z7;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=QM(e,1,!1,null,null,n,!1,i,r),e[Ll]=t.current,py(e.nodeType===8?e.parentNode:e),new tN(t)};So.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xe(188)):(e=Object.keys(e).join(","),Error(xe(268,e)));return e=a9(t),e=e===null?null:e.stateNode,e};So.flushSync=function(e){return td(e)};So.hydrate=function(e,t,n){if(!b2(t))throw Error(xe(200));return w2(null,e,t,!0,n)};So.hydrateRoot=function(e,t,n){if(!nN(e))throw Error(xe(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=z7;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=D7(t,null,e,1,n??null,r,!1,o,a),e[Ll]=t.current,py(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new _2(t)};So.render=function(e,t,n){if(!b2(t))throw Error(xe(200));return w2(null,e,t,!1,n)};So.unmountComponentAtNode=function(e){if(!b2(e))throw Error(xe(40));return e._reactRootContainer?(td(function(){w2(null,null,e,!1,function(){e._reactRootContainer=null,e[Ll]=null})}),!0):!1};So.unstable_batchedUpdates=ZM;So.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!b2(n))throw Error(xe(200));if(e==null||e._reactInternals===void 0)throw Error(xe(38));return w2(e,t,n,!1,i)};So.version="18.2.0-next-9e3b772b8-20220608";function j7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j7)}catch(e){console.error(e)}}j7(),D8.exports=So;var S2=D8.exports;const Ff=Td(S2);var X5=S2;FR.createRoot=X5.createRoot,FR.hydrateRoot=X5.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sy.apply(this,arguments)}var Pu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pu||(Pu={}));const K5="popstate";function wae(e){e===void 0&&(e={});function t(r,o){let{pathname:a="/",search:s="",hash:l=""}=Md(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ST("",{pathname:a,search:s,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let l=r.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof o=="string"?o:B7(o))}function i(r,o){C2(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Cae(t,n,i,e)}function ei(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function C2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sae(){return Math.random().toString(36).substr(2,8)}function J5(e,t){return{usr:e.state,key:e.key,idx:t}}function ST(e,t,n,i){return n===void 0&&(n=null),Sy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Md(t):t,{state:n,key:t&&t.key||i||Sae()})}function B7(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Md(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Cae(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,s=Pu.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(Sy({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){s=Pu.Pop;let v=c(),_=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:_})}function h(v,_){s=Pu.Push;let b=ST(y.location,v,_);n&&n(b,v),u=c()+1;let S=J5(b,u),k=y.createHref(b);try{a.pushState(S,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(k)}o&&l&&l({action:s,location:y.location,delta:1})}function m(v,_){s=Pu.Replace;let b=ST(y.location,v,_);n&&n(b,v),u=c();let S=J5(b,u),k=y.createHref(b);a.replaceState(S,"",k),o&&l&&l({action:s,location:y.location,delta:0})}function g(v){let _=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof v=="string"?v:B7(v);return ei(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let y={get action(){return s},get location(){return e(r,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(K5,d),l=v,()=>{r.removeEventListener(K5,d),l=null}},createHref(v){return t(r,v)},createURL:g,encodeLocation(v){let _=g(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:m,go(v){return a.go(v)}};return y}var Q5;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Q5||(Q5={}));function Eae(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?Md(t):t,r=W7(i.pathname||"/",n);if(r==null)return null;let o=H7(e);kae(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=Oae(o[s],Dae(r));return a}function H7(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(ei(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=zf([i,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(ei(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),H7(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Pae(u,o.index),routesMeta:c})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))r(o,a);else for(let l of U7(o.path))r(o,a,l)}),t}function U7(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=U7(i.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),r&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function kae(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$ae(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Rae=/^:[\w-]+$/,Tae=3,Aae=2,Fae=1,Mae=10,Nae=-2,e3=e=>e==="*";function Pae(e,t){let n=e.split("/"),i=n.length;return n.some(e3)&&(i+=Nae),t&&(i+=Aae),n.filter(r=>!e3(r)).reduce((r,o)=>r+(Rae.test(o)?Tae:o===""?Fae:Mae),i)}function $ae(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function Oae(e,t){let{routesMeta:n}=e,i={},r="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],l=a===n.length-1,u=r==="/"?t:t.slice(r.length)||"/",c=Iae({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(i,c.params);let d=s.route;o.push({params:i,pathname:zf([r,c.pathname]),pathnameBase:Gae(zf([r,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(r=zf([r,c.pathnameBase]))}return o}function Iae(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=Lae(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:i.reduce((u,c,d)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let y=s[d]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=s[d];return m&&!g?u[h]=void 0:u[h]=zae(g||"",h),u},{}),pathname:o,pathnameBase:a,pattern:e}}function Lae(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),C2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(i.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function Dae(e){try{return decodeURI(e)}catch(t){return C2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zae(e,t){try{return decodeURIComponent(e)}catch(n){return C2(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function W7(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function jae(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Md(e):e;return{pathname:n?n.startsWith("/")?n:Bae(n,t):t,search:qae(i),hash:Vae(r)}}function Bae(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function GE(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hae(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Uae(e,t){let n=Hae(e);return t?n.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Wae(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=Md(e):(r=Sy({},e),ei(!r.pathname||!r.pathname.includes("?"),GE("?","pathname","search",r)),ei(!r.pathname||!r.pathname.includes("#"),GE("#","pathname","hash",r)),ei(!r.search||!r.search.includes("#"),GE("#","search","hash",r)));let o=e===""||r.pathname==="",a=o?"/":r.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}s=d>=0?t[d]:"/"}let l=jae(r,s),u=a&&a!=="/"&&a.endsWith("/"),c=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const zf=e=>e.join("/").replace(/\/\/+/g,"/"),Gae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Vae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Yae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const G7=["post","put","patch","delete"];new Set(G7);const Zae=["get",...G7];new Set(Zae);/**
 * React Router v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cy.apply(this,arguments)}const iN=M.createContext(null),Xae=M.createContext(null),E2=M.createContext(null),k2=M.createContext(null),Nd=M.createContext({outlet:null,matches:[],isDataRoute:!1}),q7=M.createContext(null);function R2(){return M.useContext(k2)!=null}function rN(){return R2()||ei(!1),M.useContext(k2).location}function V7(e){M.useContext(E2).static||M.useLayoutEffect(e)}function Kae(){let{isDataRoute:e}=M.useContext(Nd);return e?dse():Jae()}function Jae(){R2()||ei(!1);let e=M.useContext(iN),{basename:t,future:n,navigator:i}=M.useContext(E2),{matches:r}=M.useContext(Nd),{pathname:o}=rN(),a=JSON.stringify(Uae(r,n.v7_relativeSplatPath)),s=M.useRef(!1);return V7(()=>{s.current=!0}),M.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){i.go(u);return}let d=Wae(u,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:zf([t,d.pathname])),(c.replace?i.replace:i.push)(d,c.state,c)},[t,i,a,o,e])}const Qae=M.createContext(null);function ese(e){let t=M.useContext(Nd).outlet;return t&&M.createElement(Qae.Provider,{value:e},t)}function tse(e,t){return nse(e,t)}function nse(e,t,n,i){R2()||ei(!1);let{navigator:r}=M.useContext(E2),{matches:o}=M.useContext(Nd),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=rN(),c;if(t){var d;let v=typeof t=="string"?Md(t):t;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||ei(!1),c=v}else c=u;let h=c.pathname||"/",m=l==="/"?h:h.slice(l.length)||"/",g=Eae(e,{pathname:m}),y=sse(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:zf([l,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:zf([l,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,i);return t&&y?M.createElement(k2.Provider,{value:{location:Cy({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Pu.Pop}},y):y}function ise(){let e=fse(),t=Yae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:r},n):null,null)}const rse=M.createElement(ise,null);class ose extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?M.createElement(Nd.Provider,{value:this.props.routeContext},M.createElement(q7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ase(e){let{routeContext:t,match:n,children:i}=e,r=M.useContext(iN);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Nd.Provider,{value:t},i)}function sse(e,t,n,i){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let a=e,s=(r=n)==null?void 0:r.errors;if(s!=null){let c=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id]));c>=0||ei(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,h)=>{let m,g=!1,y=null,v=null;n&&(m=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||rse,l&&(u<0&&h===0?(hse("route-fallback",!1),g=!0,v=null):u===h&&(g=!0,v=d.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,h+1)),b=()=>{let S;return m?S=y:g?S=v:d.route.Component?S=M.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=c,M.createElement(ase,{match:d,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?M.createElement(ose,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var Y7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Y7||{}),cb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cb||{});function lse(e){let t=M.useContext(iN);return t||ei(!1),t}function use(e){let t=M.useContext(Xae);return t||ei(!1),t}function cse(e){let t=M.useContext(Nd);return t||ei(!1),t}function Z7(e){let t=cse(),n=t.matches[t.matches.length-1];return n.route.id||ei(!1),n.route.id}function fse(){var e;let t=M.useContext(q7),n=use(cb.UseRouteError),i=Z7(cb.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function dse(){let{router:e}=lse(Y7.UseNavigateStable),t=Z7(cb.UseNavigateStable),n=M.useRef(!1);return V7(()=>{n.current=!0}),M.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Cy({fromRouteId:t},o)))},[e,t])}const t3={};function hse(e,t,n){!t&&!t3[e]&&(t3[e]=!0)}function pse(e){return ese(e.context)}function rl(e){ei(!1)}function mse(e){let{basename:t="/",children:n=null,location:i,navigationType:r=Pu.Pop,navigator:o,static:a=!1,future:s}=e;R2()&&ei(!1);let l=t.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:l,navigator:o,static:a,future:Cy({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof i=="string"&&(i=Md(i));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:g="default"}=i,y=M.useMemo(()=>{let v=W7(c,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:m,key:g},navigationType:r}},[l,c,d,h,m,g,r]);return y==null?null:M.createElement(E2.Provider,{value:u},M.createElement(k2.Provider,{children:n,value:y}))}function gse(e){let{children:t,location:n}=e;return tse(CT(t),n)}new Promise(()=>{});function CT(e,t){t===void 0&&(t=[]);let n=[];return M.Children.forEach(e,(i,r)=>{if(!M.isValidElement(i))return;let o=[...t,r];if(i.type===M.Fragment){n.push.apply(n,CT(i.props.children,o));return}i.type!==rl&&ei(!1),!i.props.index||!i.props.children||ei(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=CT(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yse="startTransition",n3=dre[yse];function vse(e){let{basename:t,children:n,future:i,window:r}=e,o=M.useRef();o.current==null&&(o.current=wae({window:r,v5Compat:!0}));let a=o.current,[s,l]=M.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},c=M.useCallback(d=>{u&&n3?n3(()=>l(d)):l(d)},[l,u]);return M.useLayoutEffect(()=>a.listen(c),[a,c]),M.createElement(mse,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:i})}var i3;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(i3||(i3={}));var r3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(r3||(r3={}));var X7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=r(o,i(s)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=r(a,s));return a}function r(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(X7);var xse=X7.exports;const Ne=Td(xse);function ET(){return ET=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ET.apply(this,arguments)}function K7(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function o3(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function _se(e){var t=bse(e,"string");return typeof t=="symbol"?t:String(t)}function bse(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J7(e,t,n){var i=M.useRef(e!==void 0),r=M.useState(t),o=r[0],a=r[1],s=e!==void 0,l=i.current;return i.current=s,!s&&l&&o!==t&&a(t),[s?e:o,M.useCallback(function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];n&&n.apply(void 0,[u].concat(d)),a(u)},[n])]}function ym(e,t){return Object.keys(t).reduce(function(n,i){var r,o=n,a=o[o3(i)],s=o[i],l=K7(o,[o3(i),i].map(_se)),u=t[i],c=J7(s,a,e[u]),d=c[0],h=c[1];return ET({},l,(r={},r[i]=d,r[u]=h,r))},e)}function kT(e,t){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},kT(e,t)}function wse(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,kT(e,t)}const Sse=["xxl","xl","lg","md","sm","xs"],Cse="xs",T2=M.createContext({prefixes:{},breakpoints:Sse,minBreakpoint:Cse});function De(e,t){const{prefixes:n}=M.useContext(T2);return e||n[t]||t}function Q7(){const{breakpoints:e}=M.useContext(T2);return e}function eH(){const{minBreakpoint:e}=M.useContext(T2);return e}function gv(){const{dir:e}=M.useContext(T2);return e==="rtl"}function vm(e){return e&&e.ownerDocument||document}function Ese(e){var t=vm(e);return t&&t.defaultView||window}function kse(e,t){return Ese(e).getComputedStyle(e,t)}var Rse=/([A-Z])/g;function Tse(e){return e.replace(Rse,"-$1").toLowerCase()}var Ase=/^ms-/;function sx(e){return Tse(e).replace(Ase,"-ms-")}var Fse=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Mse(e){return!!(e&&Fse.test(e))}function kl(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(sx(t))||kse(e).getPropertyValue(sx(t));Object.keys(t).forEach(function(r){var o=t[r];!o&&o!==0?e.style.removeProperty(sx(r)):Mse(r)?i+=r+"("+o+") ":n+=sx(r)+": "+o+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}var tH={exports:{}},Nse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pse=Nse,$se=Pse;function nH(){}function iH(){}iH.resetWarningCache=nH;var Ose=function(){function e(i,r,o,a,s,l){if(l!==$se){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:iH,resetWarningCache:nH};return n.PropTypes=n,n};tH.exports=Ose();var Ise=tH.exports;const bn=Td(Ise),a3={disabled:!1},rH=Pt.createContext(null);var Lse=function(t){return t.scrollTop},s0="unmounted",bu="exited",va="entering",hl="entered",Ey="exiting",Yl=function(e){wse(t,e);function t(i,r){var o;o=e.call(this,i,r)||this;var a=r,s=a&&!a.isMounting?i.enter:i.appear,l;return o.appearStatus=null,i.in?s?(l=bu,o.appearStatus=va):l=hl:i.unmountOnExit||i.mountOnEnter?l=s0:l=bu,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(r,o){var a=r.in;return a&&o.status===s0?{status:bu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var o=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==va&&a!==hl&&(o=va):(a===va||a===hl)&&(o=Ey)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,o,a,s;return o=a=s=r,r!=null&&typeof r!="number"&&(o=r.exit,a=r.enter,s=r.appear!==void 0?r.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===va){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Ff.findDOMNode(this);a&&Lse(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===bu&&this.setState({status:s0})},n.performEnter=function(r){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:r,l=this.props.nodeRef?[s]:[Ff.findDOMNode(this),s],u=l[0],c=l[1],d=this.getTimeouts(),h=s?d.appear:d.enter;if(!r&&!a||a3.disabled){this.safeSetState({status:hl},function(){o.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:va},function(){o.props.onEntering(u,c),o.onTransitionEnd(h,function(){o.safeSetState({status:hl},function(){o.props.onEntered(u,c)})})})},n.performExit=function(){var r=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:Ff.findDOMNode(this);if(!o||a3.disabled){this.safeSetState({status:bu},function(){r.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:Ey},function(){r.props.onExiting(s),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:bu},function(){r.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},n.setNextCallback=function(r){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,r(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:Ff.findDOMNode(this),s=r==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===s0)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=K7(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Pt.createElement(rH.Provider,{value:null},typeof a=="function"?a(r,s):Pt.cloneElement(Pt.Children.only(a),s))},t}(Pt.Component);Yl.contextType=rH;Yl.propTypes={};function vh(){}Yl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vh,onEntering:vh,onEntered:vh,onExit:vh,onExiting:vh,onExited:vh};Yl.UNMOUNTED=s0;Yl.EXITED=bu;Yl.ENTERING=va;Yl.ENTERED=hl;Yl.EXITING=Ey;const Dse=Yl,xm=!!(typeof window<"u"&&window.document&&window.document.createElement);var RT=!1,TT=!1;try{var qE={get passive(){return RT=!0},get once(){return TT=RT=!0}};xm&&(window.addEventListener("test",qE,qE),window.removeEventListener("test",qE,!0))}catch{}function oN(e,t,n,i){if(i&&typeof i!="boolean"&&!TT){var r=i.once,o=i.capture,a=n;!TT&&r&&(a=n.__once||function s(l){this.removeEventListener(t,s,o),n.call(this,l)},n.__once=a),e.addEventListener(t,a,RT?i:o)}e.addEventListener(t,n,i)}function AT(e,t,n,i){var r=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function vl(e,t,n,i){return oN(e,t,n,i),function(){AT(e,t,n,i)}}function zse(e,t,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,i),e.dispatchEvent(r)}}function jse(e){var t=kl(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function Bse(e,t,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||zse(e,"transitionend",!0)},t+n),o=vl(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),o()}}function oH(e,t,n,i){n==null&&(n=jse(e)||0);var r=Bse(e,n,i),o=vl(e,"transitionend",t);return function(){r(),o()}}function s3(e,t){const n=kl(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function A2(e,t){const n=s3(e,"transitionDuration"),i=s3(e,"transitionDelay"),r=oH(e,o=>{o.target===e&&(r(),t(o))},n+i)}function kg(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...r){t.apply(this,r),n.apply(this,r)}},null)}function aN(e){e.offsetHeight}const l3=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Hse(e,t){const n=l3(e),i=l3(t);return r=>{n&&n(r),i&&i(r)}}function $s(e,t){return M.useMemo(()=>Hse(e,t),[e,t])}function fb(e){return e&&"setState"in e?Ff.findDOMNode(e):e??null}const Use=Pt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,onExited:o,addEndListener:a,children:s,childRef:l,...u},c)=>{const d=M.useRef(null),h=$s(d,l),m=F=>{h(fb(F))},g=F=>T=>{F&&d.current&&F(d.current,T)},y=M.useCallback(g(e),[e]),v=M.useCallback(g(t),[t]),_=M.useCallback(g(n),[n]),b=M.useCallback(g(i),[i]),S=M.useCallback(g(r),[r]),k=M.useCallback(g(o),[o]),R=M.useCallback(g(a),[a]);return w.jsx(Dse,{ref:c,...u,onEnter:y,onEntered:_,onEntering:v,onExit:b,onExited:k,onExiting:S,addEndListener:R,nodeRef:d,children:typeof s=="function"?(F,T)=>s(F,{...T,ref:m}):Pt.cloneElement(s,{ref:m})})}),F2=Use,Wse={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Gse(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,i=t[n],r=Wse[e];return i+parseInt(kl(t,r[0]),10)+parseInt(kl(t,r[1]),10)}const qse={[bu]:"collapse",[Ey]:"collapsing",[va]:"collapsing",[hl]:"collapse show"},Vse=Pt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,className:o,children:a,dimension:s="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:d=!1,appear:h=!1,getDimensionValue:m=Gse,...g},y)=>{const v=typeof s=="function"?s():s,_=M.useMemo(()=>kg(F=>{F.style[v]="0"},e),[v,e]),b=M.useMemo(()=>kg(F=>{const T=`scroll${v[0].toUpperCase()}${v.slice(1)}`;F.style[v]=`${F[T]}px`},t),[v,t]),S=M.useMemo(()=>kg(F=>{F.style[v]=null},n),[v,n]),k=M.useMemo(()=>kg(F=>{F.style[v]=`${m(v,F)}px`,aN(F)},i),[i,m,v]),R=M.useMemo(()=>kg(F=>{F.style[v]=null},r),[v,r]);return w.jsx(F2,{ref:y,addEndListener:A2,...g,"aria-expanded":g.role?l:null,onEnter:_,onEntering:b,onEntered:S,onExit:k,onExiting:R,childRef:a.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:d,appear:h,children:(F,T)=>Pt.cloneElement(a,{...T,className:Ne(o,a.props.className,qse[F],v==="width"&&"collapse-horizontal")})})}),aH=Vse;function sH(e,t){return Array.isArray(e)?e.includes(t):e===t}const lH=M.createContext({});lH.displayName="AccordionContext";const M2=lH,uH=M.forwardRef(({as:e="div",bsPrefix:t,className:n,children:i,eventKey:r,...o},a)=>{const{activeEventKey:s}=M.useContext(M2);return t=De(t,"accordion-collapse"),w.jsx(aH,{ref:a,in:sH(s,r),...o,className:Ne(n,t),children:w.jsx(e,{children:M.Children.only(i)})})});uH.displayName="AccordionCollapse";const cH=uH,fH=M.createContext({eventKey:""});fH.displayName="AccordionItemContext";const sN=fH,dH=M.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:i,onEntering:r,onEntered:o,onExit:a,onExiting:s,onExited:l,...u},c)=>{t=De(t,"accordion-body");const{eventKey:d}=M.useContext(sN);return w.jsx(cH,{eventKey:d,onEnter:i,onEntering:r,onEntered:o,onExit:a,onExiting:s,onExited:l,children:w.jsx(e,{ref:c,...u,className:Ne(n,t)})})});dH.displayName="AccordionBody";const Yse=dH;function Zse(e,t){const{activeEventKey:n,onSelect:i,alwaysOpen:r}=M.useContext(M2);return o=>{let a=e===n?null:e;r&&(Array.isArray(n)?n.includes(e)?a=n.filter(s=>s!==e):a=[...n,e]:a=[e]),i==null||i(a,o),t==null||t(o)}}const hH=M.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:i,...r},o)=>{t=De(t,"accordion-button");const{eventKey:a}=M.useContext(sN),s=Zse(a,i),{activeEventKey:l}=M.useContext(M2);return e==="button"&&(r.type="button"),w.jsx(e,{ref:o,onClick:s,...r,"aria-expanded":Array.isArray(l)?l.includes(a):a===l,className:Ne(n,t,!sH(l,a)&&"collapsed")})});hH.displayName="AccordionButton";const pH=hH,mH=M.forwardRef(({as:e="h2",bsPrefix:t,className:n,children:i,onClick:r,...o},a)=>(t=De(t,"accordion-header"),w.jsx(e,{ref:a,...o,className:Ne(n,t),children:w.jsx(pH,{onClick:r,children:i})})));mH.displayName="AccordionHeader";const Xse=mH,gH=M.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:i,...r},o)=>{t=De(t,"accordion-item");const a=M.useMemo(()=>({eventKey:i}),[i]);return w.jsx(sN.Provider,{value:a,children:w.jsx(e,{ref:o,...r,className:Ne(n,t)})})});gH.displayName="AccordionItem";const Kse=gH,yH=M.forwardRef((e,t)=>{const{as:n="div",activeKey:i,bsPrefix:r,className:o,onSelect:a,flush:s,alwaysOpen:l,...u}=ym(e,{activeKey:"onSelect"}),c=De(r,"accordion"),d=M.useMemo(()=>({activeEventKey:i,onSelect:a,alwaysOpen:l}),[i,a,l]);return w.jsx(M2.Provider,{value:d,children:w.jsx(n,{ref:t,...u,className:Ne(o,c,s&&`${c}-flush`)})})});yH.displayName="Accordion";const lx=Object.assign(yH,{Button:pH,Collapse:cH,Item:Kse,Header:Xse,Body:Yse});function vH(e){const t=M.useRef(e);return M.useEffect(()=>{t.current=e},[e]),t}function cn(e){const t=vH(e);return M.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const N2=e=>M.forwardRef((t,n)=>w.jsx("div",{...t,ref:n,className:Ne(t.className,e)}));function db(){return M.useState(null)}function Jse(e,t,n,i=!1){const r=cn(n);M.useEffect(()=>{const o=typeof e=="function"?e():e;return o.addEventListener(t,r,i),()=>o.removeEventListener(t,r,i)},[e])}function lN(){const e=M.useRef(!0),t=M.useRef(()=>e.current);return M.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function xH(e){const t=M.useRef(null);return M.useEffect(()=>{t.current=e}),t.current}const Qse=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",ele=typeof document<"u",ky=ele||Qse?M.useLayoutEffect:M.useEffect,tle=["as","disabled"];function nle(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function ile(e){return!e||e.trim()==="#"}function uN({tagName:e,disabled:t,href:n,target:i,rel:r,role:o,onClick:a,tabIndex:s=0,type:l}){e||(n!=null||i!=null||r!=null?e="a":e="button");const u={tagName:e};if(e==="button")return[{type:l||"button",disabled:t},u];const c=h=>{if((t||e==="a"&&ile(n))&&h.preventDefault(),t){h.stopPropagation();return}a==null||a(h)},d=h=>{h.key===" "&&(h.preventDefault(),c(h))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:c,onKeyDown:d},u]}const cN=M.forwardRef((e,t)=>{let{as:n,disabled:i}=e,r=nle(e,tle);const[o,{tagName:a}]=uN(Object.assign({tagName:n,disabled:i},r));return w.jsx(a,Object.assign({},r,o,{ref:t}))});cN.displayName="Button";const rle=["onKeyDown"];function ole(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function ale(e){return!e||e.trim()==="#"}const _H=M.forwardRef((e,t)=>{let{onKeyDown:n}=e,i=ole(e,rle);const[r]=uN(Object.assign({tagName:"a"},i)),o=cn(a=>{r.onKeyDown(a),n==null||n(a)});return ale(i.href)||i.role==="button"?w.jsx("a",Object.assign({ref:t},i,r,{onKeyDown:o})):w.jsx("a",Object.assign({ref:t},i,{onKeyDown:n}))});_H.displayName="Anchor";const hb=_H,sle={[va]:"show",[hl]:"show"},bH=M.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...r},o)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},s=M.useCallback((l,u)=>{aN(l),i==null||i(l,u)},[i]);return w.jsx(F2,{ref:o,addEndListener:A2,...a,onEnter:s,childRef:t.ref,children:(l,u)=>M.cloneElement(t,{...u,className:Ne("fade",e,t.props.className,sle[l],n[l])})})});bH.displayName="Fade";const nd=bH,lle={"aria-label":bn.string,onClick:bn.func,variant:bn.oneOf(["white"])},fN=M.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},r)=>w.jsx("button",{ref:r,type:"button",className:Ne("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));fN.displayName="CloseButton";fN.propTypes=lle;const ule=fN,wH=M.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:i,className:r,as:o="span",...a},s)=>{const l=De(e,"badge");return w.jsx(o,{ref:s,...a,className:Ne(r,l,n&&"rounded-pill",i&&`text-${i}`,t&&`bg-${t}`)})});wH.displayName="Badge";const pb=wH,SH=M.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:r=!1,disabled:o=!1,className:a,...s},l)=>{const u=De(t,"btn"),[c,{tagName:d}]=uN({tagName:e,disabled:o,...s}),h=d;return w.jsx(h,{...c,...s,ref:l,disabled:o,className:Ne(a,u,r&&"active",n&&`${u}-${n}`,i&&`${u}-${i}`,s.href&&o&&"disabled")})});SH.displayName="Button";const CH=SH,EH=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"card-body"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));EH.displayName="CardBody";const kH=EH,RH=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"card-footer"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));RH.displayName="CardFooter";const cle=RH,TH=M.createContext(null);TH.displayName="CardHeaderContext";const AH=TH,FH=M.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=De(e,"card-header"),a=M.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return w.jsx(AH.Provider,{value:a,children:w.jsx(n,{ref:r,...i,className:Ne(t,o)})})});FH.displayName="CardHeader";const fle=FH,MH=M.forwardRef(({bsPrefix:e,className:t,variant:n,as:i="img",...r},o)=>{const a=De(e,"card-img");return w.jsx(i,{ref:o,className:Ne(n?`${a}-${n}`:a,t),...r})});MH.displayName="CardImg";const dle=MH,NH=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"card-img-overlay"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));NH.displayName="CardImgOverlay";const hle=NH,PH=M.forwardRef(({className:e,bsPrefix:t,as:n="a",...i},r)=>(t=De(t,"card-link"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));PH.displayName="CardLink";const ple=PH,mle=N2("h6"),$H=M.forwardRef(({className:e,bsPrefix:t,as:n=mle,...i},r)=>(t=De(t,"card-subtitle"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));$H.displayName="CardSubtitle";const gle=$H,OH=M.forwardRef(({className:e,bsPrefix:t,as:n="p",...i},r)=>(t=De(t,"card-text"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));OH.displayName="CardText";const yle=OH,vle=N2("h5"),IH=M.forwardRef(({className:e,bsPrefix:t,as:n=vle,...i},r)=>(t=De(t,"card-title"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));IH.displayName="CardTitle";const xle=IH,LH=M.forwardRef(({bsPrefix:e,className:t,bg:n,text:i,border:r,body:o=!1,children:a,as:s="div",...l},u)=>{const c=De(e,"card");return w.jsx(s,{ref:u,...l,className:Ne(t,c,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:o?w.jsx(kH,{children:a}):a})});LH.displayName="Card";const Rg=Object.assign(LH,{Img:dle,Title:xle,Subtitle:gle,Body:kH,Link:ple,Text:yle,Header:fle,Footer:cle,ImgOverlay:hle});function _le(e,t){const n=M.useRef(!0);M.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function ble(e){const t=M.useRef(e);return t.current=e,t}function dN(e){const t=ble(e);M.useEffect(()=>()=>t.current(),[])}const FT=2**31-1;function DH(e,t,n){const i=n-Date.now();e.current=i<=FT?setTimeout(t,i):setTimeout(()=>DH(e,t,n),FT)}function zH(){const e=lN(),t=M.useRef();return dN(()=>clearTimeout(t.current)),M.useMemo(()=>{const n=()=>clearTimeout(t.current);function i(r,o=0){e()&&(n(),o<=FT?t.current=setTimeout(r,o):DH(t,r,Date.now()+o))}return{set:i,clear:n,handleRef:t}},[])}const jH=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"carousel-caption"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));jH.displayName="CarouselCaption";const wle=jH,BH=M.forwardRef(({as:e="div",bsPrefix:t,className:n,...i},r)=>{const o=Ne(n,De(t,"carousel-item"));return w.jsx(e,{ref:r,...i,className:o})});BH.displayName="CarouselItem";const Sle=BH;function mb(e,t){let n=0;return M.Children.map(e,i=>M.isValidElement(i)?t(i,n++):i)}function HH(e,t){let n=0;M.Children.forEach(e,i=>{M.isValidElement(i)&&t(i,n++)})}function Cle(e,t){return M.Children.toArray(e).some(n=>M.isValidElement(n)&&n.type===t)}const Ele=40;function kle(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&getComputedStyle(e.parentNode).display!=="none"}const UH=M.forwardRef(({defaultActiveIndex:e=0,...t},n)=>{const{as:i="div",bsPrefix:r,slide:o=!0,fade:a=!1,controls:s=!0,indicators:l=!0,indicatorLabels:u=[],activeIndex:c,onSelect:d,onSlide:h,onSlid:m,interval:g=5e3,keyboard:y=!0,onKeyDown:v,pause:_="hover",onMouseOver:b,onMouseOut:S,wrap:k=!0,touch:R=!0,onTouchStart:F,onTouchMove:T,onTouchEnd:P,prevIcon:B=w.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:O="Previous",nextIcon:D=w.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:W="Next",variant:j,className:U,children:G,...Z}=ym({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),J=De(r,"carousel"),H=gv(),Q=M.useRef(null),[K,ne]=M.useState("next"),[he,$e]=M.useState(!1),[Ee,we]=M.useState(!1),[Ae,It]=M.useState(c||0);M.useEffect(()=>{!Ee&&c!==Ae&&(Q.current?ne(Q.current):ne((c||0)>Ae?"next":"prev"),o&&we(!0),It(c||0))},[c,Ee,Ae,o]),M.useEffect(()=>{Q.current&&(Q.current=null)});let Et=0,ke;HH(G,(dt,Gt)=>{++Et,Gt===c&&(ke=dt.props.interval)});const Ye=vH(ke),He=M.useCallback(dt=>{if(Ee)return;let Gt=Ae-1;if(Gt<0){if(!k)return;Gt=Et-1}Q.current="prev",d==null||d(Gt,dt)},[Ee,Ae,d,k,Et]),de=cn(dt=>{if(Ee)return;let Gt=Ae+1;if(Gt>=Et){if(!k)return;Gt=0}Q.current="next",d==null||d(Gt,dt)}),Tt=M.useRef();M.useImperativeHandle(n,()=>({element:Tt.current,prev:He,next:de}));const ft=cn(()=>{!document.hidden&&kle(Tt.current)&&(H?He():de())}),tt=K==="next"?"start":"end";_le(()=>{o||(h==null||h(Ae,tt),m==null||m(Ae,tt))},[Ae]);const Vt=`${J}-item-${K}`,vn=`${J}-item-${tt}`,er=M.useCallback(dt=>{aN(dt),h==null||h(Ae,tt)},[h,Ae,tt]),Vs=M.useCallback(()=>{we(!1),m==null||m(Ae,tt)},[m,Ae,tt]),Pi=M.useCallback(dt=>{if(y&&!/input|textarea/i.test(dt.target.tagName))switch(dt.key){case"ArrowLeft":dt.preventDefault(),H?de(dt):He(dt);return;case"ArrowRight":dt.preventDefault(),H?He(dt):de(dt);return}v==null||v(dt)},[y,v,He,de,H]),Sr=M.useCallback(dt=>{_==="hover"&&$e(!0),b==null||b(dt)},[_,b]),ia=M.useCallback(dt=>{$e(!1),S==null||S(dt)},[S]),eo=M.useRef(0),Cr=M.useRef(0),bt=zH(),ri=M.useCallback(dt=>{eo.current=dt.touches[0].clientX,Cr.current=0,_==="hover"&&$e(!0),F==null||F(dt)},[_,F]),ko=M.useCallback(dt=>{dt.touches&&dt.touches.length>1?Cr.current=0:Cr.current=dt.touches[0].clientX-eo.current,T==null||T(dt)},[T]),Va=M.useCallback(dt=>{if(R){const Gt=Cr.current;Math.abs(Gt)>Ele&&(Gt>0?He(dt):de(dt))}_==="hover"&&bt.set(()=>{$e(!1)},g||void 0),P==null||P(dt)},[R,_,He,de,bt,g,P]),eh=g!=null&&!he&&!Ee,ru=M.useRef();M.useEffect(()=>{var dt,Gt;if(!eh)return;const $i=H?He:de;return ru.current=window.setInterval(document.visibilityState?ft:$i,(dt=(Gt=Ye.current)!=null?Gt:g)!=null?dt:void 0),()=>{ru.current!==null&&clearInterval(ru.current)}},[eh,He,de,Ye,g,ft,H]);const Vc=M.useMemo(()=>l&&Array.from({length:Et},(dt,Gt)=>$i=>{d==null||d(Gt,$i)}),[l,Et,d]);return w.jsxs(i,{ref:Tt,...Z,onKeyDown:Pi,onMouseOver:Sr,onMouseOut:ia,onTouchStart:ri,onTouchMove:ko,onTouchEnd:Va,className:Ne(U,J,o&&"slide",a&&`${J}-fade`,j&&`${J}-${j}`),children:[l&&w.jsx("div",{className:`${J}-indicators`,children:mb(G,(dt,Gt)=>w.jsx("button",{type:"button","data-bs-target":"","aria-label":u!=null&&u.length?u[Gt]:`Slide ${Gt+1}`,className:Gt===Ae?"active":void 0,onClick:Vc?Vc[Gt]:void 0,"aria-current":Gt===Ae},Gt))}),w.jsx("div",{className:`${J}-inner`,children:mb(G,(dt,Gt)=>{const $i=Gt===Ae;return o?w.jsx(F2,{in:$i,onEnter:$i?er:void 0,onEntered:$i?Vs:void 0,addEndListener:A2,children:(ra,th)=>M.cloneElement(dt,{...th,className:Ne(dt.props.className,$i&&ra!=="entered"&&Vt,(ra==="entered"||ra==="exiting")&&"active",(ra==="entering"||ra==="exiting")&&vn)})}):M.cloneElement(dt,{className:Ne(dt.props.className,$i&&"active")})})}),s&&w.jsxs(w.Fragment,{children:[(k||c!==0)&&w.jsxs(hb,{className:`${J}-control-prev`,onClick:He,children:[B,O&&w.jsx("span",{className:"visually-hidden",children:O})]}),(k||c!==Et-1)&&w.jsxs(hb,{className:`${J}-control-next`,onClick:de,children:[D,W&&w.jsx("span",{className:"visually-hidden",children:W})]})]})]})});UH.displayName="Carousel";const Rle=Object.assign(UH,{Caption:wle,Item:Sle});function Tle({as:e,bsPrefix:t,className:n,...i}){t=De(t,"col");const r=Q7(),o=eH(),a=[],s=[];return r.forEach(l=>{const u=i[l];delete i[l];let c,d,h;typeof u=="object"&&u!=null?{span:c,offset:d,order:h}=u:c=u;const m=l!==o?`-${l}`:"";c&&a.push(c===!0?`${t}${m}`:`${t}${m}-${c}`),h!=null&&s.push(`order${m}-${h}`),d!=null&&s.push(`offset${m}-${d}`)}),[{...i,className:Ne(n,...a,...s)},{as:e,bsPrefix:t,spans:a}]}const WH=M.forwardRef((e,t)=>{const[{className:n,...i},{as:r="div",bsPrefix:o,spans:a}]=Tle(e);return w.jsx(r,{...i,ref:t,className:Ne(n,!a.length&&o)})});WH.displayName="Col";const GH=WH;var Ale=Function.prototype.bind.call(Function.prototype.call,[].slice);function ul(e,t){return Ale(e.querySelectorAll(t))}function qH(e,t,n){const i=M.useRef(e!==void 0),[r,o]=M.useState(t),a=e!==void 0,s=i.current;return i.current=a,!a&&s&&r!==t&&o(t),[a?e:r,M.useCallback((...l)=>{const[u,...c]=l;let d=n==null?void 0:n(u,...c);return o(u),d},[n])]}function VH(){const[,e]=M.useReducer(t=>!t,!1);return e}const Fle=M.createContext(null),P2=Fle;var u3=Object.prototype.hasOwnProperty;function c3(e,t,n){for(n of e.keys())if(H0(n,t))return n}function H0(e,t){var n,i,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&H0(e[i],t[i]););return i===-1}if(n===Set){if(e.size!==t.size)return!1;for(i of e)if(r=i,r&&typeof r=="object"&&(r=c3(t,r),!r)||!t.has(r))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(i of e)if(r=i[0],r&&typeof r=="object"&&(r=c3(t,r),!r)||!H0(i[1],t.get(r)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return i===-1}if(!n||typeof e=="object"){i=0;for(n in e)if(u3.call(e,n)&&++i&&!u3.call(t,n)||!(n in t)||!H0(e[n],t[n]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}function Mle(e){const t=lN();return[e[0],M.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Hr="top",Go="bottom",qo="right",Ur="left",hN="auto",yv=[Hr,Go,qo,Ur],Fp="start",Ry="end",Nle="clippingParents",YH="viewport",Tg="popper",Ple="reference",f3=yv.reduce(function(e,t){return e.concat([t+"-"+Fp,t+"-"+Ry])},[]),ZH=[].concat(yv,[hN]).reduce(function(e,t){return e.concat([t,t+"-"+Fp,t+"-"+Ry])},[]),$le="beforeRead",Ole="read",Ile="afterRead",Lle="beforeMain",Dle="main",zle="afterMain",jle="beforeWrite",Ble="write",Hle="afterWrite",Ule=[$le,Ole,Ile,Lle,Dle,zle,jle,Ble,Hle];function gs(e){return e.split("-")[0]}function yo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function id(e){var t=yo(e).Element;return e instanceof t||e instanceof Element}function ys(e){var t=yo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pN(e){if(typeof ShadowRoot>"u")return!1;var t=yo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var jf=Math.max,gb=Math.min,Mp=Math.round;function MT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function XH(){return!/^((?!chrome|android).)*safari/i.test(MT())}function Np(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&ys(e)&&(r=e.offsetWidth>0&&Mp(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Mp(i.height)/e.offsetHeight||1);var a=id(e)?yo(e):window,s=a.visualViewport,l=!XH()&&n,u=(i.left+(l&&s?s.offsetLeft:0))/r,c=(i.top+(l&&s?s.offsetTop:0))/o,d=i.width/r,h=i.height/o;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function mN(e){var t=Np(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function KH(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&pN(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ac(e){return e?(e.nodeName||"").toLowerCase():null}function jl(e){return yo(e).getComputedStyle(e)}function Wle(e){return["table","td","th"].indexOf(ac(e))>=0}function Fc(e){return((id(e)?e.ownerDocument:e.document)||window.document).documentElement}function $2(e){return ac(e)==="html"?e:e.assignedSlot||e.parentNode||(pN(e)?e.host:null)||Fc(e)}function d3(e){return!ys(e)||jl(e).position==="fixed"?null:e.offsetParent}function Gle(e){var t=/firefox/i.test(MT()),n=/Trident/i.test(MT());if(n&&ys(e)){var i=jl(e);if(i.position==="fixed")return null}var r=$2(e);for(pN(r)&&(r=r.host);ys(r)&&["html","body"].indexOf(ac(r))<0;){var o=jl(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function vv(e){for(var t=yo(e),n=d3(e);n&&Wle(n)&&jl(n).position==="static";)n=d3(n);return n&&(ac(n)==="html"||ac(n)==="body"&&jl(n).position==="static")?t:n||Gle(e)||t}function gN(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function U0(e,t,n){return jf(e,gb(t,n))}function qle(e,t,n){var i=U0(e,t,n);return i>n?n:i}function JH(){return{top:0,right:0,bottom:0,left:0}}function QH(e){return Object.assign({},JH(),e)}function eU(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var Vle=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,QH(typeof t!="number"?t:eU(t,yv))};function Yle(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=gs(n.placement),l=gN(s),u=[Ur,qo].indexOf(s)>=0,c=u?"height":"width";if(!(!o||!a)){var d=Vle(r.padding,n),h=mN(o),m=l==="y"?Hr:Ur,g=l==="y"?Go:qo,y=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],v=a[l]-n.rects.reference[l],_=vv(o),b=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,S=y/2-v/2,k=d[m],R=b-h[c]-d[g],F=b/2-h[c]/2+S,T=U0(k,F,R),P=l;n.modifiersData[i]=(t={},t[P]=T,t.centerOffset=T-F,t)}}function Zle(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||KH(t.elements.popper,r)&&(t.elements.arrow=r))}const Xle={name:"arrow",enabled:!0,phase:"main",fn:Yle,effect:Zle,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pp(e){return e.split("-")[1]}var Kle={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jle(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Mp(n*r)/r||0,y:Mp(i*r)/r||0}}function h3(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,h=a.x,m=h===void 0?0:h,g=a.y,y=g===void 0?0:g,v=typeof c=="function"?c({x:m,y}):{x:m,y};m=v.x,y=v.y;var _=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),S=Ur,k=Hr,R=window;if(u){var F=vv(n),T="clientHeight",P="clientWidth";if(F===yo(n)&&(F=Fc(n),jl(F).position!=="static"&&s==="absolute"&&(T="scrollHeight",P="scrollWidth")),F=F,r===Hr||(r===Ur||r===qo)&&o===Ry){k=Go;var B=d&&F===R&&R.visualViewport?R.visualViewport.height:F[T];y-=B-i.height,y*=l?1:-1}if(r===Ur||(r===Hr||r===Go)&&o===Ry){S=qo;var O=d&&F===R&&R.visualViewport?R.visualViewport.width:F[P];m-=O-i.width,m*=l?1:-1}}var D=Object.assign({position:s},u&&Kle),W=c===!0?Jle({x:m,y},yo(n)):{x:m,y};if(m=W.x,y=W.y,l){var j;return Object.assign({},D,(j={},j[k]=b?"0":"",j[S]=_?"0":"",j.transform=(R.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",j))}return Object.assign({},D,(t={},t[k]=b?y+"px":"",t[S]=_?m+"px":"",t.transform="",t))}function Qle(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:gs(t.placement),variation:Pp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,h3(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,h3(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const eue={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qle,data:{}};var ux={passive:!0};function tue(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=r===void 0?!0:r,a=i.resize,s=a===void 0?!0:a,l=yo(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,ux)}),s&&l.addEventListener("resize",n.update,ux),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,ux)}),s&&l.removeEventListener("resize",n.update,ux)}}const nue={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tue,data:{}};var iue={left:"right",right:"left",bottom:"top",top:"bottom"};function d_(e){return e.replace(/left|right|bottom|top/g,function(t){return iue[t]})}var rue={start:"end",end:"start"};function p3(e){return e.replace(/start|end/g,function(t){return rue[t]})}function yN(e){var t=yo(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function vN(e){return Np(Fc(e)).left+yN(e).scrollLeft}function oue(e,t){var n=yo(e),i=Fc(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var u=XH();(u||!u&&t==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+vN(e),y:l}}function aue(e){var t,n=Fc(e),i=yN(e),r=(t=e.ownerDocument)==null?void 0:t.body,o=jf(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=jf(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+vN(e),l=-i.scrollTop;return jl(r||n).direction==="rtl"&&(s+=jf(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function xN(e){var t=jl(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function tU(e){return["html","body","#document"].indexOf(ac(e))>=0?e.ownerDocument.body:ys(e)&&xN(e)?e:tU($2(e))}function W0(e,t){var n;t===void 0&&(t=[]);var i=tU(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),o=yo(i),a=r?[o].concat(o.visualViewport||[],xN(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(W0($2(a)))}function NT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sue(e,t){var n=Np(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function m3(e,t,n){return t===YH?NT(oue(e,n)):id(t)?sue(t,n):NT(aue(Fc(e)))}function lue(e){var t=W0($2(e)),n=["absolute","fixed"].indexOf(jl(e).position)>=0,i=n&&ys(e)?vv(e):e;return id(i)?t.filter(function(r){return id(r)&&KH(r,i)&&ac(r)!=="body"}):[]}function uue(e,t,n,i){var r=t==="clippingParents"?lue(e):[].concat(t),o=[].concat(r,[n]),a=o[0],s=o.reduce(function(l,u){var c=m3(e,u,i);return l.top=jf(c.top,l.top),l.right=gb(c.right,l.right),l.bottom=gb(c.bottom,l.bottom),l.left=jf(c.left,l.left),l},m3(e,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function nU(e){var t=e.reference,n=e.element,i=e.placement,r=i?gs(i):null,o=i?Pp(i):null,a=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(r){case Hr:l={x:a,y:t.y-n.height};break;case Go:l={x:a,y:t.y+t.height};break;case qo:l={x:t.x+t.width,y:s};break;case Ur:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=r?gN(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case Fp:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Ry:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function Ty(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,o=n.strategy,a=o===void 0?e.strategy:o,s=n.boundary,l=s===void 0?Nle:s,u=n.rootBoundary,c=u===void 0?YH:u,d=n.elementContext,h=d===void 0?Tg:d,m=n.altBoundary,g=m===void 0?!1:m,y=n.padding,v=y===void 0?0:y,_=QH(typeof v!="number"?v:eU(v,yv)),b=h===Tg?Ple:Tg,S=e.rects.popper,k=e.elements[g?b:h],R=uue(id(k)?k:k.contextElement||Fc(e.elements.popper),l,c,a),F=Np(e.elements.reference),T=nU({reference:F,element:S,strategy:"absolute",placement:r}),P=NT(Object.assign({},S,T)),B=h===Tg?P:F,O={top:R.top-B.top+_.top,bottom:B.bottom-R.bottom+_.bottom,left:R.left-B.left+_.left,right:B.right-R.right+_.right},D=e.modifiersData.offset;if(h===Tg&&D){var W=D[r];Object.keys(O).forEach(function(j){var U=[qo,Go].indexOf(j)>=0?1:-1,G=[Hr,Go].indexOf(j)>=0?"y":"x";O[j]+=W[G]*U})}return O}function cue(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?ZH:l,c=Pp(i),d=c?s?f3:f3.filter(function(g){return Pp(g)===c}):yv,h=d.filter(function(g){return u.indexOf(g)>=0});h.length===0&&(h=d);var m=h.reduce(function(g,y){return g[y]=Ty(e,{placement:y,boundary:r,rootBoundary:o,padding:a})[gs(y)],g},{});return Object.keys(m).sort(function(g,y){return m[g]-m[y]})}function fue(e){if(gs(e)===hN)return[];var t=d_(e);return[p3(e),t,p3(t)]}function due(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,g=m===void 0?!0:m,y=n.allowedAutoPlacements,v=t.options.placement,_=gs(v),b=_===v,S=l||(b||!g?[d_(v)]:fue(v)),k=[v].concat(S).reduce(function(Ee,we){return Ee.concat(gs(we)===hN?cue(t,{placement:we,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:y}):we)},[]),R=t.rects.reference,F=t.rects.popper,T=new Map,P=!0,B=k[0],O=0;O<k.length;O++){var D=k[O],W=gs(D),j=Pp(D)===Fp,U=[Hr,Go].indexOf(W)>=0,G=U?"width":"height",Z=Ty(t,{placement:D,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),J=U?j?qo:Ur:j?Go:Hr;R[G]>F[G]&&(J=d_(J));var H=d_(J),Q=[];if(o&&Q.push(Z[W]<=0),s&&Q.push(Z[J]<=0,Z[H]<=0),Q.every(function(Ee){return Ee})){B=D,P=!1;break}T.set(D,Q)}if(P)for(var K=g?3:1,ne=function(we){var Ae=k.find(function(It){var Et=T.get(It);if(Et)return Et.slice(0,we).every(function(ke){return ke})});if(Ae)return B=Ae,"break"},he=K;he>0;he--){var $e=ne(he);if($e==="break")break}t.placement!==B&&(t.modifiersData[i]._skip=!0,t.placement=B,t.reset=!0)}}const hue={name:"flip",enabled:!0,phase:"main",fn:due,requiresIfExists:["offset"],data:{_skip:!1}};function g3(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function y3(e){return[Hr,qo,Go,Ur].some(function(t){return e[t]>=0})}function pue(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=Ty(t,{elementContext:"reference"}),s=Ty(t,{altBoundary:!0}),l=g3(a,i),u=g3(s,r,o),c=y3(l),d=y3(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const mue={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pue};function gue(e,t,n){var i=gs(e),r=[Ur,Hr].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[Ur,qo].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}function yue(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=r===void 0?[0,0]:r,a=ZH.reduce(function(c,d){return c[d]=gue(d,t.rects,o),c},{}),s=a[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=a}const vue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yue};function xue(e){var t=e.state,n=e.name;t.modifiersData[n]=nU({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const _ue={name:"popperOffsets",enabled:!0,phase:"read",fn:xue,data:{}};function bue(e){return e==="x"?"y":"x"}function wue(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,m=h===void 0?!0:h,g=n.tetherOffset,y=g===void 0?0:g,v=Ty(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),_=gs(t.placement),b=Pp(t.placement),S=!b,k=gN(_),R=bue(k),F=t.modifiersData.popperOffsets,T=t.rects.reference,P=t.rects.popper,B=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,O=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,W={x:0,y:0};if(F){if(o){var j,U=k==="y"?Hr:Ur,G=k==="y"?Go:qo,Z=k==="y"?"height":"width",J=F[k],H=J+v[U],Q=J-v[G],K=m?-P[Z]/2:0,ne=b===Fp?T[Z]:P[Z],he=b===Fp?-P[Z]:-T[Z],$e=t.elements.arrow,Ee=m&&$e?mN($e):{width:0,height:0},we=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:JH(),Ae=we[U],It=we[G],Et=U0(0,T[Z],Ee[Z]),ke=S?T[Z]/2-K-Et-Ae-O.mainAxis:ne-Et-Ae-O.mainAxis,Ye=S?-T[Z]/2+K+Et+It+O.mainAxis:he+Et+It+O.mainAxis,He=t.elements.arrow&&vv(t.elements.arrow),de=He?k==="y"?He.clientTop||0:He.clientLeft||0:0,Tt=(j=D==null?void 0:D[k])!=null?j:0,ft=J+ke-Tt-de,tt=J+Ye-Tt,Vt=U0(m?gb(H,ft):H,J,m?jf(Q,tt):Q);F[k]=Vt,W[k]=Vt-J}if(s){var vn,er=k==="x"?Hr:Ur,Vs=k==="x"?Go:qo,Pi=F[R],Sr=R==="y"?"height":"width",ia=Pi+v[er],eo=Pi-v[Vs],Cr=[Hr,Ur].indexOf(_)!==-1,bt=(vn=D==null?void 0:D[R])!=null?vn:0,ri=Cr?ia:Pi-T[Sr]-P[Sr]-bt+O.altAxis,ko=Cr?Pi+T[Sr]+P[Sr]-bt-O.altAxis:eo,Va=m&&Cr?qle(ri,Pi,ko):U0(m?ri:ia,Pi,m?ko:eo);F[R]=Va,W[R]=Va-Pi}t.modifiersData[i]=W}}const Sue={name:"preventOverflow",enabled:!0,phase:"main",fn:wue,requiresIfExists:["offset"]};function Cue(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Eue(e){return e===yo(e)||!ys(e)?yN(e):Cue(e)}function kue(e){var t=e.getBoundingClientRect(),n=Mp(t.width)/e.offsetWidth||1,i=Mp(t.height)/e.offsetHeight||1;return n!==1||i!==1}function Rue(e,t,n){n===void 0&&(n=!1);var i=ys(t),r=ys(t)&&kue(t),o=Fc(t),a=Np(e,r,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ac(t)!=="body"||xN(o))&&(s=Eue(t)),ys(t)?(l=Np(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=vN(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Tue(e){var t=new Map,n=new Set,i=[];e.forEach(function(o){t.set(o.name,o)});function r(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&r(l)}}),i.push(o)}return e.forEach(function(o){n.has(o.name)||r(o)}),i}function Aue(e){var t=Tue(e);return Ule.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function Fue(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Mue(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var v3={placement:"bottom",modifiers:[],strategy:"absolute"};function x3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Nue(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,o=r===void 0?v3:r;return function(s,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},v3,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],h=!1,m={state:c,setOptions:function(_){var b=typeof _=="function"?_(c.options):_;y(),c.options=Object.assign({},o,c.options,b),c.scrollParents={reference:id(s)?W0(s):s.contextElement?W0(s.contextElement):[],popper:W0(l)};var S=Aue(Mue([].concat(i,c.options.modifiers)));return c.orderedModifiers=S.filter(function(k){return k.enabled}),g(),m.update()},forceUpdate:function(){if(!h){var _=c.elements,b=_.reference,S=_.popper;if(x3(b,S)){c.rects={reference:Rue(b,vv(S),c.options.strategy==="fixed"),popper:mN(S)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var k=0;k<c.orderedModifiers.length;k++){if(c.reset===!0){c.reset=!1,k=-1;continue}var R=c.orderedModifiers[k],F=R.fn,T=R.options,P=T===void 0?{}:T,B=R.name;typeof F=="function"&&(c=F({state:c,options:P,name:B,instance:m})||c)}}}},update:Fue(function(){return new Promise(function(v){m.forceUpdate(),v(c)})}),destroy:function(){y(),h=!0}};if(!x3(s,l))return m;m.setOptions(u).then(function(v){!h&&u.onFirstUpdate&&u.onFirstUpdate(v)});function g(){c.orderedModifiers.forEach(function(v){var _=v.name,b=v.options,S=b===void 0?{}:b,k=v.effect;if(typeof k=="function"){var R=k({state:c,name:_,instance:m,options:S}),F=function(){};d.push(R||F)}})}function y(){d.forEach(function(v){return v()}),d=[]}return m}}const Pue=Nue({defaultModifiers:[mue,_ue,eue,nue,vue,hue,Sue,Xle]}),$ue=["enabled","placement","strategy","modifiers"];function Oue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const Iue={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Lue={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const i=(t.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);i.length?t.setAttribute("aria-describedby",i.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:i}=e.elements,r=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in i){const o=i.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(n.id)!==-1)return;i.setAttribute("aria-describedby",o?`${o},${n.id}`:n.id)}}},Due=[];function iU(e,t,n={}){let{enabled:i=!0,placement:r="bottom",strategy:o="absolute",modifiers:a=Due}=n,s=Oue(n,$ue);const l=M.useRef(a),u=M.useRef(),c=M.useCallback(()=>{var v;(v=u.current)==null||v.update()},[]),d=M.useCallback(()=>{var v;(v=u.current)==null||v.forceUpdate()},[]),[h,m]=Mle(M.useState({placement:r,update:c,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),g=M.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:v})=>{const _={},b={};Object.keys(v.elements).forEach(S=>{_[S]=v.styles[S],b[S]=v.attributes[S]}),m({state:v,styles:_,attributes:b,update:c,forceUpdate:d,placement:v.placement})}}),[c,d,m]),y=M.useMemo(()=>(H0(l.current,a)||(l.current=a),l.current),[a]);return M.useEffect(()=>{!u.current||!i||u.current.setOptions({placement:r,strategy:o,modifiers:[...y,g,Iue]})},[o,r,g,i,y]),M.useEffect(()=>{if(!(!i||e==null||t==null))return u.current=Pue(e,t,Object.assign({},s,{placement:r,strategy:o,modifiers:[...y,Lue,g]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,m(v=>Object.assign({},v,{attributes:{},styles:{popper:{}}})))}},[i,e,t]),h}function Ay(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var zue=function(){},jue=zue;const Bue=Td(jue),_3=()=>{};function Hue(e){return e.button===0}function Uue(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const h_=e=>e&&("current"in e?e.current:e),b3={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function rU(e,t=_3,{disabled:n,clickTrigger:i="click"}={}){const r=M.useRef(!1),o=M.useRef(!1),a=M.useCallback(u=>{const c=h_(e);Bue(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!c||Uue(u)||!Hue(u)||!!Ay(c,u.target)||o.current,o.current=!1},[e]),s=cn(u=>{const c=h_(e);c&&Ay(c,u.target)&&(o.current=!0)}),l=cn(u=>{r.current||t(u)});M.useEffect(()=>{var u,c;if(n||e==null)return;const d=vm(h_(e)),h=d.defaultView||window;let m=(u=h.event)!=null?u:(c=h.parent)==null?void 0:c.event,g=null;b3[i]&&(g=vl(d,b3[i],s,!0));const y=vl(d,i,a,!0),v=vl(d,i,b=>{if(b===m){m=void 0;return}l(b)});let _=[];return"ontouchstart"in d.documentElement&&(_=[].slice.call(d.body.children).map(b=>vl(b,"mousemove",_3))),()=>{g==null||g(),y(),v(),_.forEach(b=>b())}},[e,n,i,a,s,l])}function Wue(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function Gue(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function oU({enabled:e,enableEvents:t,placement:n,flip:i,offset:r,fixed:o,containerPadding:a,arrowElement:s,popperConfig:l={}}){var u,c,d,h,m;const g=Wue(l.modifiers);return Object.assign({},l,{placement:n,enabled:e,strategy:o?"fixed":l.strategy,modifiers:Gue(Object.assign({},g,{eventListeners:{enabled:t,options:(u=g.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},g.preventOverflow,{options:a?Object.assign({padding:a},(c=g.preventOverflow)==null?void 0:c.options):(d=g.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:r},(h=g.offset)==null?void 0:h.options)},arrow:Object.assign({},g.arrow,{enabled:!!s,options:Object.assign({},(m=g.arrow)==null?void 0:m.options,{element:s})}),flip:Object.assign({enabled:!!i},g.flip)}))})}const que=["children"];function Vue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const Yue=()=>{};function aU(e={}){const t=M.useContext(P2),[n,i]=db(),r=M.useRef(!1),{flip:o,offset:a,rootCloseEvent:s,fixed:l=!1,placement:u,popperConfig:c={},enableEventListeners:d=!0,usePopper:h=!!t}=e,m=(t==null?void 0:t.show)==null?!!e.show:t.show;m&&!r.current&&(r.current=!0);const g=F=>{t==null||t.toggle(!1,F)},{placement:y,setMenu:v,menuElement:_,toggleElement:b}=t||{},S=iU(b,_,oU({placement:u||y||"bottom-start",enabled:h,enableEvents:d??m,offset:a,flip:o,fixed:l,arrowElement:n,popperConfig:c})),k=Object.assign({ref:v||Yue,"aria-labelledby":b==null?void 0:b.id},S.attributes.popper,{style:S.styles.popper}),R={show:m,placement:y,hasShown:r.current,toggle:t==null?void 0:t.toggle,popper:h?S:null,arrowProps:h?Object.assign({ref:i},S.attributes.arrow,{style:S.styles.arrow}):{}};return rU(_,g,{clickTrigger:s,disabled:!m}),[k,R]}const Zue={usePopper:!0};function _N(e){let{children:t}=e,n=Vue(e,que);const[i,r]=aU(n);return w.jsx(w.Fragment,{children:t(i,r)})}_N.displayName="DropdownMenu";_N.defaultProps=Zue;const yb={prefix:String(Math.round(Math.random()*1e10)),current:0},sU=Pt.createContext(yb),Xue=Pt.createContext(!1);let Kue=!!(typeof window<"u"&&window.document&&window.document.createElement),VE=new WeakMap;function Jue(e=!1){let t=M.useContext(sU),n=M.useRef(null);if(n.current===null&&!e){var i,r;let o=(r=Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(o){let a=VE.get(o);a==null?VE.set(o,{id:t.current,state:o.memoizedState}):o.memoizedState!==a.state&&(t.current=a.id,VE.delete(o))}n.current=++t.current}return n.current}function Que(e){let t=M.useContext(sU);t===yb&&!Kue&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Jue(!!e),i=`react-aria${t.prefix}`;return e||`${i}-${n}`}function ece(e){let t=Pt.useId(),[n]=M.useState(rce()),i=n?"react-aria":`react-aria${yb.prefix}`;return e||`${i}-${t}`}const lU=typeof Pt.useId=="function"?ece:Que;function tce(){return!1}function nce(){return!0}function ice(e){return()=>{}}function rce(){return typeof Pt.useSyncExternalStore=="function"?Pt.useSyncExternalStore(ice,tce,nce):M.useContext(Xue)}const uU=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},w3=()=>{};function cU(){const e=lU(),{show:t=!1,toggle:n=w3,setToggle:i,menuElement:r}=M.useContext(P2)||{},o=M.useCallback(s=>{n(!t,s)},[t,n]),a={id:e,ref:i||w3,onClick:o,"aria-expanded":!!t};return r&&uU(r)&&(a["aria-haspopup"]=!0),[a,{show:t,toggle:n}]}function fU({children:e}){const[t,n]=cU();return w.jsx(w.Fragment,{children:e(t,n)})}fU.displayName="DropdownToggle";const oce=M.createContext(null),rd=(e,t=null)=>e!=null?String(e):t||null,Cs=oce,dU=M.createContext(null);dU.displayName="NavContext";const bN=dU,ace="data-rr-ui-",sce="rrUi";function _m(e){return`${ace}${e}`}function lce(e){return`${sce}${e}`}const uce=["eventKey","disabled","onClick","active","as"];function cce(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function hU({key:e,href:t,active:n,disabled:i,onClick:r}){const o=M.useContext(Cs),a=M.useContext(bN),{activeKey:s}=a||{},l=rd(e,t),u=n==null&&e!=null?rd(s)===l:n;return[{onClick:cn(d=>{i||(r==null||r(d),o&&!d.isPropagationStopped()&&o(l,d))}),"aria-disabled":i||void 0,"aria-selected":u,[_m("dropdown-item")]:""},{isActive:u}]}const pU=M.forwardRef((e,t)=>{let{eventKey:n,disabled:i,onClick:r,active:o,as:a=cN}=e,s=cce(e,uce);const[l]=hU({key:n,href:s.href,disabled:i,onClick:r,active:o});return w.jsx(a,Object.assign({},s,{ref:t},l))});pU.displayName="DropdownItem";const mU=M.createContext(xm?window:void 0);mU.Provider;function O2(){return M.useContext(mU)}function S3(){const e=VH(),t=M.useRef(null),n=M.useCallback(i=>{t.current=i,e()},[e]);return[t,n]}function xv({defaultShow:e,show:t,onSelect:n,onToggle:i,itemSelector:r=`* [${_m("dropdown-item")}]`,focusFirstItemOnShow:o,placement:a="bottom-start",children:s}){const l=O2(),[u,c]=qH(t,e,i),[d,h]=S3(),m=d.current,[g,y]=S3(),v=g.current,_=xH(u),b=M.useRef(null),S=M.useRef(!1),k=M.useContext(Cs),R=M.useCallback((D,W,j=W==null?void 0:W.type)=>{c(D,{originalEvent:W,source:j})},[c]),F=cn((D,W)=>{n==null||n(D,W),R(!1,W,"select"),W.isPropagationStopped()||k==null||k(D,W)}),T=M.useMemo(()=>({toggle:R,placement:a,show:u,menuElement:m,toggleElement:v,setMenu:h,setToggle:y}),[R,a,u,m,v,h,y]);m&&_&&!u&&(S.current=m.contains(m.ownerDocument.activeElement));const P=cn(()=>{v&&v.focus&&v.focus()}),B=cn(()=>{const D=b.current;let W=o;if(W==null&&(W=d.current&&uU(d.current)?"keyboard":!1),W===!1||W==="keyboard"&&!/^key.+$/.test(D))return;const j=ul(d.current,r)[0];j&&j.focus&&j.focus()});M.useEffect(()=>{u?B():S.current&&(S.current=!1,P())},[u,S,P,B]),M.useEffect(()=>{b.current=null});const O=(D,W)=>{if(!d.current)return null;const j=ul(d.current,r);let U=j.indexOf(D)+W;return U=Math.max(0,Math.min(U,j.length)),j[U]};return Jse(M.useCallback(()=>l.document,[l]),"keydown",D=>{var W,j;const{key:U}=D,G=D.target,Z=(W=d.current)==null?void 0:W.contains(G),J=(j=g.current)==null?void 0:j.contains(G);if(/input|textarea/i.test(G.tagName)&&(U===" "||U!=="Escape"&&Z||U==="Escape"&&G.type==="search")||!Z&&!J||U==="Tab"&&(!d.current||!u))return;b.current=D.type;const Q={originalEvent:D,source:D.type};switch(U){case"ArrowUp":{const K=O(G,-1);K&&K.focus&&K.focus(),D.preventDefault();return}case"ArrowDown":if(D.preventDefault(),!u)c(!0,Q);else{const K=O(G,1);K&&K.focus&&K.focus()}return;case"Tab":oN(G.ownerDocument,"keyup",K=>{var ne;(K.key==="Tab"&&!K.target||!((ne=d.current)!=null&&ne.contains(K.target)))&&c(!1,Q)},{once:!0});break;case"Escape":U==="Escape"&&(D.preventDefault(),D.stopPropagation()),c(!1,Q);break}}),w.jsx(Cs.Provider,{value:F,children:w.jsx(P2.Provider,{value:T,children:s})})}xv.displayName="Dropdown";xv.Menu=_N;xv.Toggle=fU;xv.Item=pU;const gU=M.createContext({});gU.displayName="DropdownContext";const yU=gU,vU=M.forwardRef(({className:e,bsPrefix:t,as:n="hr",role:i="separator",...r},o)=>(t=De(t,"dropdown-divider"),w.jsx(n,{ref:o,className:Ne(e,t),role:i,...r})));vU.displayName="DropdownDivider";const fce=vU,xU=M.forwardRef(({className:e,bsPrefix:t,as:n="div",role:i="heading",...r},o)=>(t=De(t,"dropdown-header"),w.jsx(n,{ref:o,className:Ne(e,t),role:i,...r})));xU.displayName="DropdownHeader";const dce=xU,_U=M.forwardRef(({bsPrefix:e,className:t,eventKey:n,disabled:i=!1,onClick:r,active:o,as:a=hb,...s},l)=>{const u=De(e,"dropdown-item"),[c,d]=hU({key:n,href:s.href,disabled:i,onClick:r,active:o});return w.jsx(a,{...s,...c,ref:l,className:Ne(t,u,d.isActive&&"active",i&&"disabled")})});_U.displayName="DropdownItem";const hce=_U,bU=M.forwardRef(({className:e,bsPrefix:t,as:n="span",...i},r)=>(t=De(t,"dropdown-item-text"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));bU.displayName="DropdownItemText";const pce=bU,wU=M.createContext(null);wU.displayName="InputGroupContext";const SU=wU,CU=M.createContext(null);CU.displayName="NavbarContext";const Pd=CU;function EU(e,t){return e}function kU(e,t,n){const i=n?"top-end":"top-start",r=n?"top-start":"top-end",o=n?"bottom-end":"bottom-start",a=n?"bottom-start":"bottom-end",s=n?"right-start":"left-start",l=n?"right-end":"left-end",u=n?"left-start":"right-start",c=n?"left-end":"right-end";let d=e?a:o;return t==="up"?d=e?r:i:t==="end"?d=e?c:u:t==="start"?d=e?l:s:t==="down-centered"?d="bottom":t==="up-centered"&&(d="top"),d}const RU=M.forwardRef(({bsPrefix:e,className:t,align:n,rootCloseEvent:i,flip:r=!0,show:o,renderOnMount:a,as:s="div",popperConfig:l,variant:u,...c},d)=>{let h=!1;const m=M.useContext(Pd),g=De(e,"dropdown-menu"),{align:y,drop:v,isRTL:_}=M.useContext(yU);n=n||y;const b=M.useContext(SU),S=[];if(n)if(typeof n=="object"){const D=Object.keys(n);if(D.length){const W=D[0],j=n[W];h=j==="start",S.push(`${g}-${W}-${j}`)}}else n==="end"&&(h=!0);const k=kU(h,v,_),[R,{hasShown:F,popper:T,show:P,toggle:B}]=aU({flip:r,rootCloseEvent:i,show:o,usePopper:!m&&S.length===0,offset:[0,2],popperConfig:l,placement:k});if(R.ref=$s(EU(d),R.ref),ky(()=>{P&&(T==null||T.update())},[P]),!F&&!a&&!b)return null;typeof s!="string"&&(R.show=P,R.close=()=>B==null?void 0:B(!1),R.align=n);let O=c.style;return T!=null&&T.placement&&(O={...c.style,...R.style},c["x-placement"]=T.placement),w.jsx(s,{...c,...R,style:O,...(S.length||m)&&{"data-bs-popper":"static"},className:Ne(t,g,P&&"show",h&&`${g}-end`,u&&`${g}-${u}`,...S)})});RU.displayName="DropdownMenu";const mce=RU,TU=M.forwardRef(({bsPrefix:e,split:t,className:n,childBsPrefix:i,as:r=CH,...o},a)=>{const s=De(e,"dropdown-toggle"),l=M.useContext(P2);i!==void 0&&(o.bsPrefix=i);const[u]=cU();return u.ref=$s(u.ref,EU(a)),w.jsx(r,{className:Ne(n,s,t&&`${s}-split`,(l==null?void 0:l.show)&&"show"),...u,...o})});TU.displayName="DropdownToggle";const gce=TU,AU=M.forwardRef((e,t)=>{const{bsPrefix:n,drop:i="down",show:r,className:o,align:a="start",onSelect:s,onToggle:l,focusFirstItemOnShow:u,as:c="div",navbar:d,autoClose:h=!0,...m}=ym(e,{show:"onToggle"}),g=M.useContext(SU),y=De(n,"dropdown"),v=gv(),_=T=>h===!1?T==="click":h==="inside"?T!=="rootClose":h==="outside"?T!=="select":!0,b=cn((T,P)=>{var B,O;!((B=P.originalEvent)==null||(O=B.target)==null)&&O.classList.contains("dropdown-toggle")&&P.source==="mousedown"||(P.originalEvent.currentTarget===document&&(P.source!=="keydown"||P.originalEvent.key==="Escape")&&(P.source="rootClose"),_(P.source)&&(l==null||l(T,P)))}),k=kU(a==="end",i,v),R=M.useMemo(()=>({align:a,drop:i,isRTL:v}),[a,i,v]),F={down:y,"down-centered":`${y}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return w.jsx(yU.Provider,{value:R,children:w.jsx(xv,{placement:k,show:r,onSelect:s,onToggle:b,focusFirstItemOnShow:u,itemSelector:`.${y}-item:not(.disabled):not(:disabled)`,children:g?m.children:w.jsx(c,{...m,ref:t,className:Ne(o,r&&"show",F[i])})})})});AU.displayName="Dropdown";const Mf=Object.assign(AU,{Toggle:gce,Menu:mce,Item:hce,ItemText:pce,Divider:fce,Header:dce});bn.string,bn.bool,bn.bool,bn.bool,bn.bool;const FU=M.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:i=!1,roundedCircle:r=!1,thumbnail:o=!1,...a},s)=>(e=De(e,"img"),w.jsx("img",{ref:s,...a,className:Ne(t,n&&`${e}-fluid`,i&&"rounded",r&&"rounded-circle",o&&`${e}-thumbnail`)})));FU.displayName="Image";const yce=FU,vce={type:bn.string,tooltip:bn.bool,as:bn.elementType},wN=M.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...r},o)=>w.jsx(e,{...r,ref:o,className:Ne(t,`${n}-${i?"tooltip":"feedback"}`)}));wN.displayName="Feedback";wN.propTypes=vce;const MU=wN,xce=M.createContext({}),Bl=xce,NU=M.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:r=!1,isInvalid:o=!1,as:a="input",...s},l)=>{const{controlId:u}=M.useContext(Bl);return t=De(t,"form-check-input"),w.jsx(a,{...s,ref:l,type:i,id:e||u,className:Ne(n,t,r&&"is-valid",o&&"is-invalid")})});NU.displayName="FormCheckInput";const PU=NU,$U=M.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},r)=>{const{controlId:o}=M.useContext(Bl);return e=De(e,"form-check-label"),w.jsx("label",{...i,ref:r,htmlFor:n||o,className:Ne(t,e)})});$U.displayName="FormCheckLabel";const PT=$U,OU=M.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:o=!1,isValid:a=!1,isInvalid:s=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:d,style:h,title:m="",type:g="checkbox",label:y,children:v,as:_="input",...b},S)=>{t=De(t,"form-check"),n=De(n,"form-switch");const{controlId:k}=M.useContext(Bl),R=M.useMemo(()=>({controlId:e||k}),[k,e]),F=!v&&y!=null&&y!==!1||Cle(v,PT),T=w.jsx(PU,{...b,type:g==="switch"?"checkbox":g,ref:S,isValid:a,isInvalid:s,disabled:o,as:_});return w.jsx(Bl.Provider,{value:R,children:w.jsx("div",{style:h,className:Ne(d,F&&t,i&&`${t}-inline`,r&&`${t}-reverse`,g==="switch"&&n),children:v||w.jsxs(w.Fragment,{children:[T,F&&w.jsx(PT,{title:m,children:y}),u&&w.jsx(MU,{type:c,tooltip:l,children:u})]})})})});OU.displayName="FormCheck";const vb=Object.assign(OU,{Input:PU,Label:PT}),IU=M.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:r,className:o,isValid:a=!1,isInvalid:s=!1,plaintext:l,readOnly:u,as:c="input",...d},h)=>{const{controlId:m}=M.useContext(Bl);return e=De(e,"form-control"),w.jsx(c,{...d,type:t,size:i,ref:h,readOnly:u,id:r||m,className:Ne(o,l?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",s&&"is-invalid")})});IU.displayName="FormControl";const _ce=Object.assign(IU,{Feedback:MU}),LU=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"form-floating"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));LU.displayName="FormFloating";const bce=LU,DU=M.forwardRef(({controlId:e,as:t="div",...n},i)=>{const r=M.useMemo(()=>({controlId:e}),[e]);return w.jsx(Bl.Provider,{value:r,children:w.jsx(t,{...n,ref:i})})});DU.displayName="FormGroup";const zU=DU,jU=M.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:o,...a},s)=>{const{controlId:l}=M.useContext(Bl);t=De(t,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=Ne(r,t,i&&"visually-hidden",n&&u);return o=o||l,n?w.jsx(GH,{ref:s,as:"label",className:c,htmlFor:o,...a}):w.jsx(e,{ref:s,className:c,htmlFor:o,...a})});jU.displayName="FormLabel";const wce=jU,BU=M.forwardRef(({bsPrefix:e,className:t,id:n,...i},r)=>{const{controlId:o}=M.useContext(Bl);return e=De(e,"form-range"),w.jsx("input",{...i,type:"range",ref:r,className:Ne(t,e),id:n||o})});BU.displayName="FormRange";const Sce=BU,HU=M.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:r=!1,isInvalid:o=!1,id:a,...s},l)=>{const{controlId:u}=M.useContext(Bl);return e=De(e,"form-select"),w.jsx("select",{...s,size:n,ref:l,className:Ne(i,e,t&&`${e}-${t}`,r&&"is-valid",o&&"is-invalid"),id:a||u})});HU.displayName="FormSelect";const Cce=HU,UU=M.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...r},o)=>(e=De(e,"form-text"),w.jsx(n,{...r,ref:o,className:Ne(t,e,i&&"text-muted")})));UU.displayName="FormText";const Ece=UU,WU=M.forwardRef((e,t)=>w.jsx(vb,{...e,ref:t,type:"switch"}));WU.displayName="Switch";const kce=Object.assign(WU,{Input:vb.Input,Label:vb.Label}),GU=M.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:r,...o},a)=>(e=De(e,"form-floating"),w.jsxs(zU,{ref:a,className:Ne(t,e),controlId:i,...o,children:[n,w.jsx("label",{htmlFor:i,children:r})]})));GU.displayName="FloatingLabel";const Rce=GU,Tce={_ref:bn.any,validated:bn.bool,as:bn.elementType},SN=M.forwardRef(({className:e,validated:t,as:n="form",...i},r)=>w.jsx(n,{...i,ref:r,className:Ne(e,t&&"was-validated")}));SN.displayName="Form";SN.propTypes=Tce;const no=Object.assign(SN,{Group:zU,Control:_ce,Floating:bce,Check:vb,Switch:kce,Label:wce,Text:Ece,Range:Sce,Select:Cce,FloatingLabel:Rce}),Ace=M.createContext(null),bm=Ace,Fce=["as","active","eventKey"];function Mce(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function qU({key:e,onClick:t,active:n,id:i,role:r,disabled:o}){const a=M.useContext(Cs),s=M.useContext(bN),l=M.useContext(bm);let u=n;const c={role:r};if(s){!r&&s.role==="tablist"&&(c.role="tab");const d=s.getControllerId(e??null),h=s.getControlledId(e??null);c[_m("event-key")]=e,c.id=d||i,u=n==null&&e!=null?s.activeKey===e:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=h)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),o&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=cn(d=>{o||(t==null||t(d),e!=null&&a&&!d.isPropagationStopped()&&a(e,d))}),[c,{isActive:u}]}const VU=M.forwardRef((e,t)=>{let{as:n=cN,active:i,eventKey:r}=e,o=Mce(e,Fce);const[a,s]=qU(Object.assign({key:rd(r,o.href),active:i},o));return a[_m("active")]=s.isActive,w.jsx(n,Object.assign({},o,a,{ref:t}))});VU.displayName="NavItem";const Nce=VU,Pce=["as","onSelect","activeKey","role","onKeyDown"];function $ce(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const C3=()=>{},E3=_m("event-key"),YU=M.forwardRef((e,t)=>{let{as:n="div",onSelect:i,activeKey:r,role:o,onKeyDown:a}=e,s=$ce(e,Pce);const l=VH(),u=M.useRef(!1),c=M.useContext(Cs),d=M.useContext(bm);let h,m;d&&(o=o||"tablist",r=d.activeKey,h=d.getControlledId,m=d.getControllerId);const g=M.useRef(null),y=S=>{const k=g.current;if(!k)return null;const R=ul(k,`[${E3}]:not([aria-disabled=true])`),F=k.querySelector("[aria-selected=true]");if(!F||F!==document.activeElement)return null;const T=R.indexOf(F);if(T===-1)return null;let P=T+S;return P>=R.length&&(P=0),P<0&&(P=R.length-1),R[P]},v=(S,k)=>{S!=null&&(i==null||i(S,k),c==null||c(S,k))},_=S=>{if(a==null||a(S),!d)return;let k;switch(S.key){case"ArrowLeft":case"ArrowUp":k=y(-1);break;case"ArrowRight":case"ArrowDown":k=y(1);break;default:return}k&&(S.preventDefault(),v(k.dataset[lce("EventKey")]||null,S),u.current=!0,l())};M.useEffect(()=>{if(g.current&&u.current){const S=g.current.querySelector(`[${E3}][aria-selected=true]`);S==null||S.focus()}u.current=!1});const b=$s(t,g);return w.jsx(Cs.Provider,{value:v,children:w.jsx(bN.Provider,{value:{role:o,activeKey:rd(r),getControlledId:h||C3,getControllerId:m||C3},children:w.jsx(n,Object.assign({},s,{onKeyDown:_,ref:b,role:o}))})})});YU.displayName="Nav";const Oce=Object.assign(YU,{Item:Nce});var cx;function k3(e){if((!cx&&cx!==0||e)&&xm){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),cx=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return cx}function YE(e){e===void 0&&(e=vm());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Ice(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const R3=_m("modal-open");class Lce{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Ice(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[i]:r.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(kl(r,i)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(R3,""),kl(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(R3),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const CN=Lce,ZE=(e,t)=>xm?e==null?(t||vm()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function $T(e,t){const n=O2(),[i,r]=M.useState(()=>ZE(e,n==null?void 0:n.document));if(!i){const o=ZE(e);o&&r(o)}return M.useEffect(()=>{t&&i&&t(i)},[t,i]),M.useEffect(()=>{const o=ZE(e);o!==i&&r(o)},[e,i]),i}function EN({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:r}){const o=M.useRef(null),a=M.useRef(t),s=cn(n);M.useEffect(()=>{t?a.current=!0:s(o.current)},[t,s]);const l=$s(o,e.ref),u=M.cloneElement(e,{ref:l});return t?u:r||!a.current&&i?null:u}function Dce({in:e,onTransition:t}){const n=M.useRef(null),i=M.useRef(!0),r=cn(t);return ky(()=>{if(!n.current)return;let o=!1;return r({in:e,element:n.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[e,r]),ky(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function zce({children:e,in:t,onExited:n,onEntered:i,transition:r}){const[o,a]=M.useState(!t);t&&o&&a(!1);const s=Dce({in:!!t,onTransition:u=>{const c=()=>{u.isStale()||(u.in?i==null||i(u.element,u.initial):(a(!0),n==null||n(u.element)))};Promise.resolve(r(u)).then(c,d=>{throw u.in||a(!0),d})}}),l=$s(s,e.ref);return o&&!t?null:M.cloneElement(e,{ref:l})}function OT(e,t,n){return e?w.jsx(e,Object.assign({},n)):t?w.jsx(zce,Object.assign({},n,{transition:t})):w.jsx(EN,Object.assign({},n))}function ZU(e){return e.code==="Escape"||e.keyCode===27}const jce=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Bce(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}let XE;function Hce(e){return XE||(XE=new CN({ownerDocument:e==null?void 0:e.document})),XE}function Uce(e){const t=O2(),n=e||Hce(t),i=M.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:M.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:M.useCallback(r=>{i.current.backdrop=r},[])})}const XU=M.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:r,style:o,children:a,backdrop:s=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:d,runTransition:h,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:_=!0,restoreFocusOptions:b,renderDialog:S,renderBackdrop:k=tt=>w.jsx("div",Object.assign({},tt)),manager:R,container:F,onShow:T,onHide:P=()=>{},onExit:B,onExited:O,onExiting:D,onEnter:W,onEntering:j,onEntered:U}=e,G=Bce(e,jce);const Z=O2(),J=$T(F),H=Uce(R),Q=lN(),K=xH(n),[ne,he]=M.useState(!n),$e=M.useRef(null);M.useImperativeHandle(t,()=>H,[H]),xm&&!K&&n&&($e.current=YE(Z==null?void 0:Z.document)),n&&ne&&he(!1);const Ee=cn(()=>{if(H.add(),Ye.current=vl(document,"keydown",Et),ke.current=vl(document,"focus",()=>setTimeout(Ae),!0),T&&T(),y){var tt,Vt;const vn=YE((tt=(Vt=H.dialog)==null?void 0:Vt.ownerDocument)!=null?tt:Z==null?void 0:Z.document);H.dialog&&vn&&!Ay(H.dialog,vn)&&($e.current=vn,H.dialog.focus())}}),we=cn(()=>{if(H.remove(),Ye.current==null||Ye.current(),ke.current==null||ke.current(),_){var tt;(tt=$e.current)==null||tt.focus==null||tt.focus(b),$e.current=null}});M.useEffect(()=>{!n||!J||Ee()},[n,J,Ee]),M.useEffect(()=>{ne&&we()},[ne,we]),dN(()=>{we()});const Ae=cn(()=>{if(!v||!Q()||!H.isTopModal())return;const tt=YE(Z==null?void 0:Z.document);H.dialog&&tt&&!Ay(H.dialog,tt)&&H.dialog.focus()}),It=cn(tt=>{tt.target===tt.currentTarget&&(u==null||u(tt),s===!0&&P())}),Et=cn(tt=>{l&&ZU(tt)&&H.isTopModal()&&(c==null||c(tt),tt.defaultPrevented||P())}),ke=M.useRef(),Ye=M.useRef(),He=(...tt)=>{he(!0),O==null||O(...tt)};if(!J)return null;const de=Object.assign({role:i,ref:H.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},G,{style:o,className:r,tabIndex:-1});let Tt=S?S(de):w.jsx("div",Object.assign({},de,{children:M.cloneElement(a,{role:"document"})}));Tt=OT(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:B,onExiting:D,onExited:He,onEnter:W,onEntering:j,onEntered:U,children:Tt});let ft=null;return s&&(ft=k({ref:H.setBackdropRef,onClick:It}),ft=OT(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ft})),w.jsx(w.Fragment,{children:Ff.createPortal(w.jsxs(w.Fragment,{children:[ft,Tt]}),J)})});XU.displayName="Modal";const KU=Object.assign(XU,{Manager:CN});function IT(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Wce(e,t){e.classList?e.classList.add(t):IT(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function T3(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Gce(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=T3(e.className,t):e.setAttribute("class",T3(e.className&&e.className.baseVal||"",t))}const xh={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class JU extends CN{adjustAndStore(t,n,i){const r=n.style[t];n.dataset[t]=r,kl(n,{[t]:`${parseFloat(kl(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],kl(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Wce(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ul(n,xh.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth)),ul(n,xh.STICKY_CONTENT).forEach(o=>this.adjustAndStore(r,o,-t.scrollBarWidth)),ul(n,xh.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(r,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Gce(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ul(n,xh.FIXED_CONTENT).forEach(o=>this.restore(i,o)),ul(n,xh.STICKY_CONTENT).forEach(o=>this.restore(r,o)),ul(n,xh.NAVBAR_TOGGLER).forEach(o=>this.restore(r,o))}}let KE;function QU(e){return KE||(KE=new JU(e)),KE}const eW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"modal-body"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));eW.displayName="ModalBody";const qce=eW,Vce=M.createContext({onHide(){}}),kN=Vce,tW=M.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:r,fullscreen:o,children:a,scrollable:s,...l},u)=>{e=De(e,"modal");const c=`${e}-dialog`,d=typeof o=="string"?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return w.jsx("div",{...l,ref:u,className:Ne(c,t,r&&`${e}-${r}`,i&&`${c}-centered`,s&&`${c}-scrollable`,o&&d),children:w.jsx("div",{className:Ne(`${e}-content`,n),children:a})})});tW.displayName="ModalDialog";const nW=tW,iW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"modal-footer"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));iW.displayName="ModalFooter";const Yce=iW,Zce=M.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:r,...o},a)=>{const s=M.useContext(kN),l=cn(()=>{s==null||s.onHide(),i==null||i()});return w.jsxs("div",{ref:a,...o,children:[r,n&&w.jsx(ule,{"aria-label":e,variant:t,onClick:l})]})}),rW=Zce,oW=M.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(e=De(e,"modal-header"),w.jsx(rW,{ref:o,...r,className:Ne(t,e),closeLabel:n,closeButton:i})));oW.displayName="ModalHeader";const Xce=oW,Kce=N2("h4"),aW=M.forwardRef(({className:e,bsPrefix:t,as:n=Kce,...i},r)=>(t=De(t,"modal-title"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));aW.displayName="ModalTitle";const Jce=aW;function Qce(e){return w.jsx(nd,{...e,timeout:null})}function efe(e){return w.jsx(nd,{...e,timeout:null})}const sW=M.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:r,children:o,dialogAs:a=nW,"aria-labelledby":s,"aria-describedby":l,"aria-label":u,show:c=!1,animation:d=!0,backdrop:h=!0,keyboard:m=!0,onEscapeKeyDown:g,onShow:y,onHide:v,container:_,autoFocus:b=!0,enforceFocus:S=!0,restoreFocus:k=!0,restoreFocusOptions:R,onEntered:F,onExit:T,onExiting:P,onEnter:B,onEntering:O,onExited:D,backdropClassName:W,manager:j,...U},G)=>{const[Z,J]=M.useState({}),[H,Q]=M.useState(!1),K=M.useRef(!1),ne=M.useRef(!1),he=M.useRef(null),[$e,Ee]=db(),we=$s(G,Ee),Ae=cn(v),It=gv();e=De(e,"modal");const Et=M.useMemo(()=>({onHide:Ae}),[Ae]);function ke(){return j||QU({isRTL:It})}function Ye(bt){if(!xm)return;const ri=ke().getScrollbarWidth()>0,ko=bt.scrollHeight>vm(bt).documentElement.clientHeight;J({paddingRight:ri&&!ko?k3():void 0,paddingLeft:!ri&&ko?k3():void 0})}const He=cn(()=>{$e&&Ye($e.dialog)});dN(()=>{AT(window,"resize",He),he.current==null||he.current()});const de=()=>{K.current=!0},Tt=bt=>{K.current&&$e&&bt.target===$e.dialog&&(ne.current=!0),K.current=!1},ft=()=>{Q(!0),he.current=oH($e.dialog,()=>{Q(!1)})},tt=bt=>{bt.target===bt.currentTarget&&ft()},Vt=bt=>{if(h==="static"){tt(bt);return}if(ne.current||bt.target!==bt.currentTarget){ne.current=!1;return}v==null||v()},vn=bt=>{m?g==null||g(bt):(bt.preventDefault(),h==="static"&&ft())},er=(bt,ri)=>{bt&&Ye(bt),B==null||B(bt,ri)},Vs=bt=>{he.current==null||he.current(),T==null||T(bt)},Pi=(bt,ri)=>{O==null||O(bt,ri),oN(window,"resize",He)},Sr=bt=>{bt&&(bt.style.display=""),D==null||D(bt),AT(window,"resize",He)},ia=M.useCallback(bt=>w.jsx("div",{...bt,className:Ne(`${e}-backdrop`,W,!d&&"show")}),[d,W,e]),eo={...n,...Z};eo.display="block";const Cr=bt=>w.jsx("div",{role:"dialog",...bt,style:eo,className:Ne(t,e,H&&`${e}-static`,!d&&"show"),onClick:h?Vt:void 0,onMouseUp:Tt,"aria-label":u,"aria-labelledby":s,"aria-describedby":l,children:w.jsx(a,{...U,onMouseDown:de,className:i,contentClassName:r,children:o})});return w.jsx(kN.Provider,{value:Et,children:w.jsx(KU,{show:c,ref:we,backdrop:h,container:_,keyboard:!0,autoFocus:b,enforceFocus:S,restoreFocus:k,restoreFocusOptions:R,onEscapeKeyDown:vn,onShow:y,onHide:v,onEnter:er,onEntering:Pi,onEntered:F,onExit:Vs,onExiting:P,onExited:Sr,manager:ke(),transition:d?Qce:void 0,backdropTransition:d?efe:void 0,renderBackdrop:ia,renderDialog:Cr})})});sW.displayName="Modal";const Rl=Object.assign(sW,{Body:qce,Header:Xce,Title:Jce,Footer:Yce,Dialog:nW,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var A3={exports:{}},LT={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){function r(a,s,l,u,c,d){var h=u||"<<anonymous>>",m=d||l;if(s[l]==null)return a?new Error("Required "+c+" `"+m+"` was not specified "+("in `"+h+"`.")):null;for(var g=arguments.length,y=Array(g>6?g-6:0),v=6;v<g;v++)y[v-6]=arguments[v];return i.apply(void 0,[s,l,h,c,m].concat(y))}var o=r.bind(null,!1);return o.isRequired=r.bind(null,!0),o}e.exports=t.default})(LT,LT.exports);var tfe=LT.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=tfe,i=r(n);function r(a){return a&&a.__esModule?a:{default:a}}function o(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];function u(){for(var c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=null;return s.forEach(function(g){if(m==null){var y=g.apply(void 0,d);y!=null&&(m=y)}}),m}return(0,i.default)(u)}e.exports=t.default})(A3,A3.exports);const lW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"nav-item"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));lW.displayName="NavItem";const uW=lW,cW=M.forwardRef(({bsPrefix:e,className:t,as:n=hb,active:i,eventKey:r,disabled:o=!1,...a},s)=>{e=De(e,"nav-link");const[l,u]=qU({key:rd(r,a.href),active:i,disabled:o,...a});return w.jsx(n,{...a,...l,ref:s,disabled:o,className:Ne(t,e,o&&"disabled",u.isActive&&"active")})});cW.displayName="NavLink";const RN=cW,fW=M.forwardRef((e,t)=>{const{as:n="div",bsPrefix:i,variant:r,fill:o=!1,justify:a=!1,navbar:s,navbarScroll:l,className:u,activeKey:c,...d}=ym(e,{activeKey:"onSelect"}),h=De(i,"nav");let m,g,y=!1;const v=M.useContext(Pd),_=M.useContext(AH);return v?(m=v.bsPrefix,y=s??!0):_&&({cardHeaderBsPrefix:g}=_),w.jsx(Oce,{as:n,ref:t,activeKey:c,className:Ne(u,{[h]:!y,[`${m}-nav`]:y,[`${m}-nav-scroll`]:y&&l,[`${g}-${r}`]:!!g,[`${h}-${r}`]:!!r,[`${h}-fill`]:o,[`${h}-justified`]:a}),...d})});fW.displayName="Nav";const yf=Object.assign(fW,{Item:uW,Link:RN}),dW=M.forwardRef(({bsPrefix:e,className:t,as:n,...i},r)=>{e=De(e,"navbar-brand");const o=n||(i.href?"a":"span");return w.jsx(o,{...i,ref:r,className:Ne(t,e)})});dW.displayName="NavbarBrand";const nfe=dW,hW=M.forwardRef(({children:e,bsPrefix:t,...n},i)=>{t=De(t,"navbar-collapse");const r=M.useContext(Pd);return w.jsx(aH,{in:!!(r&&r.expanded),...n,children:w.jsx("div",{ref:i,className:t,children:e})})});hW.displayName="NavbarCollapse";const ife=hW,pW=M.forwardRef(({bsPrefix:e,className:t,children:n,label:i="Toggle navigation",as:r="button",onClick:o,...a},s)=>{e=De(e,"navbar-toggler");const{onToggle:l,expanded:u}=M.useContext(Pd)||{},c=cn(d=>{o&&o(d),l&&l()});return r==="button"&&(a.type="button"),w.jsx(r,{...a,ref:s,onClick:c,"aria-label":i,className:Ne(t,e,!u&&"collapsed"),children:n||w.jsx("span",{className:`${e}-icon`})})});pW.displayName="NavbarToggle";const rfe=pW,DT=new WeakMap,F3=(e,t)=>{if(!e||!t)return;const n=DT.get(t)||new Map;DT.set(t,n);let i=n.get(e);return i||(i=t.matchMedia(e),i.refCount=0,n.set(i.media,i)),i};function ofe(e,t=typeof window>"u"?void 0:window){const n=F3(e,t),[i,r]=M.useState(()=>n?n.matches:!1);return ky(()=>{let o=F3(e,t);if(!o)return r(!1);let a=DT.get(t);const s=()=>{r(o.matches)};return o.refCount++,o.addListener(s),s(),()=>{o.removeListener(s),o.refCount--,o.refCount<=0&&(a==null||a.delete(o.media)),o=void 0}},[e]),i}function afe(e){const t=Object.keys(e);function n(s,l){return s===l?l:s?`${s} and ${l}`:l}function i(s){return t[Math.min(t.indexOf(s)+1,t.length-1)]}function r(s){const l=i(s);let u=e[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function o(s){let l=e[s];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function a(s,l,u){let c;typeof s=="object"?(c=s,u=l,l=!0):(l=l||!0,c={[s]:l});let d=M.useMemo(()=>Object.entries(c).reduce((h,[m,g])=>((g==="up"||g===!0)&&(h=n(h,o(m))),(g==="down"||g===!0)&&(h=n(h,r(m))),h),""),[JSON.stringify(c)]);return ofe(d,u)}return a}const sfe=afe({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),mW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"offcanvas-body"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));mW.displayName="OffcanvasBody";const lfe=mW,ufe={[va]:"show",[hl]:"show"},gW=M.forwardRef(({bsPrefix:e,className:t,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:o=!1,appear:a=!1,...s},l)=>(e=De(e,"offcanvas"),w.jsx(F2,{ref:l,addEndListener:A2,in:i,mountOnEnter:r,unmountOnExit:o,appear:a,...s,childRef:n.ref,children:(u,c)=>M.cloneElement(n,{...c,className:Ne(t,n.props.className,(u===va||u===Ey)&&`${e}-toggling`,ufe[u])})})));gW.displayName="OffcanvasToggling";const cfe=gW,yW=M.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(e=De(e,"offcanvas-header"),w.jsx(rW,{ref:o,...r,className:Ne(t,e),closeLabel:n,closeButton:i})));yW.displayName="OffcanvasHeader";const ffe=yW,dfe=N2("h5"),vW=M.forwardRef(({className:e,bsPrefix:t,as:n=dfe,...i},r)=>(t=De(t,"offcanvas-title"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));vW.displayName="OffcanvasTitle";const hfe=vW;function pfe(e){return w.jsx(cfe,{...e})}function mfe(e){return w.jsx(nd,{...e})}const xW=M.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":i,placement:r="start",responsive:o,show:a=!1,backdrop:s=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:d,onHide:h,container:m,autoFocus:g=!0,enforceFocus:y=!0,restoreFocus:v=!0,restoreFocusOptions:_,onEntered:b,onExit:S,onExiting:k,onEnter:R,onEntering:F,onExited:T,backdropClassName:P,manager:B,renderStaticNode:O=!1,...D},W)=>{const j=M.useRef();e=De(e,"offcanvas");const{onToggle:U}=M.useContext(Pd)||{},[G,Z]=M.useState(!1),J=sfe(o||"xs","up");M.useEffect(()=>{Z(o?a&&!J:a)},[a,o,J]);const H=cn(()=>{U==null||U(),h==null||h()}),Q=M.useMemo(()=>({onHide:H}),[H]);function K(){return B||(u?(j.current||(j.current=new JU({handleContainerOverflow:!1})),j.current):QU())}const ne=(we,...Ae)=>{we&&(we.style.visibility="visible"),R==null||R(we,...Ae)},he=(we,...Ae)=>{we&&(we.style.visibility=""),T==null||T(...Ae)},$e=M.useCallback(we=>w.jsx("div",{...we,className:Ne(`${e}-backdrop`,P)}),[P,e]),Ee=we=>w.jsx("div",{...we,...D,className:Ne(t,o?`${e}-${o}`:e,`${e}-${r}`),"aria-labelledby":i,children:n});return w.jsxs(w.Fragment,{children:[!G&&(o||O)&&Ee({}),w.jsx(kN.Provider,{value:Q,children:w.jsx(KU,{show:G,ref:W,backdrop:s,container:m,keyboard:l,autoFocus:g,enforceFocus:y&&!u,restoreFocus:v,restoreFocusOptions:_,onEscapeKeyDown:c,onShow:d,onHide:H,onEnter:ne,onEntering:F,onEntered:b,onExit:S,onExiting:k,onExited:he,manager:K(),transition:pfe,backdropTransition:mfe,renderBackdrop:$e,renderDialog:Ee})})]})});xW.displayName="Offcanvas";const gfe=Object.assign(xW,{Body:lfe,Header:ffe,Title:hfe}),_W=M.forwardRef((e,t)=>{const n=M.useContext(Pd);return w.jsx(gfe,{ref:t,show:!!(n!=null&&n.expanded),...e,renderStaticNode:!0})});_W.displayName="NavbarOffcanvas";const yfe=_W,bW=M.forwardRef(({className:e,bsPrefix:t,as:n="span",...i},r)=>(t=De(t,"navbar-text"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));bW.displayName="NavbarText";const vfe=bW,wW=M.forwardRef((e,t)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:o,fixed:a,sticky:s,className:l,as:u="nav",expanded:c,onToggle:d,onSelect:h,collapseOnSelect:m=!1,...g}=ym(e,{expanded:"onToggle"}),y=De(n,"navbar"),v=M.useCallback((...S)=>{h==null||h(...S),m&&c&&(d==null||d(!1))},[h,m,c,d]);g.role===void 0&&u!=="nav"&&(g.role="navigation");let _=`${y}-expand`;typeof i=="string"&&(_=`${_}-${i}`);const b=M.useMemo(()=>({onToggle:()=>d==null?void 0:d(!c),bsPrefix:y,expanded:!!c,expand:i}),[y,c,i,d]);return w.jsx(Pd.Provider,{value:b,children:w.jsx(Cs.Provider,{value:v,children:w.jsx(u,{ref:t,...g,className:Ne(l,y,i&&_,r&&`${y}-${r}`,o&&`bg-${o}`,s&&`sticky-${s}`,a&&`fixed-${a}`)})})})});wW.displayName="Navbar";const fx=Object.assign(wW,{Brand:nfe,Collapse:ife,Offcanvas:yfe,Text:vfe,Toggle:rfe}),SW=M.forwardRef(({id:e,title:t,children:n,bsPrefix:i,className:r,rootCloseEvent:o,menuRole:a,disabled:s,active:l,renderMenuOnMount:u,menuVariant:c,...d},h)=>{const m=De(void 0,"nav-item");return w.jsxs(Mf,{ref:h,...d,className:Ne(r,m),children:[w.jsx(Mf.Toggle,{id:e,eventKey:null,active:l,disabled:s,childBsPrefix:i,as:RN,children:t}),w.jsx(Mf.Menu,{role:a,renderOnMount:u,rootCloseEvent:o,variant:c,children:n})]})});SW.displayName="NavDropdown";const JE=Object.assign(SW,{Item:Mf.Item,ItemText:Mf.ItemText,Divider:Mf.Divider,Header:Mf.Header}),xfe=()=>{};function _fe(e,t,{disabled:n,clickTrigger:i}={}){const r=t||xfe;rU(e,r,{disabled:n,clickTrigger:i});const o=cn(a=>{ZU(a)&&r(a)});M.useEffect(()=>{if(n||e==null)return;const a=vm(h_(e));let s=(a.defaultView||window).event;const l=vl(a,"keyup",u=>{if(u===s){s=void 0;return}o(u)});return()=>{l()}},[e,n,o])}const CW=M.forwardRef((e,t)=>{const{flip:n,offset:i,placement:r,containerPadding:o,popperConfig:a={},transition:s,runTransition:l}=e,[u,c]=db(),[d,h]=db(),m=$s(c,t),g=$T(e.container),y=$T(e.target),[v,_]=M.useState(!e.show),b=iU(y,u,oU({placement:r,enableEvents:!!e.show,containerPadding:o||5,flip:n,offset:i,arrowElement:d,popperConfig:a}));e.show&&v&&_(!1);const S=(...D)=>{_(!0),e.onExited&&e.onExited(...D)},k=e.show||!v;if(_fe(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!k)return null;const{onExit:R,onExiting:F,onEnter:T,onEntering:P,onEntered:B}=e;let O=e.children(Object.assign({},b.attributes.popper,{style:b.styles.popper,ref:m}),{popper:b,placement:r,show:!!e.show,arrowProps:Object.assign({},b.attributes.arrow,{style:b.styles.arrow,ref:h})});return O=OT(s,l,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:O,onExit:R,onExiting:F,onExited:S,onEnter:T,onEntering:P,onEntered:B}),g?Ff.createPortal(O,g):null});CW.displayName="Overlay";const bfe=CW,EW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"popover-header"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));EW.displayName="PopoverHeader";const wfe=EW,kW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"popover-body"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));kW.displayName="PopoverBody";const RW=kW;function TW(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function AW(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Sfe=M.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:i,children:r,body:o,arrowProps:a,hasDoneInitialMeasure:s,popper:l,show:u,...c},d)=>{const h=De(e,"popover"),m=gv(),[g]=(t==null?void 0:t.split("-"))||[],y=TW(g,m);let v=i;return u&&!s&&(v={...i,...AW(l==null?void 0:l.strategy)}),w.jsxs("div",{ref:d,role:"tooltip",style:v,"x-placement":g,className:Ne(n,h,g&&`bs-popover-${y}`),...c,children:[w.jsx("div",{className:"popover-arrow",...a}),o?w.jsx(RW,{children:r}):r]})}),fp=Object.assign(Sfe,{Header:wfe,Body:RW,POPPER_OFFSET:[0,8]}),FW=M.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:i,children:r,arrowProps:o,hasDoneInitialMeasure:a,popper:s,show:l,...u},c)=>{e=De(e,"tooltip");const d=gv(),[h]=(t==null?void 0:t.split("-"))||[],m=TW(h,d);let g=i;return l&&!a&&(g={...i,...AW(s==null?void 0:s.strategy)}),w.jsxs("div",{ref:c,style:g,role:"tooltip","x-placement":h,className:Ne(n,e,`bs-tooltip-${m}`),...u,children:[w.jsx("div",{className:"tooltip-arrow",...o}),w.jsx("div",{className:`${e}-inner`,children:r})]})});FW.displayName="Tooltip";const Cfe=Object.assign(FW,{TOOLTIP_OFFSET:[0,6]});function Efe(e){const t=M.useRef(null),n=De(void 0,"popover"),i=De(void 0,"tooltip"),r=M.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(IT(t.current,n))return fp.POPPER_OFFSET;if(IT(t.current,i))return Cfe.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,i]);return[t,[r]]}function kfe(e,t){const{ref:n}=e,{ref:i}=t;e.ref=n.__wrapped||(n.__wrapped=r=>n(fb(r))),t.ref=i.__wrapped||(i.__wrapped=r=>i(fb(r)))}const MW=M.forwardRef(({children:e,transition:t=nd,popperConfig:n={},rootClose:i=!1,placement:r="top",show:o=!1,...a},s)=>{const l=M.useRef({}),[u,c]=M.useState(null),[d,h]=Efe(a.offset),m=$s(s,d),g=t===!0?nd:t||void 0,y=cn(v=>{c(v),n==null||n.onFirstUpdate==null||n.onFirstUpdate(v)});return ky(()=>{u&&a.target&&(l.current.scheduleUpdate==null||l.current.scheduleUpdate())},[u,a.target]),M.useEffect(()=>{o||c(null)},[o]),w.jsx(bfe,{...a,ref:m,popperConfig:{...n,modifiers:h.concat(n.modifiers||[]),onFirstUpdate:y},transition:g,rootClose:i,placement:r,show:o,children:(v,{arrowProps:_,popper:b,show:S})=>{var k,R;kfe(v,_);const F=b==null?void 0:b.placement,T=Object.assign(l.current,{state:b==null?void 0:b.state,scheduleUpdate:b==null?void 0:b.update,placement:F,outOfBoundaries:(b==null||(k=b.state)==null||(R=k.modifiersData.hide)==null?void 0:R.isReferenceHidden)||!1,strategy:n.strategy}),P=!!u;return typeof e=="function"?e({...v,placement:F,show:S,...!t&&S&&{className:"show"},popper:T,arrowProps:_,hasDoneInitialMeasure:P}):M.cloneElement(e,{...v,placement:F,arrowProps:_,popper:T,hasDoneInitialMeasure:P,className:Ne(e.props.className,!t&&S&&"show"),style:{...e.props.style,...v.style}})}})});MW.displayName="Overlay";const Rfe=MW;function Tfe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function M3(e,t,n){const[i]=t,r=i.currentTarget,o=i.relatedTarget||i.nativeEvent[n];(!o||o!==r)&&!Ay(r,o)&&e(...t)}bn.oneOf(["click","hover","focus"]);const Afe=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:i={},show:r,defaultShow:o=!1,onToggle:a,delay:s,placement:l,flip:u=l&&l.indexOf("auto")!==-1,...c})=>{const d=M.useRef(null),h=$s(d,n.ref),m=zH(),g=M.useRef(""),[y,v]=J7(r,o,a),_=Tfe(s),{onFocus:b,onBlur:S,onClick:k}=typeof n!="function"?M.Children.only(n).props:{},R=G=>{h(fb(G))},F=M.useCallback(()=>{if(m.clear(),g.current="show",!_.show){v(!0);return}m.set(()=>{g.current==="show"&&v(!0)},_.show)},[_.show,v,m]),T=M.useCallback(()=>{if(m.clear(),g.current="hide",!_.hide){v(!1);return}m.set(()=>{g.current==="hide"&&v(!1)},_.hide)},[_.hide,v,m]),P=M.useCallback((...G)=>{F(),b==null||b(...G)},[F,b]),B=M.useCallback((...G)=>{T(),S==null||S(...G)},[T,S]),O=M.useCallback((...G)=>{v(!y),k==null||k(...G)},[k,v,y]),D=M.useCallback((...G)=>{M3(F,G,"fromElement")},[F]),W=M.useCallback((...G)=>{M3(T,G,"toElement")},[T]),j=e==null?[]:[].concat(e),U={ref:R};return j.indexOf("click")!==-1&&(U.onClick=O),j.indexOf("focus")!==-1&&(U.onFocus=P,U.onBlur=B),j.indexOf("hover")!==-1&&(U.onMouseOver=D,U.onMouseOut=W),w.jsxs(w.Fragment,{children:[typeof n=="function"?n(U):M.cloneElement(n,U),w.jsx(Rfe,{...c,show:y,onHide:T,flip:u,placement:l,popperConfig:i,target:d.current,children:t})]})},NW=Afe,PW=M.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=De(e,"row"),a=Q7(),s=eH(),l=`${o}-cols`,u=[];return a.forEach(c=>{const d=i[c];delete i[c];let h;d!=null&&typeof d=="object"?{cols:h}=d:h=d;const m=c!==s?`-${c}`:"";h!=null&&u.push(`${l}${m}-${h}`)}),w.jsx(n,{ref:r,...i,className:Ne(t,o,...u)})});PW.displayName="Row";const Ffe=PW,Mfe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Nfe=["activeKey","getControlledId","getControllerId"],Pfe=["as"];function zT(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function $W(e){let{active:t,eventKey:n,mountOnEnter:i,transition:r,unmountOnExit:o,role:a="tabpanel",onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}=e,m=zT(e,Mfe);const g=M.useContext(bm);if(!g)return[Object.assign({},m,{role:a}),{eventKey:n,isActive:t,mountOnEnter:i,transition:r,unmountOnExit:o,onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}];const{activeKey:y,getControlledId:v,getControllerId:_}=g,b=zT(g,Nfe),S=rd(n);return[Object.assign({},m,{role:a,id:v(n),"aria-labelledby":_(n)}),{eventKey:n,isActive:t==null&&S!=null?rd(y)===S:t,transition:r||b.transition,mountOnEnter:i??b.mountOnEnter,unmountOnExit:o??b.unmountOnExit,onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}]}const OW=M.forwardRef((e,t)=>{let{as:n="div"}=e,i=zT(e,Pfe);const[r,{isActive:o,onEnter:a,onEntering:s,onEntered:l,onExit:u,onExiting:c,onExited:d,mountOnEnter:h,unmountOnExit:m,transition:g=EN}]=$W(i);return w.jsx(bm.Provider,{value:null,children:w.jsx(Cs.Provider,{value:null,children:w.jsx(g,{in:o,onEnter:a,onEntering:s,onEntered:l,onExit:u,onExiting:c,onExited:d,mountOnEnter:h,unmountOnExit:m,children:w.jsx(n,Object.assign({},r,{ref:t,hidden:!o,"aria-hidden":!o}))})})})});OW.displayName="TabPanel";const IW=e=>{const{id:t,generateChildId:n,onSelect:i,activeKey:r,defaultActiveKey:o,transition:a,mountOnEnter:s,unmountOnExit:l,children:u}=e,[c,d]=qH(r,o,i),h=lU(t),m=M.useMemo(()=>n||((y,v)=>h?`${h}-${v}-${y}`:null),[h,n]),g=M.useMemo(()=>({onSelect:d,activeKey:c,transition:a,mountOnEnter:s||!1,unmountOnExit:l||!1,getControlledId:y=>m(y,"tabpane"),getControllerId:y=>m(y,"tab")}),[d,c,a,s,l,m]);return w.jsx(bm.Provider,{value:g,children:w.jsx(Cs.Provider,{value:d||null,children:u})})};IW.Panel=OW;const LW=IW;function TN(e){return typeof e=="boolean"?e?nd:EN:e}const DW=({transition:e,...t})=>w.jsx(LW,{...t,transition:TN(e)});DW.displayName="TabContainer";const $fe=DW,zW=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=De(t,"tab-content"),w.jsx(n,{ref:r,className:Ne(e,t),...i})));zW.displayName="TabContent";const jW=zW,BW=M.forwardRef(({bsPrefix:e,transition:t,...n},i)=>{const[{className:r,as:o="div",...a},{isActive:s,onEnter:l,onEntering:u,onEntered:c,onExit:d,onExiting:h,onExited:m,mountOnEnter:g,unmountOnExit:y,transition:v=nd}]=$W({...n,transition:TN(t)}),_=De(e,"tab-pane");return w.jsx(bm.Provider,{value:null,children:w.jsx(Cs.Provider,{value:null,children:w.jsx(v,{in:s,onEnter:l,onEntering:u,onEntered:c,onExit:d,onExiting:h,onExited:m,mountOnEnter:g,unmountOnExit:y,children:w.jsx(o,{...a,ref:i,className:Ne(r,_,s&&"active")})})})})});BW.displayName="TabPane";const HW=BW,Ofe={eventKey:bn.oneOfType([bn.string,bn.number]),title:bn.node.isRequired,disabled:bn.bool,tabClassName:bn.string,tabAttrs:bn.object},UW=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};UW.propTypes=Ofe;const p_=Object.assign(UW,{Container:$fe,Content:jW,Pane:HW}),Ife=M.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:i,borderless:r,hover:o,size:a,variant:s,responsive:l,...u},c)=>{const d=De(e,"table"),h=Ne(t,d,s&&`${d}-${s}`,a&&`${d}-${a}`,n&&`${d}-${typeof n=="string"?`striped-${n}`:"striped"}`,i&&`${d}-bordered`,r&&`${d}-borderless`,o&&`${d}-hover`),m=w.jsx("table",{...u,className:h,ref:c});if(l){let g=`${d}-responsive`;return typeof l=="string"&&(g=`${g}-${l}`),w.jsx("div",{className:g,children:m})}return m}),Kh=Ife;function Lfe(e){let t;return HH(e,n=>{t==null&&(t=n.props.eventKey)}),t}function Dfe(e){const{title:t,eventKey:n,disabled:i,tabClassName:r,tabAttrs:o,id:a}=e.props;return t==null?null:w.jsx(uW,{as:"li",role:"presentation",children:w.jsx(RN,{as:"button",type:"button",eventKey:n,disabled:i,id:a,className:r,...o,children:t})})}const WW=e=>{const{id:t,onSelect:n,transition:i,mountOnEnter:r=!1,unmountOnExit:o=!1,variant:a="tabs",children:s,activeKey:l=Lfe(s),...u}=ym(e,{activeKey:"onSelect"});return w.jsxs(LW,{id:t,activeKey:l,onSelect:n,transition:TN(i),mountOnEnter:r,unmountOnExit:o,children:[w.jsx(yf,{...u,role:"tablist",as:"ul",variant:a,children:mb(s,Dfe)}),w.jsx(jW,{children:mb(s,c=>{const d={...c.props};return delete d.title,delete d.disabled,delete d.tabClassName,delete d.tabAttrs,w.jsx(HW,{...d})})})]})};WW.displayName="Tabs";const GW=WW;var qW={exports:{}},jT={exports:{}};(function(e,t){(function(n,i){i(t,M)})(k8,function(n,i){function r(C,N,$,z,V,q,X){try{var re=C[q](X),oe=re.value}catch(ue){return void $(ue)}re.done?N(oe):Promise.resolve(oe).then(z,V)}function o(C){return function(){var N=this,$=arguments;return new Promise(function(z,V){var q=C.apply(N,$);function X(oe){r(q,z,V,X,re,"next",oe)}function re(oe){r(q,z,V,X,re,"throw",oe)}X(void 0)})}}function a(){return(a=Object.assign||function(C){for(var N=1;N<arguments.length;N++){var $=arguments[N];for(var z in $)Object.prototype.hasOwnProperty.call($,z)&&(C[z]=$[z])}return C}).apply(this,arguments)}function s(C,N){if(C==null)return{};var $,z,V={},q=Object.keys(C);for(z=0;z<q.length;z++)$=q[z],N.indexOf($)>=0||(V[$]=C[$]);return V}function l(C){var N=function($,z){if(typeof $!="object"||$===null)return $;var V=$[Symbol.toPrimitive];if(V!==void 0){var q=V.call($,z||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)($)}(C,"string");return typeof N=="symbol"?N:String(N)}i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var u={init:"init"},c=function(C){var N=C.value;return N===void 0?"":N},d=function(){return i.createElement(i.Fragment,null,"")},h={Cell:c,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function m(){for(var C=arguments.length,N=new Array(C),$=0;$<C;$++)N[$]=arguments[$];return N.reduce(function(z,V){var q=V.style,X=V.className;return z=a({},z,{},s(V,["style","className"])),q&&(z.style=z.style?a({},z.style||{},{},q||{}):q),X&&(z.className=z.className?z.className+" "+X:X),z.className===""&&delete z.className,z},{})}var g=function(C,N){return N===void 0&&(N={}),function($){return $===void 0&&($={}),[].concat(C,[$]).reduce(function(z,V){return function q(X,re,oe){return typeof re=="function"?q({},re(X,oe)):Array.isArray(re)?m.apply(void 0,[X].concat(re)):m(X,re)}(z,V,a({},N,{userProps:$}))},{})}},y=function(C,N,$,z){return $===void 0&&($={}),C.reduce(function(V,q){return q(V,$)},N)},v=function(C,N,$){return $===void 0&&($={}),C.forEach(function(z){z(N,$)})};function _(C,N,$,z){C.findIndex(function(V){return V.pluginName===$}),N.forEach(function(V){C.findIndex(function(q){return q.pluginName===V})})}function b(C,N){return typeof C=="function"?C(N):C}function S(C){var N=i.useRef();return N.current=C,i.useCallback(function(){return N.current},[])}var k=typeof document<"u"?i.useLayoutEffect:i.useEffect;function R(C,N){var $=i.useRef(!1);k(function(){$.current&&C(),$.current=!0},N)}function F(C,N,$){return $===void 0&&($={}),function(z,V){V===void 0&&(V={});var q=typeof z=="string"?N[z]:z;if(q===void 0)throw console.info(N),new Error("Renderer Error ");return T(q,a({},C,{column:N},$,{},V))}}function T(C,N){return function(z){return typeof z=="function"&&(V=Object.getPrototypeOf(z)).prototype&&V.prototype.isReactComponent;var V}($=C)||typeof $=="function"||function(z){return typeof z=="object"&&typeof z.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(z.$$typeof.description)}($)?i.createElement(C,N):C;var $}function P(C,N,$){return $===void 0&&($=0),C.map(function(z){return O(z=a({},z,{parent:N,depth:$})),z.columns&&(z.columns=P(z.columns,z,$+1)),z})}function B(C){return Z(C,"columns")}function O(C){var N=C.id,$=C.accessor,z=C.Header;if(typeof $=="string"){N=N||$;var V=$.split(".");$=function(q){return function(X,re,oe){if(!re)return X;var ue,Re=typeof re=="function"?re:JSON.stringify(re),ge=j.get(Re)||function(){var Se=function(ce){return function Ce(Pe,Me){if(Me===void 0&&(Me=[]),Array.isArray(Pe))for(var Ge=0;Ge<Pe.length;Ge+=1)Ce(Pe[Ge],Me);else Me.push(Pe);return Me}(ce).map(function(Ce){return String(Ce).replace(".","_")}).join(".").replace(he,".").replace($e,"").split(".")}(re);return j.set(Re,Se),Se}();try{ue=ge.reduce(function(Se,ce){return Se[ce]},X)}catch{}return ue!==void 0?ue:oe}(q,V)}}if(!N&&typeof z=="string"&&z&&(N=z),!N&&C.columns)throw console.error(C),new Error('A column ID (or unique "Header" value) is required!');if(!N)throw console.error(C),new Error("A column ID (or string accessor) is required!");return Object.assign(C,{id:N,accessor:$}),C}function D(C,N){if(!N)throw new Error;return Object.assign(C,a({Header:d,Footer:d},h,{},N,{},C)),Object.assign(C,{originalWidth:C.width}),C}function W(C,N,$){$===void 0&&($=function(){return{}});for(var z=[],V=C,q=0,X=function(){return q++},re=function(){var oe={headers:[]},ue=[],Re=V.some(function(ge){return ge.parent});V.forEach(function(ge){var Se,ce=[].concat(ue).reverse()[0];Re&&(ge.parent?Se=a({},ge.parent,{originalId:ge.parent.id,id:ge.parent.id+"_"+X(),headers:[ge]},$(ge)):Se=D(a({originalId:ge.id+"_placeholder",id:ge.id+"_placeholder_"+X(),placeholderOf:ge,headers:[ge]},$(ge)),N),ce&&ce.originalId===Se.originalId?ce.headers.push(ge):ue.push(Se)),oe.headers.push(ge)}),z.push(oe),V=ue};V.length;)re();return z.reverse()}var j=new Map;function U(){for(var C=arguments.length,N=new Array(C),$=0;$<C;$++)N[$]=arguments[$];for(var z=0;z<N.length;z+=1)if(N[z]!==void 0)return N[z]}function G(C){if(typeof C=="function")return C}function Z(C,N){var $=[];return function z(V){V.forEach(function(q){q[N]?z(q[N]):$.push(q)})}(C),$}function J(C,N){var $=N.manualExpandedKey,z=N.expanded,V=N.expandSubRows,q=V===void 0||V,X=[];return C.forEach(function(re){return function oe(ue,Re){Re===void 0&&(Re=!0),ue.isExpanded=ue.original&&ue.original[$]||z[ue.id],ue.canExpand=ue.subRows&&!!ue.subRows.length,Re&&X.push(ue),ue.subRows&&ue.subRows.length&&ue.isExpanded&&ue.subRows.forEach(function(ge){return oe(ge,q)})}(re)}),X}function H(C,N,$){return G(C)||N[C]||$[C]||$.text}function Q(C,N,$){return C?C(N,$):N===void 0}function K(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var ne=null,he=/\[/g,$e=/\]/g,Ee=function(C){return a({role:"table"},C)},we=function(C){return a({role:"rowgroup"},C)},Ae=function(C,N){var $=N.column;return a({key:"header_"+$.id,colSpan:$.totalVisibleHeaderCount,role:"columnheader"},C)},It=function(C,N){var $=N.column;return a({key:"footer_"+$.id,colSpan:$.totalVisibleHeaderCount},C)},Et=function(C,N){return a({key:"headerGroup_"+N.index,role:"row"},C)},ke=function(C,N){return a({key:"footerGroup_"+N.index},C)},Ye=function(C,N){return a({key:"row_"+N.row.id,role:"row"},C)},He=function(C,N){var $=N.cell;return a({key:"cell_"+$.row.id+"_"+$.column.id,role:"cell"},C)};function de(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[Ee],getTableBodyProps:[we],getHeaderGroupProps:[Et],getFooterGroupProps:[ke],getHeaderProps:[Ae],getFooterProps:[It],getRowProps:[Ye],getCellProps:[He],useFinalInstance:[]}}u.resetHiddenColumns="resetHiddenColumns",u.toggleHideColumn="toggleHideColumn",u.setHiddenColumns="setHiddenColumns",u.toggleHideAllColumns="toggleHideAllColumns";var Tt=function(C){C.getToggleHiddenProps=[ft],C.getToggleHideAllColumnsProps=[tt],C.stateReducers.push(Vt),C.useInstanceBeforeDimensions.push(vn),C.headerGroupsDeps.push(function(N,$){var z=$.instance;return[].concat(N,[z.state.hiddenColumns])}),C.useInstance.push(er)};Tt.pluginName="useColumnVisibility";var ft=function(C,N){var $=N.column;return[C,{onChange:function(z){$.toggleHidden(!z.target.checked)},style:{cursor:"pointer"},checked:$.isVisible,title:"Toggle Column Visible"}]},tt=function(C,N){var $=N.instance;return[C,{onChange:function(z){$.toggleHideAllColumns(!z.target.checked)},style:{cursor:"pointer"},checked:!$.allColumnsHidden&&!$.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!$.allColumnsHidden&&$.state.hiddenColumns.length}]};function Vt(C,N,$,z){if(N.type===u.init)return a({hiddenColumns:[]},C);if(N.type===u.resetHiddenColumns)return a({},C,{hiddenColumns:z.initialState.hiddenColumns||[]});if(N.type===u.toggleHideColumn){var V=(N.value!==void 0?N.value:!C.hiddenColumns.includes(N.columnId))?[].concat(C.hiddenColumns,[N.columnId]):C.hiddenColumns.filter(function(q){return q!==N.columnId});return a({},C,{hiddenColumns:V})}return N.type===u.setHiddenColumns?a({},C,{hiddenColumns:b(N.value,C.hiddenColumns)}):N.type===u.toggleHideAllColumns?a({},C,{hiddenColumns:(N.value!==void 0?N.value:!C.hiddenColumns.length)?z.allColumns.map(function(q){return q.id}):[]}):void 0}function vn(C){var N=C.headers,$=C.state.hiddenColumns;i.useRef(!1).current;var z=0;N.forEach(function(V){return z+=function q(X,re){X.isVisible=re&&!$.includes(X.id);var oe=0;return X.headers&&X.headers.length?X.headers.forEach(function(ue){return oe+=q(ue,X.isVisible)}):oe=X.isVisible?1:0,X.totalVisibleHeaderCount=oe,oe}(V,!0)})}function er(C){var N=C.columns,$=C.flatHeaders,z=C.dispatch,V=C.allColumns,q=C.getHooks,X=C.state.hiddenColumns,re=C.autoResetHiddenColumns,oe=re===void 0||re,ue=S(C),Re=V.length===X.length,ge=i.useCallback(function(Me,Ge){return z({type:u.toggleHideColumn,columnId:Me,value:Ge})},[z]),Se=i.useCallback(function(Me){return z({type:u.setHiddenColumns,value:Me})},[z]),ce=i.useCallback(function(Me){return z({type:u.toggleHideAllColumns,value:Me})},[z]),Ce=g(q().getToggleHideAllColumnsProps,{instance:ue()});$.forEach(function(Me){Me.toggleHidden=function(Ge){z({type:u.toggleHideColumn,columnId:Me.id,value:Ge})},Me.getToggleHiddenProps=g(q().getToggleHiddenProps,{instance:ue(),column:Me})});var Pe=S(oe);R(function(){Pe()&&z({type:u.resetHiddenColumns})},[z,N]),Object.assign(C,{allColumnsHidden:Re,toggleHideColumn:ge,setHiddenColumns:Se,toggleHideAllColumns:ce,getToggleHideAllColumnsProps:Ce})}var Vs={},Pi={},Sr=function(C,N,$){return C},ia=function(C,N){return C.subRows||[]},eo=function(C,N,$){return""+($?[$.id,N].join("."):N)},Cr=function(C){return C};function bt(C){var N=C.initialState,$=N===void 0?Vs:N,z=C.defaultColumn,V=z===void 0?Pi:z,q=C.getSubRows,X=q===void 0?ia:q,re=C.getRowId,oe=re===void 0?eo:re,ue=C.stateReducer,Re=ue===void 0?Sr:ue,ge=C.useControlledState,Se=ge===void 0?Cr:ge;return a({},s(C,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:$,defaultColumn:V,getSubRows:X,getRowId:oe,stateReducer:Re,useControlledState:Se})}function ri(C,N){N===void 0&&(N=0);var $=0,z=0,V=0,q=0;return C.forEach(function(X){var re=X.headers;if(X.totalLeft=N,re&&re.length){var oe=ri(re,N),ue=oe[0],Re=oe[1],ge=oe[2],Se=oe[3];X.totalMinWidth=ue,X.totalWidth=Re,X.totalMaxWidth=ge,X.totalFlexWidth=Se}else X.totalMinWidth=X.minWidth,X.totalWidth=Math.min(Math.max(X.minWidth,X.width),X.maxWidth),X.totalMaxWidth=X.maxWidth,X.totalFlexWidth=X.canResize?X.totalWidth:0;X.isVisible&&(N+=X.totalWidth,$+=X.totalMinWidth,z+=X.totalWidth,V+=X.totalMaxWidth,q+=X.totalFlexWidth)}),[$,z,V,q]}function ko(C){var N=C.data,$=C.rows,z=C.flatRows,V=C.rowsById,q=C.column,X=C.getRowId,re=C.getSubRows,oe=C.accessValueHooks,ue=C.getInstance;N.forEach(function(Re,ge){return function Se(ce,Ce,Pe,Me,Ge){Pe===void 0&&(Pe=0);var pt=ce,Ue=X(ce,Ce,Me),Fe=V[Ue];if(Fe)Fe.subRows&&Fe.originalSubRows.forEach(function(je,at){return Se(je,at,Pe+1,Fe)});else if((Fe={id:Ue,original:pt,index:Ce,depth:Pe,cells:[{}]}).cells.map=K,Fe.cells.filter=K,Fe.cells.forEach=K,Fe.cells[0].getCellProps=K,Fe.values={},Ge.push(Fe),z.push(Fe),V[Ue]=Fe,Fe.originalSubRows=re(ce,Ce),Fe.originalSubRows){var lt=[];Fe.originalSubRows.forEach(function(je,at){return Se(je,at,Pe+1,Fe,lt)}),Fe.subRows=lt}q.accessor&&(Fe.values[q.id]=q.accessor(ce,Ce,Fe,Ge,N)),Fe.values[q.id]=y(oe,Fe.values[q.id],{row:Fe,column:q,instance:ue()})}(Re,ge,0,void 0,$)})}u.resetExpanded="resetExpanded",u.toggleRowExpanded="toggleRowExpanded",u.toggleAllRowsExpanded="toggleAllRowsExpanded";var Va=function(C){C.getToggleAllRowsExpandedProps=[eh],C.getToggleRowExpandedProps=[ru],C.stateReducers.push(Vc),C.useInstance.push(dt),C.prepareRow.push(Gt)};Va.pluginName="useExpanded";var eh=function(C,N){var $=N.instance;return[C,{onClick:function(z){$.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},ru=function(C,N){var $=N.row;return[C,{onClick:function(){$.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function Vc(C,N,$,z){if(N.type===u.init)return a({expanded:{}},C);if(N.type===u.resetExpanded)return a({},C,{expanded:z.initialState.expanded||{}});if(N.type===u.toggleAllRowsExpanded){var V=N.value,q=z.rowsById,X=Object.keys(q).length===Object.keys(C.expanded).length;if(V!==void 0?V:!X){var re={};return Object.keys(q).forEach(function(Ce){re[Ce]=!0}),a({},C,{expanded:re})}return a({},C,{expanded:{}})}if(N.type===u.toggleRowExpanded){var oe,ue=N.id,Re=N.value,ge=C.expanded[ue],Se=Re!==void 0?Re:!ge;if(!ge&&Se)return a({},C,{expanded:a({},C.expanded,(oe={},oe[ue]=!0,oe))});if(ge&&!Se){var ce=C.expanded;return ce[ue],a({},C,{expanded:s(ce,[ue].map(l))})}return C}}function dt(C){var N=C.data,$=C.rows,z=C.rowsById,V=C.manualExpandedKey,q=V===void 0?"expanded":V,X=C.paginateExpandedRows,re=X===void 0||X,oe=C.expandSubRows,ue=oe===void 0||oe,Re=C.autoResetExpanded,ge=Re===void 0||Re,Se=C.getHooks,ce=C.plugins,Ce=C.state.expanded,Pe=C.dispatch;_(ce,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var Me=S(ge),Ge=!!(Object.keys(z).length&&Object.keys(Ce).length);Ge&&Object.keys(z).some(function(wt){return!Ce[wt]})&&(Ge=!1),R(function(){Me()&&Pe({type:u.resetExpanded})},[Pe,N]);var pt=i.useCallback(function(wt,Xe){Pe({type:u.toggleRowExpanded,id:wt,value:Xe})},[Pe]),Ue=i.useCallback(function(wt){return Pe({type:u.toggleAllRowsExpanded,value:wt})},[Pe]),Fe=i.useMemo(function(){return re?J($,{manualExpandedKey:q,expanded:Ce,expandSubRows:ue}):$},[re,$,q,Ce,ue]),lt=i.useMemo(function(){return function(wt){var Xe=0;return Object.keys(wt).forEach(function(ot){var At=ot.split(".");Xe=Math.max(Xe,At.length)}),Xe}(Ce)},[Ce]),je=S(C),at=g(Se().getToggleAllRowsExpandedProps,{instance:je()});Object.assign(C,{preExpandedRows:$,expandedRows:Fe,rows:Fe,expandedDepth:lt,isAllRowsExpanded:Ge,toggleRowExpanded:pt,toggleAllRowsExpanded:Ue,getToggleAllRowsExpandedProps:at})}function Gt(C,N){var $=N.instance.getHooks,z=N.instance;C.toggleRowExpanded=function(V){return z.toggleRowExpanded(C.id,V)},C.getToggleRowExpandedProps=g($().getToggleRowExpandedProps,{instance:z,row:C})}var $i=function(C,N,$){return C=C.filter(function(z){return N.some(function(V){var q=z.values[V];return String(q).toLowerCase().includes(String($).toLowerCase())})})};$i.autoRemove=function(C){return!C};var ra=function(C,N,$){return C.filter(function(z){return N.some(function(V){var q=z.values[V];return q===void 0||String(q).toLowerCase()===String($).toLowerCase()})})};ra.autoRemove=function(C){return!C};var th=function(C,N,$){return C.filter(function(z){return N.some(function(V){var q=z.values[V];return q===void 0||String(q)===String($)})})};th.autoRemove=function(C){return!C};var ou=function(C,N,$){return C.filter(function(z){return N.some(function(V){return z.values[V].includes($)})})};ou.autoRemove=function(C){return!C||!C.length};var m1=function(C,N,$){return C.filter(function(z){return N.some(function(V){var q=z.values[V];return q&&q.length&&$.every(function(X){return q.includes(X)})})})};m1.autoRemove=function(C){return!C||!C.length};var g1=function(C,N,$){return C.filter(function(z){return N.some(function(V){var q=z.values[V];return q&&q.length&&$.some(function(X){return q.includes(X)})})})};g1.autoRemove=function(C){return!C||!C.length};var Ym=function(C,N,$){return C.filter(function(z){return N.some(function(V){var q=z.values[V];return $.includes(q)})})};Ym.autoRemove=function(C){return!C||!C.length};var Zm=function(C,N,$){return C.filter(function(z){return N.some(function(V){return z.values[V]===$})})};Zm.autoRemove=function(C){return C===void 0};var Xm=function(C,N,$){return C.filter(function(z){return N.some(function(V){return z.values[V]==$})})};Xm.autoRemove=function(C){return C==null};var y1=function(C,N,$){var z=$||[],V=z[0],q=z[1];if((V=typeof V=="number"?V:-1/0)>(q=typeof q=="number"?q:1/0)){var X=V;V=q,q=X}return C.filter(function(re){return N.some(function(oe){var ue=re.values[oe];return ue>=V&&ue<=q})})};y1.autoRemove=function(C){return!C||typeof C[0]!="number"&&typeof C[1]!="number"};var Yc=Object.freeze({__proto__:null,text:$i,exactText:ra,exactTextCase:th,includes:ou,includesAll:m1,includesSome:g1,includesValue:Ym,exact:Zm,equals:Xm,between:y1});u.resetFilters="resetFilters",u.setFilter="setFilter",u.setAllFilters="setAllFilters";var v1=function(C){C.stateReducers.push(JC),C.useInstance.push(QC)};function JC(C,N,$,z){if(N.type===u.init)return a({filters:[]},C);if(N.type===u.resetFilters)return a({},C,{filters:z.initialState.filters||[]});if(N.type===u.setFilter){var V=N.columnId,q=N.filterValue,X=z.allColumns,re=z.filterTypes,oe=X.find(function(Pe){return Pe.id===V});if(!oe)throw new Error("React-Table: Could not find a column with id: "+V);var ue=H(oe.filter,re||{},Yc),Re=C.filters.find(function(Pe){return Pe.id===V}),ge=b(q,Re&&Re.value);return Q(ue.autoRemove,ge,oe)?a({},C,{filters:C.filters.filter(function(Pe){return Pe.id!==V})}):a({},C,Re?{filters:C.filters.map(function(Pe){return Pe.id===V?{id:V,value:ge}:Pe})}:{filters:[].concat(C.filters,[{id:V,value:ge}])})}if(N.type===u.setAllFilters){var Se=N.filters,ce=z.allColumns,Ce=z.filterTypes;return a({},C,{filters:b(Se,C.filters).filter(function(Pe){var Me=ce.find(function(Ge){return Ge.id===Pe.id});return!Q(H(Me.filter,Ce||{},Yc).autoRemove,Pe.value,Me)})})}}function QC(C){var N=C.data,$=C.rows,z=C.flatRows,V=C.rowsById,q=C.allColumns,X=C.filterTypes,re=C.manualFilters,oe=C.defaultCanFilter,ue=oe!==void 0&&oe,Re=C.disableFilters,ge=C.state.filters,Se=C.dispatch,ce=C.autoResetFilters,Ce=ce===void 0||ce,Pe=i.useCallback(function(je,at){Se({type:u.setFilter,columnId:je,filterValue:at})},[Se]),Me=i.useCallback(function(je){Se({type:u.setAllFilters,filters:je})},[Se]);q.forEach(function(je){var at=je.id,wt=je.accessor,Xe=je.defaultCanFilter,ot=je.disableFilters;je.canFilter=wt?U(ot!==!0&&void 0,Re!==!0&&void 0,!0):U(Xe,ue,!1),je.setFilter=function(st){return Pe(je.id,st)};var At=ge.find(function(st){return st.id===at});je.filterValue=At&&At.value});var Ge=i.useMemo(function(){if(re||!ge.length)return[$,z,V];var je=[],at={};return[function wt(Xe,ot){ot===void 0&&(ot=0);var At=Xe;return(At=ge.reduce(function(st,St){var yt=St.id,Yt=St.value,We=q.find(function(hn){return hn.id===yt});if(!We)return st;ot===0&&(We.preFilteredRows=st);var ut=H(We.filter,X||{},Yc);return ut?(We.filteredRows=ut(st,[yt],Yt),We.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+We.id+"."),st)},Xe)).forEach(function(st){je.push(st),at[st.id]=st,st.subRows&&(st.subRows=st.subRows&&st.subRows.length>0?wt(st.subRows,ot+1):st.subRows)}),At}($),je,at]},[re,ge,$,z,V,q,X]),pt=Ge[0],Ue=Ge[1],Fe=Ge[2];i.useMemo(function(){q.filter(function(je){return!ge.find(function(at){return at.id===je.id})}).forEach(function(je){je.preFilteredRows=pt,je.filteredRows=pt})},[pt,ge,q]);var lt=S(Ce);R(function(){lt()&&Se({type:u.resetFilters})},[Se,re?null:N]),Object.assign(C,{preFilteredRows:$,preFilteredFlatRows:z,preFilteredRowsById:V,filteredRows:pt,filteredFlatRows:Ue,filteredRowsById:Fe,rows:pt,flatRows:Ue,rowsById:Fe,setFilter:Pe,setAllFilters:Me})}v1.pluginName="useFilters",u.resetGlobalFilter="resetGlobalFilter",u.setGlobalFilter="setGlobalFilter";var x1=function(C){C.stateReducers.push(Km),C.useInstance.push(eE)};function Km(C,N,$,z){if(N.type===u.resetGlobalFilter)return a({},C,{globalFilter:z.initialState.globalFilter||void 0});if(N.type===u.setGlobalFilter){var V=N.filterValue,q=z.userFilterTypes,X=H(z.globalFilter,q||{},Yc),re=b(V,C.globalFilter);return Q(X.autoRemove,re)?(C.globalFilter,s(C,["globalFilter"])):a({},C,{globalFilter:re})}}function eE(C){var N=C.data,$=C.rows,z=C.flatRows,V=C.rowsById,q=C.allColumns,X=C.filterTypes,re=C.globalFilter,oe=C.manualGlobalFilter,ue=C.state.globalFilter,Re=C.dispatch,ge=C.autoResetGlobalFilter,Se=ge===void 0||ge,ce=C.disableGlobalFilter,Ce=i.useCallback(function(Fe){Re({type:u.setGlobalFilter,filterValue:Fe})},[Re]),Pe=i.useMemo(function(){if(oe||ue===void 0)return[$,z,V];var Fe=[],lt={},je=H(re,X||{},Yc);if(!je)return console.warn("Could not find a valid 'globalFilter' option."),$;q.forEach(function(wt){var Xe=wt.disableGlobalFilter;wt.canFilter=U(Xe!==!0&&void 0,ce!==!0&&void 0,!0)});var at=q.filter(function(wt){return wt.canFilter===!0});return[function wt(Xe){return(Xe=je(Xe,at.map(function(ot){return ot.id}),ue)).forEach(function(ot){Fe.push(ot),lt[ot.id]=ot,ot.subRows=ot.subRows&&ot.subRows.length?wt(ot.subRows):ot.subRows}),Xe}($),Fe,lt]},[oe,ue,re,X,q,$,z,V,ce]),Me=Pe[0],Ge=Pe[1],pt=Pe[2],Ue=S(Se);R(function(){Ue()&&Re({type:u.resetGlobalFilter})},[Re,oe?null:N]),Object.assign(C,{preGlobalFilteredRows:$,preGlobalFilteredFlatRows:z,preGlobalFilteredRowsById:V,globalFilteredRows:Me,globalFilteredFlatRows:Ge,globalFilteredRowsById:pt,rows:Me,flatRows:Ge,rowsById:pt,setGlobalFilter:Ce,disableGlobalFilter:ce})}function _1(C,N){return N.reduce(function($,z){return $+(typeof z=="number"?z:0)},0)}x1.pluginName="useGlobalFilter";var b1=Object.freeze({__proto__:null,sum:_1,min:function(C){var N=C[0]||0;return C.forEach(function($){typeof $=="number"&&(N=Math.min(N,$))}),N},max:function(C){var N=C[0]||0;return C.forEach(function($){typeof $=="number"&&(N=Math.max(N,$))}),N},minMax:function(C){var N=C[0]||0,$=C[0]||0;return C.forEach(function(z){typeof z=="number"&&(N=Math.min(N,z),$=Math.max($,z))}),N+".."+$},average:function(C){return _1(0,C)/C.length},median:function(C){if(!C.length)return null;var N=Math.floor(C.length/2),$=[].concat(C).sort(function(z,V){return z-V});return C.length%2!=0?$[N]:($[N-1]+$[N])/2},unique:function(C){return Array.from(new Set(C).values())},uniqueCount:function(C){return new Set(C).size},count:function(C){return C.length}}),tE=[],Ro={};u.resetGroupBy="resetGroupBy",u.setGroupBy="setGroupBy",u.toggleGroupBy="toggleGroupBy";var Ze=function(C){C.getGroupByToggleProps=[w1],C.stateReducers.push(S1),C.visibleColumnsDeps.push(function(N,$){var z=$.instance;return[].concat(N,[z.state.groupBy])}),C.visibleColumns.push(C1),C.useInstance.push(Jm),C.prepareRow.push(k1)};Ze.pluginName="useGroupBy";var w1=function(C,N){var $=N.header;return[C,{onClick:$.canGroupBy?function(z){z.persist(),$.toggleGroupBy()}:void 0,style:{cursor:$.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function S1(C,N,$,z){if(N.type===u.init)return a({groupBy:[]},C);if(N.type===u.resetGroupBy)return a({},C,{groupBy:z.initialState.groupBy||[]});if(N.type===u.setGroupBy)return a({},C,{groupBy:N.value});if(N.type===u.toggleGroupBy){var V=N.columnId,q=N.value,X=q!==void 0?q:!C.groupBy.includes(V);return a({},C,X?{groupBy:[].concat(C.groupBy,[V])}:{groupBy:C.groupBy.filter(function(re){return re!==V})})}}function C1(C,N){var $=N.instance.state.groupBy,z=$.map(function(q){return C.find(function(X){return X.id===q})}).filter(Boolean),V=C.filter(function(q){return!$.includes(q.id)});return(C=[].concat(z,V)).forEach(function(q){q.isGrouped=$.includes(q.id),q.groupedIndex=$.indexOf(q.id)}),C}var E1={};function Jm(C){var N=C.data,$=C.rows,z=C.flatRows,V=C.rowsById,q=C.allColumns,X=C.flatHeaders,re=C.groupByFn,oe=re===void 0?Ys:re,ue=C.manualGroupBy,Re=C.aggregations,ge=Re===void 0?E1:Re,Se=C.plugins,ce=C.state.groupBy,Ce=C.dispatch,Pe=C.autoResetGroupBy,Me=Pe===void 0||Pe,Ge=C.disableGroupBy,pt=C.defaultCanGroupBy,Ue=C.getHooks;_(Se,["useColumnOrder","useFilters"],"useGroupBy");var Fe=S(C);q.forEach(function(We){var ut=We.accessor,hn=We.defaultGroupBy,oi=We.disableGroupBy;We.canGroupBy=ut?U(We.canGroupBy,oi!==!0&&void 0,Ge!==!0&&void 0,!0):U(We.canGroupBy,hn,pt,!1),We.canGroupBy&&(We.toggleGroupBy=function(){return C.toggleGroupBy(We.id)}),We.Aggregated=We.Aggregated||We.Cell});var lt=i.useCallback(function(We,ut){Ce({type:u.toggleGroupBy,columnId:We,value:ut})},[Ce]),je=i.useCallback(function(We){Ce({type:u.setGroupBy,value:We})},[Ce]);X.forEach(function(We){We.getGroupByToggleProps=g(Ue().getGroupByToggleProps,{instance:Fe(),header:We})});var at=i.useMemo(function(){if(ue||!ce.length)return[$,z,V,tE,Ro,z,V];var We=ce.filter(function(Hn){return q.find(function(oa){return oa.id===Hn})}),ut=[],hn={},oi=[],nt={},nn=[],xn={},bi=function Hn(oa,aa,Rr){if(aa===void 0&&(aa=0),aa===We.length)return oa.map(function(Tr){return a({},Tr,{depth:aa})});var Xa=We[aa],fE=oe(oa,Xa);return Object.entries(fE).map(function(Tr,dE){var Js=Tr[0],dh=Tr[1],Ka=Xa+":"+Js,fg=Hn(dh,aa+1,Ka=Rr?Rr+">"+Ka:Ka),nf=aa?Z(dh,"leafRows"):dh,hE=function(wi,dg,hg){var hh={};return q.forEach(function(Zt){if(We.includes(Zt.id))hh[Zt.id]=dg[0]?dg[0].values[Zt.id]:null;else{var O1=typeof Zt.aggregate=="function"?Zt.aggregate:ge[Zt.aggregate]||b1[Zt.aggregate];if(O1){var fu=dg.map(function(Ar){return Ar.values[Zt.id]}),pE=wi.map(function(Ar){var du=Ar.values[Zt.id];if(!hg&&Zt.aggregateValue){var pg=typeof Zt.aggregateValue=="function"?Zt.aggregateValue:ge[Zt.aggregateValue]||b1[Zt.aggregateValue];if(!pg)throw console.info({column:Zt}),new Error("React Table: Invalid column.aggregateValue option for column listed above");du=pg(du,Ar,Zt)}return du});hh[Zt.id]=O1(pE,fu)}else{if(Zt.aggregate)throw console.info({column:Zt}),new Error("React Table: Invalid column.aggregate option for column listed above");hh[Zt.id]=null}}}),hh}(nf,dh,aa),Ja={id:Ka,isGrouped:!0,groupByID:Xa,groupByVal:Js,values:hE,subRows:fg,leafRows:nf,depth:aa,index:dE};return fg.forEach(function(wi){ut.push(wi),hn[wi.id]=wi,wi.isGrouped?(oi.push(wi),nt[wi.id]=wi):(nn.push(wi),xn[wi.id]=wi)}),Ja})}($);return bi.forEach(function(Hn){ut.push(Hn),hn[Hn.id]=Hn,Hn.isGrouped?(oi.push(Hn),nt[Hn.id]=Hn):(nn.push(Hn),xn[Hn.id]=Hn)}),[bi,ut,hn,oi,nt,nn,xn]},[ue,ce,$,z,V,q,ge,oe]),wt=at[0],Xe=at[1],ot=at[2],At=at[3],st=at[4],St=at[5],yt=at[6],Yt=S(Me);R(function(){Yt()&&Ce({type:u.resetGroupBy})},[Ce,ue?null:N]),Object.assign(C,{preGroupedRows:$,preGroupedFlatRow:z,preGroupedRowsById:V,groupedRows:wt,groupedFlatRows:Xe,groupedRowsById:ot,onlyGroupedFlatRows:At,onlyGroupedRowsById:st,nonGroupedFlatRows:St,nonGroupedRowsById:yt,rows:wt,flatRows:Xe,rowsById:ot,toggleGroupBy:lt,setGroupBy:je})}function k1(C){C.allCells.forEach(function(N){var $;N.isGrouped=N.column.isGrouped&&N.column.id===C.groupByID,N.isPlaceholder=!N.isGrouped&&N.column.isGrouped,N.isAggregated=!N.isGrouped&&!N.isPlaceholder&&(($=C.subRows)==null?void 0:$.length)})}function Ys(C,N){return C.reduce(function($,z,V){var q=""+z.values[N];return $[q]=Array.isArray($[q])?$[q]:[],$[q].push(z),$},{})}var Qm=/([0-9]+)/gm;function eg(C,N){return C===N?0:C>N?1:-1}function Zc(C,N,$){return[C.values[$],N.values[$]]}function R1(C){return typeof C=="number"?isNaN(C)||C===1/0||C===-1/0?"":String(C):typeof C=="string"?C:""}var nE=Object.freeze({__proto__:null,alphanumeric:function(C,N,$){var z=Zc(C,N,$),V=z[0],q=z[1];for(V=R1(V),q=R1(q),V=V.split(Qm).filter(Boolean),q=q.split(Qm).filter(Boolean);V.length&&q.length;){var X=V.shift(),re=q.shift(),oe=parseInt(X,10),ue=parseInt(re,10),Re=[oe,ue].sort();if(isNaN(Re[0])){if(X>re)return 1;if(re>X)return-1}else{if(isNaN(Re[1]))return isNaN(oe)?-1:1;if(oe>ue)return 1;if(ue>oe)return-1}}return V.length-q.length},datetime:function(C,N,$){var z=Zc(C,N,$),V=z[0],q=z[1];return eg(V=V.getTime(),q=q.getTime())},basic:function(C,N,$){var z=Zc(C,N,$);return eg(z[0],z[1])},string:function(C,N,$){var z=Zc(C,N,$),V=z[0],q=z[1];for(V=V.split("").filter(Boolean),q=q.split("").filter(Boolean);V.length&&q.length;){var X=V.shift(),re=q.shift(),oe=X.toLowerCase(),ue=re.toLowerCase();if(oe>ue)return 1;if(ue>oe)return-1;if(X>re)return 1;if(re>X)return-1}return V.length-q.length},number:function(C,N,$){var z=Zc(C,N,$),V=z[0],q=z[1],X=/[^0-9.]/gi;return eg(V=Number(String(V).replace(X,"")),q=Number(String(q).replace(X,"")))}});u.resetSortBy="resetSortBy",u.setSortBy="setSortBy",u.toggleSortBy="toggleSortBy",u.clearSortBy="clearSortBy",h.sortType="alphanumeric",h.sortDescFirst=!1;var tg=function(C){C.getSortByToggleProps=[iE],C.stateReducers.push(nh),C.useInstance.push(rE)};tg.pluginName="useSortBy";var iE=function(C,N){var $=N.instance,z=N.column,V=$.isMultiSortEvent,q=V===void 0?function(X){return X.shiftKey}:V;return[C,{onClick:z.canSort?function(X){X.persist(),z.toggleSortBy(void 0,!$.disableMultiSort&&q(X))}:void 0,style:{cursor:z.canSort?"pointer":void 0},title:z.canSort?"Toggle SortBy":void 0}]};function nh(C,N,$,z){if(N.type===u.init)return a({sortBy:[]},C);if(N.type===u.resetSortBy)return a({},C,{sortBy:z.initialState.sortBy||[]});if(N.type===u.clearSortBy)return a({},C,{sortBy:C.sortBy.filter(function(Fe){return Fe.id!==N.columnId})});if(N.type===u.setSortBy)return a({},C,{sortBy:N.sortBy});if(N.type===u.toggleSortBy){var V,q=N.columnId,X=N.desc,re=N.multi,oe=z.allColumns,ue=z.disableMultiSort,Re=z.disableSortRemove,ge=z.disableMultiRemove,Se=z.maxMultiSortColCount,ce=Se===void 0?Number.MAX_SAFE_INTEGER:Se,Ce=C.sortBy,Pe=oe.find(function(Fe){return Fe.id===q}).sortDescFirst,Me=Ce.find(function(Fe){return Fe.id===q}),Ge=Ce.findIndex(function(Fe){return Fe.id===q}),pt=X!=null,Ue=[];return(V=!ue&&re?Me?"toggle":"add":Ge!==Ce.length-1||Ce.length!==1?"replace":Me?"toggle":"replace")!="toggle"||Re||pt||re&&ge||!(Me&&Me.desc&&!Pe||!Me.desc&&Pe)||(V="remove"),V==="replace"?Ue=[{id:q,desc:pt?X:Pe}]:V==="add"?(Ue=[].concat(Ce,[{id:q,desc:pt?X:Pe}])).splice(0,Ue.length-ce):V==="toggle"?Ue=Ce.map(function(Fe){return Fe.id===q?a({},Fe,{desc:pt?X:!Me.desc}):Fe}):V==="remove"&&(Ue=Ce.filter(function(Fe){return Fe.id!==q})),a({},C,{sortBy:Ue})}}function rE(C){var N=C.data,$=C.rows,z=C.flatRows,V=C.allColumns,q=C.orderByFn,X=q===void 0?T1:q,re=C.sortTypes,oe=C.manualSortBy,ue=C.defaultCanSort,Re=C.disableSortBy,ge=C.flatHeaders,Se=C.state.sortBy,ce=C.dispatch,Ce=C.plugins,Pe=C.getHooks,Me=C.autoResetSortBy,Ge=Me===void 0||Me;_(Ce,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var pt=i.useCallback(function(Xe){ce({type:u.setSortBy,sortBy:Xe})},[ce]),Ue=i.useCallback(function(Xe,ot,At){ce({type:u.toggleSortBy,columnId:Xe,desc:ot,multi:At})},[ce]),Fe=S(C);ge.forEach(function(Xe){var ot=Xe.accessor,At=Xe.canSort,st=Xe.disableSortBy,St=Xe.id,yt=ot?U(st!==!0&&void 0,Re!==!0&&void 0,!0):U(ue,At,!1);Xe.canSort=yt,Xe.canSort&&(Xe.toggleSortBy=function(We,ut){return Ue(Xe.id,We,ut)},Xe.clearSortBy=function(){ce({type:u.clearSortBy,columnId:Xe.id})}),Xe.getSortByToggleProps=g(Pe().getSortByToggleProps,{instance:Fe(),column:Xe});var Yt=Se.find(function(We){return We.id===St});Xe.isSorted=!!Yt,Xe.sortedIndex=Se.findIndex(function(We){return We.id===St}),Xe.isSortedDesc=Xe.isSorted?Yt.desc:void 0});var lt=i.useMemo(function(){if(oe||!Se.length)return[$,z];var Xe=[],ot=Se.filter(function(At){return V.find(function(st){return st.id===At.id})});return[function At(st){var St=X(st,ot.map(function(yt){var Yt=V.find(function(hn){return hn.id===yt.id});if(!Yt)throw new Error("React-Table: Could not find a column with id: "+yt.id+" while sorting");var We=Yt.sortType,ut=G(We)||(re||{})[We]||nE[We];if(!ut)throw new Error("React-Table: Could not find a valid sortType of '"+We+"' for column '"+yt.id+"'.");return function(hn,oi){return ut(hn,oi,yt.id,yt.desc)}}),ot.map(function(yt){var Yt=V.find(function(We){return We.id===yt.id});return Yt&&Yt.sortInverted?yt.desc:!yt.desc}));return St.forEach(function(yt){Xe.push(yt),yt.subRows&&yt.subRows.length!==0&&(yt.subRows=At(yt.subRows))}),St}($),Xe]},[oe,Se,$,z,V,X,re]),je=lt[0],at=lt[1],wt=S(Ge);R(function(){wt()&&ce({type:u.resetSortBy})},[oe?null:N]),Object.assign(C,{preSortedRows:$,preSortedFlatRows:z,sortedRows:je,sortedFlatRows:at,rows:je,flatRows:at,setSortBy:pt,toggleSortBy:Ue})}function T1(C,N,$){return[].concat(C).sort(function(z,V){for(var q=0;q<N.length;q+=1){var X=N[q],re=$[q]===!1||$[q]==="desc",oe=X(z,V);if(oe!==0)return re?-oe:oe}return $[0]?z.index-V.index:V.index-z.index})}u.resetPage="resetPage",u.gotoPage="gotoPage",u.setPageSize="setPageSize";var A1=function(C){C.stateReducers.push(oE),C.useInstance.push(aE)};function oE(C,N,$,z){if(N.type===u.init)return a({pageSize:10,pageIndex:0},C);if(N.type===u.resetPage)return a({},C,{pageIndex:z.initialState.pageIndex||0});if(N.type===u.gotoPage){var V=z.pageCount,q=z.page,X=b(N.pageIndex,C.pageIndex),re=!1;return X>C.pageIndex?re=V===-1?q.length>=C.pageSize:X<V:X<C.pageIndex&&(re=X>-1),re?a({},C,{pageIndex:X}):C}if(N.type===u.setPageSize){var oe=N.pageSize,ue=C.pageSize*C.pageIndex;return a({},C,{pageIndex:Math.floor(ue/oe),pageSize:oe})}}function aE(C){var N=C.rows,$=C.autoResetPage,z=$===void 0||$,V=C.manualExpandedKey,q=V===void 0?"expanded":V,X=C.plugins,re=C.pageCount,oe=C.paginateExpandedRows,ue=oe===void 0||oe,Re=C.expandSubRows,ge=Re===void 0||Re,Se=C.state,ce=Se.pageSize,Ce=Se.pageIndex,Pe=Se.expanded,Me=Se.globalFilter,Ge=Se.filters,pt=Se.groupBy,Ue=Se.sortBy,Fe=C.dispatch,lt=C.data,je=C.manualPagination;_(X,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var at=S(z);R(function(){at()&&Fe({type:u.resetPage})},[Fe,je?null:lt,Me,Ge,pt,Ue]);var wt=je?re:Math.ceil(N.length/ce),Xe=i.useMemo(function(){return wt>0?[].concat(new Array(wt)).fill(null).map(function(ut,hn){return hn}):[]},[wt]),ot=i.useMemo(function(){var ut;if(je)ut=N;else{var hn=ce*Ce,oi=hn+ce;ut=N.slice(hn,oi)}return ue?ut:J(ut,{manualExpandedKey:q,expanded:Pe,expandSubRows:ge})},[ge,Pe,q,je,Ce,ce,ue,N]),At=Ce>0,st=wt===-1?ot.length>=ce:Ce<wt-1,St=i.useCallback(function(ut){Fe({type:u.gotoPage,pageIndex:ut})},[Fe]),yt=i.useCallback(function(){return St(function(ut){return ut-1})},[St]),Yt=i.useCallback(function(){return St(function(ut){return ut+1})},[St]),We=i.useCallback(function(ut){Fe({type:u.setPageSize,pageSize:ut})},[Fe]);Object.assign(C,{pageOptions:Xe,pageCount:wt,page:ot,canPreviousPage:At,canNextPage:st,gotoPage:St,previousPage:yt,nextPage:Yt,setPageSize:We})}A1.pluginName="usePagination",u.resetPivot="resetPivot",u.togglePivot="togglePivot";var ih=function(C){C.getPivotToggleProps=[F1],C.stateReducers.push(M1),C.useInstanceAfterData.push(Xc),C.allColumns.push(Lt),C.accessValue.push(dn),C.materializedColumns.push(rh),C.materializedColumnsDeps.push(su),C.visibleColumns.push(lu),C.visibleColumnsDeps.push(ng),C.useInstance.push(vt),C.prepareRow.push(En)};ih.pluginName="usePivotColumns";var au=[],F1=function(C,N){var $=N.header;return[C,{onClick:$.canPivot?function(z){z.persist(),$.togglePivot()}:void 0,style:{cursor:$.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function M1(C,N,$,z){if(N.type===u.init)return a({pivotColumns:au},C);if(N.type===u.resetPivot)return a({},C,{pivotColumns:z.initialState.pivotColumns||au});if(N.type===u.togglePivot){var V=N.columnId,q=N.value,X=q!==void 0?q:!C.pivotColumns.includes(V);return a({},C,X?{pivotColumns:[].concat(C.pivotColumns,[V])}:{pivotColumns:C.pivotColumns.filter(function(re){return re!==V})})}}function Xc(C){C.allColumns.forEach(function(N){N.isPivotSource=C.state.pivotColumns.includes(N.id)})}function Lt(C,N){var $=N.instance;return C.forEach(function(z){z.isPivotSource=$.state.pivotColumns.includes(z.id),z.uniqueValues=new Set}),C}function dn(C,N){var $=N.column;return $.uniqueValues&&C!==void 0&&$.uniqueValues.add(C),C}function rh(C,N){var $=N.instance,z=$.allColumns,V=$.state;if(!V.pivotColumns.length||!V.groupBy||!V.groupBy.length)return C;var q=V.pivotColumns.map(function(oe){return z.find(function(ue){return ue.id===oe})}).filter(Boolean),X=z.filter(function(oe){return!oe.isPivotSource&&!V.groupBy.includes(oe.id)&&!V.pivotColumns.includes(oe.id)}),re=B(function oe(ue,Re,ge){ue===void 0&&(ue=0),ge===void 0&&(ge=[]);var Se=q[ue];return Se?Array.from(Se.uniqueValues).sort().map(function(ce){var Ce=a({},Se,{Header:Se.PivotHeader||typeof Se.header=="string"?Se.Header+": "+ce:ce,isPivotGroup:!0,parent:Re,depth:ue,id:Re?Re.id+"."+Se.id+"."+ce:Se.id+"."+ce,pivotValue:ce});return Ce.columns=oe(ue+1,Ce,[].concat(ge,[function(Pe){return Pe.values[Se.id]===ce}])),Ce}):X.map(function(ce){return a({},ce,{canPivot:!1,isPivoted:!0,parent:Re,depth:ue,id:""+(Re?Re.id+"."+ce.id:ce.id),accessor:function(Ce,Pe,Me){if(ge.every(function(Ge){return Ge(Me)}))return Me.values[ce.id]}})})}());return[].concat(C,re)}function su(C,N){var $=N.instance.state,z=$.pivotColumns,V=$.groupBy;return[].concat(C,[z,V])}function lu(C,N){var $=N.instance.state;return C=C.filter(function(z){return!z.isPivotSource}),$.pivotColumns.length&&$.groupBy&&$.groupBy.length&&(C=C.filter(function(z){return z.isGrouped||z.isPivoted})),C}function ng(C,N){var $=N.instance;return[].concat(C,[$.state.pivotColumns,$.state.groupBy])}function vt(C){var N=C.columns,$=C.allColumns,z=C.flatHeaders,V=C.getHooks,q=C.plugins,X=C.dispatch,re=C.autoResetPivot,oe=re===void 0||re,ue=C.manaulPivot,Re=C.disablePivot,ge=C.defaultCanPivot;_(q,["useGroupBy"],"usePivotColumns");var Se=S(C);$.forEach(function(Ce){var Pe=Ce.accessor,Me=Ce.defaultPivot,Ge=Ce.disablePivot;Ce.canPivot=Pe?U(Ce.canPivot,Ge!==!0&&void 0,Re!==!0&&void 0,!0):U(Ce.canPivot,Me,ge,!1),Ce.canPivot&&(Ce.togglePivot=function(){return C.togglePivot(Ce.id)}),Ce.Aggregated=Ce.Aggregated||Ce.Cell}),z.forEach(function(Ce){Ce.getPivotToggleProps=g(V().getPivotToggleProps,{instance:Se(),header:Ce})});var ce=S(oe);R(function(){ce()&&X({type:u.resetPivot})},[X,ue?null:N]),Object.assign(C,{togglePivot:function(Ce,Pe){X({type:u.togglePivot,columnId:Ce,value:Pe})}})}function En(C){C.allCells.forEach(function(N){N.isPivoted=N.column.isPivoted})}u.resetSelectedRows="resetSelectedRows",u.toggleAllRowsSelected="toggleAllRowsSelected",u.toggleRowSelected="toggleRowSelected",u.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var oh=function(C){C.getToggleRowSelectedProps=[ah],C.getToggleAllRowsSelectedProps=[Er],C.getToggleAllPageRowsSelectedProps=[sE],C.stateReducers.push(sh),C.useInstance.push(Zs),C.prepareRow.push(Fn)};oh.pluginName="useRowSelect";var ah=function(C,N){var $=N.instance,z=N.row,V=$.manualRowSelectedKey,q=V===void 0?"isSelected":V;return[C,{onChange:function(X){z.toggleRowSelected(X.target.checked)},style:{cursor:"pointer"},checked:!(!z.original||!z.original[q])||z.isSelected,title:"Toggle Row Selected",indeterminate:z.isSomeSelected}]},Er=function(C,N){var $=N.instance;return[C,{onChange:function(z){$.toggleAllRowsSelected(z.target.checked)},style:{cursor:"pointer"},checked:$.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!$.isAllRowsSelected&&Object.keys($.state.selectedRowIds).length)}]},sE=function(C,N){var $=N.instance;return[C,{onChange:function(z){$.toggleAllPageRowsSelected(z.target.checked)},style:{cursor:"pointer"},checked:$.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!$.isAllPageRowsSelected&&$.page.some(function(z){var V=z.id;return $.state.selectedRowIds[V]}))}]};function sh(C,N,$,z){if(N.type===u.init)return a({selectedRowIds:{}},C);if(N.type===u.resetSelectedRows)return a({},C,{selectedRowIds:z.initialState.selectedRowIds||{}});if(N.type===u.toggleAllRowsSelected){var V=N.value,q=z.isAllRowsSelected,X=z.rowsById,re=z.nonGroupedRowsById,oe=re===void 0?X:re,ue=V!==void 0?V:!q,Re=Object.assign({},C.selectedRowIds);return ue?Object.keys(oe).forEach(function(St){Re[St]=!0}):Object.keys(oe).forEach(function(St){delete Re[St]}),a({},C,{selectedRowIds:Re})}if(N.type===u.toggleRowSelected){var ge=N.id,Se=N.value,ce=z.rowsById,Ce=z.selectSubRows,Pe=Ce===void 0||Ce,Me=z.getSubRows,Ge=C.selectedRowIds[ge],pt=Se!==void 0?Se:!Ge;if(Ge===pt)return C;var Ue=a({},C.selectedRowIds);return function St(yt){var Yt=ce[yt];if(Yt&&(Yt.isGrouped||(pt?Ue[yt]=!0:delete Ue[yt]),Pe&&Me(Yt)))return Me(Yt).forEach(function(We){return St(We.id)})}(ge),a({},C,{selectedRowIds:Ue})}if(N.type===u.toggleAllPageRowsSelected){var Fe=N.value,lt=z.page,je=z.rowsById,at=z.selectSubRows,wt=at===void 0||at,Xe=z.isAllPageRowsSelected,ot=z.getSubRows,At=Fe!==void 0?Fe:!Xe,st=a({},C.selectedRowIds);return lt.forEach(function(St){return function yt(Yt){var We=je[Yt];if(We.isGrouped||(At?st[Yt]=!0:delete st[Yt]),wt&&ot(We))return ot(We).forEach(function(ut){return yt(ut.id)})}(St.id)}),a({},C,{selectedRowIds:st})}return C}function Zs(C){var N=C.data,$=C.rows,z=C.getHooks,V=C.plugins,q=C.rowsById,X=C.nonGroupedRowsById,re=X===void 0?q:X,oe=C.autoResetSelectedRows,ue=oe===void 0||oe,Re=C.state.selectedRowIds,ge=C.selectSubRows,Se=ge===void 0||ge,ce=C.dispatch,Ce=C.page,Pe=C.getSubRows;_(V,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var Me=i.useMemo(function(){var ot=[];return $.forEach(function(At){var st=Se?function St(yt,Yt,We){if(Yt[yt.id])return!0;var ut=We(yt);if(ut&&ut.length){var hn=!0,oi=!1;return ut.forEach(function(nt){oi&&!hn||(St(nt,Yt,We)?oi=!0:hn=!1)}),!!hn||!!oi&&null}return!1}(At,Re,Pe):!!Re[At.id];At.isSelected=!!st,At.isSomeSelected=st===null,st&&ot.push(At)}),ot},[$,Se,Re,Pe]),Ge=!!(Object.keys(re).length&&Object.keys(Re).length),pt=Ge;Ge&&Object.keys(re).some(function(ot){return!Re[ot]})&&(Ge=!1),Ge||Ce&&Ce.length&&Ce.some(function(ot){var At=ot.id;return!Re[At]})&&(pt=!1);var Ue=S(ue);R(function(){Ue()&&ce({type:u.resetSelectedRows})},[ce,N]);var Fe=i.useCallback(function(ot){return ce({type:u.toggleAllRowsSelected,value:ot})},[ce]),lt=i.useCallback(function(ot){return ce({type:u.toggleAllPageRowsSelected,value:ot})},[ce]),je=i.useCallback(function(ot,At){return ce({type:u.toggleRowSelected,id:ot,value:At})},[ce]),at=S(C),wt=g(z().getToggleAllRowsSelectedProps,{instance:at()}),Xe=g(z().getToggleAllPageRowsSelectedProps,{instance:at()});Object.assign(C,{selectedFlatRows:Me,isAllRowsSelected:Ge,isAllPageRowsSelected:pt,toggleRowSelected:je,toggleAllRowsSelected:Fe,getToggleAllRowsSelectedProps:wt,getToggleAllPageRowsSelectedProps:Xe,toggleAllPageRowsSelected:lt})}function Fn(C,N){var $=N.instance;C.toggleRowSelected=function(z){return $.toggleRowSelected(C.id,z)},C.getToggleRowSelectedProps=g($.getHooks().getToggleRowSelectedProps,{instance:$,row:C})}var Ya=function(C){return{}},uu=function(C){return{}};u.setRowState="setRowState",u.setCellState="setCellState",u.resetRowState="resetRowState";var cu=function(C){C.stateReducers.push(ig),C.useInstance.push(Kc),C.prepareRow.push(rg)};function ig(C,N,$,z){var V=z.initialRowStateAccessor,q=V===void 0?Ya:V,X=z.initialCellStateAccessor,re=X===void 0?uu:X,oe=z.rowsById;if(N.type===u.init)return a({rowState:{}},C);if(N.type===u.resetRowState)return a({},C,{rowState:z.initialState.rowState||{}});if(N.type===u.setRowState){var ue,Re=N.rowId,ge=N.value,Se=C.rowState[Re]!==void 0?C.rowState[Re]:q(oe[Re]);return a({},C,{rowState:a({},C.rowState,(ue={},ue[Re]=b(ge,Se),ue))})}if(N.type===u.setCellState){var ce,Ce,Pe,Me,Ge,pt=N.rowId,Ue=N.columnId,Fe=N.value,lt=C.rowState[pt]!==void 0?C.rowState[pt]:q(oe[pt]),je=(lt==null||(ce=lt.cellState)==null?void 0:ce[Ue])!==void 0?lt.cellState[Ue]:re((Ce=oe[pt])==null||(Pe=Ce.cells)==null?void 0:Pe.find(function(at){return at.column.id===Ue}));return a({},C,{rowState:a({},C.rowState,(Ge={},Ge[pt]=a({},lt,{cellState:a({},lt.cellState||{},(Me={},Me[Ue]=b(Fe,je),Me))}),Ge))})}}function Kc(C){var N=C.autoResetRowState,$=N===void 0||N,z=C.data,V=C.dispatch,q=i.useCallback(function(oe,ue){return V({type:u.setRowState,rowId:oe,value:ue})},[V]),X=i.useCallback(function(oe,ue,Re){return V({type:u.setCellState,rowId:oe,columnId:ue,value:Re})},[V]),re=S($);R(function(){re()&&V({type:u.resetRowState})},[z]),Object.assign(C,{setRowState:q,setCellState:X})}function rg(C,N){var $=N.instance,z=$.initialRowStateAccessor,V=z===void 0?Ya:z,q=$.initialCellStateAccessor,X=q===void 0?uu:q,re=$.state.rowState;C&&(C.state=re[C.id]!==void 0?re[C.id]:V(C),C.setState=function(oe){return $.setRowState(C.id,oe)},C.cells.forEach(function(oe){C.state.cellState||(C.state.cellState={}),oe.state=C.state.cellState[oe.column.id]!==void 0?C.state.cellState[oe.column.id]:X(oe),oe.setState=function(ue){return $.setCellState(C.id,oe.column.id,ue)}}))}cu.pluginName="useRowState",u.resetColumnOrder="resetColumnOrder",u.setColumnOrder="setColumnOrder";var lh=function(C){C.stateReducers.push(uh),C.visibleColumnsDeps.push(function(N,$){var z=$.instance;return[].concat(N,[z.state.columnOrder])}),C.visibleColumns.push(og),C.useInstance.push(ag)};function uh(C,N,$,z){return N.type===u.init?a({columnOrder:[]},C):N.type===u.resetColumnOrder?a({},C,{columnOrder:z.initialState.columnOrder||[]}):N.type===u.setColumnOrder?a({},C,{columnOrder:b(N.columnOrder,C.columnOrder)}):void 0}function og(C,N){var $=N.instance.state.columnOrder;if(!$||!$.length)return C;for(var z=[].concat($),V=[].concat(C),q=[],X=function(){var re=z.shift(),oe=V.findIndex(function(ue){return ue.id===re});oe>-1&&q.push(V.splice(oe,1)[0])};V.length&&z.length;)X();return[].concat(q,V)}function ag(C){var N=C.dispatch;C.setColumnOrder=i.useCallback(function($){return N({type:u.setColumnOrder,columnOrder:$})},[N])}lh.pluginName="useColumnOrder",h.canResize=!0,u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize";var Jc=function(C){C.getResizerProps=[N1],C.getHeaderProps.push({style:{position:"relative"}}),C.stateReducers.push(sg),C.useInstance.push(gt),C.useInstanceBeforeDimensions.push(lE)},N1=function(C,N){var $=N.instance,z=N.header,V=$.dispatch,q=function(X,re){var oe=!1;if(X.type==="touchstart"){if(X.touches&&X.touches.length>1)return;oe=!0}var ue,Re,ge=function(Ue){var Fe=[];return function lt(je){je.columns&&je.columns.length&&je.columns.map(lt),Fe.push(je)}(Ue),Fe}(re).map(function(Ue){return[Ue.id,Ue.totalWidth]}),Se=oe?Math.round(X.touches[0].clientX):X.clientX,ce=function(){window.cancelAnimationFrame(ue),ue=null,V({type:u.columnDoneResizing})},Ce=function(){window.cancelAnimationFrame(ue),ue=null,V({type:u.columnResizing,clientX:Re})},Pe=function(Ue){Re=Ue,ue||(ue=window.requestAnimationFrame(Ce))},Me={mouse:{moveEvent:"mousemove",moveHandler:function(Ue){return Pe(Ue.clientX)},upEvent:"mouseup",upHandler:function(Ue){document.removeEventListener("mousemove",Me.mouse.moveHandler),document.removeEventListener("mouseup",Me.mouse.upHandler),ce()}},touch:{moveEvent:"touchmove",moveHandler:function(Ue){return Ue.cancelable&&(Ue.preventDefault(),Ue.stopPropagation()),Pe(Ue.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(Ue){document.removeEventListener(Me.touch.moveEvent,Me.touch.moveHandler),document.removeEventListener(Me.touch.upEvent,Me.touch.moveHandler),ce()}}},Ge=oe?Me.touch:Me.mouse,pt=!!function(){if(typeof ne=="boolean")return ne;var Ue=!1;try{var Fe={get passive(){return Ue=!0,!1}};window.addEventListener("test",null,Fe),window.removeEventListener("test",null,Fe)}catch{Ue=!1}return ne=Ue}()&&{passive:!1};document.addEventListener(Ge.moveEvent,Ge.moveHandler,pt),document.addEventListener(Ge.upEvent,Ge.upHandler,pt),V({type:u.columnStartResizing,columnId:re.id,columnWidth:re.totalWidth,headerIdWidths:ge,clientX:Se})};return[C,{onMouseDown:function(X){return X.persist()||q(X,z)},onTouchStart:function(X){return X.persist()||q(X,z)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function sg(C,N){if(N.type===u.init)return a({columnResizing:{columnWidths:{}}},C);if(N.type===u.resetResize)return a({},C,{columnResizing:{columnWidths:{}}});if(N.type===u.columnStartResizing){var $=N.clientX,z=N.columnId,V=N.columnWidth,q=N.headerIdWidths;return a({},C,{columnResizing:a({},C.columnResizing,{startX:$,headerIdWidths:q,columnWidth:V,isResizingColumn:z})})}if(N.type===u.columnResizing){var X=N.clientX,re=C.columnResizing,oe=re.startX,ue=re.columnWidth,Re=re.headerIdWidths,ge=(X-oe)/ue,Se={};return(Re===void 0?[]:Re).forEach(function(ce){var Ce=ce[0],Pe=ce[1];Se[Ce]=Math.max(Pe+Pe*ge,0)}),a({},C,{columnResizing:a({},C.columnResizing,{columnWidths:a({},C.columnResizing.columnWidths,{},Se)})})}return N.type===u.columnDoneResizing?a({},C,{columnResizing:a({},C.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Jc.pluginName="useResizeColumns";var lE=function(C){var N=C.flatHeaders,$=C.disableResizing,z=C.getHooks,V=C.state.columnResizing,q=S(C);N.forEach(function(X){var re=U(X.disableResizing!==!0&&void 0,$!==!0&&void 0,!0);X.canResize=re,X.width=V.columnWidths[X.id]||X.originalWidth||X.width,X.isResizing=V.isResizingColumn===X.id,re&&(X.getResizerProps=g(z().getResizerProps,{instance:q(),header:X}))})};function gt(C){var N=C.plugins,$=C.dispatch,z=C.autoResetResize,V=z===void 0||z,q=C.columns;_(N,["useAbsoluteLayout"],"useResizeColumns");var X=S(V);R(function(){X()&&$({type:u.resetResize})},[q]);var re=i.useCallback(function(){return $({type:u.resetResize})},[$]);Object.assign(C,{resetResizing:re})}var kr={position:"absolute",top:0},Jt=function(C){C.getTableBodyProps.push(Qc),C.getRowProps.push(Qc),C.getHeaderGroupProps.push(Qc),C.getFooterGroupProps.push(Qc),C.getHeaderProps.push(function(N,$){var z=$.column;return[N,{style:a({},kr,{left:z.totalLeft+"px",width:z.totalWidth+"px"})}]}),C.getCellProps.push(function(N,$){var z=$.cell;return[N,{style:a({},kr,{left:z.column.totalLeft+"px",width:z.column.totalWidth+"px"})}]}),C.getFooterProps.push(function(N,$){var z=$.column;return[N,{style:a({},kr,{left:z.totalLeft+"px",width:z.totalWidth+"px"})}]})};Jt.pluginName="useAbsoluteLayout";var Qc=function(C,N){return[C,{style:{position:"relative",width:N.instance.totalColumnsWidth+"px"}}]},ef={display:"inline-block",boxSizing:"border-box"},tf=function(C,N){return[C,{style:{display:"flex",width:N.instance.totalColumnsWidth+"px"}}]},ch=function(C){C.getRowProps.push(tf),C.getHeaderGroupProps.push(tf),C.getFooterGroupProps.push(tf),C.getHeaderProps.push(function(N,$){var z=$.column;return[N,{style:a({},ef,{width:z.totalWidth+"px"})}]}),C.getCellProps.push(function(N,$){var z=$.cell;return[N,{style:a({},ef,{width:z.column.totalWidth+"px"})}]}),C.getFooterProps.push(function(N,$){var z=$.column;return[N,{style:a({},ef,{width:z.totalWidth+"px"})}]})};function Za(C){C.getTableProps.push(lg),C.getRowProps.push(Xs),C.getHeaderGroupProps.push(Xs),C.getFooterGroupProps.push(Xs),C.getHeaderProps.push(Vn),C.getCellProps.push(Ks),C.getFooterProps.push(P1)}ch.pluginName="useBlockLayout",Za.pluginName="useFlexLayout";var lg=function(C,N){return[C,{style:{minWidth:N.instance.totalColumnsMinWidth+"px"}}]},Xs=function(C,N){return[C,{style:{display:"flex",flex:"1 0 auto",minWidth:N.instance.totalColumnsMinWidth+"px"}}]},Vn=function(C,N){var $=N.column;return[C,{style:{boxSizing:"border-box",flex:$.totalFlexWidth?$.totalFlexWidth+" 0 auto":void 0,minWidth:$.totalMinWidth+"px",width:$.totalWidth+"px"}}]},Ks=function(C,N){var $=N.cell;return[C,{style:{boxSizing:"border-box",flex:$.column.totalFlexWidth+" 0 auto",minWidth:$.column.totalMinWidth+"px",width:$.column.totalWidth+"px"}}]},P1=function(C,N){var $=N.column;return[C,{style:{boxSizing:"border-box",flex:$.totalFlexWidth?$.totalFlexWidth+" 0 auto":void 0,minWidth:$.totalMinWidth+"px",width:$.totalWidth+"px"}}]};function ug(C){C.stateReducers.push(cE),C.getTableProps.push(uE),C.getHeaderProps.push($1),C.getRowProps.push(cg)}u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize",ug.pluginName="useGridLayout";var uE=function(C,N){var $=N.instance;return[C,{style:{display:"grid",gridTemplateColumns:$.visibleColumns.map(function(z){var V;return $.state.gridLayout.columnWidths[z.id]?$.state.gridLayout.columnWidths[z.id]+"px":(V=$.state.columnResizing)!=null&&V.isResizingColumn?$.state.gridLayout.startWidths[z.id]+"px":typeof z.width=="number"?z.width+"px":z.width}).join(" ")}}]},$1=function(C,N){var $=N.column;return[C,{id:"header-cell-"+$.id,style:{position:"sticky",gridColumn:"span "+$.totalVisibleHeaderCount}}]},cg=function(C,N){var $=N.row;return $.isExpanded?[C,{style:{gridColumn:"1 / "+($.cells.length+1)}}]:[C,{}]};function cE(C,N,$,z){if(N.type===u.init)return a({gridLayout:{columnWidths:{}}},C);if(N.type===u.resetResize)return a({},C,{gridLayout:{columnWidths:{}}});if(N.type===u.columnStartResizing){var V=N.columnId,q=N.headerIdWidths,X=fh(V);if(X!==void 0){var re=z.visibleColumns.reduce(function(Fe,lt){var je;return a({},Fe,((je={})[lt.id]=fh(lt.id),je))},{}),oe=z.visibleColumns.reduce(function(Fe,lt){var je;return a({},Fe,((je={})[lt.id]=lt.minWidth,je))},{}),ue=z.visibleColumns.reduce(function(Fe,lt){var je;return a({},Fe,((je={})[lt.id]=lt.maxWidth,je))},{}),Re=q.map(function(Fe){var lt=Fe[0];return[lt,fh(lt)]});return a({},C,{gridLayout:a({},C.gridLayout,{startWidths:re,minWidths:oe,maxWidths:ue,headerIdGridWidths:Re,columnWidth:X})})}return C}if(N.type===u.columnResizing){var ge=N.clientX,Se=C.columnResizing.startX,ce=C.gridLayout,Ce=ce.columnWidth,Pe=ce.minWidths,Me=ce.maxWidths,Ge=ce.headerIdGridWidths,pt=(ge-Se)/Ce,Ue={};return(Ge===void 0?[]:Ge).forEach(function(Fe){var lt=Fe[0],je=Fe[1];Ue[lt]=Math.min(Math.max(Pe[lt],je+je*pt),Me[lt])}),a({},C,{gridLayout:a({},C.gridLayout,{columnWidths:a({},C.gridLayout.columnWidths,{},Ue)})})}return N.type===u.columnDoneResizing?a({},C,{gridLayout:a({},C.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function fh(C){var N,$=(N=document.getElementById("header-cell-"+C))==null?void 0:N.offsetWidth;if($!==void 0)return $}n._UNSTABLE_usePivotColumns=ih,n.actions=u,n.defaultColumn=h,n.defaultGroupByFn=Ys,n.defaultOrderByFn=T1,n.defaultRenderer=c,n.emptyRenderer=d,n.ensurePluginOrder=_,n.flexRender=T,n.functionalUpdate=b,n.loopHooks=v,n.makePropGetter=g,n.makeRenderer=F,n.reduceHooks=y,n.safeUseLayoutEffect=k,n.useAbsoluteLayout=Jt,n.useAsyncDebounce=function(C,N){N===void 0&&(N=0);var $=i.useRef({}),z=S(C),V=S(N);return i.useCallback(function(){var q=o(regeneratorRuntime.mark(function X(){var re,oe,ue,Re=arguments;return regeneratorRuntime.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:for(re=Re.length,oe=new Array(re),ue=0;ue<re;ue++)oe[ue]=Re[ue];return $.current.promise||($.current.promise=new Promise(function(Se,ce){$.current.resolve=Se,$.current.reject=ce})),$.current.timeout&&clearTimeout($.current.timeout),$.current.timeout=setTimeout(o(regeneratorRuntime.mark(function Se(){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return delete $.current.timeout,ce.prev=1,ce.t0=$.current,ce.next=5,z().apply(void 0,oe);case 5:ce.t1=ce.sent,ce.t0.resolve.call(ce.t0,ce.t1),ce.next=12;break;case 9:ce.prev=9,ce.t2=ce.catch(1),$.current.reject(ce.t2);case 12:return ce.prev=12,delete $.current.promise,ce.finish(12);case 15:case"end":return ce.stop()}},Se,null,[[1,9,12,15]])})),V()),ge.abrupt("return",$.current.promise);case 5:case"end":return ge.stop()}},X)}));return function(){return q.apply(this,arguments)}}(),[z,V])},n.useBlockLayout=ch,n.useColumnOrder=lh,n.useExpanded=Va,n.useFilters=v1,n.useFlexLayout=Za,n.useGetLatest=S,n.useGlobalFilter=x1,n.useGridLayout=ug,n.useGroupBy=Ze,n.useMountedLayoutEffect=R,n.usePagination=A1,n.useResizeColumns=Jc,n.useRowSelect=oh,n.useRowState=cu,n.useSortBy=tg,n.useTable=function(C){for(var N=arguments.length,$=new Array(N>1?N-1:0),z=1;z<N;z++)$[z-1]=arguments[z];C=bt(C),$=[Tt].concat($);var V=i.useRef({}),q=S(V.current);Object.assign(q(),a({},C,{plugins:$,hooks:de()})),$.filter(Boolean).forEach(function(nt){nt(q().hooks)});var X=S(q().hooks);q().getHooks=X,delete q().hooks,Object.assign(q(),y(X().useOptions,bt(C)));var re=q(),oe=re.data,ue=re.columns,Re=re.initialState,ge=re.defaultColumn,Se=re.getSubRows,ce=re.getRowId,Ce=re.stateReducer,Pe=re.useControlledState,Me=S(Ce),Ge=i.useCallback(function(nt,nn){if(!nn.type)throw console.info({action:nn}),new Error("Unknown Action ");return[].concat(X().stateReducers,Array.isArray(Me())?Me():[Me()]).reduce(function(xn,bi){return bi(xn,nn,nt,q())||xn},nt)},[X,Me,q]),pt=i.useReducer(Ge,void 0,function(){return Ge(Re,{type:u.init})}),Ue=pt[0],Fe=pt[1],lt=y([].concat(X().useControlledState,[Pe]),Ue,{instance:q()});Object.assign(q(),{state:lt,dispatch:Fe});var je=i.useMemo(function(){return P(y(X().columns,ue,{instance:q()}))},[X,q,ue].concat(y(X().columnsDeps,[],{instance:q()})));q().columns=je;var at=i.useMemo(function(){return y(X().allColumns,B(je),{instance:q()}).map(O)},[je,X,q].concat(y(X().allColumnsDeps,[],{instance:q()})));q().allColumns=at;var wt=i.useMemo(function(){for(var nt=[],nn=[],xn={},bi=[].concat(at);bi.length;){var Hn=bi.shift();ko({data:oe,rows:nt,flatRows:nn,rowsById:xn,column:Hn,getRowId:ce,getSubRows:Se,accessValueHooks:X().accessValue,getInstance:q})}return[nt,nn,xn]},[at,oe,ce,Se,X,q]),Xe=wt[0],ot=wt[1],At=wt[2];Object.assign(q(),{rows:Xe,initialRows:[].concat(Xe),flatRows:ot,rowsById:At}),v(X().useInstanceAfterData,q());var st=i.useMemo(function(){return y(X().visibleColumns,at,{instance:q()}).map(function(nt){return D(nt,ge)})},[X,at,q,ge].concat(y(X().visibleColumnsDeps,[],{instance:q()})));at=i.useMemo(function(){var nt=[].concat(st);return at.forEach(function(nn){nt.find(function(xn){return xn.id===nn.id})||nt.push(nn)}),nt},[at,st]),q().allColumns=at;var St=i.useMemo(function(){return y(X().headerGroups,W(st,ge),q())},[X,st,ge,q].concat(y(X().headerGroupsDeps,[],{instance:q()})));q().headerGroups=St;var yt=i.useMemo(function(){return St.length?St[0].headers:[]},[St]);q().headers=yt,q().flatHeaders=St.reduce(function(nt,nn){return[].concat(nt,nn.headers)},[]),v(X().useInstanceBeforeDimensions,q());var Yt=st.filter(function(nt){return nt.isVisible}).map(function(nt){return nt.id}).sort().join("_");st=i.useMemo(function(){return st.filter(function(nt){return nt.isVisible})},[st,Yt]),q().visibleColumns=st;var We=ri(yt),ut=We[0],hn=We[1],oi=We[2];return q().totalColumnsMinWidth=ut,q().totalColumnsWidth=hn,q().totalColumnsMaxWidth=oi,v(X().useInstance,q()),[].concat(q().flatHeaders,q().allColumns).forEach(function(nt){nt.render=F(q(),nt),nt.getHeaderProps=g(X().getHeaderProps,{instance:q(),column:nt}),nt.getFooterProps=g(X().getFooterProps,{instance:q(),column:nt})}),q().headerGroups=i.useMemo(function(){return St.filter(function(nt,nn){return nt.headers=nt.headers.filter(function(xn){return xn.headers?function bi(Hn){return Hn.filter(function(oa){return oa.headers?bi(oa.headers):oa.isVisible}).length}(xn.headers):xn.isVisible}),!!nt.headers.length&&(nt.getHeaderGroupProps=g(X().getHeaderGroupProps,{instance:q(),headerGroup:nt,index:nn}),nt.getFooterGroupProps=g(X().getFooterGroupProps,{instance:q(),headerGroup:nt,index:nn}),!0)})},[St,q,X]),q().footerGroups=[].concat(q().headerGroups).reverse(),q().prepareRow=i.useCallback(function(nt){nt.getRowProps=g(X().getRowProps,{instance:q(),row:nt}),nt.allCells=at.map(function(nn){var xn=nt.values[nn.id],bi={column:nn,row:nt,value:xn};return bi.getCellProps=g(X().getCellProps,{instance:q(),cell:bi}),bi.render=F(q(),nn,{row:nt,cell:bi,value:xn}),bi}),nt.cells=st.map(function(nn){return nt.allCells.find(function(xn){return xn.column.id===nn.id})}),v(X().prepareRow,nt,{instance:q()})},[X,q,at,st]),q().getTableProps=g(X().getTableProps,{instance:q()}),q().getTableBodyProps=g(X().getTableBodyProps,{instance:q()}),v(X().useFinalInstance,q()),q()},Object.defineProperty(n,"__esModule",{value:!0})})})(jT,jT.exports);var zfe=jT.exports;qW.exports=zfe;var N3=qW.exports;const P3={};function BT(e,t){e===void 0&&(e=P3),t===void 0&&(t=P3);const n=Object.keys(e),i=Object.keys(t);return e===t||n.length===i.length&&n.every(r=>e[r]===t[r])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var jfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bfe=Object.prototype.hasOwnProperty;function HT(e,t){return Bfe.call(e,t)}function UT(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)HT(e,r)&&i.push(r);return i}function uo(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function WT(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function vf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function VW(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function GT(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(GT(e[t]))return!0}else if(typeof e=="object"){for(var i=UT(e),r=i.length,o=0;o<r;o++)if(GT(e[i[o]]))return!0}}return!1}function $3(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var YW=function(e){jfe(t,e);function t(n,i,r,o,a){var s=this.constructor,l=e.call(this,$3(n,{name:i,index:r,operation:o,tree:a}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=a,Object.setPrototypeOf(l,s.prototype),l.message=$3(n,{name:i,index:r,operation:o,tree:a}),l}return t}(Error),Nn=YW,Hfe=uo,Jh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=xb(n,this.path);i&&(i=uo(i));var r=Bf(n,{op:"remove",path:this.from}).removed;return Bf(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=xb(n,this.from);return Bf(n,{op:"add",path:this.path,value:uo(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Fy(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ufe={add:function(e,t,n){return WT(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Jh.move,copy:Jh.copy,test:Jh.test,_get:Jh._get};function xb(e,t){if(t=="")return e;var n={op:"_get",path:t};return Bf(e,n),n.value}function Bf(e,t,n,i,r,o){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):_b(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=xb(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=Fy(e,t.value),a.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Nn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{i||(e=uo(e));var s=t.path||"",l=s.split("/"),u=e,c=1,d=l.length,h=void 0,m=void 0,g=void 0;for(typeof n=="function"?g=n:g=_b;;){if(m=l[c],m&&m.indexOf("~")!=-1&&(m=VW(m)),r&&(m=="__proto__"||m=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(u[m]===void 0?h=l.slice(0,c).join("/"):c==d-1&&(h=t.path),h!==void 0&&g(t,0,e,h)),c++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!WT(m))throw new Nn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);WT(m)&&(m=~~m)}if(c>=d){if(n&&t.op==="add"&&m>u.length)throw new Nn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=Ufe[t.op].call(t,u,m,e);if(a.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=d){var a=Jh[t.op].call(t,u,m,e);if(a.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(u=u[m],n&&c<d&&(!u||typeof u!="object"))throw new Nn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function I2(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Nn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=uo(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Bf(e,t[a],n,!0,r,a),e=o[a].newDocument;return o.newDocument=e,o}function Wfe(e,t,n){var i=Bf(e,t);if(i.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function _b(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Nn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Jh[e.op]){if(typeof e.path!="string")throw new Nn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Nn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Nn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Nn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&GT(e.value))throw new Nn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new Nn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Nn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=ZW([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Nn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Nn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function ZW(e,t,n){try{if(!Array.isArray(e))throw new Nn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)I2(uo(t),uo(e),n||!0);else{n=n||_b;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Nn)return r;throw r}}function Fy(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,o,a;if(n&&i){if(o=e.length,o!=t.length)return!1;for(r=o;r--!==0;)if(!Fy(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(r=o;r--!==0;)if(!t.hasOwnProperty(s[r]))return!1;for(r=o;r--!==0;)if(a=s[r],!Fy(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const Gfe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Nn,_areEquals:Fy,applyOperation:Bf,applyPatch:I2,applyReducer:Wfe,deepClone:Hfe,getValueByPointer:xb,validate:ZW,validator:_b},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var AN=new WeakMap,qfe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Vfe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Yfe(e){return AN.get(e)}function Zfe(e,t){return e.observers.get(t)}function Xfe(e,t){e.observers.delete(t.callback)}function Kfe(e,t){t.unobserve()}function Jfe(e,t){var n=[],i,r=Yfe(e);if(!r)r=new qfe(e),AN.set(e,r);else{var o=Zfe(r,t);i=o&&o.observer}if(i)return i;if(i={},r.value=uo(e),t){i.callback=t,i.next=null;var a=function(){qT(i)},s=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return i.patches=n,i.object=e,i.unobserve=function(){qT(i),clearTimeout(i.next),Xfe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},r.observers.set(t,new Vfe(t,i)),i}function qT(e,t){t===void 0&&(t=!1);var n=AN.get(e.object);FN(n.value,e.object,e.patches,"",t),e.patches.length&&I2(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function FN(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=UT(t),a=UT(e),s=!1,l=a.length-1;l>=0;l--){var u=a[l],c=e[u];if(HT(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?FN(c,d,n,i+"/"+vf(u),r):c!==d&&(r&&n.push({op:"test",path:i+"/"+vf(u),value:uo(c)}),n.push({op:"replace",path:i+"/"+vf(u),value:uo(d)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+vf(u),value:uo(c)}),n.push({op:"remove",path:i+"/"+vf(u)}),s=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!s&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!HT(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+vf(u),value:uo(t[u])})}}}function Qfe(e,t,n){n===void 0&&(n=!1);var i=[];return FN(e,t,i,"",n),i}const ede=Object.freeze(Object.defineProperty({__proto__:null,compare:Qfe,generate:qT,observe:Jfe,unobserve:Kfe},Symbol.toStringTag,{value:"Module"}));Object.assign({},Gfe,ede,{JsonPatchError:YW,deepClone:uo,escapePathComponent:vf,unescapePathComponent:VW});var tde=/("(?:[^\\"]|\\.)*")|[:,]/g,nde=function(t,n){var i,r,o;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),r=i===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,l,u){var c,d,h,m,g,y,v,_,b,S,k,R;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),k=JSON.stringify(s,o),k===void 0)return k;if(v=r-l.length-u,k.length<=v&&(b=k.replace(tde,function(F,T){return T||F+" "}),b.length<=v))return b;if(o!=null&&(s=JSON.parse(k),o=void 0),typeof s=="object"&&s!==null){if(_=l+i,h=[],d=0,Array.isArray(s))for(S="[",c="]",v=s.length;d<v;d++)h.push(a(s[d],_,d===v-1?0:1)||"null");else for(S="{",c="}",y=Object.keys(s),v=y.length;d<v;d++)m=y[d],g=JSON.stringify(m)+": ",R=a(s[m],_,g.length+(d===v-1?0:1)),R!==void 0&&h.push(g+R);if(h.length>0)return[S,i+h.join(`,
`+_),c].join(`
`+l)}return k}(t,"",0)};const QE=Td(nde);function Jr(e,t,n){return e.fields=t||[],e.fname=n,e}function In(e){return e==null?null:e.fname}function Vi(e){return e==null?null:e.fields}function XW(e){return e.length===1?ide(e[0]):rde(e)}const ide=e=>function(t){return t[e]},rde=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function le(e){throw Error(e)}function Os(e){const t=[],n=e.length;let i=null,r=0,o="",a,s,l;e=e+"";function u(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(l=e[s],l==="\\")o+=e.substring(a,s++),a=s;else if(l===i)u(),i=null,r=-1;else{if(i)continue;a===r&&l==='"'||a===r&&l==="'"?(a=s+1,i=l):l==="."&&!r?s>a?u():a=s+1:l==="["?(s>a&&u(),r=a=s+1):l==="]"&&(r||le("Access path missing open bracket: "+e),r>0&&u(),r=0,a=s+1)}return r&&le("Access path missing closing bracket: "+e),i&&le("Access path missing closing quote: "+e),s>a&&(s++,u()),t}function Vo(e,t,n){const i=Os(e);return e=i.length===1?i[0]:e,Jr((n&&n.get||XW)(i),[e],t||e)}const _v=Vo("id"),Ji=Jr(e=>e,[],"identity"),Au=Jr(()=>0,[],"zero"),wm=Jr(()=>1,[],"one"),Yo=Jr(()=>!0,[],"true"),mu=Jr(()=>!1,[],"false");function ode(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const KW=0,MN=1,NN=2,JW=3,QW=4;function PN(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ode,i=e||KW;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=MN&&n(t||"error","ERROR",arguments),this},warn(){return i>=NN&&n(t||"warn","WARN",arguments),this},info(){return i>=JW&&n(t||"log","INFO",arguments),this},debug(){return i>=QW&&n(t||"log","DEBUG",arguments),this}}}var fe=Array.isArray;function Le(e){return e===Object(e)}const O3=e=>e!=="__proto__";function Sm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const o in r)if(o==="signals")i.signals=ade(i.signals,r.signals);else{const a=o==="legend"?{layout:1}:o==="style"?!0:null;Cm(i,o,r[o],a)}return i},{})}function Cm(e,t,n,i){if(!O3(t))return;let r,o;if(Le(n)&&!fe(n)){o=Le(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Cm(o,r,n[r]):O3(r)&&(o[r]=n[r])}else e[t]=n}function ade(e,t){if(e==null)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function Ot(e){return e[e.length-1]}function Wi(e){return e==null||e===""?null:+e}const eG=e=>t=>e*Math.exp(t),tG=e=>t=>Math.log(e*t),nG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),iG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,bb=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function L2(e,t,n,i){const r=n(e[0]),o=n(Ot(e)),a=(o-r)*t;return[i(r-a),i(o-a)]}function rG(e,t){return L2(e,t,Wi,Ji)}function oG(e,t){var n=Math.sign(e[0]);return L2(e,t,tG(n),eG(n))}function aG(e,t,n){return L2(e,t,bb(n),bb(1/n))}function sG(e,t,n){return L2(e,t,nG(n),iG(n))}function D2(e,t,n,i,r){const o=i(e[0]),a=i(Ot(e)),s=t!=null?i(t):(o+a)/2;return[r(s+(o-s)*n),r(s+(a-s)*n)]}function $N(e,t,n){return D2(e,t,n,Wi,Ji)}function ON(e,t,n){const i=Math.sign(e[0]);return D2(e,t,n,tG(i),eG(i))}function wb(e,t,n,i){return D2(e,t,n,bb(i),bb(1/i))}function IN(e,t,n,i){return D2(e,t,n,nG(i),iG(i))}function lG(e){return 1+~~(new Date(e).getMonth()/3)}function uG(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Oe(e){return e!=null?fe(e)?e:[e]:[]}function cG(e,t,n){let i=e[0],r=e[1],o;return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function _t(e){return typeof e=="function"}const sde="descending";function LN(e,t,n){n=n||{},t=Oe(t)||[];const i=[],r=[],o={},a=n.comparator||lde;return Oe(e).forEach((s,l)=>{s!=null&&(i.push(t[l]===sde?-1:1),r.push(s=_t(s)?s:Vo(s,null,n)),(Vi(s)||[]).forEach(u=>o[u]=1))}),r.length===0?null:Jr(a(r,i),Object.keys(o))}const z2=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),lde=(e,t)=>e.length===1?ude(e[0],t[0]):cde(e,t,e.length),ude=(e,t)=>function(n,i){return z2(e(n),e(i))*t},cde=(e,t,n)=>(t.push(0),function(i,r){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=z2(o(i),o(r));return a*t[s]});function Qi(e){return _t(e)?e:()=>e}function DN(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function xt(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Es(e,t){let n=0,i,r,o,a;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(o=a=r;n<i;++n)r=e[n],r!=null&&(r<o&&(o=r),r>a&&(a=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(o=a=r;n<i;++n)r=t(e[n]),r!=null&&(r<o&&(o=r),r>a&&(a=r))}return[o,a]}function fG(e,t){const n=e.length;let i=-1,r,o,a,s,l;if(t==null){for(;++i<n;)if(o=e[i],o!=null&&o>=o){r=a=o;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)o=e[i],o!=null&&(r>o&&(r=o,s=i),a<o&&(a=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),o!=null&&o>=o){r=a=o;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)o=t(e[i],i,e),o!=null&&(r>o&&(r=o,s=i),a<o&&(a=o,l=i))}return[s,l]}const fde=Object.prototype.hasOwnProperty;function et(e,t){return fde.call(e,t)}const dx={};function Em(e){let t={},n;function i(o){return et(t,o)&&t[o]!==dx}const r={size:0,empty:0,object:t,has:i,get(o){return i(o)?t[o]:void 0},set(o,a){return i(o)||(++r.size,t[o]===dx&&--r.empty),t[o]=a,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=dx),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let a=0;for(const s in t){const l=t[s];l!==dx&&(!n||!n(l))&&(o[s]=l,++a)}r.size=a,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function dG(e,t,n,i,r,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],l=Ot(e),u;l<s&&(u=s,s=l,l=u),u=Math.abs(t-s);const c=Math.abs(l-t);return u<c&&u<=a?i:c<=a?r:o}function _e(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),xt(i,n)}function Qh(e,t,n,i){let r=t[0],o=t[t.length-1],a;return r>o&&(a=r,r=o,o=a),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=o:e<o)}function Mc(e){return typeof e=="boolean"}function Ku(e){return Object.prototype.toString.call(e)==="[object Date]"}function hG(e){return e&&_t(e[Symbol.iterator])}function jt(e){return typeof e=="number"}function pG(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ie(e){return typeof e=="string"}function zN(e,t,n){e&&(e=t?Oe(e).map(s=>s.replace(/\\(.)/g,"$1")):Oe(e));const i=e&&e.length,r=n&&n.get||XW,o=s=>r(t?[s]:Os(s));let a;if(!i)a=function(){return""};else if(i===1){const s=o(e[0]);a=function(l){return""+s(l)}}else{const s=e.map(o);a=function(l){let u=""+s[0](l),c=0;for(;++c<i;)u+="|"+s[c](l);return u}}return Jr(a,e,"key")}function mG(e,t){const n=e[0],i=Ot(e),r=+t;return r?r===1?i:n+r*(i-n):n}const dde=1e4;function gG(e){e=+e||dde;let t,n,i;const r=()=>{t={},n={},i=0},o=(a,s)=>(++i>e&&(n=t,t={},i=1),t[a]=s);return r(),{clear:r,has:a=>et(t,a)||et(n,a),get:a=>et(t,a)?t[a]:et(n,a)?o(a,n[a]):void 0,set:(a,s)=>et(t,a)?t[a]=s:o(a,s)}}function yG(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const a=i||new t.constructor(r+o);let s=0,l=0,u=0;for(;s<r&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<r;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a}function l0(e,t){let n="";for(;--t>=0;)n+=e;return n}function vG(e,t,n,i){const r=n||" ",o=e+"",a=t-o.length;return a<=0?o:i==="left"?l0(r,a)+o:i==="center"?l0(r,~~(a/2))+o+l0(r,Math.ceil(a/2)):o+l0(r,a)}function bv(e){return e&&Ot(e)-e[0]||0}function be(e){return fe(e)?"["+e.map(be)+"]":Le(e)||Ie(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function jN(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const hde=e=>jt(e)||Ku(e)?e:Date.parse(e);function BN(e,t){return t=t||hde,e==null||e===""?null:t(e)}function HN(e){return e==null||e===""?null:e+""}function $a(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function xG(e,t,n,i){const r=i??"",o=e+"",a=o.length,s=Math.max(0,t-r.length);return a<=t?o:n==="left"?r+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+r+o.slice(a-~~(s/2)):o.slice(0,s)+r}function wu(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}var I3={},ek={},tk=34,Ag=10,nk=13;function _G(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function pde(e,t){var n=_G(e);return function(i,r){return t(n(i),r,e)}}function L3(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Mr(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function mde(e){return e<0?"-"+Mr(-e,6):e>9999?"+"+Mr(e,6):Mr(e,4)}function gde(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":mde(e.getUTCFullYear())+"-"+Mr(e.getUTCMonth()+1,2)+"-"+Mr(e.getUTCDate(),2)+(r?"T"+Mr(t,2)+":"+Mr(n,2)+":"+Mr(i,2)+"."+Mr(r,3)+"Z":i?"T"+Mr(t,2)+":"+Mr(n,2)+":"+Mr(i,2)+"Z":n||t?"T"+Mr(t,2)+":"+Mr(n,2)+"Z":"")}function yde(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(d,h){var m,g,y=r(d,function(v,_){if(m)return m(v,_-1);g=v,m=h?pde(v,h):_G(v)});return y.columns=g||[],y}function r(d,h){var m=[],g=d.length,y=0,v=0,_,b=g<=0,S=!1;d.charCodeAt(g-1)===Ag&&--g,d.charCodeAt(g-1)===nk&&--g;function k(){if(b)return ek;if(S)return S=!1,I3;var F,T=y,P;if(d.charCodeAt(T)===tk){for(;y++<g&&d.charCodeAt(y)!==tk||d.charCodeAt(++y)===tk;);return(F=y)>=g?b=!0:(P=d.charCodeAt(y++))===Ag?S=!0:P===nk&&(S=!0,d.charCodeAt(y)===Ag&&++y),d.slice(T+1,F-1).replace(/""/g,'"')}for(;y<g;){if((P=d.charCodeAt(F=y++))===Ag)S=!0;else if(P===nk)S=!0,d.charCodeAt(y)===Ag&&++y;else if(P!==n)continue;return d.slice(T,F)}return b=!0,d.slice(T,g)}for(;(_=k())!==ek;){for(var R=[];_!==I3&&_!==ek;)R.push(_),_=k();h&&(R=h(R,v++))==null||m.push(R)}return m}function o(d,h){return d.map(function(m){return h.map(function(g){return c(m[g])}).join(e)})}function a(d,h){return h==null&&(h=L3(d)),[h.map(c).join(e)].concat(o(d,h)).join(`
`)}function s(d,h){return h==null&&(h=L3(d)),o(d,h).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?gde(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:i,parseRows:r,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}function vde(e){return e}function xde(e){if(e==null)return vde;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var u=2,c=s.length,d=new Array(c);for(d[0]=(t+=s[0])*i+o,d[1]=(n+=s[1])*r+a;u<c;)d[u]=s[u],++u;return d}}function _de(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function bde(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return D3(e,n)})}:D3(e,t)}function D3(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,o=bG(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:o}:i==null?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function bG(e,t){var n=xde(e.transform),i=e.arcs;function r(c,d){d.length&&d.pop();for(var h=i[c<0?~c:c],m=0,g=h.length;m<g;++m)d.push(n(h[m],m));c<0&&_de(d,g)}function o(c){return n(c)}function a(c){for(var d=[],h=0,m=c.length;h<m;++h)r(c[h],d);return d.length<2&&d.push(d[0]),d}function s(c){for(var d=a(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(s)}function u(c){var d=c.type,h;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":h=o(c.coordinates);break;case"MultiPoint":h=c.coordinates.map(o);break;case"LineString":h=a(c.arcs);break;case"MultiLineString":h=c.arcs.map(a);break;case"Polygon":h=l(c.arcs);break;case"MultiPolygon":h=c.arcs.map(l);break;default:return null}return{type:d,coordinates:h}}return u(t)}function wde(e,t){var n={},i={},r={},o=[],a=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],h;d.length<3&&!d[1][0]&&!d[1][1]&&(h=t[++a],t[a]=u,t[c]=h)}),t.forEach(function(u){var c=s(u),d=c[0],h=c[1],m,g;if(m=r[d])if(delete r[m.end],m.push(u),m.end=h,g=i[h]){delete i[g.start];var y=g===m?m:m.concat(g);i[y.start=m.start]=r[y.end=g.end]=y}else i[m.start]=r[m.end]=m;else if(m=i[h])if(delete i[m.start],m.unshift(u),m.start=d,g=r[d]){delete r[g.end];var v=g===m?m:g.concat(m);i[v.start=g.start]=r[v.end=m.end]=v}else i[m.start]=r[m.end]=m;else m=[u],i[m.start=d]=r[m.end=h]=m});function s(u){var c=e.arcs[u<0?~u:u],d=c[0],h;return e.transform?(h=[0,0],c.forEach(function(m){h[0]+=m[0],h[1]+=m[1]})):h=c[c.length-1],u<0?[h,d]:[d,h]}function l(u,c){for(var d in u){var h=u[d];delete c[h.start],delete h.start,delete h.end,h.forEach(function(m){n[m<0?~m:m]=1}),o.push(h)}}return l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Sde(e){return bG(e,Cde.apply(this,arguments))}function Cde(e,t,n){var i,r,o;if(arguments.length>1)i=Ede(e,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:wde(e,i)}}function Ede(e,t,n){var i=[],r=[],o;function a(d){var h=d<0?~d:d;(r[h]||(r[h]=[])).push({i:d,g:o})}function s(d){d.forEach(a)}function l(d){d.forEach(s)}function u(d){d.forEach(l)}function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":s(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),r.forEach(n==null?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}function Tl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kde(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function km(e){let t,n,i;e.length!==2?(t=Tl,n=(s,l)=>Tl(e(s),l),i=(s,l)=>e(s)-l):(t=e===Tl||e===kde?e:Rde,n=e,i=e);function r(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=r(s,l,u,c-1);return d>u&&i(s[d-1],l)>-i(s[d],l)?d-1:d}return{left:r,center:a,right:o}}function Rde(){return 0}function wG(e){return e===null?NaN:+e}function*Tde(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const SG=km(Tl),sc=SG.right,Ade=SG.left;km(wG).center;function Fde(e,t){let n=0,i,r=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r))}if(n>1)return o/(n-1)}function Mde(e,t){const n=Fde(e,t);return n&&Math.sqrt(n)}class hr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[i++]=s),t=a}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=t[--n];n>0&&(i=a,r=t[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class z3 extends Map{constructor(t,n=kG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(VT(this,t))}has(t){return super.has(VT(this,t))}set(t,n){return super.set(CG(this,t),n)}delete(t){return super.delete(EG(this,t))}}class Sb extends Set{constructor(t,n=kG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(VT(this,t))}add(t){return super.add(CG(this,t))}delete(t){return super.delete(EG(this,t))}}function VT({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function CG({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function EG({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function kG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Nde(e,t){return Array.from(t,n=>e[n])}function Pde(e=Tl){if(e===Tl)return RG;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function RG(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $de=Math.sqrt(50),Ode=Math.sqrt(10),Ide=Math.sqrt(2);function Cb(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=$de?10:o>=Ode?5:o>=Ide?2:1;let s,l,u;return r<0?(u=Math.pow(10,-r)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,r)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?Cb(e,t,n*2):[s,l,u]}function YT(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,o,a]=i?Cb(t,e,n):Cb(e,t,n);if(!(o>=r))return[];const s=o-r+1,l=new Array(s);if(i)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(r+u)/-a;else for(let u=0;u<s;++u)l[u]=(r+u)*a;return l}function ZT(e,t,n){return t=+t,e=+e,n=+n,Cb(e,t,n)[2]}function lc(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?ZT(t,e,n):ZT(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Hf(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function XT(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function TG(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?RG:Pde(r);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/l+h)),g=Math.min(i,Math.floor(t+(l-u)*d/l+h));TG(e,t,m,g,r)}const o=e[t];let a=n,s=i;for(Fg(e,n,t),r(e[i],o)>0&&Fg(e,n,i);a<s;){for(Fg(e,a,s),++a,--s;r(e[a],o)<0;)++a;for(;r(e[s],o)>0;)--s}r(e[n],o)===0?Fg(e,n,s):(++s,Fg(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function Fg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function KT(e,t,n){if(e=Float64Array.from(Tde(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return XT(e);if(t>=1)return Hf(e);var i,r=(i-1)*t,o=Math.floor(r),a=Hf(TG(e,o).subarray(0,o+1)),s=XT(e.subarray(o+1));return a+(s-a)*(r-o)}}function AG(e,t,n=wG){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(r-o)}}function Lde(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function FG(e,t){return KT(e,.5,t)}function*Dde(e){for(const t of e)yield*t}function MG(e){return Array.from(Dde(e))}function co(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++i<r;)o[i]=e+i*n;return o}function NG(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function zde(e,...t){e=new Sb(e),t=t.map(jde);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function jde(e){return e instanceof Sb?e:new Sb(e)}function Bde(...e){const t=new Sb;for(const n of e)for(const i of n)t.add(i);return t}function Hde(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Eb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function $p(e){return e=Eb(Math.abs(e)),e?e[1]:NaN}function Ude(e,t){return function(n,i){for(var r=n.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Wde(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Gde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function od(e){if(!(t=Gde.exec(e)))throw new Error("invalid format: "+e);var t;return new UN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}od.prototype=UN.prototype;function UN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}UN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qde(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var PG;function Vde(e,t){var n=Eb(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(PG=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Eb(e,Math.max(0,t+o-1))[0]}function j3(e,t){var n=Eb(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const B3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Hde,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>j3(e*100,t),r:j3,s:Vde,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function H3(e){return e}var U3=Array.prototype.map,W3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $G(e){var t=e.grouping===void 0||e.thousands===void 0?H3:Ude(U3.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?H3:Wde(U3.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=od(d);var h=d.fill,m=d.align,g=d.sign,y=d.symbol,v=d.zero,_=d.width,b=d.comma,S=d.precision,k=d.trim,R=d.type;R==="n"?(b=!0,R="g"):B3[R]||(S===void 0&&(S=12),k=!0,R="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var F=y==="$"?n:y==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",T=y==="$"?i:/[%p]/.test(R)?a:"",P=B3[R],B=/[defgprs%]/.test(R);S=S===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(D){var W=F,j=T,U,G,Z;if(R==="c")j=P(D)+j,D="";else{D=+D;var J=D<0||1/D<0;if(D=isNaN(D)?l:P(Math.abs(D),S),k&&(D=qde(D)),J&&+D==0&&g!=="+"&&(J=!1),W=(J?g==="("?g:s:g==="-"||g==="("?"":g)+W,j=(R==="s"?W3[8+PG/3]:"")+j+(J&&g==="("?")":""),B){for(U=-1,G=D.length;++U<G;)if(Z=D.charCodeAt(U),48>Z||Z>57){j=(Z===46?r+D.slice(U+1):D.slice(U))+j,D=D.slice(0,U);break}}}b&&!v&&(D=t(D,1/0));var H=W.length+D.length+j.length,Q=H<_?new Array(_-H+1).join(h):"";switch(b&&v&&(D=t(Q+D,Q.length?_-j.length:1/0),Q=""),m){case"<":D=W+D+j+Q;break;case"=":D=W+Q+D+j;break;case"^":D=Q.slice(0,H=Q.length>>1)+W+D+j+Q.slice(H);break;default:D=Q+W+D+j;break}return o(D)}return O.toString=function(){return d+""},O}function c(d,h){var m=u((d=od(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor($p(h)/3)))*3,y=Math.pow(10,-g),v=W3[8+g/3];return function(_){return m(y*_)+v}}return{format:u,formatPrefix:c}}var hx,j2,WN;Yde({thousands:",",grouping:[3],currency:["$",""]});function Yde(e){return hx=$G(e),j2=hx.format,WN=hx.formatPrefix,hx}function OG(e){return Math.max(0,-$p(Math.abs(e)))}function IG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($p(t)/3)))*3-$p(Math.abs(e)))}function LG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$p(t)-$p(e))+1}const ik=new Date,rk=new Date;function ni(e,t,n,i){function r(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const a=r(o),s=r.ceil(o);return o-a<s-o?a:s},r.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,s)=>{const l=[];if(o=r.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},r.filter=o=>ni(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(r.count=(o,a)=>(ik.setTime(+o),rk.setTime(+a),e(ik),e(rk),Math.floor(n(ik,rk))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Op=ni(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Op.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ni(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Op);Op.range;const xl=1e3,Io=xl*60,_l=Io*60,Hl=_l*24,GN=Hl*7,G3=Hl*30,ok=Hl*365,bl=ni(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xl)},(e,t)=>(t-e)/xl,e=>e.getUTCSeconds());bl.range;const B2=ni(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xl)},(e,t)=>{e.setTime(+e+t*Io)},(e,t)=>(t-e)/Io,e=>e.getMinutes());B2.range;const H2=ni(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Io)},(e,t)=>(t-e)/Io,e=>e.getUTCMinutes());H2.range;const U2=ni(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xl-e.getMinutes()*Io)},(e,t)=>{e.setTime(+e+t*_l)},(e,t)=>(t-e)/_l,e=>e.getHours());U2.range;const W2=ni(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_l)},(e,t)=>(t-e)/_l,e=>e.getUTCHours());W2.range;const Al=ni(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Io)/Hl,e=>e.getDate()-1);Al.range;const Ju=ni(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hl,e=>e.getUTCDate()-1);Ju.range;const DG=ni(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hl,e=>Math.floor(e/Hl));DG.range;function $d(e){return ni(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Io)/GN)}const Rm=$d(0),kb=$d(1),Zde=$d(2),Xde=$d(3),Ip=$d(4),Kde=$d(5),Jde=$d(6);Rm.range;kb.range;Zde.range;Xde.range;Ip.range;Kde.range;Jde.range;function Od(e){return ni(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/GN)}const Tm=Od(0),Rb=Od(1),Qde=Od(2),ehe=Od(3),Lp=Od(4),the=Od(5),nhe=Od(6);Tm.range;Rb.range;Qde.range;ehe.range;Lp.range;the.range;nhe.range;const My=ni(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());My.range;const Ny=ni(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ny.range;const ks=ni(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ni(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ks.range;const Rs=ni(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ni(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Rs.range;function zG(e,t,n,i,r,o){const a=[[bl,1,xl],[bl,5,5*xl],[bl,15,15*xl],[bl,30,30*xl],[o,1,Io],[o,5,5*Io],[o,15,15*Io],[o,30,30*Io],[r,1,_l],[r,3,3*_l],[r,6,6*_l],[r,12,12*_l],[i,1,Hl],[i,2,2*Hl],[n,1,GN],[t,1,G3],[t,3,3*G3],[e,1,ok]];function s(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const m=d&&typeof d.range=="function"?d:l(u,c,d),g=m?m.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,m=km(([,,v])=>v).right(a,h);if(m===a.length)return e.every(lc(u/ok,c/ok,d));if(m===0)return Op.every(Math.max(lc(u,c,d),1));const[g,y]=a[h/a[m-1][2]<a[m][2]/h?m-1:m];return g.every(y)}return[s,l]}const[ihe,rhe]=zG(Rs,Ny,Tm,DG,W2,H2),[ohe,ahe]=zG(ks,My,Rm,Al,U2,B2),Ti="year",qr="quarter",Yi="month",Jn="week",Vr="date",Ui="day",Ts="dayofyear",vo="hours",xo="minutes",Zo="seconds",Oa="milliseconds",qN=[Ti,qr,Yi,Jn,Vr,Ui,Ts,vo,xo,Zo,Oa],ak=qN.reduce((e,t,n)=>(e[t]=1+n,e),{});function VN(e){const t=Oe(e).slice(),n={};return t.length||le("Missing time unit."),t.forEach(r=>{et(ak,r)?n[r]=1:le(`Invalid time unit: ${r}.`)}),(n[Jn]||n[Ui]?1:0)+(n[qr]||n[Yi]||n[Vr]?1:0)+(n[Ts]?1:0)>1&&le(`Incompatible time units: ${e}`),t.sort((r,o)=>ak[r]-ak[o]),t}const she={[Ti]:"%Y ",[qr]:"Q%q ",[Yi]:"%b ",[Vr]:"%d ",[Jn]:"W%U ",[Ui]:"%a ",[Ts]:"%j ",[vo]:"%H:00",[xo]:"00:%M",[Zo]:":%S",[Oa]:".%L",[`${Ti}-${Yi}`]:"%Y-%m ",[`${Ti}-${Yi}-${Vr}`]:"%Y-%m-%d ",[`${vo}-${xo}`]:"%H:%M"};function jG(e,t){const n=xt({},she,t),i=VN(e),r=i.length;let o="",a=0,s,l;for(a=0;a<r;)for(s=i.length;s>a;--s)if(l=i.slice(a,s).join("-"),n[l]!=null){o+=n[l],a=s;break}return o.trim()}const bf=new Date;function YN(e){return bf.setFullYear(e),bf.setMonth(0),bf.setDate(1),bf.setHours(0,0,0,0),bf}function BG(e){return UG(new Date(e))}function HG(e){return JT(new Date(e))}function UG(e){return Al.count(YN(e.getFullYear())-1,e)}function JT(e){return Rm.count(YN(e.getFullYear())-1,e)}function QT(e){return YN(e).getDay()}function lhe(e,t,n,i,r,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,i,r,o,a);return s.setFullYear(e),s}return new Date(e,t,n,i,r,o,a)}function WG(e){return qG(new Date(e))}function GG(e){return eA(new Date(e))}function qG(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ju.count(t-1,e)}function eA(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Tm.count(t-1,e)}function tA(e){return bf.setTime(Date.UTC(e,0,1)),bf.getUTCDay()}function uhe(e,t,n,i,r,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,i,r,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,i,r,o,a))}function VG(e,t,n,i,r){const o=t||1,a=Ot(e),s=(_,b,S)=>(S=S||_,che(n[S],i[S],_===a&&o,b)),l=new Date,u=$a(e),c=u[Ti]?s(Ti):Qi(2012),d=u[Yi]?s(Yi):u[qr]?s(qr):Au,h=u[Jn]&&u[Ui]?s(Ui,1,Jn+Ui):u[Jn]?s(Jn,1):u[Ui]?s(Ui,1):u[Vr]?s(Vr,1):u[Ts]?s(Ts,1):wm,m=u[vo]?s(vo):Au,g=u[xo]?s(xo):Au,y=u[Zo]?s(Zo):Au,v=u[Oa]?s(Oa):Au;return function(_){l.setTime(+_);const b=c(l);return r(b,d(l),h(l,b),m(l),g(l),y(l),v(l))}}function che(e,t,n,i){const r=n<=1?e:i?(o,a)=>i+n*Math.floor((e(o,a)-i)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(r(o,a),a):r}function Dp(e,t,n){return t+e*7-(n+6)%7}const fhe={[Ti]:e=>e.getFullYear(),[qr]:e=>Math.floor(e.getMonth()/3),[Yi]:e=>e.getMonth(),[Vr]:e=>e.getDate(),[vo]:e=>e.getHours(),[xo]:e=>e.getMinutes(),[Zo]:e=>e.getSeconds(),[Oa]:e=>e.getMilliseconds(),[Ts]:e=>UG(e),[Jn]:e=>JT(e),[Jn+Ui]:(e,t)=>Dp(JT(e),e.getDay(),QT(t)),[Ui]:(e,t)=>Dp(1,e.getDay(),QT(t))},dhe={[qr]:e=>3*e,[Jn]:(e,t)=>Dp(e,0,QT(t))};function YG(e,t){return VG(e,t||1,fhe,dhe,lhe)}const hhe={[Ti]:e=>e.getUTCFullYear(),[qr]:e=>Math.floor(e.getUTCMonth()/3),[Yi]:e=>e.getUTCMonth(),[Vr]:e=>e.getUTCDate(),[vo]:e=>e.getUTCHours(),[xo]:e=>e.getUTCMinutes(),[Zo]:e=>e.getUTCSeconds(),[Oa]:e=>e.getUTCMilliseconds(),[Ts]:e=>qG(e),[Jn]:e=>eA(e),[Ui]:(e,t)=>Dp(1,e.getUTCDay(),tA(t)),[Jn+Ui]:(e,t)=>Dp(eA(e),e.getUTCDay(),tA(t))},phe={[qr]:e=>3*e,[Jn]:(e,t)=>Dp(e,0,tA(t))};function ZG(e,t){return VG(e,t||1,hhe,phe,uhe)}const mhe={[Ti]:ks,[qr]:My.every(3),[Yi]:My,[Jn]:Rm,[Vr]:Al,[Ui]:Al,[Ts]:Al,[vo]:U2,[xo]:B2,[Zo]:bl,[Oa]:Op},ghe={[Ti]:Rs,[qr]:Ny.every(3),[Yi]:Ny,[Jn]:Tm,[Vr]:Ju,[Ui]:Ju,[Ts]:Ju,[vo]:W2,[xo]:H2,[Zo]:bl,[Oa]:Op};function Am(e){return mhe[e]}function Fm(e){return ghe[e]}function XG(e,t,n){return e?e.offset(t,n):void 0}function KG(e,t,n){return XG(Am(e),t,n)}function JG(e,t,n){return XG(Fm(e),t,n)}function QG(e,t,n,i){return e?e.range(t,n,i):void 0}function eq(e,t,n,i){return QG(Am(e),t,n,i)}function tq(e,t,n,i){return QG(Fm(e),t,n,i)}const u0=1e3,c0=u0*60,f0=c0*60,G2=f0*24,yhe=G2*7,q3=G2*30,nA=G2*365,nq=[Ti,Yi,Vr,vo,xo,Zo,Oa],d0=nq.slice(0,-1),h0=d0.slice(0,-1),p0=h0.slice(0,-1),vhe=p0.slice(0,-1),xhe=[Ti,Jn],V3=[Ti,Yi],iq=[Ti],Mg=[[d0,1,u0],[d0,5,5*u0],[d0,15,15*u0],[d0,30,30*u0],[h0,1,c0],[h0,5,5*c0],[h0,15,15*c0],[h0,30,30*c0],[p0,1,f0],[p0,3,3*f0],[p0,6,6*f0],[p0,12,12*f0],[vhe,1,G2],[xhe,1,yhe],[V3,1,q3],[V3,3,3*q3],[iq,1,nA]];function rq(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(bv(t))/n;let r=km(s=>s[2]).right(Mg,i),o,a;return r===Mg.length?(o=iq,a=lc(t[0]/nA,t[1]/nA,n)):r?(r=Mg[i/Mg[r-1][2]<Mg[r][2]/i?r-1:r],o=r[0],a=r[1]):(o=nq,a=Math.max(lc(t[0],t[1],n),1)),{units:o,step:a}}function sk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ng(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function oq(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=Pg(r),c=$g(r),d=Pg(o),h=$g(o),m=Pg(a),g=$g(a),y=Pg(s),v=$g(s),_=Pg(l),b=$g(l),S={a:J,A:H,b:Q,B:K,c:null,d:Q3,e:Q3,f:Hhe,g:Jhe,G:epe,H:zhe,I:jhe,j:Bhe,L:aq,m:Uhe,M:Whe,p:ne,q:he,Q:n4,s:i4,S:Ghe,u:qhe,U:Vhe,V:Yhe,w:Zhe,W:Xhe,x:null,X:null,y:Khe,Y:Qhe,Z:tpe,"%":t4},k={a:$e,A:Ee,b:we,B:Ae,c:null,d:e4,e:e4,f:ope,g:mpe,G:ype,H:npe,I:ipe,j:rpe,L:lq,m:ape,M:spe,p:It,q:Et,Q:n4,s:i4,S:lpe,u:upe,U:cpe,V:fpe,w:dpe,W:hpe,x:null,X:null,y:ppe,Y:gpe,Z:vpe,"%":t4},R={a:O,A:D,b:W,B:j,c:U,d:K3,e:K3,f:Ohe,g:X3,G:Z3,H:J3,I:J3,j:Mhe,L:$he,m:Fhe,M:Nhe,p:B,q:Ahe,Q:Lhe,s:Dhe,S:Phe,u:Che,U:Ehe,V:khe,w:She,W:Rhe,x:G,X:Z,y:X3,Y:Z3,Z:The,"%":Ihe};S.x=F(n,S),S.X=F(i,S),S.c=F(t,S),k.x=F(n,k),k.X=F(i,k),k.c=F(t,k);function F(ke,Ye){return function(He){var de=[],Tt=-1,ft=0,tt=ke.length,Vt,vn,er;for(He instanceof Date||(He=new Date(+He));++Tt<tt;)ke.charCodeAt(Tt)===37&&(de.push(ke.slice(ft,Tt)),(vn=Y3[Vt=ke.charAt(++Tt)])!=null?Vt=ke.charAt(++Tt):vn=Vt==="e"?" ":"0",(er=Ye[Vt])&&(Vt=er(He,vn)),de.push(Vt),ft=Tt+1);return de.push(ke.slice(ft,Tt)),de.join("")}}function T(ke,Ye){return function(He){var de=Ng(1900,void 0,1),Tt=P(de,ke,He+="",0),ft,tt;if(Tt!=He.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Ye&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(ft=lk(Ng(de.y,0,1)),tt=ft.getUTCDay(),ft=tt>4||tt===0?Rb.ceil(ft):Rb(ft),ft=Ju.offset(ft,(de.V-1)*7),de.y=ft.getUTCFullYear(),de.m=ft.getUTCMonth(),de.d=ft.getUTCDate()+(de.w+6)%7):(ft=sk(Ng(de.y,0,1)),tt=ft.getDay(),ft=tt>4||tt===0?kb.ceil(ft):kb(ft),ft=Al.offset(ft,(de.V-1)*7),de.y=ft.getFullYear(),de.m=ft.getMonth(),de.d=ft.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),tt="Z"in de?lk(Ng(de.y,0,1)).getUTCDay():sk(Ng(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(tt+5)%7:de.w+de.U*7-(tt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,lk(de)):sk(de)}}function P(ke,Ye,He,de){for(var Tt=0,ft=Ye.length,tt=He.length,Vt,vn;Tt<ft;){if(de>=tt)return-1;if(Vt=Ye.charCodeAt(Tt++),Vt===37){if(Vt=Ye.charAt(Tt++),vn=R[Vt in Y3?Ye.charAt(Tt++):Vt],!vn||(de=vn(ke,He,de))<0)return-1}else if(Vt!=He.charCodeAt(de++))return-1}return de}function B(ke,Ye,He){var de=u.exec(Ye.slice(He));return de?(ke.p=c.get(de[0].toLowerCase()),He+de[0].length):-1}function O(ke,Ye,He){var de=m.exec(Ye.slice(He));return de?(ke.w=g.get(de[0].toLowerCase()),He+de[0].length):-1}function D(ke,Ye,He){var de=d.exec(Ye.slice(He));return de?(ke.w=h.get(de[0].toLowerCase()),He+de[0].length):-1}function W(ke,Ye,He){var de=_.exec(Ye.slice(He));return de?(ke.m=b.get(de[0].toLowerCase()),He+de[0].length):-1}function j(ke,Ye,He){var de=y.exec(Ye.slice(He));return de?(ke.m=v.get(de[0].toLowerCase()),He+de[0].length):-1}function U(ke,Ye,He){return P(ke,t,Ye,He)}function G(ke,Ye,He){return P(ke,n,Ye,He)}function Z(ke,Ye,He){return P(ke,i,Ye,He)}function J(ke){return a[ke.getDay()]}function H(ke){return o[ke.getDay()]}function Q(ke){return l[ke.getMonth()]}function K(ke){return s[ke.getMonth()]}function ne(ke){return r[+(ke.getHours()>=12)]}function he(ke){return 1+~~(ke.getMonth()/3)}function $e(ke){return a[ke.getUTCDay()]}function Ee(ke){return o[ke.getUTCDay()]}function we(ke){return l[ke.getUTCMonth()]}function Ae(ke){return s[ke.getUTCMonth()]}function It(ke){return r[+(ke.getUTCHours()>=12)]}function Et(ke){return 1+~~(ke.getUTCMonth()/3)}return{format:function(ke){var Ye=F(ke+="",S);return Ye.toString=function(){return ke},Ye},parse:function(ke){var Ye=T(ke+="",!1);return Ye.toString=function(){return ke},Ye},utcFormat:function(ke){var Ye=F(ke+="",k);return Ye.toString=function(){return ke},Ye},utcParse:function(ke){var Ye=T(ke+="",!0);return Ye.toString=function(){return ke},Ye}}}var Y3={"-":"",_:" ",0:"0"},xi=/^\s*\d+/,_he=/^%/,bhe=/[\\^$*+?|[\]().{}]/g;function Ht(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function whe(e){return e.replace(bhe,"\\$&")}function Pg(e){return new RegExp("^(?:"+e.map(whe).join("|")+")","i")}function $g(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function She(e,t,n){var i=xi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Che(e,t,n){var i=xi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Ehe(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function khe(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Rhe(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Z3(e,t,n){var i=xi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function X3(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function The(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Ahe(e,t,n){var i=xi.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function Fhe(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function K3(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Mhe(e,t,n){var i=xi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function J3(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Nhe(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Phe(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function $he(e,t,n){var i=xi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Ohe(e,t,n){var i=xi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Ihe(e,t,n){var i=_he.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Lhe(e,t,n){var i=xi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Dhe(e,t,n){var i=xi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Q3(e,t){return Ht(e.getDate(),t,2)}function zhe(e,t){return Ht(e.getHours(),t,2)}function jhe(e,t){return Ht(e.getHours()%12||12,t,2)}function Bhe(e,t){return Ht(1+Al.count(ks(e),e),t,3)}function aq(e,t){return Ht(e.getMilliseconds(),t,3)}function Hhe(e,t){return aq(e,t)+"000"}function Uhe(e,t){return Ht(e.getMonth()+1,t,2)}function Whe(e,t){return Ht(e.getMinutes(),t,2)}function Ghe(e,t){return Ht(e.getSeconds(),t,2)}function qhe(e){var t=e.getDay();return t===0?7:t}function Vhe(e,t){return Ht(Rm.count(ks(e)-1,e),t,2)}function sq(e){var t=e.getDay();return t>=4||t===0?Ip(e):Ip.ceil(e)}function Yhe(e,t){return e=sq(e),Ht(Ip.count(ks(e),e)+(ks(e).getDay()===4),t,2)}function Zhe(e){return e.getDay()}function Xhe(e,t){return Ht(kb.count(ks(e)-1,e),t,2)}function Khe(e,t){return Ht(e.getFullYear()%100,t,2)}function Jhe(e,t){return e=sq(e),Ht(e.getFullYear()%100,t,2)}function Qhe(e,t){return Ht(e.getFullYear()%1e4,t,4)}function epe(e,t){var n=e.getDay();return e=n>=4||n===0?Ip(e):Ip.ceil(e),Ht(e.getFullYear()%1e4,t,4)}function tpe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ht(t/60|0,"0",2)+Ht(t%60,"0",2)}function e4(e,t){return Ht(e.getUTCDate(),t,2)}function npe(e,t){return Ht(e.getUTCHours(),t,2)}function ipe(e,t){return Ht(e.getUTCHours()%12||12,t,2)}function rpe(e,t){return Ht(1+Ju.count(Rs(e),e),t,3)}function lq(e,t){return Ht(e.getUTCMilliseconds(),t,3)}function ope(e,t){return lq(e,t)+"000"}function ape(e,t){return Ht(e.getUTCMonth()+1,t,2)}function spe(e,t){return Ht(e.getUTCMinutes(),t,2)}function lpe(e,t){return Ht(e.getUTCSeconds(),t,2)}function upe(e){var t=e.getUTCDay();return t===0?7:t}function cpe(e,t){return Ht(Tm.count(Rs(e)-1,e),t,2)}function uq(e){var t=e.getUTCDay();return t>=4||t===0?Lp(e):Lp.ceil(e)}function fpe(e,t){return e=uq(e),Ht(Lp.count(Rs(e),e)+(Rs(e).getUTCDay()===4),t,2)}function dpe(e){return e.getUTCDay()}function hpe(e,t){return Ht(Rb.count(Rs(e)-1,e),t,2)}function ppe(e,t){return Ht(e.getUTCFullYear()%100,t,2)}function mpe(e,t){return e=uq(e),Ht(e.getUTCFullYear()%100,t,2)}function gpe(e,t){return Ht(e.getUTCFullYear()%1e4,t,4)}function ype(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Lp(e):Lp.ceil(e),Ht(e.getUTCFullYear()%1e4,t,4)}function vpe(){return"+0000"}function t4(){return"%"}function n4(e){return+e}function i4(e){return Math.floor(+e/1e3)}var _h,ZN,cq,XN,fq;xpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xpe(e){return _h=oq(e),ZN=_h.format,cq=_h.parse,XN=_h.utcFormat,fq=_h.utcParse,_h}function m0(e){const t={};return n=>t[n]||(t[n]=e(n))}function _pe(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=bpe(i,r);const a=o<i.length?i.slice(o):"";for(;--o>r;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+a}}function bpe(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function dq(e){const t=m0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=od(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return _pe(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,o,a){a=od(a??",f");const s=lc(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=IG(s,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=LG(s,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=OG(s))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let iA;hq();function hq(){return iA=dq({format:j2,formatPrefix:WN})}function pq(e){return dq($G(e))}function Tb(e){return arguments.length?iA=pq(e):iA}function r4(e,t,n){n=n||{},Le(n)||le(`Invalid time multi-format specifier: ${n}`);const i=t(Zo),r=t(xo),o=t(vo),a=t(Vr),s=t(Jn),l=t(Yi),u=t(qr),c=t(Ti),d=e(n[Oa]||".%L"),h=e(n[Zo]||":%S"),m=e(n[xo]||"%I:%M"),g=e(n[vo]||"%I %p"),y=e(n[Vr]||n[Ui]||"%a %d"),v=e(n[Jn]||"%b %d"),_=e(n[Yi]||"%B"),b=e(n[qr]||"%B"),S=e(n[Ti]||"%Y");return k=>(i(k)<k?d:r(k)<k?h:o(k)<k?m:a(k)<k?g:l(k)<k?s(k)<k?y:v:c(k)<k?u(k)<k?_:b:S)(k)}function mq(e){const t=m0(e.format),n=m0(e.utcFormat);return{timeFormat:i=>Ie(i)?t(i):r4(t,Am,i),utcFormat:i=>Ie(i)?n(i):r4(n,Fm,i),timeParse:m0(e.parse),utcParse:m0(e.utcParse)}}let rA;gq();function gq(){return rA=mq({format:ZN,parse:cq,utcFormat:XN,utcParse:fq})}function yq(e){return mq(oq(e))}function Py(e){return arguments.length?rA=yq(e):rA}const oA=(e,t)=>xt({},e,t);function vq(e,t){const n=e?pq(e):Tb(),i=t?yq(t):Py();return oA(n,i)}function KN(e,t){const n=arguments.length;return n&&n!==2&&le("defaultLocale expects either zero or two arguments."),n?oA(Tb(e),Py(t)):oA(Tb(),Py())}function wpe(){return hq(),gq(),KN()}const Spe=/^(data:|([A-Za-z]+:)?\/\/)/,Cpe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Epe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,o4="file://";function kpe(e,t){return n=>({options:n||{},sanitize:Tpe,load:Rpe,fileAccess:!!t,file:Ape(t),http:Mpe(e)})}async function Rpe(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function Tpe(e,t){t=xt({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,a;const s=Cpe.test(e.replace(Epe,""));(e==null||typeof e!="string"||!s)&&le("Sanitize failure, invalid URI: "+be(e));const l=Spe.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(r=e.startsWith(o4))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(o4.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function Ape(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):Fpe}async function Fpe(){le("No file system access.")}function Mpe(e){return e?async function(t,n){const i=xt({},this.options.http,n),r=n&&n.response,o=await e(t,i);return o.ok?_t(o[r])?o[r]():o.text():le(o.status+""+o.statusText)}:Npe}async function Npe(){le("No HTTP fetch method available.")}const Ppe=e=>e!=null&&e===e,$pe=e=>e==="true"||e==="false"||e===!0||e===!1,Ope=e=>!Number.isNaN(Date.parse(e)),xq=e=>!Number.isNaN(+e)&&!(e instanceof Date),Ipe=e=>xq(e)&&Number.isInteger(+e),aA={boolean:jN,integer:Wi,number:Wi,date:BN,string:HN,unknown:Ji},px=[$pe,Ipe,xq,Ope],Lpe=["boolean","integer","number","date"];function _q(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=px.length,r=px.map((o,a)=>a+1);for(let o=0,a=0,s,l;o<n;++o)for(l=t?e[o][t]:e[o],s=0;s<i;++s)if(r[s]&&Ppe(l)&&!px[s](l)&&(r[s]=0,++a,a===px.length))return"string";return Lpe[r.reduce((o,a)=>o===0?a:o,0)-1]}function bq(e,t){return t.reduce((n,i)=>(n[i]=_q(e,i),n),{})}function a4(e){const t=function(n,i){const r={delimiter:e};return JN(n,i?xt(i,r):r)};return t.responseType="text",t}function JN(e,t){return t.header&&(e=t.header.map(be).join(t.delimiter)+`
`+e),yde(t.delimiter).parse(e+"")}JN.responseType="text";function Dpe(e){return typeof Buffer=="function"&&_t(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function QN(e,t){const n=t&&t.property?Vo(t.property):Ji;return Le(e)&&!Dpe(e)?zpe(n(e),t):n(JSON.parse(e))}QN.responseType="json";function zpe(e,t){return!fe(e)&&hG(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const jpe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function wq(e,t){let n,i,r,o;return e=QN(e,t),t&&t.feature?(n=bde,r=t.feature):t&&t.mesh?(n=Sde,r=t.mesh,o=jpe[t.filter]):le("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):le("Invalid TopoJSON object: "+r),i&&i.features||[i]}wq.responseType="json";const m_={dsv:JN,csv:a4(","),tsv:a4("	"),json:QN,topojson:wq};function eP(e,t){return arguments.length>1?(m_[e]=t,this):et(m_,e)?m_[e]:null}function Sq(e){const t=eP(e);return t&&t.responseType||"text"}function Cq(e,t,n,i){t=t||{};const r=eP(t.type||"json");return r||le("Unknown data format type: "+t.type),e=r(e,t),t.parse&&Bpe(e,t.parse,n,i),et(e,"columns")&&delete e.columns,e}function Bpe(e,t,n,i){if(!e.length)return;const r=Py();n=n||r.timeParse,i=i||r.utcParse;let o=e.columns||Object.keys(e[0]),a,s,l,u,c,d;t==="auto"&&(t=bq(e,o)),o=Object.keys(t);const h=o.map(m=>{const g=t[m];let y,v;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return y=g.split(/:(.+)?/,2),v=y[1],(v[0]==="'"&&v[v.length-1]==="'"||v[0]==='"'&&v[v.length-1]==='"')&&(v=v.slice(1,-1)),(y[0]==="utc"?i:n)(v);if(!aA[g])throw Error("Illegal format pattern: "+m+":"+g);return aA[g]});for(l=0,c=e.length,d=o.length;l<c;++l)for(a=e[l],u=0;u<d;++u)s=o[u],a[s]=h[u](a[s])}const q2=kpe(typeof fetch<"u"&&fetch,null);function V2(e){const t=e||Ji,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const a=n.indexOf(r);a>=0&&n.splice(a,1)}return n},n}async function g_(e,t){try{await t(e)}catch(n){e.error(n)}}const Eq=Symbol("vega_id");let Hpe=1;function Y2(e){return!!(e&&Je(e))}function Je(e){return e[Eq]}function kq(e,t){return e[Eq]=t,e}function qt(e){const t=e===Object(e)?e:{data:e};return Je(t)?t:kq(t,Hpe++)}function tP(e){return Z2(e,qt({}))}function Z2(e,t){for(const n in e)t[n]=e[n];return t}function Rq(e,t){return kq(t,Je(e))}function Id(e,t){return e?t?(n,i)=>e(n,i)||Je(t(n))-Je(t(i)):(n,i)=>e(n,i)||Je(n)-Je(i):null}function Tq(e){return e&&e.constructor===Ld}function Ld(){const e=[],t=[],n=[],i=[],r=[];let o=null,a=!1;return{constructor:Ld,insert(s){const l=Oe(s),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(s){const l=_t(s)?i:t,u=Oe(s),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(s,l,u){const c={field:l,value:Qi(u)};return _t(s)?(c.filter=s,r.push(c)):(c.tuple=s,n.push(c)),this},encode(s,l){return _t(s)?r.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,l){const u={},c={};let d,h,m,g,y,v;for(d=0,h=l.length;d<h;++d)u[Je(l[d])]=1;for(d=0,h=t.length;d<h;++d)y=t[d],u[Je(y)]=-1;for(d=0,h=i.length;d<h;++d)g=i[d],l.forEach(b=>{g(b)&&(u[Je(b)]=-1)});for(d=0,h=e.length;d<h;++d)y=e[d],v=Je(y),u[v]?u[v]=1:s.add.push(qt(e[d]));for(d=0,h=l.length;d<h;++d)y=l[d],u[Je(y)]<0&&s.rem.push(y);function _(b,S,k){k?b[S]=k(b):s.encode=S,a||(c[Je(b)]=b)}for(d=0,h=n.length;d<h;++d)m=n[d],y=m.tuple,g=m.field,v=u[Je(y)],v>0&&(_(y,g,m.value),s.modifies(g));for(d=0,h=r.length;d<h;++d)m=r[d],g=m.filter,l.forEach(b=>{g(b)&&u[Je(b)]>0&&_(b,m.field,m.value)}),s.modifies(m.field);if(a)s.mod=t.length||i.length?l.filter(b=>u[Je(b)]>0):l.slice();else for(v in c)s.mod.push(c[v]);return(o||o==null&&(t.length||i.length))&&s.clean(!0),s}}}const y_="_:mod:_";function X2(){Object.defineProperty(this,y_,{writable:!0,value:{}})}X2.prototype={set(e,t,n,i){const r=this,o=r[e],a=r[y_];return t!=null&&t>=0?(o[t]!==n||i)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||i)&&(r[e]=n,a[e]=fe(n)?1+n.length:-1),r},modified(e,t){const n=this[y_];if(arguments.length){if(fe(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[y_]={},this}};let Upe=0;const Wpe="pulse",Gpe=new X2,qpe=1,Vpe=2;function sn(e,t,n,i){this.id=++Upe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function s4(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}sn.prototype={targets(){return this._targets||(this._targets=V2(_v))},set(e){return this.value!==e?(this.value=e,1):0},skip:s4(qpe),modified:s4(Vpe),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new X2,r=this._argops=this._argops||[],o=[];let a,s,l,u;const c=(d,h,m)=>{m instanceof sn?(m!==this&&(t&&m.targets().add(this),o.push(m)),r.push({op:m,name:d,index:h})):i.set(d,h,m)};for(a in e)if(s=e[a],a===Wpe)Oe(s).forEach(d=>{d instanceof sn?d!==this&&(d.targets().add(this),o.push(d)):le("Pulse parameters must be operator instances.")}),this.source=s;else if(fe(s))for(i.set(a,-1,Array(l=s.length)),u=0;u<l;++u)c(a,u,s[u]);else c(a,-1,s);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||Gpe,n=this._argops;let i,r,o,a;if(n){const s=n.length;for(r=0;r<s;++r)i=n[r],o=i.op,a=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,a);if(n.initonly){for(r=0;r<s;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Ype(e,t,n,i){let r=1,o;return e instanceof sn?o=e:e&&e.prototype instanceof sn?o=new e:_t(e)?o=new sn(null,e):(r=0,o=new sn(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o}function Zpe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let Xpe=0;function K2(e,t,n){this.id=++Xpe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function gu(e,t,n){return new K2(e,t,n)}K2.prototype={_filter:Yo,_apply:Ji,targets(){return this._targets||(this._targets=V2(_v))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=gu(e);return this.targets().add(t),t},apply(e){const t=gu(null,e);return this.targets().add(t),t},merge(){const e=gu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=gu();return this.targets().add(gu(null,null,DN(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(gu(null,null,()=>n=!0)),t.targets().add(gu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Yo,this._targets=null}};function Kpe(e,t,n,i){const r=this,o=gu(n,i),a=function(u){u.dataflow=r;try{o.receive(u)}catch(c){r.error(c)}finally{r.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=Oe(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,a);return o}function Jpe(e,t){const n=this.locale();return Cq(e,t,n.timeParse,n.utcParse)}function Qpe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function eme(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:Sq(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}}async function tme(e,t,n){const i=this,r=i._pending||nme(i);r.requests+=1;const o=await i.request(t,n);return i.pulse(e,i.changeset().remove(Yo).insert(o.data||[])),r.done(),o}function nme(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const ime={skip:!0};function rme(e,t,n,i,r){return(e instanceof sn?ame:ome)(this,e,t,n,i,r),this}function ome(e,t,n,i,r,o){const a=xt({},o,ime);let s,l;_t(n)||(n=Qi(n)),i===void 0?s=u=>e.touch(n(u)):_t(i)?(l=new sn(null,i,r,!1),s=u=>{l.evaluate(u);const c=n(u),d=l.value;Tq(d)?e.pulse(c,d,o):e.update(c,d,a)}):s=u=>e.update(n(u),i,a),t.apply(s)}function ame(e,t,n,i,r,o){if(i===void 0)t.targets().add(n);else{const a=o||{},s=new sn(null,sme(n,i),r,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function sme(e,t){return t=_t(t)?t:Qi(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function lme(e){e.rank=++this._rank}function ume(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&le("Cycle detected in dataflow graph.")}const Ab={},as=1,Su=2,al=4,cme=as|Su,l4=as|al,bh=as|Su|al,u4=8,Og=16,c4=32,f4=64;function Qu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function uk(e,t){const n=[];return wu(e,t,i=>n.push(i)),n}function d4(e,t){const n={};return e.visit(t,i=>{n[Je(i)]=1}),i=>n[Je(i)]?null:i}function mx(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}Qu.prototype={StopPropagation:Ab,ADD:as,REM:Su,MOD:al,ADD_REM:cme,ADD_MOD:l4,ALL:bh,REFLOW:u4,SOURCE:Og,NO_SOURCE:c4,NO_FIELDS:f4,fork(e){return new Qu(this.dataflow).init(this,e)},clone(){const e=this.fork(bh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(bh|Og)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Qu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&f4)&&(n.fields=e.fields),t&as?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Su?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&al?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&c4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||bh;return t&as&&this.add.length||t&Su&&this.rem.length||t&al&&this.mod.length},reflow(e){if(e)return this.fork(bh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(al,d4(this,as))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?fe(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&as&&(n.addF=mx(n.addF,t)),e&Su&&(n.remF=mx(n.remF,t)),e&al&&(n.modF=mx(n.modF,t)),e&Og&&(n.srcF=mx(n.srcF,t)),n},materialize(e){e=e||bh;const t=this;return e&as&&t.addF&&(t.add=uk(t.add,t.addF),t.addF=null),e&Su&&t.remF&&(t.rem=uk(t.rem,t.remF),t.remF=null),e&al&&t.modF&&(t.mod=uk(t.mod,t.modF),t.modF=null),e&Og&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Og)return wu(n.source,n.srcF,i),n;e&as&&wu(n.add,n.addF,i),e&Su&&wu(n.rem,n.remF,i),e&al&&wu(n.mod,n.modF,i);const r=n.source;if(e&u4&&r){const o=n.add.length+n.mod.length;o===r.length||(o?wu(r,d4(n,l4),i):wu(r,n.srcF,i))}return n}};function nP(e,t,n,i){const r=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const s=r.fields||(r.fields={});for(const l in a.fields)s[l]=1}a.changed(r.ADD)&&(o|=r.ADD),a.changed(r.REM)&&(o|=r.REM),a.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}_e(nP,Qu,{fork(e){const t=new Qu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?fe(e)?e.some(i=>n[i]):n[e]:0},filter(){le("MultiPulse does not support filtering.")},materialize(){le("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});async function fme(e,t,n){const i=this,r=[];if(i._pulse)return Aq(i);if(i._pending&&await i._pending,t&&await g_(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new Qu(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=V2(_v);let a=0,s,l,u;try{for(;i._heap.size()>0;){if(s=i._heap.pop(),s.rank!==s.qrank){i._enqueue(s,!0);continue}l=s.run(i._getPulse(s,e)),l.then?l=await l:l.async&&(r.push(l.async),l=Ab),l!==Ab&&s._targets&&s._targets.forEach(c=>i._enqueue(c)),++a}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${a} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,h)=>h.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)await g_(i,c[d].callback)}return n&&await g_(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(h){i.error(h)}})})),i}async function dme(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function hme(e,t,n){return this._pulse?Aq(this):(this.evaluate(e,t,n),this)}function pme(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function Aq(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function mme(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function gme(e,t){const n=e.source,i=this._clock;return n&&fe(n)?new nP(this,i,n.map(r=>r.pulse),t):this._input[e.id]||yme(this._pulse,n&&n.pulse)}function yme(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Ab&&(e.source=t.source),e)}const iP={skip:!1,force:!1};function vme(e,t){const n=t||iP;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function xme(e,t,n){const i=n||iP;return(e.set(t)||i.force)&&this.touch(e,i),this}function _me(e,t,n){this.touch(e,n||iP);const i=new Qu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function bme(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Fq(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,wme(t,0,e)):i=n,i}}}function Fq(e,t,n,i){let r,o;const a=e[n];for(;n>t;){if(o=n-1>>1,r=e[o],i(a,r)<0){e[n]=r,n=o;continue}break}return e[n]=a}function wme(e,t,n){const i=t,r=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<r;)s=a+1,s<r&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,Fq(e,i,t,n)}function dp(){this.logger(PN()),this.logLevel(MN),this._clock=0,this._rank=0,this._locale=KN();try{this._loader=q2()}catch{}this._touched=V2(_v),this._input={},this._pulse=null,this._heap=bme((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Ig(e){return function(){return this._log[e].apply(this,arguments)}}dp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Ig("error"),warn:Ig("warn"),info:Ig("info"),debug:Ig("debug"),logLevel:Ig("level"),cleanThreshold:1e4,add:Ype,connect:Zpe,rank:lme,rerank:ume,pulse:_me,touch:vme,update:xme,changeset:Ld,ingest:Qpe,parse:Jpe,preload:tme,request:eme,events:Kpe,on:rme,evaluate:fme,run:hme,runAsync:dme,runAfter:pme,_enqueue:mme,_getPulse:gme};function ie(e,t){sn.call(this,e,null,t)}_e(ie,sn,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const zp={};function Mq(e){const t=Nq(e);return t&&t.Definition||null}function Nq(e){return e=e&&e.toLowerCase(),et(zp,e)?zp[e]:null}function*Pq(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function rP(e,t,n){const i=Float64Array.from(Pq(e,n));return i.sort(Tl),t.map(r=>AG(i,r))}function oP(e,t){return rP(e,[.25,.5,.75],t)}function aP(e,t){const n=e.length,i=Mde(e,t),r=oP(e,t),o=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function $q(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,l,u,c,d,h;const m=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(c=m/t,d=0,h=e.steps.length;d<h&&e.steps[d]<c;++d);s=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,s=Math.max(u,Math.pow(n,Math.round(Math.log(m)/i)-l));Math.ceil(m/s)>t;)s*=n;for(d=0,h=r.length;d<h;++d)c=s/r[d],c>=u&&m/c<=t&&(s=c)}c=Math.log(s);const g=c>=0?0:~~(-c/i)+1,y=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/s+y)*s,o=o<c?c-s:c,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Xo=Math.random;function Sme(e){Xo=e}function Oq(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(Pq(e,i)),o=r.length,a=t;let s,l,u,c;for(u=0,c=Array(a);u<a;++u){for(s=0,l=0;l<o;++l)s+=r[~~(Xo()*o)];c[u]=s/o}return c.sort(Tl),[KT(c,n/2),KT(c,1-n/2)]}function Iq(e,t,n,i){i=i||(h=>h);const r=e.length,o=new Float64Array(r);let a=0,s=1,l=i(e[0]),u=l,c=l+t,d;for(;s<r;++s){if(d=i(e[s]),d>=c){for(u=(l+u)/2;a<s;++a)o[a]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;a<s;++a)o[a]=u;return n?Cme(o,t+t/4):o}function Cme(e,t){const n=e.length;let i=0,r=1,o,a;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(a=r+(i+o-r-r>>1);a<r;)e[a++]=e[r];for(;a>r;)e[a--]=e[i]}i=r,r=o}return e}function Eme(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function kme(e,t){t==null&&(t=e,e=0);let n,i,r;const o={min(a){return arguments.length?(n=a||0,r=i-n,o):n},max(a){return arguments.length?(i=a||0,r=i-n,o):i},sample(){return n+Math.floor(r*Xo())},pdf(a){return a===Math.floor(a)&&a>=n&&a<i?1/r:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=i?1:(s-n+1)/r},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*r):NaN}};return o.min(e).max(t)}const Lq=Math.sqrt(2*Math.PI),Rme=Math.SQRT2;let Lg=NaN;function J2(e,t){e=e||0,t=t??1;let n=0,i=0,r,o;if(Lg===Lg)n=Lg,Lg=NaN;else{do n=Xo()*2-1,i=Xo()*2-1,r=n*n+i*i;while(r===0||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,Lg=i*o}return e+n*t}function sP(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*Lq)}function Q2(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let o;if(r>37)o=0;else{const a=Math.exp(-r*r/2);let s;r<7.07106781186547?(s=.0352624965998911*r+.700383064443688,s=s*r+6.37396220353165,s=s*r+33.912866078383,s=s*r+112.079291497871,s=s*r+221.213596169931,s=s*r+220.206867912376,o=a*s,s=.0883883476483184*r+1.75566716318264,s=s*r+16.064177579207,s=s*r+86.7807322029461,s=s*r+296.564248779674,s=s*r+637.333633378831,s=s*r+793.826512519948,s=s*r+440.413735824752,o=o/s):(s=r+.65,s=r+4/s,s=r+3/s,s=r+2/s,s=r+1/s,o=a/s/2.506628274631)}return i>0?1-o:o}function eS(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Rme*Tme(2*e-1)}function Tme(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function lP(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>J2(n,i),pdf:o=>sP(o,n,i),cdf:o=>Q2(o,n,i),icdf:o=>eS(o,n,i)};return r.mean(e).stdev(t)}function uP(e,t){const n=lP();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=aP(e)),r):t},sample(){return e[~~(Xo()*i)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<i;++s)a+=n.pdf((o-e[s])/t);return a/t/i},cdf(o){let a=0,s=0;for(;s<i;++s)a+=n.cdf((o-e[s])/t);return a/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function cP(e,t){return e=e||0,t=t??1,Math.exp(e+J2()*t)}function fP(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*Lq*e)}function dP(e,t,n){return Q2(Math.log(e),t,n)}function hP(e,t,n){return Math.exp(eS(e,t,n))}function Dq(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>cP(n,i),pdf:o=>fP(o,n,i),cdf:o=>dP(o,n,i),icdf:o=>hP(o,n,i)};return r.mean(e).stdev(t)}function zq(e,t){let n=0,i;function r(a){const s=[];let l=0,u;for(u=0;u<n;++u)l+=s[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)s[u]/=l;return s}const o={weights(a){return arguments.length?(i=r(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=Xo();let s=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(a<l){s=e[u];break}return s.sample()},pdf(a){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].pdf(a);return s},cdf(a){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function pP(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Xo()}function mP(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function gP(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function yP(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function jq(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=o??1,r):i},sample:()=>pP(n,i),pdf:o=>mP(o,n,i),cdf:o=>gP(o,n,i),icdf:o=>yP(o,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function vP(e,t,n){let i=0,r=0;for(const o of e){const a=n(o);t(o)==null||a==null||isNaN(a)||(i+=(a-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function wv(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function tS(e,t,n,i){e=e.filter(m=>{let g=t(m),y=n(m);return g!=null&&(g=+g)>=g&&y!=null&&(y=+y)>=y}),i&&e.sort((m,g)=>t(m)-t(g));const r=e.length,o=new Float64Array(r),a=new Float64Array(r);let s=0,l=0,u=0,c,d,h;for(h of e)o[s]=c=+t(h),a[s]=d=+n(h),++s,l+=(c-l)/s,u+=(d-u)/s;for(s=0;s<r;++s)o[s]-=l,a[s]-=u;return[o,a,l,u]}function Sv(e,t,n,i){let r=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&i(o,a,++r)}function Mm(e,t,n,i,r){let o=0,a=0;return Sv(e,t,n,(s,l)=>{const u=l-r(s),c=l-i;o+=u*u,a+=c*c}),1-o/a}function xP(e,t,n){let i=0,r=0,o=0,a=0,s=0;Sv(e,t,n,(c,d)=>{++s,i+=(c-i)/s,r+=(d-r)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=wv(i,r,o,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Mm(e,t,n,r,u)}}function Bq(e,t,n){let i=0,r=0,o=0,a=0,s=0;Sv(e,t,n,(c,d)=>{++s,c=Math.log(c),i+=(c-i)/s,r+=(d-r)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=wv(i,r,o,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Mm(e,t,n,r,u)}}function Hq(e,t,n){const[i,r,o,a]=tS(e,t,n);let s=0,l=0,u=0,c=0,d=0,h,m,g;Sv(e,t,n,(b,S)=>{h=i[d++],m=Math.log(S),g=h*S,s+=(S*m-s)/d,l+=(g-l)/d,u+=(g*m-u)/d,c+=(h*g-c)/d});const[y,v]=wv(l/a,s/a,u/a,c/a),_=b=>Math.exp(y+v*(b-o));return{coef:[Math.exp(y-v*o),v],predict:_,rSquared:Mm(e,t,n,a,_)}}function Uq(e,t,n){let i=0,r=0,o=0,a=0,s=0,l=0;Sv(e,t,n,(d,h)=>{const m=Math.log(d),g=Math.log(h);++l,i+=(m-i)/l,r+=(g-r)/l,o+=(m*g-o)/l,a+=(m*m-a)/l,s+=(h-s)/l});const u=wv(i,r,o,a),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Mm(e,t,n,s,c)}}function _P(e,t,n){const[i,r,o,a]=tS(e,t,n),s=i.length;let l=0,u=0,c=0,d=0,h=0,m,g,y,v;for(m=0;m<s;)g=i[m],y=r[m++],v=g*g,l+=(v-l)/m,u+=(v*g-u)/m,c+=(v*v-c)/m,d+=(g*y-d)/m,h+=(v*y-h)/m;const _=c-l*l,b=l*_-u*u,S=(h*l-d*u)/b,k=(d*_-h*u)/b,R=-S*l,F=T=>(T=T-o,S*T*T+k*T+R+a);return{coef:[R-k*o+S*o*o+a,k-2*S*o,S],predict:F,rSquared:Mm(e,t,n,a,F)}}function Wq(e,t,n,i){if(i===0)return vP(e,t,n);if(i===1)return xP(e,t,n);if(i===2)return _P(e,t,n);const[r,o,a,s]=tS(e,t,n),l=r.length,u=[],c=[],d=i+1;let h,m,g,y,v;for(h=0;h<d;++h){for(g=0,y=0;g<l;++g)y+=Math.pow(r[g],h)*o[g];for(u.push(y),v=new Float64Array(d),m=0;m<d;++m){for(g=0,y=0;g<l;++g)y+=Math.pow(r[g],h+m);v[m]=y}c.push(v)}c.push(u);const _=Fme(c),b=S=>{S-=a;let k=s+_[0]+_[1]*S+_[2]*S*S;for(h=3;h<d;++h)k+=_[h]*Math.pow(S,h);return k};return{coef:Ame(d,_,-a,s),predict:b,rSquared:Mm(e,t,n,s,b)}}function Ame(e,t,n,i){const r=Array(e);let o,a,s,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],l=1,r[o]+=s,a=1;a<=o;++a)l*=(o+1-a)/a,r[o-a]+=s*Math.pow(n,a)*l;return r[0]+=i,r}function Fme(e){const t=e.length-1,n=[];let i,r,o,a,s;for(i=0;i<t;++i){for(a=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][a])&&(a=r);for(o=i;o<t+1;++o)s=e[o][i],e[o][i]=e[o][a],e[o][a]=s;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(s=0,o=r+1;o<t;++o)s+=e[o][r]*n[o];n[r]=(e[t][r]-s)/e[r][r]}return n}const h4=2,p4=1e-12;function Gq(e,t,n,i){const[r,o,a,s]=tS(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),h=new Float64Array(l).fill(1);for(let m=-1;++m<=h4;){const g=[0,u-1];for(let v=0;v<l;++v){const _=r[v],b=g[0],S=g[1],k=_-r[b]>r[S]-_?b:S;let R=0,F=0,T=0,P=0,B=0;const O=1/Math.abs(r[k]-_||1);for(let j=b;j<=S;++j){const U=r[j],G=o[j],Z=Mme(Math.abs(_-U)*O)*h[j],J=U*Z;R+=Z,F+=J,T+=G*Z,P+=G*J,B+=U*J}const[D,W]=wv(F/R,T/R,P/R,B/R);c[v]=D+W*_,d[v]=Math.abs(o[v]-c[v]),Nme(r,v+1,g)}if(m===h4)break;const y=FG(d);if(Math.abs(y)<p4)break;for(let v=0,_,b;v<l;++v)_=d[v]/(6*y),h[v]=_>=1?p4:(b=1-_*_)*b}return Pme(r,c,a,s)}function Mme(e){return(e=1-e*e*e)*e*e}function Nme(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}function Pme(e,t,n,i){const r=e.length,o=[];let a=0,s=0,l=[],u;for(;a<r;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++s:(s=0,l[1]+=i,l=[u,t[a]],o.push(l));return l[1]+=i,o}const $me=.5*Math.PI/180;function nS(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=y=>[y,e(y)],o=t[0],a=t[1],s=a-o,l=s/i,u=[r(o)],c=[];if(n===i){for(let y=1;y<i;++y)u.push(r(o+y/n*s));return u.push(r(a)),u}else{c.push(r(a));for(let y=n;--y>0;)c.push(r(o+y/n*s))}let d=u[0],h=c[c.length-1];const m=1/s,g=Ome(d[1],c);for(;h;){const y=r((d[0]+h[0])/2);y[0]-d[0]>=l&&Ime(d,y,h,m,g)>$me?c.push(y):(d=h,u.push(h),c.pop()),h=c[c.length-1]}return u}function Ome(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const a=t[o][1];a<n&&(n=a),a>i&&(i=a)}return 1/(i-n)}function Ime(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),a=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-a)}function Lme(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function sA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Lme(e)}function qq(e,t,n){return n||e+(t?"_"+t:"")}const ck=()=>{},Dme={init:ck,add:ck,rem:ck,idx:0},$y={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Cv=Object.keys($y).filter(e=>e!=="__count__");function zme(e,t){return(n,i)=>xt({name:e,aggregate_param:i,out:n||e},Dme,t)}[...Cv,"__count__"].forEach(e=>{$y[e]=zme(e,$y[e])});function Vq(e,t,n){return $y[e](n,t)}function Yq(e,t){return e.idx-t.idx}function jme(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=$y[r]())})};return e.forEach(n),Object.values(t).sort(Yq)}function Bme(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Hme(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Ume(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Wme(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Zq(e,t){const n=t||Ji,i=jme(e),r=e.slice().sort(Yq);function o(a){this._ops=i,this._out=r,this.cell=a,this.init()}return o.prototype.init=Bme,o.prototype.add=Hme,o.prototype.rem=Ume,o.prototype.set=Wme,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function bP(e){this._key=e?Vo(e):Je,this.reset()}const Ni=bP.prototype;Ni.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ni.add=function(e){this._add.push(e)};Ni.rem=function(e){this._rem.push(e)};Ni.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),a={};let s,l,u;for(s=0;s<r;++s)a[n(t[s])]=1;for(s=0,l=0;s<i;++s)a[n(u=e[s])]?a[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Ni.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,o;for(;--i>=0;)o=e(t[i])+"",et(n,o)||(n[o]=1,++r);return r};Ni.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=fG(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ni.argmin=function(e){return this.extent(e)[0]||{}};Ni.argmax=function(e){return this.extent(e)[1]||{}};Ni.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ni.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ni.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=oP(this.values(),e),this._get=e),this._q};Ni.q1=function(e){return this.quartile(e)[0]};Ni.q2=function(e){return this.quartile(e)[1]};Ni.q3=function(e){return this.quartile(e)[2]};Ni.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Oq(this.values(),1e3,.05,e),this._get=e),this._ci};Ni.ci0=function(e){return this.ci(e)[0]};Ni.ci1=function(e){return this.ci(e)[1]};function uc(e){ie.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}uc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Cv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};_e(uc,ie,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(s){let l,u,c,d;for(l in s)for(c=s[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}o(e._prev),o(t);function a(s,l,u){const c=n[u],d=i[u++];for(const h in d){const m=s?s+"|"+h:h;l[c]=d[h],u<r?a(m,l,u):t[m]||e.cell(m,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(b){const S=Oe(Vi(b)),k=S.length;let R=0,F;for(;R<k;++R)i[F=S[R]]||(i[F]=1,t.push(F))}this._dims=Oe(e.groupby),this._dnames=this._dims.map(b=>{const S=In(b);return r(b),n.push(S),S}),this.cellkey=e.key?e.key:sA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let d,h,m,g,y,v,_;for(u!==a.length&&le("Unmatched number of fields and aggregate ops."),_=0;_<u;++_){if(d=o[_],h=a[_],m=s[_]||null,d==null&&h!=="count"&&le("Null aggregate field specified."),y=In(d),v=qq(h,y,l[_]),n.push(v),h==="count"){this._counts.push(v);continue}g=c[y],g||(r(d),g=c[y]=[],g.field=d,this._measures.push(g)),h!=="count"&&(this._countOnly=!1),g.push(Vq(h,m,v))}return this._measures=this._measures.map(b=>Zq(b,b.field)),Object.create(null)},cellkey:sA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new bP),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let a=0;a<r;++a)o[n[a]]=i[a](e);return t?Rq(t.tuple,o):qt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,a=e.rem,s=e.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&a.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&r?a:s).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Gme=1e-14;function wP(e){ie.call(this,null,e)}wP.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};_e(wP,ie,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,o=i.step,a=e.as||["bin0","bin1"],s=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Vi(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=i(c);c[s]=d,c[l]=d==null?null:r+o*(1+(d-r)/o)}:c=>c[s]=i(c)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=$q(e),i=n.step;let r=n.start,o=r+Math.ceil((n.stop-r)/i)*i,a,s;(a=e.anchor)!=null&&(s=a-(r+i*Math.floor((a-r)/i)),r+=s,o+=s);const l=function(u){let c=Wi(t(u));return c==null?null:c<r?-1/0:c>o?1/0:(c=Math.max(r,Math.min(c,o-i)),r+i*Math.floor(Gme+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Jr(l,Vi(t),e.name||"bin_"+In(t))}});function Xq(e,t,n){const i=e;let r=t||[],o=n||[],a={},s=0;return{add:l=>o.push(l),remove:l=>a[i(l)]=++s,size:()=>r.length,data:(l,u)=>(s&&(r=r.filter(c=>!a[i(c)]),a={},s=0),u&&l&&r.sort(l),o.length&&(r=l?yG(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function SP(e){ie.call(this,[],e)}SP.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};_e(SP,ie,{transform(e,t){const n=t.fork(t.ALL),i=Xq(Je,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Id(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Kq(e){sn.call(this,null,qme,e)}_e(Kq,sn);function qme(e){return this.value&&!e.modified()?this.value:LN(e.fields,e.orders)}function CP(e){ie.call(this,null,e)}CP.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Vme(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}_e(CP,ie,{transform(e,t){const n=d=>h=>{for(var m=Vme(s(h),e.case,o)||[],g,y=0,v=m.length;y<v;++y)a.test(g=m[y])||d(g)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=i[s],u=n[s]||0,!l&&u?(i[s]=l=qt({}),l[r]=s,l[o]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[s]=null,i[s]=null):l[o]!==u&&(l[o]=u,a.mod.push(l));return a.modifies(t)}});function EP(e){ie.call(this,null,e)}EP.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};_e(EP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=Yme(s,r,o,e.filter||Yo)):n.mod=s,n.source=this.value,n.modifies(i)}});function Yme(e,t,n,i){for(var r=[],o={},a=e.length,s=0,l,u;s<a;++s)for(o[t]=u=e[s],l=0;l<a;++l)o[n]=e[l],i(o)&&(r.push(qt(o)),o={},o[t]=u);return r}const m4={kde:uP,mixture:zq,normal:lP,lognormal:Dq,uniform:jq},Zme="distributions",g4="function",Xme="field";function Jq(e,t){const n=e[g4];et(m4,n)||le("Unknown distribution function: "+n);const i=m4[n]();for(const r in e)r===Xme?i.data((e.from||t()).map(e[r])):r===Zme?i[r](e[r].map(o=>Jq(o,t))):typeof i[r]===g4&&i[r](e[r]);return i}function kP(e){ie.call(this,null,e)}const Qq=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Kme={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Qq},{name:"weights",type:"number",array:!0}]};kP.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Qq.concat(Kme)},{name:"as",type:"string",array:!0,default:["value","density"]}]};_e(kP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=Jq(e.distribution,Jme(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&le("Invalid density method: "+a),!e.extent&&!i.data&&le("Missing density extent parameter."),a=i[a];const s=e.as||["value","density"],l=e.extent||Es(i.data()),u=nS(a,l,r,o).map(c=>{const d={};return d[s[0]]=c[0],d[s[1]]=c[1],qt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Jme(e){return()=>e.materialize(e.SOURCE).source}function eV(e,t){return e?e.map((n,i)=>t[i]||In(n)):null}function RP(e,t,n){const i=[],r=d=>d(l);let o,a,s,l,u,c;if(t==null)i.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)l=e[a],u=t.map(r),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}const tV="bin";function TP(e){ie.call(this,null,e)}TP.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:tV}]};const Qme=(e,t)=>bv(Es(e,t))/30;_e(TP,ie,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=RP(t.source,e.groupby,Ji),r=e.smooth||!1,o=e.field,a=e.step||Qme(n,o),s=Id((g,y)=>o(g)-o(y)),l=e.as||tV,u=i.length;let c=1/0,d=-1/0,h=0,m;for(;h<u;++h){const g=i[h].sort(s);m=-1;for(const y of Iq(g,a,r,o))y<c&&(c=y),y>d&&(d=y),g[++m][l]=y}return this.value={start:c,stop:d,step:a},t.reflow(!0).modifies(l)}});function nV(e){sn.call(this,null,ege,e),this.modified(!0)}_e(nV,sn);function ege(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Jr(n=>t(n,e),Vi(t),In(t))}function AP(e){ie.call(this,[void 0,void 0],e)}AP.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};_e(AP,ie,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],a=n[1];if((r||o==null)&&(o=1/0,a=-1/0),t.visit(r?t.SOURCE:t.ADD,s=>{const l=Wi(i(s));l!=null&&(l<o&&(o=l),l>a&&(a=l))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=In(i);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function FP(e,t){sn.call(this,e),this.parent=t,this.count=0}_e(FP,sn,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function iS(e){ie.call(this,{},e),this._keys=Em();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}_e(iS,ie,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let o=et(r,e)&&r[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=i||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new FP(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,a=e.modified("key"),s=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Je(l),c=o.get(u);c!==void 0&&(o.delete(u),s(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);o.set(Je(l),u),s(u).add(l)}),a||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=Je(l),c=o.get(u),d=i(l);c===d?s(d).mod(l):(o.set(u,d),s(c).rem(l),s(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{s(o.get(Je(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=Je(l),c=o.get(u),d=i(l);c!==d&&(o.set(u,d),s(c).rem(l),s(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function iV(e){sn.call(this,null,tge,e)}_e(iV,sn);function tge(e){return this.value&&!e.modified()?this.value:fe(e.name)?Oe(e.name).map(t=>Vo(t)):Vo(e.name,e.as)}function MP(e){ie.call(this,Em(),e)}MP.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};_e(MP,ie,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,a=r.rem,s=r.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const h=Je(d);i.has(h)?i.delete(h):a.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(Je(d),1)});function c(d){const h=Je(d),m=l(d,e),g=i.get(h);m&&g?(i.delete(h),o.push(d)):!m&&!g?(i.set(h,1),a.push(d)):u&&m&&!g&&s.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function NP(e){ie.call(this,[],e)}NP.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};_e(NP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=eV(i,e.as||[]),o=e.index||null,a=r.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const l=i.map(g=>g(s)),u=l.reduce((g,y)=>Math.max(g,y.length),0);let c=0,d,h,m;for(;c<u;++c){for(h=tP(s),d=0;d<a;++d)h[r[d]]=(m=l[d][c])==null?null:m;o&&(h[o]=c),n.add.push(h)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}});function PP(e){ie.call(this,[],e)}PP.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};_e(PP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(In),o=e.as||["key","value"],a=o[0],s=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=tP(u),d[a]=r[c],d[s]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}});function $P(e){ie.call(this,null,e)}$P.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};_e($P,ie,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,a=>a[i]=n(a,e))}});function rV(e){ie.call(this,[],e)}_e(rV,ie,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,o=e.size-r.length,a,s,l;if(o>0){for(a=[];--o>=0;)a.push(l=qt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,r=r.slice(-o);return n.source=this.value=r,n}});const gx={value:"value",median:FG,mean:Lde,min:XT,max:Hf},nge=[];function OP(e){ie.call(this,[],e)}OP.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ige(e){var t=e.method||gx.value,n;if(gx[t]==null)le("Unrecognized imputation method: "+t);else return t===gx.value?(n=e.value!==void 0?e.value:0,()=>n):gx[t]}function rge(e){const t=e.field;return n=>n?t(n):NaN}_e(OP,ie,{transform(e,t){var n=t.fork(t.ALL),i=ige(e),r=rge(e),o=In(e.field),a=In(e.key),s=(e.groupby||[]).map(In),l=oge(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,h,m,g,y,v,_,b,S,k,R;for(v=0,S=l.length;v<S;++v)for(h=l[v],g=h.values,m=NaN,b=0;b<d;++b)if(h[b]==null){for(y=l.domain[b],R={_impute:!0},_=0,k=g.length;_<k;++_)R[s[_]]=g[_];R[a]=y,R[o]=Number.isNaN(m)?m=i(h,r):m,u.push(qt(R))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function oge(e,t,n,i){var r=_=>_(v),o=[],a=i?i.slice():[],s={},l={},u,c,d,h,m,g,y,v;for(a.forEach((_,b)=>s[_]=b+1),h=0,y=e.length;h<y;++h)v=e[h],g=n(v),m=s[g]||(s[g]=a.push(g)),c=(u=t?t.map(r):nge)+"",(d=l[c])||(d=l[c]=[],o.push(d),d.values=u),d[m-1]=v;return o.domain=a,o}function IP(e){uc.call(this,e)}IP.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Cv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};_e(IP,uc,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{xt(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function LP(e){ie.call(this,null,e)}LP.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};_e(LP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=RP(i,e.groupby,e.field),o=(e.groupby||[]).map(In),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&le("Invalid density method: "+s),e.resolve==="shared"&&(c||(c=Es(i,e.field)),d=h=e.steps||h),r.forEach(m=>{const g=uP(m,a)[s],y=e.counts?m.length:1,v=c||Es(m);nS(g,v,d,h).forEach(_=>{const b={};for(let S=0;S<o.length;++S)b[o[S]]=m.dims[S];b[l[0]]=_[0],b[l[1]]=_[1]*y,u.push(qt(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function oV(e){sn.call(this,null,age,e)}_e(oV,sn);function age(e){return this.value&&!e.modified()?this.value:zN(e.fields,e.flat)}function aV(e){ie.call(this,[],e),this._pending=null}_e(aV,ie,{transform(e,t){const n=t.dataflow;return this._pending?fk(this,t,this._pending):sge(e)?t.StopPropagation:e.values?fk(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Oe(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>fk(this,t,Oe(i.data)))}});function sge(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function fk(e,t,n){n.forEach(qt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function DP(e){ie.call(this,{},e)}DP.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};_e(DP,ie,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let l=a?t.SOURCE:t.ADD,u=t,c=e.as,d,h,m;return r?(h=r.length,s>1&&!c&&le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==s*h&&le('The "as" parameter has too few output field names.'),c=c||r.map(In),d=function(g){for(var y=0,v=0,_,b;y<s;++y)if(b=i.get(n[y](g)),b==null)for(_=0;_<h;++_,++v)g[c[v]]=o;else for(_=0;_<h;++_,++v)g[c[v]]=r[_](b)}):(c||le("Missing output field names."),d=function(g){for(var y=0,v;y<s;++y)v=i.get(n[y](g)),g[c[y]]=v??o}),a?u=t.reflow(!0):(m=n.some(g=>t.modified(g.fields)),l|=m?t.MOD:0),t.visit(l,d),u.modifies(c)}});function sV(e){sn.call(this,null,lge,e)}_e(sV,sn);function lge(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<i&&(i=a[0]),a[1]>r&&(r=a[1]);return[i,r]}function lV(e){sn.call(this,null,uge,e)}_e(lV,sn);function uge(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function uV(e){ie.call(this,null,e)}_e(uV,ie,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function zP(e){uc.call(this,e)}zP.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Cv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};_e(zP,uc,{_transform:uc.prototype.transform,transform(e,t){return this._transform(cge(e,t),t)}});function cge(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",o=Vi(n).concat(Vi(i)),a=dge(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>r),fields:a.map(s=>fge(s,n,i,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function fge(e,t,n,i){return Jr(r=>t(r)===e?n(r):NaN,i,e+"")}function dge(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const a=e(o);i[a]||(i[a]=1,r.push(a))}),r.sort(z2),t?r.slice(0,t):r}function cV(e){iS.call(this,e)}_e(cV,iS,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(Je(o),n,t,o);return(e.modified("field")||i&&t.modified(Vi(i)))&&le("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const a=r(o);i(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=r(o);i(o).forEach(s=>a.add(qt(s)))}),t.visit(t.REM,o=>{const a=r(o);i(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function jP(e){ie.call(this,null,e)}jP.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};_e(jP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=eV(e.fields,e.as||[]),o=i?(s,l)=>hge(s,l,i,r):Z2;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const l=Je(s);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,s=>{const l=o(s,qt({}));a[Je(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Je(s)]))}),n}});function hge(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}function fV(e){ie.call(this,null,e)}_e(fV,ie,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function BP(e){ie.call(this,null,e)}BP.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const pge=1e-14;_e(BP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,o=RP(r,e.groupby,e.field),a=(e.groupby||[]).map(In),s=[],l=e.step||.01,u=e.probs||co(l/2,1-pge,l),c=u.length;return o.forEach(d=>{const h=rP(d,u);for(let m=0;m<c;++m){const g={};for(let y=0;y<a.length;++y)g[a[y]]=d.dims[y];g[i[0]]=u[m],g[i[1]]=h[m],s.push(qt(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function dV(e){ie.call(this,null,e)}_e(dV,ie,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=Je(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=tP(r);i[Je(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[Je(r)];for(const a in r)o[a]=r[a],n.modifies(a);n.mod.push(o)})),n}});function HP(e){ie.call(this,[],e),this.count=0}HP.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};_e(HP,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((c,d)=>(c[Je(d)]=1,c),{});let a=this.value,s=this.count,l=0;function u(c){let d,h;a.length<r?a.push(c):(h=~~((s+1)*Xo()),h<a.length&&h>=l&&(d=a[h],o[Je(d)]&&n.rem.push(d),a[h]=c)),++s}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Je(c);o[d]&&(o[d]=-1,n.rem.push(c)),--s}),a=a.filter(c=>o[Je(c)]!==-1)),(t.rem.length||i)&&a.length<r&&t.source&&(l=s=a.length,t.visit(t.SOURCE,c=>{o[Je(c)]||u(c)}),l=-1),i&&a.length>r){const c=a.length-r;for(let d=0;d<c;++d)o[Je(a[d])]=-1,n.rem.push(a[d]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Je(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(c=>!o[Je(c)])),this.count=s,this.value=n.source=a,n}});function UP(e){ie.call(this,null,e)}UP.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};_e(UP,ie,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=co(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,qt(o)}),n.add=t.add.concat(this.value),n}});function hV(e){ie.call(this,null,e),this.modified(!0)}_e(hV,ie,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function WP(e){ie.call(this,null,e)}const pV=["unit0","unit1"];WP.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:qN,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:pV}]};_e(WP,ie,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",o=this._floor(e,t),a=(r?Fm:Am)(o.unit).offset,s=e.as||pV,l=s[0],u=s[1],c=o.step;let d=o.start||1/0,h=o.stop||-1/0,m=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Vi(n)))&&(t=t.reflow(!0),m=t.SOURCE,d=1/0,h=-1/0),t.visit(m,g=>{const y=n(g);let v,_;y==null?(g[l]=null,i&&(g[u]=null)):(g[l]=v=_=o(y),i&&(g[u]=_=a(v,c)),v<d&&(d=v),_>h&&(h=_))}),o.start=d,o.stop=h,t.modifies(i?s:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:rq({extent:e.extent||Es(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=VN(i),a=this.value||{},s=(n?ZG:YG)(o,r);return s.unit=Ot(o),s.units=o,s.step=r,s.start=a.start,s.stop=a.stop,this.value=s}});function mV(e){ie.call(this,Em(),e)}_e(mV,ie,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=s=>r.set(i(s),s);let a=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>r.delete(i(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function gV(e){ie.call(this,null,e)}_e(gV,ie,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Id(e.sort)):t.source).map(e.field))}});function mge(e,t,n,i){const r=Oy[e](t,n);return{init:r.init||Au,update:function(o,a){a[i]=r.next(o)}}}const Oy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Oy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||le("ntile num must be greater than zero.");const n=Oy.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||le("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=gge(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function gge(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const yge=Object.keys(Oy);function yV(e){const t=Oe(e.ops),n=Oe(e.fields),i=Oe(e.params),r=Oe(e.aggregate_params),o=Oe(e.as),a=this.outputs=[],s=this.windows=[],l={},u={},c=[],d=[];let h=!0;function m(g){Oe(Vi(g)).forEach(y=>l[y]=1)}m(e.sort),t.forEach((g,y)=>{const v=n[y],_=i[y],b=r[y]||null,S=In(v),k=qq(g,S,o[y]);if(m(v),a.push(k),et(Oy,g))s.push(mge(g,v,_,k));else{if(v==null&&g!=="count"&&le("Null aggregate field specified."),g==="count"){c.push(k);return}h=!1;let R=u[S];R||(R=u[S]=[],R.field=v,d.push(R)),R.push(Vq(g,b,k))}}),(c.length||d.length)&&(this.cell=vge(d,c,h)),this.inputs=Object.keys(l)}const vV=yV.prototype;vV.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};vV.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(r[a]);for(a=e.p1;a<e.i1;++a)n.add(r[a]);n.set(t)}for(a=0;a<o;++a)i[a].update(e,t)};function vge(e,t,n){e=e.map(l=>Zq(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),a=0;a<r;++a)o[a]=new e[a](i);if(i.store)var s=i.data=new bP;return i.add=function(l){if(i.num+=1,!n){s&&s.add(l);for(let u=0;u<r;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){s&&s.rem(l);for(let u=0;u<r;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(s&&s.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,s&&s.reset();for(let l=0;l<r;++l)o[l].init()},i}function GP(e){ie.call(this,{},e),this._mlen=0,this._mods=[]}GP.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:yge.concat(Cv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};_e(GP,ie,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Id(e.sort),r=sA(e.groupby),o=s=>this.group(r(s));let a=this.state;(!a||n)&&(a=this.state=new yV(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)xge(this._mods[s],a,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Xq(Je),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function xge(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,a=i.frame||[null,0],s=e.data(n),l=s.length,u=o?km(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:r||Qi(-1)};t.init();for(let d=0;d<l;++d)_ge(c,a,d,l),o&&bge(c,u),t.update(c,s[d])}function _ge(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function bge(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,a=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<a&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}const wge=Object.freeze(Object.defineProperty({__proto__:null,aggregate:uc,bin:wP,collect:SP,compare:Kq,countpattern:CP,cross:EP,density:kP,dotbin:TP,expression:nV,extent:AP,facet:iS,field:iV,filter:MP,flatten:NP,fold:PP,formula:$P,generate:rV,impute:OP,joinaggregate:IP,kde:LP,key:oV,load:aV,lookup:DP,multiextent:sV,multivalues:lV,params:uV,pivot:zP,prefacet:cV,project:jP,proxy:fV,quantile:BP,relay:dV,sample:HP,sequence:UP,sieve:hV,subflow:FP,timeunit:WP,tupleindex:mV,values:gV,window:GP},Symbol.toStringTag,{value:"Module"}));function Xt(e){return function(){return e}}const y4=Math.abs,Li=Math.atan2,rf=Math.cos,Sge=Math.max,dk=Math.min,ts=Math.sin,Nf=Math.sqrt,zi=1e-12,jp=Math.PI,Fb=jp/2,xV=2*jp;function Cge(e){return e>1?0:e<-1?jp:Math.acos(e)}function v4(e){return e>=1?Fb:e<=-1?-Fb:Math.asin(e)}const lA=Math.PI,uA=2*lA,xf=1e-6,Ege=uA-xf;function _V(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kge(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _V;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let qP=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_V:kge(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,a){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=i-t,u=r-n,c=a-t,d=s-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>xf)if(!(Math.abs(d*l-u*c)>xf)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let m=i-a,g=r-s,y=l*l+u*u,v=m*m+g*g,_=Math.sqrt(y),b=Math.sqrt(h),S=o*Math.tan((lA-Math.acos((y+h-v)/(2*_*b)))/2),k=S/b,R=S/_;Math.abs(k-1)>xf&&this._append`L${t+k*c},${n+k*d}`,this._append`A${o},${o},0,0,${+(d*m>c*g)},${this._x1=t+R*l},${this._y1=n+R*u}`}}arc(t,n,i,r,o,a){if(t=+t,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),l=i*Math.sin(r),u=t+s,c=n+l,d=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>xf||Math.abs(this._y1-c)>xf)&&this._append`L${u},${c}`,i&&(h<0&&(h=h%uA+uA),h>Ege?this._append`A${i},${i},0,1,${d},${t-s},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:h>xf&&this._append`A${i},${i},0,${+(h>=lA)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function rS(){return new qP}rS.prototype=qP.prototype;function oS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new qP(t)}function Rge(e){return e.innerRadius}function Tge(e){return e.outerRadius}function Age(e){return e.startAngle}function Fge(e){return e.endAngle}function Mge(e){return e&&e.padAngle}function Nge(e,t,n,i,r,o,a,s){var l=n-e,u=i-t,c=a-r,d=s-o,h=d*l-c*u;if(!(h*h<zi))return h=(c*(t-o)-d*(e-r))/h,[e+h*l,t+h*u]}function yx(e,t,n,i,r,o,a){var s=e-n,l=t-i,u=(a?o:-o)/Nf(s*s+l*l),c=u*l,d=-u*s,h=e+c,m=t+d,g=n+c,y=i+d,v=(h+g)/2,_=(m+y)/2,b=g-h,S=y-m,k=b*b+S*S,R=r-o,F=h*y-g*m,T=(S<0?-1:1)*Nf(Sge(0,R*R*k-F*F)),P=(F*S-b*T)/k,B=(-F*b-S*T)/k,O=(F*S+b*T)/k,D=(-F*b+S*T)/k,W=P-v,j=B-_,U=O-v,G=D-_;return W*W+j*j>U*U+G*G&&(P=O,B=D),{cx:P,cy:B,x01:-c,y01:-d,x11:P*(r/R-1),y11:B*(r/R-1)}}function Pge(){var e=Rge,t=Tge,n=Xt(0),i=null,r=Age,o=Fge,a=Mge,s=null,l=oS(u);function u(){var c,d,h=+e.apply(this,arguments),m=+t.apply(this,arguments),g=r.apply(this,arguments)-Fb,y=o.apply(this,arguments)-Fb,v=y4(y-g),_=y>g;if(s||(s=c=l()),m<h&&(d=m,m=h,h=d),!(m>zi))s.moveTo(0,0);else if(v>xV-zi)s.moveTo(m*rf(g),m*ts(g)),s.arc(0,0,m,g,y,!_),h>zi&&(s.moveTo(h*rf(y),h*ts(y)),s.arc(0,0,h,y,g,_));else{var b=g,S=y,k=g,R=y,F=v,T=v,P=a.apply(this,arguments)/2,B=P>zi&&(i?+i.apply(this,arguments):Nf(h*h+m*m)),O=dk(y4(m-h)/2,+n.apply(this,arguments)),D=O,W=O,j,U;if(B>zi){var G=v4(B/h*ts(P)),Z=v4(B/m*ts(P));(F-=G*2)>zi?(G*=_?1:-1,k+=G,R-=G):(F=0,k=R=(g+y)/2),(T-=Z*2)>zi?(Z*=_?1:-1,b+=Z,S-=Z):(T=0,b=S=(g+y)/2)}var J=m*rf(b),H=m*ts(b),Q=h*rf(R),K=h*ts(R);if(O>zi){var ne=m*rf(S),he=m*ts(S),$e=h*rf(k),Ee=h*ts(k),we;if(v<jp)if(we=Nge(J,H,$e,Ee,ne,he,Q,K)){var Ae=J-we[0],It=H-we[1],Et=ne-we[0],ke=he-we[1],Ye=1/ts(Cge((Ae*Et+It*ke)/(Nf(Ae*Ae+It*It)*Nf(Et*Et+ke*ke)))/2),He=Nf(we[0]*we[0]+we[1]*we[1]);D=dk(O,(h-He)/(Ye-1)),W=dk(O,(m-He)/(Ye+1))}else D=W=0}T>zi?W>zi?(j=yx($e,Ee,J,H,m,W,_),U=yx(ne,he,Q,K,m,W,_),s.moveTo(j.cx+j.x01,j.cy+j.y01),W<O?s.arc(j.cx,j.cy,W,Li(j.y01,j.x01),Li(U.y01,U.x01),!_):(s.arc(j.cx,j.cy,W,Li(j.y01,j.x01),Li(j.y11,j.x11),!_),s.arc(0,0,m,Li(j.cy+j.y11,j.cx+j.x11),Li(U.cy+U.y11,U.cx+U.x11),!_),s.arc(U.cx,U.cy,W,Li(U.y11,U.x11),Li(U.y01,U.x01),!_))):(s.moveTo(J,H),s.arc(0,0,m,b,S,!_)):s.moveTo(J,H),!(h>zi)||!(F>zi)?s.lineTo(Q,K):D>zi?(j=yx(Q,K,ne,he,h,-D,_),U=yx(J,H,$e,Ee,h,-D,_),s.lineTo(j.cx+j.x01,j.cy+j.y01),D<O?s.arc(j.cx,j.cy,D,Li(j.y01,j.x01),Li(U.y01,U.x01),!_):(s.arc(j.cx,j.cy,D,Li(j.y01,j.x01),Li(j.y11,j.x11),!_),s.arc(0,0,h,Li(j.cy+j.y11,j.cx+j.x11),Li(U.cy+U.y11,U.cx+U.x11),_),s.arc(U.cx,U.cy,D,Li(U.y11,U.x11),Li(U.y01,U.x01),!_))):s.arc(0,0,h,R,k,_)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-jp/2;return[rf(d)*c,ts(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xt(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xt(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xt(+c),u):n},u.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Xt(+c),u):i},u.startAngle=function(c){return arguments.length?(r=typeof c=="function"?c:Xt(+c),u):r},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xt(+c),u):o},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Xt(+c),u):a},u.context=function(c){return arguments.length?(s=c??null,u):s},u}function bV(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wV(e){this._context=e}wV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function VP(e){return new wV(e)}function SV(e){return e[0]}function CV(e){return e[1]}function EV(e,t){var n=Xt(!0),i=null,r=VP,o=null,a=oS(s);e=typeof e=="function"?e:e===void 0?SV:Xt(e),t=typeof t=="function"?t:t===void 0?CV:Xt(t);function s(l){var u,c=(l=bV(l)).length,d,h=!1,m;for(i==null&&(o=r(m=a())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(d,u,l),+t(d,u,l));if(m)return o=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Xt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Xt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Xt(!!l),s):n},s.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),s):r},s.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),s):i},s}function kV(e,t,n){var i=null,r=Xt(!0),o=null,a=VP,s=null,l=oS(u);e=typeof e=="function"?e:e===void 0?SV:Xt(+e),t=typeof t=="function"?t:Xt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?CV:Xt(+n);function u(d){var h,m,g,y=(d=bV(d)).length,v,_=!1,b,S=new Array(y),k=new Array(y);for(o==null&&(s=a(b=l())),h=0;h<=y;++h){if(!(h<y&&r(v=d[h],h,d))===_)if(_=!_)m=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=h-1;g>=m;--g)s.point(S[g],k[g]);s.lineEnd(),s.areaEnd()}_&&(S[h]=+e(v,h,d),k[h]=+t(v,h,d),s.point(i?+i(v,h,d):S[h],n?+n(v,h,d):k[h]))}if(b)return s=null,b+""||null}function c(){return EV().defined(r).curve(a).context(o)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Xt(+d),i=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Xt(+d),u):e},u.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Xt(+d),u):i},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Xt(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Xt(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Xt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(i).y(t)},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Xt(!!d),u):r},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}const $ge={draw(e,t){const n=Nf(t/jp);e.moveTo(n,0),e.arc(0,0,n,0,xV)}};function Oge(e,t){let n=null,i=oS(r);e=typeof e=="function"?e:Xt(e||$ge),t=typeof t=="function"?t:Xt(t===void 0?64:+t);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return r.type=function(o){return arguments.length?(e=typeof o=="function"?o:Xt(o),r):e},r.size=function(o){return arguments.length?(t=typeof o=="function"?o:Xt(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}function cc(){}function Mb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function aS(e){this._context=e}aS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ige(e){return new aS(e)}function RV(e){this._context=e}RV.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lge(e){return new RV(e)}function TV(e){this._context=e}TV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Mb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dge(e){return new TV(e)}function AV(e,t){this._basis=new aS(e),this._beta=t}AV.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],o=e[n]-i,a=t[n]-r,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*o),this._beta*t[s]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const zge=function e(t){function n(i){return t===1?new aS(i):new AV(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Nb(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function YP(e,t){this._context=e,this._k=(1-t)/6}YP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Nb(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Nb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jge=function e(t){function n(i){return new YP(i,t)}return n.tension=function(i){return e(+i)},n}(0);function ZP(e,t){this._context=e,this._k=(1-t)/6}ZP.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Nb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bge=function e(t){function n(i){return new ZP(i,t)}return n.tension=function(i){return e(+i)},n}(0);function XP(e,t){this._context=e,this._k=(1-t)/6}XP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hge=function e(t){function n(i){return new XP(i,t)}return n.tension=function(i){return e(+i)},n}(0);function KP(e,t,n){var i=e._x1,r=e._y1,o=e._x2,a=e._y2;if(e._l01_a>zi){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>zi){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,o,a,e._x2,e._y2)}function FV(e,t){this._context=e,this._alpha=t}FV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:KP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Uge=function e(t){function n(i){return t?new FV(i,t):new YP(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function MV(e,t){this._context=e,this._alpha=t}MV.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:KP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wge=function e(t){function n(i){return t?new MV(i,t):new ZP(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function NV(e,t){this._context=e,this._alpha=t}NV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:KP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gge=function e(t){function n(i){return t?new NV(i,t):new XP(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function PV(e){this._context=e}PV.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function qge(e){return new PV(e)}function x4(e){return e<0?-1:1}function _4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(x4(o)+x4(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function b4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function hk(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function Pb(e){this._context=e}Pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hk(this,this._t0,b4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hk(this,b4(this,n=_4(this,e,t)),n);break;default:hk(this,this._t0,n=_4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function $V(e){this._context=new OV(e)}($V.prototype=Object.create(Pb.prototype)).point=function(e,t){Pb.prototype.point.call(this,t,e)};function OV(e){this._context=e}OV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}};function Vge(e){return new Pb(e)}function Yge(e){return new $V(e)}function IV(e){this._context=e}IV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=w4(e),r=w4(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function w4(e){var t,n=e.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/o[t-1],o[t]-=i,a[t]-=i*a[t-1];for(r[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(a[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function Zge(e){return new IV(e)}function sS(e,t){this._context=e,this._t=t}sS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Xge(e){return new sS(e,.5)}function Kge(e){return new sS(e,0)}function Jge(e){return new sS(e,1)}function ec(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Qge=()=>typeof Image<"u"?Image:null;function Is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Nc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cA=Symbol("implicit");function JP(){var e=new z3,t=[],n=[],i=cA;function r(o){let a=e.get(o);if(a===void 0){if(i!==cA)return i;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new z3;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return JP(t,n).unknown(i)},Is.apply(r,arguments),r}function Nm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ev(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Pc(){}var ad=.7,Bp=1/ad,hp="\\s*([+-]?\\d+)\\s*",Iy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e0e=/^#([0-9a-f]{3,8})$/,t0e=new RegExp(`^rgb\\(${hp},${hp},${hp}\\)$`),n0e=new RegExp(`^rgb\\(${vs},${vs},${vs}\\)$`),i0e=new RegExp(`^rgba\\(${hp},${hp},${hp},${Iy}\\)$`),r0e=new RegExp(`^rgba\\(${vs},${vs},${vs},${Iy}\\)$`),o0e=new RegExp(`^hsl\\(${Iy},${vs},${vs}\\)$`),a0e=new RegExp(`^hsla\\(${Iy},${vs},${vs},${Iy}\\)$`),S4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nm(Pc,Ly,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:C4,formatHex:C4,formatHex8:s0e,formatHsl:l0e,formatRgb:E4,toString:E4});function C4(){return this.rgb().formatHex()}function s0e(){return this.rgb().formatHex8()}function l0e(){return LV(this).formatHsl()}function E4(){return this.rgb().formatRgb()}function Ly(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e0e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?k4(t):n===3?new fi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?vx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?vx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=t0e.exec(e))?new fi(t[1],t[2],t[3],1):(t=n0e.exec(e))?new fi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=i0e.exec(e))?vx(t[1],t[2],t[3],t[4]):(t=r0e.exec(e))?vx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o0e.exec(e))?A4(t[1],t[2]/100,t[3]/100,1):(t=a0e.exec(e))?A4(t[1],t[2]/100,t[3]/100,t[4]):S4.hasOwnProperty(e)?k4(S4[e]):e==="transparent"?new fi(NaN,NaN,NaN,0):null}function k4(e){return new fi(e>>16&255,e>>8&255,e&255,1)}function vx(e,t,n,i){return i<=0&&(e=t=n=NaN),new fi(e,t,n,i)}function QP(e){return e instanceof Pc||(e=Ly(e)),e?(e=e.rgb(),new fi(e.r,e.g,e.b,e.opacity)):new fi}function fc(e,t,n,i){return arguments.length===1?QP(e):new fi(e,t,n,i??1)}function fi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Nm(fi,fc,Ev(Pc,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new fi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new fi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fi(Uf(this.r),Uf(this.g),Uf(this.b),$b(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R4,formatHex:R4,formatHex8:u0e,formatRgb:T4,toString:T4}));function R4(){return`#${Pf(this.r)}${Pf(this.g)}${Pf(this.b)}`}function u0e(){return`#${Pf(this.r)}${Pf(this.g)}${Pf(this.b)}${Pf((isNaN(this.opacity)?1:this.opacity)*255)}`}function T4(){const e=$b(this.opacity);return`${e===1?"rgb(":"rgba("}${Uf(this.r)}, ${Uf(this.g)}, ${Uf(this.b)}${e===1?")":`, ${e})`}`}function $b(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pf(e){return e=Uf(e),(e<16?"0":"")+e.toString(16)}function A4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ba(e,t,n,i)}function LV(e){if(e instanceof ba)return new ba(e.h,e.s,e.l,e.opacity);if(e instanceof Pc||(e=Ly(e)),!e)return new ba;if(e instanceof ba)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new ba(a,s,l,e.opacity)}function Ob(e,t,n,i){return arguments.length===1?LV(e):new ba(e,t,n,i??1)}function ba(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Nm(ba,Ob,Ev(Pc,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new ba(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new ba(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new fi(pk(e>=240?e-240:e+120,r,i),pk(e,r,i),pk(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ba(F4(this.h),xx(this.s),xx(this.l),$b(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$b(this.opacity);return`${e===1?"hsl(":"hsla("}${F4(this.h)}, ${xx(this.s)*100}%, ${xx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function F4(e){return e=(e||0)%360,e<0?e+360:e}function xx(e){return Math.max(0,Math.min(1,e||0))}function pk(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const DV=Math.PI/180,zV=180/Math.PI,Ib=18,jV=.96422,BV=1,HV=.82521,UV=4/29,pp=6/29,WV=3*pp*pp,c0e=pp*pp*pp;function GV(e){if(e instanceof xs)return new xs(e.l,e.a,e.b,e.opacity);if(e instanceof wl)return qV(e);e instanceof fi||(e=QP(e));var t=vk(e.r),n=vk(e.g),i=vk(e.b),r=mk((.2225045*t+.7168786*n+.0606169*i)/BV),o,a;return t===n&&n===i?o=a=r:(o=mk((.4360747*t+.3850649*n+.1430804*i)/jV),a=mk((.0139322*t+.0971045*n+.7141733*i)/HV)),new xs(116*r-16,500*(o-r),200*(r-a),e.opacity)}function Lb(e,t,n,i){return arguments.length===1?GV(e):new xs(e,t,n,i??1)}function xs(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Nm(xs,Lb,Ev(Pc,{brighter(e){return new xs(this.l+Ib*(e??1),this.a,this.b,this.opacity)},darker(e){return new xs(this.l-Ib*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=jV*gk(t),e=BV*gk(e),n=HV*gk(n),new fi(yk(3.1338561*t-1.6168667*e-.4906146*n),yk(-.9787684*t+1.9161415*e+.033454*n),yk(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function mk(e){return e>c0e?Math.pow(e,1/3):e/WV+UV}function gk(e){return e>pp?e*e*e:WV*(e-UV)}function yk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function vk(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function f0e(e){if(e instanceof wl)return new wl(e.h,e.c,e.l,e.opacity);if(e instanceof xs||(e=GV(e)),e.a===0&&e.b===0)return new wl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*zV;return new wl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Db(e,t,n,i){return arguments.length===1?f0e(e):new wl(e,t,n,i??1)}function wl(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function qV(e){if(isNaN(e.h))return new xs(e.l,0,0,e.opacity);var t=e.h*DV;return new xs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Nm(wl,Db,Ev(Pc,{brighter(e){return new wl(this.h,this.c,this.l+Ib*(e??1),this.opacity)},darker(e){return new wl(this.h,this.c,this.l-Ib*(e??1),this.opacity)},rgb(){return qV(this).rgb()}}));var VV=-.14861,e$=1.78277,t$=-.29227,lS=-.90649,Dy=1.97294,M4=Dy*lS,N4=Dy*e$,P4=e$*t$-lS*VV;function d0e(e){if(e instanceof Wf)return new Wf(e.h,e.s,e.l,e.opacity);e instanceof fi||(e=QP(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(P4*i+M4*t-N4*n)/(P4+M4-N4),o=i-r,a=(Dy*(n-r)-t$*o)/lS,s=Math.sqrt(a*a+o*o)/(Dy*r*(1-r)),l=s?Math.atan2(a,o)*zV-120:NaN;return new Wf(l<0?l+360:l,s,r,e.opacity)}function fA(e,t,n,i){return arguments.length===1?d0e(e):new Wf(e,t,n,i??1)}function Wf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Nm(Wf,fA,Ev(Pc,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new Wf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Wf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*DV,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new fi(255*(t+n*(VV*i+e$*r)),255*(t+n*(t$*i+lS*r)),255*(t+n*(Dy*i)),this.opacity)}}));function YV(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}function ZV(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return YV((n-i/t)*t,a,r,o,s)}}function XV(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return YV((n-i/t)*t,r,o,a,s)}}const uS=e=>()=>e;function KV(e,t){return function(n){return e+n*t}}function h0e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function cS(e,t){var n=t-e;return n?KV(e,n>180||n<-180?n-360*Math.round(n/360):n):uS(isNaN(e)?t:e)}function p0e(e){return(e=+e)==1?di:function(t,n){return n-t?h0e(t,n,e):uS(isNaN(t)?n:t)}}function di(e,t){var n=t-e;return n?KV(e,n):uS(isNaN(e)?t:e)}const dA=function e(t){var n=p0e(t);function i(r,o){var a=n((r=fc(r)).r,(o=fc(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),u=di(r.opacity,o.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function JV(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=fc(t[a]),i[a]=s.r||0,r[a]=s.g||0,o[a]=s.b||0;return i=e(i),r=e(r),o=e(o),s.opacity=1,function(l){return s.r=i(l),s.g=r(l),s.b=o(l),s+""}}}var m0e=JV(ZV),g0e=JV(XV);function n$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function QV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function y0e(e,t){return(QV(t)?n$:eY)(e,t)}function eY(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=$c(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function tY(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function xa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function nY(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=$c(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var hA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xk=new RegExp(hA.source,"g");function v0e(e){return function(){return e}}function x0e(e){return function(t){return e(t)+""}}function iY(e,t){var n=hA.lastIndex=xk.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=hA.exec(e))&&(r=xk.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:xa(i,r)})),n=xk.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?x0e(l[0].x):v0e(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function $c(e,t){var n=typeof t,i;return t==null||n==="boolean"?uS(t):(n==="number"?xa:n==="string"?(i=Ly(t))?(t=i,dA):iY:t instanceof Ly?dA:t instanceof Date?tY:QV(t)?n$:Array.isArray(t)?eY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?nY:xa)(e,t)}function _0e(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function b0e(e,t){var n=cS(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function kv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var $4=180/Math.PI,pA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rY(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*$4,skewX:Math.atan(l)*$4,scaleX:a,scaleY:s}}var _x;function w0e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pA:rY(t.a,t.b,t.c,t.d,t.e,t.f)}function S0e(e){return e==null||(_x||(_x=document.createElementNS("http://www.w3.org/2000/svg","g")),_x.setAttribute("transform",e),!(e=_x.transform.baseVal.consolidate()))?pA:(e=e.matrix,rY(e.a,e.b,e.c,e.d,e.e,e.f))}function oY(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,d,h,m,g){if(u!==d||c!==h){var y=m.push("translate(",null,t,null,n);g.push({i:y-4,x:xa(u,d)},{i:y-2,x:xa(c,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function a(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:xa(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function s(u,c,d,h){u!==c?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:xa(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,h,m,g){if(u!==d||c!==h){var y=m.push(r(m)+"scale(",null,",",null,")");g.push({i:y-4,x:xa(u,d)},{i:y-2,x:xa(c,h)})}else(d!==1||h!==1)&&m.push(r(m)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,h),a(u.rotate,c.rotate,d,h),s(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(m){for(var g=-1,y=h.length,v;++g<y;)d[(v=h[g]).i]=v.x(m);return d.join("")}}}var C0e=oY(w0e,"px, ","px)","deg)"),E0e=oY(S0e,", ",")",")"),k0e=1e-12;function O4(e){return((e=Math.exp(e))+1/e)/2}function R0e(e){return((e=Math.exp(e))-1/e)/2}function T0e(e){return((e=Math.exp(2*e))-1)/(e+1)}const A0e=function e(t,n,i){function r(o,a){var s=o[0],l=o[1],u=o[2],c=a[0],d=a[1],h=a[2],m=c-s,g=d-l,y=m*m+g*g,v,_;if(y<k0e)_=Math.log(h/u)/t,v=function(T){return[s+T*m,l+T*g,u*Math.exp(t*T*_)]};else{var b=Math.sqrt(y),S=(h*h-u*u+i*y)/(2*u*n*b),k=(h*h-u*u-i*y)/(2*h*n*b),R=Math.log(Math.sqrt(S*S+1)-S),F=Math.log(Math.sqrt(k*k+1)-k);_=(F-R)/t,v=function(T){var P=T*_,B=O4(R),O=u/(n*b)*(B*T0e(t*P+R)-R0e(R));return[s+O*m,l+O*g,u*B/O4(t*P+R)]}}return v.duration=_*1e3*t/Math.SQRT2,v}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);function aY(e){return function(t,n){var i=e((t=Ob(t)).h,(n=Ob(n)).h),r=di(t.s,n.s),o=di(t.l,n.l),a=di(t.opacity,n.opacity);return function(s){return t.h=i(s),t.s=r(s),t.l=o(s),t.opacity=a(s),t+""}}}const F0e=aY(cS);var M0e=aY(di);function N0e(e,t){var n=di((e=Lb(e)).l,(t=Lb(t)).l),i=di(e.a,t.a),r=di(e.b,t.b),o=di(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=r(a),e.opacity=o(a),e+""}}function sY(e){return function(t,n){var i=e((t=Db(t)).h,(n=Db(n)).h),r=di(t.c,n.c),o=di(t.l,n.l),a=di(t.opacity,n.opacity);return function(s){return t.h=i(s),t.c=r(s),t.l=o(s),t.opacity=a(s),t+""}}}const P0e=sY(cS);var $0e=sY(di);function lY(e){return function t(n){n=+n;function i(r,o){var a=e((r=fA(r)).h,(o=fA(o)).h),s=di(r.s,o.s),l=di(r.l,o.l),u=di(r.opacity,o.opacity);return function(c){return r.h=a(c),r.s=s(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return i.gamma=t,i}(1)}const O0e=lY(cS);var I0e=lY(di);function i$(e,t){t===void 0&&(t=e,e=$c);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(a){var s=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[s](a-s)}}function L0e(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const D0e=Object.freeze(Object.defineProperty({__proto__:null,interpolate:$c,interpolateArray:y0e,interpolateBasis:ZV,interpolateBasisClosed:XV,interpolateCubehelix:O0e,interpolateCubehelixLong:I0e,interpolateDate:tY,interpolateDiscrete:_0e,interpolateHcl:P0e,interpolateHclLong:$0e,interpolateHsl:F0e,interpolateHslLong:M0e,interpolateHue:b0e,interpolateLab:N0e,interpolateNumber:xa,interpolateNumberArray:n$,interpolateObject:nY,interpolateRgb:dA,interpolateRgbBasis:m0e,interpolateRgbBasisClosed:g0e,interpolateRound:kv,interpolateString:iY,interpolateTransformCss:C0e,interpolateTransformSvg:E0e,interpolateZoom:A0e,piecewise:i$,quantize:L0e},Symbol.toStringTag,{value:"Module"}));function z0e(e){return function(){return e}}function mA(e){return+e}var I4=[0,1];function Dr(e){return e}function gA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:z0e(isNaN(t)?NaN:.5)}function j0e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function B0e(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=gA(r,i),o=n(a,o)):(i=gA(i,r),o=n(o,a)),function(s){return o(i(s))}}function H0e(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=gA(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=sc(e,s,1,i)-1;return o[l](r[l](s))}}function Rv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fS(){var e=I4,t=I4,n=$c,i,r,o,a=Dr,s,l,u;function c(){var h=Math.min(e.length,t.length);return a!==Dr&&(a=j0e(e[0],e[h-1])),s=h>2?H0e:B0e,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=s(e.map(i),t,n)))(i(a(h)))}return d.invert=function(h){return a(r((u||(u=s(t,e.map(i),xa)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,mA),c()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=kv,c()},d.clamp=function(h){return arguments.length?(a=h?!0:Dr,c()):a!==Dr},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,m){return i=h,r=m,c()}}function uY(){return fS()(Dr,Dr)}function cY(e,t,n,i){var r=lc(e,t,n),o;switch(i=od(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=IG(r,a))&&(i.precision=o),WN(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=LG(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=OG(r))&&(i.precision=o-(i.type==="%")*2);break}}return j2(i)}function Dd(e){var t=e.domain;return e.ticks=function(n){var i=t();return YT(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return cY(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,o=i.length-1,a=i[r],s=i[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=r,r=o,o=u);c-- >0;){if(u=ZT(a,s,n),u===l)return i[r]=a,i[o]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function fY(){var e=uY();return e.copy=function(){return Rv(e,fY())},Is.apply(e,arguments),Dd(e)}function dY(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,mA),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return dY(e).unknown(t)},e=arguments.length?Array.from(e,mA):[0,1],Dd(n)}function hY(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],o=e[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),e[n]=t.floor(r),e[i]=t.ceil(o),e}function L4(e){return Math.log(e)}function D4(e){return Math.exp(e)}function U0e(e){return-Math.log(-e)}function W0e(e){return-Math.exp(-e)}function G0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function q0e(e){return e===10?G0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function V0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z4(e){return(t,n)=>-e(-t,n)}function r$(e){const t=e(L4,D4),n=t.domain;let i=10,r,o;function a(){return r=V0e(i),o=q0e(i),n()[0]<0?(r=z4(r),o=z4(o),e(U0e,W0e)):e(L4,D4),t}return t.base=function(s){return arguments.length?(i=+s,a()):i},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=r(u),m=r(c),g,y;const v=s==null?10:+s;let _=[];if(!(i%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<i;++g)if(y=h<0?g/o(-h):g*o(h),!(y<u)){if(y>c)break;_.push(y)}}else for(;h<=m;++h)for(g=i-1;g>=1;--g)if(y=h>0?g/o(-h):g*o(h),!(y<u)){if(y>c)break;_.push(y)}_.length*2<v&&(_=YT(u,c,v))}else _=YT(h,m,Math.min(m-h,v)).map(o);return d?_.reverse():_},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=od(l)).precision==null&&(l.trim=!0),l=j2(l)),s===1/0)return l;const u=Math.max(1,i*s/t.ticks().length);return c=>{let d=c/o(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},t.nice=()=>n(hY(n(),{floor:s=>o(Math.floor(r(s))),ceil:s=>o(Math.ceil(r(s)))})),t}function pY(){const e=r$(fS()).domain([1,10]);return e.copy=()=>Rv(e,pY()).base(e.base()),Is.apply(e,arguments),e}function j4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function B4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function o$(e){var t=1,n=e(j4(t),B4(t));return n.constant=function(i){return arguments.length?e(j4(t=+i),B4(t)):t},Dd(n)}function mY(){var e=o$(fS());return e.copy=function(){return Rv(e,mY()).constant(e.constant())},Is.apply(e,arguments)}function H4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Z0e(e){return e<0?-e*e:e*e}function a$(e){var t=e(Dr,Dr),n=1;function i(){return n===1?e(Dr,Dr):n===.5?e(Y0e,Z0e):e(H4(n),H4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Dd(t)}function s$(){var e=a$(fS());return e.copy=function(){return Rv(e,s$()).exponent(e.exponent())},Is.apply(e,arguments),e}function X0e(){return s$.apply(null,arguments).exponent(.5)}function gY(){var e=[],t=[],n=[],i;function r(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=AG(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?i:t[sc(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Tl),r()},o.range=function(a){return arguments.length?(t=Array.from(a),r()):t.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return gY().domain(e).range(t).unknown(i)},Is.apply(o,arguments)}function yY(){var e=0,t=1,n=1,i=[.5],r=[0,1],o;function a(l){return l!=null&&l<=l?r[sc(i,l,0,n)]:o}function s(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,s()):r.slice()},a.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return i.slice()},a.copy=function(){return yY().domain([e,t]).range(r).unknown(o)},Is.apply(Dd(a),arguments)}function vY(){var e=[.5],t=[0,1],n,i=1;function r(o){return o!=null&&o<=o?t[sc(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return vY().domain(e).range(t).unknown(n)},Is.apply(r,arguments)}function K0e(e){return new Date(e)}function J0e(e){return e instanceof Date?+e:+new Date(+e)}function l$(e,t,n,i,r,o,a,s,l,u){var c=uY(),d=c.invert,h=c.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),_=u("%a %d"),b=u("%b %d"),S=u("%B"),k=u("%Y");function R(F){return(l(F)<F?m:s(F)<F?g:a(F)<F?y:o(F)<F?v:i(F)<F?r(F)<F?_:b:n(F)<F?S:k)(F)}return c.invert=function(F){return new Date(d(F))},c.domain=function(F){return arguments.length?h(Array.from(F,J0e)):h().map(K0e)},c.ticks=function(F){var T=h();return e(T[0],T[T.length-1],F??10)},c.tickFormat=function(F,T){return T==null?R:u(T)},c.nice=function(F){var T=h();return(!F||typeof F.range!="function")&&(F=t(T[0],T[T.length-1],F??10)),F?h(hY(T,F)):c},c.copy=function(){return Rv(c,l$(e,t,n,i,r,o,a,s,l,u))},c}function Q0e(){return Is.apply(l$(ohe,ahe,ks,My,Rm,Al,U2,B2,bl,ZN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eye(){return Is.apply(l$(ihe,rhe,Rs,Ny,Tm,Ju,W2,H2,bl,XN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dS(){var e=0,t=1,n,i,r,o,a=Dr,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(r===0?.5:(d=(o(d)-n)*r,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function c(d){return function(h){var m,g;return arguments.length?([m,g]=h,a=d(m,g),u):[a(0),a(1)]}}return u.range=c($c),u.rangeRound=c(kv),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),u}}function Oc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function u$(){var e=Dd(dS()(Dr));return e.copy=function(){return Oc(e,u$())},Nc.apply(e,arguments)}function xY(){var e=r$(dS()).domain([1,10]);return e.copy=function(){return Oc(e,xY()).base(e.base())},Nc.apply(e,arguments)}function _Y(){var e=o$(dS());return e.copy=function(){return Oc(e,_Y()).constant(e.constant())},Nc.apply(e,arguments)}function c$(){var e=a$(dS());return e.copy=function(){return Oc(e,c$()).exponent(e.exponent())},Nc.apply(e,arguments)}function tye(){return c$.apply(null,arguments).exponent(.5)}function hS(){var e=0,t=.5,n=1,i=1,r,o,a,s,l,u=Dr,c,d=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+c(y))-o)*(i*y<i*o?s:l),u(d?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,n]=y,r=c(e=+e),o=c(t=+t),a=c(n=+n),s=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,m):[e,t,n]},m.clamp=function(y){return arguments.length?(d=!!y,m):d},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(v){var _,b,S;return arguments.length?([_,b,S]=v,u=i$(y,[_,b,S]),m):[u(0),u(.5),u(1)]}}return m.range=g($c),m.rangeRound=g(kv),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return c=y,r=y(e),o=y(t),a=y(n),s=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,m}}function bY(){var e=Dd(hS()(Dr));return e.copy=function(){return Oc(e,bY())},Nc.apply(e,arguments)}function wY(){var e=r$(hS()).domain([.1,1,10]);return e.copy=function(){return Oc(e,wY()).base(e.base())},Nc.apply(e,arguments)}function SY(){var e=o$(hS());return e.copy=function(){return Oc(e,SY()).constant(e.constant())},Nc.apply(e,arguments)}function f$(){var e=a$(hS());return e.copy=function(){return Oc(e,f$()).exponent(e.exponent())},Nc.apply(e,arguments)}function nye(){return f$.apply(null,arguments).exponent(.5)}function d$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const iye="identity",Hp="linear",Ul="log",Tv="pow",Av="sqrt",pS="symlog",sd="time",ld="utc",_s="sequential",Pm="diverging",Up="quantile",mS="quantize",gS="threshold",h$="ordinal",yA="point",CY="band",p$="bin-ordinal",ii="continuous",Fv="discrete",Mv="discretizing",ea="interpolating",m$="temporal";function rye(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function oye(e){return function(t){const n=e.range();let i=t[0],r=t[1],o=-1,a,s,l,u;for(r<i&&(s=i,i=r,r=s),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),a=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[a]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function g$(){const e=JP().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,o,a=!1,s=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,h=i[1]<i[0],m=i[1-h],g=d$(d,s,l);let y=i[h-0];r=(m-y)/(g||1),a&&(r=Math.floor(r)),y+=(m-y-r*(d-s))*u,o=r*(1-s),a&&(y=Math.round(y),o=Math.round(o));const v=co(d).map(_=>y+r*_);return n(h?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],a=!0,c()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(a=!!d,c()):a},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),s=l,c()):s},e.paddingInner=function(d){return arguments.length?(s=Math.max(0,Math.min(1,d)),c()):s},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const h=i[1]<i[0],m=h?n().reverse():n(),g=m.length-1;let y=+d[0],v=+d[1],_,b,S;if(!(y!==y||v!==v)&&(v<y&&(S=y,y=v,v=S),!(v<m[0]||y>i[1-h])))return _=Math.max(0,sc(m,y)-1),b=y===v?_:sc(m,v)-1,y-m[_]>o+1e-10&&++_,h&&(S=_,_=g-b,b=g-S),_>b?void 0:t().slice(_,b+1)},e.invert=function(d){const h=e.invertRange([d,d]);return h&&h[0]},e.copy=function(){return g$().domain(t()).range(i).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}function EY(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return EY(t())},e}function aye(){return EY(g$().paddingInner(1))}var sye=Array.prototype.map;function lye(e){return sye.call(e,Wi)}const uye=Array.prototype.slice;function kY(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(sc(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=lye(i),n):e.slice()},n.range=function(i){return arguments.length?(t=uye.call(i),n):t.slice()},n.tickFormat=function(i,r){return cY(e[0],Ot(e),i??10,r)},n.copy=function(){return kY().domain(n.domain()).range(n.range())},n}const zb=new Map,RY=Symbol("vega_scale");function TY(e){return e[RY]=!0,e}function cye(e){return e&&e[RY]===!0}function fye(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?rye(o):o.invertExtent?oye(o):void 0),o.type=e,TY(o)};return i.metadata=$a(Oe(n)),i}function Ut(e,t,n){return arguments.length>1?(zb.set(e,fye(e,t,n)),this):AY(e)?zb.get(e):void 0}Ut(iye,dY);Ut(Hp,fY,ii);Ut(Ul,pY,[ii,Ul]);Ut(Tv,s$,ii);Ut(Av,X0e,ii);Ut(pS,mY,ii);Ut(sd,Q0e,[ii,m$]);Ut(ld,eye,[ii,m$]);Ut(_s,u$,[ii,ea]);Ut(`${_s}-${Hp}`,u$,[ii,ea]);Ut(`${_s}-${Ul}`,xY,[ii,ea,Ul]);Ut(`${_s}-${Tv}`,c$,[ii,ea]);Ut(`${_s}-${Av}`,tye,[ii,ea]);Ut(`${_s}-${pS}`,_Y,[ii,ea]);Ut(`${Pm}-${Hp}`,bY,[ii,ea]);Ut(`${Pm}-${Ul}`,wY,[ii,ea,Ul]);Ut(`${Pm}-${Tv}`,f$,[ii,ea]);Ut(`${Pm}-${Av}`,nye,[ii,ea]);Ut(`${Pm}-${pS}`,SY,[ii,ea]);Ut(Up,gY,[Mv,Up]);Ut(mS,yY,Mv);Ut(gS,vY,Mv);Ut(p$,kY,[Fv,Mv]);Ut(h$,JP,Fv);Ut(CY,g$,Fv);Ut(yA,aye,Fv);function AY(e){return zb.has(e)}function zd(e,t){const n=zb.get(e);return n&&n.metadata[t]}function y$(e){return zd(e,ii)}function Wp(e){return zd(e,Fv)}function vA(e){return zd(e,Mv)}function FY(e){return zd(e,Ul)}function dye(e){return zd(e,m$)}function MY(e){return zd(e,ea)}function NY(e){return zd(e,Up)}const hye=["clamp","base","constant","exponent"];function PY(e,t){const n=t[0],i=Ot(t)-n;return function(r){return e(n+r*i)}}function yS(e,t,n){return i$(v$(t||"rgb",n),e)}function $Y(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function OY(e,t,n){const i=n-t;let r,o,a;return!i||!Number.isFinite(i)?Qi(.5):(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),a=Ut(o)().domain([t,n]).range([0,1]),hye.forEach(s=>e[s]?a[s](e[s]()):0),a)}function v$(e,t){const n=D0e[pye(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function pye(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const mye={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},gye={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function IY(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function LY(e,t){for(const n in e)x$(n,t(e[n]))}const U4={};LY(gye,IY);LY(mye,e=>yS(IY(e)));function x$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(U4[e]=t,this):U4[e]}const v_="symbol",yye="discrete",vye="gradient",xye=e=>fe(e)?e.map(t=>String(t)):String(e),_ye=(e,t)=>e[1]-t[1],bye=(e,t)=>t[1]-e[1];function _$(e,t,n){let i;return jt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(bv(e.domain())/n||1)+1))),Le(t)&&(i=t.step,t=t.interval),Ie(t)&&(t=e.type===sd?Am(t):e.type==ld?Fm(t):le("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function DY(e,t,n){let i=e.range(),r=i[0],o=Ot(i),a=_ye;if(r>o&&(i=o,o=r,r=i,a=bye),r=Math.floor(r),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>r<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],Ot(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=s)}return t}function b$(e,t){return e.bins?DY(e,e.bins):e.ticks?e.ticks(t):e.domain()}function zY(e,t,n,i,r,o){const a=t.type;let s=xye;if(a===sd||r===sd)s=e.timeFormat(i);else if(a===ld||r===ld)s=e.utcFormat(i);else if(FY(a)){const l=e.formatFloat(i);if(o||t.bins)s=l;else{const u=jY(t,n,!1);s=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();s=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(s=e.format(i));return s}function jY(e,t,n){const i=b$(e,t),r=e.base(),o=Math.log(r),a=Math.max(1,r*t/i.length),s=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/o));return u*r<r-.5&&(u*=r),u<=a};return n?i.filter(s):s}const xA={[Up]:"quantiles",[mS]:"thresholds",[gS]:"domain"},BY={[Up]:"quantiles",[mS]:"domain"};function HY(e,t){return e.bins?Cye(e.bins):e.type===Ul?jY(e,t,!0):xA[e.type]?Sye(e[xA[e.type]]()):b$(e,t)}function wye(e,t,n){const i=t[BY[t.type]](),r=i.length;let o=r>1?i[1]-i[0]:i[0],a;for(a=1;a<r;++a)o=Math.min(o,i[a]-i[a-1]);return e.formatSpan(0,o,3*10,n)}function Sye(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Cye(e){const t=e.slice(0,-1);return t.max=Ot(e),t}const Eye=e=>xA[e.type]||e.bins;function UY(e,t,n,i,r,o,a){const s=BY[t.type]&&o!==sd&&o!==ld?wye(e,t,r):zY(e,t,n,r,o,a);return i===v_&&Eye(t)?kye(s):i===yye?Rye(s):Tye(s)}const kye=e=>(t,n,i)=>{const r=W4(i[n+1],W4(i.max,1/0)),o=G4(t,e),a=G4(r,e);return o&&a?o+"  "+a:a?"< "+a:" "+o},W4=(e,t)=>e??t,Rye=e=>(t,n)=>n?e(t):null,Tye=e=>t=>e(t),G4=(e,t)=>Number.isFinite(e)?t(e):null;function Aye(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Ot(t),o=r-i;if(e.type===gS){const a=n?o/n:.1;i-=a,r+=a,o=r-i}return a=>(a-i)/o}function Fye(e,t,n,i){const r=i||t.type;return Ie(n)&&dye(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===sd?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===ld?e.utcFormat("%A, %d %B %Y, %X UTC"):UY(e,t,5,null,n,i,!0)}function WY(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Fye(e,t,n.format,n.formatType);if(vA(t.type)){const o=HY(t).slice(1).map(r),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(Wp(t.type)){const o=t.domain(),a=o.length,s=a>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{const o=t.domain();return`values from ${r(o[0])} to ${r(Ot(o))}`}}let GY=0;function Mye(){GY=0}const jb="p_";function w$(e){return e&&e.gradient}function qY(e,t,n){const i=e.gradient;let r=e.id,o=i==="radial"?jb:"";return r||(r=e.id="gradient_"+GY++,i==="radial"?(e.x1=ns(e.x1,.5),e.y1=ns(e.y1,.5),e.r1=ns(e.r1,0),e.x2=ns(e.x2,.5),e.y2=ns(e.y2,.5),e.r2=ns(e.r2,.5),o=jb):(e.x1=ns(e.x1,0),e.y1=ns(e.y1,0),e.x2=ns(e.x2,1),e.y2=ns(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function ns(e,t){return e??t}function VY(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const q4={basis:{curve:Ige},"basis-closed":{curve:Lge},"basis-open":{curve:Dge},bundle:{curve:zge,tension:"beta",value:.85},cardinal:{curve:jge,tension:"tension",value:0},"cardinal-open":{curve:Hge,tension:"tension",value:0},"cardinal-closed":{curve:Bge,tension:"tension",value:0},"catmull-rom":{curve:Uge,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Wge,tension:"alpha",value:.5},"catmull-rom-open":{curve:Gge,tension:"alpha",value:.5},linear:{curve:VP},"linear-closed":{curve:qge},monotone:{horizontal:Yge,vertical:Vge},natural:{curve:Zge},step:{curve:Xge},"step-after":{curve:Jge},"step-before":{curve:Kge}};function S$(e,t,n){var i=et(q4,e)&&q4[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Nye={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Pye=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$ye=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Oye=/^((\s+,?\s*)|(,\s*))/,Iye=/^[01]/;function Gp(e){const t=[];return(e.match(Pye)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),a=Nye[o],s=Lye(o,a,i.slice(1).trim()),l=s.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...s.slice(0,a)]),l!==a){o==="m"&&(r=r==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([r,...s.slice(u,u+a)])}}),t}function Lye(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let o=0;o<t;++o){const a=e==="a"&&(o===3||o===4)?Iye:$ye,s=n.slice(r).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");r+=s[0].length,i.push(+s[0]);const l=n.slice(r).match(Oye);l!==null&&(r+=l[0].length)}return i}const dc=Math.PI/180,Dye=1e-14,wf=Math.PI/2,cs=Math.PI*2,wh=Math.sqrt(3)/2;var _k={},bk={},YY=[].join;function zye(e,t,n,i,r,o,a,s,l){const u=YY.call(arguments);if(_k[u])return _k[u];const c=a*dc,d=Math.sin(c),h=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const m=h*(s-e)*.5+d*(l-t)*.5,g=h*(l-t)*.5-d*(s-e)*.5;let y=m*m/(n*n)+g*g/(i*i);y>1&&(y=Math.sqrt(y),n*=y,i*=y);const v=h/n,_=d/n,b=-d/i,S=h/i,k=v*s+_*l,R=b*s+S*l,F=v*e+_*t,T=b*e+S*t;let B=1/((F-k)*(F-k)+(T-R)*(T-R))-.25;B<0&&(B=0);let O=Math.sqrt(B);o==r&&(O=-O);const D=.5*(k+F)-O*(T-R),W=.5*(R+T)+O*(F-k),j=Math.atan2(R-W,k-D);let G=Math.atan2(T-W,F-D)-j;G<0&&o===1?G+=cs:G>0&&o===0&&(G-=cs);const Z=Math.ceil(Math.abs(G/(wf+.001))),J=[];for(let H=0;H<Z;++H){const Q=j+H*G/Z,K=j+(H+1)*G/Z;J[H]=[D,W,Q,K,n,i,d,h]}return _k[u]=J}function jye(e){const t=YY.call(e);if(bk[t])return bk[t];var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];const c=u*a,d=-l*s,h=l*a,m=u*s,g=Math.cos(r),y=Math.sin(r),v=Math.cos(o),_=Math.sin(o),b=.5*(o-r),S=Math.sin(b*.5),k=8/3*S*S/Math.sin(b),R=n+g-k*y,F=i+y+k*g,T=n+v,P=i+_,B=T+k*_,O=P-k*v;return bk[t]=[c*R+d*F,h*R+m*F,c*B+d*O,h*B+m*O,c*T+d*P,h*T+m*P]}const Ao=["l",0,0,0,0,0,0,0];function Bye(e,t,n){const i=Ao[0]=e[0];if(i==="a"||i==="A")Ao[1]=t*e[1],Ao[2]=n*e[2],Ao[3]=e[3],Ao[4]=e[4],Ao[5]=e[5],Ao[6]=t*e[6],Ao[7]=n*e[7];else if(i==="h"||i==="H")Ao[1]=t*e[1];else if(i==="v"||i==="V")Ao[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Ao[r]=(r%2==1?t:n)*e[r];return Ao}function zy(e,t,n,i,r,o){var a,s=null,l=0,u=0,c=0,d=0,h,m,g,y,v=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),o==null&&(o=r),e.beginPath&&e.beginPath();for(var b=0,S=t.length;b<S;++b){switch(a=t[b],(r!==1||o!==1)&&(a=Bye(a,r,o)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+i);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+i);break;case"h":l+=a[1],e.lineTo(l+n,u+i);break;case"H":l=a[1],e.lineTo(l+n,u+i);break;case"v":u+=a[1],e.lineTo(l+n,u+i);break;case"V":u=a[1],e.lineTo(l+n,u+i);break;case"m":l+=a[1],u+=a[2],v=l,_=u,e.moveTo(l+n,u+i);break;case"M":l=a[1],u=a[2],v=l,_=u,e.moveTo(l+n,u+i);break;case"c":h=l+a[5],m=u+a[6],c=l+a[3],d=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+i,c+n,d+i,h+n,m+i),l=h,u=m;break;case"C":l=a[5],u=a[6],c=a[3],d=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,c+n,d+i,l+n,u+i);break;case"s":h=l+a[3],m=u+a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+i,l+a[1]+n,u+a[2]+i,h+n,m+i),c=l+a[1],d=u+a[2],l=h,u=m;break;case"S":h=a[3],m=a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+i,a[1]+n,a[2]+i,h+n,m+i),l=h,u=m,c=a[1],d=a[2];break;case"q":h=l+a[3],m=u+a[4],c=l+a[1],d=u+a[2],e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m;break;case"Q":h=a[3],m=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,h+n,m+i),l=h,u=m,c=a[1],d=a[2];break;case"t":h=l+a[1],m=u+a[2],s[0].match(/[QqTt]/)===null?(c=l,d=u):s[0]==="t"?(c=2*l-g,d=2*u-y):s[0]==="q"&&(c=2*l-c,d=2*u-d),g=c,y=d,e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m,c=l+a[1],d=u+a[2];break;case"T":h=a[1],m=a[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m;break;case"a":V4(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+i]),l+=a[6],u+=a[7];break;case"A":V4(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),l=a[6],u=a[7];break;case"z":case"Z":l=v,u=_,e.closePath();break}s=a}}function V4(e,t,n,i){const r=zye(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const a=jye(r[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const Y4=.5773502691896257,Z4={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,cs)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n,r=i-n*Y4,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n,r=i-n*Y4;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function ZY(e){return et(Z4,e)?Z4[e]:Hye(e)}var wk={};function Hye(e){if(!et(wk,e)){const t=Gp(e);wk[e]={draw:function(n,i){zy(n,t,0,0,Math.sqrt(i)/2)}}}return wk[e]}const pu=.448084975506;function Uye(e){return e.x}function Wye(e){return e.y}function Gye(e){return e.width}function qye(e){return e.height}function el(e){return typeof e=="function"?e:()=>+e}function bx(e,t,n){return Math.max(t,Math.min(e,n))}function XY(){var e=Uye,t=Wye,n=Gye,i=qye,r=el(0),o=r,a=r,s=r,l=null;function u(c,d,h){var m,g=d??+e.call(this,c),y=h??+t.call(this,c),v=+n.call(this,c),_=+i.call(this,c),b=Math.min(v,_)/2,S=bx(+r.call(this,c),0,b),k=bx(+o.call(this,c),0,b),R=bx(+a.call(this,c),0,b),F=bx(+s.call(this,c),0,b);if(l||(l=m=rS()),S<=0&&k<=0&&R<=0&&F<=0)l.rect(g,y,v,_);else{var T=g+v,P=y+_;l.moveTo(g+S,y),l.lineTo(T-k,y),l.bezierCurveTo(T-pu*k,y,T,y+pu*k,T,y+k),l.lineTo(T,P-F),l.bezierCurveTo(T,P-pu*F,T-pu*F,P,T-F,P),l.lineTo(g+R,P),l.bezierCurveTo(g+pu*R,P,g,P-pu*R,g,P-R),l.lineTo(g,y+S),l.bezierCurveTo(g,y+pu*S,g+pu*S,y,g+S,y),l.closePath()}if(m)return l=null,m+""||null}return u.x=function(c){return arguments.length?(e=el(c),u):e},u.y=function(c){return arguments.length?(t=el(c),u):t},u.width=function(c){return arguments.length?(n=el(c),u):n},u.height=function(c){return arguments.length?(i=el(c),u):i},u.cornerRadius=function(c,d,h,m){return arguments.length?(r=el(c),o=d!=null?el(d):r,s=h!=null?el(h):r,a=m!=null?el(m):o,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function KY(){var e,t,n,i,r=null,o,a,s,l;function u(d,h,m){const g=m/2;if(o){var y=s-h,v=d-a;if(y||v){var _=Math.hypot(y,v),b=(y/=_)*l,S=(v/=_)*l,k=Math.atan2(v,y);r.moveTo(a-b,s-S),r.lineTo(d-y*g,h-v*g),r.arc(d,h,g,k-Math.PI,k),r.lineTo(a+b,s+S),r.arc(a,s,l,k,k+Math.PI)}else r.arc(d,h,g,0,cs);r.closePath()}else o=1;a=d,s=h,l=g}function c(d){var h,m=d.length,g,y=!1,v;for(r==null&&(r=v=rS()),h=0;h<=m;++h)!(h<m&&i(g=d[h],h,d))===y&&(y=!y)&&(o=0),y&&u(+e(g,h,d),+t(g,h,d),+n(g,h,d));if(v)return r=null,v+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(d==null?r=null:r=d,c):r},c}function Nv(e,t){return e??t}const Pv=e=>e.x||0,$v=e=>e.y||0,Vye=e=>e.width||0,Yye=e=>e.height||0,Zye=e=>(e.x||0)+(e.width||0),Xye=e=>(e.y||0)+(e.height||0),Kye=e=>e.startAngle||0,Jye=e=>e.endAngle||0,Qye=e=>e.padAngle||0,eve=e=>e.innerRadius||0,tve=e=>e.outerRadius||0,nve=e=>e.cornerRadius||0,ive=e=>Nv(e.cornerRadiusTopLeft,e.cornerRadius)||0,rve=e=>Nv(e.cornerRadiusTopRight,e.cornerRadius)||0,ove=e=>Nv(e.cornerRadiusBottomRight,e.cornerRadius)||0,ave=e=>Nv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,sve=e=>Nv(e.size,64),lve=e=>e.size||1,vS=e=>e.defined!==!1,uve=e=>ZY(e.shape||"circle"),cve=Pge().startAngle(Kye).endAngle(Jye).padAngle(Qye).innerRadius(eve).outerRadius(tve).cornerRadius(nve),fve=kV().x(Pv).y1($v).y0(Xye).defined(vS),dve=kV().y($v).x1(Pv).x0(Zye).defined(vS),hve=EV().x(Pv).y($v).defined(vS),pve=XY().x(Pv).y($v).width(Vye).height(Yye).cornerRadius(ive,rve,ove,ave),mve=Oge().type(uve).size(sve),gve=KY().x(Pv).y($v).defined(vS).size(lve);function C$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function yve(e,t){return cve.context(e)(t)}function vve(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?dve:fve).curve(S$(i,n.orient,n.tension)).context(e)(t)}function xve(e,t){const n=t[0],i=n.interpolate||"linear";return hve.curve(S$(i,n.orient,n.tension)).context(e)(t)}function $m(e,t,n,i){return pve.context(e)(t,n,i)}function _ve(e,t){return(t.mark.shape||t.shape).context(e)(t)}function bve(e,t){return mve.context(e)(t)}function wve(e,t){return gve.context(e)(t)}var JY=1;function QY(){JY=1}function E$(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+JY++),a=r.clipping[o]||(r.clipping[o]={id:o});return _t(i)?a.path=i(null):C$(n)?a.path=$m(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function qn(e){this.clear(),e&&this.union(e)}qn.prototype={clone(){return new qn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[s*i-l*r+u,l*i+s*r+c,s*i-l*a+u,l*i+s*a+c,s*o-l*r+u,l*o+s*r+c,s*o-l*a+u,l*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function xS(e){this.mark=e,this.bounds=this.bounds||new qn}function _S(e){xS.call(this,e),this.items=this.items||[]}_e(_S,xS);function k$(e){this._pending=0,this._loader=e||q2()}function X4(e){e._pending+=1}function Dg(e){e._pending-=1}k$.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return X4(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Dg(t),n)).catch(()=>(Dg(t),null))},loadImage(e){const t=this,n=Qge();return X4(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const o=new n,a=et(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Dg(t),o.onerror=()=>Dg(t),o.src=r,o}).catch(i=>(Dg(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}n(!1)})}};function Zl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Sve(t,i):0))}return e}function Sve(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Cve=cs-1e-8;let bS,x_,__,$f,_A,b_,bA,wA;const $u=(e,t)=>bS.add(e,t),w_=(e,t)=>$u(x_=e,__=t),K4=e=>$u(e,bS.y1),J4=e=>$u(bS.x1,e),Sf=(e,t)=>_A*e+bA*t,Cf=(e,t)=>b_*e+wA*t,Sk=(e,t)=>$u(Sf(e,t),Cf(e,t)),Ck=(e,t)=>w_(Sf(e,t),Cf(e,t));function Ov(e,t){return bS=e,t?($f=t*dc,_A=wA=Math.cos($f),b_=Math.sin($f),bA=-b_):(_A=wA=1,$f=b_=bA=0),Eve}const Eve={beginPath(){},closePath(){},moveTo:Ck,lineTo:Ck,rect(e,t,n,i){$f?(Sk(e+n,t),Sk(e+n,t+i),Sk(e,t+i),Ck(e,t)):($u(e+n,t+i),w_(e,t))},quadraticCurveTo(e,t,n,i){const r=Sf(e,t),o=Cf(e,t),a=Sf(n,i),s=Cf(n,i);Q4(x_,r,a,K4),Q4(__,o,s,J4),w_(a,s)},bezierCurveTo(e,t,n,i,r,o){const a=Sf(e,t),s=Cf(e,t),l=Sf(n,i),u=Cf(n,i),c=Sf(r,o),d=Cf(r,o);ez(x_,a,l,c,K4),ez(__,s,u,d,J4),w_(c,d)},arc(e,t,n,i,r,o){if(i+=$f,r+=$f,x_=n*Math.cos(r)+e,__=n*Math.sin(r)+t,Math.abs(r-i)>Cve)$u(e-n,t-n),$u(e+n,t+n);else{const a=u=>$u(n*Math.cos(u)+e,n*Math.sin(u)+t);let s,l;if(a(i),a(r),r!==i)if(i=i%cs,i<0&&(i+=cs),r=r%cs,r<0&&(r+=cs),r<i&&(o=!o,s=i,i=r,r=s),o)for(r-=cs,s=i-i%wf,l=0;l<4&&s>r;++l,s-=wf)a(s);else for(s=i-i%wf+wf,l=0;l<4&&s<r;++l,s=s+wf)a(s)}}};function Q4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function ez(e,t,n,i,r){const o=i-e+3*t-3*n,a=e+n-2*t,s=e-t;let l=0,u=0,c;Math.abs(o)>Dye?(c=a*a+s*o,c>=0&&(c=Math.sqrt(c),l=(-a+c)/o,u=(-a-c)/o)):l=.5*s/a,0<l&&l<1&&r(tz(l,e,t,n,i)),0<u&&u<1&&r(tz(u,e,t,n,i))}function tz(e,t,n,i,r){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*i+s*e*r}var tc=(tc=ec(1,1))?tc.getContext("2d"):null;const SA=new qn;function R$(e){return function(t,n){if(!tc)return!0;e(tc,t),SA.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:a}=SA;for(let s=r;s<=a;++s)for(let l=i;l<=o;++l)if(tc.isPointInPath(l,s))return!0;return!1}}function T$(e,t){return t.contains(e.x||0,e.y||0)}function eZ(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,o=e.height||0;return t.intersects(SA.set(n,i,n+r,i+o))}function tZ(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:i;return ep(t,n,i,r,o)}function ep(e,t,n,i,r){const{x1:o,y1:a,x2:s,y2:l}=e,u=i-t,c=r-n;let d=0,h=1,m,g,y,v;for(v=0;v<4;++v){if(v===0&&(m=-u,g=-(o-t)),v===1&&(m=u,g=s-t),v===2&&(m=-c,g=-(a-n)),v===3&&(m=c,g=l-n),Math.abs(m)<1e-10&&g<0)return!1;if(y=g/m,m<0){if(y>h)return!1;y>d&&(d=y)}else if(m>0){if(y<d)return!1;y<h&&(h=y)}}return!0}function qp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ua(e,t){return e??t}function nz(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function kve(e,t,n){const i=n.width(),r=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+ua(t.x1,.5)*i,n.y1+ua(t.y1,.5)*r,Math.max(i,r)*ua(t.r1,0),n.x1+ua(t.x2,.5)*i,n.y1+ua(t.y2,.5)*r,Math.max(i,r)*ua(t.r2,.5));else{const a=ua(t.x1,0),s=ua(t.y1,0),l=ua(t.x2,1),u=ua(t.y2,0);if(a===l||s===u||i===r)o=e.createLinearGradient(n.x1+a*i,n.y1+s*r,n.x1+l*i,n.y1+u*r);else{const c=ec(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=nz(d.createLinearGradient(a,s,l,u),t.stops),d.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}}return nz(o,t.stops)}function nZ(e,t,n){return w$(n)?kve(e,n,t.bounds):n}function Bb(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=nZ(e,t,t.fill),!0):!1}var Rve=[];function Vp(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=nZ(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Rve),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Tve(e,t){return e.zindex-t.zindex||e.index-t.index}function A$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,o;for(r=0,o=t.length;r<o;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Tve)}function Ia(e,t){var n=e.items,i,r;if(!n||!n.length)return;const o=A$(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function Hb(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const o=A$(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function F$(e){return function(t,n,i){Ia(n,r=>{(!i||i.intersects(r.bounds))&&iZ(e,t,r,r)})}}function Ave(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&iZ(e,t,n.items[0],n.items)}}function iZ(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(qp(t,n),n.fill&&Bb(t,n,r)&&t.fill(),n.stroke&&Vp(t,n,r)&&t.stroke()))}function wS(e){return e=e||Yo,function(t,n,i,r,o,a){return i*=t.pixelRatio,r*=t.pixelRatio,Hb(n,s=>{const l=s.bounds;if(!(l&&!l.contains(o,a)||!l)&&e(t,s,i,r,o,a))return s})}}function Iv(e,t){return function(n,i,r,o){var a=Array.isArray(i)?i[0]:i,s=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,i)?!1:s&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o)}}function M$(e){return wS(Iv(e))}function Gf(e,t){return"translate("+e+","+t+")"}function N$(e){return"rotate("+e+")"}function Fve(e,t){return"scale("+e+","+t+")"}function rZ(e){return Gf(e.x||0,e.y||0)}function Mve(e){return Gf(e.x||0,e.y||0)+(e.angle?" "+N$(e.angle):"")}function Nve(e){return Gf(e.x||0,e.y||0)+(e.angle?" "+N$(e.angle):"")+(e.scaleX||e.scaleY?" "+Fve(e.scaleX||1,e.scaleY||1):"")}function P$(e,t,n){function i(a,s){a("transform",Mve(s)),a("d",t(null,s))}function r(a,s){return t(Ov(a,s.angle),s),Zl(a,s).translate(s.x||0,s.y||0)}function o(a,s){var l=s.x||0,u=s.y||0,c=s.angle||0;a.translate(l,u),c&&a.rotate(c*=dc),a.beginPath(),t(a,s),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:F$(o),pick:M$(o),isect:n||R$(o)}}var Pve=P$("arc",yve);function $ve(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,o=1/0,a,s;--r>=0;)e[r].defined!==!1&&(s=Math.abs(e[r][i]-n),s<o&&(o=s,a=e[r]));return a}function Ove(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,o,a;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],o=e[i].y-t[1],a=r*r+o*o,a<n))return e[i];return null}function Ive(e,t){for(var n=e.length,i,r,o;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],o=i*i+r*r,i=e[n].size||1,o<i*i))return e[n];return null}function $$(e,t,n){function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function r(l,u){var c=u.items;return c.length===0?l:(t(Ov(l),c),Zl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const a=Iv(o);function s(l,u,c,d,h,m){var g=u.items,y=u.bounds;return!g||!g.length||y&&!y.contains(h,m)?null:(c*=l.pixelRatio,d*=l.pixelRatio,a(l,g,c,d)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Ave(o),pick:s,isect:T$,tip:n}}var Lve=$$("area",vve,$ve);function Dve(e,t){var n=t.clip;e.save(),_t(n)?(e.beginPath(),n(e),e.clip()):oZ(e,t.group)}function oZ(e,t){e.beginPath(),C$(t)?$m(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function aZ(e){const t=ua(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function zve(e,t){e("transform",rZ(t))}function sZ(e,t){const n=aZ(t);e("d",$m(null,t,n,n))}function jve(e,t){e("class","background"),e("aria-hidden",!0),sZ(e,t)}function Bve(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?sZ(e,t):e("d","")}function Hve(e,t,n){const i=t.clip?E$(n,t,t):null;e("clip-path",i)}function Uve(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Zl(e,t),e.translate(t.x||0,t.y||0)}function jy(e,t,n,i){const r=aZ(t);e.beginPath(),$m(e,t,(n||0)+r,(i||0)+r)}const Wve=Iv(jy),Gve=Iv(jy,!1),qve=Iv(jy,!0);function Vve(e,t,n,i){Ia(t,r=>{const o=r.x||0,a=r.y||0,s=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(jy(e,r,o,a),qp(e,r),r.fill&&Bb(e,r,l)&&e.fill(),r.stroke&&!s&&Vp(e,r,l)&&e.stroke()),e.save(),e.translate(o,a),r.clip&&oZ(e,r),n&&n.translate(-o,-a),Ia(r,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(o,a),e.restore(),s&&r.stroke&&l&&(jy(e,r,o,a),qp(e,r),Vp(e,r,l)&&e.stroke())})}function Yve(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const a=n*e.pixelRatio,s=i*e.pixelRatio;return Hb(t,l=>{let u,c,d;const h=l.bounds;if(h&&!h.contains(r,o))return;c=l.x||0,d=l.y||0;const m=c+(l.width||0),g=d+(l.height||0),y=l.clip;if(y&&(r<c||r>m||o<d||o>g))return;if(e.save(),e.translate(c,d),c=r-c,d=o-d,y&&C$(l)&&!qve(e,l,a,s))return e.restore(),null;const v=l.strokeForeground,_=t.interactive!==!1;return _&&v&&l.stroke&&Gve(e,l,a,s)?(e.restore(),l):(u=Hb(l,b=>Zve(b,c,d)?this.pick(b,n,i,c,d):null),!u&&_&&(l.fill||!v&&l.stroke)&&Wve(e,l,a,s)&&(u=l),e.restore(),u||null)})}function Zve(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Xve={type:"group",tag:"g",nested:!1,attr:zve,bound:Uve,draw:Vve,pick:Yve,isect:eZ,content:Hve,background:jve,foreground:Bve},By={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function O$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function I$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function L$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function SS(e,t){return e==="center"?t/2:e==="right"?t:0}function CS(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Kve(e,t,n){const i=O$(t,n),r=I$(t,i),o=L$(t,i),a=(t.x||0)-SS(t.align,r),s=(t.y||0)-CS(t.baseline,o),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,By["xmlns:xlink"],"xlink:href"),e("transform",Gf(a,s)),e("width",r),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Jve(e,t){const n=t.image,i=I$(t,n),r=L$(t,n),o=(t.x||0)-SS(t.align,i),a=(t.y||0)-CS(t.baseline,r);return e.set(o,a,o+i,a+r)}function Qve(e,t,n){Ia(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=O$(i,this);let o=I$(i,r),a=L$(i,r);if(o===0||a===0)return;let s=(i.x||0)-SS(i.align,o),l=(i.y||0)-CS(i.baseline,a),u,c,d,h;i.aspect!==!1&&(c=r.width/r.height,d=i.width/i.height,c===c&&d===d&&c!==d&&(d<c?(h=o/c,l+=(a-h)/2,a=h):(h=a*c,s+=(o-h)/2,o=h))),(r.complete||r.toDataURL)&&(qp(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,s,l,o,a))})}var e1e={type:"image",tag:"image",nested:!1,attr:Kve,bound:Jve,draw:Qve,pick:wS(),isect:Yo,get:O$,xOffset:SS,yOffset:CS},t1e=$$("line",xve,Ove);function n1e(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Nve(t)),e("d",t.path)}function S_(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*dc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Gp(n)).path=n),s&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(s),zy(e,l,0,0,o,a),e.rotate(-s),e.translate(-i,-r)):zy(e,l,i,r,o,a)}function i1e(e,t){return S_(Ov(e,t.angle),t)?e.set(0,0,0,0):Zl(e,t,!0)}var r1e={type:"path",tag:"path",nested:!1,attr:n1e,bound:i1e,draw:F$(S_),pick:M$(S_),isect:R$(S_)};function o1e(e,t){e("d",$m(null,t))}function a1e(e,t){var n,i;return Zl(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function iz(e,t){e.beginPath(),$m(e,t)}var s1e={type:"rect",tag:"path",nested:!1,attr:o1e,bound:a1e,draw:F$(iz),pick:M$(iz),isect:eZ};function l1e(e,t){e("transform",rZ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function u1e(e,t){var n,i;return Zl(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function lZ(e,t,n){var i,r,o,a;return t.stroke&&Vp(e,t,n)?(i=t.x||0,r=t.y||0,o=t.x2!=null?t.x2:i,a=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,a),!0):!1}function c1e(e,t,n){Ia(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&lZ(e,i,r)&&(qp(e,i),e.stroke())}})}function f1e(e,t,n,i){return e.isPointInStroke?lZ(e,t,1)&&e.isPointInStroke(n,i):!1}var d1e={type:"rule",tag:"line",nested:!1,attr:l1e,bound:u1e,draw:c1e,pick:wS(f1e),isect:tZ},h1e=P$("shape",_ve),p1e=P$("symbol",bve,T$);const rz=gG();var po={height:Ls,measureWidth:D$,estimateWidth:Ub,width:Ub,canvas:uZ};uZ(!0);function uZ(e){po.width=e&&tc?D$:Ub}function Ub(e,t){return cZ(pc(e,t),Ls(e))}function cZ(e,t){return~~(.8*e.length*t)}function D$(e,t){return Ls(e)<=0||!(t=pc(e,t))?0:fZ(t,ES(e))}function fZ(e,t){const n=`(${t}) ${e}`;let i=rz.get(n);return i===void 0&&(tc.font=t,i=tc.measureText(e).width,rz.set(n,i)),i}function Ls(e){return e.fontSize!=null?+e.fontSize||0:11}function hc(e){return e.lineHeight!=null?e.lineHeight:Ls(e)+2}function m1e(e){return fe(e)?e.length>1?e:e[0]:e}function Lv(e){return m1e(e.lineBreak&&e.text&&!fe(e.text)?e.text.split(e.lineBreak):e.text)}function z$(e){const t=Lv(e);return(fe(t)?t.length-1:0)*hc(e)}function pc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?y1e(e,n):n}function g1e(e){if(po.width===D$){const t=ES(e);return n=>fZ(n,t)}else if(po.width===Ub){const t=Ls(e);return n=>cZ(n,t)}else return t=>po.width(e,t)}function y1e(e,t){var n=+e.limit,i=g1e(e);if(i(t)<n)return t;var r=e.ellipsis||"",o=e.dir==="rtl",a=0,s=t.length,l;if(n-=i(r),o){for(;a<s;)l=a+s>>>1,i(t.slice(l))>n?a=l+1:s=l;return r+t.slice(a)}else{for(;a<s;)l=1+(a+s>>>1),i(t.slice(0,l))<n?a=l:s=l-1;return t.slice(0,a)+r}}function Dv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function ES(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ls(e)+"px "+Dv(e,t)}function j$(e){var t=e.baseline,n=Ls(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*hc(e):t==="line-bottom"?.29*n-.5*hc(e):0)}const v1e={left:"start",center:"middle",right:"end"},G0=new qn;function kS(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-wf,t+=i*Math.cos(r),n+=i*Math.sin(r)),G0.x1=t,G0.y1=n,G0}function x1e(e,t){var n=t.dx||0,i=(t.dy||0)+j$(t),r=kS(t),o=r.x1,a=r.y1,s=t.angle||0,l;e("text-anchor",v1e[t.align]||"start"),s?(l=Gf(o,a)+" "+N$(s),(n||i)&&(l+=" "+Gf(n,i))):l=Gf(o+n,a+i),e("transform",l)}function B$(e,t,n){var i=po.height(t),r=t.align,o=kS(t),a=o.x1,s=o.y1,l=t.dx||0,u=(t.dy||0)+j$(t)-Math.round(.8*i),c=Lv(t),d;if(fe(c)?(i+=hc(t)*(c.length-1),d=c.reduce((h,m)=>Math.max(h,po.width(t,m)),0)):d=po.width(t,c),r==="center"?l-=d/2:r==="right"&&(l-=d),e.set(l+=a,u+=s,l+d,u+i),t.angle&&!n)e.rotate(t.angle*dc,a,s);else if(n===2)return e.rotatedPoints(t.angle*dc,a,s);return e}function _1e(e,t,n){Ia(t,i=>{var r=i.opacity==null?1:i.opacity,o,a,s,l,u,c,d;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=ES(i),e.textAlign=i.align||"left",o=kS(i),a=o.x1,s=o.y1,i.angle&&(e.save(),e.translate(a,s),e.rotate(i.angle*dc),a=s=0),a+=i.dx||0,s+=(i.dy||0)+j$(i),c=Lv(i),qp(e,i),fe(c))for(u=hc(i),l=0;l<c.length;++l)d=pc(i,c[l]),i.fill&&Bb(e,i,r)&&e.fillText(d,a,s),i.stroke&&Vp(e,i,r)&&e.strokeText(d,a,s),s+=u;else d=pc(i,c),i.fill&&Bb(e,i,r)&&e.fillText(d,a,s),i.stroke&&Vp(e,i,r)&&e.strokeText(d,a,s);i.angle&&e.restore()}})}function b1e(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=kS(t),s=a.x1,l=a.y1,u=B$(G0,t,1),c=-t.angle*dc,d=Math.cos(c),h=Math.sin(c),m=d*r-h*o+(s-d*s+h*l),g=h*r+d*o+(l-h*s-d*l);return u.contains(m,g)}function w1e(e,t){const n=B$(G0,e,2);return ep(t,n[0],n[1],n[2],n[3])||ep(t,n[0],n[1],n[4],n[5])||ep(t,n[4],n[5],n[6],n[7])||ep(t,n[2],n[3],n[6],n[7])}var S1e={type:"text",tag:"text",nested:!1,attr:x1e,bound:B$,draw:_1e,pick:wS(b1e),isect:w1e},C1e=$$("trail",wve,Ive),_o={arc:Pve,area:Lve,group:Xve,image:e1e,line:t1e,path:r1e,rect:s1e,rule:d1e,shape:h1e,symbol:p1e,text:S1e,trail:C1e};function CA(e,t,n){var i=_o[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new qn),e,n)}var oz={mark:null};function dZ(e,t,n){var i=_o[e.marktype],r=i.bound,o=e.items,a=o&&o.length,s,l,u,c;if(i.nested)return a?u=o[0]:(oz.mark=e,u=oz),c=CA(u,r,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new qn,a)for(s=0,l=o.length;s<l;++s)t.union(CA(o[s],r,n));return e.bounds=t}const E1e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function hZ(e,t){return JSON.stringify(e,E1e,t)}function pZ(e){const t=typeof e=="string"?JSON.parse(e):e;return mZ(t)}function mZ(e){var t=e.marktype,n=e.items,i,r,o;if(n)for(r=0,o=n.length;r<o;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&mZ(n[r]);return t&&dZ(e),e}function H$(e){arguments.length?this.root=pZ(e):(this.root=gZ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new _S(this.root)])}H$.prototype={toJSON(e){return hZ(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const i=gZ(e,t);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function gZ(e,t){const n={bounds:new qn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ou(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function U$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Xn(e,t,n,i){var r=e.childNodes[t],o;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=Ou(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function Po(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function yZ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function RS(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function k1e(e,t,n,i){var r=e&&e.mark,o,a;if(r&&(o=_o[r.marktype]).tip){for(a=RS(t,n),a[0]-=i[0],a[1]-=i[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(r.items,a)}return e}function mc(e,t){this._active=null,this._handlers={},this._loader=e||q2(),this._tooltip=t||R1e}function R1e(e,t,n,i){e.element().setAttribute("title",i||"")}mc.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),o=Ou(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=k1e(t,e,this.canvas(),this._origin);const i=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,i)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,o=r.width(),a=r.height();let s=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,l+=e.y||0;return{x:s,y:l,width:o,height:a,left:s,top:l,right:s+o,bottom:l+a}}};function Eo(e){this._el=null,this._bgcolor=null,this._loader=new k$(e)}Eo.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(o=>{o&&r(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const T1e="keydown",A1e="keypress",F1e="keyup",vZ="dragenter",C_="dragleave",xZ="dragover",EA="pointerdown",M1e="pointerup",Wb="pointermove",q0="pointerout",_Z="pointerover",kA="mousedown",N1e="mouseup",bZ="mousemove",RA="mouseout",wZ="mouseover",Gb="click",P1e="dblclick",$1e="wheel",SZ="mousewheel",qb="touchstart",Vb="touchmove",Yb="touchend",O1e=[T1e,A1e,F1e,vZ,C_,xZ,EA,M1e,Wb,q0,_Z,kA,N1e,bZ,RA,wZ,Gb,P1e,$1e,SZ,qb,Vb,Yb],TA=Wb,Hy=q0,AA=Gb;function gc(e,t){mc.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const I1e=e=>e===qb||e===Vb||e===Yb?[qb,Vb,Yb]:[e];function az(e,t){I1e(t).forEach(n=>L1e(e,n))}function L1e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function g0(e,t,n){t.forEach(i=>e.fire(i,n))}function sz(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r?g0(this,e,i):((!r||!r.exit)&&g0(this,n,i),this._active=o,g0(this,t,i),g0(this,e,i))}}function lz(e){return function(t){g0(this,e,t),this._active=null}}_e(gc,mc,{initialize(e,t,n){return this._canvas=e&&U$(e,"canvas"),[Gb,kA,EA,Wb,q0,C_].forEach(i=>az(this,i)),mc.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:O1e,DOMMouseScroll(e){this.fire(SZ,e)},pointermove:sz([Wb,bZ],[_Z,wZ],[q0,RA]),dragover:sz([xZ],[vZ],[C_]),pointerout:lz([q0,RA]),dragleave:lz([C_]),pointerdown(e){this._down=this._active,this.fire(EA,e)},mousedown(e){this._down=this._active,this.fire(kA,e)},click(e){this._down===this._active&&(this.fire(Gb,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(qb,e,!0)},touchmove(e){this.fire(Vb,e,!0)},touchend(e){this.fire(Yb,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===AA&&i&&i.href?this.handleHref(t,i,i.href):(e===TA||e===Hy)&&this.handleTooltip(t,i,e!==Hy),r)for(let o=0,a=r.length;o<a;++o)r[o].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(az(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=RS(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const o=this.context();return _o[e.marktype].pick.call(this,o,e,t,n,i,r)}});function D1e(){return typeof window<"u"&&window.devicePixelRatio||1}function z1e(e,t,n,i,r,o){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),l=a?D1e():r;e.width=t*l,e.height=n*l;for(const u in o)s[u]=o[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*i[0],l*i[1]),e}function Uy(e){Eo.call(this,e),this._options={},this._redraw=!1,this._dirty=new qn,this._tempb=new qn}const uz=Eo.prototype,j1e=(e,t,n)=>new qn().set(0,0,t,n).translate(-e[0],-e[1]);function B1e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}_e(Uy,Eo,{initialize(e,t,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:ec(1,1,this._options.type),e&&this._canvas&&(Po(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),uz.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(uz.resize.call(this,e,t,n,i),this._canvas)z1e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||le("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),i=this._origin,r=this._width,o=this._height,a=this._dirty,s=j1e(i,r,o);n.save();const l=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):B1e(n,s.intersect(a),i);return this.clear(-i[0],-i[1],r,o),this.draw(n,e,l,t),n.restore(),a.clear(),this},draw(e,t,n,i){if(t.marktype!=="group"&&i!=null&&!i.includes(t.marktype))return;const r=_o[t.marktype];t.clip&&Dve(e,t),r.draw.call(this,e,t,n,i),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,o=this.context();r.type!=="pdf"&&!r.externalContext&&o.clearRect(e,t,n,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,i))}});function W$(e,t){mc.call(this,e,t);const n=this;n._hrefHandler=FA(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=FA(n,(i,r)=>{n.handleTooltip(i,r,i.type!==Hy)})}const FA=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};_e(W$,mc,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(AA,this._hrefHandler),i.removeEventListener(TA,this._tooltipHandler),i.removeEventListener(Hy,this._tooltipHandler)),this._svg=i=e&&U$(e,"svg"),i&&(i.addEventListener(AA,this._hrefHandler),i.addEventListener(TA,this._tooltipHandler),i.addEventListener(Hy,this._tooltipHandler)),mc.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const o={type:e,handler:t,listener:FA(this,t)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const CZ="aria-hidden",G$="aria-label",q$="role",V$="aria-roledescription",EZ="graphics-object",Y$="graphics-symbol",kZ=(e,t,n)=>({[q$]:e,[V$]:t,[G$]:n||void 0}),H1e=$a(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),cz={axis:{desc:"axis",caption:G1e},legend:{desc:"legend",caption:q1e},"title-text":{desc:"title",caption:e=>`Title text '${dz(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${dz(e)}'`}},fz={ariaRole:q$,ariaRoleDescription:V$,description:G$};function RZ(e,t){const n=t.aria===!1;if(e(CZ,n||void 0),n||t.description==null)for(const i in fz)e(fz[i],void 0);else{const i=t.mark.marktype;e(G$,t.description),e(q$,t.ariaRole||(i==="group"?EZ:Y$)),e(V$,t.ariaRoleDescription||`${i} mark`)}}function TZ(e){return e.aria===!1?{[CZ]:!0}:H1e[e.role]?null:cz[e.role]?W1e(e,cz[e.role]):U1e(e)}function U1e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return kZ(n?EZ:Y$,`${t} mark container`,e.description)}function W1e(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return kZ(t.role||Y$,t.desc,n.description||i(n))}catch{return null}}function dz(e){return Oe(e.text).join(" ")}function G1e(e){const t=e.datum,n=e.orient,i=t.title?AZ(e):null,r=e.context,o=r.scales[t.scale].value,a=r.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Wp(s)?"discrete":s} scale with ${WY(a,o,e)}`}function q1e(e){const t=e.datum,n=t.title?AZ(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),a=e.context,s=a.scales[r[o[0]]].value,l=a.dataflow.locale();return Y1e(i)+(n?` titled '${n}'`:"")+` for ${V1e(o)} with ${WY(l,s,e)}`}function AZ(e){try{return Oe(Ot(e.items).items[0].text).join(" ")}catch{return null}}function V1e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ot(e)}function Y1e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const FZ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Z1e=e=>FZ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Z$(){let e="",t="",n="";const i=[],r=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},a=(l,u)=>(u!=null&&(t+=` ${l}="${Z1e(u)}"`),s),s={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const h of c)for(const m in h)a(m,h[m]);return s},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),s},attr:a,text:l=>(n+=FZ(l),s),toString:()=>e};return s}const MZ=e=>NZ(Z$(),e)+"";function NZ(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):NZ(e,i)}return e.close()}const Zb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Xb={blend:"mix-blend-mode"},PZ={fill:"none","stroke-miterlimit":10},zg=0,hz="http://www.w3.org/2000/xmlns/",Zn=By.xmlns;function TS(e){Eo.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const Ek=Eo.prototype;_e(TS,Eo,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=Xn(e,0,"svg",Zn),this._svg.setAttributeNS(hz,"xmlns",Zn),this._svg.setAttributeNS(hz,"xmlns:xlink",By["xmlns:xlink"]),this._svg.setAttribute("version",By.version),this._svg.setAttribute("class","marks"),Po(e,1),this._root=Xn(this._svg,zg,"g",Zn),Iu(this._root,PZ),Po(this._svg,zg+1)),this.background(this._bgcolor),Ek.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Ek.background.apply(this,arguments)},resize(e,t,n,i){return Ek.resize.call(this,e,t,n,i),this._svg&&(Iu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Xn(e,zg,"rect",Zn),Iu(n,{width:this._width,height:this._height,fill:t}));const i=MZ(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Po(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,o,a,s,l;for(a=0,s=e.length;a<s;++a)if(n=e[a],i=n.mark,i.marktype!==r&&(r=i.marktype,o=_o[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,pz(n,t),i.items.forEach(u=>{u.dirty=t})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,pz(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,i){if(!this.isDirty(t))return t._svg;const r=this._svg,o=t.marktype,a=_o[o],s=t.interactive===!1?"none":null,l=a.tag==="g",u=mz(t,e,n,"g",r);if(o!=="group"&&i!=null&&!i.includes(o))return Po(u,0),t._svg;u.setAttribute("class",yZ(t));const c=TZ(t);for(const g in c)rr(u,g,c[g]);l||rr(u,"pointer-events",s),rr(u,"clip-path",t.clip?E$(this,t,t.group):null);let d=null,h=0;const m=g=>{const y=this.isDirty(g),v=mz(g,u,d,a.tag,r);y&&(this._update(a,v,g),l&&J1e(this,v,g,i)),d=v,++h};return a.nested?t.items.length&&m(t.items[0]):Ia(t,m),Po(u,h),u},_update(e,t,n){Sl=t,Bi=t.__values__,RZ(V0,n),e.attr(V0,n,this);const i=exe[e.type];i&&i.call(this,e,t,n),Sl&&this.style(Sl,n)},style(e,t){if(t!=null){for(const n in Zb){let i=n==="font"?Dv(t):t[n];if(i===Bi[n])continue;const r=Zb[n];i==null?e.removeAttribute(r):(w$(i)&&(i=qY(i,this._defs.gradient,$Z())),e.setAttribute(r,i+"")),Bi[n]=i}for(const n in Xb)E_(e,Xb[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=Xn(e,zg+1,"defs",Zn)),i=X1e(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=Xn(e,zg+1,"defs",Zn)),i=K1e(n,t.clipping[r],i);n&&(i===0?(e.removeChild(n),t.el=null):Po(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function pz(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function X1e(e,t,n){let i,r,o;if(t.gradient==="radial"){let a=Xn(e,n++,"pattern",Zn);Iu(a,{id:jb+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Xn(a,0,"rect",Zn),Iu(a,{width:1,height:1,fill:`url(${$Z()}#${t.id})`}),e=Xn(e,n++,"radialGradient",Zn),Iu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Xn(e,n++,"linearGradient",Zn),Iu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=Xn(e,i,"stop",Zn),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Po(e,i),n}function K1e(e,t,n){let i;return e=Xn(e,n,"clipPath",Zn),e.setAttribute("id",t.id),t.path?(i=Xn(e,0,"path",Zn),i.setAttribute("d",t.path)):(i=Xn(e,0,"rect",Zn),Iu(i,{x:0,y:0,width:t.width,height:t.height})),Po(e,1),n+1}function J1e(e,t,n,i){t=t.lastChild.previousSibling;let r,o=0;Ia(n,a=>{r=e.mark(t,a,r,i),++o}),Po(t,1+o)}function mz(e,t,n,i,r){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=Ou(a,i,Zn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},i==="g"))){const s=Ou(a,"path",Zn);o.appendChild(s),s.__data__=e;const l=Ou(a,"g",Zn);o.appendChild(l),l.__data__=e;const u=Ou(a,"path",Zn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==r||Q1e(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Q1e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Sl=null,Bi=null;const exe={group(e,t,n){const i=Sl=t.childNodes[2];Bi=i.__values__,e.foreground(V0,n,this),Bi=t.__values__,Sl=t.childNodes[1],e.content(V0,n,this);const r=Sl=t.childNodes[0];e.background(V0,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Bi.events&&(rr(i,"pointer-events",o),rr(r,"pointer-events",o),Bi.events=o),n.strokeForeground&&n.stroke){const a=n.fill;rr(i,"display",null),this.style(r,n),rr(r,"stroke",null),a&&(n.fill=null),Bi=i.__values__,this.style(i,n),a&&(n.fill=a),Sl=null}else rr(i,"display","none")},image(e,t,n){n.smooth===!1?(E_(t,"image-rendering","optimizeSpeed"),E_(t,"image-rendering","pixelated")):E_(t,"image-rendering",null)},text(e,t,n){const i=Lv(n);let r,o,a,s;fe(i)?(o=i.map(l=>pc(n,l)),r=o.join(`
`),r!==Bi.text&&(Po(t,0),a=t.ownerDocument,s=hc(n),o.forEach((l,u)=>{const c=Ou(a,"tspan",Zn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",s)),t.appendChild(c)}),Bi.text=r)):(o=pc(n,i),o!==Bi.text&&(t.textContent=o,Bi.text=o)),rr(t,"font-family",Dv(n)),rr(t,"font-size",Ls(n)+"px"),rr(t,"font-style",n.fontStyle),rr(t,"font-variant",n.fontVariant),rr(t,"font-weight",n.fontWeight)}};function V0(e,t,n){t!==Bi[e]&&(n?txe(Sl,e,t,n):rr(Sl,e,t),Bi[e]=t)}function E_(e,t,n){n!==Bi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Bi[t]=n)}function Iu(e,t){for(const n in t)rr(e,n,t[n])}function rr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function txe(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function $Z(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function X$(e){Eo.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}_e(X$,Eo,{svg(){return this._text},_render(e){const t=Z$();t.open("svg",xt({},By,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",PZ,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=_o[t.marktype],i=n.tag,r=[RZ,n.attr];e.open("g",{class:yZ(t),"clip-path":t.clip?E$(this,t,t.group):null},TZ(t),{"pointer-events":i!=="g"&&t.interactive===!1?"none":null});const o=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(i,this.attr(t,a,r,i!=="g"?i:null)),i==="text"){const l=Lv(a);if(fe(l)){const u={x:0,dy:hc(a)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(pc(a,l[c])).close()}else e.text(pc(a,l))}else if(i==="g"){const l=a.strokeForeground,u=a.fill,c=a.stroke;l&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),Ia(a,d=>this.mark(e,d)),e.close(),l&&c?(u&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),u&&(a.fill=u)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):Ia(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const r={},o=(a,s,l,u)=>{r[u||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),i&&nxe(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const o=t[r],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:jb+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(const r in n){const o=n[r];e.open("clipPath",{id:r}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function nxe(e,t,n,i,r){let o;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Dv(t),e["font-size"]=Ls(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in Zb){let s=t[a];const l=Zb[a];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(w$(s)&&(s=qY(s,r.gradient,"")),e[l]=s)}for(const a in Xb){const s=t[a];s!=null&&(o=o||[],o.push(`${Xb[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}const ma={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function ixe(e){ma.svgMarkTypes=e.svgMarkTypes??["text"],ma.svgOnTop=e.svgOnTop??!0,ma.debug=e.debug??!1}function Kb(e){Eo.call(this,e),this._svgRenderer=new TS(e),this._canvasRenderer=new Uy(e)}const gz=Eo.prototype;_e(Kb,Eo,{initialize(e,t,n,i,r){this._root_el=Xn(e,0,"div");const o=Xn(this._root_el,0,"div"),a=Xn(this._root_el,1,"div");return this._root_el.style.position="relative",ma.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=ma.svgOnTop?a:o,this._canvasEl=ma.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,i,r),this._svgRenderer.initialize(this._svgEl,t,n,i,r),gz.initialize.call(this,e,t,n,i,r)},dirty(e){return ma.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const i=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(r=>!ma.svgMarkTypes.includes(r));this._svgRenderer.render(e,ma.svgMarkTypes),this._canvasRenderer.render(e,i)},resize(e,t,n,i){return gz.resize.call(this,e,t,n,i),this._svgRenderer.resize(e,t,n,i),this._canvasRenderer.resize(e,t,n,i),this},background(e){return ma.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function K$(e,t){gc.call(this,e,t)}_e(K$,gc,{initialize(e,t,n){const i=Xn(Xn(e,0,"div"),ma.svgOnTop?0:1,"div");return gc.prototype.initialize.call(this,i,t,n)}});const OZ="canvas",IZ="hybrid",LZ="png",DZ="svg",zZ="none",Lu={Canvas:OZ,PNG:LZ,SVG:DZ,Hybrid:IZ,None:zZ},ud={};ud[OZ]=ud[LZ]={renderer:Uy,headless:Uy,handler:gc};ud[DZ]={renderer:TS,headless:X$,handler:W$};ud[IZ]={renderer:Kb,headless:Kb,handler:K$};ud[zZ]={};function AS(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(ud[e]=t,this):ud[e]}function jZ(e,t,n){const i=[],r=new qn().union(t),o=e.marktype;return o?BZ(e,r,n,i):o==="group"?HZ(e,r,n,i):le("Intersect scene must be mark node or group item.")}function BZ(e,t,n,i){if(rxe(e,t,n)){const r=e.items,o=e.marktype,a=r.length;let s=0;if(o==="group")for(;s<a;++s)HZ(r[s],t,n,i);else for(const l=_o[o].isect;s<a;++s){const u=r[s];UZ(u,t,l)&&i.push(u)}}return i}function rxe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function HZ(e,t,n,i){n&&n(e.mark)&&UZ(e,t,_o.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let l=0;l<o;++l)BZ(r[l],t,n,i);t.translate(a,s)}return i}function UZ(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const kk=new qn;function WZ(e){const t=e.clip;if(_t(t))t(Ov(kk.clear()));else if(t)kk.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(kk)}const oxe=1e-9;function J$(e,t,n){return e===t?!0:n==="path"?GZ(e,t):e instanceof Date&&t instanceof Date?+e==+t:jt(e)&&jt(t)?Math.abs(e-t)<=oxe:!e||!t||!Le(e)&&!Le(t)?e==t:axe(e,t)}function GZ(e,t){return J$(Gp(e),Gp(t))}function axe(e,t){var n=Object.keys(e),i=Object.keys(t),r,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(r=n[o],!J$(e[r],t[r],r))return!1;return typeof e==typeof t}function sxe(){QY(),Mye()}const Yp="top",wa="left",Sa="right",yc="bottom",lxe="top-left",uxe="top-right",cxe="bottom-left",fxe="bottom-right",Q$="start",MA="middle",ar="end",dxe="x",hxe="y",FS="group",eO="axis",tO="title",pxe="frame",mxe="scope",nO="legend",qZ="row-header",VZ="row-footer",YZ="row-title",ZZ="column-header",XZ="column-footer",KZ="column-title",gxe="padding",yxe="symbol",JZ="fit",QZ="fit-x",eX="fit-y",vxe="pad",iO="none",wx="all",NA="each",rO="flush",Du="column",zu="row";function tX(e){ie.call(this,null,e)}_e(tX,ie,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=_o[r],a=o.bound;let s=i.bounds,l;if(o.nested)i.items.length&&n.dirty(i.items[0]),s=Sx(i,a),i.items.forEach(u=>{u.bounds.clear().union(s)});else if(r===FS||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),s.clear(),i.items.forEach(u=>s.union(Sx(u,a))),i.role){case eO:case nO:case tO:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{s.union(Sx(u,a))}),t.visit(t.MOD,u=>{l=l||s.alignsWith(u.bounds),n.dirty(u),s.union(Sx(u,a))}),l&&(s.clear(),i.items.forEach(u=>s.union(u.bounds)));return WZ(i),t.modifies("bounds")}});function Sx(e,t,n){return t(e.bounds.clear(),e,n)}const yz=":vega_identifier:";function oO(e){ie.call(this,0,e)}oO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};_e(oO,ie,{transform(e,t){const n=xxe(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}});function xxe(e){return e._signals[yz]||(e._signals[yz]=e.add(0))}function nX(e){ie.call(this,null,e)}_e(nX,ie,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,_xe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===FS?_S:xS;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function _xe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function iX(e){ie.call(this,null,e)}const vz={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!rX(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},rX=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),xz=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,o;n<i;r=o,++n)if(rX(r,o=e[n].bounds,t))return!0},bxe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},wxe=(e,t,n)=>{var i=e.range(),r=new qn;return t===Yp||t===yc?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)},_z=e=>(e.forEach(t=>t.opacity=1),e),bz=(e,t)=>e.reflow(t.modified()).modifies("opacity");_e(iX,ie,{transform(e,t){const n=vz[e.method]||vz.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,o,a;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(_z(r),t=bz(t,e)),t;if(r=r.filter(bxe),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=_z(r),t=bz(t,e),o.length>=3&&xz(o,i)){do o=n(o,i);while(o.length>=3&&xz(o,i));o.length<3&&!Ot(r).opacity&&(o.length>1&&(Ot(o).opacity=0),Ot(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=wxe(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{a(l)||(l.opacity=0)}));const s=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&s.union(l.bounds)}),t}});function oX(e){ie.call(this,null,e)}_e(oX,ie,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const ji=new qn;function tp(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Sxe(e){var t=e.items[0].orient;return t===wa||t===Sa}function Cxe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Exe(e,t,n,i){var r=t.items[0],o=r.datum,a=r.translate!=null?r.translate:.5,s=r.orient,l=Cxe(o),u=r.range,c=r.offset,d=r.position,h=r.minExtent,m=r.maxExtent,g=o.title&&r.items[l[2]].items[0],y=r.titlePadding,v=r.bounds,_=g&&z$(g),b=0,S=0,k,R;switch(ji.clear().union(v),v.clear(),(k=l[0])>-1&&v.union(r.items[k].bounds),(k=l[1])>-1&&v.union(r.items[k].bounds),s){case Yp:b=d||0,S=-c,R=Math.max(h,Math.min(m,-v.y1)),v.add(0,-R).add(u,0),g&&Cx(e,g,R,y,_,0,-1,v);break;case wa:b=-c,S=d||0,R=Math.max(h,Math.min(m,-v.x1)),v.add(-R,0).add(0,u),g&&Cx(e,g,R,y,_,1,-1,v);break;case Sa:b=n+c,S=d||0,R=Math.max(h,Math.min(m,v.x2)),v.add(0,0).add(R,u),g&&Cx(e,g,R,y,_,1,1,v);break;case yc:b=d||0,S=i+c,R=Math.max(h,Math.min(m,v.y2)),v.add(0,0).add(u,R),g&&Cx(e,g,R,y,0,0,1,v);break;default:b=r.x,S=r.y}return Zl(v.translate(b,S),r),tp(r,"x",b+a)|tp(r,"y",S+a)&&(r.bounds=ji,e.dirty(r),r.bounds=v,e.dirty(r)),r.mark.bounds.clear().union(v)}function Cx(e,t,n,i,r,o,a,s){const l=t.bounds;if(t.auto){const u=a*(n+r+i);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}s.union(l)}const wz=(e,t)=>Math.floor(Math.min(e,t)),Sz=(e,t)=>Math.ceil(Math.max(e,t));function kxe(e){var t=e.items,n=t.length,i=0,r,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],o=r.items,r.marktype===FS)switch(r.role){case eO:case nO:case tO:break;case qZ:a.rowheaders.push(...o);break;case VZ:a.rowfooters.push(...o);break;case ZZ:a.colheaders.push(...o);break;case XZ:a.colfooters.push(...o);break;case YZ:a.rowtitle=o[0];break;case KZ:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function Rxe(e){return new qn().set(0,0,e.width||0,e.height||0)}function Txe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function _n(e,t,n){const i=Le(e)?e[t]:e;return i??(n!==void 0?n:0)}function Cz(e){return e<0?Math.ceil(-e):0}function aX(e,t,n){var i=!n.nodirty,r=n.bounds===rO?Rxe:Txe,o=ji.set(0,0,0,0),a=_n(n.align,Du),s=_n(n.align,zu),l=_n(n.padding,Du),u=_n(n.padding,zu),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),h=t.length,m=Array(h),g=Array(c),y=0,v=Array(h),_=Array(d),b=0,S=Array(h),k=Array(h),R=Array(h),F,T,P,B,O,D,W,j,U,G,Z;for(T=0;T<c;++T)g[T]=0;for(T=0;T<d;++T)_[T]=0;for(T=0;T<h;++T)D=t[T],O=R[T]=r(D),D.x=D.x||0,S[T]=0,D.y=D.y||0,k[T]=0,P=T%c,B=~~(T/c),y=Math.max(y,W=Math.ceil(O.x2)),b=Math.max(b,j=Math.ceil(O.y2)),g[P]=Math.max(g[P],W),_[B]=Math.max(_[B],j),m[T]=l+Cz(O.x1),v[T]=u+Cz(O.y1),i&&e.dirty(t[T]);for(T=0;T<h;++T)T%c===0&&(m[T]=0),T<c&&(v[T]=0);if(a===NA)for(P=1;P<c;++P){for(Z=0,T=P;T<h;T+=c)Z<m[T]&&(Z=m[T]);for(T=P;T<h;T+=c)m[T]=Z+g[P-1]}else if(a===wx){for(Z=0,T=0;T<h;++T)T%c&&Z<m[T]&&(Z=m[T]);for(T=0;T<h;++T)T%c&&(m[T]=Z+y)}else for(a=!1,P=1;P<c;++P)for(T=P;T<h;T+=c)m[T]+=g[P-1];if(s===NA)for(B=1;B<d;++B){for(Z=0,T=B*c,F=T+c;T<F;++T)Z<v[T]&&(Z=v[T]);for(T=B*c;T<F;++T)v[T]=Z+_[B-1]}else if(s===wx){for(Z=0,T=c;T<h;++T)Z<v[T]&&(Z=v[T]);for(T=c;T<h;++T)v[T]=Z+b}else for(s=!1,B=1;B<d;++B)for(T=B*c,F=T+c;T<F;++T)v[T]+=_[B-1];for(U=0,T=0;T<h;++T)U=m[T]+(T%c?U:0),S[T]+=U-t[T].x;for(P=0;P<c;++P)for(G=0,T=P;T<h;T+=c)G+=v[T],k[T]+=G-t[T].y;if(a&&_n(n.center,Du)&&d>1)for(T=0;T<h;++T)O=a===wx?y:g[T%c],U=O-R[T].x2-t[T].x-S[T],U>0&&(S[T]+=U/2);if(s&&_n(n.center,zu)&&c!==1)for(T=0;T<h;++T)O=s===wx?b:_[~~(T/c)],G=O-R[T].y2-t[T].y-k[T],G>0&&(k[T]+=G/2);for(T=0;T<h;++T)o.union(R[T].translate(S[T],k[T]));switch(U=_n(n.anchor,dxe),G=_n(n.anchor,hxe),_n(n.anchor,Du)){case ar:U-=o.width();break;case MA:U-=o.width()/2}switch(_n(n.anchor,zu)){case ar:G-=o.height();break;case MA:G-=o.height()/2}for(U=Math.round(U),G=Math.round(G),o.clear(),T=0;T<h;++T)t[T].mark.bounds.clear();for(T=0;T<h;++T)D=t[T],D.x+=S[T]+=U,D.y+=k[T]+=G,o.union(D.mark.bounds.union(D.bounds.translate(S[T],k[T]))),i&&e.dirty(D);return o}function Axe(e,t,n){var i=kxe(t),r=i.marks,o=n.bounds===rO?Fxe:Mxe,a=n.offset,s=n.columns||r.length,l=s<=0?1:Math.ceil(r.length/s),u=l*s,c,d,h,m,g,y,v;const _=aX(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(y=_n(n.headerBand,zu,null),c=Ex(e,i.rowheaders,r,s,l,-_n(a,"rowHeader"),wz,0,o,"x1",0,s,1,y)),i.colheaders&&(y=_n(n.headerBand,Du,null),d=Ex(e,i.colheaders,r,s,s,-_n(a,"columnHeader"),wz,1,o,"y1",0,1,s,y)),i.rowfooters&&(y=_n(n.footerBand,zu,null),h=Ex(e,i.rowfooters,r,s,l,_n(a,"rowFooter"),Sz,0,o,"x2",s-1,s,1,y)),i.colfooters&&(y=_n(n.footerBand,Du,null),m=Ex(e,i.colfooters,r,s,s,_n(a,"columnFooter"),Sz,1,o,"y2",u-s,1,s,y)),i.rowtitle&&(g=_n(n.titleAnchor,zu),v=_n(a,"rowTitle"),v=g===ar?h+v:c-v,y=_n(n.titleBand,zu,.5),Ez(e,i.rowtitle,v,0,_,y)),i.coltitle&&(g=_n(n.titleAnchor,Du),v=_n(a,"columnTitle"),v=g===ar?m+v:d-v,y=_n(n.titleBand,Du,.5),Ez(e,i.coltitle,v,1,_,y))}function Fxe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Mxe(e,t){return e.bounds[t]}function Ex(e,t,n,i,r,o,a,s,l,u,c,d,h,m){var g=n.length,y=0,v=0,_,b,S,k,R,F,T,P,B;if(!g)return y;for(_=c;_<g;_+=d)n[_]&&(y=a(y,l(n[_],u)));if(!t.length)return y;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),y+=o,b=0,k=t.length;b<k;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(_=c,b=0,k=t.length;b<k;++b,_+=d){for(F=t[b],R=F.mark.bounds,S=_;S>=0&&(T=n[S])==null;S-=h);s?(P=m==null?T.x:Math.round(T.bounds.x1+m*T.bounds.width()),B=y):(P=y,B=m==null?T.y:Math.round(T.bounds.y1+m*T.bounds.height())),R.union(F.bounds.translate(P-(F.x||0),B-(F.y||0))),F.x=P,F.y=B,e.dirty(F),v=a(v,R[u])}return v}function Ez(e,t,n,i,r,o){if(t){e.dirty(t);var a=n,s=n;i?a=Math.round(r.x1+o*r.width()):s=Math.round(r.y1+o*r.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function Nxe(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Pxe(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function $xe(e,t,n,i,r,o,a){const s=Nxe(n,t),l=Pxe(e,s("offset",0)),u=s("anchor",Q$),c=u===ar?1:u===MA?.5:0,d={align:NA,bounds:s("bounds",rO),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case wa:d.anchor={x:Math.floor(i.x1)-l,column:ar,y:c*(a||i.height()+2*i.y1),row:u};break;case Sa:d.anchor={x:Math.ceil(i.x2)+l,y:c*(a||i.height()+2*i.y1),row:u};break;case Yp:d.anchor={y:Math.floor(r.y1)-l,row:ar,x:c*(o||r.width()+2*r.x1),column:u};break;case yc:d.anchor={y:Math.ceil(r.y2)+l,x:c*(o||r.width()+2*r.x1),column:u};break;case lxe:d.anchor={x:l,y:l};break;case uxe:d.anchor={x:o-l,y:l,column:ar};break;case cxe:d.anchor={x:l,y:a-l,row:ar};break;case fxe:d.anchor={x:o-l,y:a-l,column:ar,row:ar};break}return d}function Oxe(e,t){var n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,a=n.x,s=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Lxe(e,n,n.items[0].items[0]),o=Ixe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),i.type===yxe&&Dxe(n.items[0].items[0].items[0].items),r!==iO&&(n.x=a=0,n.y=s=0),n.width=l,n.height=u,Zl(o.set(a,s,a+l,s+u),n),n.mark.bounds.clear().union(o),n}function Ixe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Lxe(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(!t.datum.title)(r||o)&&jg(e,n,r,o);else{var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=i-a.x,c=i-a.y;switch(a.orient){case wa:r+=Math.ceil(a.bounds.width())+l;break;case Sa:case yc:break;default:o+=a.bounds.height()+l}switch((r||o)&&jg(e,n,r,o),a.orient){case wa:c+=Sh(t,n,a,s,1,1);break;case Sa:u+=Sh(t,n,a,ar,0,0)+l,c+=Sh(t,n,a,s,1,1);break;case yc:u+=Sh(t,n,a,s,0,0),c+=Sh(t,n,a,ar,-1,0,1)+l;break;default:u+=Sh(t,n,a,s,0,0)}(u||c)&&jg(e,a,u,c),(u=Math.round(a.bounds.x1-i))<0&&(jg(e,n,-u,0),jg(e,a,-u,0))}}function Sh(e,t,n,i,r,o,a){const s=e.datum.type!=="symbol",l=n.datum.vgrad,u=s&&(o||!l)&&!a?t.items[0]:t,c=u.bounds[r?"y2":"x2"]-e.padding,d=l&&o?c:0,h=l&&o?0:c,m=r<=0?0:z$(n);return Math.round(i===Q$?d:i===ar?h-m:.5*(c-m))}function jg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Dxe(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function zxe(e,t,n,i,r){var o=t.items[0],a=o.frame,s=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],m=s===wa||s===Sa?i:n,g=0,y=0,v=0,_=0,b=0,S;if(a!==FS?s===wa?(g=r.y2,m=r.y1):s===Sa?(g=r.y1,m=r.y2):(g=r.x1,m=r.x2):s===wa&&(g=i,m=0),S=l===Q$?g:l===ar?m:(g+m)/2,h&&h.text){switch(s){case Yp:case yc:b=d.bounds.height()+c;break;case wa:_=d.bounds.width()+c;break;case Sa:_=-d.bounds.width()-c;break}ji.clear().union(h.bounds),ji.translate(_-(h.x||0),b-(h.y||0)),tp(h,"x",_)|tp(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(ji),h.mark.bounds.clear().union(ji),e.dirty(h)),ji.clear().union(h.bounds)}else ji.clear();switch(ji.union(d.bounds),s){case Yp:y=S,v=r.y1-ji.height()-u;break;case wa:y=r.x1-ji.width()-u,v=S;break;case Sa:y=r.x2+ji.width()+u,v=S;break;case yc:y=S,v=r.y2+u;break;default:y=o.x,v=o.y}return tp(o,"x",y)|tp(o,"y",v)&&(ji.translate(y,v),e.dirty(o),o.bounds.clear().union(ji),t.bounds.clear().union(ji),e.dirty(o)),o.bounds}function sX(e){ie.call(this,null,e)}_e(sX,ie,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Axe(n,i,e.layout),Bxe(n,i,e)}),jxe(e.mark.group)?t.reflow():t}});function jxe(e){return e&&e.mark.role!=="legend-entry"}function Bxe(e,t,n){var i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new qn().set(0,0,r,o),s=a.clone(),l=a.clone(),u=[],c,d,h,m,g,y;for(g=0,y=i.length;g<y;++g)switch(d=i[g],d.role){case eO:m=Sxe(d)?s:l,m.union(Exe(e,d,r,o));break;case tO:c=d;break;case nO:u.push(Oxe(e,d));break;case pxe:case mxe:case qZ:case VZ:case YZ:case ZZ:case XZ:case KZ:s.union(d.bounds),l.union(d.bounds);break;default:a.union(d.bounds)}if(u.length){const v={};u.forEach(_=>{h=_.orient||Sa,h!==iO&&(v[h]||(v[h]=[])).push(_)});for(const _ in v){const b=v[_];aX(e,b,$xe(b,_,n.legends,s,l,r,o))}u.forEach(_=>{const b=_.bounds;if(b.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=b,e.dirty(_)),n.autosize&&(n.autosize.type===JZ||n.autosize.type===QZ||n.autosize.type===eX))switch(_.orient){case wa:case Sa:a.add(b.x1,0).add(b.x2,0);break;case Yp:case yc:a.add(0,b.y1).add(0,b.y2)}else a.union(b)})}a.union(s).union(l),c&&a.union(zxe(e,c,r,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),Hxe(e,t,a,n)}function Hxe(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),m=Math.max(0,Math.ceil(n.y2-c));if(r.contains===gxe){const g=e.padding();a-=g.left+g.right,s-=g.top+g.bottom}o===iO?(u=0,d=0,l=a,c=s):o===JZ?(l=Math.max(0,a-u-h),c=Math.max(0,s-d-m)):o===QZ?(l=Math.max(0,a-u-h),s=c+d+m):o===eX?(a=l+u+h,c=Math.max(0,s-d-m)):o===vxe&&(a=l+u+h,s=c+d+m),e._resizeView(a,s,l,c,[u,d],r.resize)}const Uxe=Object.freeze(Object.defineProperty({__proto__:null,bound:tX,identifier:oO,mark:nX,overlap:iX,render:oX,viewlayout:sX},Symbol.toStringTag,{value:"Module"}));function lX(e){ie.call(this,null,e)}_e(lX,ie,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=_$(o,a,e.minstep),l=e.format||zY(n,o,s,e.formatSpecifier,e.formatType,!!e.values),u=e.values?DY(o,e.values,s):b$(o,s);return r&&(i.rem=r),r=u.map((c,d)=>qt({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(qt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function uX(e){ie.call(this,null,e)}function Wxe(){return qt({})}function Gxe(e){const t=Em().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}_e(uX,ie,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Wxe,o=e.key||Je,a=this.value;return fe(i.encode)&&(i.encode=null),a&&(e.modified("key")||t.modified(o))&&le("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=Gxe(o)),t.visit(t.ADD,s=>{const l=o(s);let u=a.get(l);u?u.exit?(a.empty--,i.add.push(u)):i.mod.push(u):(u=r(s),a.set(l,u),i.add.push(u)),u.datum=s,u.exit=!1}),t.visit(t.MOD,s=>{const l=o(s),u=a.get(l);u&&(u.datum=s,i.mod.push(u))}),t.visit(t.REM,s=>{const l=o(s),u=a.get(l);s===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),i}});function cX(e){ie.call(this,null,e)}_e(cX,ie,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(fe(o))if(n.changed()||o.every(d=>r[d]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=r.update||mu,l=r.enter||mu,u=r.exit||mu,c=(o&&!a?r[o]:s)||mu;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),s(d,e)}),n.modifies(l.output),n.modifies(s.output),c!==mu&&c!==s&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==mu&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),a||c!==mu){const d=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(d,h=>{const m=l(h,e)||i;(c(h,e)||m)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):t.visit(d,h=>{(c(h,e)||i)&&n.mod.push(h)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function fX(e){ie.call(this,[],e)}_e(fX,ie,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||v_,a=e.scale,s=+e.limit,l=_$(a,e.count==null?5:e.count,e.minstep),u=!!e.values||o===v_,c=e.format||UY(n,a,l,o,e.formatSpecifier,e.formatType,u),d=e.values||HY(a,l),h,m,g,y,v;return r&&(i.rem=r),o===v_?(s&&d.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,s-1),v=!0):r=d,_t(g=e.size)?(!e.values&&a(r[0])===0&&(r=r.slice(1)),y=r.reduce((_,b)=>Math.max(_,g(b,e)),0)):g=Qi(y=g||8),r=r.map((_,b)=>qt({index:b,label:c(_,b,r),value:_,offset:y,size:g(_,e)})),v&&(v=d[r.length],r.push(qt({index:r.length,label:`${d.length-r.length} entries`,value:v,offset:y,size:g(v,e)})))):o===vye?(h=a.domain(),m=OY(a,h[0],Ot(h)),d.length<3&&!e.values&&h[0]!==Ot(h)&&(d=[h[0],Ot(h)]),r=d.map((_,b)=>qt({index:b,label:c(_,b,d),value:_,perc:m(_)}))):(g=d.length-1,m=Aye(a),r=d.map((_,b)=>qt({index:b,label:c(_,b,d),value:_,perc:b?m(_):0,perc2:b===g?1:m(d[b+1])}))),i.source=r,i.add=r,this.value=r,i}});const qxe=e=>e.source.x,Vxe=e=>e.source.y,Yxe=e=>e.target.x,Zxe=e=>e.target.y;function aO(e){ie.call(this,{},e)}aO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};_e(aO,ie,{transform(e,t){var n=e.sourceX||qxe,i=e.sourceY||Vxe,r=e.targetX||Yxe,o=e.targetY||Zxe,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=kz.get(l+"-"+s)||kz.get(l);return u||le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=u(n(c),i(c),r(c),o(c))}),t.reflow(e.modified()).modifies(a)}});const dX=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Xxe=(e,t,n,i)=>dX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),hX=(e,t,n,i)=>{var r=n-e,o=i-t,a=Math.hypot(r,o)/2,s=180*Math.atan2(o,r)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+i},Kxe=(e,t,n,i)=>hX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),pX=(e,t,n,i)=>{const r=n-e,o=i-t,a=.2*(r+o),s=.2*(o-r);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(i-a)+" "+n+","+i},Jxe=(e,t,n,i)=>pX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Qxe=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,e_e=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,t_e=(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*s+"L"+i*a+","+i*s},n_e=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},i_e=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},r_e=(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*a+","+l*s+" "+i*a+","+i*s},kz=Em({line:dX,"line-radial":Xxe,arc:hX,"arc-radial":Kxe,curve:pX,"curve-radial":Jxe,"orthogonal-horizontal":Qxe,"orthogonal-vertical":e_e,"orthogonal-radial":t_e,"diagonal-horizontal":n_e,"diagonal-vertical":i_e,"diagonal-radial":r_e});function sO(e){ie.call(this,null,e)}sO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};_e(sO,ie,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],o=e.field||wm,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,d=a,h=(s-a)/NG(u),m=co(c),g,y,v;for(e.sort&&m.sort((_,b)=>u[_]-u[b]),g=0;g<c;++g)v=u[m[g]],y=l[m[g]],y[i]=d,y[r]=d+=v*h;return this.value=u,t.reflow(e.modified()).modifies(n)}});const o_e=5;function a_e(e){const t=e.type;return!e.bins&&(t===Hp||t===Tv||t===Av)}function mX(e){return y$(e)&&e!==_s}const s_e=$a(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function gX(e){ie.call(this,null,e),this.modified(!0)}_e(gX,ie,{transform(e,t){var n=t.dataflow,i=this.value,r=l_e(e);(!i||r!==i.type)&&(this.value=i=Ut(r)());for(r in e)if(!s_e[r]){if(r==="padding"&&mX(i.type))continue;_t(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return p_e(i,e,h_e(i,e,c_e(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function l_e(e){var t=e.type,n="",i;return t===_s?_s+"-"+Hp:(u_e(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?_s+"-":i===3?Pm+"-":""),(n+t||Hp).toLowerCase())}function u_e(e){const t=e.type;return y$(t)&&t!==sd&&t!==ld&&(e.scheme||e.range&&e.range.length&&e.range.every(Ie))}function c_e(e,t,n){const i=f_e(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,o=e.type,a=t.zero||t.zero===void 0&&a_e(e),s,l;if(!r)return 0;if(mX(o)&&t.padding&&r[0]!==Ot(r)&&(r=d_e(o,r,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(r=r.slice()).length-1||1,a&&(r[0]>0&&(r[0]=0),r[s]<0&&(r[s]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[s]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>r[s]?s+1:l<r[0]?0:s;u!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return e.domain(yX(o,r,n)),o===h$&&e.unknown(t.domainImplicit?cA:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&_$(e,t.nice)||null),r.length}function f_e(e,t,n){return t?(e.domain(yX(e.type,t,n)),t.length):-1}function d_e(e,t,n,i,r,o){var a=Math.abs(Ot(n)-n[0]),s=a/(a-2*i),l=e===Ul?ON(t,null,s):e===Av?wb(t,null,s,.5):e===Tv?wb(t,null,s,r||1):e===pS?IN(t,null,s,o||1):$N(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function yX(e,t,n){if(FY(e)){var i=Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+be(t))}return t}function h_e(e,t,n){let i=t.bins;if(i&&!fe(i)){const r=e.domain(),o=r[0],a=Ot(r),s=i.step;let l=i.start==null?o:i.start,u=i.stop==null?a:i.stop;s||le("Scale bins parameter missing step property."),l<o&&(l=s*Math.ceil(o/s)),u>a&&(u=s*Math.floor(a/s)),i=co(l,u+s/2,s)}return i?e.bins=i:e.bins&&delete e.bins,e.type===p$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function p_e(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(t.rangeStep!=null)o=m_e(i,t,n);else if(t.scheme&&(o=g_e(i,t,n),_t(o))){if(e.interpolator)return e.interpolator(o);le(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&MY(i))return e.interpolator(yS(PA(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(v$(t.interpolate,t.interpolateGamma)):_t(e.round)?e.round(r):_t(e.rangeRound)&&e.interpolate(r?kv:$c),o&&e.range(PA(o,t.reverse))}function m_e(e,t,n){e!==CY&&e!==yA&&le("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===yA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*d$(n,r,i)]}function g_e(e,t,n){var i=t.schemeExtent,r,o;return fe(t.scheme)?o=yS(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),o=x$(r),o||le(`Unrecognized scheme name: ${t.scheme}`)),n=e===gS?n+1:e===p$?n-1:e===Up||e===mS?+t.schemeCount||o_e:n,MY(e)?Rz(o,i,t.reverse):_t(o)?$Y(Rz(o,i),n):e===h$?o:o.slice(0,n)}function Rz(e,t,n){return _t(e)&&(t||n)?PY(e,PA(t||[0,1],n)):e}function PA(e,t){return t?e.slice().reverse():e}function vX(e){ie.call(this,null,e)}_e(vX,ie,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Id(e.sort)),this.modified(n),t}});const Tz="zero",xX="center",_X="normalize",bX=["y0","y1"];function lO(e){ie.call(this,null,e)}lO.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Tz,values:[Tz,xX,_X]},{name:"as",type:"string",array:!0,length:2,default:bX}]};_e(lO,ie,{transform(e,t){var n=e.as||bX,i=n[0],r=n[1],o=Id(e.sort),a=e.field||wm,s=e.offset===xX?y_e:e.offset===_X?v_e:x_e,l,u,c,d;for(l=__e(t.source,e.groupby,o,a),u=0,c=l.length,d=l.max;u<c;++u)s(l[u],d,a,i,r);return t.reflow(e.modified()).modifies(n)}});function y_e(e,t,n,i,r){for(var o=(t-e.sum)/2,a=e.length,s=0,l;s<a;++s)l=e[s],l[i]=o,l[r]=o+=Math.abs(n(l))}function v_e(e,t,n,i,r){for(var o=1/e.sum,a=0,s=e.length,l=0,u=0,c;l<s;++l)c=e[l],c[i]=a,c[r]=a=o*(u+=Math.abs(n(c)))}function x_e(e,t,n,i,r){for(var o=0,a=0,s=e.length,l=0,u,c;l<s;++l)c=e[l],u=+n(c),u<0?(c[i]=a,c[r]=a+=u):(c[i]=o,c[r]=o+=u)}function __e(e,t,n,i){var r=[],o=y=>y(c),a,s,l,u,c,d,h,m,g;if(t==null)r.push(e.slice());else for(a={},s=0,l=e.length;s<l;++s)c=e[s],d=t.map(o),h=a[d],h||(a[d]=h=[],r.push(h)),h.push(c);for(d=0,g=0,u=r.length;d<u;++d){for(h=r[d],s=0,m=0,l=h.length;s<l;++s)m+=Math.abs(i(h[s]));h.sum=m,m>g&&(g=m),n&&h.sort(n)}return r.max=g,r}const b_e=Object.freeze(Object.defineProperty({__proto__:null,axisticks:lX,datajoin:uX,encode:cX,legendentries:fX,linkpath:aO,pie:sO,scale:gX,sortitems:vX,stack:lO},Symbol.toStringTag,{value:"Module"}));var it=1e-6,Jb=1e-12,Rt=Math.PI,On=Rt/2,Qb=Rt/4,gr=Rt*2,Ln=180/Rt,Ct=Rt/180,$t=Math.abs,Om=Math.atan,Ko=Math.atan2,rt=Math.cos,kx=Math.ceil,wX=Math.exp,$A=Math.hypot,ew=Math.log,Rk=Math.pow,Qe=Math.sin,Lo=Math.sign||function(e){return e>0?1:e<0?-1:0},yr=Math.sqrt,uO=Math.tan;function SX(e){return e>1?0:e<-1?Rt:Math.acos(e)}function Yr(e){return e>1?On:e<-1?-On:Math.asin(e)}function Ei(){}function tw(e,t){e&&Fz.hasOwnProperty(e.type)&&Fz[e.type](e,t)}var Az={Feature:function(e,t){tw(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)tw(n[i].geometry,t)}},Fz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){OA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)OA(n[i],t,0)},Polygon:function(e,t){Mz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Mz(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)tw(n[i],t)}};function OA(e,t,n){var i=-1,r=e.length-n,o;for(t.lineStart();++i<r;)o=e[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function Mz(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)OA(e[n],t,1);t.polygonEnd()}function pl(e,t){e&&Az.hasOwnProperty(e.type)?Az[e.type](e,t):tw(e,t)}var nw=new hr,iw=new hr,CX,EX,IA,LA,DA,As={point:Ei,lineStart:Ei,lineEnd:Ei,polygonStart:function(){nw=new hr,As.lineStart=w_e,As.lineEnd=S_e},polygonEnd:function(){var e=+nw;iw.add(e<0?gr+e:e),this.lineStart=this.lineEnd=this.point=Ei},sphere:function(){iw.add(gr)}};function w_e(){As.point=C_e}function S_e(){kX(CX,EX)}function C_e(e,t){As.point=kX,CX=e,EX=t,e*=Ct,t*=Ct,IA=e,LA=rt(t=t/2+Qb),DA=Qe(t)}function kX(e,t){e*=Ct,t*=Ct,t=t/2+Qb;var n=e-IA,i=n>=0?1:-1,r=i*n,o=rt(t),a=Qe(t),s=DA*a,l=LA*o+s*rt(r),u=s*i*Qe(r);nw.add(Ko(u,l)),IA=e,LA=o,DA=a}function E_e(e){return iw=new hr,pl(e,As),iw*2}function rw(e){return[Ko(e[1],e[0]),Yr(e[2])]}function cd(e){var t=e[0],n=e[1],i=rt(n);return[i*rt(t),i*Qe(t),Qe(n)]}function Rx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Tk(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Tx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ow(e){var t=yr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kn,$r,Mn,oo,_f,RX,TX,mp,Y0,Cu,Wl,cl={point:zA,lineStart:Nz,lineEnd:Pz,polygonStart:function(){cl.point=FX,cl.lineStart=k_e,cl.lineEnd=R_e,Y0=new hr,As.polygonStart()},polygonEnd:function(){As.polygonEnd(),cl.point=zA,cl.lineStart=Nz,cl.lineEnd=Pz,nw<0?(kn=-(Mn=180),$r=-(oo=90)):Y0>it?oo=90:Y0<-it&&($r=-90),Wl[0]=kn,Wl[1]=Mn},sphere:function(){kn=-(Mn=180),$r=-(oo=90)}};function zA(e,t){Cu.push(Wl=[kn=e,Mn=e]),t<$r&&($r=t),t>oo&&(oo=t)}function AX(e,t){var n=cd([e*Ct,t*Ct]);if(mp){var i=Zp(mp,n),r=[i[1],-i[0],0],o=Zp(r,i);ow(o),o=rw(o);var a=e-_f,s=a>0?1:-1,l=o[0]*Ln*s,u,c=$t(a)>180;c^(s*_f<l&&l<s*e)?(u=o[1]*Ln,u>oo&&(oo=u)):(l=(l+360)%360-180,c^(s*_f<l&&l<s*e)?(u=-o[1]*Ln,u<$r&&($r=u)):(t<$r&&($r=t),t>oo&&(oo=t))),c?e<_f?ro(kn,e)>ro(kn,Mn)&&(Mn=e):ro(e,Mn)>ro(kn,Mn)&&(kn=e):Mn>=kn?(e<kn&&(kn=e),e>Mn&&(Mn=e)):e>_f?ro(kn,e)>ro(kn,Mn)&&(Mn=e):ro(e,Mn)>ro(kn,Mn)&&(kn=e)}else Cu.push(Wl=[kn=e,Mn=e]);t<$r&&($r=t),t>oo&&(oo=t),mp=n,_f=e}function Nz(){cl.point=AX}function Pz(){Wl[0]=kn,Wl[1]=Mn,cl.point=zA,mp=null}function FX(e,t){if(mp){var n=e-_f;Y0.add($t(n)>180?n+(n>0?360:-360):n)}else RX=e,TX=t;As.point(e,t),AX(e,t)}function k_e(){As.lineStart()}function R_e(){FX(RX,TX),As.lineEnd(),$t(Y0)>it&&(kn=-(Mn=180)),Wl[0]=kn,Wl[1]=Mn,mp=null}function ro(e,t){return(t-=e)<0?t+360:t}function T_e(e,t){return e[0]-t[0]}function $z(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function A_e(e){var t,n,i,r,o,a,s;if(oo=Mn=-(kn=$r=1/0),Cu=[],pl(e,cl),n=Cu.length){for(Cu.sort(T_e),t=1,i=Cu[0],o=[i];t<n;++t)r=Cu[t],$z(i,r[0])||$z(i,r[1])?(ro(i[0],r[1])>ro(i[0],i[1])&&(i[1]=r[1]),ro(r[0],i[1])>ro(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,n=o.length-1,t=0,i=o[n];t<=n;i=r,++t)r=o[t],(s=ro(i[1],r[0]))>a&&(a=s,kn=r[0],Mn=i[1])}return Cu=Wl=null,kn===1/0||$r===1/0?[[NaN,NaN],[NaN,NaN]]:[[kn,$r],[Mn,oo]]}var y0,aw,sw,lw,uw,cw,fw,dw,jA,BA,HA,MX,NX,sr,lr,ur,Ca={sphere:Ei,point:cO,lineStart:Oz,lineEnd:Iz,polygonStart:function(){Ca.lineStart=N_e,Ca.lineEnd=P_e},polygonEnd:function(){Ca.lineStart=Oz,Ca.lineEnd=Iz}};function cO(e,t){e*=Ct,t*=Ct;var n=rt(t);zv(n*rt(e),n*Qe(e),Qe(t))}function zv(e,t,n){++y0,sw+=(e-sw)/y0,lw+=(t-lw)/y0,uw+=(n-uw)/y0}function Oz(){Ca.point=F_e}function F_e(e,t){e*=Ct,t*=Ct;var n=rt(t);sr=n*rt(e),lr=n*Qe(e),ur=Qe(t),Ca.point=M_e,zv(sr,lr,ur)}function M_e(e,t){e*=Ct,t*=Ct;var n=rt(t),i=n*rt(e),r=n*Qe(e),o=Qe(t),a=Ko(yr((a=lr*o-ur*r)*a+(a=ur*i-sr*o)*a+(a=sr*r-lr*i)*a),sr*i+lr*r+ur*o);aw+=a,cw+=a*(sr+(sr=i)),fw+=a*(lr+(lr=r)),dw+=a*(ur+(ur=o)),zv(sr,lr,ur)}function Iz(){Ca.point=cO}function N_e(){Ca.point=$_e}function P_e(){PX(MX,NX),Ca.point=cO}function $_e(e,t){MX=e,NX=t,e*=Ct,t*=Ct,Ca.point=PX;var n=rt(t);sr=n*rt(e),lr=n*Qe(e),ur=Qe(t),zv(sr,lr,ur)}function PX(e,t){e*=Ct,t*=Ct;var n=rt(t),i=n*rt(e),r=n*Qe(e),o=Qe(t),a=lr*o-ur*r,s=ur*i-sr*o,l=sr*r-lr*i,u=$A(a,s,l),c=Yr(u),d=u&&-c/u;jA.add(d*a),BA.add(d*s),HA.add(d*l),aw+=c,cw+=c*(sr+(sr=i)),fw+=c*(lr+(lr=r)),dw+=c*(ur+(ur=o)),zv(sr,lr,ur)}function O_e(e){y0=aw=sw=lw=uw=cw=fw=dw=0,jA=new hr,BA=new hr,HA=new hr,pl(e,Ca);var t=+jA,n=+BA,i=+HA,r=$A(t,n,i);return r<Jb&&(t=cw,n=fw,i=dw,aw<it&&(t=sw,n=lw,i=uw),r=$A(t,n,i),r<Jb)?[NaN,NaN]:[Ko(n,t)*Ln,Yr(i/r)*Ln]}function UA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function WA(e,t){return $t(e)>Rt&&(e-=Math.round(e/gr)*gr),[e,t]}WA.invert=WA;function $X(e,t,n){return(e%=gr)?t||n?UA(Dz(e),zz(t,n)):Dz(e):t||n?zz(t,n):WA}function Lz(e){return function(t,n){return t+=e,$t(t)>Rt&&(t-=Math.round(t/gr)*gr),[t,n]}}function Dz(e){var t=Lz(e);return t.invert=Lz(-e),t}function zz(e,t){var n=rt(e),i=Qe(e),r=rt(t),o=Qe(t);function a(s,l){var u=rt(l),c=rt(s)*u,d=Qe(s)*u,h=Qe(l),m=h*n+c*i;return[Ko(d*r-m*o,c*n-h*i),Yr(m*r+d*o)]}return a.invert=function(s,l){var u=rt(l),c=rt(s)*u,d=Qe(s)*u,h=Qe(l),m=h*r-d*o;return[Ko(d*r+h*o,c*n+m*i),Yr(m*n-c*i)]},a}function I_e(e){e=$X(e[0]*Ct,e[1]*Ct,e.length>2?e[2]*Ct:0);function t(n){return n=e(n[0]*Ct,n[1]*Ct),n[0]*=Ln,n[1]*=Ln,n}return t.invert=function(n){return n=e.invert(n[0]*Ct,n[1]*Ct),n[0]*=Ln,n[1]*=Ln,n},t}function L_e(e,t,n,i,r,o){if(n){var a=rt(t),s=Qe(t),l=i*n;r==null?(r=t+i*gr,o=t-l/2):(r=jz(a,r),o=jz(a,o),(i>0?r<o:r>o)&&(r+=i*gr));for(var u,c=r;i>0?c>o:c<o;c-=l)u=rw([a,-s*rt(c),-s*Qe(c)]),e.point(u[0],u[1])}}function jz(e,t){t=cd(t),t[0]-=e,ow(t);var n=SX(-t[1]);return((-t[2]<0?-n:n)+gr-it)%gr}function OX(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Ei,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function k_(e,t){return $t(e[0]-t[0])<it&&$t(e[1]-t[1])<it}function Ax(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function IX(e,t,n,i,r){var o=[],a=[],s,l;if(e.forEach(function(g){if(!((y=g.length-1)<=0)){var y,v=g[0],_=g[y],b;if(k_(v,_)){if(!v[2]&&!_[2]){for(r.lineStart(),s=0;s<y;++s)r.point((v=g[s])[0],v[1]);r.lineEnd();return}_[0]+=2*it}o.push(b=new Ax(v,g,null,!0)),a.push(b.o=new Ax(v,null,b,!1)),o.push(b=new Ax(_,g,null,!1)),a.push(b.o=new Ax(_,null,b,!0))}}),!!o.length){for(a.sort(t),Bz(o),Bz(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var u=o[0],c,d;;){for(var h=u,m=!0;h.v;)if((h=h.n)===u)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(m)for(s=0,l=c.length;s<l;++s)r.point((d=c[s])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(m)for(c=h.p.z,s=c.length-1;s>=0;--s)r.point((d=c[s])[0],d[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,c=h.z,m=!m}while(!h.v);r.lineEnd()}}}function Bz(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Ak(e){return $t(e[0])<=Rt?e[0]:Lo(e[0])*(($t(e[0])+Rt)%gr-Rt)}function D_e(e,t){var n=Ak(t),i=t[1],r=Qe(i),o=[Qe(n),-rt(n),0],a=0,s=0,l=new hr;r===1?i=On+it:r===-1&&(i=-On-it);for(var u=0,c=e.length;u<c;++u)if(h=(d=e[u]).length)for(var d,h,m=d[h-1],g=Ak(m),y=m[1]/2+Qb,v=Qe(y),_=rt(y),b=0;b<h;++b,g=k,v=F,_=T,m=S){var S=d[b],k=Ak(S),R=S[1]/2+Qb,F=Qe(R),T=rt(R),P=k-g,B=P>=0?1:-1,O=B*P,D=O>Rt,W=v*F;if(l.add(Ko(W*B*Qe(O),_*T+W*rt(O))),a+=D?P+B*gr:P,D^g>=n^k>=n){var j=Zp(cd(m),cd(S));ow(j);var U=Zp(o,j);ow(U);var G=(D^P>=0?-1:1)*Yr(U[2]);(i>G||i===G&&(j[0]||j[1]))&&(s+=D^P>=0?1:-1)}}return(a<-it||a<it&&l<-Jb)^s&1}function LX(e,t,n,i){return function(r){var o=t(r),a=OX(),s=t(a),l=!1,u,c,d,h={point:m,lineStart:y,lineEnd:v,polygonStart:function(){h.point=_,h.lineStart=b,h.lineEnd=S,c=[],u=[]},polygonEnd:function(){h.point=m,h.lineStart=y,h.lineEnd=v,c=MG(c);var k=D_e(u,i);c.length?(l||(r.polygonStart(),l=!0),IX(c,j_e,k,n,r)):k&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function m(k,R){e(k,R)&&r.point(k,R)}function g(k,R){o.point(k,R)}function y(){h.point=g,o.lineStart()}function v(){h.point=m,o.lineEnd()}function _(k,R){d.push([k,R]),s.point(k,R)}function b(){s.lineStart(),d=[]}function S(){_(d[0][0],d[0][1]),s.lineEnd();var k=s.clean(),R=a.result(),F,T=R.length,P,B,O;if(d.pop(),u.push(d),d=null,!!T){if(k&1){if(B=R[0],(P=B.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),F=0;F<P;++F)r.point((O=B[F])[0],O[1]);r.lineEnd()}return}T>1&&k&2&&R.push(R.pop().concat(R.shift())),c.push(R.filter(z_e))}}return h}}function z_e(e){return e.length>1}function j_e(e,t){return((e=e.x)[0]<0?e[1]-On-it:On-e[1])-((t=t.x)[0]<0?t[1]-On-it:On-t[1])}const Hz=LX(function(){return!0},B_e,U_e,[-Rt,-On]);function B_e(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(o,a){var s=o>0?Rt:-Rt,l=$t(o-t);$t(l-Rt)<it?(e.point(t,n=(n+a)/2>0?On:-On),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),r=0):i!==s&&l>=Rt&&($t(t-i)<it&&(t-=i*it),$t(o-s)<it&&(o-=s*it),n=H_e(t,n,o,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),r=0),e.point(t=o,n=a),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function H_e(e,t,n,i){var r,o,a=Qe(e-n);return $t(a)>it?Om((Qe(t)*(o=rt(i))*Qe(n)-Qe(i)*(r=rt(t))*Qe(e))/(r*o*a)):(t+i)/2}function U_e(e,t,n,i){var r;if(e==null)r=n*On,i.point(-Rt,r),i.point(0,r),i.point(Rt,r),i.point(Rt,0),i.point(Rt,-r),i.point(0,-r),i.point(-Rt,-r),i.point(-Rt,0),i.point(-Rt,r);else if($t(e[0]-t[0])>it){var o=e[0]<t[0]?Rt:-Rt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}function W_e(e){var t=rt(e),n=6*Ct,i=t>0,r=$t(t)>it;function o(c,d,h,m){L_e(m,e,n,h,c,d)}function a(c,d){return rt(c)*rt(d)>t}function s(c){var d,h,m,g,y;return{lineStart:function(){g=m=!1,y=1},point:function(v,_){var b=[v,_],S,k=a(v,_),R=i?k?0:u(v,_):k?u(v+(v<0?Rt:-Rt),_):0;if(!d&&(g=m=k)&&c.lineStart(),k!==m&&(S=l(d,b),(!S||k_(d,S)||k_(b,S))&&(b[2]=1)),k!==m)y=0,k?(c.lineStart(),S=l(b,d),c.point(S[0],S[1])):(S=l(d,b),c.point(S[0],S[1],2),c.lineEnd()),d=S;else if(r&&d&&i^k){var F;!(R&h)&&(F=l(b,d,!0))&&(y=0,i?(c.lineStart(),c.point(F[0][0],F[0][1]),c.point(F[1][0],F[1][1]),c.lineEnd()):(c.point(F[1][0],F[1][1]),c.lineEnd(),c.lineStart(),c.point(F[0][0],F[0][1],3)))}k&&(!d||!k_(d,b))&&c.point(b[0],b[1]),d=b,m=k,h=R},lineEnd:function(){m&&c.lineEnd(),d=null},clean:function(){return y|(g&&m)<<1}}}function l(c,d,h){var m=cd(c),g=cd(d),y=[1,0,0],v=Zp(m,g),_=Rx(v,v),b=v[0],S=_-b*b;if(!S)return!h&&c;var k=t*_/S,R=-t*b/S,F=Zp(y,v),T=Tx(y,k),P=Tx(v,R);Tk(T,P);var B=F,O=Rx(T,B),D=Rx(B,B),W=O*O-D*(Rx(T,T)-1);if(!(W<0)){var j=yr(W),U=Tx(B,(-O-j)/D);if(Tk(U,T),U=rw(U),!h)return U;var G=c[0],Z=d[0],J=c[1],H=d[1],Q;Z<G&&(Q=G,G=Z,Z=Q);var K=Z-G,ne=$t(K-Rt)<it,he=ne||K<it;if(!ne&&H<J&&(Q=J,J=H,H=Q),he?ne?J+H>0^U[1]<($t(U[0]-G)<it?J:H):J<=U[1]&&U[1]<=H:K>Rt^(G<=U[0]&&U[0]<=Z)){var $e=Tx(B,(-O+j)/D);return Tk($e,T),[U,rw($e)]}}}function u(c,d){var h=i?e:Rt-e,m=0;return c<-h?m|=1:c>h&&(m|=2),d<-h?m|=4:d>h&&(m|=8),m}return LX(a,s,o,i?[0,-e]:[-Rt,e-Rt])}function G_e(e,t,n,i,r,o){var a=e[0],s=e[1],l=t[0],u=t[1],c=0,d=1,h=l-a,m=u-s,g;if(g=n-a,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<d&&(d=g)}else if(h>0){if(g>d)return;g>c&&(c=g)}if(g=r-a,!(!h&&g<0)){if(g/=h,h<0){if(g>d)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<d&&(d=g)}if(g=i-s,!(!m&&g>0)){if(g/=m,m<0){if(g<c)return;g<d&&(d=g)}else if(m>0){if(g>d)return;g>c&&(c=g)}if(g=o-s,!(!m&&g<0)){if(g/=m,m<0){if(g>d)return;g>c&&(c=g)}else if(m>0){if(g<c)return;g<d&&(d=g)}return c>0&&(e[0]=a+c*h,e[1]=s+c*m),d<1&&(t[0]=a+d*h,t[1]=s+d*m),!0}}}}}var v0=1e9,Fx=-v0;function DX(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function o(u,c,d,h){var m=0,g=0;if(u==null||(m=a(u,d))!==(g=a(c,d))||l(u,c)<0^d>0)do h.point(m===0||m===3?e:n,m>1?i:t);while((m=(m+d+4)%4)!==g);else h.point(c[0],c[1])}function a(u,c){return $t(u[0]-e)<it?c>0?0:3:$t(u[0]-n)<it?c>0?2:1:$t(u[1]-t)<it?c>0?1:0:c>0?3:2}function s(u,c){return l(u.x,c.x)}function l(u,c){var d=a(u,1),h=a(c,1);return d!==h?d-h:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=OX(),h,m,g,y,v,_,b,S,k,R,F,T={point:P,lineStart:W,lineEnd:j,polygonStart:O,polygonEnd:D};function P(G,Z){r(G,Z)&&c.point(G,Z)}function B(){for(var G=0,Z=0,J=m.length;Z<J;++Z)for(var H=m[Z],Q=1,K=H.length,ne=H[0],he,$e,Ee=ne[0],we=ne[1];Q<K;++Q)he=Ee,$e=we,ne=H[Q],Ee=ne[0],we=ne[1],$e<=i?we>i&&(Ee-he)*(i-$e)>(we-$e)*(e-he)&&++G:we<=i&&(Ee-he)*(i-$e)<(we-$e)*(e-he)&&--G;return G}function O(){c=d,h=[],m=[],F=!0}function D(){var G=B(),Z=F&&G,J=(h=MG(h)).length;(Z||J)&&(u.polygonStart(),Z&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),J&&IX(h,s,G,o,u),u.polygonEnd()),c=u,h=m=g=null}function W(){T.point=U,m&&m.push(g=[]),R=!0,k=!1,b=S=NaN}function j(){h&&(U(y,v),_&&k&&d.rejoin(),h.push(d.result())),T.point=P,k&&c.lineEnd()}function U(G,Z){var J=r(G,Z);if(m&&g.push([G,Z]),R)y=G,v=Z,_=J,R=!1,J&&(c.lineStart(),c.point(G,Z));else if(J&&k)c.point(G,Z);else{var H=[b=Math.max(Fx,Math.min(v0,b)),S=Math.max(Fx,Math.min(v0,S))],Q=[G=Math.max(Fx,Math.min(v0,G)),Z=Math.max(Fx,Math.min(v0,Z))];G_e(H,Q,e,t,n,i)?(k||(c.lineStart(),c.point(H[0],H[1])),c.point(Q[0],Q[1]),J||c.lineEnd(),F=!1):J&&(c.lineStart(),c.point(G,Z),F=!1)}b=G,S=Z,k=J}return T}}function Uz(e,t,n){var i=co(e,t-it,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function Wz(e,t,n){var i=co(e,t-it,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function q_e(){var e,t,n,i,r,o,a,s,l=10,u=l,c=90,d=360,h,m,g,y,v=2.5;function _(){return{type:"MultiLineString",coordinates:b()}}function b(){return co(kx(i/c)*c,n,c).map(g).concat(co(kx(s/d)*d,a,d).map(y)).concat(co(kx(t/l)*l,e,l).filter(function(S){return $t(S%c)>it}).map(h)).concat(co(kx(o/u)*u,r,u).filter(function(S){return $t(S%d)>it}).map(m))}return _.lines=function(){return b().map(function(S){return{type:"LineString",coordinates:S}})},_.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(y(a).slice(1),g(n).reverse().slice(1),y(s).reverse().slice(1))]}},_.extent=function(S){return arguments.length?_.extentMajor(S).extentMinor(S):_.extentMinor()},_.extentMajor=function(S){return arguments.length?(i=+S[0][0],n=+S[1][0],s=+S[0][1],a=+S[1][1],i>n&&(S=i,i=n,n=S),s>a&&(S=s,s=a,a=S),_.precision(v)):[[i,s],[n,a]]},_.extentMinor=function(S){return arguments.length?(t=+S[0][0],e=+S[1][0],o=+S[0][1],r=+S[1][1],t>e&&(S=t,t=e,e=S),o>r&&(S=o,o=r,r=S),_.precision(v)):[[t,o],[e,r]]},_.step=function(S){return arguments.length?_.stepMajor(S).stepMinor(S):_.stepMinor()},_.stepMajor=function(S){return arguments.length?(c=+S[0],d=+S[1],_):[c,d]},_.stepMinor=function(S){return arguments.length?(l=+S[0],u=+S[1],_):[l,u]},_.precision=function(S){return arguments.length?(v=+S,h=Uz(o,r,90),m=Wz(t,e,v),g=Uz(s,a,90),y=Wz(i,n,v),_):v},_.extentMajor([[-180,-90+it],[180,90-it]]).extentMinor([[-180,-80-it],[180,80+it]])}const Wy=e=>e;var Fk=new hr,GA=new hr,zX,jX,qA,VA,ml={point:Ei,lineStart:Ei,lineEnd:Ei,polygonStart:function(){ml.lineStart=V_e,ml.lineEnd=Z_e},polygonEnd:function(){ml.lineStart=ml.lineEnd=ml.point=Ei,Fk.add($t(GA)),GA=new hr},result:function(){var e=Fk/2;return Fk=new hr,e}};function V_e(){ml.point=Y_e}function Y_e(e,t){ml.point=BX,zX=qA=e,jX=VA=t}function BX(e,t){GA.add(VA*e-qA*t),qA=e,VA=t}function Z_e(){BX(zX,jX)}var Xp=1/0,hw=Xp,Gy=-Xp,pw=Gy,mw={point:X_e,lineStart:Ei,lineEnd:Ei,polygonStart:Ei,polygonEnd:Ei,result:function(){var e=[[Xp,hw],[Gy,pw]];return Gy=pw=-(hw=Xp=1/0),e}};function X_e(e,t){e<Xp&&(Xp=e),e>Gy&&(Gy=e),t<hw&&(hw=t),t>pw&&(pw=t)}var YA=0,ZA=0,x0=0,gw=0,yw=0,np=0,XA=0,KA=0,_0=0,HX,UX,fs,ds,$o={point:fd,lineStart:Gz,lineEnd:qz,polygonStart:function(){$o.lineStart=Q_e,$o.lineEnd=ebe},polygonEnd:function(){$o.point=fd,$o.lineStart=Gz,$o.lineEnd=qz},result:function(){var e=_0?[XA/_0,KA/_0]:np?[gw/np,yw/np]:x0?[YA/x0,ZA/x0]:[NaN,NaN];return YA=ZA=x0=gw=yw=np=XA=KA=_0=0,e}};function fd(e,t){YA+=e,ZA+=t,++x0}function Gz(){$o.point=K_e}function K_e(e,t){$o.point=J_e,fd(fs=e,ds=t)}function J_e(e,t){var n=e-fs,i=t-ds,r=yr(n*n+i*i);gw+=r*(fs+e)/2,yw+=r*(ds+t)/2,np+=r,fd(fs=e,ds=t)}function qz(){$o.point=fd}function Q_e(){$o.point=tbe}function ebe(){WX(HX,UX)}function tbe(e,t){$o.point=WX,fd(HX=fs=e,UX=ds=t)}function WX(e,t){var n=e-fs,i=t-ds,r=yr(n*n+i*i);gw+=r*(fs+e)/2,yw+=r*(ds+t)/2,np+=r,r=ds*e-fs*t,XA+=r*(fs+e),KA+=r*(ds+t),_0+=r*3,fd(fs=e,ds=t)}function GX(e){this._context=e}GX.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,gr);break}}},result:Ei};var JA=new hr,Mk,qX,VX,b0,w0,qy={point:Ei,lineStart:function(){qy.point=nbe},lineEnd:function(){Mk&&YX(qX,VX),qy.point=Ei},polygonStart:function(){Mk=!0},polygonEnd:function(){Mk=null},result:function(){var e=+JA;return JA=new hr,e}};function nbe(e,t){qy.point=YX,qX=b0=e,VX=w0=t}function YX(e,t){b0-=e,w0-=t,JA.add(yr(b0*b0+w0*w0)),b0=e,w0=t}let Vz,vw,Yz,Zz;class Xz{constructor(t){this._append=t==null?ZX:ibe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Yz||this._append!==vw){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Yz=i,vw=this._append,Zz=this._,this._=r}this._+=Zz;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ZX(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ibe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return ZX;if(t!==Vz){const n=10**t;Vz=t,vw=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return vw}function XX(e,t){let n=3,i=4.5,r,o;function a(s){return s&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),pl(s,r(o))),o.result()}return a.area=function(s){return pl(s,r(ml)),ml.result()},a.measure=function(s){return pl(s,r(qy)),qy.result()},a.bounds=function(s){return pl(s,r(mw)),mw.result()},a.centroid=function(s){return pl(s,r($o)),$o.result()},a.projection=function(s){return arguments.length?(r=s==null?(e=null,Wy):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new Xz(n)):new GX(t=s),typeof i!="function"&&o.pointRadius(i),a):t},a.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(o.pointRadius(+s),+s),a):i},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new Xz(n)),a},a.projection(e).digits(n).context(t)}function MS(e){return function(t){var n=new QA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function QA(){}QA.prototype={constructor:QA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fO(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),pl(n,e.stream(mw)),t(mw.result()),i!=null&&e.clipExtent(i),e}function NS(e,t,n){return fO(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function dO(e,t,n){return NS(e,[[0,0],t],n)}function hO(e,t,n){return fO(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];e.scale(150*o).translate([a,s])},n)}function pO(e,t,n){return fO(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var Kz=16,rbe=rt(30*Ct);function Jz(e,t){return+t?abe(e,t):obe(e)}function obe(e){return MS({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function abe(e,t){function n(i,r,o,a,s,l,u,c,d,h,m,g,y,v){var _=u-i,b=c-r,S=_*_+b*b;if(S>4*t&&y--){var k=a+h,R=s+m,F=l+g,T=yr(k*k+R*R+F*F),P=Yr(F/=T),B=$t($t(F)-1)<it||$t(o-d)<it?(o+d)/2:Ko(R,k),O=e(B,P),D=O[0],W=O[1],j=D-i,U=W-r,G=b*j-_*U;(G*G/S>t||$t((_*j+b*U)/S-.5)>.3||a*h+s*m+l*g<rbe)&&(n(i,r,o,a,s,l,D,W,B,k/=T,R/=T,F,y,v),v.point(D,W),n(D,W,B,k,R,F,u,c,d,h,m,g,y,v))}}return function(i){var r,o,a,s,l,u,c,d,h,m,g,y,v={point:_,lineStart:b,lineEnd:k,polygonStart:function(){i.polygonStart(),v.lineStart=R},polygonEnd:function(){i.polygonEnd(),v.lineStart=b}};function _(P,B){P=e(P,B),i.point(P[0],P[1])}function b(){d=NaN,v.point=S,i.lineStart()}function S(P,B){var O=cd([P,B]),D=e(P,B);n(d,h,c,m,g,y,d=D[0],h=D[1],c=P,m=O[0],g=O[1],y=O[2],Kz,i),i.point(d,h)}function k(){v.point=_,i.lineEnd()}function R(){b(),v.point=F,v.lineEnd=T}function F(P,B){S(r=P,B),o=d,a=h,s=m,l=g,u=y,v.point=S}function T(){n(d,h,c,m,g,y,o,a,r,s,l,u,Kz,i),v.lineEnd=k,k()}return v}}var sbe=MS({point:function(e,t){this.stream.point(e*Ct,t*Ct)}});function lbe(e){return MS({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function ube(e,t,n,i,r){function o(a,s){return a*=i,s*=r,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*i,(n-s)/e*r]},o}function Qz(e,t,n,i,r,o){if(!o)return ube(e,t,n,i,r);var a=rt(o),s=Qe(o),l=a*e,u=s*e,c=a/e,d=s/e,h=(s*n-a*t)/e,m=(s*t+a*n)/e;function g(y,v){return y*=i,v*=r,[l*y-u*v+t,n-u*y-l*v]}return g.invert=function(y,v){return[i*(c*y-d*v+h),r*(m-d*y-c*v)]},g}function Ds(e){return KX(function(){return e})()}function KX(e){var t,n=150,i=480,r=250,o=0,a=0,s=0,l=0,u=0,c,d=0,h=1,m=1,g=null,y=Hz,v=null,_,b,S,k=Wy,R=.5,F,T,P,B,O;function D(G){return P(G[0]*Ct,G[1]*Ct)}function W(G){return G=P.invert(G[0],G[1]),G&&[G[0]*Ln,G[1]*Ln]}D.stream=function(G){return B&&O===G?B:B=sbe(lbe(c)(y(F(k(O=G)))))},D.preclip=function(G){return arguments.length?(y=G,g=void 0,U()):y},D.postclip=function(G){return arguments.length?(k=G,v=_=b=S=null,U()):k},D.clipAngle=function(G){return arguments.length?(y=+G?W_e(g=G*Ct):(g=null,Hz),U()):g*Ln},D.clipExtent=function(G){return arguments.length?(k=G==null?(v=_=b=S=null,Wy):DX(v=+G[0][0],_=+G[0][1],b=+G[1][0],S=+G[1][1]),U()):v==null?null:[[v,_],[b,S]]},D.scale=function(G){return arguments.length?(n=+G,j()):n},D.translate=function(G){return arguments.length?(i=+G[0],r=+G[1],j()):[i,r]},D.center=function(G){return arguments.length?(o=G[0]%360*Ct,a=G[1]%360*Ct,j()):[o*Ln,a*Ln]},D.rotate=function(G){return arguments.length?(s=G[0]%360*Ct,l=G[1]%360*Ct,u=G.length>2?G[2]%360*Ct:0,j()):[s*Ln,l*Ln,u*Ln]},D.angle=function(G){return arguments.length?(d=G%360*Ct,j()):d*Ln},D.reflectX=function(G){return arguments.length?(h=G?-1:1,j()):h<0},D.reflectY=function(G){return arguments.length?(m=G?-1:1,j()):m<0},D.precision=function(G){return arguments.length?(F=Jz(T,R=G*G),U()):yr(R)},D.fitExtent=function(G,Z){return NS(D,G,Z)},D.fitSize=function(G,Z){return dO(D,G,Z)},D.fitWidth=function(G,Z){return hO(D,G,Z)},D.fitHeight=function(G,Z){return pO(D,G,Z)};function j(){var G=Qz(n,0,0,h,m,d).apply(null,t(o,a)),Z=Qz(n,i-G[0],r-G[1],h,m,d);return c=$X(s,l,u),T=UA(t,Z),P=UA(c,T),F=Jz(T,R),U()}function U(){return B=O=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&W,j()}}function mO(e){var t=0,n=Rt/3,i=KX(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*Ct,n=o[1]*Ct):[t*Ln,n*Ln]},r}function cbe(e){var t=rt(e);function n(i,r){return[i*t,Qe(r)/t]}return n.invert=function(i,r){return[i/t,Yr(r*t)]},n}function fbe(e,t){var n=Qe(e),i=(n+Qe(t))/2;if($t(i)<it)return cbe(e);var r=1+n*(2*i-n),o=yr(r)/i;function a(s,l){var u=yr(r-2*i*Qe(l))/i;return[u*Qe(s*=i),o-u*rt(s)]}return a.invert=function(s,l){var u=o-l,c=Ko(s,$t(u))*Lo(u);return u*i<0&&(c-=Rt*Lo(s)*Lo(u)),[c/i,Yr((r-(s*s+u*u)*i*i)/(2*i))]},a}function xw(){return mO(fbe).scale(155.424).center([0,33.6442])}function JX(){return xw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dbe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function hbe(){var e,t,n=JX(),i,r=xw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=xw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(h,m){l=[h,m]}};function c(h){var m=h[0],g=h[1];return l=null,i.point(m,g),l||(o.point(m,g),l)||(s.point(m,g),l)}c.invert=function(h){var m=n.scale(),g=n.translate(),y=(h[0]-g[0])/m,v=(h[1]-g[1])/m;return(v>=.12&&v<.234&&y>=-.425&&y<-.214?r:v>=.166&&v<.234&&y>=-.214&&y<-.115?a:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=dbe([n.stream(t=h),r.stream(h),a.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),d()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var m=n.scale(),g=+h[0],y=+h[1];return i=n.translate(h).clipExtent([[g-.455*m,y-.238*m],[g+.455*m,y+.238*m]]).stream(u),o=r.translate([g-.307*m,y+.201*m]).clipExtent([[g-.425*m+it,y+.12*m+it],[g-.214*m-it,y+.234*m-it]]).stream(u),s=a.translate([g-.205*m,y+.212*m]).clipExtent([[g-.214*m+it,y+.166*m+it],[g-.115*m-it,y+.234*m-it]]).stream(u),d()},c.fitExtent=function(h,m){return NS(c,h,m)},c.fitSize=function(h,m){return dO(c,h,m)},c.fitWidth=function(h,m){return hO(c,h,m)},c.fitHeight=function(h,m){return pO(c,h,m)};function d(){return e=t=null,c}return c.scale(1070)}function QX(e){return function(t,n){var i=rt(t),r=rt(n),o=e(i*r);return o===1/0?[2,0]:[o*r*Qe(t),o*Qe(n)]}}function jv(e){return function(t,n){var i=yr(t*t+n*n),r=e(i),o=Qe(r),a=rt(r);return[Ko(t*o,i*a),Yr(i&&n*o/i)]}}var eK=QX(function(e){return yr(2/(1+e))});eK.invert=jv(function(e){return 2*Yr(e/2)});function pbe(){return Ds(eK).scale(124.75).clipAngle(180-.001)}var tK=QX(function(e){return(e=SX(e))&&e/Qe(e)});tK.invert=jv(function(e){return e});function mbe(){return Ds(tK).scale(79.4188).clipAngle(180-.001)}function PS(e,t){return[e,ew(uO((On+t)/2))]}PS.invert=function(e,t){return[e,2*Om(wX(t))-On]};function gbe(){return nK(PS).scale(961/gr)}function nK(e){var t=Ds(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,a=null,s,l,u;t.scale=function(d){return arguments.length?(i(d),c()):i()},t.translate=function(d){return arguments.length?(r(d),c()):r()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?a=s=l=u=null:(a=+d[0][0],s=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):a==null?null:[[a,s],[l,u]]};function c(){var d=Rt*i(),h=t(I_e(t.rotate()).invert([0,0]));return o(a==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:e===PS?[[Math.max(h[0]-d,a),s],[Math.min(h[0]+d,l),u]]:[[a,Math.max(h[1]-d,s)],[l,Math.min(h[1]+d,u)]])}return c()}function Mx(e){return uO((On+e)/2)}function ybe(e,t){var n=rt(e),i=e===t?Qe(e):ew(n/rt(t))/ew(Mx(t)/Mx(e)),r=n*Rk(Mx(e),i)/i;if(!i)return PS;function o(a,s){r>0?s<-On+it&&(s=-On+it):s>On-it&&(s=On-it);var l=r/Rk(Mx(s),i);return[l*Qe(i*a),r-l*rt(i*a)]}return o.invert=function(a,s){var l=r-s,u=Lo(i)*yr(a*a+l*l),c=Ko(a,$t(l))*Lo(l);return l*i<0&&(c-=Rt*Lo(a)*Lo(l)),[c/i,2*Om(Rk(r/u,1/i))-On]},o}function vbe(){return mO(ybe).scale(109.5).parallels([30,30])}function _w(e,t){return[e,t]}_w.invert=_w;function xbe(){return Ds(_w).scale(152.63)}function _be(e,t){var n=rt(e),i=e===t?Qe(e):(n-rt(t))/(t-e),r=n/i+e;if($t(i)<it)return _w;function o(a,s){var l=r-s,u=i*a;return[l*Qe(u),r-l*rt(u)]}return o.invert=function(a,s){var l=r-s,u=Ko(a,$t(l))*Lo(l);return l*i<0&&(u-=Rt*Lo(a)*Lo(l)),[u/i,r-Lo(i)*yr(a*a+l*l)]},o}function bbe(){return mO(_be).scale(131.154).center([0,13.9389])}var Z0=1.340264,X0=-.081106,K0=893e-6,J0=.003796,bw=yr(3)/2,wbe=12;function iK(e,t){var n=Yr(bw*Qe(t)),i=n*n,r=i*i*i;return[e*rt(n)/(bw*(Z0+3*X0*i+r*(7*K0+9*J0*i))),n*(Z0+X0*i+r*(K0+J0*i))]}iK.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,o=0,a,s,l;o<wbe&&(s=n*(Z0+X0*i+r*(K0+J0*i))-t,l=Z0+3*X0*i+r*(7*K0+9*J0*i),n-=a=s/l,i=n*n,r=i*i*i,!($t(a)<Jb));++o);return[bw*e*(Z0+3*X0*i+r*(7*K0+9*J0*i))/rt(n),Yr(Qe(n)/bw)]};function Sbe(){return Ds(iK).scale(177.158)}function rK(e,t){var n=rt(t),i=rt(e)*n;return[n*Qe(e)/i,Qe(t)/i]}rK.invert=jv(Om);function Cbe(){return Ds(rK).scale(144.049).clipAngle(60)}function Ebe(){var e=1,t=0,n=0,i=1,r=1,o=0,a,s,l=null,u,c,d,h=1,m=1,g=MS({point:function(k,R){var F=S([k,R]);this.stream.point(F[0],F[1])}}),y=Wy,v,_;function b(){return h=e*i,m=e*r,v=_=null,S}function S(k){var R=k[0]*h,F=k[1]*m;if(o){var T=F*a-R*s;R=R*a+F*s,F=T}return[R+t,F+n]}return S.invert=function(k){var R=k[0]-t,F=k[1]-n;if(o){var T=F*a+R*s;R=R*a-F*s,F=T}return[R/h,F/m]},S.stream=function(k){return v&&_===k?v:v=g(y(_=k))},S.postclip=function(k){return arguments.length?(y=k,l=u=c=d=null,b()):y},S.clipExtent=function(k){return arguments.length?(y=k==null?(l=u=c=d=null,Wy):DX(l=+k[0][0],u=+k[0][1],c=+k[1][0],d=+k[1][1]),b()):l==null?null:[[l,u],[c,d]]},S.scale=function(k){return arguments.length?(e=+k,b()):e},S.translate=function(k){return arguments.length?(t=+k[0],n=+k[1],b()):[t,n]},S.angle=function(k){return arguments.length?(o=k%360*Ct,s=Qe(o),a=rt(o),b()):o*Ln},S.reflectX=function(k){return arguments.length?(i=k?-1:1,b()):i<0},S.reflectY=function(k){return arguments.length?(r=k?-1:1,b()):r<0},S.fitExtent=function(k,R){return NS(S,k,R)},S.fitSize=function(k,R){return dO(S,k,R)},S.fitWidth=function(k,R){return hO(S,k,R)},S.fitHeight=function(k,R){return pO(S,k,R)},S}function oK(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}oK.invert=function(e,t){var n=t,i=25,r;do{var o=n*n,a=o*o;n-=r=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while($t(r)>it&&--i>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function kbe(){return Ds(oK).scale(175.295)}function aK(e,t){return[rt(t)*Qe(e),Qe(t)]}aK.invert=jv(Yr);function Rbe(){return Ds(aK).scale(249.5).clipAngle(90+it)}function sK(e,t){var n=rt(t),i=1+rt(e)*n;return[n*Qe(e)/i,Qe(t)/i]}sK.invert=jv(function(e){return 2*Om(e)});function Tbe(){return Ds(sK).scale(250).clipAngle(142)}function lK(e,t){return[ew(uO((On+t)/2)),-e]}lK.invert=function(e,t){return[-t,2*Om(wX(e))-On]};function Abe(){var e=nK(lK),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Fbe=Math.abs,eF=Math.cos,ww=Math.sin,Mbe=1e-6,uK=Math.PI,tF=uK/2,ej=Nbe(2);function tj(e){return e>1?tF:e<-1?-tF:Math.asin(e)}function Nbe(e){return e>0?Math.sqrt(e):0}function Pbe(e,t){var n=e*ww(t),i=30,r;do t-=r=(t+ww(t)-n)/(1+eF(t));while(Fbe(r)>Mbe&&--i>0);return t/2}function $be(e,t,n){function i(r,o){return[e*r*eF(o=Pbe(n,o)),t*ww(o)]}return i.invert=function(r,o){return o=tj(o/t),[r/(e*eF(o)),tj((2*o+ww(2*o))/n)]},i}var Obe=$be(ej/tF,ej,uK);function Ibe(){return Ds(Obe).scale(169.529)}const Lbe=XX(),nF=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Dbe(e,t){return function n(){const i=t();return i.type=e,i.path=XX().projection(i),i.copy=i.copy||function(){const r=n();return nF.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},TY(i)}}function gO(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Sw[e]=Dbe(e,t),this):Sw[e]||null}function cK(e){return e&&e.path||Lbe}const Sw={albers:JX,albersusa:hbe,azimuthalequalarea:pbe,azimuthalequidistant:mbe,conicconformal:vbe,conicequalarea:xw,conicequidistant:bbe,equalEarth:Sbe,equirectangular:xbe,gnomonic:Cbe,identity:Ebe,mercator:gbe,mollweide:Ibe,naturalEarth1:kbe,orthographic:Rbe,stereographic:Tbe,transversemercator:Abe};for(const e in Sw)gO(e,Sw[e]);function zbe(){}const tl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function fK(){var e=1,t=1,n=s;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return o(l,u,h=>{n(h,l,u),jbe(h)>0?c.push([h]):d.push(h)}),d.forEach(h=>{for(var m=0,g=c.length,y;m<g;++m)if(Bbe((y=c[m])[0],h)!==-1){y.push(h);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var d=new Array,h=new Array,m,g,y,v,_,b;for(m=g=-1,v=l[0]>=u,tl[v<<1].forEach(S);++m<e-1;)y=v,v=l[m+1]>=u,tl[y|v<<1].forEach(S);for(tl[v<<0].forEach(S);++g<t-1;){for(m=-1,v=l[g*e+e]>=u,_=l[g*e]>=u,tl[v<<1|_<<2].forEach(S);++m<e-1;)y=v,v=l[g*e+e+m+1]>=u,b=_,_=l[g*e+m+1]>=u,tl[y|v<<1|_<<2|b<<3].forEach(S);tl[v|_<<3].forEach(S)}for(m=-1,_=l[g*e]>=u,tl[_<<2].forEach(S);++m<e-1;)b=_,_=l[g*e+m+1]>=u,tl[_<<2|b<<3].forEach(S);tl[_<<3].forEach(S);function S(k){var R=[k[0][0]+m,k[0][1]+g],F=[k[1][0]+m,k[1][1]+g],T=a(R),P=a(F),B,O;(B=h[T])?(O=d[P])?(delete h[B.end],delete d[O.start],B===O?(B.ring.push(F),c(B.ring)):d[B.start]=h[O.end]={start:B.start,end:O.end,ring:B.ring.concat(O.ring)}):(delete h[B.end],B.ring.push(F),h[B.end=P]=B):(B=d[P])?(O=h[T])?(delete d[B.start],delete h[O.end],B===O?(B.ring.push(F),c(B.ring)):d[O.start]=h[B.end]={start:O.start,end:B.end,ring:O.ring.concat(B.ring)}):(delete d[B.start],B.ring.unshift(R),d[B.start=T]=B):d[T]=h[P]={start:T,end:P,ring:[R,F]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function s(l,u,c){l.forEach(d=>{var h=d[0],m=d[1],g=h|0,y=m|0,v,_=u[y*e+g];h>0&&h<e&&g===h&&(v=u[y*e+g-1],d[0]=h+(c-v)/(_-v)-.5),m>0&&m<t&&y===m&&(v=u[(y-1)*e+g],d[1]=m+(c-v)/(_-v)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||le("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?s:zbe,i):n===s},i}function jbe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Bbe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Hbe(e,t[n]))return r;return 0}function Hbe(e,t){for(var n=t[0],i=t[1],r=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],d=e[s],h=d[0],m=d[1];if(Ube(l,d,t))return 0;c>i!=m>i&&n<(h-u)*(i-c)/(m-c)+u&&(r=-r)}return r}function Ube(e,t,n){var i;return Wbe(e,t,n)&&Gbe(e[i=+(e[0]===t[0])],n[i],t[i])}function Wbe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Gbe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function dK(e,t,n){return function(i){var r=Es(i),o=n?Math.min(r[0],0):r[0],a=r[1],s=a-o,l=t?lc(o,a,e):s/(e+1);return co(o+l,a,l)}}function yO(e){ie.call(this,null,e)}yO.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};_e(yO,ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Ji,o=fK().smooth(e.smooth!==!1),a=e.thresholds||qbe(i,r,e),s=e.as===null?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=o.size([c.width,c.height])(c.values,fe(a)?a:a(c.values));Vbe(d,c,u,e),d.forEach(h=>{l.push(Z2(u,qt(s!=null?{[s]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function qbe(e,t,n){const i=dK(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Hf(t(r).values)))}function Vbe(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(_t(r)&&(r=r(n,i)),_t(o)&&(o=o(n,i)),(r===1||r==null)&&!o)return;const a=(jt(r)?r:r[0])||1,s=(jt(r)?r:r[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(hK(t,a,s,l,u))}function hK(e,t,n,i,r){const o=e.x1||0,a=e.y1||0,s=t*n<0;function l(d){d.forEach(u)}function u(d){s&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-a)*n+r}return function(d){return d.coordinates.forEach(l),d}}function nj(e,t,n){const i=e>=0?e:aP(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function Nk(e){return _t(e)?e:Qi(+e)}function pK(){var e=l=>l[0],t=l=>l[1],n=wm,i=[-1,-1],r=960,o=500,a=2;function s(l,u){const c=nj(i[0],l,e)>>a,d=nj(i[1],l,t)>>a,h=c?c+2:0,m=d?d+2:0,g=2*h+(r>>a),y=2*m+(o>>a),v=new Float32Array(g*y),_=new Float32Array(g*y);let b=v;l.forEach(k=>{const R=h+(+e(k)>>a),F=m+(+t(k)>>a);R>=0&&R<g&&F>=0&&F<y&&(v[R+F*g]+=+n(k))}),c>0&&d>0?(Ch(g,y,v,_,c),Eh(g,y,_,v,d),Ch(g,y,v,_,c),Eh(g,y,_,v,d),Ch(g,y,v,_,c),Eh(g,y,_,v,d)):c>0?(Ch(g,y,v,_,c),Ch(g,y,_,v,c),Ch(g,y,v,_,c),b=_):d>0&&(Eh(g,y,v,_,d),Eh(g,y,_,v,d),Eh(g,y,v,_,d),b=_);const S=u?Math.pow(2,-2*a):1/NG(b);for(let k=0,R=g*y;k<R;++k)b[k]*=S;return{values:b,scale:1<<a,width:g,height:y,x1:h,y1:m,x2:h+(r>>a),y2:m+(o>>a)}}return s.x=function(l){return arguments.length?(e=Nk(l),s):e},s.y=function(l){return arguments.length?(t=Nk(l),s):t},s.weight=function(l){return arguments.length?(n=Nk(l),s):n},s.size=function(l){if(!arguments.length)return[r,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||le("invalid size"),r=u,o=c,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||le("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),s):1<<a},s.bandwidth=function(l){return arguments.length?(l=Oe(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&le("invalid bandwidth"),i=l,s):i},s}function Ch(e,t,n,i,r){const o=(r<<1)+1;for(let a=0;a<t;++a)for(let s=0,l=0;s<e+r;++s)s<e&&(l+=n[s+a*e]),s>=r&&(s>=o&&(l-=n[s-o+a*e]),i[s-r+a*e]=l/Math.min(s+1,e-1+o-s,o))}function Eh(e,t,n,i,r){const o=(r<<1)+1;for(let a=0;a<e;++a)for(let s=0,l=0;s<t+r;++s)s<t&&(l+=n[a+s*e]),s>=r&&(s>=o&&(l-=n[a+(s-o)*e]),i[a+(s-r)*e]=l/Math.min(s+1,t-1+o-s,o))}function vO(e){ie.call(this,null,e)}vO.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Ybe=["x","y","weight","size","cellSize","bandwidth"];function mK(e,t){return Ybe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}_e(vO,ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Zbe(i,e.groupby),o=(e.groupby||[]).map(In),a=mK(pK(),e),s=e.as||"grid",l=[];function u(c,d){for(let h=0;h<o.length;++h)c[o[h]]=d[h];return c}return l=r.map(c=>qt(u({[s]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Zbe(e,t){var n=[],i=c=>c(s),r,o,a,s,l,u;if(t==null)n.push(e);else for(r={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function xO(e){ie.call(this,null,e)}xO.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};_e(xO,ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=fK().smooth(e.smooth!==!1),r=e.values,o=e.thresholds||dK(e.count||10,e.nice,!!r),a=e.size,s,l;return r||(r=t.materialize(t.SOURCE).source,s=mK(pK(),e)(r,!0),l=hK(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],r=s.values),o=fe(o)?o:o(r),r=i.size(a)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(qt),n}});const iF="Feature",_O="FeatureCollection",Xbe="MultiPoint";function bO(e){ie.call(this,null,e)}bO.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};_e(bO,ie,{transform(e,t){var n=this._features,i=this._points,r=e.fields,o=r&&r[0],a=r&&r[1],s=e.geojson||!r&&Ji,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Vi(s))||o&&t.modified(Vi(o))||a&&t.modified(Vi(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),s&&t.visit(l,c=>n.push(s(c))),o&&a&&(t.visit(l,c=>{var d=o(c),h=a(c);d!=null&&h!=null&&(d=+d)===d&&(h=+h)===h&&i.push([d,h])}),n=n.concat({type:iF,geometry:{type:Xbe,coordinates:i}})),this.value={type:_O,features:n}}});function wO(e){ie.call(this,null,e)}wO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};_e(wO,ie,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Ji,o=e.as||"path",a=n.SOURCE;!i||e.modified()?(this.value=i=cK(e.projection),n.materialize().reflow()):a=r===Ji||t.modified(r.fields)?n.ADD_MOD:n.ADD;const s=Kbe(i,e.pointRadius);return n.visit(a,l=>l[o]=i(r(l))),i.pointRadius(s),n.modifies(o)}});function Kbe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function SO(e){ie.call(this,null,e)}SO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};_e(SO,ie,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],l;function u(c){const d=n([i(c),r(c)]);d?(c[a]=d[0],c[s]=d[1]):(c[a]=void 0,c[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function CO(e){ie.call(this,null,e)}CO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};_e(CO,ie,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=Jbe(cK(e.projection),e.field||Vo("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[r]=i),n.modifies(r)}});function Jbe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(o),a};return i.context=r=>(e.context(r),i),i}function EO(e){ie.call(this,[],e),this.generator=q_e()}EO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};_e(EO,ie,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const o in e)_t(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(Rq(n[0],r)):t.add.push(qt(r)),n[0]=r,t}});function kO(e){ie.call(this,null,e)}kO.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};_e(kO,ie,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Ji,o=ewe(e.opacity,e),a=Qbe(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Hf(n.map(u=>Hf(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=xt({},u,l);i||(d.$max=Hf(c.values||[])),u[s]=twe(c,d,a.dep?a:Qi(a(d)),o.dep?o:Qi(o(d)))}),t.reflow(!0).modifies(s)}});function Qbe(e,t){let n;return _t(e)?(n=i=>fc(e(i,t)),n.dep=gK(e)):n=Qi(fc(e||"#888")),n}function ewe(e,t){let n;return _t(e)?(n=i=>e(i,t),n.dep=gK(e)):e?n=Qi(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function gK(e){if(!_t(e))return!1;const t=$a(Vi(e));return t.$x||t.$y||t.$value||t.$max}function twe(e,t,n,i){const r=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||r,u=e.y2||o,c=e.values,d=c?v=>c[v]:Au,h=ec(l-a,u-s),m=h.getContext("2d"),g=m.getImageData(0,0,l-a,u-s),y=g.data;for(let v=s,_=0;v<u;++v){t.$y=v-s;for(let b=a,S=v*r;b<l;++b,_+=4){t.$x=b-a,t.$value=d(b+S);const k=n(t);y[_+0]=k.r,y[_+1]=k.g,y[_+2]=k.b,y[_+3]=~~(255*i(t))}}return m.putImageData(g,0,0),h}function yK(e){ie.call(this,null,e),this.modified(!0)}_e(yK,ie,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=iwe(e.type),nF.forEach(i=>{e[i]!=null&&ij(n,i,e[i])})):nF.forEach(i=>{e.modified(i)&&ij(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&nwe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nwe(e,t){const n=rwe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function iwe(e){const t=gO((e||"mercator").toLowerCase());return t||le("Unrecognized projection type: "+e),t()}function ij(e,t,n){_t(e[t])&&e[t](n)}function rwe(e){return e=Oe(e),e.length===1?e[0]:{type:_O,features:e.reduce((t,n)=>t.concat(owe(n)),[])}}function owe(e){return e.type===_O?e.features:Oe(e).filter(t=>t!=null).map(t=>t.type===iF?t:{type:iF,geometry:t})}const awe=Object.freeze(Object.defineProperty({__proto__:null,contour:xO,geojson:bO,geopath:wO,geopoint:SO,geoshape:CO,graticule:EO,heatmap:kO,isocontour:yO,kde2d:vO,projection:yK},Symbol.toStringTag,{value:"Module"}));function swe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var o,a=n.length,s,l=0,u=0;for(o=0;o<a;++o)s=n[o],l+=s.x,u+=s.y;for(l=(l/a-e)*i,u=(u/a-t)*i,o=0;o<a;++o)s=n[o],s.x-=l,s.y-=u}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function lwe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return vK(this.cover(t,n),t,n,e)}function vK(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,o=e._root,a={data:i},s=e._x0,l=e._y0,u=e._x1,c=e._y1,d,h,m,g,y,v,_,b;if(!o)return e._root=a,e;for(;o.length;)if((y=t>=(d=(s+u)/2))?s=d:u=d,(v=n>=(h=(l+c)/2))?l=h:c=h,r=o,!(o=o[_=v<<1|y]))return r[_]=a,e;if(m=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===m&&n===g)return a.next=o,r?r[_]=a:e._root=a,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(y=t>=(d=(s+u)/2))?s=d:u=d,(v=n>=(h=(l+c)/2))?l=h:c=h;while((_=v<<1|y)===(b=(g>=h)<<1|m>=d));return r[b]=o,r[_]=a,e}function uwe(e){var t,n,i=e.length,r,o,a=new Array(i),s=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=r,s[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)vK(this,a[n],s[n],e[n]);return this}function cwe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var a=r-n||1,s=this._root,l,u;n>e||e>=r||i>t||t>=o;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:r=n+a,o=i+a;break;case 1:n=r-a,o=i+a;break;case 2:r=n+a,i=o-a;break;case 3:n=r-a,i=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function fwe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function dwe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function cr(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function hwe(e,t,n){var i,r=this._x0,o=this._y0,a,s,l,u,c=this._x1,d=this._y1,h=[],m=this._root,g,y;for(m&&h.push(new cr(m,r,o,c,d)),n==null?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);g=h.pop();)if(!(!(m=g.node)||(a=g.x0)>c||(s=g.y0)>d||(l=g.x1)<r||(u=g.y1)<o))if(m.length){var v=(a+l)/2,_=(s+u)/2;h.push(new cr(m[3],v,_,l,u),new cr(m[2],a,_,v,u),new cr(m[1],v,s,l,_),new cr(m[0],a,s,v,_)),(y=(t>=_)<<1|e>=v)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var b=e-+this._x.call(null,m.data),S=t-+this._y.call(null,m.data),k=b*b+S*S;if(k<n){var R=Math.sqrt(n=k);r=e-R,o=t-R,c=e+R,d=t+R,i=m.data}}return i}function pwe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,i,r,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,d,h,m,g,y,v,_;if(!n)return this;if(n.length)for(;;){if((g=c>=(h=(a+l)/2))?a=h:l=h,(y=d>=(m=(s+u)/2))?s=m:u=m,t=n,!(n=n[v=y<<1|g]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(i=t,_=v)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[v]=o:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=o,this)}function mwe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function gwe(){return this._root}function ywe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function vwe(e){var t=[],n,i=this._root,r,o,a,s,l;for(i&&t.push(new cr(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&i.length){var u=(o+s)/2,c=(a+l)/2;(r=i[3])&&t.push(new cr(r,u,c,s,l)),(r=i[2])&&t.push(new cr(r,o,c,u,l)),(r=i[1])&&t.push(new cr(r,u,a,s,c)),(r=i[0])&&t.push(new cr(r,o,a,u,c))}return this}function xwe(e){var t=[],n=[],i;for(this._root&&t.push(new cr(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,a=i.x0,s=i.y0,l=i.x1,u=i.y1,c=(a+l)/2,d=(s+u)/2;(o=r[0])&&t.push(new cr(o,a,s,c,d)),(o=r[1])&&t.push(new cr(o,c,s,l,d)),(o=r[2])&&t.push(new cr(o,a,d,c,u)),(o=r[3])&&t.push(new cr(o,c,d,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function _we(e){return e[0]}function bwe(e){return arguments.length?(this._x=e,this):this._x}function wwe(e){return e[1]}function Swe(e){return arguments.length?(this._y=e,this):this._y}function RO(e,t,n){var i=new TO(t??_we,n??wwe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function TO(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function rj(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var br=RO.prototype=TO.prototype;br.copy=function(){var e=new TO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=rj(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=rj(i));return e};br.add=lwe;br.addAll=uwe;br.cover=cwe;br.data=fwe;br.extent=dwe;br.find=hwe;br.remove=pwe;br.removeAll=mwe;br.root=gwe;br.size=ywe;br.visit=vwe;br.visitAfter=xwe;br.x=bwe;br.y=Swe;function fr(e){return function(){return e}}function ju(e){return(e()-.5)*1e-6}function Cwe(e){return e.x+e.vx}function Ewe(e){return e.y+e.vy}function kwe(e){var t,n,i,r=1,o=1;typeof e!="function"&&(e=fr(e==null?1:+e));function a(){for(var u,c=t.length,d,h,m,g,y,v,_=0;_<o;++_)for(d=RO(t,Cwe,Ewe).visitAfter(s),u=0;u<c;++u)h=t[u],y=n[h.index],v=y*y,m=h.x+h.vx,g=h.y+h.vy,d.visit(b);function b(S,k,R,F,T){var P=S.data,B=S.r,O=y+B;if(P){if(P.index>h.index){var D=m-P.x-P.vx,W=g-P.y-P.vy,j=D*D+W*W;j<O*O&&(D===0&&(D=ju(i),j+=D*D),W===0&&(W=ju(i),j+=W*W),j=(O-(j=Math.sqrt(j)))/j*r,h.vx+=(D*=j)*(O=(B*=B)/(v+B)),h.vy+=(W*=j)*O,P.vx-=D*(O=1-O),P.vy-=W*O)}return}return k>m+O||F<m-O||R>g+O||T<g-O}}function s(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return a.initialize=function(u,c){t=u,i=c,l()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:fr(+u),l(),a):e},a}function Rwe(e){return e.index}function oj(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Twe(e){var t=Rwe,n=d,i,r=fr(30),o,a,s,l,u,c=1;e==null&&(e=[]);function d(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function h(v){for(var _=0,b=e.length;_<c;++_)for(var S=0,k,R,F,T,P,B,O;S<b;++S)k=e[S],R=k.source,F=k.target,T=F.x+F.vx-R.x-R.vx||ju(u),P=F.y+F.vy-R.y-R.vy||ju(u),B=Math.sqrt(T*T+P*P),B=(B-o[S])/B*v*i[S],T*=B,P*=B,F.vx-=T*(O=l[S]),F.vy-=P*O,R.vx+=T*(O=1-O),R.vy+=P*O}function m(){if(a){var v,_=a.length,b=e.length,S=new Map(a.map((R,F)=>[t(R,F,a),R])),k;for(v=0,s=new Array(_);v<b;++v)k=e[v],k.index=v,typeof k.source!="object"&&(k.source=oj(S,k.source)),typeof k.target!="object"&&(k.target=oj(S,k.target)),s[k.source.index]=(s[k.source.index]||0)+1,s[k.target.index]=(s[k.target.index]||0)+1;for(v=0,l=new Array(b);v<b;++v)k=e[v],l[v]=s[k.source.index]/(s[k.source.index]+s[k.target.index]);i=new Array(b),g(),o=new Array(b),y()}}function g(){if(a)for(var v=0,_=e.length;v<_;++v)i[v]=+n(e[v],v,e)}function y(){if(a)for(var v=0,_=e.length;v<_;++v)o[v]=+r(e[v],v,e)}return h.initialize=function(v,_){a=v,u=_,m()},h.links=function(v){return arguments.length?(e=v,m(),h):e},h.id=function(v){return arguments.length?(t=v,h):t},h.iterations=function(v){return arguments.length?(c=+v,h):c},h.strength=function(v){return arguments.length?(n=typeof v=="function"?v:fr(+v),g(),h):n},h.distance=function(v){return arguments.length?(r=typeof v=="function"?v:fr(+v),y(),h):r},h}var Awe={value:()=>{}};function xK(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new R_(n)}function R_(e){this._=e}function Fwe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}R_.prototype=xK.prototype={constructor:R_,on:function(e,t){var n=this._,i=Fwe(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=Mwe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=aj(n[r],e.name,t);else if(t==null)for(r in n)n[r]=aj(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new R_(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Mwe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function aj(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Awe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Kp=0,S0=0,Bg=0,_K=1e3,Cw,C0,Ew=0,dd=0,$S=0,Vy=typeof performance=="object"&&performance.now?performance:Date,bK=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function AO(){return dd||(bK(Nwe),dd=Vy.now()+$S)}function Nwe(){dd=0}function kw(){this._call=this._time=this._next=null}kw.prototype=wK.prototype={constructor:kw,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?AO():+n)+(t==null?0:+t),!this._next&&C0!==this&&(C0?C0._next=this:Cw=this,C0=this),this._call=e,this._time=n,rF()},stop:function(){this._call&&(this._call=null,this._time=1/0,rF())}};function wK(e,t,n){var i=new kw;return i.restart(e,t,n),i}function Pwe(){AO(),++Kp;for(var e=Cw,t;e;)(t=dd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Kp}function sj(){dd=(Ew=Vy.now())+$S,Kp=S0=0;try{Pwe()}finally{Kp=0,Owe(),dd=0}}function $we(){var e=Vy.now(),t=e-Ew;t>_K&&($S-=t,Ew=e)}function Owe(){for(var e,t=Cw,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cw=n);C0=e,rF(i)}function rF(e){if(!Kp){S0&&(S0=clearTimeout(S0));var t=e-dd;t>24?(e<1/0&&(S0=setTimeout(sj,e-Vy.now()-$S)),Bg&&(Bg=clearInterval(Bg))):(Bg||(Ew=Vy.now(),Bg=setInterval($we,_K)),Kp=1,bK(sj))}}function Iwe(e,t,n){var i=new kw,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,a,s){a=+a,s=s==null?AO():+s,i._restart(function l(u){u+=r,i._restart(l,r+=a,s),o(u)},a,s)},i.restart(e,t,n),i)}const Lwe=1664525,Dwe=1013904223,lj=4294967296;function zwe(){let e=1;return()=>(e=(Lwe*e+Dwe)%lj)/lj}function jwe(e){return e.x}function Bwe(e){return e.y}var Hwe=10,Uwe=Math.PI*(3-Math.sqrt(5));function Wwe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=wK(d),u=xK("tick","end"),c=zwe();e==null&&(e=[]);function d(){h(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function h(y){var v,_=e.length,b;y===void 0&&(y=1);for(var S=0;S<y;++S)for(n+=(o-n)*r,s.forEach(function(k){k(n)}),v=0;v<_;++v)b=e[v],b.fx==null?b.x+=b.vx*=a:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=a:(b.y=b.fy,b.vy=0);return t}function m(){for(var y=0,v=e.length,_;y<v;++y){if(_=e[y],_.index=y,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var b=Hwe*Math.sqrt(.5+y),S=y*Uwe;_.x=b*Math.cos(S),_.y=b*Math.sin(S)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function g(y){return y.initialize&&y.initialize(e,c),y}return m(),t={tick:h,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(y){return arguments.length?(e=y,m(),s.forEach(g),t):e},alpha:function(y){return arguments.length?(n=+y,t):n},alphaMin:function(y){return arguments.length?(i=+y,t):i},alphaDecay:function(y){return arguments.length?(r=+y,t):+r},alphaTarget:function(y){return arguments.length?(o=+y,t):o},velocityDecay:function(y){return arguments.length?(a=1-y,t):1-a},randomSource:function(y){return arguments.length?(c=y,s.forEach(g),t):c},force:function(y,v){return arguments.length>1?(v==null?s.delete(y):s.set(y,g(v)),t):s.get(y)},find:function(y,v,_){var b=0,S=e.length,k,R,F,T,P;for(_==null?_=1/0:_*=_,b=0;b<S;++b)T=e[b],k=y-T.x,R=v-T.y,F=k*k+R*R,F<_&&(P=T,_=F);return P},on:function(y,v){return arguments.length>1?(u.on(y,v),t):u.on(y)}}}function Gwe(){var e,t,n,i,r=fr(-30),o,a=1,s=1/0,l=.81;function u(m){var g,y=e.length,v=RO(e,jwe,Bwe).visitAfter(d);for(i=m,g=0;g<y;++g)t=e[g],v.visit(h)}function c(){if(e){var m,g=e.length,y;for(o=new Array(g),m=0;m<g;++m)y=e[m],o[y.index]=+r(y,m,e)}}function d(m){var g=0,y,v,_=0,b,S,k;if(m.length){for(b=S=k=0;k<4;++k)(y=m[k])&&(v=Math.abs(y.value))&&(g+=y.value,_+=v,b+=v*y.x,S+=v*y.y);m.x=b/_,m.y=S/_}else{y=m,y.x=y.data.x,y.y=y.data.y;do g+=o[y.data.index];while(y=y.next)}m.value=g}function h(m,g,y,v){if(!m.value)return!0;var _=m.x-t.x,b=m.y-t.y,S=v-g,k=_*_+b*b;if(S*S/l<k)return k<s&&(_===0&&(_=ju(n),k+=_*_),b===0&&(b=ju(n),k+=b*b),k<a&&(k=Math.sqrt(a*k)),t.vx+=_*m.value*i/k,t.vy+=b*m.value*i/k),!0;if(m.length||k>=s)return;(m.data!==t||m.next)&&(_===0&&(_=ju(n),k+=_*_),b===0&&(b=ju(n),k+=b*b),k<a&&(k=Math.sqrt(a*k)));do m.data!==t&&(S=o[m.data.index]*i/k,t.vx+=_*S,t.vy+=b*S);while(m=m.next)}return u.initialize=function(m,g){e=m,n=g,c()},u.strength=function(m){return arguments.length?(r=typeof m=="function"?m:fr(+m),c(),u):r},u.distanceMin=function(m){return arguments.length?(a=m*m,u):Math.sqrt(a)},u.distanceMax=function(m){return arguments.length?(s=m*m,u):Math.sqrt(s)},u.theta=function(m){return arguments.length?(l=m*m,u):Math.sqrt(l)},u}function qwe(e){var t=fr(.1),n,i,r;typeof e!="function"&&(e=fr(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(r[l]-c.x)*i[l]*s}function a(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:fr(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:fr(+s),a(),o):e},o}function Vwe(e){var t=fr(.1),n,i,r;typeof e!="function"&&(e=fr(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(r[l]-c.y)*i[l]*s}function a(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:fr(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:fr(+s),a(),o):e},o}const uj={center:swe,collide:kwe,nbody:Gwe,link:Twe,x:qwe,y:Vwe},E0="forces",oF=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ywe=["static","iterations"],SK=["x","y","vx","vy"];function FO(e){ie.call(this,null,e)}FO.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:SK}]};_e(FO,ie,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(oF),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&CK(n,e,0,t)):(this.value=n=Xwe(t.source,e),n.on("tick",Zwe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Ywe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,l=0,u=s.length,c;l<u;++l)if(c=s[l],!(c.name!==E0||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,o=i.length,a;r<o;++r)if(i[r].name==="links"&&(a=i[r].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(SK)}});function Zwe(e,t){return()=>e.touch(t).run()}function Xwe(e,t){const n=Wwe(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),CK(n,t,!0).on("end",()=>o=!0)}function CK(e,t,n,i){var r=Oe(t.forces),o,a,s,l;for(o=0,a=oF.length;o<a;++o)s=oF[o],s!==E0&&t.modified(s)&&e[s](t[s]);for(o=0,a=r.length;o<a;++o)l=E0+o,s=n||t.modified(E0,o)?Jwe(r[o]):i&&Kwe(r[o],i)?e.force(l):null,s&&e.force(l,s);for(a=e.numForces||0;o<a;++o)e.force(E0+o,null);return e.numForces=r.length,e}function Kwe(e,t){var n,i;for(n in e)if(_t(i=e[n])&&t.modified(Vi(i)))return 1;return 0}function Jwe(e){var t,n;et(uj,e.force)||le("Unrecognized force: "+e.force),t=uj[e.force]();for(n in e)_t(t[n])&&Qwe(t[n],e[n],e);return t}function Qwe(e,t,n){e(_t(t)?i=>t(i,n):t)}const e2e=Object.freeze(Object.defineProperty({__proto__:null,force:FO},Symbol.toStringTag,{value:"Module"}));function t2e(e,t){return e.parent===t.parent?1:2}function n2e(e){return e.reduce(i2e,0)/e.length}function i2e(e,t){return e+t.x}function r2e(e){return 1+e.reduce(o2e,0)}function o2e(e,t){return Math.max(e,t.y)}function a2e(e){for(var t;t=e.children;)e=t[0];return e}function s2e(e){for(var t;t=e.children;)e=t[t.length-1];return e}function l2e(){var e=t2e,t=1,n=1,i=!1;function r(o){var a,s=0;o.eachAfter(function(h){var m=h.children;m?(h.x=n2e(m),h.y=r2e(m)):(h.x=a?s+=e(h,a):0,h.y=0,a=h)});var l=a2e(o),u=s2e(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*n}:function(h){h.x=(h.x-c)/(d-c)*t,h.y=(1-(o.y?h.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}function u2e(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function c2e(){return this.eachAfter(u2e)}function f2e(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function d2e(e,t){for(var n=this,i=[n],r,o,a=-1;n=i.pop();)if(e.call(t,n,++a,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function h2e(e,t){for(var n=this,i=[n],r=[],o,a,s,l=-1;n=i.pop();)if(r.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)i.push(o[a]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function p2e(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function m2e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function g2e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function y2e(e){for(var t=this,n=v2e(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function v2e(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function x2e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function _2e(){return Array.from(this)}function b2e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function w2e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*S2e(){var e=this,t,n=[e],i,r,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function MO(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=k2e)):t===void 0&&(t=E2e);for(var n=new Jp(e),i,r=[n],o,a,s,l;i=r.pop();)if((a=t(i.data))&&(l=(a=Array.from(a)).length))for(i.children=a,s=l-1;s>=0;--s)r.push(o=a[s]=new Jp(a[s])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(EK)}function C2e(){return MO(this).eachBefore(R2e)}function E2e(e){return e.children}function k2e(e){return Array.isArray(e)?e[1]:null}function R2e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function EK(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Jp(e){this.data=e,this.depth=this.height=0,this.parent=null}Jp.prototype=MO.prototype={constructor:Jp,count:c2e,each:f2e,eachAfter:h2e,eachBefore:d2e,find:p2e,sum:m2e,sort:g2e,path:y2e,ancestors:x2e,descendants:_2e,leaves:b2e,links:w2e,copy:C2e,[Symbol.iterator]:S2e};function T_(e){return e==null?null:kK(e)}function kK(e){if(typeof e!="function")throw new Error;return e}function Ef(){return 0}function Oh(e){return function(){return e}}const T2e=1664525,A2e=1013904223,cj=4294967296;function F2e(){let e=1;return()=>(e=(T2e*e+A2e)%cj)/cj}function M2e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function N2e(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function P2e(e,t){for(var n=0,i=(e=N2e(Array.from(e),t)).length,r=[],o,a;n<i;)o=e[n],a&&RK(a,o)?++n:(a=O2e(r=$2e(r,o)),n=0);return a}function $2e(e,t){var n,i;if(Pk(t,e))return[t];for(n=0;n<e.length;++n)if(Nx(t,e[n])&&Pk(k0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Nx(k0(e[n],e[i]),t)&&Nx(k0(e[n],t),e[i])&&Nx(k0(e[i],t),e[n])&&Pk(TK(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Nx(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function RK(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function Pk(e,t){for(var n=0;n<t.length;++n)if(!RK(e,t[n]))return!1;return!0}function O2e(e){switch(e.length){case 1:return I2e(e[0]);case 2:return k0(e[0],e[1]);case 3:return TK(e[0],e[1],e[2])}}function I2e(e){return{x:e.x,y:e.y,r:e.r}}function k0(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-i,c=s-r,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(i+a+u/d*c)/2,r:(d+r+s)/2}}function TK(e,t,n){var i=e.x,r=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,h=i-a,m=i-u,g=r-s,y=r-c,v=l-o,_=d-o,b=i*i+r*r-o*o,S=b-a*a-s*s+l*l,k=b-u*u-c*c+d*d,R=m*g-h*y,F=(g*k-y*S)/(R*2)-i,T=(y*v-g*_)/R,P=(m*S-h*k)/(R*2)-r,B=(h*_-m*v)/R,O=T*T+B*B-1,D=2*(o+F*T+P*B),W=F*F+P*P-o*o,j=-(Math.abs(O)>1e-6?(D+Math.sqrt(D*D-4*O*W))/(2*O):W/D);return{x:i+F+T*j,y:r+P+B*j,r:j}}function fj(e,t,n){var i=e.x-t.x,r,o,a=e.y-t.y,s,l,u=i*i+a*a;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(r=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-s*a,n.y=e.y-r*a+s*i):(r=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x+r*i-s*a,n.y=t.y+r*a+s*i)):(n.x=t.x+n.r,n.y=t.y)}function dj(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function hj(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function Px(e){this._=e,this.next=null,this.previous=null}function L2e(e,t){if(!(o=(e=M2e(e)).length))return 0;var n,i,r,o,a,s,l,u,c,d,h;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;fj(i,n,r=e[2]),n=new Px(n),i=new Px(i),r=new Px(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<o;++l){fj(n._,i._,r=e[l]),r=new Px(r),u=i.next,c=n.previous,d=i._.r,h=n._.r;do if(d<=h){if(dj(u._,r._)){i=u,n.next=i,i.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(dj(c._,r._)){n=c,n.next=i,i.previous=n,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,a=hj(n);(r=r.next)!==i;)(s=hj(r))<a&&(n=r,a=s);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=P2e(n,t),l=0;l<o;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function D2e(e){return Math.sqrt(e.value)}function z2e(){var e=null,t=1,n=1,i=Ef;function r(o){const a=F2e();return o.x=t/2,o.y=n/2,e?o.eachBefore(pj(e)).eachAfter($k(i,.5,a)).eachBefore(mj(1)):o.eachBefore(pj(D2e)).eachAfter($k(Ef,1,a)).eachAfter($k(i,o.r/Math.min(t,n),a)).eachBefore(mj(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=T_(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Oh(+o),r):i},r}function pj(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function $k(e,t,n){return function(i){if(r=i.children){var r,o,a=r.length,s=e(i)*t||0,l;if(s)for(o=0;o<a;++o)r[o].r+=s;if(l=L2e(r,n),s)for(o=0;o<a;++o)r[o].r-=s;i.r=l+s}}}function mj(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function AK(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Bv(e,t,n,i,r){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(i-t)/e.value;++s<l;)a=o[s],a.y0=n,a.y1=r,a.x0=t,a.x1=t+=a.value*u}function j2e(){var e=1,t=1,n=0,i=!1;function r(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),i&&a.eachBefore(AK),a}function o(a,s){return function(l){l.children&&Bv(l,l.x0,a*(l.depth+1)/s,l.x1,a*(l.depth+2)/s);var u=l.x0,c=l.y0,d=l.x1-n,h=l.y1-n;d<u&&(u=d=(u+d)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=h}}return r.round=function(a){return arguments.length?(i=!!a,r):i},r.size=function(a){return arguments.length?(e=+a[0],t=+a[1],r):[e,t]},r.padding=function(a){return arguments.length?(n=+a,r):n},r}var B2e={depth:-1},gj={},Ok={};function H2e(e){return e.id}function U2e(e){return e.parentId}function yj(){var e=H2e,t=U2e,n;function i(r){var o=Array.from(r),a=e,s=t,l,u,c,d,h,m,g,y,v=new Map;if(n!=null){const _=o.map((k,R)=>W2e(n(k,R,r))),b=_.map(vj),S=new Set(_).add("");for(const k of b)S.has(k)||(S.add(k),_.push(k),b.push(vj(k)),o.push(Ok));a=(k,R)=>_[R],s=(k,R)=>b[R]}for(c=0,l=o.length;c<l;++c)u=o[c],m=o[c]=new Jp(u),(g=a(u,c,r))!=null&&(g+="")&&(y=m.id=g,v.set(y,v.has(y)?gj:m)),(g=s(u,c,r))!=null&&(g+="")&&(m.parent=g);for(c=0;c<l;++c)if(m=o[c],g=m.parent){if(h=v.get(g),!h)throw new Error("missing: "+g);if(h===gj)throw new Error("ambiguous: "+g);h.children?h.children.push(m):h.children=[m],m.parent=h}else{if(d)throw new Error("multiple roots");d=m}if(!d)throw new Error("no root");if(n!=null){for(;d.data===Ok&&d.children.length===1;)d=d.children[0],--l;for(let _=o.length-1;_>=0&&(m=o[_],m.data===Ok);--_)m.data=null}if(d.parent=B2e,d.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(EK),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=T_(r),i):e},i.parentId=function(r){return arguments.length?(t=T_(r),i):t},i.path=function(r){return arguments.length?(n=T_(r),i):n},i}function W2e(e){e=`${e}`;let t=e.length;return aF(e,t-1)&&!aF(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function vj(e){let t=e.length;if(t<2)return"";for(;--t>1&&!aF(e,t););return e.slice(0,t)}function aF(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function G2e(e,t){return e.parent===t.parent?1:2}function Ik(e){var t=e.children;return t?t[0]:e.t}function Lk(e){var t=e.children;return t?t[t.length-1]:e.t}function q2e(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function V2e(e){for(var t=0,n=0,i=e.children,r=i.length,o;--r>=0;)o=i[r],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Y2e(e,t,n){return e.a.parent===t.parent?e.a:n}function A_(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}A_.prototype=Object.create(Jp.prototype);function Z2e(e){for(var t=new A_(e,0),n,i=[t],r,o,a,s;n=i.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)i.push(r=n.children[a]=new A_(o[a],a)),r.parent=n;return(t.parent=new A_(null,0)).children=[t],t}function X2e(){var e=G2e,t=1,n=1,i=null;function r(u){var c=Z2e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),i)u.eachBefore(l);else{var d=u,h=u,m=u;u.eachBefore(function(b){b.x<d.x&&(d=b),b.x>h.x&&(h=b),b.depth>m.depth&&(m=b)});var g=d===h?1:e(d,h)/2,y=g-d.x,v=t/(h.x+g+y),_=n/(m.depth||1);u.eachBefore(function(b){b.x=(b.x+y)*v,b.y=b.depth*_})}return u}function o(u){var c=u.children,d=u.parent.children,h=u.i?d[u.i-1]:null;if(c){V2e(u);var m=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+e(u._,h._),u.m=u.z-m):u.z=m}else h&&(u.z=h.z+e(u._,h._));u.parent.A=s(u,h,u.parent.A||d[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,d){if(c){for(var h=u,m=u,g=c,y=h.parent.children[0],v=h.m,_=m.m,b=g.m,S=y.m,k;g=Lk(g),h=Ik(h),g&&h;)y=Ik(y),m=Lk(m),m.a=u,k=g.z+b-h.z-v+e(g._,h._),k>0&&(q2e(Y2e(g,u,d),u,k),v+=k,_+=k),b+=g.m,v+=h.m,S+=y.m,_+=m.m;g&&!Lk(m)&&(m.t=g,m.m+=b-_),h&&!Ik(y)&&(y.t=h,y.m+=v-S,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r}function OS(e,t,n,i,r){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(r-n)/e.value;++s<l;)a=o[s],a.x0=t,a.x1=i,a.y0=n,a.y1=n+=a.value*u}var FK=(1+Math.sqrt(5))/2;function MK(e,t,n,i,r,o){for(var a=[],s=t.children,l,u,c=0,d=0,h=s.length,m,g,y=t.value,v,_,b,S,k,R,F;c<h;){m=r-n,g=o-i;do v=s[d++].value;while(!v&&d<h);for(_=b=v,R=Math.max(g/m,m/g)/(y*e),F=v*v*R,k=Math.max(b/F,F/_);d<h;++d){if(v+=u=s[d].value,u<_&&(_=u),u>b&&(b=u),F=v*v*R,S=Math.max(b/F,F/_),S>k){v-=u;break}k=S}a.push(l={value:v,dice:m<g,children:s.slice(c,d)}),l.dice?Bv(l,n,i,r,y?i+=g*v/y:o):OS(l,n,i,y?n+=m*v/y:r,o),y-=v,c=d}return a}const NK=function e(t){function n(i,r,o,a,s){MK(t,i,r,o,a,s)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(FK);function K2e(){var e=NK,t=!1,n=1,i=1,r=[0],o=Ef,a=Ef,s=Ef,l=Ef,u=Ef;function c(h){return h.x0=h.y0=0,h.x1=n,h.y1=i,h.eachBefore(d),r=[0],t&&h.eachBefore(AK),h}function d(h){var m=r[h.depth],g=h.x0+m,y=h.y0+m,v=h.x1-m,_=h.y1-m;v<g&&(g=v=(g+v)/2),_<y&&(y=_=(y+_)/2),h.x0=g,h.y0=y,h.x1=v,h.y1=_,h.children&&(m=r[h.depth+1]=o(h)/2,g+=u(h)-m,y+=a(h)-m,v-=s(h)-m,_-=l(h)-m,v<g&&(g=v=(g+v)/2),_<y&&(y=_=(y+_)/2),e(h,g,y,v,_))}return c.round=function(h){return arguments.length?(t=!!h,c):t},c.size=function(h){return arguments.length?(n=+h[0],i=+h[1],c):[n,i]},c.tile=function(h){return arguments.length?(e=kK(h),c):e},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(o=typeof h=="function"?h:Oh(+h),c):o},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:Oh(+h),c):a},c.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:Oh(+h),c):s},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Oh(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Oh(+h),c):u},c}function J2e(e,t,n,i,r){var o=e.children,a,s=o.length,l,u=new Array(s+1);for(u[0]=l=a=0;a<s;++a)u[a+1]=l+=o[a].value;c(0,s,e.value,t,n,i,r);function c(d,h,m,g,y,v,_){if(d>=h-1){var b=o[d];b.x0=g,b.y0=y,b.x1=v,b.y1=_;return}for(var S=u[d],k=m/2+S,R=d+1,F=h-1;R<F;){var T=R+F>>>1;u[T]<k?R=T+1:F=T}k-u[R-1]<u[R]-k&&d+1<R&&--R;var P=u[R]-S,B=m-P;if(v-g>_-y){var O=m?(g*B+v*P)/m:v;c(d,R,P,g,y,O,_),c(R,h,B,O,y,v,_)}else{var D=m?(y*B+_*P)/m:_;c(d,R,P,g,y,v,D),c(R,h,B,g,D,v,_)}}}function Q2e(e,t,n,i,r){(e.depth&1?OS:Bv)(e,t,n,i,r)}const eSe=function e(t){function n(i,r,o,a,s){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,d,h=-1,m,g=l.length,y=i.value;++h<g;){for(u=l[h],c=u.children,d=u.value=0,m=c.length;d<m;++d)u.value+=c[d].value;u.dice?Bv(u,r,o,a,y?o+=(s-o)*u.value/y:s):OS(u,r,o,y?r+=(a-r)*u.value/y:a,s),y-=u.value}else i._squarify=l=MK(t,i,r,o,a,s),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(FK);function sF(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function NO(e){ie.call(this,null,e)}NO.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const tSe=e=>e.values;_e(NO,ie,{transform(e,t){t.source||le("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(a=>{a.children&&Y2(a.data)&&r.rem.push(a.data)}),this.value=o=MO({values:Oe(e.keys).reduce((a,s)=>(a.key(s),a),nSe()).entries(r.source)},tSe),n&&o.each(a=>{a.children&&(a=qt(a.data),r.add.push(a),r.source.push(a))}),sF(o,Je,Je)),r.source.root=o,r}});function nSe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const a=r.length,s=e[o++],l={},u={};let c=-1,d,h,m;for(;++c<a;)d=s(h=r[c])+"",(m=l[d])?m.push(h):l[d]=[h];for(d in l)u[d]=n(l[d],o);return u}function i(r,o){if(++o>e.length)return r;const a=[];for(const s in r)a.push({key:s,values:i(r[s],o)});return a}return t}function Xl(e){ie.call(this,null,e)}const iSe=(e,t)=>e.parent===t.parent?1:2;_e(Xl,ie,{transform(e,t){(!t.source||!t.source.root)&&le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Id(e.sort,a=>a.data)),rSe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?iSe:wm);try{this.value=n(r)}catch(a){le(a)}return r.each(a=>oSe(a,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function rSe(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}function oSe(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}const lF=["x","y","r","depth","children"];function PO(e){Xl.call(this,e)}PO.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:lF.length,default:lF}]};_e(PO,Xl,{layout:z2e,params:["radius","size","padding"],fields:lF});const uF=["x0","y0","x1","y1","depth","children"];function $O(e){Xl.call(this,e)}$O.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uF.length,default:uF}]};_e($O,Xl,{layout:j2e,params:["size","round","padding"],fields:uF});function OO(e){ie.call(this,null,e)}OO.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};_e(OO,ie,{transform(e,t){t.source||le("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?sF(yj().id(e.key).parentId(e.parentKey)(r.source),e.key,Yo):sF(yj()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const xj={tidy:X2e,cluster:l2e},cF=["x","y","depth","children"];function IO(e){Xl.call(this,e)}IO.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:cF.length,default:cF}]};_e(IO,Xl,{layout(e){const t=e||"tidy";if(et(xj,t))return xj[t]();le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:cF});function LO(e){ie.call(this,[],e)}LO.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};_e(LO,ie,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,a=>o[Je(a)]=1),i.each(a=>{const s=a.data,l=a.parent&&a.parent.data;l&&o[Je(s)]&&o[Je(l)]&&r.add.push(qt({source:l,target:s}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Je(a)]=1),n.forEach(a=>{(o[Je(a.source)]||o[Je(a.target)])&&r.mod.push(a)})),r}});const _j={binary:J2e,dice:Bv,slice:OS,slicedice:Q2e,squarify:NK,resquarify:eSe},fF=["x0","y0","x1","y1","depth","children"];function DO(e){Xl.call(this,e)}DO.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fF.length,default:fF}]};_e(DO,Xl,{layout(){const e=K2e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{et(_j,t)?e.tile(_j[t]):le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:fF});const aSe=Object.freeze(Object.defineProperty({__proto__:null,nest:NO,pack:PO,partition:$O,stratify:OO,tree:IO,treelinks:LO,treemap:DO},Symbol.toStringTag,{value:"Module"})),Dk=4278190080;function sSe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function lSe(e,t,n,i,r){const o=e.width,a=e.height,s=i||r,l=ec(o,a).getContext("2d"),u=ec(o,a).getContext("2d"),c=s&&ec(o,a).getContext("2d");n.forEach(P=>F_(l,P,!1)),F_(u,t,!1),s&&F_(c,t,!0);const d=zk(l,o,a),h=zk(u,o,a),m=s&&zk(c,o,a),g=e.bitmap(),y=s&&e.bitmap();let v,_,b,S,k,R,F,T;for(_=0;_<a;++_)for(v=0;v<o;++v)k=_*o+v,R=d[k]&Dk,T=h[k]&Dk,F=s&&m[k]&Dk,(R||F||T)&&(b=e(v),S=e(_),!r&&(R||T)&&g.set(b,S),s&&(R||F)&&y.set(b,S));return[g,y]}function zk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function F_(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(o=>F_(e,o.items,n))}):_o[i].draw(e,{items:n?t.map(uSe):t})}function uSe(e){const t=Z2(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const nl=5,nr=31,Yy=32,Eu=new Uint32Array(Yy+1),_a=new Uint32Array(Yy+1);_a[0]=0;Eu[0]=~_a[0];for(let e=1;e<=Yy;++e)_a[e]=_a[e-1]<<1|1,Eu[e]=~_a[e];function cSe(e,t){const n=new Uint32Array(~~((e*t+Yy)/Yy));function i(o,a){n[o]|=a}function r(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>nl]&1<<(s&nr)},set:(o,a)=>{const s=a*e+o;i(s>>>nl,1<<(s&nr))},clear:(o,a)=>{const s=a*e+o;r(s>>>nl,~(1<<(s&nr)))},getRange:(o,a,s,l)=>{let u=l,c,d,h,m;for(;u>=a;--u)if(c=u*e+o,d=u*e+s,h=c>>>nl,m=d>>>nl,h===m){if(n[h]&Eu[c&nr]&_a[(d&nr)+1])return!0}else{if(n[h]&Eu[c&nr]||n[m]&_a[(d&nr)+1])return!0;for(let g=h+1;g<m;++g)if(n[g])return!0}return!1},setRange:(o,a,s,l)=>{let u,c,d,h,m;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>nl,h=c>>>nl,d===h)i(d,Eu[u&nr]&_a[(c&nr)+1]);else for(i(d,Eu[u&nr]),i(h,_a[(c&nr)+1]),m=d+1;m<h;++m)i(m,4294967295)},clearRange:(o,a,s,l)=>{let u,c,d,h,m;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>nl,h=c>>>nl,d===h)r(d,_a[u&nr]|Eu[(c&nr)+1]);else for(r(d,_a[u&nr]),r(h,Eu[(c&nr)+1]),m=d+1;m<h;++m)r(m,0)},outOfBounds:(o,a,s,l)=>o<0||a<0||l>=t||s>=e}}function fSe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),a=s=>~~((s+n)/i);return a.invert=s=>s*i-n,a.bitmap=()=>cSe(r,o),a.ratio=i,a.padding=n,a.width=e,a.height=t,a}function dSe(e,t,n,i){const r=e.width,o=e.height;return function(a){const s=a.datum.datum.items[i].items,l=s.length,u=a.datum.fontSize,c=po.width(a.datum,a.datum.text);let d=0,h,m,g,y,v,_,b;for(let S=0;S<l;++S)h=s[S].x,g=s[S].y,m=s[S].x2===void 0?h:s[S].x2,y=s[S].y2===void 0?g:s[S].y2,v=(h+m)/2,_=(g+y)/2,b=Math.abs(m-h+y-g),b>=d&&(d=b,a.x=v,a.y=_);return v=c/2,_=u/2,h=a.x-v,m=a.x+v,g=a.y-_,y=a.y+_,a.align="center",h<0&&m<=r?a.align="left":0<=h&&r<m&&(a.align="right"),a.baseline="middle",g<0&&y<=o?a.baseline="top":0<=g&&o<y&&(a.baseline="bottom"),!0}}function Rw(e,t,n,i,r,o){let a=n/2;return e-a<0||e+a>r||t-(a=i/2)<0||t+a>o}function Bu(e,t,n,i,r,o,a,s){const l=r*o/(i*2),u=e(t-l),c=e(t+l),d=e(n-(o=o/2)),h=e(n+o);return a.outOfBounds(u,d,c,h)||a.getRange(u,d,c,h)||s&&s.getRange(u,d,c,h)}function hSe(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1];function l(u,c,d,h,m){const g=e.invert(u),y=e.invert(c);let v=d,_=o,b;if(!Rw(g,y,h,m,r,o)&&!Bu(e,g,y,m,h,v,a,s)&&!Bu(e,g,y,m,h,m,a,null)){for(;_-v>=1;)b=(v+_)/2,Bu(e,g,y,m,h,b,a,s)?_=b:v=b;if(v>d)return[g,y,v,!0]}}return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,m=po.width(u.datum,u.datum.text);let g=n?h:0,y=!1,v=!1,_=0,b,S,k,R,F,T,P,B,O,D,W,j,U,G,Z,J,H;for(let Q=0;Q<d;++Q){for(b=c[Q].x,k=c[Q].y,S=c[Q].x2===void 0?b:c[Q].x2,R=c[Q].y2===void 0?k:c[Q].y2,b>S&&(H=b,b=S,S=H),k>R&&(H=k,k=R,R=H),O=e(b),W=e(S),D=~~((O+W)/2),j=e(k),G=e(R),U=~~((j+G)/2),P=D;P>=O;--P)for(B=U;B>=j;--B)J=l(P,B,g,m,h),J&&([u.x,u.y,g,y]=J);for(P=D;P<=W;++P)for(B=U;B<=G;++B)J=l(P,B,g,m,h),J&&([u.x,u.y,g,y]=J);!y&&!n&&(Z=Math.abs(S-b+R-k),F=(b+S)/2,T=(k+R)/2,Z>=_&&!Rw(F,T,m,h,r,o)&&!Bu(e,F,T,h,m,h,a,null)&&(_=Z,u.x=F,u.y=T,v=!0))}return y||v?(F=m/2,T=h/2,a.setRange(e(u.x-F),e(u.y-T),e(u.x+F),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const pSe=[-1,-1,1,1],mSe=[-1,1,-1,1];function gSe(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,m=po.width(u.datum,u.datum.text),g=[];let y=n?h:0,v=!1,_=!1,b=0,S,k,R,F,T,P,B,O,D,W,j,U;for(let G=0;G<d;++G){for(S=c[G].x,R=c[G].y,k=c[G].x2===void 0?S:c[G].x2,F=c[G].y2===void 0?R:c[G].y2,g.push([e((S+k)/2),e((R+F)/2)]);g.length;)if([B,O]=g.pop(),!(a.get(B,O)||s.get(B,O)||l.get(B,O))){l.set(B,O);for(let Z=0;Z<4;++Z)T=B+pSe[Z],P=O+mSe[Z],l.outOfBounds(T,P,T,P)||g.push([T,P]);if(T=e.invert(B),P=e.invert(O),D=y,W=o,!Rw(T,P,m,h,r,o)&&!Bu(e,T,P,h,m,D,a,s)&&!Bu(e,T,P,h,m,h,a,null)){for(;W-D>=1;)j=(D+W)/2,Bu(e,T,P,h,m,j,a,s)?W=j:D=j;D>y&&(u.x=T,u.y=P,y=D,v=!0)}}!v&&!n&&(U=Math.abs(k-S+F-R),T=(S+k)/2,P=(R+F)/2,U>=b&&!Rw(T,P,m,h,r,o)&&!Bu(e,T,P,h,m,h,a,null)&&(b=U,u.x=T,u.y=P,_=!0))}return v||_?(T=m/2,P=h/2,a.setRange(e(u.x-T),e(u.y-P),e(u.x+T),e(u.y+P)),u.align="center",u.baseline="middle",!0):!1}}const ySe=["right","center","left"],vSe=["bottom","middle","top"];function xSe(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1],l=i.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>o)return!1;let h=u.textWidth??0,m,g,y,v,_,b,S,k,R,F,T,P,B,O,D;for(let W=0;W<l;++W){if(m=(n[W]&3)-1,g=(n[W]>>>2&3)-1,y=m===0&&g===0||i[W]<0,v=m&&g?Math.SQRT1_2:1,_=i[W]<0?-1:1,b=c[1+m]+i[W]*m*v,T=c[4+g]+_*d*g/2+i[W]*g*v,k=T-d/2,R=T+d/2,P=e(b),O=e(k),D=e(R),!h)if(bj(P,P,O,D,a,s,b,b,k,R,c,y))h=po.width(u.datum,u.datum.text);else continue;if(F=b+_*h*m/2,b=F-h/2,S=F+h/2,P=e(b),B=e(S),bj(P,B,O,D,a,s,b,S,k,R,c,y))return u.x=m?m*_<0?S:b:F,u.y=g?g*_<0?R:k:T,u.align=ySe[m*_+1],u.baseline=vSe[g*_+1],a.setRange(P,O,B,D),!0}return!1}}function bj(e,t,n,i,r,o,a,s,l,u,c,d){return!(r.outOfBounds(e,n,t,i)||(d&&o||r).getRange(e,n,t,i))}const jk=0,Bk=4,Hk=8,Uk=0,Wk=1,Gk=2,_Se={"top-left":jk+Uk,top:jk+Wk,"top-right":jk+Gk,left:Bk+Uk,middle:Bk+Wk,right:Bk+Gk,"bottom-left":Hk+Uk,bottom:Hk+Wk,"bottom-right":Hk+Gk},bSe={naive:dSe,"reduced-search":hSe,floodfill:gSe};function wSe(e,t,n,i,r,o,a,s,l,u,c){if(!e.length)return e;const d=Math.max(i.length,r.length),h=SSe(i,d),m=CSe(r,d),g=ESe(e[0].datum),y=g==="group"&&e[0].datum.items[l].marktype,v=y==="area",_=kSe(g,y,s,l),b=u===null||u===1/0,S=v&&c==="naive";let k=-1,R=-1;const F=e.map(O=>{const D=b?po.width(O,O.text):void 0;return k=Math.max(k,D),R=Math.max(R,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(O),textWidth:D}});u=u===null||u===1/0?Math.max(k,R)+Math.max(...i):u;const T=fSe(t[0],t[1],u);let P;if(!S){n&&F.sort((W,j)=>n(W.datum,j.datum));let O=!1;for(let W=0;W<m.length&&!O;++W)O=m[W]===5||h[W]<0;const D=(g&&a||v)&&e.map(W=>W.datum);P=o.length||D?lSe(T,D||[],o,O,v):sSe(T,a&&F)}const B=v?bSe[c](T,P,a,l):xSe(T,P,m,h);return F.forEach(O=>O.opacity=+B(O)),F}function SSe(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function CSe(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=_Se[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function ESe(e){return e&&e.mark&&e.mark.marktype}function kSe(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>r(o.datum):t==="line"?o=>{const a=o.datum.items[i].items;return r(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:r}const dF=["x","y","opacity","align","baseline"],PK=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function zO(e){ie.call(this,null,e)}zO.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:PK},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:dF.length,default:dF}]};_e(zO,ie,{transform(e,t){function n(o){const a=e[o];return _t(a)&&t.modified(a.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&le("Size parameter should be specified as a [width, height] array.");const r=e.as||dF;return wSe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Oe(e.offset==null?1:e.offset),Oe(e.anchor||PK),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[r[0]]=o.x,a[r[1]]=o.y,a[r[2]]=o.opacity,a[r[3]]=o.align,a[r[4]]=o.baseline}),t.reflow(i).modifies(r)}});const RSe=Object.freeze(Object.defineProperty({__proto__:null,label:zO},Symbol.toStringTag,{value:"Module"}));function $K(e,t){var n=[],i=function(c){return c(s)},r,o,a,s,l,u;if(t==null)n.push(e);else for(r={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function jO(e){ie.call(this,null,e)}jO.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};_e(jO,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=$K(i,e.groupby),o=(e.groupby||[]).map(In),a=o.length,s=e.as||[In(e.x),In(e.y)],l=[];r.forEach(u=>{Gq(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let h=0;h<a;++h)d[o[h]]=u.dims[h];d[s[0]]=c[0],d[s[1]]=c[1],l.push(qt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const hF={constant:vP,linear:xP,log:Bq,exp:Hq,pow:Uq,quad:_P,poly:Wq},TSe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function BO(e){ie.call(this,null,e)}BO.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(hF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};_e(BO,ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=$K(i,e.groupby),o=(e.groupby||[]).map(In),a=e.method||"linear",s=e.order==null?3:e.order,l=TSe(a,s),u=e.as||[In(e.x),In(e.y)],c=hF[a],d=[];let h=e.extent;et(hF,a)||le("Invalid regression method: "+a),h!=null&&a==="log"&&h[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),r.forEach(m=>{if(m.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const y=c(m,e.x,e.y,s);if(e.params){d.push(qt({keys:m.dims,coef:y.coef,rSquared:y.rSquared}));return}const v=h||Es(m,e.x),_=b=>{const S={};for(let k=0;k<o.length;++k)S[o[k]]=m.dims[k];S[u[0]]=b[0],S[u[1]]=b[1],d.push(qt(S))};a==="linear"||a==="constant"?v.forEach(b=>_([b,y.predict(b)])):nS(y.predict,v,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const ASe=Object.freeze(Object.defineProperty({__proto__:null,loess:jO,regression:BO},Symbol.toStringTag,{value:"Module"})),Fl=11102230246251565e-32,Di=134217729,FSe=(3+8*Fl)*Fl;function qk(e,t,n,i,r){let o,a,s,l,u=t[0],c=i[0],d=0,h=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=i[++h]);let m=0;if(d<e&&h<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=c+o,s=o-(a-c),c=i[++h]),o=a,s!==0&&(r[m++]=s);d<e&&h<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h]),o=a,s!==0&&(r[m++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,s!==0&&(r[m++]=s);for(;h<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h],o=a,s!==0&&(r[m++]=s);return(o!==0||m===0)&&(r[m++]=o),m}function MSe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Hv(e){return new Float64Array(e)}const NSe=(3+16*Fl)*Fl,PSe=(2+12*Fl)*Fl,$Se=(9+64*Fl)*Fl*Fl,kh=Hv(4),wj=Hv(8),Sj=Hv(12),Cj=Hv(16),ir=Hv(4);function OSe(e,t,n,i,r,o,a){let s,l,u,c,d,h,m,g,y,v,_,b,S,k,R,F,T,P;const B=e-r,O=n-r,D=t-o,W=i-o;k=B*W,h=Di*B,m=h-(h-B),g=B-m,h=Di*W,y=h-(h-W),v=W-y,R=g*v-(k-m*y-g*y-m*v),F=D*O,h=Di*D,m=h-(h-D),g=D-m,h=Di*O,y=h-(h-O),v=O-y,T=g*v-(F-m*y-g*y-m*v),_=R-T,d=R-_,kh[0]=R-(_+d)+(d-T),b=k+_,d=b-k,S=k-(b-d)+(_-d),_=S-F,d=S-_,kh[1]=S-(_+d)+(d-F),P=b+_,d=P-b,kh[2]=b-(P-d)+(_-d),kh[3]=P;let j=MSe(4,kh),U=PSe*a;if(j>=U||-j>=U||(d=e-B,s=e-(B+d)+(d-r),d=n-O,u=n-(O+d)+(d-r),d=t-D,l=t-(D+d)+(d-o),d=i-W,c=i-(W+d)+(d-o),s===0&&l===0&&u===0&&c===0)||(U=$Se*a+FSe*Math.abs(j),j+=B*c+W*s-(D*u+O*l),j>=U||-j>=U))return j;k=s*W,h=Di*s,m=h-(h-s),g=s-m,h=Di*W,y=h-(h-W),v=W-y,R=g*v-(k-m*y-g*y-m*v),F=l*O,h=Di*l,m=h-(h-l),g=l-m,h=Di*O,y=h-(h-O),v=O-y,T=g*v-(F-m*y-g*y-m*v),_=R-T,d=R-_,ir[0]=R-(_+d)+(d-T),b=k+_,d=b-k,S=k-(b-d)+(_-d),_=S-F,d=S-_,ir[1]=S-(_+d)+(d-F),P=b+_,d=P-b,ir[2]=b-(P-d)+(_-d),ir[3]=P;const G=qk(4,kh,4,ir,wj);k=B*c,h=Di*B,m=h-(h-B),g=B-m,h=Di*c,y=h-(h-c),v=c-y,R=g*v-(k-m*y-g*y-m*v),F=D*u,h=Di*D,m=h-(h-D),g=D-m,h=Di*u,y=h-(h-u),v=u-y,T=g*v-(F-m*y-g*y-m*v),_=R-T,d=R-_,ir[0]=R-(_+d)+(d-T),b=k+_,d=b-k,S=k-(b-d)+(_-d),_=S-F,d=S-_,ir[1]=S-(_+d)+(d-F),P=b+_,d=P-b,ir[2]=b-(P-d)+(_-d),ir[3]=P;const Z=qk(G,wj,4,ir,Sj);k=s*c,h=Di*s,m=h-(h-s),g=s-m,h=Di*c,y=h-(h-c),v=c-y,R=g*v-(k-m*y-g*y-m*v),F=l*u,h=Di*l,m=h-(h-l),g=l-m,h=Di*u,y=h-(h-u),v=u-y,T=g*v-(F-m*y-g*y-m*v),_=R-T,d=R-_,ir[0]=R-(_+d)+(d-T),b=k+_,d=b-k,S=k-(b-d)+(_-d),_=S-F,d=S-_,ir[1]=S-(_+d)+(d-F),P=b+_,d=P-b,ir[2]=b-(P-d)+(_-d),ir[3]=P;const J=qk(Z,Sj,4,ir,Cj);return Cj[J-1]}function $x(e,t,n,i,r,o){const a=(t-o)*(n-r),s=(e-r)*(i-o),l=a-s,u=Math.abs(a+s);return Math.abs(l)>=NSe*u?l:-OSe(e,t,n,i,r,o,u)}const Ej=Math.pow(2,-52),Ox=new Uint32Array(512);class Tw{static from(t,n=jSe,i=BSe){const r=t.length,o=new Float64Array(r*2);for(let a=0;a<r;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=i(s)}return new Tw(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,a=t.length>>1;let s=1/0,l=1/0,u=-1/0,c=-1/0;for(let O=0;O<a;O++){const D=t[2*O],W=t[2*O+1];D<s&&(s=D),W<l&&(l=W),D>u&&(u=D),W>c&&(c=W),this._ids[O]=O}const d=(s+u)/2,h=(l+c)/2;let m=1/0,g,y,v;for(let O=0;O<a;O++){const D=Vk(d,h,t[2*O],t[2*O+1]);D<m&&(g=O,m=D)}const _=t[2*g],b=t[2*g+1];m=1/0;for(let O=0;O<a;O++){if(O===g)continue;const D=Vk(_,b,t[2*O],t[2*O+1]);D<m&&D>0&&(y=O,m=D)}let S=t[2*y],k=t[2*y+1],R=1/0;for(let O=0;O<a;O++){if(O===g||O===y)continue;const D=DSe(_,b,S,k,t[2*O],t[2*O+1]);D<R&&(v=O,R=D)}let F=t[2*v],T=t[2*v+1];if(R===1/0){for(let W=0;W<a;W++)this._dists[W]=t[2*W]-t[0]||t[2*W+1]-t[1];ip(this._ids,this._dists,0,a-1);const O=new Uint32Array(a);let D=0;for(let W=0,j=-1/0;W<a;W++){const U=this._ids[W];this._dists[U]>j&&(O[D++]=U,j=this._dists[U])}this.hull=O.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if($x(_,b,S,k,F,T)<0){const O=y,D=S,W=k;y=v,S=F,k=T,v=O,F=D,T=W}const P=zSe(_,b,S,k,F,T);this._cx=P.x,this._cy=P.y;for(let O=0;O<a;O++)this._dists[O]=Vk(t[2*O],t[2*O+1],P.x,P.y);ip(this._ids,this._dists,0,a-1),this._hullStart=g;let B=3;i[g]=n[v]=y,i[y]=n[g]=v,i[v]=n[y]=g,r[g]=0,r[y]=1,r[v]=2,o.fill(-1),o[this._hashKey(_,b)]=g,o[this._hashKey(S,k)]=y,o[this._hashKey(F,T)]=v,this.trianglesLen=0,this._addTriangle(g,y,v,-1,-1,-1);for(let O=0,D,W;O<this._ids.length;O++){const j=this._ids[O],U=t[2*j],G=t[2*j+1];if(O>0&&Math.abs(U-D)<=Ej&&Math.abs(G-W)<=Ej||(D=U,W=G,j===g||j===y||j===v))continue;let Z=0;for(let ne=0,he=this._hashKey(U,G);ne<this._hashSize&&(Z=o[(he+ne)%this._hashSize],!(Z!==-1&&Z!==i[Z]));ne++);Z=n[Z];let J=Z,H;for(;H=i[J],$x(U,G,t[2*J],t[2*J+1],t[2*H],t[2*H+1])>=0;)if(J=H,J===Z){J=-1;break}if(J===-1)continue;let Q=this._addTriangle(J,j,i[J],-1,-1,r[J]);r[j]=this._legalize(Q+2),r[J]=Q,B++;let K=i[J];for(;H=i[K],$x(U,G,t[2*K],t[2*K+1],t[2*H],t[2*H+1])<0;)Q=this._addTriangle(K,j,H,r[j],-1,r[K]),r[j]=this._legalize(Q+2),i[K]=K,B--,K=H;if(J===Z)for(;H=n[J],$x(U,G,t[2*H],t[2*H+1],t[2*J],t[2*J+1])<0;)Q=this._addTriangle(H,j,J,-1,r[J],r[H]),this._legalize(Q+2),r[H]=Q,i[J]=J,B--,J=H;this._hullStart=n[j]=J,i[J]=n[K]=j,i[j]=K,o[this._hashKey(U,G)]=j,o[this._hashKey(t[2*J],t[2*J+1])]=J}this.hull=new Uint32Array(B);for(let O=0,D=this._hullStart;O<B;O++)this.hull[O]=D,D=i[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ISe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,a=0;for(;;){const s=i[t],l=t-t%3;if(a=l+(t+2)%3,s===-1){if(o===0)break;t=Ox[--o];continue}const u=s-s%3,c=l+(t+1)%3,d=u+(s+2)%3,h=n[a],m=n[t],g=n[c],y=n[d];if(LSe(r[2*h],r[2*h+1],r[2*m],r[2*m+1],r[2*g],r[2*g+1],r[2*y],r[2*y+1])){n[t]=y,n[s]=h;const _=i[d];if(_===-1){let S=this._hullStart;do{if(this._hullTri[S]===d){this._hullTri[S]=t;break}S=this._hullPrev[S]}while(S!==this._hullStart)}this._link(t,_),this._link(s,i[a]),this._link(a,d);const b=u+(s+1)%3;o<Ox.length&&(Ox[o++]=b)}else{if(o===0)break;t=Ox[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=i,this._link(s,r),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function ISe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Vk(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function LSe(e,t,n,i,r,o,a,s){const l=e-a,u=t-s,c=n-a,d=i-s,h=r-a,m=o-s,g=l*l+u*u,y=c*c+d*d,v=h*h+m*m;return l*(d*v-y*m)-u*(c*v-y*h)+g*(c*m-d*h)<0}function DSe(e,t,n,i,r,o){const a=n-e,s=i-t,l=r-e,u=o-t,c=a*a+s*s,d=l*l+u*u,h=.5/(a*u-s*l),m=(u*c-s*d)*h,g=(a*d-l*c)*h;return m*m+g*g}function zSe(e,t,n,i,r,o){const a=n-e,s=i-t,l=r-e,u=o-t,c=a*a+s*s,d=l*l+u*u,h=.5/(a*u-s*l),m=e+(u*c-s*d)*h,g=t+(a*d-l*c)*h;return{x:m,y:g}}function ip(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],a=t[o];let s=r-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const r=n+i>>1;let o=n+1,a=i;Hg(e,r,o),t[e[n]]>t[e[i]]&&Hg(e,n,i),t[e[o]]>t[e[i]]&&Hg(e,o,i),t[e[n]]>t[e[o]]&&Hg(e,n,o);const s=e[o],l=t[s];for(;;){do o++;while(t[e[o]]<l);do a--;while(t[e[a]]>l);if(a<o)break;Hg(e,o,a)}e[n+1]=e[a],e[a]=s,i-o+1>=a-n?(ip(e,t,o,i),ip(e,t,n,a-1)):(ip(e,t,n,a-1),ip(e,t,o,i))}}function Hg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function jSe(e){return e[0]}function BSe(e){return e[1]}const kj=1e-6;class Of{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>kj||Math.abs(this._y1-o)>kj)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class pF{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let HSe=class{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let o,a;const s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y=0,v=0,_=i.length,b,S;y<_;y+=3,v+=2){const k=i[y]*2,R=i[y+1]*2,F=i[y+2]*2,T=t[k],P=t[k+1],B=t[R],O=t[R+1],D=t[F],W=t[F+1],j=B-T,U=O-P,G=D-T,Z=W-P,J=(j*Z-U*G)*2;if(Math.abs(J)<1e-9){if(o===void 0){o=a=0;for(const Q of n)o+=t[Q*2],a+=t[Q*2+1];o/=n.length,a/=n.length}const H=1e9*Math.sign((o-T)*Z-(a-P)*G);b=(T+D)/2-H*Z,S=(P+W)/2+H*G}else{const H=1/J,Q=j*j+U*U,K=G*G+Z*Z;b=T+(Z*Q-U*K)*H,S=P+(j*K-G*Q)*H}s[v]=b,s[v+1]=S}let l=n[n.length-1],u,c=l*4,d,h=t[2*l],m,g=t[2*l+1];r.fill(0);for(let y=0;y<n.length;++y)l=n[y],u=c,d=h,m=g,c=l*4,h=t[2*l],g=t[2*l+1],r[u+2]=r[c]=m-g,r[u+3]=r[c+1]=h-d}render(t){const n=t==null?t=new Of:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const h=i[c];if(h<c)continue;const m=Math.floor(c/3)*2,g=Math.floor(h/3)*2,y=a[m],v=a[m+1],_=a[g],b=a[g+1];this._renderSegment(y,v,_,b,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const d=Math.floor(r[u]/3)*2,h=a[d],m=a[d+1],g=l*4,y=this._project(h,m,s[g+2],s[g+3]);y&&this._renderSegment(h,m,y[0],y[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Of:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Of:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&n.lineTo(r[a],r[a+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new pF;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let a;const s=this._regioncode(t,n),l=this._regioncode(i,r);s===0&&l===0?(o.moveTo(t,n),o.lineTo(i,r)):(a=this._clipSegment(t,n,i,r,s,l))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,l=r.length;s<l;s+=2)if(n[o]===r[s]&&n[o+1]===r[s+1]&&n[(o+2)%a]===r[(s+l-2)%l]&&n[(o+3)%a]===r[(s+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,a=i[t];if(a===-1)return null;const s=[];let l=a;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==a&&l!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,o,a,s=n[i-2],l=n[i-1],u,c=this._regioncode(s,l),d,h=0;for(let m=0;m<i;m+=2)if(o=s,a=l,s=n[m],l=n[m+1],u=c,c=this._regioncode(s,l),u===0&&c===0)d=h,h=0,r?r.push(s,l):r=[s,l];else{let g,y,v,_,b;if(u===0){if((g=this._clipSegment(o,a,s,l,u,c))===null)continue;[y,v,_,b]=g}else{if((g=this._clipSegment(s,l,o,a,c,u))===null)continue;[_,b,y,v]=g,d=h,h=this._edgecode(y,v),d&&h&&this._edge(t,d,h,r,r.length),r?r.push(y,v):r=[y,v]}d=h,h=this._edgecode(_,b),d&&h&&this._edge(t,d,h,r,r.length),r?r.push(_,b):r=[_,b]}if(r)d=h,h=this._edgecode(r[0],r[1]),d&&h&&this._edge(t,d,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,a){const s=o<a;for(s&&([t,n,i,r,o,a]=[i,r,t,n,a,o]);;){if(o===0&&a===0)return s?[i,r,t,n]:[t,n,i,r];if(o&a)return null;let l,u,c=o||a;c&8?(l=t+(i-t)*(this.ymax-n)/(r-n),u=this.ymax):c&4?(l=t+(i-t)*(this.ymin-n)/(r-n),u=this.ymin):c&2?(u=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(u=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(i=l,r=u,a=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,o,a){let s=Array.from(n),l;if((l=this._project(s[0],s[1],i,r))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(l[0],l[1]),s=this._clipFinite(t,s))for(let u=0,c=s.length,d,h=this._edgecode(s[c-2],s[c-1]);u<c;u+=2)d=h,h=this._edgecode(s[u],s[u+1]),d&&h&&(u=this._edge(t,d,h,s,u),c=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,i,r,o){for(;n!==i;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(r[o]!==a||r[o+1]!==s)&&this.contains(t,a,s)&&(r.splice(o,0,a,s),o+=2)}return o}_project(t,n,i,r){let o=1/0,a,s,l;if(r<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/r)<o&&(l=this.ymin,s=t+(o=a)*i)}else if(r>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/r)<o&&(l=this.ymax,s=t+(o=a)*i)}if(i>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/i)<o&&(s=this.xmax,l=n+(o=a)*r)}else if(i<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/i)<o&&(s=this.xmin,l=n+(o=a)*r)}return[s,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const USe=2*Math.PI,Rh=Math.pow;function WSe(e){return e[0]}function GSe(e){return e[1]}function qSe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],a=2*t[i+2];if((n[a]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}function VSe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class HO{static from(t,n=WSe,i=GSe,r){return new HO("length"in t?YSe(t,n,i,r):Float64Array.from(ZSe(t,n,i,r)))}constructor(t){this._delaunator=new Tw(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&qSe(t)){this.collinear=Int32Array.from({length:n.length/2},(h,m)=>m).sort((h,m)=>n[2*h]-n[2*m]||n[2*h+1]-n[2*m+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,m=n.length/2;h<m;++h){const g=VSe(n[2*h],n[2*h+1],d);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Tw(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(i[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=r.length;l<u;++l)s[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new HSe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:a,collinear:s}=this;if(s){const d=s.indexOf(t);d>0&&(yield s[d-1]),d<s.length-1&&(yield s[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=o[u],u===-1){const d=i[(r[t]+1)%i.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:a,halfedges:s,triangles:l,points:u}=this;if(r[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=Rh(n-u[t*2],2)+Rh(i-u[t*2+1],2);const h=r[t];let m=h;do{let g=l[m];const y=Rh(n-u[g*2],2)+Rh(i-u[g*2+1],2);if(y<d&&(d=y,c=g),m=m%3===2?m-2:m+1,l[m]!==t)break;if(m=s[m],m===-1){if(m=o[(a[t]+1)%o.length],m!==g&&Rh(n-u[m*2],2)+Rh(i-u[m*2+1],2)<d)return m;break}}while(m!==h);return c}render(t){const n=t==null?t=new Of:void 0,{points:i,halfedges:r,triangles:o}=this;for(let a=0,s=r.length;a<s;++a){const l=r[a];if(l<a)continue;const u=o[a]*2,c=o[l]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Of:void 0,{points:r}=this;for(let o=0,a=r.length;o<a;o+=2){const s=r[o],l=r[o+1];t.moveTo(s+n,l),t.arc(s,l,n,0,USe)}return i&&i.value()}renderHull(t){const n=t==null?t=new Of:void 0,{hull:i,points:r}=this,o=i[0]*2,a=i.length;t.moveTo(r[o],r[o+1]);for(let s=1;s<a;++s){const l=2*i[s];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new pF;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Of:void 0,{points:r,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,l=o[t+2]*2;return n.moveTo(r[a],r[a+1]),n.lineTo(r[s],r[s+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new pF;return this.renderTriangle(t,n),n.value()}}function YSe(e,t,n,i){const r=e.length,o=new Float64Array(r*2);for(let a=0;a<r;++a){const s=e[a];o[a*2]=t.call(i,s,a,e),o[a*2+1]=n.call(i,s,a,e)}return o}function*ZSe(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}function UO(e){ie.call(this,null,e)}UO.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const XSe=[-1e5,-1e5,1e5,1e5];_e(UO,ie,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:XSe;const o=this.value=HO.from(i,e.x,e.y).voronoi(r);for(let a=0,s=i.length;a<s;++a){const l=o.cellPolygon(a);i[a][n]=l&&!JSe(l)?KSe(l):null}return t.reflow(e.modified()).modifies(n)}});function KSe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function JSe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const QSe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:UO},Symbol.toStringTag,{value:"Module"}));var Yk=Math.PI/180,R0=64,M_=2048;function eCe(){var e=[256,256],t,n,i,r,o,a,s,l=OK,u=[],c=Math.random,d={};d.layout=function(){for(var g=h(ec()),y=aCe((e[0]>>5)*e[1]),v=null,_=u.length,b=-1,S=[],k=u.map(F=>({text:t(F),font:n(F),style:r(F),weight:o(F),rotate:a(F),size:~~(i(F)+1e-14),padding:s(F),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:F})).sort((F,T)=>T.size-F.size);++b<_;){var R=k[b];R.x=e[0]*(c()+.5)>>1,R.y=e[1]*(c()+.5)>>1,tCe(g,R,k,b),R.hasText&&m(y,R,v)&&(S.push(R),v?iCe(v,R):v=[{x:R.x+R.x0,y:R.y+R.y0},{x:R.x+R.x1,y:R.y+R.y1}],R.x-=e[0]>>1,R.y-=e[1]>>1)}return S};function h(g){g.width=g.height=1;var y=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(R0<<5)/y,g.height=M_/y;var v=g.getContext("2d");return v.fillStyle=v.strokeStyle="red",v.textAlign="center",{context:v,ratio:y}}function m(g,y,v){for(var _=y.x,b=y.y,S=Math.sqrt(e[0]*e[0]+e[1]*e[1]),k=l(e),R=c()<.5?1:-1,F=-R,T,P,B;(T=k(F+=R))&&(P=~~T[0],B=~~T[1],!(Math.min(Math.abs(P),Math.abs(B))>=S));)if(y.x=_+P,y.y=b+B,!(y.x+y.x0<0||y.y+y.y0<0||y.x+y.x1>e[0]||y.y+y.y1>e[1])&&(!v||!nCe(y,g,e[0]))&&(!v||rCe(y,v))){for(var O=y.sprite,D=y.width>>5,W=e[0]>>5,j=y.x-(D<<4),U=j&127,G=32-U,Z=y.y1-y.y0,J=(y.y+y.y0)*W+(j>>5),H,Q=0;Q<Z;Q++){H=0;for(var K=0;K<=D;K++)g[J+K]|=H<<G|(K<D?(H=O[Q*D+K])>>>U:0);J+=W}return y.sprite=null,!0}return!1}return d.words=function(g){return arguments.length?(u=g,d):u},d.size=function(g){return arguments.length?(e=[+g[0],+g[1]],d):e},d.font=function(g){return arguments.length?(n=of(g),d):n},d.fontStyle=function(g){return arguments.length?(r=of(g),d):r},d.fontWeight=function(g){return arguments.length?(o=of(g),d):o},d.rotate=function(g){return arguments.length?(a=of(g),d):a},d.text=function(g){return arguments.length?(t=of(g),d):t},d.spiral=function(g){return arguments.length?(l=sCe[g]||g,d):l},d.fontSize=function(g){return arguments.length?(i=of(g),d):i},d.padding=function(g){return arguments.length?(s=of(g),d):s},d.random=function(g){return arguments.length?(c=g,d):c},d}function tCe(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,(R0<<5)/o,M_/o);var a=0,s=0,l=0,u=n.length,c,d,h,m,g;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=r.measureText(t.text+"m").width*o,h=t.size<<1,t.rotate){var y=Math.sin(t.rotate*Yk),v=Math.cos(t.rotate*Yk),_=c*v,b=c*y,S=h*v,k=h*y;c=Math.max(Math.abs(_+k),Math.abs(_-k))+31>>5<<5,h=~~Math.max(Math.abs(b+S),Math.abs(b-S))}else c=c+31>>5<<5;if(h>l&&(l=h),a+c>=R0<<5&&(a=0,s+=l,l=0),s+h>=M_)break;r.translate((a+(c>>1))/o,(s+(h>>1))/o),t.rotate&&r.rotate(t.rotate*Yk),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=h,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var R=r.getImageData(0,0,(R0<<5)/o,M_/o).data,F=[];--i>=0;)if(t=n[i],!!t.hasText){for(c=t.width,d=c>>5,h=t.y1-t.y0,m=0;m<h*d;m++)F[m]=0;if(a=t.xoff,a==null)return;s=t.yoff;var T=0,P=-1;for(g=0;g<h;g++){for(m=0;m<c;m++){var B=d*g+(m>>5),O=R[(s+g)*(R0<<5)+(a+m)<<2]?1<<31-m%32:0;F[B]|=O,T|=O}T?P=g:(t.y0++,h--,g--,s++)}t.y1=t.y0+P,t.sprite=F.slice(0,(t.y1-t.y0)*d)}}}function nCe(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,o=e.x-(r<<4),a=o&127,s=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,d=0;d<l;d++){c=0;for(var h=0;h<=r;h++)if((c<<s|(h<r?(c=i[d*r+h])>>>a:0))&t[u+h])return!0;u+=n}return!1}function iCe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function rCe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function OK(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function oCe(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function aCe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function of(e){return typeof e=="function"?e:function(){return e}}var sCe={archimedean:OK,rectangular:oCe};const IK=["x","y","font","fontSize","fontStyle","fontWeight","angle"],lCe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function WO(e){ie.call(this,eCe(),e)}WO.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:IK}]};_e(WO,ie,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&le("Wordcloud size dimensions must be non-zero.");function n(g){const y=e[g];return _t(y)&&t.modified(y.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||lCe.some(n)))return;const r=t.materialize(t.SOURCE).source,o=this.value,a=e.as||IK;let s=e.fontSize||14,l;if(_t(s)?l=e.fontSizeRange:s=Qi(s),l){const g=s,y=Ut("sqrt")().domain(Es(r,g)).range(l);s=v=>y(g(v))}r.forEach(g=>{g[a[0]]=NaN,g[a[1]]=NaN,g[a[3]]=0});const u=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Xo).layout(),c=o.size(),d=c[0]>>1,h=c[1]>>1,m=u.length;for(let g=0,y,v;g<m;++g)y=u[g],v=y.datum,v[a[0]]=y.x+d,v[a[1]]=y.y+h,v[a[2]]=y.font,v[a[3]]=y.size,v[a[4]]=y.style,v[a[5]]=y.weight,v[a[6]]=y.rotate;return t.reflow(i).modifies(a)}});const uCe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:WO},Symbol.toStringTag,{value:"Module"})),cCe=e=>new Uint8Array(e),fCe=e=>new Uint16Array(e),Q0=e=>new Uint32Array(e);function dCe(){let e=8,t=[],n=Q0(0),i=Ix(0,e),r=Ix(0,e);return{data:()=>t,seen:()=>n=hCe(n,t.length),add(o){for(let a=0,s=t.length,l=o.length,u;a<l;++a)u=o[a],u._index=s++,t.push(u)},remove(o,a){const s=t.length,l=Array(s-o),u=t;let c,d,h;for(d=0;!a[d]&&d<s;++d)l[d]=t[d],u[d]=d;for(h=d;d<s;++d)c=t[d],a[d]?u[d]=-1:(u[d]=h,i[h]=i[d],r[h]=r[d],l[h]=c,c._index=h++),i[d]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){i[o]|=a},clear(o,a){i[o]&=~a},resize(o,a){const s=i.length;(o>s||a>e)&&(e=Math.max(a,e),i=Ix(o,e,i),r=Ix(o,e))}}}function hCe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Ix(e,t,n){const i=(t<257?cCe:t<65537?fCe:Q0)(e);return n&&i.set(n),i}function Rj(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const a=this,s=a.bisect(a.range,r.value),l=r.index,u=s[0],c=s[1],d=l.length;let h;for(h=0;h<u;++h)o[l[h]]|=i;for(h=c;h<d;++h)o[l[h]]|=i;return a}}}function Tj(){let e=Q0(0),t=[],n=0;function i(s,l,u){if(!l.length)return[];const c=n,d=l.length,h=Q0(d);let m=Array(d),g,y,v;for(v=0;v<d;++v)m[v]=s(l[v]),h[v]=v;if(m=pCe(m,h),c)g=t,y=e,t=Array(c+d),e=Q0(c+d),mCe(u,g,y,c,m,h,d,t,e);else{if(u>0)for(v=0;v<d;++v)h[v]+=u;t=m,e=h}return n=c+d,{index:h,value:m}}function r(s,l){const u=n;let c,d,h;for(d=0;!l[e[d]]&&d<u;++d);for(h=d;d<u;++d)l[c=e[d]]||(e[h]=c,t[h]=t[d],++h);n=u-s}function o(s){for(let l=0,u=n;l<u;++l)e[l]=s[e[l]]}function a(s,l){let u;return l?u=l.length:(l=t,u=n),[Ade(l,s[0],0,u),sc(l,s[1],0,u)]}return{insert:i,remove:r,bisect:a,reindex:o,index:()=>e,size:()=>n}}function pCe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),Nde(e,t)}function mCe(e,t,n,i,r,o,a,s,l){let u=0,c=0,d;for(d=0;u<i&&c<a;++d)t[u]<r[c]?(s[d]=t[u],l[d]=n[u++]):(s[d]=r[c],l[d]=o[c++]+e);for(;u<i;++u,++d)s[d]=t[u],l[d]=n[u];for(;c<a;++c,++d)s[d]=r[c],l[d]=o[c]+e}function GO(e){ie.call(this,dCe(),e),this._indices=null,this._dims=null}GO.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};_e(GO,ie,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],a=i.length;let s=0,l,u;for(;s<a;++s)l=n[s].fname,u=r[l]||(r[l]=Tj()),o.push(Rj(u,s,i[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,a=this._dims,s=this.value,l=s.curr(),u=s.prev(),c=s.all(),d=n.rem=n.add,h=n.mod,m=r.length,g={};let y,v,_,b,S,k,R,F,T;if(u.set(l),t.rem.length&&(S=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(k={},b=t.mod,R=0,F=b.length;R<F;++R)k[b[R]._index]=1;for(R=0;R<m;++R)T=i[R],(!a[R]||e.modified("fields",R)||t.modified(T.fields))&&(_=T.fname,(y=g[_])||(o[_]=v=Tj(),g[_]=y=v.insert(T,t.source,0)),a[R]=Rj(v,R,r[R]).onAdd(y,l));for(R=0,F=s.data().length;R<F;++R)S[R]||(u[R]!==l[R]?d.push(R):k[R]&&l[R]!==c&&h.push(R));return s.mask=(1<<m)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,a=this._indices,s=e.fields,l={},u=n.add,c=r.size()+i.length,d=o.length;let h=r.size(),m,g,y;r.resize(c,d),r.add(i);const v=r.curr(),_=r.prev(),b=r.all();for(m=0;m<d;++m)g=s[m].fname,y=l[g]||(l[g]=a[g].insert(s[m],i,h)),o[m].onAdd(y,v);for(;h<c;++h)_[h]=b,v[h]!==b&&u.push(h)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),a=e.mod;let s,l,u;for(s=0,l=a.length;s<l;++s)u=a[s]._index,r[u]!==o&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),a=r.prev(),s=r.all(),l={},u=n.rem,c=t.rem;let d,h,m,g;for(d=0,h=c.length;d<h;++d)m=c[d]._index,l[m]=1,a[m]=g=o[m],o[m]=s,g!==s&&u.push(m);for(m in i)i[m].remove(h,l);return this.reindex(t,h,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const a in i)i[a].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,a=i.length;let s=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++s);if(s===1)s=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,s=0;u<a;++u)e.modified("query",u)&&(s|=i[u].one,this.incrementAll(i[u],r[u],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),a=r.curr(),s=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],h=c[1],m=u[0],g=u[1],y=e.one;let v,_,b;if(d<m)for(v=d,_=Math.min(m,h);v<_;++v)b=l[v],o[b]!==n&&(s[b]=a[b],o[b]=n,i.push(b)),a[b]^=y;else if(d>m)for(v=m,_=Math.min(d,g);v<_;++v)b=l[v],o[b]!==n&&(s[b]=a[b],o[b]=n,i.push(b)),a[b]^=y;if(h>g)for(v=Math.max(d,g),_=h;v<_;++v)b=l[v],o[b]!==n&&(s[b]=a[b],o[b]=n,i.push(b)),a[b]^=y;else if(h<g)for(v=Math.max(m,h),_=g;v<_;++v)b=l[v],o[b]!==n&&(s[b]=a[b],o[b]=n,i.push(b)),a[b]^=y;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,o=r.curr(),a=e.index(),s=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=s[0],h=s[1],m=e.one;let g,y,v;if(u<d)for(g=u,y=Math.min(d,c);g<y;++g)v=a[g],o[v]^=m,n.push(v);else if(u>d)for(g=d,y=Math.min(u,h);g<y;++g)v=a[g],o[v]^=m,i.push(v);if(c>h)for(g=Math.max(u,h),y=c;g<y;++g)v=a[g],o[v]^=m,n.push(v);else if(c<h)for(g=Math.max(d,c),y=h;g<y;++g)v=a[g],o[v]^=m,i.push(v);e.range=t.slice()}});function qO(e){ie.call(this,null,e)}qO.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};_e(qO,ie,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&n))return t.StopPropagation;const o=t.fork(t.ALL),a=i.data(),s=i.curr(),l=i.prev(),u=c=>s[c]&n?null:a[c];return o.filter(o.MOD,u),r&r-1?(o.filter(o.ADD,c=>{const d=s[c]&n;return!d&&d^l[c]&n?a[c]:null}),o.filter(o.REM,c=>{const d=s[c]&n;return d&&!(d^(d^l[c]&n))?a[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(s[c]&n)===r?a[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const gCe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:GO,resolvefilter:qO},Symbol.toStringTag,{value:"Module"})),yCe="RawCode",hd="Literal",vCe="Property",xCe="Identifier",_Ce="ArrayExpression",bCe="BinaryExpression",LK="CallExpression",wCe="ConditionalExpression",SCe="LogicalExpression",CCe="MemberExpression",ECe="ObjectExpression",kCe="UnaryExpression";function za(e){this.type=e}za.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=RCe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function RCe(e){switch(e.type){case _Ce:return e.elements;case bCe:case SCe:return[e.left,e.right];case LK:return[e.callee].concat(e.arguments);case wCe:return[e.test,e.consequent,e.alternate];case CCe:return[e.object,e.property];case ECe:return e.properties;case vCe:return[e.key,e.value];case kCe:return[e.argument];case xCe:case hd:case yCe:default:return[]}}var zs,qe,se,Zi,Qt,IS=1,Uv=2,pd=3,Ic=4,LS=5,jd=6,Nr=7,Wv=8,TCe=9;zs={};zs[IS]="Boolean";zs[Uv]="<end>";zs[pd]="Identifier";zs[Ic]="Keyword";zs[LS]="Null";zs[jd]="Numeric";zs[Nr]="Punctuator";zs[Wv]="String";zs[TCe]="RegularExpression";var ACe="ArrayExpression",FCe="BinaryExpression",MCe="CallExpression",NCe="ConditionalExpression",DK="Identifier",PCe="Literal",$Ce="LogicalExpression",OCe="MemberExpression",ICe="ObjectExpression",LCe="Property",DCe="UnaryExpression",hi="Unexpected token %0",zCe="Unexpected number",jCe="Unexpected string",BCe="Unexpected identifier",HCe="Unexpected reserved word",UCe="Unexpected end of input",mF="Invalid regular expression",Zk="Invalid regular expression: missing /",zK="Octal literals are not allowed in strict mode.",WCe="Duplicate data property in object literal not allowed in strict mode",ki="ILLEGAL",Zy="Disabled.",GCe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),qCe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function DS(e,t){if(!e)throw new Error("ASSERT: "+t)}function fl(e){return e>=48&&e<=57}function VO(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function ey(e){return"01234567".indexOf(e)>=0}function VCe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Xy(e){return e===10||e===13||e===8232||e===8233}function Gv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&GCe.test(String.fromCharCode(e))}function Aw(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&qCe.test(String.fromCharCode(e))}const YCe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function jK(){for(;se<Zi;){const e=qe.charCodeAt(se);if(VCe(e)||Xy(e))++se;else break}}function gF(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)se<Zi&&VO(qe[se])?(i=qe[se++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):Bt({},hi,ki);return String.fromCharCode(r)}function ZCe(){var e,t,n,i;for(e=qe[se],t=0,e==="}"&&Bt({},hi,ki);se<Zi&&(e=qe[se++],!!VO(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Bt({},hi,ki),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function BK(){var e,t;for(e=qe.charCodeAt(se++),t=String.fromCharCode(e),e===92&&(qe.charCodeAt(se)!==117&&Bt({},hi,ki),++se,e=gF("u"),(!e||e==="\\"||!Gv(e.charCodeAt(0)))&&Bt({},hi,ki),t=e);se<Zi&&(e=qe.charCodeAt(se),!!Aw(e));)++se,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),qe.charCodeAt(se)!==117&&Bt({},hi,ki),++se,e=gF("u"),(!e||e==="\\"||!Aw(e.charCodeAt(0)))&&Bt({},hi,ki),t+=e);return t}function XCe(){var e,t;for(e=se++;se<Zi;){if(t=qe.charCodeAt(se),t===92)return se=e,BK();if(Aw(t))++se;else break}return qe.slice(e,se)}function KCe(){var e,t,n;return e=se,t=qe.charCodeAt(se)===92?BK():XCe(),t.length===1?n=pd:YCe.hasOwnProperty(t)?n=Ic:t==="null"?n=LS:t==="true"||t==="false"?n=IS:n=pd,{type:n,value:t,start:e,end:se}}function Xk(){var e=se,t=qe.charCodeAt(se),n,i=qe[se],r,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++se,{type:Nr,value:String.fromCharCode(t),start:e,end:se};default:if(n=qe.charCodeAt(se+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return se+=2,{type:Nr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:se};case 33:case 61:return se+=2,qe.charCodeAt(se)===61&&++se,{type:Nr,value:qe.slice(e,se),start:e,end:se}}}if(a=qe.substr(se,4),a===">>>=")return se+=4,{type:Nr,value:a,start:e,end:se};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return se+=3,{type:Nr,value:o,start:e,end:se};if(r=o.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return se+=2,{type:Nr,value:r,start:e,end:se};if(r==="//"&&Bt({},hi,ki),"<>=!+-*%&|^/".indexOf(i)>=0)return++se,{type:Nr,value:i,start:e,end:se};Bt({},hi,ki)}function JCe(e){let t="";for(;se<Zi&&VO(qe[se]);)t+=qe[se++];return t.length===0&&Bt({},hi,ki),Gv(qe.charCodeAt(se))&&Bt({},hi,ki),{type:jd,value:parseInt("0x"+t,16),start:e,end:se}}function QCe(e){let t="0"+qe[se++];for(;se<Zi&&ey(qe[se]);)t+=qe[se++];return(Gv(qe.charCodeAt(se))||fl(qe.charCodeAt(se)))&&Bt({},hi,ki),{type:jd,value:parseInt(t,8),octal:!0,start:e,end:se}}function Aj(){var e,t,n;if(n=qe[se],DS(fl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=se,e="",n!=="."){if(e=qe[se++],n=qe[se],e==="0"){if(n==="x"||n==="X")return++se,JCe(t);if(ey(n))return QCe(t);n&&fl(n.charCodeAt(0))&&Bt({},hi,ki)}for(;fl(qe.charCodeAt(se));)e+=qe[se++];n=qe[se]}if(n==="."){for(e+=qe[se++];fl(qe.charCodeAt(se));)e+=qe[se++];n=qe[se]}if(n==="e"||n==="E")if(e+=qe[se++],n=qe[se],(n==="+"||n==="-")&&(e+=qe[se++]),fl(qe.charCodeAt(se)))for(;fl(qe.charCodeAt(se));)e+=qe[se++];else Bt({},hi,ki);return Gv(qe.charCodeAt(se))&&Bt({},hi,ki),{type:jd,value:parseFloat(e),start:t,end:se}}function eEe(){var e="",t,n,i,r,o=!1;for(t=qe[se],DS(t==="'"||t==='"',"String literal must starts with a quote"),n=se,++se;se<Zi;)if(i=qe[se++],i===t){t="";break}else if(i==="\\")if(i=qe[se++],!i||!Xy(i.charCodeAt(0)))switch(i){case"u":case"x":qe[se]==="{"?(++se,e+=ZCe()):e+=gF(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ey(i)?(r="01234567".indexOf(i),r!==0&&(o=!0),se<Zi&&ey(qe[se])&&(o=!0,r=r*8+"01234567".indexOf(qe[se++]),"0123".indexOf(i)>=0&&se<Zi&&ey(qe[se])&&(r=r*8+"01234567".indexOf(qe[se++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&qe[se]===`
`&&++se;else{if(Xy(i.charCodeAt(0)))break;e+=i}return t!==""&&Bt({},hi,ki),{type:Wv,value:e,octal:o,start:n,end:se}}function tEe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Bt({},mF)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Bt({},mF)}try{return new RegExp(e,t)}catch{return null}}function nEe(){var e,t,n,i,r;for(e=qe[se],DS(e==="/","Regular expression literal must start with a slash"),t=qe[se++],n=!1,i=!1;se<Zi;)if(e=qe[se++],t+=e,e==="\\")e=qe[se++],Xy(e.charCodeAt(0))&&Bt({},Zk),t+=e;else if(Xy(e.charCodeAt(0)))Bt({},Zk);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Bt({},Zk),r=t.substr(1,t.length-2),{value:r,literal:t}}function iEe(){var e,t,n;for(t="",n="";se<Zi&&(e=qe[se],!!Aw(e.charCodeAt(0)));)++se,e==="\\"&&se<Zi?Bt({},hi,ki):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Bt({},mF,n),{value:n,literal:t}}function rEe(){var e,t,n,i;return Qt=null,jK(),e=se,t=nEe(),n=iEe(),i=tEe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:se}}function oEe(e){return e.type===pd||e.type===Ic||e.type===IS||e.type===LS}function HK(){if(jK(),se>=Zi)return{type:Uv,start:se,end:se};const e=qe.charCodeAt(se);return Gv(e)?KCe():e===40||e===41||e===59?Xk():e===39||e===34?eEe():e===46?fl(qe.charCodeAt(se+1))?Aj():Xk():fl(e)?Aj():Xk()}function Ir(){const e=Qt;return se=e.end,Qt=HK(),se=e.end,e}function UK(){const e=se;Qt=HK(),se=e}function aEe(e){const t=new za(ACe);return t.elements=e,t}function Fj(e,t,n){const i=new za(e==="||"||e==="&&"?$Ce:FCe);return i.operator=e,i.left=t,i.right=n,i}function sEe(e,t){const n=new za(MCe);return n.callee=e,n.arguments=t,n}function lEe(e,t,n){const i=new za(NCe);return i.test=e,i.consequent=t,i.alternate=n,i}function YO(e){const t=new za(DK);return t.name=e,t}function T0(e){const t=new za(PCe);return t.value=e.value,t.raw=qe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Mj(e,t,n){const i=new za(OCe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function uEe(e){const t=new za(ICe);return t.properties=e,t}function Nj(e,t,n){const i=new za(LCe);return i.key=t,i.value=n,i.kind=e,i}function cEe(e,t){const n=new za(DCe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Bt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,a)=>(DS(a<i.length,"Message reference must be in range"),i[a]));throw n=new Error(r),n.index=se,n.description=r,n}function zS(e){e.type===Uv&&Bt(e,UCe),e.type===jd&&Bt(e,zCe),e.type===Wv&&Bt(e,jCe),e.type===pd&&Bt(e,BCe),e.type===Ic&&Bt(e,HCe),Bt(e,hi,e.value)}function Xi(e){const t=Ir();(t.type!==Nr||t.value!==e)&&zS(t)}function mn(e){return Qt.type===Nr&&Qt.value===e}function Kk(e){return Qt.type===Ic&&Qt.value===e}function fEe(){const e=[];for(se=Qt.start,Xi("[");!mn("]");)mn(",")?(Ir(),e.push(null)):(e.push(md()),mn("]")||Xi(","));return Ir(),aEe(e)}function Pj(){se=Qt.start;const e=Ir();return e.type===Wv||e.type===jd?(e.octal&&Bt(e,zK),T0(e)):YO(e.value)}function dEe(){var e,t,n,i;if(se=Qt.start,e=Qt,e.type===pd)return n=Pj(),Xi(":"),i=md(),Nj("init",n,i);if(e.type===Uv||e.type===Nr)zS(e);else return t=Pj(),Xi(":"),i=md(),Nj("init",t,i)}function hEe(){var e=[],t,n,i,r={},o=String;for(se=Qt.start,Xi("{");!mn("}");)t=dEe(),t.key.type===DK?n=t.key.name:n=o(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?Bt({},WCe):r[i]=!0,e.push(t),mn("}")||Xi(",");return Xi("}"),uEe(e)}function pEe(){Xi("(");const e=ZO();return Xi(")"),e}const mEe={if:1};function gEe(){var e,t,n;if(mn("("))return pEe();if(mn("["))return fEe();if(mn("{"))return hEe();if(e=Qt.type,se=Qt.start,e===pd||mEe[Qt.value])n=YO(Ir().value);else if(e===Wv||e===jd)Qt.octal&&Bt(Qt,zK),n=T0(Ir());else{if(e===Ic)throw new Error(Zy);e===IS?(t=Ir(),t.value=t.value==="true",n=T0(t)):e===LS?(t=Ir(),t.value=null,n=T0(t)):mn("/")||mn("/=")?(n=T0(rEe()),UK()):zS(Ir())}return n}function yEe(){const e=[];if(Xi("("),!mn(")"))for(;se<Zi&&(e.push(md()),!mn(")"));)Xi(",");return Xi(")"),e}function vEe(){se=Qt.start;const e=Ir();return oEe(e)||zS(e),YO(e.value)}function xEe(){return Xi("."),vEe()}function _Ee(){Xi("[");const e=ZO();return Xi("]"),e}function bEe(){var e,t,n;for(e=gEe();;)if(mn("."))n=xEe(),e=Mj(".",e,n);else if(mn("("))t=yEe(),e=sEe(e,t);else if(mn("["))n=_Ee(),e=Mj("[",e,n);else break;return e}function $j(){const e=bEe();if(Qt.type===Nr&&(mn("++")||mn("--")))throw new Error(Zy);return e}function N_(){var e,t;if(Qt.type!==Nr&&Qt.type!==Ic)t=$j();else{if(mn("++")||mn("--"))throw new Error(Zy);if(mn("+")||mn("-")||mn("~")||mn("!"))e=Ir(),t=N_(),t=cEe(e.value,t);else{if(Kk("delete")||Kk("void")||Kk("typeof"))throw new Error(Zy);t=$j()}}return t}function Oj(e){let t=0;if(e.type!==Nr&&e.type!==Ic)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function wEe(){var e,t,n,i,r,o,a,s,l,u;if(e=Qt,l=N_(),i=Qt,r=Oj(i),r===0)return l;for(i.prec=r,Ir(),t=[e,Qt],a=N_(),o=[l,i,a];(r=Oj(Qt))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=Fj(s,l,a),o.push(n);i=Ir(),i.prec=r,o.push(i),t.push(Qt),n=N_(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=Fj(o[u-1].value,o[u-2],n),u-=2;return n}function md(){var e,t,n;return e=wEe(),mn("?")&&(Ir(),t=md(),Xi(":"),n=md(),e=lEe(e,t,n)),e}function ZO(){const e=md();if(mn(","))throw new Error(Zy);return e}function XO(e){qe=e,se=0,Zi=qe.length,Qt=null,UK();const t=ZO();if(Qt.type!==Uv)throw new Error("Unexpect token after expression.");return t}var WK={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function GK(e){function t(a,s,l,u){let c=e(s[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,l){return u=>t(a,u,s,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&le("Missing arguments to clamp function."),a.length>3&&le("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&le("Missing arguments to if function."),a.length>3&&le("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function SEe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function qK(e){e=e||{};const t=e.allowed?$a(e.allowed):{},n=e.forbidden?$a(e.forbidden):{},i=e.constants||WK,r=(e.functions||GK)(d),o=e.globalvar,a=e.fieldvar,s=_t(o)?o:g=>`${o}["${g}"]`;let l={},u={},c=0;function d(g){if(Ie(g))return g;const y=h[g.type];return y==null&&le("Unsupported type: "+g.type),y(g)}const h={Literal:g=>g.raw,Identifier:g=>{const y=g.name;return c>0?y:et(n,y)?le("Illegal identifier: "+y):et(i,y)?i[y]:et(t,y)?y:(l[y]=1,s(y))},MemberExpression:g=>{const y=!g.computed,v=d(g.object);y&&(c+=1);const _=d(g.property);return v===a&&(u[SEe(_)]=1),y&&(c-=1),v+(y?"."+_:"["+_+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&le("Illegal callee type: "+g.callee.type);const y=g.callee.name,v=g.arguments,_=et(r,y)&&r[y];return _||le("Unrecognized function: "+y),_t(_)?_(v):_+"("+v.map(d).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(d).join(",")+"]",BinaryExpression:g=>"("+d(g.left)+" "+g.operator+" "+d(g.right)+")",UnaryExpression:g=>"("+g.operator+d(g.argument)+")",ConditionalExpression:g=>"("+d(g.test)+"?"+d(g.consequent)+":"+d(g.alternate)+")",LogicalExpression:g=>"("+d(g.left)+g.operator+d(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(d).join(",")+"}",Property:g=>{c+=1;const y=d(g.key);return c-=1,y+":"+d(g.value)}};function m(g){const y={code:d(g),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},y}return m.functions=r,m.constants=i,m}const Ij=Symbol("vega_selection_getter");function VK(e){return(!e.getter||!e.getter[Ij])&&(e.getter=Vo(e.field),e.getter[Ij]=!0),e.getter}const KO="intersect",Lj="union",CEe="vlMulti",EEe="vlPoint",Dj="or",kEe="and",ls="_vgsid_",Ky=Vo(ls),REe="E",TEe="R",AEe="R-E",FEe="R-LE",MEe="R-RE",Fw="index:unit";function zj(e,t){for(var n=t.fields,i=t.values,r=n.length,o=0,a,s;o<r;++o)if(s=n[o],a=VK(s)(e),Ku(a)&&(a=Wi(a)),Ku(i[o])&&(i[o]=Wi(i[o])),fe(i[o])&&Ku(i[o][0])&&(i[o]=i[o].map(Wi)),s.type===REe){if(fe(i[o])?i[o].indexOf(a)<0:a!==i[o])return!1}else if(s.type===TEe){if(!Qh(a,i[o]))return!1}else if(s.type===MEe){if(!Qh(a,i[o],!0,!1))return!1}else if(s.type===AEe){if(!Qh(a,i[o],!1,!1))return!1}else if(s.type===FEe&&!Qh(a,i[o],!1,!0))return!1;return!0}function NEe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],o=i?i[Fw]&&i[Fw].value:void 0,a=n===KO,s=r.length,l=0,u,c,d,h,m;l<s;++l)if(u=r[l],o&&a){if(c=c||{},d=c[h=u.unit]||0,d===-1)continue;if(m=zj(t,u),c[h]=m?-1:++d,m&&o.size===1)return!0;if(!m&&d===o.get(h).count)return!1}else if(m=zj(t,u),a^m)return m;return s&&a}const YK=km(Ky),PEe=YK.left,$Ee=YK.right;function OEe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[Fw]&&i[Fw].value:void 0,a=n===KO,s=Ky(t),l=PEe(r,s);if(l===r.length||Ky(r[l])!==s)return!1;if(o&&a){if(o.size===1)return!0;if($Ee(r,s)-l<o.size)return!1}return!0}function IEe(e,t){return e.map(n=>xt(t.fields?{values:t.fields.map(i=>VK(i)(n.datum))}:{[ls]:Ky(n.datum)},t))}function LEe(e,t,n,i){for(var r=this.context.data[e],o=r?r.values.value:[],a={},s={},l={},u,c,d,h,m,g,y,v,_,b,S=o.length,k=0,R,F;k<S;++k)if(u=o[k],h=u.unit,c=u.fields,d=u.values,c&&d){for(R=0,F=c.length;R<F;++R)m=c[R],y=a[m.field]||(a[m.field]={}),v=y[h]||(y[h]=[]),l[m.field]=_=m.type.charAt(0),b=Jk[`${_}_union`],y[h]=b(v,Oe(d[R]));n&&(v=s[h]||(s[h]=[]),v.push(Oe(d).reduce((T,P,B)=>(T[c[B].field]=P,T),{})))}else m=ls,g=Ky(u),y=a[m]||(a[m]={}),v=y[h]||(y[h]=[]),v.push(g),n&&(v=s[h]||(s[h]=[]),v.push({[ls]:g}));if(t=t||Lj,a[ls]?a[ls]=Jk[`${ls}_${t}`](...Object.values(a[ls])):Object.keys(a).forEach(T=>{a[T]=Object.keys(a[T]).map(P=>a[T][P]).reduce((P,B)=>P===void 0?B:Jk[`${l[T]}_${t}`](P,B))}),o=Object.keys(s),n&&o.length){const T=i?EEe:CEe;a[T]=t===Lj?{[Dj]:o.reduce((P,B)=>(P.push(...s[B]),P),[])}:{[kEe]:o.map(P=>({[Dj]:s[P]}))}}return a}var Jk={[`${ls}_union`]:Bde,[`${ls}_intersect`]:zde,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Wi(t[0]),i=Wi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Wi(t[0]),i=Wi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const DEe=":",zEe="@";function JO(e,t,n,i){t[0].type!==hd&&le("First argument to selection functions must be a string literal.");const r=t[0].value,o=t.length>=2&&Ot(t).value,a="unit",s=zEe+a,l=DEe+r;o===KO&&!et(i,s)&&(i[s]=n.getData(r).indataRef(n,a)),et(i,l)||(i[l]=n.getData(r).tuplesRef())}function ZK(e){const t=this.context.data[e];return t?t.values.value:[]}function jEe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function BEe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Yo).insert(t)),1}function HEe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const qv=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},UEe=qv("format"),XK=qv("timeFormat"),WEe=qv("utcFormat"),GEe=qv("timeParse"),qEe=qv("utcParse"),Lx=new Date(2e3,0,1);function jS(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Lx.setYear(2e3),Lx.setMonth(e),Lx.setDate(t),XK.call(this,Lx,n))}function VEe(e){return jS.call(this,e,1,"%B")}function YEe(e){return jS.call(this,e,1,"%b")}function ZEe(e){return jS.call(this,0,2+e,"%A")}function XEe(e){return jS.call(this,0,2+e,"%a")}const KEe=":",JEe="@",yF="%",KK="$";function QO(e,t,n,i){t[0].type!==hd&&le("First argument to data functions must be a string literal.");const r=t[0].value,o=KEe+r;if(!et(o,i))try{i[o]=n.getData(r).tuplesRef()}catch{}}function QEe(e,t,n,i){t[0].type!==hd&&le("First argument to indata must be a string literal."),t[1].type!==hd&&le("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,a=JEe+o;et(a,i)||(i[a]=n.getData(r).indataRef(n,o))}function pr(e,t,n,i){if(t[0].type===hd)jj(n,i,t[0].value);else for(e in n.scales)jj(n,i,e)}function jj(e,t,n){const i=yF+n;if(!et(t,i))try{t[i]=e.scaleRef(n)}catch{}}function js(e,t){if(_t(e))return e;if(Ie(e)){const n=t.scales[e];return n&&cye(n.value)?n.value:void 0}}function eke(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=pr,n._range=pr,n._scale=pr;const i=r=>"_["+(r.type===hd?be(yF+r.value):be(yF)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function eI(e,t){return function(n,i,r){if(n){const o=js(n,(r||this).context);return o&&o.path[e](i)}else return t(i)}}const tke=eI("area",E_e),nke=eI("bounds",A_e),ike=eI("centroid",O_e);function rke(e,t){const n=js(e,(t||this).context);return n&&n.scale()}function oke(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function tI(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function ake(){return tI(this.context.dataflow,"warn",arguments)}function ske(){return tI(this.context.dataflow,"info",arguments)}function lke(){return tI(this.context.dataflow,"debug",arguments)}function Qk(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vF(e){const t=fc(e),n=Qk(t.r),i=Qk(t.g),r=Qk(t.b);return .2126*n+.7152*i+.0722*r}function uke(e,t){const n=vF(e),i=vF(t),r=Math.max(n,i),o=Math.min(n,i);return(r+.05)/(o+.05)}function cke(){const e=[].slice.call(arguments);return e.unshift({}),xt(...e)}function JK(e,t){return e===t||e!==e&&t!==t?!0:fe(e)?fe(t)&&e.length===t.length?fke(e,t):!1:Le(e)&&Le(t)?QK(e,t):!1}function fke(e,t){for(let n=0,i=e.length;n<i;++n)if(!JK(e[n],t[n]))return!1;return!0}function QK(e,t){for(const n in e)if(!JK(e[n],t[n]))return!1;return!0}function Bj(e){return t=>QK(e,t)}function dke(e,t,n,i,r,o){const a=this.context.dataflow,s=this.context.data[e],l=s.input,u=a.stamp();let c=s.changes,d,h;if(a._trigger===!1||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(s.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{s.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(d=n===!0?Yo:fe(n)||Y2(n)?n:Bj(n),c.remove(d)),t&&c.insert(t),i&&(d=Bj(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(h in o)c.modify(r,h,o[h]);return 1}function hke(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function pke(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hj={};function mke(e,t){const n=Hj[t]||(Hj[t]=Vo(t));return fe(e)?e.map(n):n(e)}function nI(e){return fe(e)||ArrayBuffer.isView(e)?e:null}function iI(e){return nI(e)||(Ie(e)?e:null)}function gke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return nI(e).join(...n)}function yke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return iI(e).indexOf(...n)}function vke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return iI(e).lastIndexOf(...n)}function xke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return iI(e).slice(...n)}function _ke(e,t,n){return _t(n)&&le("Function argument passed to replace."),String(e).replace(t,n)}function bke(e){return nI(e).slice().reverse()}function wke(e,t,n){return d$(e||0,t||0,n||0)}function Ske(e,t){const n=js(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Cke(e,t){const n=js(e,(t||this).context);return n?n.copy():void 0}function Eke(e,t){const n=js(e,(t||this).context);return n?n.domain():[]}function kke(e,t,n){const i=js(e,(n||this).context);return i?fe(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Rke(e,t){const n=js(e,(t||this).context);return n&&n.range?n.range():[]}function Tke(e,t,n){const i=js(e,(n||this).context);return i?i(t):void 0}function Ake(e,t,n,i,r){e=js(e,(r||this).context);const o=VY(t,n);let a=e.domain(),s=a[0],l=Ot(a),u=Ji;return l-s?u=OY(e,s,l):e=(e.interpolator?Ut("sequential")().interpolator(e.interpolator()):Ut("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(a=e.ticks(+i||15),s!==a[0]&&a.unshift(s),l!==Ot(a)&&a.push(l)),a.forEach(c=>o.stop(u(c),e(c))),o}function Fke(e,t,n){const i=js(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Mke(e){let t=null;return function(n){return n?zy(n,t=t||Gp(e)):e}}const eJ=e=>e.data;function tJ(e,t){const n=ZK.call(t,e);return n.root&&n.root.lookup||{}}function Nke(e,t,n){const i=tJ(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(eJ):void 0}function Pke(e,t){const n=tJ(e,this)[t];return n?n.ancestors().map(eJ):void 0}const nJ=()=>typeof window<"u"&&window||null;function $ke(){const e=nJ();return e?e.screen:{}}function Oke(){const e=nJ();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Ike(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function iJ(e,t,n){if(!e)return[];const[i,r]=e,o=new qn().set(i[0],i[1],r[0],r[1]),a=n||this.context.dataflow.scenegraph().root;return jZ(a,o,Lke(t))}function Lke(e){let t=null;if(e){const n=Oe(e.marktype),i=Oe(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}function Dke(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Oe(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function zke(e){return Oe(e).reduce((t,n,i)=>{let[r,o]=n;return t+=i==0?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `},"")}function jke(e,t,n){const{x:i,y:r,mark:o}=n,a=new qn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(i,r),iJ([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(l=>Bke(l.x,l.y,t))}function Bke(e,t,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[a,s]=n[o],[l,u]=n[r];u>t!=s>t&&e<(a-l)*(t-u)/(s-u)+l&&i++}return i&1}const Jy={random(){return Xo()},cumulativeNormal:Q2,cumulativeLogNormal:dP,cumulativeUniform:gP,densityNormal:sP,densityLogNormal:fP,densityUniform:mP,quantileNormal:eS,quantileLogNormal:hP,quantileUniform:yP,sampleNormal:J2,sampleLogNormal:cP,sampleUniform:pP,isArray:fe,isBoolean:Mc,isDate:Ku,isDefined(e){return e!==void 0},isNumber:jt,isObject:Le,isRegExp:pG,isString:Ie,isTuple:Y2,isValid(e){return e!=null&&e===e},toBoolean:jN,toDate(e){return BN(e)},toNumber:Wi,toString:HN,indexof:yke,join:gke,lastindexof:vke,replace:_ke,reverse:bke,slice:xke,flush:dG,lerp:mG,merge:cke,pad:vG,peek:Ot,pluck:mke,span:bv,inrange:Qh,truncate:xG,rgb:fc,lab:Lb,hcl:Db,hsl:Ob,luminance:vF,contrast:uke,sequence:co,format:UEe,utcFormat:WEe,utcParse:qEe,utcOffset:JG,utcSequence:tq,timeFormat:XK,timeParse:GEe,timeOffset:KG,timeSequence:eq,timeUnitSpecifier:jG,monthFormat:VEe,monthAbbrevFormat:YEe,dayFormat:ZEe,dayAbbrevFormat:XEe,quarter:lG,utcquarter:uG,week:HG,utcweek:GG,dayofyear:BG,utcdayofyear:WG,warn:ake,info:ske,debug:lke,extent(e){return Es(e)},inScope:oke,intersect:iJ,clampRange:cG,pinchDistance:hke,pinchAngle:pke,screen:$ke,containerSize:Ike,windowSize:Oke,bandspace:wke,setdata:BEe,pathShape:Mke,panLinear:rG,panLog:oG,panPow:aG,panSymlog:sG,zoomLinear:$N,zoomLog:ON,zoomPow:wb,zoomSymlog:IN,encode:HEe,modify:dke,lassoAppend:Dke,lassoPath:zke,intersectLasso:jke},Hke=["view","item","group","xy","x","y"],Uke="event.vega.",rJ="this.",rI={},oJ={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${be(KK+e)}]`,functions:Wke,constants:WK,visitors:rI},xF=qK(oJ);function Wke(e){const t=GK(e);Hke.forEach(n=>t[n]=Uke+n);for(const n in Jy)t[n]=rJ+n;return xt(t,eke(e,Jy,rI)),t}function Bn(e,t,n){return arguments.length===1?Jy[e]:(Jy[e]=t,n&&(rI[e]=n),xF&&(xF.functions[e]=rJ+e),this)}Bn("bandwidth",Ske,pr);Bn("copy",Cke,pr);Bn("domain",Eke,pr);Bn("range",Rke,pr);Bn("invert",kke,pr);Bn("scale",Tke,pr);Bn("gradient",Ake,pr);Bn("geoArea",tke,pr);Bn("geoBounds",nke,pr);Bn("geoCentroid",ike,pr);Bn("geoShape",Fke,pr);Bn("geoScale",rke,pr);Bn("indata",jEe,QEe);Bn("data",ZK,QO);Bn("treePath",Nke,QO);Bn("treeAncestors",Pke,QO);Bn("vlSelectionTest",NEe,JO);Bn("vlSelectionIdTest",OEe,JO);Bn("vlSelectionResolve",LEe,JO);Bn("vlSelectionTuples",IEe);function Fs(e,t){const n={};let i;try{e=Ie(e)?e:be(e)+"",i=XO(e)}catch{le("Expression parse error: "+e)}i.visit(o=>{if(o.type!==LK)return;const a=o.callee.name,s=oJ.visitors[a];s&&s(a,o.arguments,t,n)});const r=xF(i);return r.globals.forEach(o=>{const a=KK+o;!et(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:xt({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function Gke(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const qke=$a(["rule"]),Uj=$a(["group","image","rect"]);function Vke(e,t){let n="";return qke[t]||(e.x2&&(e.x?(Uj[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Uj[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function oI(e){return(e+"").toLowerCase()}function Yke(e){return oI(e)==="operator"}function Zke(e){return oI(e)==="collect"}function Ug(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Xke(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Kke={operator:(e,t)=>Ug(e,["_"],t.code),parameter:(e,t)=>Ug(e,["datum","_"],t.code),event:(e,t)=>Ug(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Ug(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const a="o["+be(o)+"]";r+=`$=${i[o].code};if(${a}!==$)${a}=$,m=1;`}return r+=Vke(i,n),r+="return m;",Ug(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(be).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(o,a)=>{const s=t[a];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+a]=o,l=`this.f${a}(a)`,u=`this.f${a}(b)`),Xke(l,u,-s,s)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Jke(e){const t=this;Yke(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Qke(e){const t=this;if(e.params){const n=t.get(e.id);n||le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function eRe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=fe(r)?r.map(o=>Wj(o,n,t)):Wj(r,n,t)}return t}function Wj(e,t,n){if(!e||!Le(e))return e;for(let i=0,r=Gj.length,o;i<r;++i)if(o=Gj[i],et(e,o.key))return o.parse(e,t,n);return e}var Gj=[{key:"$ref",parse:tRe},{key:"$key",parse:iRe},{key:"$expr",parse:nRe},{key:"$field",parse:rRe},{key:"$encode",parse:aRe},{key:"$compare",parse:oRe},{key:"$context",parse:sRe},{key:"$subflow",parse:lRe},{key:"$tupleid",parse:uRe}];function tRe(e,t){return t.get(e.$ref)||le("Operator not defined: "+e.$ref)}function nRe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Jr(t.parameterExpression(e.$expr),e.$fields))}function iRe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=zN(e.$key,e.$flat,t.expr.codegen))}function rRe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Vo(e.$field,e.$name,t.expr.codegen))}function oRe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Oe(e.$compare).map(r=>r&&r.$tupleid?Je:r);return t.fn[n]||(t.fn[n]=LN(i,e.$order,t.expr.codegen))}function aRe(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=Jr(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}function sRe(e,t){return t}function lRe(e,t){const n=e.$subflow;return function(i,r,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(o),s.detachSubflow=()=>t.detach(a),s}}function uRe(){return Je}function cRe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(o=>t.get(o)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function fRe(e){var t=this,n=Le(n=e.source)?n.$ref:n,i=t.get(n),r=null,o=e.update,a=void 0;i||le("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,a)}const dRe={skip:!0};function hRe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(i[o]=a.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(r[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function pRe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],dRe)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Yo).insert(i[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function aJ(e,t,n,i){return new sJ(e,t,n,i)}function sJ(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Kke,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function qj(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}sJ.prototype=qj.prototype={fork(){const e=new qj(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Zke(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[oI(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Gke,parseOperator:Jke,parseOperatorParameters:Qke,parseParameters:eRe,parseStream:cRe,parseUpdate:fRe,getState:hRe,setState:pRe};function mRe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),lJ(t,e.description()))}function lJ(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function gRe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const eR="default";function yRe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:eR,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,o=r?Ie(r)?r:r.user:eR,a=i.item&&i.item.cursor||null;return r&&o===r.user&&a==r.item?r:{user:o,item:a}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Ie(i)||(r=i.item,i=i.user),_F(e,i&&i!==eR?i:r||i),r},{cursor:t})}function _F(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Mw(e,t){var n=e._runtime.data;return et(n,t)||le("Unrecognized data set: "+t),n[t]}function vRe(e,t){return arguments.length<2?Mw(this,e).values.value:BS.call(this,e,Ld().remove(Yo).insert(t))}function BS(e,t){Tq(t)||le("Second argument to changes must be a changeset.");const n=Mw(this,e);return n.modified=!0,this.pulse(n.input,t)}function xRe(e,t){return BS.call(this,e,Ld().insert(t))}function _Re(e,t){return BS.call(this,e,Ld().remove(t))}function uJ(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function cJ(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function HS(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function bRe(e){var t=HS(e),n=uJ(e),i=cJ(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}function wRe(e,t,n){var i=e._renderer,r=i&&i.canvas(),o,a,s;return r&&(s=HS(e),a=t.changedTouches?t.changedTouches[0]:t,o=RS(a,r),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=SRe(e,n,o),t}function SRe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(a){var s=i,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Ie(a)&&(a=r(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:Qi(e),item:Qi(t||{}),group:r,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const Vj="view",CRe="timer",ERe="window",kRe={trap:!1};function RRe(e){const t=xt({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{fe(i[o])&&(i[o]=$a(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function fJ(e,t,n,i){e._eventListeners.push({type:n,sources:Oe(t),handler:i})}function TRe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function Dx(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Le(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function ARe(e,t,n){var i=this,r=new K2(n),o=function(u,c){i.runAsync(null,()=>{e===Vj&&TRe(i,t)&&u.preventDefault(),r.receive(wRe(i,u,c))})},a;if(e===CRe)Dx(i,"timer",t)&&i.timer(o,t);else if(e===Vj)Dx(i,"view",t)&&i.addEventListener(t,o,kRe);else if(e===ERe?Dx(i,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&Dx(i,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)i.warn("Can not resolve event source: "+e);else{for(var s=0,l=a.length;s<l;++s)a[s].addEventListener(t,o);fJ(i,a,t,o)}return r}function Yj(e){return e.item}function Zj(e){return e.item.mark.source}function Xj(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function FRe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Yj),Zj,Xj(e)),this.on(this.events("view","pointerout",Yj),Zj,Xj(t)),this}function MRe(){var e=this._tooltip,t=this._timers,n=this._eventListeners,i,r,o;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(o=n[i],r=o.sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function mo(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const NRe="vega-bind",PRe="vega-bind-name",$Re="vega-bind-radio";function ORe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,a)})}},i.debounce&&(r.update=DN(i.debounce,r.update))),(i.input==null&&i.element?IRe:DRe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function IRe(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),fJ(i,t,r,o),e.set=a=>{t.value=a,t.dispatchEvent(LRe(r))}}function LRe(e){return typeof Event<"u"?new Event(e):{type:e}}function DRe(e,t,n,i){const r=i.signal(n.signal),o=mo("div",{class:NRe}),a=n.input==="radio"?o:o.appendChild(mo("label"));a.appendChild(mo("span",{class:PRe},n.name||n.signal)),t.appendChild(o);let s=zRe;switch(n.input){case"checkbox":s=jRe;break;case"select":s=BRe;break;case"radio":s=HRe;break;case"range":s=URe;break}s(e,a,n,r)}function zRe(e,t,n,i){const r=mo("input");for(const o in n)o!=="signal"&&o!=="element"&&r.setAttribute(o==="input"?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function jRe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=mo("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function BRe(e,t,n,i){const r=mo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const l={value:a};Nw(a,i)&&(l.selected=!0),r.appendChild(mo("option",l,(o[s]||a)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=a=>{for(let s=0,l=n.options.length;s<l;++s)if(Nw(n.options[s],a)){r.selectedIndex=s;return}}}function HRe(e,t,n,i){const r=mo("span",{class:$Re}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((a,s)=>{const l={type:"radio",name:n.signal,value:a};Nw(a,i)&&(l.checked=!0);const u=mo("input",l);u.addEventListener("change",()=>e.update(a));const c=mo("label",{},(o[s]||a)+"");return c.prepend(u),r.appendChild(c),u}),e.set=a=>{const s=e.elements,l=s.length;for(let u=0;u<l;++u)Nw(s[u].value,a)&&(s[u].checked=!0)}}function URe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,a=n.step||lc(o,r,100),s=mo("input",{type:"range",name:n.signal,min:o,max:r,step:a});s.value=i;const l=mo("span",{},+i);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=c=>{s.value=c,l.textContent=c}}function Nw(e,t){return e===t||e+""==t+""}function dJ(e,t,n,i,r,o){return t=t||new i(e.loader()),t.initialize(n,uJ(e),cJ(e),HS(e),r,o).background(e.background())}function aI(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function WRe(e,t,n,i){const r=new i(e.loader(),aI(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,HS(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}function GRe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=AS(i);e=n._el=e?tR(n,e,!0):null,mRe(n),o||n.error("Unrecognized renderer type: "+i);const a=o.handler||gc,s=e?o.renderer:o.headless;return n._renderer=s?dJ(n,n._renderer,e,s):null,n._handler=WRe(n,n._handler,e,a),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=tR(n,t,!0):e.appendChild(mo("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=tR(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{ORe(n,l.element||t,l)})),n}function tR(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Wg=e=>+e||0,qRe=e=>({top:e,bottom:e,left:e,right:e});function Kj(e){return Le(e)?{top:Wg(e.top),bottom:Wg(e.bottom),left:Wg(e.left),right:Wg(e.right)}:qRe(Wg(e))}async function sI(e,t,n,i){const r=AS(t),o=r&&r.headless;return o||le("Unrecognized renderer type: "+t),await e.runAsync(),dJ(e,null,null,o,n,i).renderAsync(e._scenegraph.root)}async function VRe(e,t){e!==Lu.Canvas&&e!==Lu.SVG&&e!==Lu.PNG&&le("Unrecognized image type: "+e);const n=await sI(this,e,t);return e===Lu.SVG?YRe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function YRe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function ZRe(e,t){return(await sI(this,Lu.Canvas,e,t)).canvas()}async function XRe(e){return(await sI(this,Lu.SVG,e)).svg()}function KRe(e,t,n){return aJ(e,zp,Jy,n).parse(t)}function JRe(e){var t=this._runtime.scales;return et(t,e)||le("Unrecognized scale or projection: "+e),t[e].value}var hJ="width",pJ="height",lI="padding",Jj={skip:!0};function mJ(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===lI?i.left+i.right:0)}function gJ(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===lI?i.top+i.bottom:0)}function QRe(e){var t=e._signals,n=t[hJ],i=t[pJ],r=t[lI];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=mJ(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=gJ(e,s.size),o()},{size:i});const a=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,a.rank=r.rank+1}function eTe(e,t,n,i,r,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(hJ,n,Jj),a._resizeWidth.skip(!0)),a.height()!==i&&(s=1,a.signal(pJ,i,Jj),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==r[0]||a._origin[1]!==r[1])&&(a._resize=1,a._origin=r),s&&a.run("enter"),o&&a.runAfter(l=>l.resize())},!1,1)}function tTe(e){return this._runtime.getState(e||{data:nTe,signals:iTe,recurse:!0})}function nTe(e,t){return t.modified&&fe(t.input.value)&&!e.startsWith("_:vega:_")}function iTe(e,t){return!(e==="parent"||t instanceof zp.proxy)}function rTe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function oTe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Iwe(n,t))}function aTe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",sTe(i))}function sTe(e){return e==null?"":fe(e)?yJ(e):Le(e)&&!Ku(e)?lTe(e):e+""}function lTe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(fe(n)?yJ(n):vJ(n))}).join(`
`)}function yJ(e){return"["+e.map(vJ).join(", ")+"]"}function vJ(e){return fe(e)?"[]":Le(e)&&!Ku(e)?"{}":e}function uTe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function xJ(e,t){const n=this;if(t=t||{},dp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=xt({},e.locale,t.locale);n.locale(vq(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Lu.Canvas,n._scenegraph=new H$;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||aTe,n._redraw=!0,n._handler=new gc().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=RRe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=KRe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:xt({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=mJ(n,n._width),n._viewHeight=gJ(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,QRe(n),gRe(n),yRe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function zx(e,t){return et(e._signals,t)?e._signals[t]:le("Unrecognized signal name: "+be(t))}function _J(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function Qj(e,t,n,i){let r=_J(n,i);return r||(r=aI(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function e6(e,t,n){const i=_J(t,n);return i&&t._targets.remove(i),e}_e(xJ,dp,{async evaluate(e,t,n){if(await dp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,bRe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&g_(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&lJ(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=zx(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Kj(e)):Kj(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(AS(e)||le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(dp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(zx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:eTe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=aI(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,o;--i>=0;)if(o=n[i].type,r=n[i].handler,e===o&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Qj(this,e,zx(this,e),t)},removeSignalListener(e,t){return e6(this,zx(this,e),t)},addDataListener(e,t){return Qj(this,e,Mw(this,e).values,t)},removeDataListener(e,t){return e6(this,Mw(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=_F(this,null);this._globalCursor=!!e,t&&_F(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:oTe,events:ARe,finalize:MRe,hover:FRe,data:vRe,change:BS,insert:xRe,remove:_Re,scale:JRe,initialize:GRe,toImageURL:VRe,toCanvas:ZRe,toSVG:XRe,getState:tTe,setState:rTe,_watchPixelRatio:uTe});const cTe="view",Pw="[",$w="]",bJ="{",wJ="}",fTe=":",SJ=",",dTe="@",hTe=">",pTe=/[[\]{}]/,mTe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let CJ,EJ;function Lc(e,t,n){return CJ=t||cTe,EJ=n||mTe,kJ(e.trim()).map(bF)}function gTe(e){return EJ[e]}function ty(e,t,n,i,r){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;r&&r.indexOf(s)>=0?--a:i&&i.indexOf(s)>=0&&++a}return t}function kJ(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=ty(e,r,SJ,Pw+bJ,$w+wJ),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function bF(e){return e[0]==="["?yTe(e):vTe(e)}function yTe(e){const t=e.length;let n=1,i;if(n=ty(e,n,$w,Pw,$w),n===t)throw"Empty between selector: "+e;if(i=kJ(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==hTe)throw"Expected '>' after between selector: "+e;i=i.map(bF);const r=bF(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function vTe(e){const t={source:CJ},n=[];let i=[0,0],r=0,o=0,a=e.length,s=0,l,u;if(e[a-1]===wJ){if(s=e.lastIndexOf(bJ),s>=0){try{i=xTe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===dTe&&(r=++s),l=ty(e,s,fTe),l<a&&(n.push(e.substring(o,l).trim()),o=s=++l),s=ty(e,s,Pw),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),u=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=ty(e,s,$w),s===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==Pw)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||pTe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],r?t.markname=n[0].slice(1):gTe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function xTe(e){const t=e.split(SJ);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function _Te(e){return Le(e)?e:{type:e||"pad"}}const Gg=e=>+e||0,bTe=e=>({top:e,bottom:e,left:e,right:e});function wTe(e){return Le(e)?e.signal?e:{top:Gg(e.top),bottom:Gg(e.bottom),left:Gg(e.left),right:Gg(e.right)}:bTe(Gg(e))}const pi=e=>Le(e)&&!fe(e)?xt({},e):{value:e};function t6(e,t,n,i){return n!=null?(Le(n)&&!fe(n)||fe(n)&&n.length&&Le(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Mi(e,t,n){for(const i in t)t6(e,i,t[i]);for(const i in n)t6(e,i,n[i],"update")}function Im(e,t,n){for(const i in t)n&&et(n,i)||(e[i]=xt(e[i]||{},t[i]));return e}function Ih(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const uI="mark",cI="frame",fI="scope",STe="axis",CTe="axis-domain",ETe="axis-grid",kTe="axis-label",RTe="axis-tick",TTe="axis-title",ATe="legend",FTe="legend-band",MTe="legend-entry",NTe="legend-gradient",RJ="legend-label",PTe="legend-symbol",$Te="legend-title",OTe="title",ITe="title-text",LTe="title-subtitle";function DTe(e,t,n,i,r){const o={},a={};let s,l,u,c;l="lineBreak",t==="text"&&r[l]!=null&&!Ih(l,e)&&nR(o,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===cI?r.group:n===uI?xt({},r.mark,r[t]):null;for(l in c)u=Ih(l,e)||(l==="fill"||l==="stroke")&&(Ih("fill",e)||Ih("stroke",e)),u||nR(o,l,c[l]);Oe(i).forEach(d=>{const h=r.style&&r.style[d];for(const m in h)Ih(m,e)||nR(o,m,h[m])}),e=xt({},e);for(l in o)c=o[l],c.signal?(s=s||{})[l]=c:a[l]=c;return e.enter=xt(a,e.enter),s&&(e.update=xt(s,e.update)),e}function nR(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const TJ=e=>Ie(e)?be(e):e.signal?`(${e.signal})`:AJ(e);function US(e){if(e.gradient!=null)return jTe(e);let t=e.signal?`(${e.signal})`:e.color?zTe(e.color):e.field!=null?AJ(e.field):e.value!==void 0?be(e.value):void 0;return e.scale!=null&&(t=BTe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${P_(e.exponent)})`),e.mult!=null&&(t+=`*${P_(e.mult)}`),e.offset!=null&&(t+=`+${P_(e.offset)}`),e.round&&(t=`round(${t})`),t}const jx=(e,t,n,i)=>`(${e}(${[t,n,i].map(US).join(",")})+'')`;function zTe(e){return e.c?jx("hcl",e.h,e.c,e.l):e.h||e.s?jx("hsl",e.h,e.s,e.l):e.l||e.a?jx("lab",e.l,e.a,e.b):e.r||e.g||e.b?jx("rgb",e.r,e.g,e.b):null}function jTe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:be(n));for(;t.length&&Ot(t)==null;)t.pop();return t.unshift(TJ(e.gradient)),`gradient(${t.join(",")})`}function P_(e){return Le(e)?"("+US(e)+")":e}function AJ(e){return FJ(Le(e)?e:{datum:e})}function FJ(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):le("Invalid field reference: "+be(e));return e.signal||(i=Ie(i)?Os(i).map(be).join("]["):FJ(i)),t+"["+i+"]"}function BTe(e,t){const n=TJ(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+P_(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function HTe(e){let t="";return e.forEach(n=>{const i=US(n);t+=n.test?`(${n.test})?${i}:`:i}),Ot(t)===":"&&(t+="null"),t}function MJ(e,t,n,i,r,o){const a={};o=o||{},o.encoders={$encode:a},e=DTe(e,t,n,i,r.config);for(const s in e)a[s]=UTe(e[s],t,o,r);return o}function UTe(e,t,n,i){const r={},o={};for(const a in e)e[a]!=null&&(r[a]=GTe(WTe(e[a]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function WTe(e){return fe(e)?HTe(e):US(e)}function GTe(e,t,n,i){const r=Fs(e,t);return r.$fields.forEach(o=>i[o]=1),xt(n,r.$params),r.$expr}const qTe="outer",VTe=["value","update","init","react","bind"];function n6(e,t){le(e+' for "outer" push: '+be(t))}function NJ(e,t){const n=e.name;if(e.push===qTe)t.signals[n]||n6("No prior signal definition",n),VTe.forEach(i=>{e[i]!==void 0&&n6("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function wF(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function WS(e,t,n,i){return new wF(e,t,n,i)}function Ow(e,t){return WS("operator",e,t)}function Ke(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Qy(e,t){return t?{$field:e,$name:t}:{$field:e}}const SF=Qy("key");function i6(e,t){return{$compare:e,$order:t}}function YTe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const ZTe="ascending",XTe="descending";function KTe(e){return Le(e)?(e.order===XTe?"-":"+")+GS(e.op,e.field):""}function GS(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const dI="scope",CF="view";function ti(e){return e&&e.signal}function JTe(e){return e&&e.expr}function $_(e){if(ti(e))return!0;if(Le(e)){for(const t in e)if($_(e[t]))return!0}return!1}function ga(e,t){return e??t}function qf(e){return e&&e.signal||e}const r6="timer";function ev(e,t){return(e.merge?eAe:e.stream?tAe:e.type?nAe:le("Invalid stream specification: "+be(e)))(e,t)}function QTe(e){return e===dI?CF:e||CF}function eAe(e,t){const n=e.merge.map(r=>ev(r,t)),i=hI({merge:n},e,t);return t.addStream(i).id}function tAe(e,t){const n=ev(e.stream,t),i=hI({stream:n},e,t);return t.addStream(i).id}function nAe(e,t){let n;e.type===r6?(n=t.event(r6,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(QTe(e.source),e.type);const i=hI({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function hI(e,t,n){let i=t.between;return i&&(i.length!==2&&le('Stream "between" parameter must have 2 entries: '+be(t)),e.between=[ev(i[0],n),ev(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(iAe(t.marktype,t.markname,t.markrole)),t.source===dI&&i.push("inScope(event.item)"),i.length&&(e.filter=Fs("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function iAe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const rAe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function oAe(e,t,n){const i=e.encode,r={target:n};let o=e.events,a=e.update,s=[];o||le("Signal update missing events specification."),Ie(o)&&(o=Lc(o,t.isSubscope()?dI:CF)),o=Oe(o).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[sAe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),i!=null&&(a&&le("Signal encode and update are mutually exclusive."),a="encode(item(),"+be(i)+")"),r.update=Ie(a)?Fs(a,t):a.expr!=null?Fs(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:rAe,$params:{$value:t.signalRef(a.signal)}}:le("Invalid signal update specification."),e.force&&(r.options={force:!0}),s.forEach(l=>t.addUpdate(xt(aAe(l,t),r)))}function aAe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ev(e,t)}}function sAe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function lAe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?le("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Fs(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>oAe(r,t,n.id))}const an=e=>(t,n,i)=>WS(e,n,t||void 0,i),PJ=an("aggregate"),uAe=an("axisticks"),$J=an("bound"),ja=an("collect"),o6=an("compare"),cAe=an("datajoin"),OJ=an("encode"),fAe=an("expression"),dAe=an("facet"),hAe=an("field"),pAe=an("key"),mAe=an("legendentries"),gAe=an("load"),yAe=an("mark"),vAe=an("multiextent"),xAe=an("multivalues"),_Ae=an("overlap"),bAe=an("params"),IJ=an("prefacet"),wAe=an("projection"),SAe=an("proxy"),CAe=an("relay"),LJ=an("render"),EAe=an("scale"),Bd=an("sieve"),kAe=an("sortitems"),DJ=an("viewlayout"),RAe=an("values");let TAe=0;const zJ={min:"min",max:"max",count:"sum"};function AAe(e,t){const n=e.type||"linear";AY(n)||le("Unrecognized scale type: "+be(n)),t.addScale(e.name,{type:n,domain:void 0})}function FAe(e,t){const n=t.getScale(e.name).params;let i;n.domain=jJ(e.domain,e,t),e.range!=null&&(n.range=HJ(e,t,n)),e.interpolate!=null&&jAe(e.interpolate,n),e.nice!=null&&(n.nice=zAe(e.nice)),e.bins!=null&&(n.bins=DAe(e.bins,t));for(i in e)et(n,i)||i==="name"||(n[i]=Do(e[i],t))}function Do(e,t){return Le(e)?e.signal?t.signalRef(e.signal):le("Unsupported object: "+be(e)):e}function O_(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Do(n,t))}function qS(e){le("Can not find data set: "+be(e))}function jJ(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(fe(e)?MAe:e.fields?PAe:NAe)(e,t,n)}function MAe(e,t,n){return e.map(i=>Do(i,n))}function NAe(e,t,n){const i=n.getData(e.data);return i||qS(e.data),Wp(t.type)?i.valuesRef(n,e.field,BJ(e.sort,!1)):NY(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function PAe(e,t,n){const i=e.data,r=e.fields.reduce((o,a)=>(a=Ie(a)?{data:i,field:a}:fe(a)||a.signal?$Ae(a,n):a,o.push(a),o),[]);return(Wp(t.type)?OAe:NY(t.type)?IAe:LAe)(e,n,r)}function $Ae(e,t){const n="_:vega:_"+TAe++,i=ja({});if(fe(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+be(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Bd({})]),{data:n,field:"data"}}function OAe(e,t,n){const i=BJ(e.sort,!0);let r,o;const a=n.map(u=>{const c=t.getData(u.data);return c||qS(u.data),c.countsRef(t,u.field,i)}),s={groupby:SF,pulse:a};i&&(r=i.op||"count",o=i.field?GS(r,i.field):"count",s.ops=[zJ[r]],s.fields=[t.fieldRef(o)],s.as=[o]),r=t.add(PJ(s));const l=t.add(ja({pulse:Ke(r)}));return o=t.add(RAe({field:SF,sort:t.sortRef(i),pulse:Ke(l)})),Ke(o)}function BJ(e,t){return e&&(!e.field&&!e.op?Le(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!zJ[e.op]&&le("Multiple domain scales can not be sorted using "+e.op)),e}function IAe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||qS(r.data),o.domainRef(t,r.field)});return Ke(t.add(xAe({values:i})))}function LAe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||qS(r.data),o.extentRef(t,r.field)});return Ke(t.add(vAe({extents:i})))}function DAe(e,t){return e.signal||fe(e)?O_(e,t):t.objectProperty(e)}function zAe(e){return Le(e)?{interval:Do(e.interval),step:Do(e.step)}:Do(e)}function jAe(e,t){t.interpolate=Do(e.type||e),e.gamma!=null&&(t.interpolateGamma=Do(e.gamma))}function HJ(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Ie(r)){if(i&&et(i,r))return e=xt({},e,{range:i[r]}),HJ(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Wp(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:le("Unrecognized scale range value: "+be(r))}else if(r.scheme){n.scheme=fe(r.scheme)?O_(r.scheme,t):Do(r.scheme,t),r.extent&&(n.schemeExtent=O_(r.extent,t)),r.count&&(n.schemeCount=Do(r.count,t));return}else if(r.step){n.rangeStep=Do(r.step,t);return}else{if(Wp(e.type)&&!fe(r))return jJ(r,e,t);fe(r)||le("Unsupported range type: "+be(r))}return r.map(o=>(fe(o)?O_:Do)(o,t))}function BAe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=EF(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=EF(n[r],r,t));t.addProjection(e.name,i)}function EF(e,t,n){return fe(e)?e.map(i=>EF(i,t,n)):Le(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:le("Unsupported parameter object: "+be(e)):e}const Ba="top",Lm="left",Dm="right",vc="bottom",UJ="center",HAe="vertical",UAe="start",WAe="middle",GAe="end",kF="index",pI="label",qAe="offset",Qp="perc",VAe="perc2",Bo="value",Vv="guide-label",mI="guide-title",YAe="group-title",ZAe="group-subtitle",a6="symbol",I_="gradient",RF="discrete",TF="size",XAe="shape",KAe="fill",JAe="stroke",QAe="strokeWidth",eFe="strokeDash",tFe="opacity",gI=[TF,XAe,KAe,JAe,QAe,eFe,tFe],Yv={name:1,style:1,interactive:1},Dt={value:0},Ho={value:1},VS="group",WJ="rect",yI="rule",nFe="symbol",Hd="text";function tv(e){return e.type=VS,e.interactive=e.interactive||!1,e}function Qr(e,t){const n=(i,r)=>ga(e[i],ga(t[i],r));return n.isVertical=i=>HAe===ga(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ga(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ga(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ga(e.columns,ga(t.columns,+n.isVertical(!0))),n}function GJ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function iFe(e,t,n){const i=t.config.style[n];return i&&i[e]}function YS(e,t,n){return`item.anchor === '${UAe}' ? ${e} : item.anchor === '${GAe}' ? ${t} : ${n}`}const vI=YS(be(Lm),be(Dm),be(UJ));function rFe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Le(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function qJ(e,t){return t?e?Le(e)?Object.assign({},e,{offset:qJ(e.offset,t)}):{value:e,offset:t}:t:e}function bo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Im(e.encode,t,Yv)):e.interactive=!1,e}function oFe(e,t,n,i){const r=Qr(e,n),o=r.isVertical(),a=r.gradientThickness(),s=r.gradientLength();let l,u,c,d,h;o?(u=[0,1],c=[0,0],d=a,h=s):(u=[0,0],c=[1,0],d=s,h=a);const m={enter:l={opacity:Dt,x:Dt,y:Dt,width:pi(d),height:pi(h)},update:xt({},l,{opacity:Ho,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Dt}};return Mi(m,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),bo({type:WJ,role:NTe,encode:m},i)}function aFe(e,t,n,i,r){const o=Qr(e,n),a=o.isVertical(),s=o.gradientThickness(),l=o.gradientLength();let u,c,d,h,m="";a?(u="y",d="y2",c="x",h="width",m="1-"):(u="x",d="x2",c="y",h="height");const g={opacity:Dt,fill:{scale:t,field:Bo}};g[u]={signal:m+"datum."+Qp,mult:l},g[c]=Dt,g[d]={signal:m+"datum."+VAe,mult:l},g[h]=pi(s);const y={enter:g,update:xt({},g,{opacity:Ho}),exit:{opacity:Dt}};return Mi(y,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),bo({type:WJ,role:FTe,key:Bo,from:r,encode:y},i)}const sFe=`datum.${Qp}<=0?"${Lm}":datum.${Qp}>=1?"${Dm}":"${UJ}"`,lFe=`datum.${Qp}<=0?"${vc}":datum.${Qp}>=1?"${Ba}":"${WAe}"`;function s6(e,t,n,i){const r=Qr(e,t),o=r.isVertical(),a=pi(r.gradientThickness()),s=r.gradientLength();let l=r("labelOverlap"),u,c,d,h,m="";const g={enter:u={opacity:Dt},update:c={opacity:Ho,text:{field:pI}},exit:{opacity:Dt}};return Mi(g,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:ga(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:lFe},d="y",h="x",m="1-"):(u.align=c.align={signal:sFe},u.baseline={value:"top"},d="x",h="y"),u[d]=c[d]={signal:m+"datum."+Qp,mult:s},u[h]=c[h]=a,a.offset=ga(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+kF}:void 0,bo({type:Hd,role:RJ,style:Vv,key:Bo,from:i,encode:g,overlap:l},n)}function uFe(e,t,n,i,r){const o=Qr(e,t),a=n.entries,s=!!(a&&a.interactive),l=a?a.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},h=`(${r}) ? datum.${qAe} : datum.${TF}`,m=u?pi(u):{field:TF},g=`datum.${kF}`,y=`max(1, ${r})`;let v,_,b,S,k;m.mult=.5,v={enter:_={opacity:Dt,x:{signal:h,mult:.5,offset:c},y:m},update:b={opacity:Ho,x:_.x,y:_.y},exit:{opacity:Dt}};let R=null,F=null;e.fill||(R=t.symbolBaseFillColor,F=t.symbolBaseStrokeColor),Mi(v,{fill:o("symbolFillColor",R),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",F),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),gI.forEach(O=>{e[O]&&(b[O]=_[O]={scale:e[O],field:Bo})});const T=bo({type:nFe,role:PTe,key:Bo,from:d,clip:u?!0:void 0,encode:v},n.symbols),P=pi(c);P.offset=o("labelOffset"),v={enter:_={opacity:Dt,x:{signal:h,offset:P},y:m},update:b={opacity:Ho,text:{field:pI},x:_.x,y:_.y},exit:{opacity:Dt}},Mi(v,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const B=bo({type:Hd,role:RJ,style:Vv,key:Bo,from:d,encode:v},n.labels);return v={enter:{noBound:{value:!u},width:Dt,height:u?pi(u):Dt,opacity:Dt},exit:{opacity:Dt},update:b={opacity:Ho,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(S=`ceil(item.mark.items.length / ${y})`,b.row.signal=`${g}%${S}`,b.column.signal=`floor(${g} / ${S})`,k={field:["row",g]}):(b.row.signal=`floor(${g} / ${y})`,b.column.signal=`${g} % ${y}`,k={field:g}),b.column.signal=`(${r})?${b.column.signal}:${g}`,i={facet:{data:i,name:"value",groupby:kF}},tv({role:fI,from:i,encode:Im(v,a,Yv),marks:[T,B],name:l,interactive:s,sort:k})}function cFe(e,t){const n=Qr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const xI='item.orient === "left"',_I='item.orient === "right"',ZS=`(${xI} || ${_I})`,fFe=`datum.vgrad && ${ZS}`,dFe=YS('"top"','"bottom"','"middle"'),hFe=YS('"right"','"left"','"center"'),pFe=`datum.vgrad && ${_I} ? (${hFe}) : (${ZS} && !(datum.vgrad && ${xI})) ? "left" : ${vI}`,mFe=`item._anchor || (${ZS} ? "middle" : "start")`,gFe=`${fFe} ? (${xI} ? -90 : 90) : 0`,yFe=`${ZS} ? (datum.vgrad ? (${_I} ? "bottom" : "top") : ${dFe}) : "top"`;function vFe(e,t,n,i){const r=Qr(e,t),o={enter:{opacity:Dt},update:{opacity:Ho,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Dt}};return Mi(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:mFe},angle:{signal:gFe},align:{signal:pFe},baseline:{signal:yFe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),bo({type:Hd,role:$Te,style:mI,from:i,encode:o},n)}function xFe(e,t){let n;return Le(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+l6(e.path)+")":e.sphere&&(n="geoShape("+l6(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function l6(e){return Le(e)&&e.signal?e.signal:be(e)}function VJ(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===VS?fI:t||uI}function _Fe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||VJ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function bFe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function bI(e,t){const n=Mq(e.type);n||le("Unrecognized transform type: "+be(e.type));const i=WS(n.type.toLowerCase(),null,YJ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function YJ(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const a=e.params[o];i[a.name]=wFe(a,t,n)}return i}function wFe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return SFe(e,t,n);if(r===void 0){e.required&&le("Missing required "+be(t.type)+" parameter: "+be(e.name));return}else{if(i==="param")return CFe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!ti(r)?r.map(o=>u6(e,o,n)):u6(e,r,n)}function u6(e,t,n){const i=e.type;if(ti(t))return f6(i)?le("Expression references can not be signals."):iR(i)?n.fieldRef(t):d6(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||iR(i);return r&&EFe(t)?n.exprRef(t.expr,t.as):r&&kFe(t)?Qy(t.field,t.as):f6(i)?Fs(t,n):RFe(i)?Ke(n.getData(t).values):iR(i)?Qy(t):d6(i)?n.compareRef(t):t}}function SFe(e,t,n){return Ie(t.from)||le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function CFe(e,t,n){const i=t[e.name];return e.array?(fe(i)||le("Expected an array of sub-parameters. Instead: "+be(i)),i.map(r=>c6(e,r,n))):c6(e,i,n)}function c6(e,t,n){const i=e.params.length;let r;for(let a=0;a<i;++a){r=e.params[a];for(const s in r.key)if(r.key[s]!==t[s]){r=null;break}if(r)break}r||le("Unsupported parameter: "+be(t));const o=xt(YJ(r,t,n),r.key);return Ke(n.add(bAe(o)))}const EFe=e=>e&&e.expr,kFe=e=>e&&e.field,RFe=e=>e==="data",f6=e=>e==="expr",iR=e=>e==="field",d6=e=>e==="compare";function TFe(e,t,n){let i,r,o,a,s;return e?(i=e.facet)&&(t||le("Only group marks can be faceted."),i.field!=null?a=s=L_(i,n):(e.data?s=Ke(n.getData(e.data).aggregate):(o=bI(xt({type:"aggregate",groupby:Oe(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=L_(i,n),a=s=Ke(n.add(o))),r=n.keyRef(i.groupby,!0))):a=Ke(n.add(ja(null,[{}]))),a||(a=L_(e,n)),{key:r,pulse:a,parent:s}}function L_(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ke(t.getData(e.data).output)}function gd(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}gd.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Ke(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new gd(e,o,r,i,a)};function ZJ(e){return Ie(e)?e:null}function h6(e,t,n){const i=GS(n.op,n.field);let r;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function qg(e,t,n,i,r,o,a){const s=t[n]||(t[n]={}),l=KTe(o);let u=ZJ(r),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=s[u]),!c){const h=o?{field:SF,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Ke(t.output)};l&&(h.sort=e.sortRef(o)),d=e.add(WS(i,void 0,h)),a&&(t.index[r]=d),c=Ke(d),u!=null&&(s[u]=c)}return c}gd.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=ZJ(t);let a,s,l;return o!=null&&(e=i.scope,a=r[o]),a?n&&n.field&&h6(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ke(i.output)},n&&n.field&&h6(e,l,n),s=e.add(PJ(l)),a=e.add(ja({pulse:Ke(s)})),a={agg:s,ref:Ke(a)},o!=null&&(r[o]=a)),a.ref},tuplesRef(){return Ke(this.values)},extentRef(e,t){return qg(e,this,"extent","extent",t,!1)},domainRef(e,t){return qg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return qg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return qg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return qg(e,this,"indata","tupleindex",t,!0,!0)}};function AFe(e,t,n){const i=e.from.facet,r=i.name,o=L_(i,t);let a;i.name||le("Facet must have a name: "+be(i)),i.data||le("Facet must reference a data set: "+be(i)),i.field?a=t.add(IJ({field:t.fieldRef(i.field),pulse:o})):i.groupby?a=t.add(dAe({key:t.keyRef(i.groupby),group:Ke(t.proxy(n.parent)),pulse:o})):le("Facet must specify groupby or field: "+be(i));const s=t.fork(),l=s.add(ja()),u=s.add(Bd({pulse:Ke(l)}));s.addData(r,new gd(s,l,l,u)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function FFe(e,t,n){const i=t.add(IJ({pulse:n.pulse})),r=t.fork();r.add(Bd()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function XJ(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,a=e.modify,s=e.values,l=t.add(Ow()),u="if("+e.trigger+',modify("'+n+'",'+[r,i,o,a,s].map(d=>d??"null").join(",")+"),0)",c=Fs(u,t);l.update=c.$expr,l.params=c.$params}function XS(e,t){const n=VJ(e),i=e.type===VS,r=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===fI||n===cI,s,l,u,c,d,h,m;const g=n===uI||a||r,y=TFe(e.from,i,t);l=t.add(cAe({key:y.key||(e.key?Qy(e.key):void 0),pulse:y.pulse,clean:!i}));const v=Ke(l);l=u=t.add(ja({pulse:v})),l=t.add(yAe({markdef:_Fe(e),interactive:bFe(e.interactive,t),clip:xFe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ke(l)}));const _=Ke(l);l=c=t.add(OJ(MJ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(F=>{const T=bI(F,t),P=T.metadata;(P.generates||P.changes)&&le("Mark transforms should not generate new data."),P.nomod||(c.params.mod=!0),T.params.pulse=Ke(l),t.add(l=T)}),e.sort&&(l=t.add(kAe({sort:t.compareRef(e.sort),pulse:Ke(l)})));const b=Ke(l);(r||a)&&(a=t.add(DJ({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:b})),h=Ke(a));const S=t.add($J({mark:_,pulse:h||b}));m=Ke(S),i&&(g&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(b,h||m,v),r?AFe(e,t,y):g?FFe(e,t,y):t.parse(e),t.popState(),g&&(a&&s.push(a),s.push(S))),o&&(m=MFe(o,m,t));const k=t.add(LJ({pulse:m})),R=t.add(Bd({pulse:Ke(k)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new gd(t,u,k,R)),e.on&&e.on.forEach(F=>{(F.insert||F.remove||F.toggle)&&le("Marks only support modify triggers."),XJ(F,t,d)}))}function MFe(e,t,n){const i=e.method,r=e.bound,o=e.separation,a={separation:ti(o)?n.signalRef(o.signal):o,method:ti(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),r){const s=r.tolerance;a.boundTolerance=ti(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(r.scale),a.boundOrient=r.orient}return Ke(n.add(_Ae(a)))}function NFe(e,t){const n=t.config.legend,i=e.encode||{},r=Qr(e,n),o=i.legend||{},a=o.name||void 0,s=o.interactive,l=o.style,u={};let c=0,d,h,m;gI.forEach(S=>e[S]?(u[S]=e[S],c=c||e[S]):0),c||le("Missing valid scale for legend.");const g=PFe(e,t.scaleType(c)),y={title:e.title!=null,scales:u,type:g,vgrad:g!=="symbol"&&r.isVertical()},v=Ke(t.add(ja(null,[y]))),_={enter:{x:{value:0},y:{value:0}}},b=Ke(t.add(mAe(h={type:g,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===I_?(m=[oFe(e,c,n,i.gradient),s6(e,n,i.labels,b)],h.count=h.count||t.signalRef(`max(2,2*floor((${qf(r.gradientLength())})/100))`)):g===RF?m=[aFe(e,c,n,i.gradient,b),s6(e,n,i.labels,b)]:(d=cFe(e,n),m=[uFe(e,n,i,b,qf(d.columns))],h.size=IFe(e,t,m[0].marks)),m=[tv({role:MTe,from:v,encode:_,marks:m,layout:d,interactive:s})],y.title&&m.push(vFe(e,n,i.title,v)),XS(tv({role:ATe,from:v,encode:Im(OFe(r,e,n),o,Yv),marks:m,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:a,interactive:s,style:l}),t)}function PFe(e,t){let n=e.type||a6;return!e.type&&$Fe(e)===1&&(e.fill||e.stroke)&&(n=y$(t)?I_:vA(t)?RF:a6),n!==I_?n:vA(t)?RF:I_}function $Fe(e){return gI.reduce((t,n)=>t+(e[n]?1:0),0)}function OFe(e,t,n){const i={enter:{},update:{}};return Mi(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function IFe(e,t,n){const i=qf(p6("size",e,n)),r=qf(p6("strokeWidth",e,n)),o=qf(LFe(n[1].encode,t,Vv));return Fs(`max(ceil(sqrt(${i})+${r}),${o})`,t)}function p6(e,t,n){return t[e]?`scale("${t[e]}",datum)`:GJ(e,n[0].encode)}function LFe(e,t,n){return GJ("fontSize",e)||iFe("fontSize",t,n)}const DFe=`item.orient==="${Lm}"?-90:item.orient==="${Dm}"?90:0`;function zFe(e,t){e=Ie(e)?{text:e}:e;const n=Qr(e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,a=r.interactive,s=r.style,l=[],u={},c=Ke(t.add(ja(null,[u])));return l.push(HFe(e,n,jFe(e),c)),e.subtitle&&l.push(UFe(e,n,i.subtitle,c)),XS(tv({role:OTe,from:c,encode:BFe(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function jFe(e){const t=e.encode;return t&&t.title||xt({name:e.name,interactive:e.interactive,style:e.style},t)}function BFe(e,t){const n={enter:{},update:{}};return Mi(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:vI},angle:{signal:DFe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Im(n,t,Yv)}function HFe(e,t,n,i){const r={value:0},o=e.text,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Mi(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bo({type:Hd,role:ITe,style:YAe,from:i,encode:a},n)}function UFe(e,t,n,i){const r={value:0},o=e.subtitle,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Mi(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bo({type:Hd,role:LTe,style:ZAe,from:i,encode:a},n)}function WFe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(bI(i,t))}),e.on&&e.on.forEach(i=>{XJ(i,t,e.name)}),t.addDataPipeline(e.name,GFe(e,t,n))}function GFe(e,t,n){const i=[];let r=null,o=!1,a=!1,s,l,u,c,d;for(e.values?ti(e.values)||$_(e.format)?(i.push(m6(t,e)),i.push(r=af())):i.push(r=af({$ingest:e.values,$format:e.format})):e.url?$_(e.url)||$_(e.format)?(i.push(m6(t,e)),i.push(r=af())):i.push(r=af({$request:e.url,$format:e.format})):e.source&&(r=s=Oe(e.source).map(h=>Ke(t.getData(h).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=af()),i.push(c),d.generates&&(a=!0),d.modifies&&!a&&(o=!0),d.source?r=c:d.changes&&(r=null);return s&&(u=s.length-1,i[0]=CAe({derive:o,pulse:u?s:s[0]}),(o||u)&&i.splice(1,0,af())),r||i.push(af()),i.push(Bd({})),i}function af(e){const t=ja({},e);return t.metadata={source:!0},t}function m6(e,t){return gAe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const KJ=e=>e===vc||e===Ba,KS=(e,t,n)=>ti(e)?ZFe(e.signal,t,n):e===Lm||e===Ba?t:n,mi=(e,t,n)=>ti(e)?VFe(e.signal,t,n):KJ(e)?t:n,Fa=(e,t,n)=>ti(e)?YFe(e.signal,t,n):KJ(e)?n:t,JJ=(e,t,n)=>ti(e)?XFe(e.signal,t,n):e===Ba?{value:t}:{value:n},qFe=(e,t,n)=>ti(e)?KFe(e.signal,t,n):e===Dm?{value:t}:{value:n},VFe=(e,t,n)=>QJ(`${e} === '${Ba}' || ${e} === '${vc}'`,t,n),YFe=(e,t,n)=>QJ(`${e} !== '${Ba}' && ${e} !== '${vc}'`,t,n),ZFe=(e,t,n)=>wI(`${e} === '${Lm}' || ${e} === '${Ba}'`,t,n),XFe=(e,t,n)=>wI(`${e} === '${Ba}'`,t,n),KFe=(e,t,n)=>wI(`${e} === '${Dm}'`,t,n),QJ=(e,t,n)=>(t=t!=null?pi(t):t,n=n!=null?pi(n):n,g6(t)&&g6(n)?(t=t?t.signal||be(t.value):null,n=n?n.signal||be(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[xt({test:e},t)].concat(n||[])),g6=e=>e==null||Object.keys(e).length===1,wI=(e,t,n)=>({signal:`${e} ? (${rp(t)}) : (${rp(n)})`}),JFe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Lm}' ? (${rp(i)}) : `:"")+(n!=null?`${e} === '${vc}' ? (${rp(n)}) : `:"")+(r!=null?`${e} === '${Dm}' ? (${rp(r)}) : `:"")+(t!=null?`${e} === '${Ba}' ? (${rp(t)}) : `:"")+"(null)"}),rp=e=>ti(e)?e.signal:e==null?null:be(e),QFe=(e,t)=>t===0?0:ti(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},gp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Th(e,t,n,i){let r;if(t&&et(t,e))return t[e];if(et(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[mI][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[Vv][r]}return null}function y6(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function eMe(e,t){var n=t.config,i=n.style,r=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,l,u;if(ti(a)){const d=y6([n.axisX,n.axisY]),h=y6([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(u of d)s[u]=mi(a,Th(u,n.axisX,r,i),Th(u,n.axisY,r,i));l={};for(u of h)l[u]=JFe(a.signal,Th(u,n.axisTop,r,i),Th(u,n.axisBottom,r,i),Th(u,n.axisLeft,r,i),Th(u,n.axisRight,r,i))}else s=a===Ba||a===vc?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||l||o?xt({},r,s,l,o):r}function tMe(e,t,n,i){const r=Qr(e,t),o=e.orient;let a,s;const l={enter:a={opacity:Dt},update:s={opacity:Ho},exit:{opacity:Dt}};Mi(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=v6(e,0),c=v6(e,1);return a.x=s.x=mi(o,u,Dt),a.x2=s.x2=mi(o,c),a.y=s.y=Fa(o,u,Dt),a.y2=s.y2=Fa(o,c),bo({type:yI,role:CTe,from:i,encode:l},n)}function v6(e,t){return{scale:e.scale,range:t}}function nMe(e,t,n,i,r){const o=Qr(e,t),a=e.orient,s=e.gridScale,l=KS(a,1,-1),u=iMe(e.offset,l);let c,d,h;const m={enter:c={opacity:Dt},update:h={opacity:Ho},exit:d={opacity:Dt}};Mi(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:Bo,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},y=mi(a,{signal:"height"},{signal:"width"}),v=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},_=s?{scale:s,range:1,mult:l,offset:u}:xt(y,{mult:l,offset:u});return c.x=h.x=mi(a,g,v),c.y=h.y=Fa(a,g,v),c.x2=h.x2=Fa(a,_),c.y2=h.y2=mi(a,_),d.x=mi(a,g),d.y=Fa(a,g),bo({type:yI,role:ETe,key:Bo,from:i,encode:m},n)}function iMe(e,t){if(t!==1)if(!Le(e))e=ti(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=xt({},e);for(;n.mult!=null;)if(Le(n.mult))n=n.mult=xt({},n.mult);else return n.mult=ti(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function rMe(e,t,n,i,r,o){const a=Qr(e,t),s=e.orient,l=KS(s,-1,1);let u,c,d;const h={enter:u={opacity:Dt},update:d={opacity:Ho},exit:c={opacity:Dt}};Mi(h,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const m=pi(r);m.mult=l;const g={scale:e.scale,field:Bo,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=u.y=mi(s,Dt,g),d.y2=u.y2=mi(s,m),c.x=mi(s,g),d.x=u.x=Fa(s,Dt,g),d.x2=u.x2=Fa(s,m),c.y=Fa(s,g),bo({type:yI,role:RTe,key:Bo,from:i,encode:h},n)}function rR(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function oMe(e,t,n,i,r,o){const a=Qr(e,t),s=e.orient,l=e.scale,u=KS(s,-1,1),c=qf(a("labelFlush")),d=qf(a("labelFlushOffset")),h=a("labelAlign"),m=a("labelBaseline");let g=c===0||!!c,y;const v=pi(r);v.mult=u,v.offset=pi(a("labelPadding")||0),v.offset.mult=u;const _={scale:l,field:Bo,band:.5,offset:qJ(o.offset,a("labelOffset"))},b=mi(s,g?rR(l,c,'"left"','"right"','"center"'):{value:"center"},qFe(s,"left","right")),S=mi(s,JJ(s,"bottom","top"),g?rR(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),k=rR(l,c,`-(${d})`,d,0);g=g&&d;const R={opacity:Dt,x:mi(s,_,v),y:Fa(s,_,v)},F={enter:R,update:y={opacity:Ho,text:{field:pI},x:R.x,y:R.y,align:b,baseline:S},exit:{opacity:Dt,x:R.x,y:R.y}};Mi(F,{dx:!h&&g?mi(s,k):null,dy:!m&&g?Fa(s,k):null}),Mi(F,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:h,baseline:m});const T=a("labelBound");let P=a("labelOverlap");return P=P||T?{separation:a("labelSeparation"),method:P,order:"datum.index",bound:T?{scale:l,orient:s,tolerance:T}:null}:void 0,y.align!==b&&(y.align=gp(y.align,b)),y.baseline!==S&&(y.baseline=gp(y.baseline,S)),bo({type:Hd,role:kTe,style:Vv,key:Bo,from:i,encode:F,overlap:P},n)}function aMe(e,t,n,i){const r=Qr(e,t),o=e.orient,a=KS(o,-1,1);let s,l;const u={enter:s={opacity:Dt,anchor:pi(r("titleAnchor",null)),align:{signal:vI}},update:l=xt({},s,{opacity:Ho,text:pi(e.title)}),exit:{opacity:Dt}},c={signal:`lerp(range("${e.scale}"), ${YS(0,1,.5)})`};return l.x=mi(o,c),l.y=Fa(o,c),s.angle=mi(o,Dt,QFe(a,90)),s.baseline=mi(o,JJ(o,vc,Ba),{value:vc}),l.angle=s.angle,l.baseline=s.baseline,Mi(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),sMe(r,o,u,n),u.update.align=gp(u.update.align,s.align),u.update.angle=gp(u.update.angle,s.angle),u.update.baseline=gp(u.update.baseline,s.baseline),bo({type:Hd,role:TTe,style:mI,from:i,encode:u},n)}function sMe(e,t,n,i){const r=(s,l)=>s!=null?(n.update[l]=gp(pi(s),n.update[l]),!1):!Ih(l,i),o=r(e("titleX"),"x"),a=r(e("titleY"),"y");n.enter.auto=a===o?pi(a):mi(t,pi(a),pi(o))}function lMe(e,t){const n=eMe(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,a=r.interactive,s=r.style,l=Qr(e,n),u=rFe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Ke(t.add(ja({},[c]))),h=Ke(t.add(uAe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),m=[];let g;return c.grid&&m.push(nMe(e,n,i.grid,h,u)),c.ticks&&(g=l("tickSize"),m.push(rMe(e,n,i.ticks,h,g,u))),c.labels&&(g=c.ticks?g:0,m.push(oMe(e,n,i.labels,h,g,u))),c.domain&&m.push(tMe(e,n,i.domain,d)),c.title&&m.push(aMe(e,n,i.title,d)),XS(tv({role:STe,from:d,encode:Im(uMe(l,e),r,Yv),marks:m,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:a,style:s}),t)}function uMe(e,t){const n={enter:{},update:{}};return Mi(n,{orient:e("orient"),offset:e("offset")||0,position:ga(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function eQ(e,t,n){const i=Oe(e.signals),r=Oe(e.scales);return n||i.forEach(o=>NJ(o,t)),Oe(e.projections).forEach(o=>BAe(o,t)),r.forEach(o=>AAe(o,t)),Oe(e.data).forEach(o=>WFe(o,t)),r.forEach(o=>FAe(o,t)),(n||i).forEach(o=>lAe(o,t)),Oe(e.axes).forEach(o=>lMe(o,t)),Oe(e.marks).forEach(o=>XS(o,t)),Oe(e.legends).forEach(o=>NFe(o,t)),e.title&&zFe(e.title,t),t.parseLambdas(),t}const cMe=e=>Im({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function fMe(e,t){const n=t.config,i=Ke(t.root=t.add(Ow())),r=dMe(e,n);r.forEach(u=>NJ(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(ja()),a=t.add(OJ(MJ(cMe(e.encode),VS,cI,e.style,t,{pulse:Ke(o)}))),s=t.add(DJ({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ke(a)}));t.operators.pop(),t.pushState(Ke(a),Ke(s),null),eQ(e,t,r),t.operators.push(s);let l=t.add($J({mark:i,pulse:Ke(s)}));return l=t.add(LJ({pulse:Ke(l)})),l=t.add(Bd({pulse:Ke(l)})),t.addData("root",new gd(t,o,o,l)),t}function Vg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function dMe(e,t){const n=a=>ga(e[a],t[a]),i=[Vg("background",n("background")),Vg("autosize",_Te(n("autosize"))),Vg("padding",wTe(n("padding"))),Vg("width",n("width")||0),Vg("height",n("height")||0)],r=i.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return Oe(e.signals).forEach(a=>{et(r,a.name)?a=xt(r[a.name],a):i.push(a),o[a.name]=a}),Oe(t.signals).forEach(a=>{!et(o,a.name)&&!et(r,a.name)&&i.push(a)}),i}function tQ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function x6(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}tQ.prototype=x6.prototype={parse(e){return eQ(e,this)},fork(){return new x6(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof wF?Ke(e):e;return this.add(SAe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let a,s;i&&(a=i.data||(i.data={}),s=a[r]||(a[r]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ke(this.add(Bd({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ke(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ot(this._parent)},encode(){return Ot(this._encode)},lookup(){return Ot(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ie(e))return Qy(e,t);e.signal||le("Unsupported field reference: "+be(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ke(this.add(hAe(r)))}return i},compareRef(e){let t=!1;const n=o=>ti(o)?(t=!0,this.signalRef(o.signal)):JTe(o)?(t=!0,this.exprRef(o.expr)):o,i=Oe(e.field).map(n),r=Oe(e.order).map(n);return t?Ke(this.add(o6({fields:i,orders:r}))):i6(i,r)},keyRef(e,t){let n=!1;const i=o=>ti(o)?(n=!0,Ke(r[o.signal])):o,r=this.signals;return e=Oe(e).map(i),n?Ke(this.add(pAe({fields:e,flat:t}))):YTe(e,t)},sortRef(e){if(!e)return e;const t=GS(e.op,e.field),n=e.order||ZTe;return n.signal?Ke(this.add(o6({fields:t,orders:this.signalRef(n.signal)}))):i6(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return et(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&le("Duplicate signal name: "+be(e));const n=t instanceof wF?t:this.add(Ow(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||le("Unrecognized signal name: "+be(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ke(this.signals[e]):(et(this.lambdas,e)||(this.lambdas[e]=this.add(Ow(null))),Ke(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Fs(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Le(e)?e:this.signalRef(e.signal||SI(e))},exprRef(e,t){const n={expr:Fs(e,this)};return t&&(n.expr.$name=t),Ke(this.add(fAe(n)))},addBinding(e,t){this.bindings||le("Nested signals do not support binding: "+be(e)),this.bindings.push(xt({signal:e},t))},addScaleProj(e,t){et(this.scales,e)&&le("Duplicate scale or projection name: "+be(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,EAe(t))},addProjection(e,t){this.addScaleProj(e,wAe(t))},getScale(e){return this.scales[e]||le("Unrecognized scale name: "+be(e)),this.scales[e]},scaleRef(e){return Ke(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return et(this.data,e)&&le("Duplicate data set name: "+be(e)),this.data[e]=t},getData(e){return this.data[e]||le("Undefined data set name: "+be(e)),this.data[e]},addDataPipeline(e,t){return et(this.data,e)&&le("Duplicate data set name: "+be(e)),this.addData(e,gd.fromEntries(this,t))}};function SI(e){return(fe(e)?hMe:pMe)(e)}function hMe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Le(r)?r.signal||SI(r):be(r))}return n+"]"}function pMe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+be(i)+":"+(Le(r)?r.signal||SI(r):be(r));return t+"}"}function mMe(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function gMe(e,t,n){return Le(e)||le("Input Vega specification must be an object."),t=Sm(mMe(),t,e.config),fMe(e,new tQ(t,n)).toRuntime()}var yMe="5.27.0";xt(zp,wge,Uxe,b_e,awe,e2e,RSe,aSe,ASe,QSe,uCe,gCe);const vMe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:qn,CanvasHandler:gc,CanvasRenderer:Uy,DATE:Vr,DAY:Ui,DAYOFYEAR:Ts,Dataflow:dp,Debug:QW,Error:MN,EventStream:K2,Gradient:VY,GroupItem:_S,HOURS:vo,Handler:mc,HybridHandler:K$,HybridRenderer:Kb,Info:JW,Item:xS,MILLISECONDS:Oa,MINUTES:xo,MONTH:Yi,Marks:_o,MultiPulse:nP,None:KW,Operator:sn,Parameters:X2,Pulse:Qu,QUARTER:qr,RenderType:Lu,Renderer:Eo,ResourceLoader:k$,SECONDS:Zo,SVGHandler:W$,SVGRenderer:TS,SVGStringRenderer:X$,Scenegraph:H$,TIME_UNITS:qN,Transform:ie,View:xJ,WEEK:Jn,Warn:NN,YEAR:Ti,accessor:Jr,accessorFields:Vi,accessorName:In,array:Oe,ascending:z2,bandwidthNRD:aP,bin:$q,bootstrapCI:Oq,boundClip:WZ,boundContext:Ov,boundItem:CA,boundMark:dZ,boundStroke:Zl,changeset:Ld,clampRange:cG,codegenExpression:qK,compare:LN,constant:Qi,cumulativeLogNormal:dP,cumulativeNormal:Q2,cumulativeUniform:gP,dayofyear:BG,debounce:DN,defaultLocale:KN,definition:Mq,densityLogNormal:fP,densityNormal:sP,densityUniform:mP,domChild:Xn,domClear:Po,domCreate:Ou,domFind:U$,dotbin:Iq,error:le,expressionFunction:Bn,extend:xt,extent:Es,extentIndex:fG,falsy:mu,fastmap:Em,field:Vo,flush:dG,font:ES,fontFamily:Dv,fontSize:Ls,format:m_,formatLocale:Tb,formats:eP,hasOwnProperty:et,id:_v,identity:Ji,inferType:_q,inferTypes:bq,ingest:qt,inherits:_e,inrange:Qh,interpolate:v$,interpolateColors:yS,interpolateRange:PY,intersect:jZ,intersectBoxLine:ep,intersectPath:R$,intersectPoint:T$,intersectRule:tZ,isArray:fe,isBoolean:Mc,isDate:Ku,isFunction:_t,isIterable:hG,isNumber:jt,isObject:Le,isRegExp:pG,isString:Ie,isTuple:Y2,key:zN,lerp:mG,lineHeight:hc,loader:q2,locale:vq,logger:PN,lruCache:gG,markup:Z$,merge:yG,mergeConfig:Sm,multiLineOffset:z$,one:wm,pad:vG,panLinear:rG,panLog:oG,panPow:aG,panSymlog:sG,parse:gMe,parseExpression:XO,parseSelector:Lc,path:rS,pathCurves:S$,pathEqual:GZ,pathParse:Gp,pathRectangle:XY,pathRender:zy,pathSymbols:ZY,pathTrail:KY,peek:Ot,point:RS,projection:gO,quantileLogNormal:hP,quantileNormal:eS,quantileUniform:yP,quantiles:rP,quantizeInterpolator:$Y,quarter:lG,quartiles:oP,get random(){return Xo},randomInteger:kme,randomKDE:uP,randomLCG:Eme,randomLogNormal:Dq,randomMixture:zq,randomNormal:lP,randomUniform:jq,read:Cq,regressionConstant:vP,regressionExp:Hq,regressionLinear:xP,regressionLoess:Gq,regressionLog:Bq,regressionPoly:Wq,regressionPow:Uq,regressionQuad:_P,renderModule:AS,repeat:l0,resetDefaultLocale:wpe,resetSVGClipId:QY,resetSVGDefIds:sxe,responseType:Sq,runtimeContext:aJ,sampleCurve:nS,sampleLogNormal:cP,sampleNormal:J2,sampleUniform:pP,scale:Ut,sceneEqual:J$,sceneFromJSON:pZ,scenePickVisit:Hb,sceneToJSON:hZ,sceneVisit:Ia,sceneZOrder:A$,scheme:x$,serializeXML:MZ,setHybridRendererOptions:ixe,setRandom:Sme,span:bv,splitAccessPath:Os,stringValue:be,textMetrics:po,timeBin:rq,timeFloor:YG,timeFormatLocale:Py,timeInterval:Am,timeOffset:KG,timeSequence:eq,timeUnitSpecifier:jG,timeUnits:VN,toBoolean:jN,toDate:BN,toNumber:Wi,toSet:$a,toString:HN,transform:Nq,transforms:zp,truncate:xG,truthy:Yo,tupleid:Je,typeParsers:aA,utcFloor:ZG,utcInterval:Fm,utcOffset:JG,utcSequence:tq,utcdayofyear:WG,utcquarter:uG,utcweek:GG,version:yMe,visitArray:wu,week:HG,writeConfig:Cm,zero:Au,zoomLinear:$N,zoomLog:ON,zoomPow:wb,zoomSymlog:IN},Symbol.toStringTag,{value:"Module"}));function xMe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var _Me={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},bMe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},wMe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const SMe=Array.prototype.slice,sf=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,SMe.call(t,1))},CMe=(e,t,n,i,r,o,a)=>new Date(e,t||0,n??1,i||0,r||0,o||0,a||0);var EMe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:CMe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return sf("join",arguments)},indexof:function(){return sf("indexOf",arguments)},lastindexof:function(){return sf("lastIndexOf",arguments)},slice:function(){return sf("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return sf("substring",arguments,String)},split:function(){return sf("split",arguments,String)},replace:function(){return sf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const kMe=["view","item","group","xy","x","y"],AF=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&AF.add(setImmediate);const RMe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:_Me[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),AF.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||EMe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>bMe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>wMe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,AF.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function Yg(e,t,n,i,r,o){const a=s=>RMe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=i,a.event=r,a.item=o,kMe.forEach(s=>a.fn[s]=function(){return r.vega[s](...arguments)}),a(e)}var TMe={operator(e,t){const n=t.ast,i=e.functions;return r=>Yg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>Yg(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>Yg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>{const a=o.item&&o.item.datum;return Yg(n,i,r,a,o)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{const l=a.datum;let u=0,c;for(const d in i)c=Yg(i[d].ast,r,s,l,void 0,a),a[d]!==c&&(a[d]=c,u=1);return n!=="rule"&&xMe(a,i,o),u}}};const AMe="vega-lite",FMe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',MMe="5.16.3",NMe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],PMe="https://vega.github.io/vega-lite/",$Me="Vega-Lite is a concise high-level language for interactive visualization.",OMe=["vega","chart","visualization"],IMe="build/vega-lite.js",LMe="build/vega-lite.min.js",DMe="build/vega-lite.min.js",zMe="build/src/index",jMe="build/src/index.d.ts",BMe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},HMe=["bin","build","src","vega-lite*","tsconfig.json"],UMe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},WMe={type:"git",url:"https://github.com/vega/vega-lite.git"},GMe="BSD-3-Clause",qMe={url:"https://github.com/vega/vega-lite/issues"},VMe={"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},YMe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},ZMe={vega:"^5.24.0"},XMe={node:">=18"},KMe={name:AMe,author:FMe,version:MMe,collaborators:NMe,homepage:PMe,description:$Me,keywords:OMe,main:IMe,unpkg:LMe,jsdelivr:DMe,module:zMe,types:jMe,bin:BMe,files:HMe,scripts:UMe,repository:WMe,license:GMe,bugs:qMe,devDependencies:VMe,dependencies:YMe,peerDependencies:ZMe,engines:XMe};function CI(e){return!!e.or}function EI(e){return!!e.and}function kI(e){return!!e.not}function D_(e,t){if(kI(e))D_(e.not,t);else if(EI(e))for(const n of e.and)D_(n,t);else if(CI(e))for(const n of e.or)D_(n,t);else t(e)}function yp(e,t){return kI(e)?{not:yp(e.not,t)}:EI(e)?{and:e.and.map(n=>yp(n,t))}:CI(e)?{or:e.or.map(n=>yp(n,t))}:t(e)}const ht=structuredClone;function nQ(e){throw new Error(e)}function em(e,t){const n={};for(const i of t)et(e,i)&&(n[i]=e[i]);return n}function Wr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>on(e)).join(",")})`};function Ft(e){if(jt(e))return e;const t=Ie(e)?e:on(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function FF(e){return e===!1||e===null}function Mt(e,t){return e.includes(t)}function yd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function RI(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function iQ(e,...t){for(const n of t)JMe(e,n??{});return e}function JMe(e,t){for(const n of me(t))Cm(e,n,t[n],!0)}function hs(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function QMe(e,t){const n=me(e),i=me(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function rQ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function TI(e,t){for(const n of e)if(t.has(n))return!0;return!1}function MF(e){const t=new Set;for(const n of e){const r=Os(n).map((a,s)=>s===0?a:`[${a}]`),o=r.map((a,s)=>r.slice(0,s+1).join(""));for(const a of o)t.add(a)}return t}function AI(e,t){return e===void 0||t===void 0?!0:TI(MF(e),MF(t))}function rn(e){return me(e).length===0}const me=Object.keys,Ai=Object.values,xc=Object.entries;function nv(e){return e===!0||e===!1}function Sn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ny(e,t){return kI(e)?`!(${ny(e.not,t)})`:EI(e)?`(${e.and.map(n=>ny(n,t)).join(") && (")})`:CI(e)?`(${e.or.map(n=>ny(n,t)).join(") || (")})`:t(e)}function Iw(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Iw(e[n],t)&&delete e[n],rn(e)}function Zv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function FI(e,t="datum"){const n=Os(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(be).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function oQ(e,t="datum"){return`${t}[${be(Os(e).join("."))}]`}function eNe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Jo(e){return`${Os(e).map(eNe).join("\\.")}`}function vd(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function MI(e){return`${Os(e).join(".")}`}function tm(e){return e?Os(e).length:0}function zn(...e){for(const t of e)if(t!==void 0)return t}let aQ=42;function sQ(e){const t=++aQ;return e?String(e)+t:t}function tNe(){aQ=42}function lQ(e){return uQ(e)?e:`__${e}`}function uQ(e){return e.startsWith("__")}function iv(e){if(e!==void 0)return(e%360+360)%360}function JS(e){return jt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const _6=Object.getPrototypeOf(structuredClone({}));function fo(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!fo(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!fo(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==_6.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==_6.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const o=r[i];if(!fo(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function on(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,o;if(Array.isArray(i)){for(o="[",r=0;r<i.length;r++)r&&(o+=","),o+=n(i[r])||"null";return o+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const a=t.push(i)-1,s=Object.keys(i).sort();for(o="",r=0;r<s.length;r++){const l=s[r],u=n(i[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(a,1),`{${o}}`}(e)}const Ml="row",Nl="column",QS="facet",Cn="x",_i="y",Ha="x2",Bs="y2",Dc="xOffset",zm="yOffset",Ua="radius",Kl="radius2",ta="theta",Jl="theta2",Wa="latitude",Ga="longitude",qa="latitude2",Qo="longitude2",Zr="color",Hs="fill",Us="stroke",Xr="shape",Ql="size",Ud="angle",eu="opacity",zc="fillOpacity",jc="strokeOpacity",Bc="strokeWidth",Hc="strokeDash",Xv="text",nm="order",Kv="detail",eC="key",xd="tooltip",tC="href",nC="url",iC="description",nNe={x:1,y:1,x2:1,y2:1},cQ={theta:1,theta2:1,radius:1,radius2:1};function fQ(e){return e in cQ}const NI={longitude:1,longitude2:1,latitude:1,latitude2:1};function dQ(e){switch(e){case Wa:return"y";case qa:return"y2";case Ga:return"x";case Qo:return"x2"}}function hQ(e){return e in NI}const iNe=me(NI),PI={...nNe,...cQ,...NI,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function vp(e){return e===Zr||e===Hs||e===Us}const pQ={row:1,column:1,facet:1},zo=me(pQ),$I={...PI,...pQ},rNe=me($I),{order:IBe,detail:LBe,tooltip:DBe,...oNe}=$I,{row:zBe,column:jBe,facet:BBe,...aNe}=oNe;function sNe(e){return!!aNe[e]}function mQ(e){return!!$I[e]}const lNe=[Ha,Bs,qa,Qo,Jl,Kl];function gQ(e){return Wd(e)!==e}function Wd(e){switch(e){case Ha:return Cn;case Bs:return _i;case qa:return Wa;case Qo:return Ga;case Jl:return ta;case Kl:return Ua}return e}function _c(e){if(fQ(e))switch(e){case ta:return"startAngle";case Jl:return"endAngle";case Ua:return"outerRadius";case Kl:return"innerRadius"}return e}function Ws(e){switch(e){case Cn:return Ha;case _i:return Bs;case Wa:return qa;case Ga:return Qo;case ta:return Jl;case Ua:return Kl}}function Kr(e){switch(e){case Cn:case Ha:return"width";case _i:case Bs:return"height"}}function yQ(e){switch(e){case Cn:return"xOffset";case _i:return"yOffset";case Ha:return"x2Offset";case Bs:return"y2Offset";case ta:return"thetaOffset";case Ua:return"radiusOffset";case Jl:return"theta2Offset";case Kl:return"radius2Offset"}}function OI(e){switch(e){case Cn:return"xOffset";case _i:return"yOffset"}}function uNe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const cNe=me(PI),{x:HBe,y:UBe,x2:WBe,y2:GBe,xOffset:qBe,yOffset:VBe,latitude:YBe,longitude:ZBe,latitude2:XBe,longitude2:KBe,theta:JBe,theta2:QBe,radius:e8e,radius2:t8e,...II}=PI,fNe=me(II),LI={x:1,y:1},Gs=me(LI);function jn(e){return e in LI}const DI={theta:1,radius:1},dNe=me(DI);function rC(e){return e==="width"?Cn:_i}const vQ={xOffset:1,yOffset:1};function Jv(e){return e in vQ}const{text:n8e,tooltip:i8e,href:r8e,url:o8e,description:a8e,detail:s8e,key:l8e,order:u8e,...xQ}=II,hNe=me(xQ);function pNe(e){return!!II[e]}function mNe(e){switch(e){case Zr:case Hs:case Us:case Ql:case Xr:case eu:case Bc:case Hc:return!0;case zc:case jc:case Ud:return!1}}const _Q={...LI,...DI,...vQ,...xQ},oC=me(_Q);function tu(e){return!!_Q[e]}function gNe(e,t){return vNe(e)[t]}const bQ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:c8e,...yNe}=bQ;function vNe(e){switch(e){case Zr:case Hs:case Us:case iC:case Kv:case eC:case xd:case tC:case nm:case eu:case zc:case jc:case Bc:case QS:case Ml:case Nl:return bQ;case Cn:case _i:case Dc:case zm:case Wa:case Ga:return yNe;case Ha:case Bs:case qa:case Qo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ql:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Hc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Xr:return{point:"always",geoshape:"always"};case Xv:return{text:"always"};case Ud:return{point:"always",square:"always",text:"always"};case nC:return{image:"always"};case ta:return{text:"always",arc:"always"};case Ua:return{text:"always",arc:"always"};case Jl:case Kl:return{arc:"always"}}}function oR(e){switch(e){case Cn:case _i:case ta:case Ua:case Dc:case zm:case Ql:case Ud:case Bc:case eu:case zc:case jc:case Ha:case Bs:case Jl:case Kl:return;case QS:case Ml:case Nl:case Xr:case Hc:case Xv:case xd:case tC:case nC:case iC:return"discrete";case Zr:case Hs:case Us:return"flexible";case Wa:case Ga:case qa:case Qo:case Kv:case eC:case nm:return}}const xNe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},_Ne={count:1,min:1,max:1};function Gl(e){return!!e&&!!e.argmin}function Uc(e){return!!e&&!!e.argmax}function zI(e){return Ie(e)&&!!xNe[e]}const bNe=new Set(["count","valid","missing","distinct"]);function wQ(e){return Ie(e)&&bNe.has(e)}function wNe(e){return Ie(e)&&Mt(["min","max"],e)}const SNe=new Set(["count","sum","distinct","valid","missing"]),CNe=new Set(["mean","average","median","q1","q3","min","max"]);function SQ(e){return Mc(e)&&(e=yC(e,void 0)),"bin"+me(e).map(t=>aC(e[t])?Sn(`_${t}_${xc(e[t])}`):Sn(`_${t}_${e[t]}`)).join("")}function fn(e){return e===!0||Gd(e)&&!e.binned}function Ci(e){return e==="binned"||Gd(e)&&e.binned===!0}function Gd(e){return Le(e)}function aC(e){return e==null?void 0:e.param}function b6(e){switch(e){case Ml:case Nl:case Ql:case Zr:case Hs:case Us:case Bc:case eu:case zc:case jc:case Xr:return 6;case Hc:return 4;default:return 10}}function Qv(e){return!!(e!=null&&e.expr)}function Or(e){const t=me(e||{}),n={};for(const i of t)n[i]=so(e[i]);return n}function CQ(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:h,subtitleLineHeight:m,subtitlePadding:g,...y}=e,v={...y,...s?{fill:s}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...o!==void 0?{angle:o}:{},...a!==void 0?{limit:a}:{}},b={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...h?{subtitleFontWeight:h}:{},...m?{subtitleLineHeight:m}:{},...g?{subtitlePadding:g}:{}},S=em(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:v,subtitleMarkConfig:S,nonMarkTitleProperties:_,subtitle:b}}function ku(e){return Ie(e)||fe(e)&&Ie(e[0])}function Ve(e){return!!(e!=null&&e.signal)}function Wc(e){return!!e.step}function ENe(e){return fe(e)?!1:"fields"in e&&!("data"in e)}function kNe(e){return fe(e)?!1:"fields"in e&&"data"in e}function Cl(e){return fe(e)?!1:"field"in e&&"data"in e}const RNe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},TNe=me(RNe),ANe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},NF=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function EQ(e){const t=fe(e.condition)?e.condition.map(w6):w6(e.condition);return{...so(e),condition:t}}function so(e){if(Qv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function w6(e){if(Qv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function gn(e){if(Qv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ve(e)?e:e!==void 0?{value:e}:void 0}function FNe(e){return Ve(e)?e.signal:be(e)}function S6(e){return Ve(e)?e.signal:be(e.value)}function Ea(e){return Ve(e)?e.signal:e==null?null:be(e)}function MNe(e,t,n){for(const i of n){const r=ql(i,t.markDef,t.config);r!==void 0&&(e[i]=gn(r))}return e}function kQ(e){return[].concat(e.type,e.style??[])}function Kt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:o&&(!r||r===e)?void 0:ql(e,t,n,i)}function ql(e,t,n,{vgChannel:i}={}){return zn(i?Lw(e,t,n.style):void 0,Lw(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function Lw(e,t,n){return RQ(e,kQ(t),n)}function RQ(e,t,n){t=Oe(t);let i;for(const r of t){const o=n[r];o&&o[e]!==void 0&&(i=o[e])}return i}function TQ(e,t){return Oe(e).reduce((n,i)=>(n.field.push(Te(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function AQ(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(fo(r,i))return;n.push(i)}),n}function FQ(e,t){return fo(e,t)||!t?e:e?[...Oe(e),...Oe(t)].join(", "):t}function MQ(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((ku(n)||Ve(n))&&(ku(i)||Ve(i)))return{explicit:e.explicit,value:FQ(n,i)};if(ku(n)||Ve(n))return{explicit:e.explicit,value:n};if(ku(i)||Ve(i))return{explicit:e.explicit,value:i};if(!ku(n)&&!Ve(n)&&!ku(i)&&!Ve(i))return{explicit:e.explicit,value:AQ(n,i)};throw new Error("It should never reach here")}function jI(e){return`Invalid specification ${on(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const NNe='Autosize "fit" only works for single views and layered views.';function C6(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function E6(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function k6(e){return e?`Dropping "fit-${e}" because spec has discrete ${Kr(e)}.`:'Dropping "fit" because spec has discrete size.'}function BI(e){return`Unknown field for ${e}. Cannot calculate view size.`}function R6(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function PNe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function $Ne(e){return`The "nearest" transform is not supported for ${e} marks.`}function NQ(e){return`Selection not supported for ${e} yet.`}function ONe(e){return`Cannot find a selection named "${e}".`}const INe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",LNe="Legend bindings are only supported for selections over an individual field or encoding channel.";function DNe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function zNe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const jNe="The same selection must be used to override scale domains in a layered view.",BNe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function HNe(e){return`Unknown repeated value "${e}".`}function T6(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const UNe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function WNe(e){return`Unrecognized parse "${e}".`}function A6(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const GNe="Attempt to add the same child twice.";function qNe(e){return`Ignoring an invalid transform: ${on(e)}.`}const VNe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function F6(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function YNe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${on(t)} is overridden by a child projection ${on(n)}.`}const ZNe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function XNe(e){return`${e}Offset dropped because ${e} is continuous`}function KNe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${on(n)}}.`}function PQ(e){return`Invalid field type "${e}".`}function JNe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function QNe(e){return`Invalid aggregation operator "${e}".`}function $Q(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function ePe(e){return`Position range does not support relative band size for ${e}.`}function PF(e,t){return`Dropping ${on(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const tPe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function sC(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function nPe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function iPe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function rPe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function oPe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function aR(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function aPe(e){return`The ${e} for range marks cannot be an expression`}function sPe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function lPe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function uPe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function cPe(e){return`Cannot use the relative band size with ${e} scale.`}function fPe(e){return`Using unaggregated domain with raw field has no effect (${on(e)}).`}function dPe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function hPe(e){return`Unaggregated domain is currently unsupported for log scale (${on(e)}).`}function pPe(e){return`Cannot apply size to non-oriented mark "${e}".`}function mPe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function gPe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function OQ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function IQ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function yPe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${on(n)} and ${on(i)}). Using ${on(n)}.`}function vPe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${on(n)} and ${on(i)}). Using the union of the two domains.`}function xPe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function _Pe(e){return`Dropping sort property ${on(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const M6="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",bPe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",wPe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",SPe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function CPe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function EPe(e){return`Cannot stack non-linear scale (${e}).`}function kPe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Dw(e,t){return`Invalid ${e}: ${on(t)}.`}function RPe(e){return`Dropping day from datetime ${on(e)} as day cannot be combined with other units.`}function TPe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function APe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function FPe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function N6(e){return`1D error band does not support ${e}.`}function LQ(e){return`Channel ${e} is required for "binned" bin.`}function MPe(e){return`Channel ${e} should not be used with "binned" bin.`}function NPe(e){return`Domain for ${e} is required for threshold scale.`}const DQ=PN(NN);let im=DQ;function PPe(e){return im=e,im}function $Pe(){return im=DQ,im}function ve(...e){im.warn(...e)}function OPe(...e){im.debug(...e)}function qd(e){if(e&&Le(e)){for(const t of UI)if(t in e)return!0}return!1}const zQ=["january","february","march","april","may","june","july","august","september","october","november","december"],IPe=zQ.map(e=>e.substr(0,3)),jQ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],LPe=jQ.map(e=>e.substr(0,3));function DPe(e){if(JS(e)&&(e=+e),jt(e))return e>4&&ve(Dw("quarter",e)),e-1;throw new Error(Dw("quarter",e))}function zPe(e){if(JS(e)&&(e=+e),jt(e))return e-1;{const t=e.toLowerCase(),n=zQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=IPe.indexOf(i);if(r!==-1)return r;throw new Error(Dw("month",e))}}function jPe(e){if(JS(e)&&(e=+e),jt(e))return e%7;{const t=e.toLowerCase(),n=jQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=LPe.indexOf(i);if(r!==-1)return r;throw new Error(Dw("day",e))}}function HI(e,t){const n=[];if(t&&e.day!==void 0&&me(e).length>1&&(ve(RPe(e)),e=ht(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?zPe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?DPe(e.quarter):e.quarter;n.push(jt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?jPe(e.day):e.day;n.push(jt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function _d(e){const n=HI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function BPe(e){const n=HI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function HPe(e){const t=HI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const BQ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},UI=me(BQ);function UPe(e){return!!BQ[e]}function Vd(e){return Le(e)?e.binned:HQ(e)}function HQ(e){return e&&e.startsWith("binned")}function WI(e){return e.startsWith("utc")}function WPe(e){return e.substring(3)}const GPe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function lC(e){return UI.filter(t=>WQ(e,t))}function UQ(e){const t=lC(e);return t[t.length-1]}function WQ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function qPe(e,t,{end:n}={end:!1}){const i=FI(t),r=WI(e)?"utc":"";function o(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let a;const s={};for(const l of UI)WQ(e,l)&&(s[l]=o(l),a=l);return n&&(s[a]+="+1"),BPe(s)}function GQ(e){if(!e)return;const t=lC(e);return`timeUnitSpecifier(${on(t)}, ${on(GPe)})`}function VPe(e,t,n){if(!e)return;const i=GQ(e);return`${n||WI(e)?"utc":"time"}Format(${t}, ${i})`}function yi(e){if(!e)return;let t;return Ie(e)?HQ(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Le(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),WI(t.unit)&&(t.utc=!0,t.unit=WPe(t.unit)),t}function YPe(e){const{utc:t,...n}=yi(e);return n.unit?(t?"utc":"")+me(n).map(i=>Sn(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+me(n).map(i=>Sn(`_${i}_${n[i]}`)).join("")}function qQ(e,t=n=>n){const n=yi(e),i=UQ(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=VQ(i,n.step),s={...r,[a]:+r[a]+o};return`${t(_d(s))} - ${t(_d(r))}`}}const ZPe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function XPe(e){return!!ZPe[e]}function VQ(e,t=1){if(XPe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function KPe(e){return e==null?void 0:e.param}function GI(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function qI(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function VI(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function YI(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function ZI(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function XI(e){if(e!=null&&e.field){if(fe(e.range)&&e.range.length===2)return!0;if(Ve(e.range))return!0}return!1}function KI(e){return!!(e!=null&&e.field)&&(fe(e.oneOf)||fe(e.in))}function JPe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function YQ(e){return KI(e)||GI(e)||XI(e)||qI(e)||YI(e)||VI(e)||ZI(e)}function is(e,t){return vC(e,{timeUnit:t,wrapTime:!0})}function QPe(e,t){return e.map(n=>is(n,t))}function ZQ(e,t=!0){const{field:n}=e,i=yi(e.timeUnit),{unit:r,binned:o}=i||{},a=Te(e,{expr:"datum"}),s=r?`time(${o?a:qPe(r,n)})`:a;if(GI(e))return`${s}===${is(e.equal,r)}`;if(qI(e)){const l=e.lt;return`${s}<${is(l,r)}`}else if(YI(e)){const l=e.gt;return`${s}>${is(l,r)}`}else if(VI(e)){const l=e.lte;return`${s}<=${is(l,r)}`}else if(ZI(e)){const l=e.gte;return`${s}>=${is(l,r)}`}else{if(KI(e))return`indexof([${QPe(e.oneOf,r).join(",")}], ${s}) !== -1`;if(JPe(e))return JI(s,e.valid);if(XI(e)){const{range:l}=e,u=Ve(l)?{signal:`${l.signal}[0]`}:l[0],c=Ve(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+s+", ["+is(u,r)+", "+is(c,r)+"])";const d=[];return u!==null&&d.push(`${s} >= ${is(u,r)}`),c!==null&&d.push(`${s} <= ${is(c,r)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${on(e)}`)}function JI(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function e$e(e){return YQ(e)&&e.timeUnit?{...e,timeUnit:yi(e.timeUnit)}:e}const e1={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function t$e(e){return e==="quantitative"||e==="temporal"}function XQ(e){return e==="ordinal"||e==="nominal"}const bd=e1.quantitative,QI=e1.ordinal,rm=e1.temporal,eL=e1.nominal,jm=e1.geojson;function n$e(e){if(e)switch(e=e.toLowerCase(),e){case"q":case bd:return"quantitative";case"t":case rm:return"temporal";case"o":case QI:return"ordinal";case"n":case eL:return"nominal";case jm:return"geojson"}}const Gr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},$F={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function i$e(e,t){const n=$F[e],i=$F[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const r$e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function P6(e){return r$e[e]}const KQ=new Set(["linear","log","pow","sqrt","symlog"]),JQ=new Set([...KQ,"time","utc"]);function QQ(e){return KQ.has(e)}const eee=new Set(["quantile","quantize","threshold"]),o$e=new Set([...JQ,...eee,"sequential","identity"]),a$e=new Set(["ordinal","bin-ordinal","point","band"]);function vi(e){return a$e.has(e)}function wo(e){return o$e.has(e)}function ka(e){return JQ.has(e)}function om(e){return eee.has(e)}const s$e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function l$e(e){return!Ie(e)&&!!e.name}function tee(e){return e==null?void 0:e.param}function u$e(e){return e==null?void 0:e.unionWith}function c$e(e){return Le(e)&&"field"in e}const f$e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:f8e,domain:d8e,range:h8e,rangeMax:p8e,rangeMin:m8e,scheme:g8e,...d$e}=f$e,h$e=me(d$e);function OF(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ka(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ka(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ka(e);case"nice":return ka(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return wo(e)&&!Mt(["log","time","utc","threshold","quantile"],e)}}function nee(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return vp(e)?void 0:uPe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function p$e(e,t){return Mt([QI,eL],t)?e===void 0||vi(e):t===rm?Mt([Gr.TIME,Gr.UTC,void 0],e):t===bd?QQ(e)||om(e)||e===void 0:!0}function m$e(e,t,n=!1){if(!tu(e))return!1;switch(e){case Cn:case _i:case Dc:case zm:case ta:case Ua:return ka(t)||t==="band"?!0:t==="point"?!n:!1;case Ql:case Bc:case eu:case zc:case jc:case Ud:return ka(t)||om(t)||Mt(["band","point","ordinal"],t);case Zr:case Hs:case Us:return t!=="band";case Hc:case Xr:return t==="ordinal"||om(t)}}const wr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},iee=wr.arc,uC=wr.area,cC=wr.bar,g$e=wr.image,fC=wr.line,dC=wr.point,y$e=wr.rect,zw=wr.rule,ree=wr.text,tL=wr.tick,v$e=wr.trail,nL=wr.circle,iL=wr.square,oee=wr.geoshape;function Gc(e){return["line","area","trail"].includes(e)}function rv(e){return["rect","bar","image","arc"].includes(e)}const x$e=new Set(me(wr));function Ms(e){return e.type}const _$e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],b$e=["fill","fillOpacity"],w$e=[..._$e,...b$e],S$e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},$6=me(S$e),C$e={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},E$e={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},k$e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},aee=me(k$e);function wd(e){return e&&e.band!=null}const R$e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},see=5,T$e={binSpacing:1,continuousBandSize:see,minBandSize:.25,timeUnitBandPosition:.5},A$e={binSpacing:0,continuousBandSize:see,minBandSize:.25,timeUnitBandPosition:.5},F$e={thickness:1};function M$e(e){return Ms(e)?e.type:e}function rL(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:o}=e,a=aL(e);return ye(n)&&!wQ(n.aggregate)&&r&&ka(r.get("type"))?N$e({fieldDef:n,channel:t,markDef:i,ref:a,config:o}):a}function N$e({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return Gc(n.type)?i:Kt("invalid",n,r)===null?[P$e(e,t),i]:i}function P$e(e,t){const n=oL(e,!0),r=Wd(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...r}}function oL(e,t=!0){return JI(Ie(e)?e:Te(e,{expr:"datum"}),!t)}function $$e(e){const{datum:t}=e;return qd(t)?_d(t):`${on(t)}`}function Vf(e,t,n,i){const r={};if(t&&(r.scale=t),qs(e)){const{datum:o}=e;qd(o)?r.signal=_d(o):Ve(o)?r.signal=o.signal:Qv(o)?r.signal=o.expr:r.value=o}else r.field=Te(e,n);if(i){const{offset:o,band:a}=i;o&&(r.offset=o),a&&(r.band=a)}return r}function jw({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:o="end",bandPosition:a=.5}){const s=!Ve(a)&&0<a&&a<1?"datum":void 0,l=Te(t,{expr:s,suffix:r}),u=n!==void 0?Te(n,{expr:s}):Te(t,{suffix:o,expr:s}),c={};if(a===0||a===1){c.scale=e;const d=a===0?l:u;c.field=d}else{const d=Ve(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${u}`:`${1-a} * ${l} + ${a} * ${u}`;c.signal=`scale("${e}", ${d})`}return i&&(c.offset=i),c}function O$e({scaleName:e,fieldDef:t}){const n=Te(t,{expr:"datum"}),i=Te(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function aL({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u,bandPosition:c}){if(t){if(mt(t)){const d=a==null?void 0:a.get("type");if(vr(t)){c??(c=bc({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:h,timeUnit:m,type:g}=t;if(fn(h)||c&&m&&g===rm)return s!=null&&s.impute?Vf(t,o,{binSuffix:"mid"},{offset:l}):c&&!vi(d)?jw({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Vf(t,o,r1(t,e)?{binSuffix:"range"}:{},{offset:l});if(Ci(h)){if(ye(n))return jw({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});ve(LQ(e===Cn?Ha:Bs))}}return Vf(t,o,vi(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(La(t)){const d=t.value,h=l?{offset:l}:{};return{...iy(e,d),...h}}}return _t(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function iy(e,t){return Mt(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Mt(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:gn(t)}function Sd(e){return e&&e!=="number"&&e!=="time"}function lee(e,t,n){return`${e}(${t}${n?`, ${on(n)}`:""})`}const I$e="  ";function sL({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){var l,u;if(Sd(n))return Ra({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const a=uee(e,i,r),s=am(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(r&&o.normalizedNumberFormatType)return Ra({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Ra({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if(s==="temporal"&&o.timeFormatType&&ye(e)&&e.timeUnit===void 0)return Ra({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(lm(e)){const c=D$e({field:a,timeUnit:ye(e)?(l=yi(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Yd(e)&&((u=e.scale)==null?void 0:u.type)===Gr.UTC});return c?{signal:c}:void 0}if(t=IF({type:s,specifiedFormat:t,config:o,normalizeStack:r}),ye(e)&&fn(e.bin)){const c=Te(e,{expr:i,binSuffix:"end"});return{signal:t1(a,c,t,n,o)}}else return t||am(e)==="quantitative"?{signal:`${dee(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function uee(e,t,n){return ye(e)?n?`${Te(e,{expr:t,suffix:"end"})}-${Te(e,{expr:t,suffix:"start"})}`:Te(e,{expr:t}):$$e(e)}function Ra({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:a}){if(a??(a=uee(e,i,r)),a!=="datum.value"&&ye(e)&&fn(e.bin)){const s=Te(e,{expr:i,binSuffix:"end"});return{signal:t1(a,s,t,n,o)}}return{signal:lee(n,a,t)}}function cee(e,t,n,i,r,o){var a;if(!(Ie(i)&&Sd(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&am(e)==="quantitative"&&(r.normalizedNumberFormatType&&sm(e)&&e.stack==="normalize"||r.numberFormatType))){if(sm(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return IF({type:"quantitative",config:r,normalizeStack:!0});if(lm(e)){const s=ye(e)?(a=yi(e.timeUnit))==null?void 0:a.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:L$e({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:o})}return IF({type:t,specifiedFormat:n,config:r})}}function fee(e,t,n){var i;if(e&&(Ve(e)||e==="number"||e==="time"))return e;if(lm(t)&&n!=="time"&&n!=="utc")return ye(t)&&((i=yi(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function IF({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Ie(t))return t;if(e===bd)return i?n.normalizedNumberFormat:n.numberFormat}function L$e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:GQ(t)}:i?void 0:n.timeFormat)}function dee(e,t){return`format(${e}, "${t||""}")`}function O6(e,t,n,i){return Sd(n)?lee(n,e,t):dee(e,(Ie(t)?t:void 0)??i.numberFormat)}function t1(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return t1(e,t,r.numberFormat,r.numberFormatType,r);const o=O6(e,n,i,r),a=O6(t,n,i,r);return`${JI(e,!1)} ? "null" : ${o} + "${I$e}" + ${a}`}function D$e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=Ie(n)?n:r,`${o?"utc":"time"}Format(${e}, '${n}')`):VPe(t,e,o)}const hC="min",z$e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function I6(e){return e in z$e}function hee(e){return!!(e!=null&&e.encoding)}function bs(e){return e&&(e.op==="count"||!!e.field)}function pee(e){return e&&fe(e)}function n1(e){return"row"in e||"column"in e}function lL(e){return!!e&&"header"in e}function pC(e){return"facet"in e}function j$e(e){return e.param}function B$e(e){return e&&!Ie(e)&&"repeat"in e}function L6(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function uL(e){return"sort"in e}function bc({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(mt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ye(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return ql("timeUnitBandPosition",n,i);if(fn(o))return .5}}function mee({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:a}){var u,c,d;const s=Kr(e),l=Kt(a?"size":s,i,r,{vgChannel:s});if(l!==void 0)return l;if(ye(t)){const{timeUnit:h,bin:m}=t;if(h&&!n)return{band:ql("timeUnitBandSize",i,r)};if(fn(m)&&!vi(o))return{band:1}}if(rv(i.type))return o?vi(o)?((u=r[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=r[i.type])==null?void 0:c.continuousBandSize:(d=r[i.type])==null?void 0:d.discreteBandSize}function gee(e,t,n,i){return fn(e.bin)||e.timeUnit&&vr(e)&&e.type==="temporal"?bc({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function yee(e){return e&&!!e.sort&&!e.field}function mC(e){return e&&"condition"in e}function gC(e){const t=e==null?void 0:e.condition;return!!t&&!fe(t)&&ye(t)}function i1(e){const t=e==null?void 0:e.condition;return!!t&&!fe(t)&&mt(t)}function H$e(e){const t=e==null?void 0:e.condition;return!!t&&(fe(t)||La(t))}function ye(e){return e&&(!!e.field||e.aggregate==="count")}function am(e){return e==null?void 0:e.type}function qs(e){return e&&"datum"in e}function Hu(e){return vr(e)&&!Hw(e)||Bw(e)}function D6(e){return vr(e)&&e.type==="quantitative"&&!e.bin||Bw(e)}function Bw(e){return qs(e)&&jt(e.datum)}function mt(e){return ye(e)||qs(e)}function vr(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function La(e){return e&&"value"in e&&"value"in e}function Yd(e){return e&&("scale"in e||"sort"in e)}function sm(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function vee(e){return e&&"legend"in e}function xee(e){return e&&("format"in e||"formatType"in e)}function U$e(e){return Wr(e,["legend","axis","header","scale"])}function W$e(e){return"op"in e}function Te(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,o="";if(q$e(e))n=lQ("count");else{let a;if(!t.nofn)if(W$e(e))a=e.op;else{const{bin:s,aggregate:l,timeUnit:u}=e;fn(s)?(a=SQ(s),r=(t.binSuffix??"")+(t.suffix??"")):l?Uc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Gl(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):a=String(l):u&&!Vd(u)&&(a=YPe(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?MI(n):t.expr?oQ(n,t.expr)+o:Jo(n)+o}function Hw(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ye(e)&&!!e.bin;case"temporal":return!1}throw new Error(PQ(e.type))}function G$e(e){var t;return Yd(e)&&om((t=e.scale)==null?void 0:t.type)}function q$e(e){return e.aggregate==="count"}function V$e(e,t){var a;const{field:n,bin:i,timeUnit:r,aggregate:o}=e;if(o==="count")return t.countTitle;if(fn(i))return`${n} (binned)`;if(r&&!Vd(r)){const s=(a=yi(r))==null?void 0:a.unit;if(s)return`${n} (${lC(s).join("-")})`}else if(o)return Uc(o)?`${n} for max ${o.argmax}`:Gl(o)?`${n} for min ${o.argmin}`:`${Zv(o)} of ${n}`;return n}function Y$e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Uc(t))return`${r} for argmax(${t.argmax})`;if(Gl(t))return`${r} for argmin(${t.argmin})`;const o=i&&!Vd(i)?yi(i):void 0,a=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||fn(n)&&"bin";return a?`${a.toUpperCase()}(${r})`:r}const _ee=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Y$e(e);default:return V$e(e,t)}};let bee=_ee;function wee(e){bee=e}function Z$e(){wee(_ee)}function xp(e,t,{allowDisabling:n,includeDefault:i=!0}){var s;const r=(s=cL(e))==null?void 0:s.title;if(!ye(e))return r??e.title;const o=e,a=i?fL(o,t):void 0;return n?zn(r,o.title,a):r??o.title??a}function cL(e){if(sm(e)&&e.axis)return e.axis;if(vee(e)&&e.legend)return e.legend;if(lL(e)&&e.header)return e.header}function fL(e,t){return bee(e,t)}function Uw(e){if(xee(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=cL(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function X$e(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(uL(e)&&fe(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Uc(n)&&!Gl(n))return"quantitative";if(Yd(e)&&((o=e.scale)!=null&&o.type))switch($F[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ns(e){if(ye(e))return e;if(gC(e))return e.condition}function Qn(e){if(mt(e))return e;if(i1(e))return e.condition}function See(e,t,n,i={}){if(Ie(e)||jt(e)||Mc(e)){const r=Ie(e)?"string":jt(e)?"number":"boolean";return ve(KNe(t,r,e)),{value:e}}return mt(e)?Ww(e,t,n,i):i1(e)?{...e,condition:Ww(e.condition,t,n,i)}:e}function Ww(e,t,n,i){if(xee(e)){const{format:r,formatType:o,...a}=e;if(Sd(o)&&!n.customFormatTypes)return ve(F6(t)),Ww(a,t,n,i)}else{const r=sm(e)?"axis":vee(e)?"legend":lL(e)?"header":null;if(r&&e[r]){const{format:o,formatType:a,...s}=e[r];if(Sd(a)&&!n.customFormatTypes)return ve(F6(t)),Ww({...e,[r]:s},t,n,i)}}return ye(e)?dL(e,t,i):K$e(e)}function K$e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=jt(n)?"quantitative":Ie(n)?"nominal":qd(n)?"temporal":void 0,{...e,type:t}}function dL(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:a}=e,s={...e};if(!n&&i&&!zI(i)&&!Uc(i)&&!Gl(i)&&(ve(QNe(i)),delete s.aggregate),r&&(s.timeUnit=yi(r)),a&&(s.field=`${a}`),fn(o)&&(s.bin=yC(o,t)),Ci(o)&&!jn(t)&&ve(MPe(t)),vr(s)){const{type:l}=s,u=n$e(l);l!==u&&(s.type=u),l!=="quantitative"&&wQ(i)&&(ve(JNe(l,i)),s.type="quantitative")}else if(!gQ(t)){const l=X$e(s,t);s.type=l}if(vr(s)){const{compatible:l,warning:u}=J$e(s,t)||{};l===!1&&ve(u)}if(uL(s)&&Ie(s.sort)){const{sort:l}=s;if(I6(l))return{...s,sort:{encoding:l}};const u=l.substr(1);if(l.charAt(0)==="-"&&I6(u))return{...s,sort:{encoding:u,order:"descending"}}}if(lL(s)){const{header:l}=s;if(l){const{orient:u,...c}=l;if(u)return{...s,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return s}function yC(e,t){return Mc(e)?{maxbins:b6(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:b6(t)}:e}const Ah={compatible:!0};function J$e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Ml:case Nl:case QS:return Hw(e)?Ah:{compatible:!1,warning:iPe(t)};case Cn:case _i:case Dc:case zm:case Zr:case Hs:case Us:case Xv:case Kv:case eC:case xd:case tC:case nC:case Ud:case ta:case Ua:case iC:return Ah;case Ga:case Qo:case Wa:case qa:return n!==bd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ah;case eu:case zc:case jc:case Bc:case Ql:case Jl:case Kl:case Ha:case Bs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ah;case Xr:case Hc:return!Hw(e)&&!G$e(e)?{compatible:!1,warning:rPe(t)}:Ah;case nm:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ah}}function lm(e){const{formatType:t}=Uw(e);return t==="time"||!t&&Q$e(e)}function Q$e(e){return e&&(e.type==="temporal"||ye(e)&&!!e.timeUnit)}function vC(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const o=t&&((l=yi(t))==null?void 0:l.unit);let a=o||n==="temporal",s;return Qv(e)?s=e.expr:Ve(e)?s=e.signal:qd(e)?(a=!0,s=_d(e)):(Ie(e)||jt(e))&&a&&(s=`datetime(${on(e)})`,UPe(o)&&(jt(e)&&e<1e4||Ie(e)&&isNaN(Date.parse(e)))&&(s=_d({[o]:e}))),s?i&&a?`time(${s})`:s:r?void 0:on(e)}function Cee(e,t){const{type:n}=e;return t.map(i=>{const r=ye(e)&&!Vd(e.timeUnit)?e.timeUnit:void 0,o=vC(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:i})}function r1(e,t){return fn(e.bin)?tu(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const z6={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function o1(e){return e==null?void 0:e.condition}const Eee=["domain","grid","labels","ticks","title"],eOe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},kee={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},tOe={...kee,style:1,labelExpr:1,encoding:1};function j6(e){return!!tOe[e]}const nOe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Ree=me(nOe);function nu(e){return"mark"in e}class xC{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return nu(t)?M$e(t.mark)===this.name:!1}}function Yf(e,t){const n=e&&e[t];return n?fe(n)?yd(n,i=>!!i.field):ye(n)||gC(n):!1}function Tee(e,t){const n=e&&e[t];return n?fe(n)?yd(n,i=>!!i.field):ye(n)||qs(n)||i1(n):!1}function Aee(e,t){if(jn(t)){const n=e[t];if((ye(n)||qs(n))&&(XQ(n.type)||ye(n)&&n.timeUnit)){const i=OI(t);return Tee(e,i)}}return!1}function hL(e){return yd(rNe,t=>{if(Yf(e,t)){const n=e[t];if(fe(n))return yd(n,i=>!!i.aggregate);{const i=Ns(n);return i&&!!i.aggregate}}return!1})}function Fee(e,t){const n=[],i=[],r=[],o=[],a={};return pL(e,(s,l)=>{if(ye(s)){const{field:u,aggregate:c,bin:d,timeUnit:h,...m}=s;if(c||h||d){const g=cL(s),y=g==null?void 0:g.title;let v=Te(s,{forAs:!0});const _={...y?[]:{title:xp(s,t,{allowDisabling:!0})},...m,field:v};if(c){let b;if(Uc(c)?(b="argmax",v=Te({op:"argmax",field:c.argmax},{forAs:!0}),_.field=`${v}.${u}`):Gl(c)?(b="argmin",v=Te({op:"argmin",field:c.argmin},{forAs:!0}),_.field=`${v}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const S={op:b,as:v};u&&(S.field=u),o.push(S)}}else if(n.push(v),vr(s)&&fn(d)){if(i.push({bin:d,field:u,as:v}),n.push(Te(s,{binSuffix:"end"})),r1(s,l)&&n.push(Te(s,{binSuffix:"range"})),jn(l)){const b={field:`${v}_end`};a[`${l}2`]=b}_.bin="binned",gQ(l)||(_.type=bd)}else if(h&&!Vd(h)){r.push({timeUnit:h,field:u,as:v});const b=vr(s)&&s.type!==rm&&"time";b&&(l===Xv||l===xd?_.formatType=b:pNe(l)?_.legend={formatType:b,..._.legend}:jn(l)&&(_.axis={formatType:b,..._.axis}))}a[l]=_}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:a}}function iOe(e,t,n){const i=gNe(t,n);if(i){if(i==="binned"){const r=e[t===Ha?Cn:_i];return!!(ye(r)&&ye(e[t])&&Ci(r.bin))}}else return!1;return!0}function rOe(e,t,n,i){const r={};for(const o of me(e))mQ(o)||ve(nPe(o));for(let o of cNe){if(!e[o])continue;const a=e[o];if(Jv(o)){const s=uNe(o),l=r[s];if(ye(l)&&t$e(l.type)&&ye(a)&&!l.timeUnit){ve(XNe(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(ve(ZNe),o=ta),!iOe(e,o,t)){ve(sC(o,t));continue}if(o===Ql&&t==="line"){const s=Ns(e[o]);if(s!=null&&s.aggregate){ve(tPe);continue}}if(o===Zr&&(n?"fill"in e:"stroke"in e)){ve($Q("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Kv||o===nm&&!fe(a)&&!La(a)||o===xd&&fe(a)){if(a){if(o===nm){const s=e[o];if(yee(s)){r[o]=s;continue}}r[o]=Oe(a).reduce((s,l)=>(ye(l)?s.push(dL(l,o)):ve(PF(l,o)),s),[])}}else{if(o===xd&&a===null)r[o]=null;else if(!ye(a)&&!qs(a)&&!La(a)&&!mC(a)&&!Ve(a)){ve(PF(a,o));continue}r[o]=See(a,o,i)}}return r}function _C(e,t){const n={};for(const i of me(e)){const r=See(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function oOe(e){const t=[];for(const n of me(e))if(Yf(e,n)){const i=e[n],r=Oe(i);for(const o of r)ye(o)?t.push(o):gC(o)&&t.push(o.condition)}return t}function pL(e,t,n){if(e)for(const i of me(e)){const r=e[i];if(fe(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function aOe(e,t,n,i){return e?me(e).reduce((r,o)=>{const a=e[o];return fe(a)?a.reduce((s,l)=>t.call(i,s,l,o),r):t.call(i,r,a,o)},n):n}function Mee(e,t){return me(t).reduce((n,i)=>{switch(i){case Cn:case _i:case tC:case iC:case nC:case Ha:case Bs:case Dc:case zm:case ta:case Jl:case Ua:case Kl:case Wa:case Ga:case qa:case Qo:case Xv:case Xr:case Ud:case xd:return n;case nm:if(e==="line"||e==="trail")return n;case Kv:case eC:{const r=t[i];if(fe(r)||ye(r))for(const o of Oe(r))o.aggregate||n.push(Te(o,{}));return n}case Ql:if(e==="trail")return n;case Zr:case Hs:case Us:case eu:case zc:case jc:case Hc:case Bc:{const r=Ns(t[i]);return r&&!r.aggregate&&n.push(Te(r,{})),n}}},[])}function sOe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(fe(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return fe(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function LF(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:a,titlePrefix:s})=>{const l=i?` of ${mL(t)}`:"";return{field:a+t.field,type:t.type,title:Ve(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),o=oOe(n).map(U$e);return{tooltip:[...r,...hs(o,Ft)]}}function mL(e){const{title:t,field:n}=e;return zn(t,n)}function gL(e,t,n,i,r){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const h=mL(n);return Nee(e,s,r,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...h!==void 0?{title:h}:{},...o!==void 0?{scale:o}:{},...a!==void 0?{axis:a}:{}},...Ie(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...i,...d}})}}function Nee(e,t,n,i){const{clip:r,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...o?{color:o}:{},...a?{opacity:a}:{},...Ms(i.mark)?i.mark:{type:i.mark},style:`${s}-${String(t)}`,...Mc(e[t])?{}:e[t]}}]:[]}function Pee(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",o=i[r],a=i[`${r}2`],s=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:Bx(o,n),continuousAxisChannelDef2:Bx(a,n),continuousAxisChannelDefError:Bx(s,n),continuousAxisChannelDefError2:Bx(l,n),continuousAxis:r}}function Bx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&ve(FPe(n,t)),i}else return e}function $ee(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(Ms(n)&&n.orient)return n.orient;if(Hu(r)){if(Hu(o)){const a=ye(r)&&r.aggregate,s=ye(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return lm(o)&&!lm(r)?"horizontal":"vertical"}return"horizontal"}else{if(Hu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Gw="boxplot",lOe=["box","median","outliers","rule","ticks"],uOe=new xC(Gw,Iee);function Oee(e){return jt(e)?"tukey":e}function Iee(e,{config:t}){e={...e,encoding:_C(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:o,...a}=e,s=Ms(n)?n:{type:n};r&&ve(NQ("boxplot"));const l=s.extent??t.boxplot.extent,u=Kt("size",s,t),c=s.invalid,d=Oee(l),{bins:h,timeUnits:m,transform:g,continuousAxisChannelDef:y,continuousAxis:v,groupby:_,aggregate:b,encodingWithoutContinuousAxis:S,ticksOrient:k,boxOrient:R,customTooltipWithoutAggregatedField:F}=cOe(e,l,t),{color:T,size:P,...B}=S,O=Vt=>gL(s,v,y,Vt,t.boxplot),D=O(B),W=O(S),j=O({...B,...P?{size:P}:{}}),U=LF([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],y,S),G={type:"tick",color:"black",opacity:1,orient:k,invalid:c,aria:!1},Z=d==="min-max"?U:LF([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,S),J=[...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Z}),...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Z}),...D({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:Z}),...D({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:Z})],H=[...d!=="tukey"?J:[],...W({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:R,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...j({partName:"median",mark:{type:"tick",invalid:c,...Le(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:k,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(d==="min-max")return{...a,transform:(a.transform??[]).concat(g),layer:H};const Q=`datum["lower_box_${y.field}"]`,K=`datum["upper_box_${y.field}"]`,ne=`(${K} - ${Q})`,he=`${Q} - ${l} * ${ne}`,$e=`${K} + ${l} * ${ne}`,Ee=`datum["${y.field}"]`,we={joinaggregate:Lee(y.field),groupby:_},Ae={transform:[{filter:`(${he} <= ${Ee}) && (${Ee} <= ${$e})`},{aggregate:[{op:"min",field:y.field,as:`lower_whisker_${y.field}`},{op:"max",field:y.field,as:`upper_whisker_${y.field}`},{op:"min",field:`lower_box_${y.field}`,as:`lower_box_${y.field}`},{op:"max",field:`upper_box_${y.field}`,as:`upper_box_${y.field}`},...b],groupby:_}],layer:J},{tooltip:It,...Et}=B,{scale:ke,axis:Ye}=y,He=mL(y),de=Wr(Ye,["title"]),Tt=Nee(s,"outliers",t.boxplot,{transform:[{filter:`(${Ee} < ${he}) || (${Ee} > ${$e})`}],mark:"point",encoding:{[v]:{field:y.field,type:y.type,...He!==void 0?{title:He}:{},...ke!==void 0?{scale:ke}:{},...rn(de)?{}:{axis:de}},...Et,...T?{color:T}:{},...F?{tooltip:F}:{}}})[0];let ft;const tt=[...h,...m,we];return Tt?ft={transform:tt,layer:[Tt,Ae]}:(ft=Ae,ft.transform.unshift(...tt)),{...a,layer:[ft,{transform:g,layer:H}]}}function Lee(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function cOe(e,t,n){const i=$ee(e,Gw),{continuousAxisChannelDef:r,continuousAxis:o}=Pee(e,i,Gw),a=r.field,s=Oee(t),l=[...Lee(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],u=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=sOe(d),{bins:g,timeUnits:y,aggregate:v,groupby:_,encoding:b}=Fee(m,n),S=i==="vertical"?"horizontal":"vertical",k=i,R=[...g,...y,{aggregate:[...v,...l],groupby:_},...u];return{bins:g,timeUnits:y,transform:R,groupby:_,aggregate:v,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:S,boxOrient:k,customTooltipWithoutAggregatedField:h}}const yL="errorbar",fOe=["ticks","rule"],dOe=new xC(yL,Dee);function Dee(e,{config:t}){e={...e,encoding:_C(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=zee(e,yL,t);delete o.size;const c=gL(s,r,i,o,t.errorbar),d=s.thickness,h=s.size,m={type:"tick",orient:a,aria:!1,...d!==void 0?{thickness:d}:{},...h!==void 0?{size:h}:{}},g=[...c({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...g.length>1?{layer:g}:{...g[0]}}}function hOe(e,t){const{encoding:n}=e;if(pOe(n))return{orient:$ee(e,t),inputType:"raw"};const i=mOe(n),r=gOe(n),o=n.x,a=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(mt(s)&&mt(l))throw new Error(`${t} cannot have both x2 and y2`);if(mt(s)){if(Hu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(mt(l)){if(Hu(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(mt(l)&&!mt(s))throw new Error(`${t} cannot have xError2 without xError`);if(mt(c)&&!mt(u))throw new Error(`${t} cannot have yError2 without yError`);if(mt(s)&&mt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(mt(s)){if(Hu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(mt(u)){if(Hu(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function pOe(e){return(mt(e.x)||mt(e.y))&&!mt(e.x2)&&!mt(e.y2)&&!mt(e.xError)&&!mt(e.xError2)&&!mt(e.yError)&&!mt(e.yError2)}function mOe(e){return mt(e.x2)||mt(e.y2)}function gOe(e){return mt(e.xError)||mt(e.xError2)||mt(e.yError)||mt(e.yError2)}function zee(e,t,n){const{mark:i,encoding:r,params:o,projection:a,...s}=e,l=Ms(i)?i:{type:i};o&&ve(NQ(t));const{orient:u,inputType:c}=hOe(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=Pee(e,u,t),{errorBarSpecificAggregate:v,postAggregateCalculates:_,tooltipSummary:b,tooltipTitleWithFieldName:S}=yOe(l,d,h,m,g,c,t,n),{[y]:k,[y==="x"?"x2":"y2"]:R,[y==="x"?"xError":"yError"]:F,[y==="x"?"xError2":"yError2"]:T,...P}=r,{bins:B,timeUnits:O,aggregate:D,groupby:W,encoding:j}=Fee(P,n),U=[...D,...v],G=c!=="raw"?[]:W,Z=LF(b,d,j,S);return{transform:[...s.transform??[],...B,...O,...U.length===0?[]:[{aggregate:U,groupby:G}],..._],groupby:G,continuousAxisChannelDef:d,continuousAxis:y,encodingWithoutContinuousAxis:j,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:Z}}function yOe(e,t,n,i,r,o,a,s){let l=[],u=[];const c=t.field;let d,h=!1;if(o==="raw"){const m=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,g=e.extent?e.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(g==="iqr")&&ve(APe(m,g,a)),g==="stderr"||g==="stdev")l=[{op:g,field:c,as:`extent_${c}`},{op:m,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:Zv(m)},{fieldPrefix:"upper_",titlePrefix:B6(m,g,"+")},{fieldPrefix:"lower_",titlePrefix:B6(m,g,"-")}],h=!0;else{let y,v,_;g==="ci"?(y="mean",v="ci0",_="ci1"):(y="median",v="q1",_="q3"),l=[{op:v,field:c,as:`lower_${c}`},{op:_,field:c,as:`upper_${c}`},{op:y,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:xp({field:c,aggregate:_,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:xp({field:c,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:xp({field:c,aggregate:y,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ve(TPe(e.center,e.extent)),o==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],r?u.push({calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const m of u)d.push({fieldPrefix:m.as.substring(0,6),titlePrefix:vd(vd(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:h}}function B6(e,t,n){return`${Zv(e)} ${n} ${t}`}const vL="errorband",vOe=["band","borders"],xOe=new xC(vL,jee);function jee(e,{config:t}){e={...e,encoding:_C(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=zee(e,vL,t),u=a,c=gL(u,r,i,o,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let h={type:d?"area":"rect"},m={type:d?"line":"rule"};const g={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(h={...h,...g,ariaRoleDescription:"errorband"},m={...m,...g,aria:!1}):u.interpolate?ve(N6("interpolate")):u.tension&&ve(N6("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:l})]}}const Bee={};function xL(e,t,n){const i=new xC(e,t);Bee[e]={normalizer:i,parts:n}}function _Oe(){return me(Bee)}xL(Gw,Iee,lOe);xL(yL,Dee,fOe);xL(vL,jee,vOe);const bOe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Hee={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Uee={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},wOe=me(Hee),SOe=me(Uee),COe={header:1,headerRow:1,headerColumn:1,headerFacet:1},Wee=me(COe),Gee=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],EOe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},kOe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Da="_vgsid_",ROe={point:{on:"click",fields:[Da],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function _L(e){return e==="legend"||!!(e!=null&&e.legend)}function sR(e){return _L(e)&&Le(e)}function bL(e){return!!(e!=null&&e.select)}function qee(e){const t=[];for(const n of e||[]){if(bL(n))continue;const{expr:i,bind:r,...o}=n;if(r&&i){const a={...o,bind:r,init:i};t.push(a)}else{const a={...o,...i?{update:i}:{},...r?{bind:r}:{}};t.push(a)}}return t}function TOe(e){return bC(e)||SL(e)||wL(e)}function wL(e){return"concat"in e}function bC(e){return"vconcat"in e}function SL(e){return"hconcat"in e}function Vee({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Ps(e){return Le(e)&&e.step!==void 0}function H6(e){return e.view||e.width||e.height}const U6=20,AOe={align:1,bounds:1,center:1,columns:1,spacing:1},FOe=me(AOe);function MOe(e,t,n){const i=n[t],r={},{spacing:o,columns:a}=i;o!==void 0&&(r.spacing=o),a!==void 0&&(pC(e)&&!n1(e.facet)||wL(e))&&(r.columns=a),bC(e)&&(r.columns=1);for(const s of FOe)if(e[s]!==void 0)if(s==="spacing"){const l=e[s];r[s]=jt(l)?l:{row:l.row??o,column:l.column??o}}else r[s]=e[s];return r}function DF(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function qw(e,t){const n=Vw(e,t);return Ps(n)?n.step:Yee}function Vw(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return zn(n,{step:e.step})}const Yee=20,NOe={continuousWidth:200,continuousHeight:200,step:Yee},POe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:NOe,mark:E$e,arc:{},area:{},bar:T$e,circle:{},geoshape:{},image:{},line:{},point:{},rect:A$e,rule:{color:"black"},square:{},text:{color:"black"},tick:F$e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:s$e,projection:{},legend:EOe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:ROe,style:{},title:{},facet:{spacing:U6},concat:{spacing:U6},normalizedNumberFormat:".0%"},il=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],W6={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},G6={blue:il[0],orange:il[1],red:il[2],teal:il[3],green:il[4],yellow:il[5],purple:il[6],pink:il[7],brown:il[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function $Oe(e={}){return{signals:[{name:"color",value:Le(e)?{...G6,...e}:G6}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function OOe(e){return{signals:[{name:"fontSize",value:Le(e)?{...W6,...e}:W6}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function IOe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Zee(e){const t=me(e||{}),n={};for(const i of t){const r=e[i];n[i]=o1(r)?EQ(r):so(r)}return n}function LOe(e){const t=me(e),n={};for(const i of t)n[i]=Zee(e[i]);return n}const DOe=[...aee,...Ree,...Wee,"background","padding","legend","lineBreak","scale","style","title","view"];function Xee(e={}){const{color:t,font:n,fontSize:i,selection:r,...o}=e,a=Sm({},ht(POe),n?IOe(n):{},t?$Oe(t):{},i?OOe(i):{},o||{});r&&Cm(a,"selection",r,!0);const s=Wr(a,DOe);for(const l of["background","lineBreak","padding"])a[l]&&(s[l]=so(a[l]));for(const l of aee)a[l]&&(s[l]=Or(a[l]));for(const l of Ree)a[l]&&(s[l]=Zee(a[l]));for(const l of Wee)a[l]&&(s[l]=Or(a[l]));return a.legend&&(s.legend=Or(a.legend)),a.scale&&(s.scale=Or(a.scale)),a.style&&(s.style=LOe(a.style)),a.title&&(s.title=Or(a.title)),a.view&&(s.view=Or(a.view)),s}const zOe=new Set(["view",...x$e]),jOe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],BOe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...C$e};function HOe(e){e=ht(e);for(const t of jOe)delete e[t];if(e.axis)for(const t in e.axis)o1(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of bOe)delete e.legend[t];if(e.mark){for(const t of $6)delete e.mark[t];e.mark.tooltip&&Le(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(qee(e.params)),delete e.params);for(const t of zOe){for(const i of $6)delete e[t][i];const n=BOe[t];if(n)for(const i of n)delete e[t][i];WOe(e,t)}for(const t of _Oe())delete e[t];UOe(e);for(const t in e)Le(e[t])&&rn(e[t])&&delete e[t];return rn(e)?void 0:e}function UOe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=CQ(e.title);rn(t)||(e.style["group-title"]={...e.style["group-title"],...t}),rn(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),rn(i)?delete e.title:e.title=i}function WOe(e,t,n,i){const r=i?e[t][i]:e[t];t==="view"&&(n="cell");const o={...r,...e.style[n??t]};rn(o)||(e.style[n??t]=o),i||delete e[t]}function wC(e){return"layer"in e}function GOe(e){return"repeat"in e}function qOe(e){return!fe(e.repeat)&&e.repeat.layer}class CL{map(t,n){return pC(t)?this.mapFacet(t,n):GOe(t)?this.mapRepeat(t,n):SL(t)?this.mapHConcat(t,n):bC(t)?this.mapVConcat(t,n):wL(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(wC(t))return this.mapLayer(t,n);if(nu(t))return this.mapUnit(t,n);throw new Error(jI(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const VOe={zero:1,center:1,normalize:1};function YOe(e){return e in VOe}const ZOe=new Set([iee,cC,uC,zw,dC,nL,iL,fC,ree,tL]),XOe=new Set([cC,uC,iee]);function Fh(e){return ye(e)&&am(e)==="quantitative"&&!e.bin}function q6(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(i),a=e[t],s=e[r];if(ye(a)&&ye(s))if(Fh(a)&&Fh(s)){if(a.stack)return t;if(s.stack)return r;const l=ye(a)&&!!a.aggregate,u=ye(s)&&!!s.aggregate;if(l!==u)return l?t:r;if(o){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Fh(a))return t;if(Fh(s))return r}else{if(Fh(a))return o&&n==="vertical"?void 0:t;if(Fh(s))return o&&n==="horizontal"?void 0:r}}function KOe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Kee(e,t){var y,v;const n=Ms(e)?e:{type:e},i=n.type;if(!ZOe.has(i))return null;const r=q6(t,"x",n)||q6(t,"theta",n);if(!r)return null;const o=t[r],a=ye(o)?Te(o,{}):void 0,s=KOe(r),l=[],u=new Set;if(t[s]){const _=t[s],b=ye(_)?Te(_,{}):void 0;b&&b!==a&&(l.push(s),u.add(b))}const c=s==="x"?"xOffset":"yOffset",d=t[c],h=ye(d)?Te(d,{}):void 0;h&&h!==a&&(l.push(c),u.add(h));const m=fNe.reduce((_,b)=>{if(b!=="tooltip"&&Yf(t,b)){const S=t[b];for(const k of Oe(S)){const R=Ns(k);if(R.aggregate)continue;const F=Te(R,{});(!F||!u.has(F))&&_.push({channel:b,fieldDef:R})}}return _},[]);let g;return o.stack!==void 0?Mc(o.stack)?g=o.stack?"zero":null:g=o.stack:XOe.has(i)&&(g="zero"),!g||!YOe(g)||hL(t)&&m.length===0?null:(y=o==null?void 0:o.scale)!=null&&y.type&&((v=o==null?void 0:o.scale)==null?void 0:v.type)!==Gr.LINEAR?(o!=null&&o.stack&&ve(EPe(o.scale.type)),null):mt(t[Ws(r)])?(o.stack!==void 0&&ve(CPe(r)),null):(ye(o)&&o.aggregate&&!SNe.has(o.aggregate)&&ve(kPe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:r,impute:o.impute===null?!1:Gc(i),stackBy:m,offset:g})}function Jee(e,t,n){const i=Or(e),r=Kt("orient",i,n);if(i.orient=tIe(i.type,t,r),r!==void 0&&r!==i.orient&&ve(lPe(i.orient,r)),i.type==="bar"&&i.orient){const s=Kt("cornerRadiusEnd",i,n);if(s!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:R$e[i.orient];for(const u of l)i[u]=s;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Kt("opacity",i,n)===void 0&&(i.opacity=QOe(i.type,t)),Kt("cursor",i,n)===void 0&&(i.cursor=JOe(i,t,n)),i}function JOe(e,t,n){return t.href||e.href||Kt("href",e,n)?"pointer":e.cursor}function QOe(e,t){if(Mt([dC,tL,nL,iL],e)&&!hL(t))return .7}function eIe(e,t,{graticule:n}){if(n)return!1;const i=ql("filled",e,t),r=e.type;return zn(i,r!==dC&&r!==fC&&r!==zw)}function tIe(e,t,n){switch(e){case dC:case nL:case iL:case ree:case y$e:case g$e:return}const{x:i,y:r,x2:o,y2:a}=t;switch(e){case cC:if(ye(i)&&(Ci(i.bin)||ye(r)&&r.aggregate&&!i.aggregate))return"vertical";if(ye(r)&&(Ci(r.bin)||ye(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(ye(i)&&i.type===bd&&!fn(i.bin)||Bw(i))&&ye(r)&&Ci(r.bin)?"horizontal":"vertical";if(!a)return(ye(r)&&r.type===bd&&!fn(r.bin)||Bw(r))&&ye(i)&&Ci(i.bin)?"vertical":"horizontal"}case zw:if(o&&!(ye(i)&&Ci(i.bin))&&a&&!(ye(r)&&Ci(r.bin)))return;case uC:if(a)return ye(r)&&Ci(r.bin)?"horizontal":"vertical";if(o)return ye(i)&&Ci(i.bin)?"vertical":"horizontal";if(e===zw){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case fC:case tL:{const s=D6(i),l=D6(r);if(n)return n;if(s&&!l)return e!=="tick"?"horizontal":"vertical";if(!s&&l)return e!=="tick"?"vertical":"horizontal";if(s&&l)return"vertical";{const u=vr(i)&&i.type===rm,c=vr(r)&&r.type===rm;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function nIe(e){const{point:t,line:n,...i}=e;return me(i).length>1?i:i.type}function iIe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Wr(e[t],["point","line"])});return e}function lR(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Le(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Le(t.point)?t.point:{}:void 0}function V6(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class rIe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(nu(t)){const{mark:i,encoding:r}=t,o=Ms(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!lR(o,n[o.type],r);case"area":return!!lR(o,n[o.type],r)||!!V6(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:a,mark:s,name:l,encoding:u,...c}=t,d=_C(u,r),h=Ms(s)?s:{type:s},m=lR(h,r[h.type],d),g=h.type==="area"&&V6(h,r[h.type]),y=[{name:l,...o?{params:o}:{},mark:nIe({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:Wr(d,["shape"])}],v=Kee(Jee(h,d,r),d);let _=d;if(v){const{fieldChannel:b,offset:S}=v;_={...d,[b]:{...d[b],...S?{stack:S}:{}}}}return _=Wr(_,["y2","x2"]),g&&y.push({...a?{projection:a}:{},mark:{type:"line",...em(h,["clip","interpolate","tension","tooltip"]),...g},encoding:_}),m&&y.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...em(h,["clip","tooltip"]),...m},encoding:_}),i({...c,layer:y},{...n,config:iIe(r)})}}function oIe(e,t){return t?n1(e)?ete(e,t):Qee(e,t):e}function uR(e,t){return t?ete(e,t):e}function zF(e,t,n){const i=t[e];if(B$e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ve(HNe(i.repeat));return}return t}function Qee(e,t){if(e=zF("field",e,t),e!==void 0){if(e===null)return null;if(uL(e)&&bs(e.sort)){const n=zF("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Y6(e,t){if(ye(e))return Qee(e,t);{const n=zF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Z6(e,t){if(mt(e)){const n=Y6(e,t);if(n)return n;if(mC(e))return{condition:e.condition}}else{if(i1(e)){const n=Y6(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function ete(e,t){const n={};for(const i in e)if(et(e,i)){const r=e[i];if(fe(r))n[i]=r.map(o=>Z6(o,t)).filter(o=>o);else{const o=Z6(r,t);o!==void 0&&(n[i]=o)}}return n}class aIe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(nu(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ms(i)&&i.type==="line")for(const r of lNe){const o=Wd(r),a=n[o];if(n[r]&&(ye(a)&&!Ci(a.bin)||qs(a)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return ve(sPe(!!r.x2,!!r.y2)),i({...t,mark:Le(o)?{...o,type:"rule"}:"rule"},n)}}class sIe extends CL{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[uOe,dOe,xOe,new rIe,new aIe]}map(t,n){if(nu(t)){const i=Yf(t.encoding,Ml),r=Yf(t.encoding,Nl),o=Yf(t.encoding,QS);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=uR(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,s);return a}mapRepeat(t,n){return qOe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...o}=t,{row:a,column:s,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return a||s?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...s?{column:s}:{}},spec:{repeat:{layer:l},spec:r}},n):{...o,layer:l.map(d=>{const h={...u,layer:d},m=`${(r.name?`${r.name}_`:"")+c}child__layer_${Sn(d)}`,g=this.mapLayerOrUnit(r,{...n,repeater:h,repeaterPrefix:m});return g.name=m,g})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:o,...a}=t;!fe(i)&&t.columns&&(t=Wr(t,["columns"]),ve(T6("repeat")));const s=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!fe(i)&&i.row||[l?l.row:null],d=!fe(i)&&i.column||[l?l.column:null],h=fe(i)&&i||[l?l.repeat:null];for(const g of h)for(const y of c)for(const v of d){const _={repeat:g,row:y,column:v,layer:l.layer},b=(r.name?`${r.name}_`:"")+u+"child__"+(fe(i)?`${Sn(g)}`:(i.row?`row_${Sn(y)}`:"")+(i.column?`column_${Sn(v)}`:"")),S=this.map(r,{...n,repeater:_,repeaterPrefix:b});S.name=b,s.push(Wr(S,["data"]))}const m=fe(i)?t.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...a,columns:m,concat:s}}mapFacet(t,n){const{facet:i}=t;return n1(i)&&t.columns&&(t=Wr(t,["columns"]),ve(T6("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:a,config:s}=n,l=K6({parentProjection:a,projection:r}),u=X6({parentEncoding:o,encoding:uR(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:s})}mapFacetedUnit(t,n){const{row:i,column:r,facet:o,...a}=t.encoding,{mark:s,width:l,projection:u,height:c,view:d,params:h,encoding:m,...g}=t,{facetMapping:y,layout:v}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},n),_=uR(a,n.repeater);return this.mapFacet({...g,...v,facet:y,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:s,encoding:_,...h?{params:h}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:o}=t;if(i||r){o&&ve(oPe([...i?[Ml]:[],...r?[Nl]:[]]));const a={},s={};for(const l of[Ml,Nl]){const u=t[l];if(u){const{align:c,center:d,spacing:h,columns:m,...g}=u;a[l]=g;for(const y of["align","center","spacing"])u[y]!==void 0&&(s[y]??(s[y]={}),s[y][l]=u[y])}}return{facetMapping:a,layout:s}}else{const{align:a,center:s,spacing:l,columns:u,...c}=o;return{facetMapping:oIe(c,n.repeater),layout:{...a?{align:a}:{},...s?{center:s}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:o,projection:a,...s}=t,l={...r,parentEncoding:X6({parentEncoding:n,encoding:o,layer:!0}),parentProjection:K6({parentProjection:i,projection:a})};return super.mapLayer({...s,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function X6({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...me(e),...me(t)]);for(const o of r){const a=t[o],s=e[o];if(mt(a)){const l={...s,...a};i[o]=l}else i1(a)?i[o]={...a,condition:{...s,...a.condition}}:a||a===null?i[o]=a:(n||La(s)||Ve(s)||mt(s)||fe(s))&&(i[o]=s)}}else i=t;return!i||rn(i)?void 0:i}function K6(e){const{parentProjection:t,projection:n}=e;return t&&n&&ve(YNe({parentProjection:t,projection:n})),n??t}function EL(e){return"filter"in e}function lIe(e){return(e==null?void 0:e.stop)!==void 0}function tte(e){return"lookup"in e}function uIe(e){return"data"in e}function cIe(e){return"param"in e}function fIe(e){return"pivot"in e}function dIe(e){return"density"in e}function hIe(e){return"quantile"in e}function pIe(e){return"regression"in e}function mIe(e){return"loess"in e}function gIe(e){return"sample"in e}function yIe(e){return"window"in e}function vIe(e){return"joinaggregate"in e}function xIe(e){return"flatten"in e}function _Ie(e){return"calculate"in e}function nte(e){return"bin"in e}function bIe(e){return"impute"in e}function wIe(e){return"timeUnit"in e}function SIe(e){return"aggregate"in e}function CIe(e){return"stack"in e}function EIe(e){return"fold"in e}function kIe(e){return"extent"in e&&!("density"in e)}function RIe(e){return e.map(t=>EL(t)?{filter:yp(t.filter,e$e)}:t)}class TIe extends CL{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=J6(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=J6(t,n),t.encoding){const i={};for(const[r,o]of xc(t.encoding))i[r]=ite(o,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:xc(i).map(([o,a])=>{const{init:s,bind:l,empty:u,...c}=a;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const d of Ai(n.selectionPredicates[o]??{}))d.empty=u!=="none";return{name:o,value:s,select:c,bind:l}})}:t}}function J6(e,t){const{transform:n,...i}=e;if(n){const r=n.map(o=>{if(EL(o))return{filter:jF(o,t)};if(nte(o)&&Gd(o.bin))return{...o,bin:rte(o.bin)};if(tte(o)){const{selection:a,...s}=o.from;return a?{...o,from:{param:a,...s}}:o}return o});return{...i,transform:r}}return e}function ite(e,t){var i,r;const n=ht(e);if(ye(n)&&Gd(n.bin)&&(n.bin=rte(n.bin)),Yd(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:o,...a}=n.scale.domain;n.scale.domain={...a,...o?{param:o}:{}}}if(mC(n))if(fe(n.condition))n.condition=n.condition.map(o=>{const{selection:a,param:s,test:l,...u}=o;return s?o:{...u,test:jF(o,t)}});else{const{selection:o,param:a,test:s,...l}=ite(n.condition,t);n.condition=a?n.condition:{...l,test:jF(n.condition,t)}}return n}function rte(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function jF(e,t){const n=i=>yp(i,r=>{var o;const a=t.emptySelections[r]??!0,s={param:r,empty:a};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):yp(e.test||e.filter,i=>i.selection?n(i.selection):i)}class BF extends CL{map(t,n){const i=n.selections??[];if(t.params&&!nu(t)){const r=[];for(const o of t.params)bL(o)?i.push(o):r.push(o);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),o=[];for(const a of i)if(!a.views||!a.views.length)o.push(a);else for(const s of a.views)(Ie(s)&&(s===t.name||r.includes(s))||fe(s)&&s.map(l=>r.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(a);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=BF.prototype[e];BF.prototype[e]=function(n,i){return t.call(this,n,AIe(n,i))}}function AIe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function ote(e,t){t===void 0&&(t=Xee(e.config));const n=PIe(e,t),{width:i,height:r}=e,o=$Ie(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const FIe=new sIe,MIe=new TIe,NIe=new BF;function PIe(e,t={}){const n={config:t};return NIe.map(FIe.map(MIe.map(e,n),n),n)}function Q6(e){return Ie(e)?{type:e}:e??{}}function $Ie(e,t,n){let{width:i,height:r}=t;const o=nu(e)||wC(e),a={};o?i=="container"&&r=="container"?(a.type="fit",a.contains="padding"):i=="container"?(a.type="fit-x",a.contains="padding"):r=="container"&&(a.type="fit-y",a.contains="padding"):(i=="container"&&(ve(C6("width")),i=void 0),r=="container"&&(ve(C6("height")),r=void 0));const s={type:"pad",...a,...n?Q6(n.autosize):{},...Q6(e.autosize)};if(s.type==="fit"&&!o&&(ve(NNe),s.type="pad"),i=="container"&&!(s.type=="fit"||s.type=="fit-x")&&ve(E6("width")),r=="container"&&!(s.type=="fit"||s.type=="fit-y")&&ve(E6("height")),!fo(s,{type:"pad"}))return s}function OIe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function IIe(e){return e?`fit-${rC(e)}`:"fit"}const LIe=["background","padding"];function eB(e,t){const n={};for(const i of LIe)e&&e[i]!==void 0&&(n[i]=so(e[i]));return t&&(n.params=e.params),n}class iu{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new iu(ht(this.explicit),ht(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return zn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of me(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function ss(e){return{explicit:!0,value:e}}function to(e){return{explicit:!1,value:e}}function ate(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:SC(t,n,i,r)}}function SC(e,t,n,i){return e.explicit&&t.explicit&&ve(yPe(n,i,e.value,t.value)),e}function wc(e,t,n,i,r=SC){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:fo(e.value,t.value)?e:r(e,t,n,i)}class DIe extends iu{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function um(e){return"url"in e}function ov(e){return"values"in e}function ste(e){return"name"in e&&!um(e)&&!ov(e)&&!nc(e)}function nc(e){return e&&(lte(e)||ute(e)||kL(e))}function lte(e){return"sequence"in e}function ute(e){return"sphere"in e}function kL(e){return"graticule"in e}var ln;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ln||(ln={}));function cte(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Jo(r.field),r}function Cd(e,t=!0,n=Ji){if(fe(e)){const i=e.map(r=>Cd(r,t,n));return t?`[${i.join(", ")}]`:i}else if(qd(e))return n(t?_d(e):HPe(e));return t?n(on(e)):e}function zIe(e,t){for(const n of Ai(e.component.selection??{})){const i=n.name;let r=`${i}${Cc}, ${n.resolve==="global"?"true":`{unit: ${Zf(e)}}`}`;for(const o of RC)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(r=o.modifyExpr(e,n,r)));t.push({name:i+yLe,on:[{events:{signal:n.name+Cc},update:`modify(${be(n.name+Ed)}, ${r})`}]})}return RL(t)}function jIe(e,t){if(e.component.selection&&me(e.component.selection).length){const n=be(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Lc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return RL(t)}function BIe(e,t){let n=!1;for(const i of Ai(e.component.selection??{})){const r=i.name,o=be(r+Ed);if(t.filter(s=>s.name===r).length===0){const s=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${Tte}(${o}, ${be(s)}${l}`})}n=!0;for(const s of RC)s.defined(i)&&s.topLevelSignals&&(t=s.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),RL(t)}function HIe(e,t){const n=[...t],i=Zf(e,{escape:!1});for(const r of Ai(e.component.selection??{})){const o={name:r.name+Ed};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Da}}]),r.init){const s=r.project.items.map(cte);o.values=r.project.hasSelectionId?r.init.map(l=>({unit:i,[Da]:Cd(l,!1)[0]})):r.init.map(l=>({unit:i,fields:s,values:Cd(l,!1)}))}n.filter(s=>s.name===r.name+Ed).length||n.push(o)}return n}function fte(e,t){for(const n of Ai(e.component.selection??{}))for(const i of RC)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function UIe(e,t){for(const n of e.children)$n(n)&&(t=fte(n,t));return t}function WIe(e,t,n,i){const r=Pte(e,t.param,t);return{signal:wo(n.get("type"))&&fe(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function RL(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class tn{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ve(GNe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class mr extends tn{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${sQ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function cR(e){return e.as!==void 0}function tB(e){return`${e}_end`}class ws extends tn{clone(){return new ws(null,ht(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,a)=>{const{field:s,timeUnit:l}=o;if(l){let u;if(Vd(l)){if($n(n)){const{mark:c,markDef:d,config:h}=n,m=bc({fieldDef:o,markDef:d,config:h});(rv(c)||m)&&(u={timeUnit:yi(l),field:s})}}else u={as:Te(o,{forAs:!0}),field:s,timeUnit:l};if($n(n)){const{mark:c,markDef:d,config:h}=n,m=bc({fieldDef:o,markDef:d,config:h});rv(c)&&jn(a)&&m!==.5&&(u.rectBandPosition=m)}u&&(r[Ft(u)]=u)}return r},{});return rn(i)?null:new ws(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},o=yi(i),a={...r,timeUnit:o};return new ws(t,{[Ft(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of xc(this.timeUnits)){const o=cR(r)?r.as:`${r.field}_end`;t.has(o)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Ai(this.timeUnits).map(t=>cR(t)?t.as:tB(t.field)))}dependentFields(){return new Set(Ai(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ft(this.timeUnits)}`}assemble(){const t=[];for(const n of Ai(this.timeUnits)){const{rectBandPosition:i}=n,r=yi(n.timeUnit);if(cR(n)){const{field:o,as:a}=n,{unit:s,utc:l,...u}=r,c=[a,`${a}_end`];t.push({field:Jo(o),type:"timeunit",...s?{units:lC(s)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...nB(c,i,r))}else if(n){const{field:o}=n,a=o.replaceAll("\\.","."),s=dte({timeUnit:r,field:a}),l=tB(a);t.push({type:"formula",expr:s,as:l}),t.push(...nB([a,l],i,r))}}return t}}const CC="offsetted_rect_start",EC="offsetted_rect_end";function dte({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,o=UQ(i),{part:a,step:s}=VQ(o,e.step);return`${r?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function nB([e,t],n,i){if(n!==void 0&&n!==.5){const r=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:iB([dte({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${CC}`},{type:"formula",expr:iB([r,o],n+.5),as:`${e}_${EC}`}]}return[]}function iB([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const a1="_tuple_fields";class GIe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const qIe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new GIe),o={},a={},s=new Set,l=(g,y)=>{const v=y==="visual"?g.channel:g.field;let _=Sn(`${i}_${v}`);for(let b=1;s.has(_);b++)_=Sn(`${i}_${v}_${b}`);return s.add(_),{[y]:_}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?Oe(n.value):null;let{fields:h,encodings:m}=Le(n.select)?n.select:{};if(!h&&!m&&d){for(const g of d)if(Le(g))for(const y of me(g))sNe(y)?(m||(m=[])).push(y):u==="interval"?(ve(BNe),m=c.encodings):(h??(h=[])).push(y)}!h&&!m&&(m=c.encodings,"fields"in c&&(h=c.fields));for(const g of m??[]){const y=e.fieldDef(g);if(y){let v=y.field;if(y.aggregate){ve(PNe(g,y.aggregate));continue}else if(!v){ve(R6(g));continue}if(y.timeUnit&&!Vd(y.timeUnit)){v=e.vgField(g);const _={timeUnit:y.timeUnit,as:v,field:y.field};a[Ft(_)]=_}if(!o[v]){const _=u==="interval"&&tu(g)&&wo(e.getScaleComponent(g).get("type"))?"R":y.bin?"R-RE":"E",b={field:v,channel:g,type:_,index:r.items.length};b.signals={...l(b,"data"),...l(b,"visual")},r.items.push(o[v]=b),r.hasField[v]=o[v],r.hasSelectionId=r.hasSelectionId||v===Da,hQ(g)?(b.geoChannel=g,b.channel=dQ(g),r.hasChannel[b.channel]=o[v]):r.hasChannel[g]=o[v]}}else ve(R6(g))}for(const g of h??[]){if(r.hasField[g])continue;const y={type:"E",field:g,index:r.items.length};y.signals={...l(y,"data")},r.items.push(y),r.hasField[g]=y,r.hasSelectionId=r.hasSelectionId||g===Da}d&&(t.init=d.map(g=>r.items.map(y=>Le(g)?g[y.geoChannel||y.channel]!==void 0?g[y.geoChannel||y.channel]:g[y.field]:g))),rn(a)||(r.timeUnit=new ws(null,a))},signals:(e,t,n)=>{const i=t.name+a1;return n.filter(o=>o.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(cte)})}},Pl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!tu(r))continue;const o=e.getScaleComponent(r),a=o?o.get("type"):void 0;if(!o||!wo(a)){ve(INe);continue}o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||rB(e)||i.length===0)return n;const r=n.filter(a=>a.name===t.name)[0];let o=r.update;if(o.indexOf(Tte)>=0)r.update=`{${i.map(a=>`${be(Jo(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of i){const s=`${be(Jo(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}r.update=o}return n.concat(i.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!rB(e))for(const i of t.scales){const r=n.filter(o=>o.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function HF(e,t){return`domain(${be(e.scaleName(t))})`}function rB(e){return e.parent&&Gm(e.parent)&&!e.parent.parent}const _p="_brush",hte="_scale_trigger",Zg="geo_interval_init_tick",pte="_init",VIe="_center",YIe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...Le(n.select)?n.select:{}};r.fields=[Da],r.encodings||(r.encodings=n.value?me(n.value):[Ga,Wa]),n.select={type:"interval",...r}}if(t.translate&&!Pl.defined(t)){const r=`!event.item || event.item.mark.name !== ${be(t.name+_p)}`;for(const o of t.events){if(!o.between){ve(`${o} is not an ordered event stream for interval selections.`);continue}const a=Oe((i=o.between[0]).filter??(i.filter=[]));a.indexOf(r)<0&&a.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+Cc,o=Ai(t.project.hasChannel).filter(s=>s.channel===Cn||s.channel===_i),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,l)=>s.concat(ZIe(e,t,l,a&&a[l.index])),[])),e.hasProjection){const s=be(e.projectionName()),l=e.projectionName()+VIe,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,h=c&&c.signals.visual,m=u?a&&a[u.index]:`${l}[0]`,g=c?a&&a[c.index]:`${l}[1]`,y=R=>e.getSizeSignalRef(R).signal,v=`[[${d?d+"[0]":"0"}, ${h?h+"[0]":"0"}],[${d?d+"[1]":y("width")}, ${h?h+"[1]":y("height")}]]`;a&&(n.unshift({name:i+pte,init:`[scale(${s}, [${u?m[0]:m}, ${c?g[0]:g}]), scale(${s}, [${u?m[1]:m}, ${c?g[1]:g}])]`}),(!u||!c)&&(n.find(F=>F.name===l)||n.unshift({name:l,update:`invert(${s}, [${y("width")}/2, ${y("height")}/2])`})));const _=`intersect(${v}, {markname: ${be(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Zf(e)}}`,S=`vlSelectionTuples(${_}, ${b})`,k=o.map(R=>R.signals.visual);return n.concat({name:r,on:[{events:[...k.length?[{signal:k.join(" || ")}]:[],...a?[{signal:Zg}]:[]],update:S}]})}else{if(!Pl.defined(t)){const u=i+hte,c=o.map(d=>{const h=d.channel,{data:m,visual:g}=d.signals,y=be(e.scaleName(h)),v=e.getScaleComponent(h).get("type"),_=wo(v)?"+":"";return`(!isArray(${m}) || (${_}invert(${y}, ${g})[0] === ${_}${m}[0] && ${_}invert(${y}, ${g})[1] === ${_}${m}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const s=o.map(u=>u.signals.data),l=`unit: ${Zf(e)}, fields: ${i+a1}, values`;return n.concat({name:r,...a?{init:`{${l}: ${Cd(a)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>($n(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===Zg).length||n.unshift({name:Zg,value:null,on:[{events:"timer{1}",update:`${Zg} === null ? {} : ${Zg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,a=r==null?void 0:r.signals.visual,s=o==null?void 0:o.signals.visual,l=`data(${be(t.name+Ed)})`;if(Pl.defined(t)||!r&&!o)return n;const u={x:r!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:r!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of me(u))u[y]=[{test:`${l}.length && ${l}[0].unit === ${Zf(e)}`,...u[y]},{value:0}];const{fill:c,fillOpacity:d,cursor:h,...m}=t.mark,g=me(m).reduce((y,v)=>(y[v]=[{test:[r!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(_=>_).join(" && "),value:m[v]},{value:null}],y),{});return[{name:`${i+_p}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:i+_p,type:"rect",clip:!0,encode:{enter:{...h?{cursor:{value:h}}:{},fill:{value:"transparent"}},update:{...u,...g}}}]}};function ZIe(e,t,n,i){const r=!e.hasProjection,o=n.channel,a=n.signals.visual,s=be(r?e.scaleName(o):e.projectionName()),l=h=>`scale(${s}, ${h})`,u=e.getSizeSignalRef(o===Cn?"width":"height").signal,c=`${o}(unit)`,d=t.events.reduce((h,m)=>[...h,{events:m.between[0],update:`[${c}, ${c}]`},{events:m,update:`[${a}[0], clamp(${c}, 0, ${u})]`}],[]);if(r){const h=n.signals.data,m=Pl.defined(t),g=e.getScaleComponent(o),y=g?g.get("type"):void 0,v=i?{init:Cd(i,!0,l)}:{value:[]};return d.push({events:{signal:t.name+hte},update:wo(y)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),m?[{name:h,on:[]}]:[{name:a,...v,on:d},{name:h,...i?{init:Cd(i)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]}]}else{const h=o===Cn?0:1,m=t.name+pte,g=i?{init:`[${m}[0][${h}], ${m}[1][${h}]]`}:{value:[]};return[{name:a,...g,on:d}]}}const XIe={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,r=i+a1,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=Ai(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+_p):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let u=`unit: ${Zf(e)}, `;if(t.project.hasSelectionId)u+=`${Da}: ${a}[${be(Da)}]`;else{const d=o.items.map(h=>{const m=e.fieldDef(h.channel);return m!=null&&m.bin?`[${a}[${be(e.vgField(h.channel,{}))}], ${a}[${be(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${a}[${be(h.field)}]`}).join(", ");u+=`fields: ${r}, values: [${d}]`}const c=t.events;return n.concat([{name:i+Cc,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function Bm(e,t,n,i){const r=mC(t)&&t.condition,o=i(t);if(r){const s=Oe(r).map(l=>{const u=i(l);if(j$e(l)){const{param:c,empty:d}=l;return{test:Nte(e,{param:c,empty:d}),...u}}else return{test:Xw(e,l.test),...u}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function TL(e,t="text"){const n=e.encoding[t];return Bm(e,n,t,i=>kC(i,e.config))}function kC(e,t,n="datum"){if(e){if(La(e))return gn(e.value);if(mt(e)){const{format:i,formatType:r}=Uw(e);return sL({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function mte(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,a=n.tooltip;if(fe(a))return{tooltip:oB({tooltip:a},o,r,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Bm(e,a,"tooltip",l=>{const u=kC(l,r,s);if(u)return u;if(l===null)return;let c=Kt("tooltip",i,r);if(c===!0&&(c={content:"encoding"}),Ie(c))return{value:c};if(Le(c))return Ve(c)?c:c.content==="encoding"?oB(n,o,r,t):{signal:s}})}}function gte(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},o={},a=i?"datum.datum":"datum",s=[];function l(c,d){const h=Wd(d),m=vr(c)?c:{...c,type:e[h].type},g=m.title||fL(m,r),y=Oe(g).join(", ").replaceAll(/"/g,'\\"');let v;if(jn(d)){const _=d==="x"?"x2":"y2",b=Ns(e[_]);if(Ci(m.bin)&&b){const S=Te(m,{expr:a}),k=Te(b,{expr:a}),{format:R,formatType:F}=Uw(m);v=t1(S,k,R,F,r),o[_]=!0}}if((jn(d)||d===ta||d===Ua)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:_,formatType:b}=Uw(m);v=sL({fieldOrDatumDef:m,format:_,formatType:b,expr:a,config:r,normalizeStack:!0}).signal}v??(v=kC(m,r,a).signal),s.push({channel:d,key:y,value:v})}pL(e,(c,d)=>{ye(c)?l(c,d):gC(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:h}of s)!o[c]&&!u[d]&&(u[d]=h);return u}function oB(e,t,n,{reactiveGeom:i}={}){const r=gte(e,t,n,{reactiveGeom:i}),o=xc(r).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function KIe(e){const{markDef:t,config:n}=e,i=Kt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...JIe(e),...QIe(e)}}function JIe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=Kt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in ANe?{}:{ariaRoleDescription:{value:t}}}function QIe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return Bm(e,o,"description",l=>kC(l,e.config));const a=Kt("description",n,i);if(a!=null)return{description:gn(a)};if(i.aria===!1)return{};const s=gte(t,r,i);if(!rn(s))return{description:{signal:xc(s).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function ci(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;s===void 0&&(l??(l=Kt(e,i,o,{vgChannel:a,ignoreVgConfig:!0})),l!==void 0&&(s=gn(l)));const u=r[e];return Bm(t,u,a??e,c=>aL({channel:e,channelDef:c,markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function yte(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:o}=n,a=t.filled??Kt("filled",n,r),s=Mt(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Kt(a===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[a===!0&&"color"]??s,u=Kt(a===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[a===!1&&"color"],c=a?"fill":"stroke",d={...l?{fill:gn(l)}:{},...u?{stroke:gn(u)}:{}};return n.color&&(a?n.fill:n.stroke)&&ve($Q("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...ci("color",e,{vgChannel:c,defaultValue:a?l:u}),...ci("fill",e,{defaultValue:i.fill?l:void 0}),...ci("stroke",e,{defaultValue:i.stroke?u:void 0})}}function eLe(e){const{encoding:t,mark:n}=e,i=t.order;return!Gc(n)&&La(i)?Bm(e,i,"zindex",r=>gn(r.value)):{}}function cm({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:aL({channel:o,channelDef:s,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:gn(a),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Gi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:a,stack:s}=t,l=r[e],u=r[Ws(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:h,offsetType:m}=cm({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),g=AL({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),y=!l&&jn(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:tLe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:a,scaleName:c,scale:d,stack:s,offset:h,defaultRef:g,bandPosition:m==="encoding"?0:void 0});return y?{[i||e]:y}:void 0}function tLe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:a}=e;if(mt(n)&&r&&t===r.fieldChannel){if(ye(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return jw({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return Vf(n,i,{suffix:"end"},{offset:o})}return rL(e)}function AL({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:a}=e;return()=>{const s=Wd(n),l=_c(n),u=Kt(n,o,a,{vgChannel:l});if(u!==void 0)return iy(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const c=r.get("type");if(!Mt([Gr.LOG,Gr.TIME,Gr.UTC],c)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Kr(n)],mult:.5}}}}const nLe={left:"x",center:"xc",right:"x2"},iLe={top:"y",middle:"yc",bottom:"y2"};function vte(e,t,n,i="middle"){if(e==="radius"||e==="theta")return _c(e);const r=e==="x"?"align":"baseline",o=Kt(r,t,n);let a;return Ve(o)?(ve(aPe(r)),a=void 0):a=o,e==="x"?nLe[a||(i==="top"?"left":"center")]:iLe[a||i]}function Yw(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?xte(e,t,{defaultPos:n,defaultPos2:i}):Gi(e,t,{defaultPos:n})}function xte(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,a=Ws(e),s=Kr(e),l=rLe(t,i,a),u=l[s]?vte(e,r,o):_c(e);return{...Gi(e,t,{defaultPos:n,vgChannel:u}),...l}}function rLe(e,t,n){const{encoding:i,mark:r,markDef:o,stack:a,config:s}=e,l=Wd(n),u=Kr(n),c=_c(n),d=i[l],h=e.scaleName(l),m=e.getScaleComponent(l),{offset:g}=n in i||n in o?cm({channel:n,markDef:o,encoding:i,model:e}):cm({channel:l,markDef:o,encoding:i,model:e});if(!d&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const v=Kr(n),_=e.markDef[v];return _!=null?{[v]:{value:_}}:{[c]:{field:e.getName(n)}}}const y=oLe({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:s,scaleName:h,scale:m,stack:a,offset:g,defaultRef:void 0});return y!==void 0?{[c]:y}:Hx(n,o)||Hx(n,{[n]:Lw(n,o,s.style),[u]:Lw(u,o,s.style)})||Hx(n,s[r])||Hx(n,s.mark)||{[c]:AL({model:e,defaultPos:t,channel:n,scaleName:h,scale:m})()}}function oLe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){return mt(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Vf(t,o,{suffix:"start"},{offset:l}):rL({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:i,config:r,offset:l,defaultRef:u})}function Hx(e,t){const n=Kr(e),i=_c(e);if(t[i]!==void 0)return{[i]:iy(e,t[i])};if(t[e]!==void 0)return{[i]:iy(e,t[e])};if(t[n]){const r=t[n];if(wd(r))ve(ePe(n));else return{[n]:iy(e,r)}}}function Sc(e,t){const{config:n,encoding:i,markDef:r}=e,o=r.type,a=Ws(t),s=Kr(t),l=i[t],u=i[a],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,h=r.orient,m=i[s]??i.size??Kt("size",r,n,{vgChannel:s}),g=yQ(t),y=o==="bar"&&(t==="x"?h==="vertical":h==="horizontal");return ye(l)&&(fn(l.bin)||Ci(l.bin)||l.timeUnit&&!u)&&!(m&&!wd(m))&&!i[g]&&!vi(d)?lLe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(mt(l)&&vi(d)||y)&&!u?sLe(l,t,e):xte(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function aLe(e,t,n,i,r,o,a){if(wd(r))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;r.band!==1&&(u=`${r.band} * ${u}`);const c=ql("minBandSize",{type:a},i);return{signal:c?`max(${Ea(c)}, ${u})`:u}}else r.band!==1&&(ve(cPe(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ve(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Wc(l)&&jt(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c}=i.scale,d=zn(l,a==="bar"?u:c);if(Ve(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(jt(d))return{signal:`${1-d} * ${e}`}}return{value:qw(i.view,e)-2}}function sLe(e,t,n){var B,O;const{markDef:i,encoding:r,config:o,stack:a}=n,s=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=Kr(t),d=Ws(t),h=yQ(t),m=n.scaleName(h),g=n.getScaleComponent(OI(t)),y=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let v;(r.size||i.size)&&(y?v=ci("size",n,{vgChannel:c,defaultRef:gn(i.size)}):ve(pPe(i.type)));const _=!!v,b=mee({channel:t,fieldDef:e,markDef:i,config:o,scaleType:(B=u||g)==null?void 0:B.get("type"),useVlSizeChannel:y});v=v||{[c]:aLe(c,m||l,g||u,o,b,!!e,i.type)};const S=((O=u||g)==null?void 0:O.get("type"))==="band"&&wd(b)&&!_?"top":"middle",k=vte(t,i,o,S),R=k==="xc"||k==="yc",{offset:F,offsetType:T}=cm({channel:t,markDef:i,encoding:r,model:n,bandPosition:R?.5:0}),P=rL({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:a,offset:F,defaultRef:AL({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:R?T==="encoding"?0:.5:Ve(b)?{signal:`(1-${b})/2`}:wd(b)?(1-b.band)/2:0});if(c)return{[k]:P,...v};{const D=_c(d),W=v[c],j=F?{...W,offset:F}:W;return{[k]:P,[D]:fe(P)?[P[0],{...P[1],offset:j}]:{...P,offset:j}}}}function aB(e,t,n,i,r,o,a){if(fQ(e))return 0;const s=e==="x"||e==="y2",l=s?-t/2:t/2;if(Ve(n)||Ve(r)||Ve(i)||o){const u=Ea(n),c=Ea(r),d=Ea(i),h=Ea(o),g=o?`(${a} < ${h} ? ${s?"":"-"}0.5 * (${h} - (${a})) : ${l})`:l,y=d?`${d} + `:"",v=u?`(${u} ? -1 : 1) * `:"",_=c?`(${c} + ${g})`:g;return{signal:y+v+_}}else return r=r||0,i+(n?-r-l:+r+l)}function lLe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var O;const{config:r,markDef:o,encoding:a}=i,s=i.getScaleComponent(n),l=i.scaleName(n),u=s?s.get("type"):void 0,c=s.get("reverse"),d=mee({channel:n,fieldDef:e,markDef:o,config:r,scaleType:u}),h=(O=i.component.axes[n])==null?void 0:O[0],m=(h==null?void 0:h.get("translate"))??.5,g=jn(n)?Kt("binSpacing",o,r)??0:0,y=Ws(n),v=_c(n),_=_c(y),b=ql("minBandSize",o,r),{offset:S}=cm({channel:n,markDef:o,encoding:a,model:i,bandPosition:0}),{offset:k}=cm({channel:y,markDef:o,encoding:a,model:i,bandPosition:0}),R=O$e({fieldDef:e,scaleName:l}),F=aB(n,g,c,m,S,b,R),T=aB(y,g,c,m,k??S,b,R),P=Ve(d)?{signal:`(1-${d.signal})/2`}:wd(d)?(1-d.band)/2:.5,B=bc({fieldDef:e,fieldDef2:t,markDef:o,config:r});if(fn(e.bin)||e.timeUnit){const D=e.timeUnit&&B!==.5;return{[_]:sB({fieldDef:e,scaleName:l,bandPosition:P,offset:T,useRectOffsetField:D}),[v]:sB({fieldDef:e,scaleName:l,bandPosition:Ve(P)?{signal:`1-${P.signal}`}:1-P,offset:F,useRectOffsetField:D})}}else if(Ci(e.bin)){const D=Vf(e,l,{},{offset:T});if(ye(t))return{[_]:D,[v]:Vf(t,l,{},{offset:F})};if(Gd(e.bin)&&e.bin.step)return{[_]:D,[v]:{signal:`scale("${l}", ${Te(e,{expr:"datum"})} + ${e.bin.step})`,offset:F}}}ve(LQ(y))}function sB({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return jw({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:CC,endSuffix:EC}:{}})}const uLe=new Set(["aria","width","height"]);function na(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?yte(e):{};return{...cLe(e.markDef,t),...lB(e,"fill",n),...lB(e,"stroke",i),...ci("opacity",e),...ci("fillOpacity",e),...ci("strokeOpacity",e),...ci("strokeWidth",e),...ci("strokeDash",e),...eLe(e),...mte(e),...TL(e,"href"),...KIe(e)}}function lB(e,t,n){const{config:i,mark:r,markDef:o}=e;if(Kt("invalid",o,i)==="hide"&&n&&!Gc(r)){const s=fLe(e,{invalid:!0,channels:oC});if(s)return{[t]:[{test:s,value:null},...Oe(n)]}}return n?{[t]:n}:{}}function cLe(e,t){return TNe.reduce((n,i)=>(!uLe.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=gn(e[i])),n),{})}function fLe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const l=s.get("type"),u=e.vgField(a,{expr:"datum"});u&&wo(l)&&(o[u]=!0)}return o},{}),r=me(i);if(r.length>0){const o=t?"||":"&&";return r.map(a=>oL(a,t)).join(` ${o} `)}}function FL(e){const{config:t,markDef:n}=e;if(Kt("invalid",n,t)){const r=dLe(e,{channels:Gs});if(r)return{defined:{signal:r}}}return{}}function dLe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,a)=>{var l;const s=e.getScaleComponent(a);if(s){const u=s.get("type"),c=e.vgField(a,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&wo(u)&&(o[c]=!0)}return o},{}),r=me(i);if(r.length>0){const o=t?"||":"&&";return r.map(a=>oL(a,t)).join(` ${o} `)}}function uB(e,t){if(t!==void 0)return{[e]:gn(t)}}const fR="voronoi",_te={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(fR)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(Gc(o))return ve($Ne(o)),n;const a={name:e.getName(fR),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...mte(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?s=c:d.indexOf(fR)>=0&&(l=!0)}),l||n.splice(s+1,0,a),n}},bte={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!_L(e.bind),parse:(e,t,n)=>Ate(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,a=t.init&&t.init[0],s=_te.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{const c=Sn(`${i}_${l.field}`);n.filter(h=>h.name===c).length||n.unshift({name:c,...a?{init:Cd(a[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${be(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.filter(u=>u.name===i+Cc)[0],a=i+a1,s=r.items.map(u=>Sn(`${i}_${u.field}`)),l=s.map(u=>`${u} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},Zw="_toggle",wte={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Zw,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Cc,i=t.name+Zw;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Zf(e)}}, `)+`${i} ? ${n} : null`}},hLe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Ie(t.clear)?Lc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(bte.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===Sn(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const r of t.project.items){const o=n.findIndex(a=>a.name===r.signals.visual);if(i(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===r.signals.data);i(a,"null")}}else{let r=n.findIndex(o=>o.name===t.name+Cc);i(r,"null"),wte.defined(t)&&(r=n.findIndex(o=>o.name===t.name+Zw),i(r,"false"))}return n}},Ste={defined:e=>{const t=e.resolve==="global"&&e.bind&&_L(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Da;return t&&!n&&ve(LNe),t&&n},parse:(e,t,n)=>{const i=ht(n);if(i.select=Ie(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},Ate(t,i),Le(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of t.events)s.filter=Oe(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}const r=sR(t.bind)?t.bind.legend:"click",o=Ie(r)?Lc(r,"view"):Oe(r);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=sR(t.bind)&&t.bind.legend,o=a=>s=>{const l=ht(s);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${Sn(a.field)}_legend`,l=`${i}_${s}`;if(n.filter(c=>c.name===l).length===0){const c=r.merge.map(o(`${s}_symbols`)).concat(r.merge.map(o(`${s}_labels`))).concat(r.merge.map(o(`${s}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(h=>h.name===i+Cc),a=i+a1,s=r.items.filter(h=>h.hasLegend).map(h=>Sn(`${i}_${Sn(h.field)}_legend`)),u=`${s.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(h=>({signal:h})),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(h=>h.name===i+Zw),d=sR(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function pLe(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const o of Ai(e.component.selection??{})){const a=o.project.hasField[i]??o.project.hasChannel[t];if(a&&Ste.defined(o)){const s=n.get("selections")??[];s.push(o.name),n.set("selections",s,!1),a.hasLegend=!0}}}const Cte="_translate_anchor",Ete="_translate_delta",mLe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Pl.defined(t),o=i+Cte,{x:a,y:s}=t.project.hasChannel;let l=Lc(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+_p,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${r?HF(e,Cn):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${r?HF(e,_i):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:i+Ete,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&cB(e,t,a,"width",n),s!==void 0&&cB(e,t,s,"height",n),n}};function cB(e,t,n,i,r){const o=t.name,a=o+Cte,s=o+Ete,l=n.channel,u=Pl.defined(t),c=r.filter(R=>R.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(i).signal,h=e.getScaleComponent(l),m=h&&h.get("type"),g=h&&h.get("reverse"),y=u?l===Cn?g?"":"-":g?"-":"":"",v=`${a}.extent_${l}`,_=`${y}${s}.${l} / ${u?`${d}`:`span(${v})`}`,b=!u||!h?"panLinear":m==="log"?"panLog":m==="symlog"?"panSymlog":m==="pow"?"panPow":"panLinear",S=u?m==="pow"?`, ${h.get("exponent")??1}`:m==="symlog"?`, ${h.get("constant")??1}`:"":"",k=`${b}(${v}, ${_}${S})`;c.on.push({events:{signal:s},update:u?k:`clampRange(${k}, 0, ${d})`})}const kte="_zoom_anchor",Rte="_zoom_delta",gLe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Pl.defined(t),o=i+Rte,{x:a,y:s}=t.project.hasChannel,l=be(e.scaleName(Cn)),u=be(e.scaleName(_i));let c=Lc(t.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+_p,d))),n.push({name:i+kte,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&fB(e,t,a,"width",n),s!==void 0&&fB(e,t,s,"height",n),n}};function fB(e,t,n,i,r){const o=t.name,a=n.channel,s=Pl.defined(t),l=r.filter(b=>b.name===n.signals[s?"data":"visual"])[0],u=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(a),d=c&&c.get("type"),h=s?HF(e,a):l.name,m=o+Rte,g=`${o}${kte}.${a}`,y=!s||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",v=s?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",_=`${y}(${h}, ${g}, ${m}${v})`;l.on.push({events:{signal:m},update:s?_:`clampRange(${_}, 0, ${u})`})}const Ed="_store",Cc="_tuple",yLe="_modify",Tte="vlSelectionResolve",RC=[XIe,YIe,qIe,wte,bte,Pl,Ste,hLe,mLe,gLe,_te];function vLe(e){let t=e.parent;for(;t&&!Na(t);)t=t.parent;return t}function Zf(e,{escape:t}={escape:!0}){let n=t?be(e.name):e.name;const i=vLe(e);if(i){const{facet:r}=i;for(const o of zo)r[o]&&(n+=` + '__facet_${o}_' + (facet[${be(i.vgField(o))}])`)}return n}function ML(e){return Ai(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Ate(e,t){(Ie(t.select)||!t.select.on)&&delete e.events,(Ie(t.select)||!t.select.clear)&&delete e.clear,(Ie(t.select)||!t.select.toggle)&&delete e.toggle}function UF(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...UF(e.object)),t.push(...UF(e.property))),t)}function Fte(e){return e.object.type==="MemberExpression"?Fte(e.object):e.object.name==="datum"}function Mte(e){const t=XO(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&Fte(i)&&n.add(UF(i).slice(1).join("."))}),n}class Hm extends tn{clone(){return new Hm(null,this.model,ht(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Xw(this.model,this.filter,this),this._dependentFields=Mte(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function xLe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const o=Sn(r.name),a=r.select,s=Ie(a)?a:a.type,l=Le(a)?ht(a):{type:s},u=i[s];for(const h in u)h==="fields"||h==="encodings"||(h==="mark"&&(l[h]={...u[h],...l[h]}),(l[h]===void 0||l[h]===!0)&&(l[h]=ht(u[h]??l[h])));const c=n[o]={...l,name:o,type:s,init:r.value,bind:r.bind,events:Ie(l.on)?Lc(l.on,"scope"):Oe(ht(l.on))},d=ht(r);for(const h of RC)h.defined(c)&&h.parse&&h.parse(e,c,d)}return n}function Nte(e,t,n,i="datum"){const r=Ie(t)?t:t.param,o=Sn(r),a=be(o+Ed);let s;try{s=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(s.project.timeUnit){const h=n??e.component.data.raw,m=s.project.timeUnit.clone();h.parent?m.insertAsParentOf(h):h.parent=m}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=s.resolve==="global"?")":`, ${be(s.resolve)})`,c=`${l}${a}, ${i}${u}`,d=`length(data(${a}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function Pte(e,t,n){const i=Sn(t),r=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!o)o=a.project.items[0].field,a.project.items.length>1&&ve(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${be(o)}.`);else if(r&&!o){const s=a.project.items.filter(l=>l.channel===r);!s.length||s.length>1?(o=a.project.items[0].field,ve((s.length?"Multiple ":"No ")+`matching ${be(r)} encoding found for selection ${be(n.param)}. Using "field": ${be(o)}.`)):o=s[0].field}return`${a.name}[${be(Jo(o))}]`}function _Le(e,t){for(const[n,i]of xc(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new mr(new Hm(t,e,{param:n}),r,ln.Lookup,e.component.data.outputNodeRefCounts)}}function Xw(e,t,n){return ny(t,i=>Ie(i)?i:KPe(i)?Nte(e,i,n):ZQ(i))}function bLe(e,t){if(e)return fe(e)&&!ku(e)?e.map(n=>fL(n,t)).join(", "):e}function dR(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function A0(e,t,n,i={header:!1}){var d,h;const{disable:r,orient:o,scale:a,labelExpr:s,title:l,zindex:u,...c}=e.combine();if(!r){for(const m in c){const g=eOe[m],y=c[m];if(g&&g!==t&&g!=="both")delete c[m];else if(o1(y)){const{condition:v,..._}=y,b=Oe(v),S=z6[m];if(S){const{vgProp:k,part:R}=S,F=[...b.map(T=>{const{test:P,...B}=T;return{test:Xw(null,P),...B}}),_];dR(c,R,k,F),delete c[m]}else if(S===null){const k={signal:b.map(R=>{const{test:F,...T}=R;return`${Xw(null,F)} ? ${S6(T)} : `}).join("")+S6(_)};c[m]=k}}else if(Ve(y)){const v=z6[m];if(v){const{vgProp:_,part:b}=v;dR(c,b,_,y),delete c[m]}}Mt(["labelAlign","labelBaseline"],m)&&c[m]===null&&delete c[m]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:m}=c.encode;c.encode={...m?{grid:m}:{}},rn(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zn(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(s!==void 0){let g=s;(h=(d=c.encode)==null?void 0:d.labels)!=null&&h.update&&Ve(c.encode.labels.update.text)&&(g=vd(s,"datum.label",c.encode.labels.update.text.signal)),dR(c,"labels","text",{signal:g})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const g of Eee)e.hasAxisPart(g)||delete c.encode[g];rn(c.encode)&&delete c.encode}const m=bLe(l,n);return{scale:a,orient:o,grid:!1,...m?{title:m}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:zn(u,0)}}}}function $te(e){const{axes:t}=e.component,n=[];for(const i of Gs)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o=i==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function wLe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>A0(r,"grid",t)),...i.map(r=>A0(r,"grid",t)),...n.map(r=>A0(r,"main",t)),...i.map(r=>A0(r,"main",t))].filter(r=>r)}function dB(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...me(a),...me(s)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${Ea(a[c])} : ${Ea(s[c])}`};return u}return t[r]})])}function SLe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:QQ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=Ve(n)?"axisOrient":`axis${Zv(n)}`,s=[...r,...r.map(u=>o+u.substr(4))],l=["axis",a,o];return{vlOnlyAxisConfig:dB(s,i,e,n),vgAxisConfig:dB(l,i,e,n),axisConfigStyle:CLe([...l,...s],i)}}function CLe(e,t){var i;const n=[{}];for(const r of e){let o=(i=t[r])==null?void 0:i.style;if(o){o=Oe(o);for(const a of o)n.push(t.style[a])}}return Object.assign.apply(null,n)}function WF(e,t,n,i={}){var o;const r=RQ(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=i[a])==null?void 0:o[e])!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const hB={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??ELe(n,e),gridScale:({model:e,channel:t})=>kLe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||Ite(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||Ote(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??TLe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??ALe(t.type,n,ye(t)&&!!t.timeUnit,ye(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??MLe({fieldOrDatumDef:i,scaleType:r,size:a,values:n.values})},tickMinStep:NLe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=Lte(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return AQ(r?[L6(r)]:[],ye(a)?[L6(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>PLe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??$Le(n,t)};function ELe(e,t){return!vi(e)&&ye(t)&&!fn(t==null?void 0:t.bin)&&!Ci(t==null?void 0:t.bin)}function kLe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function RLe(e,t,n,i,r){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Ve(o)?o:iv(o);{const{configValue:a}=WF("labelAngle",i,t==null?void 0:t.style,r);return a!==void 0?iv(a):n===Cn&&Mt([eL,QI],e.type)&&!(ye(e)&&e.timeUnit)?270:void 0}}function GF(e){return`(((${e.signal} % 360) + 360) % 360)`}function Ote(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ve(e)){const r=GF(e),o=Ve(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ve(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ve(e)){const r=GF(e),o=Ve(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ve(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Ite(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,o=i?"bottom":"left";if(Ve(e)){const a=GF(e),s=Ve(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${r?`(${a} + 90)`:a} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${a} && ${a} < ${180+r}) === ${s} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ve(t)){const a=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===o)?"left":"right"}function TLe(e,t){if(t==="x"&&Mt(["quantitative","temporal"],e))return!0}function ALe(e,t,n,i){if(n&&!Le(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function FLe(e){return e==="x"?"bottom":"left"}function MLe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!vi(t)&&t!=="log"){if(ye(e)){if(fn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Mt(["month","hours","day","quarter"],(r=yi(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function NLe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ye(t)){const{timeUnit:n}=t;if(n){const i=qQ(n);if(i)return{signal:i}}}}function Lte(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,a=r?r.title:void 0;if(o&&a)return FQ(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function PLe(e,t){const n=e.values;if(fe(n))return Cee(t,n);if(Ve(n))return n}function $Le(e,t){return e==="rect"&&Hw(t)?1:0}class fm extends tn{clone(){return new fm(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Mte(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Yd(i)&&pee(i.sort)){const{field:o,timeUnit:a}=i,s=i.sort,l=s.map((u,c)=>`${ZQ({field:o,timeUnit:a,equal:u})} ? ${c} : `).join("")+s.length;t=new fm(t,{calculate:l,as:dm(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ft(this.transform)}`}}function dm(e,t,n){return Te(e,{prefix:t,suffix:"sort_index",...n??{}})}function TC(e,t){return Mt(["top","bottom"],t)?"column":Mt(["left","right"],t)||e==="row"?"row":"column"}function hm(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return zn((t||{})[e],r[e],n.header[e])}function AC(e,t,n,i){const r={};for(const o of e){const a=hm(o,t||{},n,i);a!==void 0&&(r[o]=a)}return r}const NL=["row","column"],PL=["header","footer"];function OLe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=AC(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=TC(t,s),u=iv(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...zte(u,l),...Dte(l,u,o),...jte(i,r,t,wOe,Hee)}}}function Dte(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=Ite(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function zte(e,t){const n=Ote(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ILe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of PL)if(n[r])for(const o of n[r]){const a=DLe(e,t,r,n,o);a!=null&&i.push(a)}return i}function LLe(e,t){const{sort:n}=e;return bs(n)?{field:Te(n,{expr:"datum"}),order:n.order??"ascending"}:fe(n)?{field:dm(e,t,{expr:"datum"}),order:"ascending"}:{field:Te(e,{expr:"datum"}),order:n??"ascending"}}function qF(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=AC(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=sL({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=TC(t,s);return{text:{signal:l?vd(vd(l,"datum.label",u),"datum.value",Te(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...zte(o,c),...Dte(c,o,a),...jte(n,e,t,SOe,Uee)}}function DLe(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:a}=i,s=e.config?e.config:void 0;if(a&&r.labels){const{labelOrient:d}=AC(["labelOrient"],a.header,s,t);(t==="row"&&!Mt(["top","bottom"],d)||t==="column"&&!Mt(["left","right"],d))&&(o=qF(a,t,s))}const l=Na(e)&&!n1(e.facet),u=r.axes,c=(u==null?void 0:u.length)>0;if(o||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:LLe(a,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const zLe={column:{start:0,end:1},row:{start:1,end:0}};function jLe(e,t){return zLe[t][e]}function BLe(e,t){const n={};for(const i of zo){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:o,titleOrient:a}=AC(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),s=TC(i,a),l=jLe(o,s);l!==void 0&&(n[s]=l)}}return rn(n)?void 0:n}function jte(e,t,n,i,r){const o={};for(const a of i){if(!r[a])continue;const s=hm(a,t==null?void 0:t.header,e,n);s!==void 0&&(o[r[a]]=s)}return o}function $L(e){return[...Ux(e,"width"),...Ux(e,"height"),...Ux(e,"childWidth"),...Ux(e,"childHeight")]}function Ux(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(vi(a)&&Wc(s)){const l=e.scaleName(n);return Na(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[pB(l,s)]:[pB(l,s),{name:r,update:Bte(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const o=r.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=DF(e.config.view,o?"width":"height"),l=`isFinite(${a}) ? ${a} : ${s}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function pB(e,t){const n=`${e}_step`;return Ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Bte(e,t,n){const i=t.get("type"),r=t.get("padding"),o=zn(t.get("paddingOuter"),r);let a=t.get("paddingInner");return a=i==="band"?a!==void 0?a:r:1,`bandspace(${n}, ${Ea(a)}, ${Ea(o)}) * ${e}_step`}function Hte(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Ute(e,t){return me(e).reduce((n,i)=>{const r=e[i];return{...n,...Bm(t,r,i,o=>gn(o.value))}},{})}function Wte(e,t){if(Na(t))return e==="theta"?"independent":"shared";if(Gm(t))return"shared";if(BL(t))return jn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function OL(e,t){const n=e.scale[t],i=jn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ve(xPe(t)),"independent"):e[i][t]||"shared"}const HLe={...kOe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Gte=me(HLe);class ULe extends iu{}const mB={symbols:WLe,gradient:GLe,labels:qLe,entries:VLe};function WLe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){if(o!=="symbol")return;const{markDef:a,encoding:s,config:l,mark:u}=n,c=a.filled&&u!=="trail";let d={...MNe({},n,w$e),...yte(n,{filled:c})};const h=r.get("symbolOpacity")??l.legend.symbolOpacity,m=r.get("symbolFillColor")??l.legend.symbolFillColor,g=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,y=h===void 0?qte(s.opacity)??a.opacity:void 0;if(d.fill){if(i==="fill"||c&&i===Zr)delete d.fill;else if(d.fill.field)m?delete d.fill:(d.fill=gn(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=gn(y??1));else if(fe(d.fill)){const v=VF(s.fill??s.color)??a.fill??(c&&a.color);v&&(d.fill=gn(v))}}if(d.stroke){if(i==="stroke"||!c&&i===Zr)delete d.stroke;else if(d.stroke.field||g)delete d.stroke;else if(fe(d.stroke)){const v=zn(VF(s.stroke||s.color),a.stroke,c?a.color:void 0);v&&(d.stroke={value:v})}}if(i!==eu){const v=ye(t)&&Yte(n,r,t);v?d.opacity=[{test:v,...gn(y??1)},gn(l.legend.unselectedOpacity)]:y&&(d.opacity=gn(y))}return d={...d,...e},rn(d)?void 0:d}function GLe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:o,encoding:a}=t;let s={};const u=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?qte(a.opacity)||o.opacity:void 0;return u&&(s.opacity=gn(u)),s={...s,...e},rn(s)?void 0:s}function qLe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},a=n.config,s=ye(t)?Yte(n,r,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;Sd(c)?d=Ra({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):u===void 0&&c===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?d=Ra({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&ye(t)&&t.timeUnit===void 0&&(d=Ra({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const h={...l?{opacity:l}:{},...d?{text:d}:{},...e};return rn(h)?void 0:h}function VLe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function qte(e){return Vte(e,(t,n)=>Math.max(t,n.value))}function VF(e){return Vte(e,(t,n)=>zn(t,n.value))}function Vte(e,t){if(H$e(e))return Oe(e.condition).reduce(t,e.value);if(La(e))return e.value}function Yte(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=be(n.field);return i.map(o=>`(!length(data(${be(Sn(o)+Ed)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const gB={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return cee(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return fee(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??eDe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??tDe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??ZLe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>xp(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(vp(n)&&ka(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>YLe(t,e)};function YLe(e,t){const n=e.values;if(fe(n))return Cee(t,n);if(Ve(n))return n}function ZLe(e,t,n,i){if(t!=="shape"){const r=VF(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function XLe(e){const{legend:t}=e;return zn(t.type,KLe(e))}function KLe({channel:e,timeUnit:t,scaleType:n}){if(vp(e)){if(Mt(["quarter","month","day"],t))return"symbol";if(ka(n))return"gradient"}return"symbol"}function JLe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??QLe(n,t)}function QLe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function eDe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(ka(r))return n==="horizontal"?i==="top"||i==="bottom"?yB(t,"width",a,o):a:yB(t,"height",l,s)}function yB(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function tDe(e){if(Mt(["quantile","threshold","log","symlog"],e))return"greedy"}function Zte(e){const t=$n(e)?nDe(e):aDe(e);return e.component.legends=t,t}function nDe(e){const{encoding:t}=e,n={};for(const i of[Zr,...Gee]){const r=Qn(t[i]);!r||!e.getScaleComponent(i)||i===Xr&&ye(r)&&r.type===jm||(n[i]=oDe(e,i))}return n}function iDe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function rDe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function oDe(e,t){var k;let n=e.legend(t);const{markDef:i,encoding:r,config:o}=e,a=o.legend,s=new ULe({},iDe(e,t));pLe(e,t,s);const l=n!==void 0?!n:a.disable;if(s.set("disable",l,n!==void 0),l)return s;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Qn(r[t]),d=ye(c)?(k=yi(c.timeUnit))==null?void 0:k.unit:void 0,h=n.orient||o.legend.orient||"right",m=XLe({legend:n,channel:t,timeUnit:d,scaleType:u}),g=JLe({legend:n,legendType:m,orient:h,legendConfig:a}),y={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:u,orient:h,legendType:m,direction:g};for(const R of Gte){if(m==="gradient"&&R.startsWith("symbol")||m==="symbol"&&R.startsWith("gradient"))continue;const F=R in gB?gB[R](y):n[R];if(F!==void 0){const T=rDe(F,R,n,e.fieldDef(t));(T||o.legend[R]===void 0)&&s.set(R,F,T)}}const v=(n==null?void 0:n.encoding)??{},_=s.get("selections"),b={},S={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:m};for(const R of["labels","legend","title","symbols","gradient","entries"]){const F=Ute(v[R]??{},e),T=R in mB?mB[R](F,S):F;T!==void 0&&!rn(T)&&(b[R]={..._!=null&&_.length&&ye(c)?{name:`${Sn(c.field)}_legend_${R}`}:{},..._!=null&&_.length?{interactive:!!_}:{},update:T})}return rn(b)||s.set("encode",b,!!(n!=null&&n.encoding)),s}function aDe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){Zte(i);for(const r of me(i.component.legends))n.legend[r]=OL(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=Xte(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of me(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function Xte(e,t){var o,a,s,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const u of Gte){const c=wc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,h)=>{switch(u){case"symbolType":return sDe(d,h);case"title":return MQ(d,h);case"type":return r=!0,to("symbol")}return SC(d,h,u,"legend")});e.setWithExplicit(u,c)}return r&&((a=(o=e.implicit)==null?void 0:o.encode)!=null&&a.gradient&&Iw(e.implicit,["encode","gradient"]),(l=(s=e.explicit)==null?void 0:s.encode)!=null&&l.gradient&&Iw(e.explicit,["encode","gradient"])),e}function sDe(e,t){return t.value==="circle"?t:e}function lDe(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function Kte(e){const t=e.component.legends,n={};for(const r of me(t)){const o=e.getScaleComponent(r),a=on(o.get("domains"));if(n[a])for(const s of n[a])Xte(s,t[r])||n[a].push(t[r]);else n[a]=[t[r].clone()]}return Ai(n).flat().map(r=>uDe(r,e.config)).filter(r=>r!==void 0)}function uDe(e,t){var a,s,l;const{disable:n,labelExpr:i,selections:r,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(a=o.encode)!=null&&a.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of Gee)o[c]&&delete u[c]}if(o.title||delete o.title,i!==void 0){let u=i;(l=(s=o.encode)==null?void 0:s.labels)!=null&&l.update&&Ve(o.encode.labels.update.text)&&(u=vd(i,"datum.label",o.encode.labels.update.text.signal)),lDe(o,"labels","text",{signal:u})}return o}}function cDe(e){return Gm(e)||BL(e)?fDe(e):Jte(e)}function fDe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Jte(e))}function Jte(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const l=Ve(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Mt(a,l)||a.push(l),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const dDe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Qte extends iu{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function ene(e){e.component.projection=$n(e)?hDe(e):gDe(e)}function hDe(e){if(e.hasProjection){const t=Or(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?pDe(e):void 0,o=new Qte(e.projectionName(!0),{...Or(e.config.projection)??{},...t??{}},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}function pDe(e){const t=[],{encoding:n}=e;for(const i of[[Ga,Wa],[Qo,qa]])(Qn(n[i[0]])||Qn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Xr)&&e.typedFieldDef(Xr).type===jm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ln.Main)),t}function mDe(e,t){const n=RI(dDe,r=>!!(!et(e.explicit,r)&&!et(t.explicit,r)||et(e.explicit,r)&&et(t.explicit,r)&&fo(e.get(r),t.get(r))));if(fo(e.size,t.size)){if(n)return e;if(fo(e.explicit,{}))return t;if(fo(t.explicit,{}))return e}return null}function gDe(e){if(e.children.length===0)return;let t;for(const i of e.children)ene(i);const n=RI(e.children,i=>{const r=i.component.projection;if(r)if(t){const o=mDe(t,r);return o&&(t=o),!!o}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new Qte(i,t.specifiedProjection,t.size,ht(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),i),a.merged=!0)}return r}}function yDe(e,t,n,i){if(r1(t,n)){const r=$n(e)?e.axis(n)??e.legend(n)??{}:{},o=Te(t,{expr:"datum"}),a=Te(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Te(t,{binSuffix:"range",forAs:!0}),formula:t1(o,a,r.format,r.formatType,i)}}return{}}function tne(e,t){return`${SQ(e)}_${t}`}function vDe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function IL(e,t,n){const i=yC(n,void 0)??{},r=tne(i,t);return e.getName(`${r}_bins`)}function xDe(e){return"as"in e}function vB(e,t,n){let i,r;xDe(e)?i=Ie(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[Te(e,{forAs:!0}),Te(e,{binSuffix:"end",forAs:!0})];const o={...yC(t,void 0)},a=tne(o,e.field),{signal:s,extentSignal:l}=vDe(n,a);if(aC(o.extent)){const c=o.extent;r=Pte(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[i],...s?{signal:s}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:a,binComponent:u}}class Ss extends tn{clone(){return new Ss(null,ht(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,a)=>{if(vr(o)&&fn(o.bin)){const{key:s,binComponent:l}=vB(o,o.bin,n);r[s]={...l,...r[s],...yDe(n,o,a,n.config)}}return r},{});return rn(i)?null:new Ss(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=vB(n,n.bin,i);return new Ss(t,{[r]:o})}merge(t,n){for(const i of me(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=hs([...this.bins[i].as,...t.bins[i].as],Ft)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Ai(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ai(this.bins).map(t=>t.field))}hash(){return`Bin ${Ft(this.bins)}`}assemble(){return Ai(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:o,...a}=t.bin,s={type:"bin",field:Jo(t.field),as:i,signal:t.signal,...aC(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!o&&t.extentSignal&&(n.push({type:"extent",field:Jo(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(const l of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:Te({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function _De(e,t,n,i){var o;const r=$n(i)?i.encoding[Ws(t)]:void 0;if(vr(n)&&$n(i)&&gee(n,r,i.markDef,i.config)){e.add(Te(n,{})),e.add(Te(n,{suffix:"end"}));const{mark:a,markDef:s,config:l}=i,u=bc({fieldDef:n,markDef:s,config:l});rv(a)&&u!==.5&&jn(t)&&(e.add(Te(n,{suffix:CC})),e.add(Te(n,{suffix:EC}))),n.bin&&r1(n,t)&&e.add(Te(n,{binSuffix:"range"}))}else if(hQ(t)){const a=dQ(t);e.add(i.getName(a))}else e.add(Te(n));return Yd(n)&&c$e((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function bDe(e,t){for(const n of me(t)){const i=t[n];for(const r of me(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class Ma extends tn{clone(){return new Ma(null,new Set(this.dimensions),ht(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const r={},o=new Set;return!i||(n.forEachFieldDef((a,s)=>{const{aggregate:l,field:u}=a;if(l)if(l==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([Te(a,{forAs:!0})]);else{if(Gl(l)||Uc(l)){const c=Gl(l)?"argmin":"argmax",d=l[c];r[d]??(r[d]={}),r[d][c]=new Set([Te({op:c,field:d},{forAs:!0})])}else r[u]??(r[u]={}),r[u][l]=new Set([Te(a,{forAs:!0})]);tu(s)&&n.scaleDomain(s)==="unaggregated"&&(r[u]??(r[u]={}),r[u].min=new Set([Te({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([Te({field:u,aggregate:"max"},{forAs:!0})]))}else _De(o,s,a,n)}),o.size+me(r).length===0)?null:new Ma(t,o,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const o of n.aggregate){const{op:a,field:s,as:l}=o;a&&(a==="count"?(r["*"]??(r["*"]={}),r["*"].count=new Set([l||Te(o,{forAs:!0})])):(r[s]??(r[s]={}),r[s][a]=new Set([l||Te(o,{forAs:!0})])))}for(const o of n.groupby??[])i.add(o);return i.size+me(r).length===0?null:new Ma(t,i,r)}merge(t){return rQ(this.dimensions,t.dimensions)?(bDe(this.measures,t.measures),!0):(OPe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...me(this.measures)])}producedFields(){const t=new Set;for(const n of me(this.measures))for(const i of me(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ft({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of me(this.measures))for(const a of me(this.measures[o]))for(const s of this.measures[o][a])i.push(s),t.push(a),n.push(o==="*"?null:Jo(o));return{type:"aggregate",groupby:[...this.dimensions].map(Jo),ops:t,fields:n,as:i}}}class Um extends tn{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of zo){const a=n.facet[o];if(a){const{bin:s,sort:l}=a;this[o]={name:n.getName(`${o}_domain`),fields:[Te(a),...fn(s)?[Te(a,{binSuffix:"end"})]:[]],...bs(l)?{sortField:l}:fe(l)?{sortIndexField:dm(a,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of zo)this[n]&&(t+=` ${n.charAt(0)}:${Ft(this[n])}`);return t}get fields(){var n;const t=[];for(const i of zo)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of zo)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Gs){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(vi(r)&&Wc(o)){const a=FC(this.childModel,n),s=jL(a);s?t[n]=s:ve(BI(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),a.push("max")):(o.push(i[r]),a.push("distinct")),s.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=hC,field:d}=l;o.push(d),a.push(c),s.push(Te(l,{forAs:!0}))}else u&&(o.push(u),a.push("max"),s.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:a,as:s}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const u of NL){for(const c of PL){const d=(i[u]&&i[u][c])??[];for(const h of d)if(((l=h.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:a,column:s}=o;return(a||s)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:a}=this;if(r&&o&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const s=[].concat(i.x??[],i.y??[]),l=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(const s of[Nl,Ml])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,i));if(a){const s=this.assembleFacetHeaderData(i);s&&t.push(...s)}return t}}function xB(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function wDe(e,t){const n=FI(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=xB(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=xB(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ve(WNe(t)),null}function SDe(e){const t={};return D_(e.filter,n=>{if(YQ(n)){let i=null;GI(n)?i=so(n.equal):VI(n)?i=so(n.lte):qI(n)?i=so(n.lt):YI(n)?i=so(n.gt):ZI(n)?i=so(n.gte):XI(n)?i=n.range[0]:KI(n)&&(i=(n.oneOf??n.in)[0]),i&&(qd(i)?t[n.field]="date":jt(i)?t[n.field]="number":Ie(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function CDe(e){const t={};function n(i){lm(i)?t[i.field]="date":i.type==="quantitative"&&wNe(i.aggregate)?t[i.field]="number":tm(i.field)>1?i.field in t||(t[i.field]="flatten"):Yd(i)&&bs(i.sort)&&tm(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if(($n(e)||Na(e))&&e.forEachFieldDef((i,r)=>{if(vr(i))n(i);else{const o=Wd(r),a=e.fieldDef(o);n({...i,type:a.type})}}),$n(e)){const{mark:i,markDef:r,encoding:o}=e;if(Gc(i)&&!e.encoding.order){const a=r.orient==="horizontal"?"y":"x",s=o[a];ye(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function EDe(e){const t={};if($n(e)&&e.component.selection)for(const n of me(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&tm(r.field)>1&&(t[r.field]="flatten")}return t}class qi extends tn{clone(){return new qi(null,ht(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ft(this._parse)}`}static makeExplicit(t,n,i){var a;let r={};const o=n.data;return!nc(o)&&((a=o==null?void 0:o.format)!=null&&a.parse)&&(r=o.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const s of me(i)){const l=r.getWithExplicit(s);l.value!==void 0&&(l.explicit||l.value===i[s]||l.value==="derived"||i[s]==="flatten"?delete i[s]:ve(A6(s,i[s],l.value)))}for(const s of me(n)){const l=r.get(s);l!==void 0&&(l===n[s]?delete n[s]:ve(A6(s,n[s],l)))}const o=new iu(n,i);r.copyAll(o);const a={};for(const s of me(o.combine())){const l=o.get(s);l!==null&&(a[s]=l)}return me(a).length===0||r.parseNothing?null:new qi(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of me(this._parse)){const i=this._parse[n];tm(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(me(this._parse))}dependentFields(){return new Set(me(this._parse))}assembleTransforms(t=!1){return me(this._parse).filter(n=>t?tm(n)>1:!0).map(n=>{const i=wDe(n,this._parse[n]);return i?{type:"formula",expr:i,as:MI(n)}:null}).filter(n=>n!==null)}}class Ec extends tn{clone(){return new Ec(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Da])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Da}}}class s1 extends tn{clone(){return new s1(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ft(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class l1 extends tn{clone(){return new l1(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ft(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kd extends tn{constructor(t){super(null),t??(t={name:"source"});let n;if(nc(t)||(n=t.format?{...Wr(t.format,["parse"])}:{}),ov(t))this._data={values:t.values};else if(um(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Mt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else ute(t)?this._data={values:[{type:"Sphere"}]}:(ste(t)||nc(t))&&(this._data={});this._generator=nc(t),t.name&&(this._name=t.name),n&&!rn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var _B=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},kDe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},F0;function LL(e){return e instanceof kd||e instanceof s1||e instanceof l1}class DL{constructor(){F0.set(this,void 0),_B(this,F0,!1,"f")}setModified(){_B(this,F0,!0,"f")}get modifiedFlag(){return kDe(this,F0,"f")}}F0=new WeakMap;class Zd extends DL{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class zL extends DL{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class RDe extends zL{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of me(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class TDe extends zL{constructor(t){super(),this.requiresSelectionId=t&&ML(t)}run(t){t instanceof Ec&&(this.requiresSelectionId&&(LL(t.parent)||t.parent instanceof Ma||t.parent instanceof qi)||(this.setModified(),t.remove()))}}class ADe extends DL{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof ws&&(i=t.producedFields(),TI(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class FDe extends zL{constructor(){super()}run(t){t instanceof mr&&!t.isRequired()&&(this.setModified(),t.remove())}}class MDe extends Zd{run(t){if(!LL(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof qi)if(t instanceof qi)this.setModified(),t.merge(n);else{if(AI(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class NDe extends Zd{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof qi);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const a of i){const s=a.parse;for(const l of me(s))l in r?r[l]!==s[l]&&o.add(l):r[l]=s[l]}for(const a of o)delete r[a];if(!rn(r)){this.setModified();const a=new qi(t,r);for(const s of n){if(s instanceof qi)for(const l of me(r))delete s.parse[l];t.removeChild(s),s.parent=a,s instanceof qi&&me(s.parse).length===0&&s.remove()}}}}}class PDe extends Zd{run(t){t instanceof mr||t.numChildren()>0||t instanceof Um||t instanceof kd||(this.setModified(),t.remove())}}class $De extends Zd{run(t){const n=t.children.filter(r=>r instanceof ws),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class ODe extends Zd{run(t){const n=t.children.filter(r=>r instanceof Ma),i={};for(const r of n){const o=Ft(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of me(i)){const o=i[r];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class IDe extends Zd{constructor(t){super(),this.model=t}run(t){const n=!(LL(t)||t instanceof Hm||t instanceof qi||t instanceof Ec),i=[],r=[];for(const o of t.children)o instanceof Ss&&(n&&!AI(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ss?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class LDe extends Zd{run(t){const n=[...t.children];if(!yd(n,a=>a instanceof mr)||t.numChildren()<=1)return;const r=[];let o;for(const a of n)if(a instanceof mr){let s=a;for(;s.numChildren()===1;){const[l]=s.children;if(l instanceof mr)s=l;else break}r.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else r.push(a);if(r.length){this.setModified();for(const a of r)a.parent.removeChild(a),a.parent=o}}}class Xd extends tn{clone(){return new Xd(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=hs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Te(t)}hash(){return`JoinAggregateTransform ${Ft(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}function DDe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=Te(i);return r&&t.push(r),t},[])}function zDe(e){return fe(e)&&e.every(t=>Ie(t))&&e.length>1}class $l extends tn{clone(){return new $l(null,ht(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:a="zero"}=n,s=[],l=[];if(n.sort!==void 0)for(const d of n.sort)s.push(d.field),l.push(zn(d.order,"ascending"));const u={field:s,order:l};let c;return zDe(o)?c=o:Ie(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new $l(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:l}=i,u=o.map(m=>{const g=r[m];return Ns(g)}).filter(m=>!!m),c=DDe(n),d=n.encoding.order;let h;if(fe(d)||ye(d))h=TQ(d);else{const m=yee(d)?d.sort:a==="y"?"descending":"ascending";h=c.reduce((g,y)=>(g.field.push(y),g.order.push(m),g),{field:[],order:[]})}return new $l(t,{dimensionFieldDefs:u,stackField:n.vgField(a),facetby:[],stackby:c,sort:h,offset:s,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ft(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[Te(r,{binSuffix:"mid"})]:[Te(r,{}),Te(r,{binSuffix:"end"})]:[Te(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:a,offset:s,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:h}=c;if(h){const m=Te(c,{expr:"datum"}),g=Te(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${d}*${m}+${1-d}*${g}`,as:Te(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:Te(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:a,as:u,offset:s}),t}}class Wm extends tn{clone(){return new Wm(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=hs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Te(t)}hash(){return`WindowTransform ${Ft(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(d=>zI(d)))return{type:"joinaggregate",as:i,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const s=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)s.push(d.field),l.push(d.order??"ascending");const u={field:s,order:l},c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...a!==void 0?{groupby:a}:{},...o!==void 0?{frame:o}:{}}}}function jDe(e){function t(n){if(!(n instanceof Um)){const i=n.clone();if(i instanceof mr){const r=ZF+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Ma||i instanceof $l||i instanceof Wm||i instanceof Xd)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function YF(e){if(e instanceof Um)if(e.numChildren()===1&&!(e.children[0]instanceof mr)){const t=e.children[0];(t instanceof Ma||t instanceof $l||t instanceof Wm||t instanceof Xd)&&t.addDimensions(e.fields),t.swapWithParent(),YF(e)}else{const t=e.model.component.data.main;nne(t);const n=jDe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(YF)}function nne(e){if(e instanceof mr&&e.type===ln.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Um||(t.swapWithParent(),nne(e))}}const ZF="scale_",Wx=5;function XF(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!XF(t.children))return!1}return!0}function la(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function bB(e,t,n){let i=e.sources,r=!1;return r=la(new FDe,i)||r,r=la(new TDe(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=la(new PDe,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=la(new MDe,i)||r,r=la(new IDe(t),i)||r,r=la(new ADe,i)||r,r=la(new NDe,i)||r,r=la(new ODe,i)||r,r=la(new $De,i)||r,r=la(new RDe,i)||r,r=la(new LDe,i)||r),e.sources=i,r}function BDe(e,t){XF(e.sources);let n=0,i=0;for(let r=0;r<Wx&&bB(e,t,!0);r++)n++;e.sources.map(YF);for(let r=0;r<Wx&&bB(e,t,!1);r++)i++;XF(e.sources),Math.max(n,i)===Wx&&ve(`Maximum optimization runs(${Wx}) reached.`)}class ui{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ui(()=>t(n))}}function ine(e){$n(e)?HDe(e):UDe(e)}function HDe(e){const t=e.component.scales;for(const n of me(t)){const i=GDe(e,n);if(t[n].setWithExplicit("domains",i),VDe(e,n),e.component.data.isFaceted){let o=e;for(;!Na(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const s of i.value)Cl(s)&&(s.data=ZF+s.data.replace(ZF,""))}}}function UDe(e){for(const n of e.children)ine(n);const t=e.component.scales;for(const n of me(t)){let i,r=null;for(const o of e.children){const a=o.component.scales[n];if(a){i===void 0?i=a.getWithExplicit("domains"):i=wc(i,a.getWithExplicit("domains"),"domains","scale",KF);const s=a.get("selectionExtent");r&&s&&r.param!==s.param&&ve(jNe),r=s}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function WDe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:o}=wB(t,n);if(!r){ve(o);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=wB(t,n);if(r)return"unaggregated"}return e}function GDe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=WDe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&Qn(i.x2)?Qn(i.x)?wc(yu(n,r,e,"x"),yu(n,r,e,"x2"),"domain","scale",KF):yu(n,r,e,"x2"):t==="y"&&Qn(i.y2)?Qn(i.y)?wc(yu(n,r,e,"y"),yu(n,r,e,"y2"),"domain","scale",KF):yu(n,r,e,"y2"):yu(n,r,e,t)}function qDe(e,t,n){return e.map(i=>({signal:`{data: ${vC(i,{timeUnit:n,type:t})}}`}))}function hR(e,t,n){var r;const i=(r=yi(n))==null?void 0:r.unit;return t==="temporal"||i?qDe(e,t,i):[e]}function yu(e,t,n,i){const{encoding:r,markDef:o,mark:a,config:s,stack:l}=n,u=Qn(r[i]),{type:c}=u,d=u.timeUnit;if(u$e(t)){const g=yu(e,void 0,n,i),y=hR(t.unionWith,c,d);return ss([...y,...g.value])}else{if(Ve(t))return ss([t]);if(t&&t!=="unaggregated"&&!tee(t))return ss(hR(t,c,d))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return to([[0,1]]);const g=n.requestDataName(ln.Main);return to([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const h=tu(i)&&ye(u)?YDe(n,i,e):void 0;if(qs(u)){const g=hR([u.datum],c,d);return to(g)}const m=u;if(t==="unaggregated"){const g=n.requestDataName(ln.Main),{field:y}=u;return to([{data:g,field:Te({field:y,aggregate:"min"})},{data:g,field:Te({field:y,aggregate:"max"})}])}else if(fn(m.bin)){if(vi(e))return to(e==="bin-ordinal"?[]:[{data:nv(h)?n.requestDataName(ln.Main):n.requestDataName(ln.Raw),field:n.vgField(i,r1(m,i)?{binSuffix:"range"}:{}),sort:h===!0||!Le(h)?{field:n.vgField(i,{}),op:"min"}:h}]);{const{bin:g}=m;if(fn(g)){const y=IL(n,m.field,g);return to([new ui(()=>{const v=n.getSignalName(y);return`[${v}.start, ${v}.stop]`})])}else return to([{data:n.requestDataName(ln.Main),field:n.vgField(i,{})}])}}else if(m.timeUnit&&Mt(["time","utc"],e)){const g=r[Ws(i)];if(gee(m,g,o,s)){const y=n.requestDataName(ln.Main),v=bc({fieldDef:m,fieldDef2:g,markDef:o,config:s}),_=rv(a)&&v!==.5&&jn(i);return to([{data:y,field:n.vgField(i,_?{suffix:CC}:{})},{data:y,field:n.vgField(i,{suffix:_?EC:"end"})}])}}return to(h?[{data:nv(h)?n.requestDataName(ln.Main):n.requestDataName(ln.Raw),field:n.vgField(i),sort:h}]:[{data:n.requestDataName(ln.Main),field:n.vgField(i)}])}function pR(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":hC),...i?{field:Jo(i)}:{},...r?{order:r}:{}}}function VDe(e,t){var s;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(s=e.fieldDef(t))==null?void 0:s.bin,o=tee(i)&&i,a=Gd(r)&&aC(r.extent)&&r.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function YDe(e,t,n){if(!vi(n))return;const i=e.fieldDef(t),r=i.sort;if(pee(r))return{op:"min",field:dm(i,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(bs(r)){const s=o&&!a.has(r.field);return pR(r,s)}else if(hee(r)){const{encoding:s,order:l}=r,u=e.fieldDef(s),{aggregate:c,field:d}=u,h=o&&!a.has(d);if(Gl(c)||Uc(c))return pR({field:Te(u),order:l},h);if(zI(c)||!c)return pR({op:c,field:d,order:l},h)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Mt(["ascending",void 0],r))return!0}}function wB(e,t){const{aggregate:n,type:i}=e;return n?Ie(n)&&!CNe.has(n)?{valid:!1,reason:dPe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:hPe(e)}:{valid:!0}:{valid:!1,reason:fPe(e)}}function KF(e,t,n,i){return e.explicit&&t.explicit&&ve(vPe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ZDe(e){const t=hs(e.map(a=>{if(Cl(a)){const{sort:s,...l}=a;return l}return a}),Ft),n=hs(e.map(a=>{if(Cl(a)){const s=a.sort;return s!==void 0&&!nv(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),Ft);if(t.length===0)return;if(t.length===1){const a=e[0];if(Cl(a)&&n.length>0){let s=n[0];if(n.length>1){ve(M6);const l=n.filter(u=>Le(u)&&"op"in u&&u.op!=="min");n.every(u=>Le(u)&&"op"in u)&&l.length===1?s=l[0]:s=!0}else if(Le(s)&&"field"in s){const l=s.field;a.field===l&&(s=s.order?{order:s.order}:!0)}return{...a,sort:s}}return a}const i=hs(n.map(a=>nv(a)||!("op"in a)||Ie(a.op)&&a.op in _Ne?a:(ve(_Pe(a)),!0)),Ft);let r;i.length===1?r=i[0]:i.length>1&&(ve(M6),r=!0);const o=hs(e.map(a=>Cl(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(s=>s.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function jL(e){if(Cl(e)&&Ie(e.field))return e.field;if(ENe(e)){let t;for(const n of e.fields)if(Cl(n)&&Ie(n.field)){if(!t)t=n.field;else if(t!==n.field)return ve(bPe),t}return ve(wPe),t}else if(kNe(e)){ve(SPe);const t=e.fields[0];return Ie(t)?t:void 0}}function FC(e,t){const i=e.component.scales[t].get("domains").map(r=>(Cl(r)&&(r.data=e.lookupDataSource(r.data)),r));return ZDe(i)}function rne(e){return Gm(e)||BL(e)?e.children.reduce((t,n)=>t.concat(rne(n)),SB(e)):SB(e)}function SB(e){return me(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u,reverse:c,...d}=r,h=XDe(r.range,o,n,e),m=FC(e,n),g=s?WIe(e,s,i,m):null;return t.push({name:o,type:a,...m?{domain:m}:{},...g?{domainRaw:g}:{},range:h,...c!==void 0?{reverse:c}:{},...d}),t},[])}function XDe(e,t,n,i){if(jn(n)){if(Wc(e))return{step:{signal:`${t}_step`}}}else if(Le(e)&&Cl(e))return{...e,data:i.lookupDataSource(e.data)};return e}class one extends iu{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:yd(this.get("domains"),t=>fe(t)&&t.length===2&&jt(t[0])&&t[0]<=0&&jt(t[1])&&t[1]>=0)}}const KDe=["range","scheme"];function JDe(e){const t=e.component.scales;for(const n of oC){const i=t[n];if(!i)continue;const r=QDe(n,e);i.setWithExplicit("range",r)}}function CB(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,o=Kr(t),a=e.getName(o);if(Le(i)&&i.binned&&i.step!==void 0)return new ui(()=>{const s=e.scaleName(t),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${i.step}`;return`${e.getSignalName(a)} / (${l})`});if(fn(i)){const s=IL(e,r,i);return new ui(()=>{const l=e.getSignalName(s),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${u})`})}}}function QDe(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of KDe)if(n[d]!==void 0){const h=OF(o,d),m=nee(e,d);if(!h)ve(OQ(o,d,e));else if(m)ve(m);else switch(d){case"range":{const g=n.range;if(fe(g)){if(jn(e))return ss(g.map(y=>{if(y==="width"||y==="height"){const v=t.getName(y),_=t.getSignalName.bind(t);return ui.fromName(_,v)}return y}))}else if(Le(g))return ss({data:t.requestDataName(ln.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return ss(g)}case"scheme":return ss(e5e(n[d]))}}const a=e===Cn||e==="xOffset"?"width":"height",s=i[a];if(Ps(s)){if(jn(e))if(vi(o)){const d=sne(s,t,e);if(d)return ss({step:d})}else ve(IQ(a));else if(Jv(e)){const d=e===Dc?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const g=lne(s,o);if(g)return ss(g)}}}const{rangeMin:l,rangeMax:u}=n,c=t5e(e,t);return(l!==void 0||u!==void 0)&&OF(o,"rangeMin")&&fe(c)&&c.length===2?ss([l??c[0],u??c[1]]):to(c)}function e5e(e){return l$e(e)?{scheme:e.name,...Wr(e,["name"])}:{scheme:e}}function ane(e,t,n,{center:i}={}){const r=Kr(e),o=t.getName(r),a=t.getSignalName.bind(t);return e===_i&&wo(n)?i?[ui.fromName(s=>`${a(s)}/2`,o),ui.fromName(s=>`-${a(s)}/2`,o)]:[ui.fromName(a,o),0]:i?[ui.fromName(s=>`-${a(s)}/2`,o),ui.fromName(s=>`${a(s)}/2`,o)]:[0,ui.fromName(a,o)]}function t5e(e,t){const{size:n,config:i,mark:r,encoding:o}=t,{type:a}=Qn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Cn:case _i:{if(Mt(["point","band"],l)){const d=une(e,n,i.view);if(Ps(d))return{step:sne(d,t,e)}}return ane(e,t,l)}case Dc:case zm:return n5e(e,t,l);case Ql:{const d=t.component.scales[e].get("zero"),h=cne(r,d,i),m=o5e(r,n,t,i);return om(l)?r5e(h,m,i5e(l,i,u,e)):[h,m]}case ta:return[0,Math.PI*2];case Ud:return[0,360];case Ua:return[0,new ui(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Bc:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Hc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Xr:return"symbol";case Zr:case Hs:case Us:return l==="ordinal"?a==="nominal"?"category":"ordinal":c!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case eu:case zc:case jc:return[i.scale.minOpacity,i.scale.maxOpacity]}}function sne(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),o=OI(n),a=i[o];if(Vee({step:e,offsetIsDiscrete:mt(a)&&XQ(a.type)})==="offset"&&Tee(i,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const h=l.get("paddingInner")??l.get("padding")??0,m=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${h}, ${m})`}const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${c} / (1-${FNe(d)})`}}else return e.step}function lne(e,t){if(Vee({step:e,offsetIsDiscrete:vi(t)})==="offset")return{step:e.step}}function n5e(e,t,n){const i=e===Dc?"x":"y",r=t.getScaleComponent(i);if(!r)return ane(i,t,n,{center:!0});const o=r.get("type"),a=t.scaleName(i),{markDef:s,config:l}=t;if(o==="band"){const u=une(i,t.size,t.config.view);if(Ps(u)){const c=lne(u,n);if(c)return c}return[0,{signal:`bandwidth('${a}')`}]}else{const u=t.encoding[i];if(ye(u)&&u.timeUnit){const c=qQ(u.timeUnit,g=>`scale('${a}', ${g})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,h=bc({fieldDef:u,markDef:s,config:l})-.5,m=h!==0?` + ${h}`:"";if(d){const g=Ve(d)?`${d.signal}/2`+m:`${d/2+h}`,y=Ve(d)?`(1 - ${d.signal}/2)`+m:`${1-d/2+h}`;return[{signal:`${g} * (${c})`},{signal:`${y} * (${c})`}]}return[0,{signal:c}]}return nQ(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function une(e,t,n){const i=e===Cn?"width":"height",r=t[i];return r||Vw(n,i)}function i5e(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&fe(n)?n.length+1:(ve(NPe(i)),3)}}function r5e(e,t,n){const i=()=>{const r=Ea(t),o=Ea(e),a=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${a}, ${a})`};return Ve(t)?new ui(i):{signal:i()}}function cne(e,t,n){if(t)return Ve(t)?{signal:`${t.signal} ? 0 : ${cne(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(sC("size",e))}const EB=.95;function o5e(e,t,n,i){const r={x:CB(n,"x"),y:CB(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const o=kB(t,r,i.view);return jt(o)?o-1:new ui(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=kB(t,r,i.view);return jt(o)?Math.pow(EB*o,2):new ui(()=>`pow(${EB} * ${o.signal}, 2)`)}}throw new Error(sC("size",e))}function kB(e,t,n){const i=Ps(e.width)?e.width.step:qw(n,"width"),r=Ps(e.height)?e.height.step:qw(n,"height");return t.x||t.y?new ui(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function fne(e,t){$n(e)?a5e(e,t):hne(e,t)}function a5e(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:a}=e;for(const s of me(n)){const l=a[s],u=n[s],c=e.getScaleComponent(s),d=Qn(r[s]),h=l[t],m=c.get("type"),g=c.get("padding"),y=c.get("paddingInner"),v=OF(m,t),_=nee(s,t);if(h!==void 0&&(v?_&&ve(_):ve(OQ(m,t,s))),v&&_===void 0)if(h!==void 0){const b=d.timeUnit,S=d.type;switch(t){case"domainMax":case"domainMin":qd(l[t])||S==="temporal"||b?u.set(t,{signal:vC(l[t],{type:S,timeUnit:b})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const b=t in RB?RB[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:m,scalePadding:g,scalePaddingInner:y,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:Aee(r,s),hasSecondaryRangeChannel:!!r[Ws(s)]}):i.scale[t];b!==void 0&&u.set(t,b,!1)}}}const RB={bins:({model:e,fieldOrDatumDef:t})=>ye(t)?s5e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>l5e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>u5e(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>c5e(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>f5e(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>d5e(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=ye(e)?e.sort:void 0;return h5e(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:a})=>p5e(e,t,n,i,r,o.scale,a)};function dne(e){$n(e)?JDe(e):hne(e,"range")}function hne(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?dne(i):fne(i,t);for(const i of me(n)){let r;for(const o of e.children){const a=o.component.scales[i];if(a){const s=a.getWithExplicit(t);r=wc(r,s,t,"scale",ate((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function s5e(e,t){const n=t.bin;if(fn(n)){const i=IL(e,t.field,n);return new ui(()=>e.getSignalName(i))}else if(Ci(n)&&Gd(n)&&n.step!==void 0)return{step:n.step}}function l5e(e,t){if(Mt([Zr,Hs,Us],e)&&t!=="nominal")return"hcl"}function u5e(e,t,n,i,r,o){var a;if(!((a=Ns(o))!=null&&a.bin||fe(n)||r!=null||i!=null||Mt([Gr.TIME,Gr.UTC],e)))return jn(t)?!0:void 0}function c5e(e,t,n,i,r,o){if(jn(e)){if(ka(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=r;if(a==="bar"&&!(ye(i)&&(i.bin||i.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Gr.POINT)return n.pointPadding}}function f5e(e,t,n,i,r,o=!1){if(e===void 0){if(jn(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=r;return o?u:zn(a,n==="bar"?s:l)}else if(Jv(t)&&i===Gr.BAND)return r.offsetBandPaddingInner}}function d5e(e,t,n,i,r,o=!1){if(e===void 0){if(jn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=r;if(o)return s;if(n===Gr.BAND)return zn(a,Ve(i)?{signal:`${i.signal}/2`}:i/2)}else if(Jv(t)){if(n===Gr.POINT)return .5;if(n===Gr.BAND)return r.offsetBandPaddingOuter}}}function h5e(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return wo(e)&&t==="descending"?Ve(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(wo(e)&&t==="descending")return!0}function p5e(e,t,n,i,r,o,a){if(!!n&&n!=="unaggregated"&&wo(r)){if(fe(n)){const l=n[0],u=n[n.length-1];if(jt(l)&&l<=0&&jt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!om(r))return!0;if(!(ye(t)&&t.bin)&&Mt([...Gs,...dNe],e)){const{orient:l,type:u}=i;return Mt(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Mt(["bar","area"],u)&&!a?!0:o==null?void 0:o.zero}return!1}function m5e(e,t,n,i,r=!1){const o=g5e(t,n,i,r),{type:a}=e;return tu(t)?a!==void 0?m$e(t,a)?ye(n)&&!p$e(a,n.type)?(ve(gPe(a,o)),o):a:(ve(mPe(t,a,o)),o):o:null}function g5e(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(vp(e)||oR(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ve(aR(e,"ordinal")),"ordinal";if(jn(e)||Jv(e)){if(Mt(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&e in DI)return"band";const o=n[Kr(e)];return wd(o)||sm(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return vp(e)?"time":oR(e)==="discrete"?(ve(aR(e,"temporal")),"ordinal"):ye(t)&&t.timeUnit&&yi(t.timeUnit).utc?"utc":"time";case"quantitative":return vp(e)?ye(t)&&fn(t.bin)?"bin-ordinal":"linear":oR(e)==="discrete"?(ve(aR(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(PQ(t.type))}function y5e(e,{ignoreRange:t}={}){pne(e),ine(e);for(const n of h$e)fne(e,n);t||dne(e)}function pne(e){$n(e)?e.component.scales=v5e(e):e.component.scales=_5e(e)}function v5e(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of oC){const a=Qn(t[o]);if(a&&n===oee&&o===Xr&&a.type===jm)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});const l=Aee(t,o),u=m5e(s,o,a,i,l);r[o]=new one(e.scaleName(`${o}`,!0),{value:u,explicit:s.type===u})}}return r}const x5e=ate((e,t)=>P6(e)-P6(t));function _5e(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){pne(o);for(const a of me(o.component.scales))if((t=r.scale)[a]??(t[a]=Wte(a,e)),r.scale[a]==="shared"){const s=i[a],l=o.component.scales[a].getWithExplicit("type");s?i$e(s.value,l.value)?i[a]=wc(s,l,"type","scale",x5e):(r.scale[a]="independent",delete i[a]):i[a]=l}}for(const o of me(i)){const a=e.scaleName(o,!0),s=i[o];n[o]=new one(a,s);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),a),u.merged=!0)}}return n}class mR{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $n(e){return(e==null?void 0:e.type)==="unit"}function Na(e){return(e==null?void 0:e.type)==="facet"}function BL(e){return(e==null?void 0:e.type)==="concat"}function Gm(e){return(e==null?void 0:e.type)==="layer"}class HL{constructor(t,n,i,r,o,a,s){this.type=n,this.parent=i,this.config=o,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=i,this.config=o,this.view=Or(s),this.name=t.name??r,this.title=ku(t.title)?{text:t.title}:t.title?Or(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new mR,this.projectionNameMap=i?i.projectionNameMap:new mR,this.signalNameMap=i?i.signalNameMap:new mR,this.data=t.data,this.description=t.description,this.transforms=RIe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:MOe(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:pC(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new iu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?ht(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){y5e(this)}parseProjection(){ene(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Zte(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const o of me(i)){const a=i[o];a!==void 0&&(r[o]=gn(a))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=gn(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:rn(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,o=BLe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of zo)t[i].title&&n.push(OLe(this,i));for(const i of NL)n=n.concat(ILe(this,i));return n}assembleAxes(){return wLe(this.component.axes,this.config)}assembleLegends(){return Kte(this)}assembleProjections(){return cDe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...CQ(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Mt(["unit","layer"],this.type)?Mt(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),rn(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Na(this.parent)?rne(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return Sn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ln[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Na(this.parent)){const n=Hte(t),i=rC(n),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),a=r.get("range");if(vi(o)&&Wc(a)){const s=r.get("name"),l=FC(this,i),u=jL(l);if(u){const c=Te({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Bte(s,r,c)}}else return ve(BI(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(mQ(t)&&tu(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(ONe(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class mne extends HL{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Te(i,n)}reduceFieldDef(t,n){return aOe(this.getMapping(),(i,r,o)=>{const a=Ns(r);return a?t(i,a,o):i},n)}forEachFieldDef(t,n){pL(this.getMapping(),(i,r)=>{const o=Ns(i);o&&t(o,r)},n)}}class MC extends tn{clone(){return new MC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ft(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return this.transform.groupby&&(i.resolve="shared"),i}}class NC extends tn{clone(){return new NC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ft(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class av extends tn{clone(){return new av(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:i,mark:r,markDef:o}=n;if(Kt("invalid",o,i)!=="filter")return null;const s=n.reduceFieldDef((l,u,c)=>{const d=tu(c)&&n.getScaleComponent(c);if(d){const h=d.get("type");wo(h)&&u.aggregate!=="count"&&!Gc(r)&&(l[u.field]=u)}return l},{});return me(s).length?new av(t,s):null}dependentFields(){return new Set(me(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ft(this.filter)}`}assemble(){const t=me(this.filter).reduce((n,i)=>{const r=this.filter[i],o=Te(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):r.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class PC extends tn{clone(){return new PC(this.parent,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,a)=>r[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ft(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class $C extends tn{clone(){return new $C(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ft(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class bp extends tn{clone(){return new bp(null,ht(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ga,Wa],[Qo,qa]]){const o=r.map(a=>{const s=Qn(n.encoding[a]);return ye(s)?s.field:qs(s)?{expr:`${s.datum}`}:La(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new bp(t,o,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Xr)){const r=n.typedFieldDef(Xr);r.type===jm&&(t=new bp(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Ie);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ft(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sv extends tn{clone(){return new sv(null,this.projection,ht(this.fields),ht(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ga,Wa],[Qo,qa]]){const r=i.map(a=>{const s=Qn(n.encoding[a]);return ye(s)?s.field:qs(s)?{expr:`${s.datum}`}:La(s)?{expr:`${s.value}`}:void 0}),o=i[0]===Qo?"2":"";(r[0]||r[1])&&(t=new sv(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ie))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ft(this.fields)} ${Ft(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Xf extends tn{clone(){return new Xf(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Xf(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(ye(r)&&ye(o)){const a=r.impute?r:o.impute?o:void 0;if(a===void 0)return;const s=r.impute?o:o.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=a.impute,h=Mee(n.mark,i);return new Xf(t,{impute:a.field,key:s.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${Ft(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:a,frame:s=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:lIe(i)?this.processSequence(i):i}:{},method:"value",...o?{groupby:o}:{},value:!r||r==="value"?a:null};if(r&&r!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:s,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class OC extends tn{clone(){return new OC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ft(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class lv extends tn{clone(){return new lv(null,ht(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const o=n.component.data.sources,{from:a}=i;let s=null;if(uIe(a)){let l=vne(a.data,o);l||(l=new kd(a.data),o.push(l));const u=n.getName(`lookup_${r}`);s=new mr(l,u,ln.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=s}else if(cIe(a)){const l=a.param;i={as:l,...i};let u;try{u=n.getSelectionComponent(Sn(l),l)}catch{throw new Error(DNe(l))}if(s=u.materialized,!s)throw new Error(zNe(l))}return new lv(t,i,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Oe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ft({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Oe(this.transform.as)}:{}};else{let n=this.transform.as;Ie(n)||(ve(VNe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class IC extends tn{clone(){return new IC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ft(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class LC extends tn{clone(){return new LC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ft(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class DC extends tn{clone(){return new DC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=hs((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ft(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...o!==void 0?{op:o}:{},...i!==void 0?{groupby:i}:{}}}}class zC extends tn{clone(){return new zC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ft(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function gne(e){let t=0;function n(i,r){if(i instanceof kd&&!i.isGenerator&&!um(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof qi&&(i.parent instanceof kd&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Um){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof s1||i instanceof l1||i instanceof av||i instanceof Hm||i instanceof fm||i instanceof sv||i instanceof Ma||i instanceof lv||i instanceof Wm||i instanceof Xd||i instanceof $C||i instanceof PC||i instanceof MC||i instanceof OC||i instanceof IC||i instanceof LC||i instanceof Ec||i instanceof zC||i instanceof DC||i instanceof NC)&&r.transform.push(i.assemble()),(i instanceof Ss||i instanceof ws||i instanceof Xf||i instanceof $l||i instanceof bp)&&r.transform.push(...i.assemble()),i instanceof mr&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof mr?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof mr&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const a of i.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function b5e(e){const t=[],n=gne(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function w5e(e,t){const n=[],i=gne(n);let r=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${r++}`);const s=a.assemble();i(a,s)}for(const a of n)a.transform.length===0&&delete a.transform;let o=0;for(const[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(const a of n)for(const s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function S5e(e){return e==="top"||e==="left"||Ve(e)?"header":"footer"}function C5e(e){for(const t of zo)E5e(e,t);TB(e,"x"),TB(e,"y")}function E5e(e,t){var a;const{facet:n,config:i,child:r,component:o}=e;if(e.channelHasField(t)){const s=n[t],l=hm("title",null,i,t);let u=xp(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(u=fe(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=hm("labelOrient",s.header,i,t),d=s.header!==null?zn((a=s.header)==null?void 0:a.labels,i.header.labels,!0):!1,h=Mt(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[h]:t==="facet"?[]:[yne(e,t,d)]}}}function yne(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function TB(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=OL(r,t),r.axis[t]==="shared"){const o=t==="x"?"column":"row",a=i[o];for(const s of n.component.axes[t]){const l=S5e(s.get("orient"));a[l]??(a[l]=[yne(e,o,!1)]);const u=A0(s,"main",e.config,{header:!0});u&&a[l][0].axes.push(u),s.mainExtracted=!0}}}}function k5e(e){UL(e),Kw(e,"width"),Kw(e,"height")}function R5e(e){UL(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Kw(e,t),Kw(e,n)}function UL(e){for(const t of e.children)t.parseLayoutSize()}function Kw(e,t){const n=Hte(t),i=rC(n),r=e.component.resolve,o=e.component.layoutSize;let a;for(const s of e.children){const l=s.component.layoutSize.getWithExplicit(n),u=r.scale[i]??Wte(i,e);if(u==="independent"&&l.value==="step"){a=void 0;break}if(a){if(u==="independent"&&a.value!==l.value){a=void 0;break}a=wc(a,l,n,"")}else a=l}if(a){for(const s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function T5e(e){const{size:t,component:n}=e;for(const i of Gs){const r=Kr(i);if(t[r]){const o=t[r];n.layoutSize.set(r,Ps(o)?"step":o,!0)}else{const o=A5e(e,r);n.layoutSize.set(r,o,!1)}}}function A5e(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const o=r.get("type"),a=r.get("range");if(vi(o)){const s=Vw(i.view,t);return Wc(a)||Ps(s)?"step":s}else return DF(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return DF(i.view,t);{const o=Vw(i.view,t);return Ps(o)?o.step:o}}}function JF(e,t,n){return Te(t,{suffix:`by_${Te(e)}`,...n??{}})}class ry extends mne{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=YL(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!n1(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=me(t),i={};for(const r of n){if(![Ml,Nl].includes(r)){ve(sC(r,"facet"));break}const o=t[r];if(o.field===void 0){ve(PF(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=dL(t,n);return i.header?i.header=Or(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=jC(this),this.child.parseData()}parseLayoutSize(){UL(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),C5e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of zo)for(const i of PL){const r=this.component.layoutHeaders[n],o=r[i],{facetFieldDef:a}=r;if(a){const s=hm("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){const l=TC(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const s=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof ry))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof ry?{...this.channelHasField("column")?{encode:{update:{columns:{field:Te(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof ry){if(this.child.channelHasField("column")){const r=Te(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Gs){const o=this.child.component.scales[r];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(vi(a)&&Wc(s)){const l=FC(this.child,r),u=jL(l);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):ve(BI(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const c of zo){const d=this.facet[c];if(d){l.push(Te(d));const{bin:h,sort:m}=d;if(fn(h)&&l.push(Te(d,{binSuffix:"end"})),bs(m)){const{field:g,op:y=hC}=m,v=JF(d,m);i&&r?(o.push(v),a.push("max"),s.push(v)):(o.push(g),a.push(y),s.push(v))}else if(fe(m)){const g=dm(d,c);o.push(g),a.push("max"),s.push(g)}}}const u=!!i&&!!r;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:a,as:s}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?bs(i.sort)?[JF(i,i.sort,{expr:"datum"})]:fe(i.sort)?[dm(i,t,{expr:"datum"})]:[Te(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(bs(r)?r.order:!fe(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var r;const{facet:t,config:n}=this;if(t.facet)return qF(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const o of NL)if(t[o]){const a=hm("labelOrient",(r=t[o])==null?void 0:r.header,n,o);if(i[o].includes(a))return qF(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=b5e(n),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:zo.map(l=>this.facetSortFields(l)).flat(),order:zo.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(jIe(this,[]))}]}getMapping(){return this.facet}}function F5e(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(bs(o.sort)){const{field:a,op:s=hC}=o.sort;e=r=new Xd(e,{joinaggregate:[{op:s,field:a,as:JF(o,o.sort,{forAs:!0})}],groupby:[Te(o)]})}return r}return null}function vne(e,t){var n,i,r,o;for(const a of t){const s=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(i=s.format)==null?void 0:i.feature;if(l&&u)continue;const c=(r=e.format)==null?void 0:r.feature;if((c||u)&&c!==u)continue;const d=(o=s.format)==null?void 0:o.mesh;if(!((l||d)&&l!==d)){if(ov(e)&&ov(s)){if(fo(e.values,s.values))return a}else if(um(e)&&um(s)){if(e.url===s.url)return a}else if(ste(e)&&e.name===a.dataName)return a}}return null}function M5e(e,t){if(e.data||!e.parent){if(e.data===null){const i=new kd({values:[]});return t.push(i),i}const n=vne(e.data,t);if(n)return nc(e.data)||(n.data.format=iQ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new kd(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function N5e(e,t,n){let i=0;for(const r of t.transforms){let o,a;if(_Ie(r))a=e=new fm(e,r),o="derived";else if(EL(r)){const s=SDe(r);a=e=qi.makeWithAncestors(e,{},s,n)??e,e=new Hm(e,t,r.filter)}else if(nte(r))a=e=Ss.makeFromTransform(e,r,t),o="number";else if(wIe(r))o="date",n.getWithExplicit(r.field).value===void 0&&(e=new qi(e,{[r.field]:o}),n.set(r.field,o,!1)),a=e=ws.makeFromTransform(e,r);else if(SIe(r))a=e=Ma.makeFromTransform(e,r),o="number",ML(t)&&(e=new Ec(e));else if(tte(r))a=e=lv.make(e,t,r,i++),o="derived";else if(yIe(r))a=e=new Wm(e,r),o="number";else if(vIe(r))a=e=new Xd(e,r),o="number";else if(CIe(r))a=e=$l.makeFromTransform(e,r),o="derived";else if(EIe(r))a=e=new $C(e,r),o="derived";else if(kIe(r))a=e=new NC(e,r),o="derived";else if(xIe(r))a=e=new PC(e,r),o="derived";else if(fIe(r))a=e=new DC(e,r),o="derived";else if(gIe(r))e=new zC(e,r);else if(bIe(r))a=e=Xf.makeFromTransform(e,r),o="derived";else if(dIe(r))a=e=new MC(e,r),o="derived";else if(hIe(r))a=e=new IC(e,r),o="derived";else if(pIe(r))a=e=new LC(e,r),o="derived";else if(mIe(r))a=e=new OC(e,r),o="derived";else{ve(qNe(r));continue}if(a&&o!==void 0)for(const s of a.producedFields()??[])n.set(s,o,!1)}return e}function jC(e){var y;let t=M5e(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,a=!(r&&(nc(r)||um(r)||ov(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new DIe;nc(r)?(lte(r)?t=new l1(t,r.sequence):kL(r)&&(t=new s1(t,r.graticule)),a.parseNothing=!0):((y=r==null?void 0:r.format)==null?void 0:y.parse)===null&&(a.parseNothing=!0),t=qi.makeExplicit(t,e,a)??t,t=new Ec(t);const s=e.parent&&Gm(e.parent);($n(e)||Na(e))&&s&&(t=Ss.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=N5e(t,e,a));const l=EDe(e),u=CDe(e);t=qi.makeWithAncestors(t,{},{...l,...u},a)??t,$n(e)&&(t=bp.parseAll(t,e),t=sv.parseAll(t,e)),($n(e)||Na(e))&&(s||(t=Ss.makeFromEncoding(t,e)??t),t=ws.makeFromEncoding(t,e)??t,t=fm.parseAllForSortIndex(t,e));const c=e.getDataName(ln.Raw),d=new mr(t,c,ln.Raw,i);if(n[c]=d,t=d,$n(e)){const v=Ma.makeFromEncoding(t,e);v&&(t=v,ML(e)&&(t=new Ec(t))),t=Xf.makeFromEncoding(t,e)??t,t=$l.makeFromEncoding(t,e)??t}$n(e)&&(t=av.make(t,e)??t);const h=e.getDataName(ln.Main),m=new mr(t,h,ln.Main,i);n[h]=m,t=m,$n(e)&&_Le(e,m);let g=null;if(Na(e)){const v=e.getName("facet");t=F5e(t,e.facet)??t,g=new Um(t,e,v,m.getSource()),n[v]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:m,facetRoot:g,ancestorParse:a}}class P5e extends HL{constructor(t,n,i,r){var o,a,s,l;super(t,"concat",n,i,r,t.resolve),(((a=(o=t.resolve)==null?void 0:o.axis)==null?void 0:a.x)==="shared"||((l=(s=t.resolve)==null?void 0:s.axis)==null?void 0:l.y)==="shared")&&ve(UNe),this.children=this.getChildren(t).map((u,c)=>YL(u,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=jC(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of me(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return bC(t)?t.vconcat:SL(t)?t.hconcat:t.concat}parseLayoutSize(){R5e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=$L(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function $5e(e){return e===!1||e===null}const O5e={disable:1,gridScale:1,scale:1,...kee,labelExpr:1,encode:1},xne=me(O5e);class WL extends iu{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new WL(ht(this.explicit),ht(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!$5e(this.get(t))}hasOrientSignalRef(){return Ve(this.explicit.orient)}}function I5e(e,t,n){const{encoding:i,config:r}=e,o=Qn(i[t])??Qn(i[Ws(t)]),a=e.axis(t)||{},{format:s,formatType:l}=a;if(Sd(l))return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:l,config:r}),...n};if(s===void 0&&l===void 0&&r.customFormatTypes){if(am(o)==="quantitative"){if(sm(o)&&o.stack==="normalize"&&r.normalizedNumberFormatType)return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(am(o)==="temporal"&&r.timeFormatType&&ye(o)&&!o.timeUnit)return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function L5e(e){return Gs.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[W5e(n,e)]),t),{})}const D5e={bottom:"top",top:"bottom",left:"right",right:"left"};function z5e(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of me(r.component.axes))n.axis[o]=OL(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=j5e(t[o],r.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const r of Gs){for(const o of e.children)if(o.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(o.component.axes[r]);for(const a of o.component.axes[r]){const{value:s,explicit:l}=a.getWithExplicit("orient");if(!Ve(s)){if(i[s]>0&&!l){const u=D5e[s];i[s]>i[u]&&a.set("orient",u,!1)}i[s]++}}}delete o.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[o,a]of(t[r]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function j5e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const a=r.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[i]=B5e(r,o)}}}else return t.map(n=>n.clone());return e}function B5e(e,t){for(const n of xne){const i=wc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return MQ(r,o);case"gridScale":return{explicit:r.explicit,value:zn(r.value,o.value)}}return SC(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function H5e(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ve(n.labelAngle)?n.labelAngle:iv(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Lte(i,r))return!0}return e===n[t]}const U5e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function W5e(e,t){var _,b;let n=t.axis(e);const i=new WL,r=Qn(t.encoding[e]),{mark:o,config:a}=t,s=(n==null?void 0:n.orient)||((_=a[e==="x"?"axisX":"axisY"])==null?void 0:_.orient)||((b=a.axis)==null?void 0:b.orient)||FLe(e),l=t.getScaleComponent(e).get("type"),u=SLe(e,l,s,t.config),c=n!==void 0?!n:WF("disable",a.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",c,n!==void 0),c)return i;n=n||{};const d=RLe(r,n,e,a.style,u),h=fee(n.formatType,r,l),m=cee(r,r.type,n.format,n.formatType,a,!0),g={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:s,labelAngle:d,format:m,formatType:h,mark:o,config:a};for(const S of xne){const k=S in hB?hB[S](g):j6(S)?n[S]:void 0,R=k!==void 0,F=H5e(k,S,n,t,e);if(R&&F)i.set(S,k,F);else{const{configValue:T=void 0,configFrom:P=void 0}=j6(S)&&S!=="values"?WF(S,a.style,n.style,u):{},B=T!==void 0;R&&!B?i.set(S,k,F):(P!=="vgAxisConfig"||U5e.has(S)&&B||o1(T)||Ve(T))&&i.set(S,T,!1)}}const y=n.encoding??{},v=Eee.reduce((S,k)=>{if(!i.hasAxisPart(k))return S;const R=Ute(y[k]??{},t),F=k==="labels"?I5e(t,e,R):R;return F!==void 0&&!rn(F)&&(S[k]={update:F}),S},{});return rn(v)||i.set("encode",v,!!n.encoding||n.labelAngle!==void 0),i}function G5e({encoding:e,size:t}){for(const n of Gs){const i=Kr(n);Ps(t[i])&&Hu(e[n])&&(delete t[i],ve(IQ(i)))}return t}const q5e={vgMark:"arc",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Gi("x",e,{defaultPos:"mid"}),...Gi("y",e,{defaultPos:"mid"}),...Sc(e,"radius"),...Sc(e,"theta")})},V5e={vgMark:"area",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Yw("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Yw("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...FL(e)})},Y5e={vgMark:"rect",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Sc(e,"x"),...Sc(e,"y")})},Z5e={vgMark:"shape",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ye(n)&&n.type===jm?{field:Te(n,{expr:"datum"})}:{}}]}},X5e={vgMark:"image",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Sc(e,"x"),...Sc(e,"y"),...TL(e,"url")})},K5e={vgMark:"line",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Gi("x",e,{defaultPos:"mid"}),...Gi("y",e,{defaultPos:"mid"}),...ci("size",e,{vgChannel:"strokeWidth"}),...FL(e)})},J5e={vgMark:"trail",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Gi("x",e,{defaultPos:"mid"}),...Gi("y",e,{defaultPos:"mid"}),...ci("size",e),...FL(e)})};function GL(e,t){const{config:n}=e;return{...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Gi("x",e,{defaultPos:"mid"}),...Gi("y",e,{defaultPos:"mid"}),...ci("size",e),...ci("angle",e),...Q5e(e,n,t)}}function Q5e(e,t,n){return n?{shape:{value:n}}:ci("shape",e)}const e3e={vgMark:"symbol",encodeEntry:e=>GL(e)},t3e={vgMark:"symbol",encodeEntry:e=>GL(e,"circle")},n3e={vgMark:"symbol",encodeEntry:e=>GL(e,"square")},i3e={vgMark:"rect",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Sc(e,"x"),...Sc(e,"y")})},r3e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Yw("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Yw("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ci("size",e,{vgChannel:"strokeWidth"})}}},o3e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...na(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Gi("x",e,{defaultPos:"mid"}),...Gi("y",e,{defaultPos:"mid"}),...TL(e),...ci("size",e,{vgChannel:"fontSize"}),...ci("angle",e),...uB("align",a3e(e.markDef,n,t)),...uB("baseline",s3e(e.markDef,n,t)),...Gi("radius",e,{defaultPos:null}),...Gi("theta",e,{defaultPos:null})}}};function a3e(e,t,n){if(Kt("align",e,n)===void 0)return"center"}function s3e(e,t,n){if(Kt("baseline",e,n)===void 0)return"middle"}const l3e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",o=i==="horizontal"?"height":"width";return{...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Gi("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Gi("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ci("size",e,{defaultValue:u3e(e),vgChannel:r}),[o]:gn(Kt("thickness",n,t))}}};function u3e(e){const{config:t,markDef:n}=e,{orient:i}=n,r=i==="horizontal"?"width":"height",o=e.getScaleComponent(i==="horizontal"?"x":"y"),a=Kt("size",n,t,{vgChannel:r})??t.tick.bandSize;if(a!==void 0)return a;{const s=o?o.get("range"):void 0;return s&&Wc(s)&&jt(s.step)?s.step*3/4:qw(t.view,r)*3/4}}const Gx={arc:q5e,area:V5e,bar:Y5e,circle:t3e,geoshape:Z5e,image:X5e,line:K5e,point:e3e,rect:i3e,rule:r3e,square:n3e,text:o3e,tick:l3e,trail:J5e};function c3e(e){if(Mt([fC,uC,v$e],e.mark)){const t=Mee(e.mark,e.encoding);if(t.length>0)return f3e(e,t)}else if(e.mark===cC){const t=NF.some(n=>Kt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return d3e(e)}return qL(e)}const AB="faceted_path_";function f3e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:AB+e.requestDataName(ln.Main),data:e.requestDataName(ln.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:qL(e,{fromPrefix:AB})}]}const FB="stack_group_";function d3e(e){var u;const[t]=qL(e,{fromPrefix:FB}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${c}(${h.map(m=>`scale('${n}',${m})`).join(",")})`};let o,a;e.stack.fieldChannel==="x"?(o={...em(t.encode.update,["y","yc","y2","height",...NF]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Wr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...em(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Wr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of NF){const d=ql(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):d&&(o[c]=gn(d)),d&&(t.encode.update[c]={value:0})}const s=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),h=Te(d);h&&s.push(h),(d!=null&&d.bin||d!=null&&d.timeUnit)&&s.push(Te(d,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const h=ql(d,e.markDef,e.config);return h!==void 0?{...c,[d]:gn(h)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ln.Main),name:FB+e.requestDataName(ln.Main),groupby:s,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function h3e(e){var s;const{encoding:t,stack:n,mark:i,markDef:r,config:o}=e,a=t.order;if(!(!fe(a)&&La(a)&&FF(a.value)||!a&&FF(Kt("order",r,o)))){if((fe(a)||ye(a))&&!n)return TQ(a,{expr:"datum"});if(Gc(i)){const l=r.orient==="horizontal"?"y":"x",u=t[l];if(ye(u)){const c=u.sort;if(fe(c))return{field:Te(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(bs(c))return{field:Te({aggregate:hL(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(hee(c)){const d=e.fieldDef(c.encoding);return{field:Te(d,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Te(u,{binSuffix:(s=e.stack)!=null&&s.impute?"mid":void 0,expr:"datum"})}}return}}}function qL(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,a=zn(i.clip,p3e(e),m3e(e)),s=kQ(i),l=r.key,u=h3e(e),c=g3e(e),d=Kt("aria",i,o),h=Gx[n].postEncodingTransform?Gx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Gx[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(ln.Main)},encode:{update:Gx[n].encodeEntry(e)},...h?{transform:h}:{}}]}function p3e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function m3e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function g3e(e){if(!e.component.selection)return null;const t=me(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=me(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}class _ne extends mne{constructor(t,n,i,r={},o){super(t,"unit",n,i,o,void 0,H6(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=Ms(t.mark)?{...t.mark}:{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=eIe(a,o,{graticule:t.data&&kL(t.data)}));const l=this.encoding=rOe(t.encoding||{},s,a.filled,o);this.markDef=Jee(a,l,o),this.size=G5e({encoding:l,size:H6(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=Kee(this.markDef,l),this.specifiedScales=this.initScales(s,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>bL(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===oee,i=t&&iNe.some(r=>mt(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return oC.reduce((i,r)=>{const o=Qn(n[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Or(t);return fe(n)&&(r.domain=n.map(so)),fe(i)&&(r.range=i.map(so)),r}initAxes(t){return Gs.reduce((n,i)=>{const r=t[i];if(mt(r)||i===Cn&&mt(t.x2)||i===_i&&mt(t.y2)){const o=mt(r)?r.axis:void 0;n[i]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=me(t),i={};for(const r of n){const o=t[r];i[r]=o1(o)?EQ(o):so(o)}return i}initLegends(t){return hNe.reduce((n,i)=>{const r=Qn(t[i]);if(r&&mNe(i)){const o=r.legend;n[i]=o&&Or(o)}return n},{})}parseData(){this.component.data=jC(this)}parseLayoutSize(){T5e(this)}parseSelections(){this.component.selection=xLe(this,this.selection)}parseMarkGroup(){this.component.mark=c3e(this)}parseAxesAndHeaders(){this.component.axes=L5e(this)}assembleSelectionTopLevelSignals(t){return BIe(this,t)}assembleSignals(){return[...$te(this),...zIe(this,[])]}assembleSelectionData(t){return HIe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return $L(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Gm(this.parent))&&(t=fte(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Yf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ns(n)}typedFieldDef(t){const n=this.fieldDef(t);return vr(n)?n:null}}class VL extends HL{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const a={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((s,l)=>{if(wC(s))return new VL(s,this,this.getName(`layer_${l}`),a,o);if(nu(s))return new _ne(s,this,this.getName(`layer_${l}`),a,o);throw new Error(jI(s))})}parseData(){this.component.data=jC(this);for(const t of this.children)t.parseData()}parseLayoutSize(){k5e(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of me(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){z5e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),$te(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),$L(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Oe(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return UIe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Kte(this))}}function YL(e,t,n,i,r){if(pC(e))return new ry(e,t,n,r);if(wC(e))return new VL(e,t,n,i,r);if(nu(e))return new _ne(e,t,n,i,r);if(TOe(e))return new P5e(e,t,n,r);throw new Error(jI(e))}function y3e(e,t={}){t.logger&&PPe(t.logger),t.fieldTitle&&wee(t.fieldTitle);try{const n=Xee(Sm(t.config,e.config)),i=ote(e,n),r=YL(i,null,"",void 0,n);return r.parse(),BDe(r.component.data,r),{spec:x3e(r,v3e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&$Pe(),t.fieldTitle&&Z$e()}}function v3e(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Ie(t)&&(t={type:t}),r&&o&&OIe(t.type)){if(r==="step"&&o==="step")ve(k6()),t.type="pad";else if(r==="step"||o==="step"){const a=r==="step"?"width":"height";ve(k6(rC(a)));const s=a==="width"?"height":"width";t.type=IIe(s)}}return{...me(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...eB(n,!1),...eB(e,!0)}}function x3e(e,t,n={},i){const r=e.config?HOe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),w5e(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(t[m.name]=+m.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...s?{title:s}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...qee(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const _3e=KMe.version,b3e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:tm,accessPathWithDatum:FI,compile:y3e,contains:Mt,deepEqual:fo,deleteNestedProperty:Iw,duplicate:ht,entries:xc,every:RI,fieldIntersection:AI,flatAccessWithDatum:oQ,getFirstDefined:zn,hasIntersection:TI,hash:Ft,internalField:lQ,isBoolean:nv,isEmpty:rn,isEqual:QMe,isInternalField:uQ,isNullOrFalse:FF,isNumeric:JS,keys:me,logicalExpr:ny,mergeDeep:iQ,never:nQ,normalize:ote,normalizeAngle:iv,omit:Wr,pick:em,prefixGenerator:MF,removePathFromField:MI,replaceAll:vd,replacePathInField:Jo,resetIdCounter:tNe,setEqual:rQ,some:yd,stringify:on,titleCase:Zv,unique:hs,uniqueId:sQ,vals:Ai,varName:Sn,version:_3e},Symbol.toStringTag,{value:"Module"}));function bne(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var w3e="vega-themes",S3e="2.14.0",C3e="Themes for stylized Vega and Vega-Lite visualizations.",E3e=["vega","vega-lite","themes","style"],k3e="BSD-3-Clause",R3e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},T3e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],A3e="build/vega-themes.js",F3e="build/vega-themes.module.js",M3e="build/vega-themes.min.js",N3e="build/vega-themes.min.js",P3e="build/vega-themes.module.d.ts",$3e={type:"git",url:"https://github.com/vega/vega-themes.git"},O3e=["src","build"],I3e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},L3e={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},D3e={vega:"*","vega-lite":"*"},z3e={},j3e={name:w3e,version:S3e,description:C3e,keywords:E3e,license:k3e,author:R3e,contributors:T3e,main:A3e,module:F3e,unpkg:M3e,jsdelivr:N3e,types:P3e,repository:$3e,files:O3e,scripts:I3e,devDependencies:L3e,peerDependencies:D3e,dependencies:z3e};const Mh="#fff",MB="#888",B3e={background:"#333",view:{stroke:MB},title:{color:Mh,subtitleColor:Mh},style:{"guide-label":{fill:Mh},"guide-title":{fill:Mh}},axis:{domainColor:Mh,gridColor:MB,tickColor:Mh}},lf="#4572a7",H3e={background:"#fff",arc:{fill:lf},area:{fill:lf},line:{stroke:lf,strokeWidth:2},path:{stroke:lf},rect:{fill:lf},shape:{stroke:lf},symbol:{fill:lf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},uf="#30a2da",gR="#cbcbcb",U3e="#999",W3e="#333",NB="#f0f0f0",PB="#333",G3e={arc:{fill:uf},area:{fill:uf},axis:{domainColor:gR,grid:!0,gridColor:gR,gridWidth:1,labelColor:U3e,labelFontSize:10,titleColor:W3e,tickColor:gR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:NB,group:{fill:NB},legend:{labelColor:PB,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:PB,titleFontSize:14,titlePadding:10},line:{stroke:uf,strokeWidth:2},path:{stroke:uf,strokeWidth:.5},rect:{fill:uf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:uf},bar:{binSpacing:2,fill:uf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},cf="#000",q3e={group:{fill:"#e5e5e5"},arc:{fill:cf},area:{fill:cf},line:{stroke:cf},path:{stroke:cf},rect:{fill:cf},shape:{stroke:cf},symbol:{fill:cf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},V3e=22,Y3e="normal",$B="Benton Gothic, sans-serif",OB=11.5,Z3e="normal",ff="#82c6df",yR="Benton Gothic Bold, sans-serif",IB="normal",LB=13,Xg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},X3e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:yR,fontSize:V3e,fontWeight:Y3e},arc:{fill:ff},area:{fill:ff},line:{stroke:ff,strokeWidth:2},path:{stroke:ff},rect:{fill:ff},shape:{stroke:ff},symbol:{fill:ff,size:30},axis:{labelFont:$B,labelFontSize:OB,labelFontWeight:Z3e,titleFont:yR,titleFontSize:LB,titleFontWeight:IB},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:$B,labelFontSize:OB,symbolType:"square",titleFont:yR,titleFontSize:LB,titleFontWeight:IB},range:{category:Xg["category-6"],diverging:Xg["fireandice-6"],heatmap:Xg["fire-7"],ordinal:Xg["fire-7"],ramp:Xg["fire-7"]}},df="#ab5787",qx="#979797",K3e={background:"#f9f9f9",arc:{fill:df},area:{fill:df},line:{stroke:df},path:{stroke:df},rect:{fill:df},shape:{stroke:df},symbol:{fill:df,size:30},axis:{domainColor:qx,domainWidth:.5,gridWidth:.2,labelColor:qx,tickColor:qx,tickWidth:.2,titleColor:qx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},hf="#3e5c69",J3e={background:"#fff",arc:{fill:hf},area:{fill:hf},line:{stroke:hf},path:{stroke:hf},rect:{fill:hf},shape:{stroke:hf},symbol:{fill:hf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Fo="#1696d2",DB="#000000",Q3e="#FFFFFF",Vx="Lato",vR="Lato",e4e="Lato",t4e="#DEDDDD",n4e=18,Kg={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},i4e={background:Q3e,title:{anchor:"start",fontSize:n4e,font:Vx},axisX:{domain:!0,domainColor:DB,domainWidth:1,grid:!1,labelFontSize:12,labelFont:vR,labelAngle:0,tickColor:DB,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Vx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:t4e,gridWidth:1,labelFontSize:12,labelFont:vR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Vx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:vR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Vx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Kg["six-groups-cat-1"],diverging:Kg["diverging-colors"],heatmap:Kg["diverging-colors"],ordinal:Kg["six-groups-seq"],ramp:Kg["shades-blue"]},area:{fill:Fo},rect:{fill:Fo},line:{color:Fo,stroke:Fo,strokeWidth:5},trail:{color:Fo,stroke:Fo,strokeWidth:0,size:1},path:{stroke:Fo,strokeWidth:.5},point:{filled:!0},text:{font:e4e,color:Fo,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Fo,stroke:null}},arc:{fill:Fo},shape:{stroke:Fo},symbol:{fill:Fo,size:30}},pf="#3366CC",zB="#ccc",Yx="Arial, sans-serif",r4e={arc:{fill:pf},area:{fill:pf},path:{stroke:pf},rect:{fill:pf},shape:{stroke:pf},symbol:{stroke:pf},circle:{fill:pf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Yx,fontSize:12},"guide-title":{font:Yx,fontSize:12},"group-title":{font:Yx,fontSize:12}},title:{font:Yx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:zB,tickColor:zB,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ZL=e=>e*(1/3+1),jB=ZL(9),BB=ZL(10),HB=ZL(12),Jg="Segoe UI",UB="wf_standard-font, helvetica, arial, sans-serif",WB="#252423",Qg="#605E5C",GB="transparent",o4e="#C8C6C4",ca="#118DFF",a4e="#12239E",s4e="#E66C37",l4e="#6B007B",u4e="#E044A7",c4e="#744EC2",f4e="#D9B300",d4e="#D64550",wne=ca,Sne="#DEEFFF",qB=[Sne,wne],h4e=[Sne,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",wne],p4e={view:{stroke:GB},background:GB,font:Jg,header:{titleFont:UB,titleFontSize:HB,titleColor:WB,labelFont:Jg,labelFontSize:BB,labelColor:Qg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Qg,labelFontSize:jB,titleFont:UB,titleColor:WB,titleFontSize:HB,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:o4e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ca},line:{stroke:ca,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Jg,fontSize:jB,fill:Qg},arc:{fill:ca},area:{fill:ca,line:!0,opacity:.6},path:{stroke:ca},rect:{fill:ca},point:{fill:ca,filled:!0,size:75},shape:{stroke:ca},symbol:{fill:ca,strokeWidth:1.5,size:50},legend:{titleFont:Jg,titleFontWeight:"bold",titleColor:Qg,labelFont:Jg,labelFontSize:BB,labelColor:Qg,symbolType:"circle",symbolSize:75},range:{category:[ca,a4e,s4e,l4e,u4e,c4e,f4e,d4e],diverging:qB,heatmap:qB,ordinal:h4e}},xR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',VB=400,m4e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],g4e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function BC({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",i=e==="dark"?"#f4f4f4":"#161616",r=e==="dark"?m4e:g4e,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:xR,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:xR,fill:i,fontWeight:VB},"guide-title":{font:xR,fill:i,fontWeight:VB}},range:{category:r,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const y4e=BC({type:"light",background:"#ffffff"}),v4e=BC({type:"light",background:"#f4f4f4"}),x4e=BC({type:"dark",background:"#262626"}),_4e=BC({type:"dark",background:"#161616"}),b4e=j3e.version,w4e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:v4e,carbong100:_4e,carbong90:x4e,carbonwhite:y4e,dark:B3e,excel:H3e,fivethirtyeight:G3e,ggplot2:q3e,googlecharts:r4e,latimes:X3e,powerbi:p4e,quartz:K3e,urbaninstitute:i4e,version:b4e,vox:J3e},Symbol.toStringTag,{value:"Module"}));function S4e(e,t,n,i){if(fe(e))return`[${e.map(r=>t(Ie(r)?r:YB(r,n))).join(", ")}]`;if(Le(e)){let r="";const{title:o,image:a,...s}=e;o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${new URL(t(a),i||location.href).href}">`);const l=Object.keys(s);if(l.length>0){r+="<table>";for(const u of l){let c=s[u];c!==void 0&&(Le(c)&&(c=YB(c,n)),r+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function C4e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function YB(e,t){return JSON.stringify(e,C4e(t))}var E4e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Cne="vg-tooltip-element",k4e={offsetX:10,offsetY:10,id:Cne,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:R4e,maxDepth:2,formatTooltip:S4e,baseURL:""};function R4e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function T4e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return E4e.toString().replace(Cne,e)}function A4e(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:r,y:o}}class F4e{constructor(t){this.options={...k4e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=T4e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=A4e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}}var _R={};function M4e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bR,ZB;function N4e(){return ZB||(ZB=1,bR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),bR}var P4e=Wt;Wt.Node=Rd;Wt.create=Wt;function Wt(e){var t=this;if(t instanceof Wt||(t=new Wt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}Wt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Wt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Wt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Wt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)O4e(this,arguments[e]);return this.length};Wt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)I4e(this,arguments[e]);return this.length};Wt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Wt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Wt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};Wt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};Wt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Wt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Wt.prototype.map=function(e,t){t=t||this;for(var n=new Wt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};Wt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Wt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};Wt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};Wt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};Wt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Wt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Wt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};Wt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};Wt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(var o=[],i=0;r&&i<t;i++)o.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=$4e(this,r,n[i]);return o};Wt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function $4e(e,t,n){var i=t===e.head?new Rd(n,null,t,e):new Rd(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function O4e(e,t){e.tail=new Rd(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function I4e(e,t){e.head=new Rd(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Rd(e,t,n,i){if(!(this instanceof Rd))return new Rd(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{N4e()(Wt)}catch{}const L4e=P4e,kf=Symbol("max"),dl=Symbol("length"),Nh=Symbol("lengthCalculator"),oy=Symbol("allowStale"),If=Symbol("maxAge"),sl=Symbol("dispose"),XB=Symbol("noDisposeOnSet"),si=Symbol("lruList"),fa=Symbol("cache"),Ene=Symbol("updateAgeOnGet"),wR=()=>1;class D4e{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[kf]=t.max||1/0;const n=t.length||wR;if(this[Nh]=typeof n!="function"?wR:n,this[oy]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[If]=t.maxAge||0,this[sl]=t.dispose,this[XB]=t.noDisposeOnSet||!1,this[Ene]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[kf]=t||1/0,e0(this)}get max(){return this[kf]}set allowStale(t){this[oy]=!!t}get allowStale(){return this[oy]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[If]=t,e0(this)}get maxAge(){return this[If]}set lengthCalculator(t){typeof t!="function"&&(t=wR),t!==this[Nh]&&(this[Nh]=t,this[dl]=0,this[si].forEach(n=>{n.length=this[Nh](n.value,n.key),this[dl]+=n.length})),e0(this)}get lengthCalculator(){return this[Nh]}get length(){return this[dl]}get itemCount(){return this[si].length}rforEach(t,n){n=n||this;for(let i=this[si].tail;i!==null;){const r=i.prev;KB(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[si].head;i!==null;){const r=i.next;KB(this,t,i,n),i=r}}keys(){return this[si].toArray().map(t=>t.key)}values(){return this[si].toArray().map(t=>t.value)}reset(){this[sl]&&this[si]&&this[si].length&&this[si].forEach(t=>this[sl](t.key,t.value)),this[fa]=new Map,this[si]=new L4e,this[dl]=0}dump(){return this[si].map(t=>Jw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[si]}set(t,n,i){if(i=i||this[If],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,o=this[Nh](n,t);if(this[fa].has(t)){if(o>this[kf])return wp(this,this[fa].get(t)),!1;const l=this[fa].get(t).value;return this[sl]&&(this[XB]||this[sl](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[dl]+=o-l.length,l.length=o,this.get(t),e0(this),!0}const a=new z4e(t,n,o,r,i);return a.length>this[kf]?(this[sl]&&this[sl](t,n),!1):(this[dl]+=a.length,this[si].unshift(a),this[fa].set(t,this[si].head),e0(this),!0)}has(t){if(!this[fa].has(t))return!1;const n=this[fa].get(t).value;return!Jw(this,n)}get(t){return SR(this,t,!0)}peek(t){return SR(this,t,!1)}pop(){const t=this[si].tail;return t?(wp(this,t),t.value):null}del(t){wp(this,this[fa].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],o=r.e||0;if(o===0)this.set(r.k,r.v);else{const a=o-n;a>0&&this.set(r.k,r.v,a)}}}prune(){this[fa].forEach((t,n)=>SR(this,n,!1))}}const SR=(e,t,n)=>{const i=e[fa].get(t);if(i){const r=i.value;if(Jw(e,r)){if(wp(e,i),!e[oy])return}else n&&(e[Ene]&&(i.value.now=Date.now()),e[si].unshiftNode(i));return r.value}},Jw=(e,t)=>{if(!t||!t.maxAge&&!e[If])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[If]&&n>e[If]},e0=e=>{if(e[dl]>e[kf])for(let t=e[si].tail;e[dl]>e[kf]&&t!==null;){const n=t.prev;wp(e,t),t=n}},wp=(e,t)=>{if(t){const n=t.value;e[sl]&&e[sl](n.key,n.value),e[dl]-=n.length,e[fa].delete(n.key),e[si].removeNode(t)}};class z4e{constructor(t,n,i,r,o){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=o||0}}const KB=(e,t,n,i)=>{let r=n.value;Jw(e,r)&&(wp(e,n),e[oy]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var j4e=D4e;const B4e=Object.freeze({loose:!0}),H4e=Object.freeze({}),U4e=e=>e?typeof e!="object"?B4e:e:H4e;var XL=U4e,QF={exports:{}};const W4e="2.0.0",kne=256,G4e=Number.MAX_SAFE_INTEGER||9007199254740991,q4e=16,V4e=kne-6,Y4e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var KL={MAX_LENGTH:kne,MAX_SAFE_COMPONENT_LENGTH:q4e,MAX_SAFE_BUILD_LENGTH:V4e,MAX_SAFE_INTEGER:G4e,RELEASE_TYPES:Y4e,SEMVER_SPEC_VERSION:W4e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Z4e=typeof process=="object"&&_R&&_R.NODE_DEBUG&&/\bsemver\b/i.test(_R.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var HC=Z4e;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=KL,o=HC;t=e.exports={};const a=t.re=[],s=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",r],[d,i]],m=y=>{for(const[v,_]of h)y=y.split(`${v}*`).join(`${v}{0,${_}}`).split(`${v}+`).join(`${v}{1,${_}}`);return y},g=(y,v,_)=>{const b=m(v),S=c++;o(y,S,v),u[y]=S,l[S]=v,a[S]=new RegExp(v,_?"g":void 0),s[S]=new RegExp(b,_?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),g("FULL",`^${l[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),g("LOOSE",`^${l[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),g("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),g("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),g("COERCERTL",l[u.COERCE],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(QF,QF.exports);var JL=QF.exports;const JB=/^[0-9]+$/,Rne=(e,t)=>{const n=JB.test(e),i=JB.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},X4e=(e,t)=>Rne(t,e);var K4e={compareIdentifiers:Rne,rcompareIdentifiers:X4e};const Zx=HC,{MAX_LENGTH:QB,MAX_SAFE_INTEGER:Xx}=KL,{safeRe:e8,t:t8}=JL,J4e=XL,{compareIdentifiers:Ph}=K4e;let Q4e=class rs{constructor(t,n){if(n=J4e(n),t instanceof rs){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>QB)throw new TypeError(`version is longer than ${QB} characters`);Zx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?e8[t8.LOOSE]:e8[t8.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Xx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xx||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const o=+r;if(o>=0&&o<Xx)return o}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Zx("SemVer.compare",this.version,this.options,t),!(t instanceof rs)){if(typeof t=="string"&&t===this.version)return 0;t=new rs(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof rs||(t=new rs(t,this.options)),Ph(this.major,t.major)||Ph(this.minor,t.minor)||Ph(this.patch,t.patch)}comparePre(t){if(t instanceof rs||(t=new rs(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(Zx("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Ph(i,r)}while(++n)}compareBuild(t){t instanceof rs||(t=new rs(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(Zx("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Ph(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let o=[n,r];i===!1&&(o=[n]),Ph(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var QL=Q4e;const n8=QL,eze=(e,t,n)=>new n8(e,n).compare(new n8(t,n));var qm=eze;const tze=qm,nze=(e,t,n)=>tze(e,t,n)===0;var ize=nze;const rze=qm,oze=(e,t,n)=>rze(e,t,n)!==0;var aze=oze;const sze=qm,lze=(e,t,n)=>sze(e,t,n)>0;var uze=lze;const cze=qm,fze=(e,t,n)=>cze(e,t,n)>=0;var dze=fze;const hze=qm,pze=(e,t,n)=>hze(e,t,n)<0;var mze=pze;const gze=qm,yze=(e,t,n)=>gze(e,t,n)<=0;var vze=yze;const xze=ize,_ze=aze,bze=uze,wze=dze,Sze=mze,Cze=vze,Eze=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return xze(e,n,i);case"!=":return _ze(e,n,i);case">":return bze(e,n,i);case">=":return wze(e,n,i);case"<":return Sze(e,n,i);case"<=":return Cze(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var kze=Eze,CR,i8;function Rze(){if(i8)return CR;i8=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const d=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],h=c.match(d);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new s(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}CR=t;const n=XL,{safeRe:i,t:r}=JL,o=kze,a=HC,s=QL,l=Tne();return CR}var ER,r8;function Tne(){if(r8)return ER;r8=1;class e{constructor(U,G){if(G=i(G),U instanceof e)return U.loose===!!G.loose&&U.includePrerelease===!!G.includePrerelease?U:new e(U.raw,G);if(U instanceof r)return this.raw=U.value,this.set=[[U]],this.format(),this;if(this.options=G,this.loose=!!G.loose,this.includePrerelease=!!G.includePrerelease,this.raw=U.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(Z=>this.parseRange(Z.trim())).filter(Z=>Z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Z=this.set[0];if(this.set=this.set.filter(J=>!g(J[0])),this.set.length===0)this.set=[Z];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&y(J[0])){this.set=[J];break}}}this.format()}format(){return this.range=this.set.map(U=>U.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(U){const Z=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+U,J=n.get(Z);if(J)return J;const H=this.options.loose,Q=H?s[l.HYPHENRANGELOOSE]:s[l.HYPHENRANGE];U=U.replace(Q,D(this.options.includePrerelease)),o("hyphen replace",U),U=U.replace(s[l.COMPARATORTRIM],u),o("comparator trim",U),U=U.replace(s[l.TILDETRIM],c),o("tilde trim",U),U=U.replace(s[l.CARETTRIM],d),o("caret trim",U);let K=U.split(" ").map(Ee=>_(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>O(Ee,this.options));H&&(K=K.filter(Ee=>(o("loose invalid filter",Ee,this.options),!!Ee.match(s[l.COMPARATORLOOSE])))),o("range list",K);const ne=new Map,he=K.map(Ee=>new r(Ee,this.options));for(const Ee of he){if(g(Ee))return[Ee];ne.set(Ee.value,Ee)}ne.size>1&&ne.has("")&&ne.delete("");const $e=[...ne.values()];return n.set(Z,$e),$e}intersects(U,G){if(!(U instanceof e))throw new TypeError("a Range is required");return this.set.some(Z=>v(Z,G)&&U.set.some(J=>v(J,G)&&Z.every(H=>J.every(Q=>H.intersects(Q,G)))))}test(U){if(!U)return!1;if(typeof U=="string")try{U=new a(U,this.options)}catch{return!1}for(let G=0;G<this.set.length;G++)if(W(this.set[G],U,this.options))return!0;return!1}}ER=e;const t=j4e,n=new t({max:1e3}),i=XL,r=Rze(),o=HC,a=QL,{safeRe:s,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=JL,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=KL,g=j=>j.value==="<0.0.0-0",y=j=>j.value==="",v=(j,U)=>{let G=!0;const Z=j.slice();let J=Z.pop();for(;G&&Z.length;)G=Z.every(H=>J.intersects(H,U)),J=Z.pop();return G},_=(j,U)=>(o("comp",j,U),j=R(j,U),o("caret",j),j=S(j,U),o("tildes",j),j=T(j,U),o("xrange",j),j=B(j,U),o("stars",j),j),b=j=>!j||j.toLowerCase()==="x"||j==="*",S=(j,U)=>j.trim().split(/\s+/).map(G=>k(G,U)).join(" "),k=(j,U)=>{const G=U.loose?s[l.TILDELOOSE]:s[l.TILDE];return j.replace(G,(Z,J,H,Q,K)=>{o("tilde",j,Z,J,H,Q,K);let ne;return b(J)?ne="":b(H)?ne=`>=${J}.0.0 <${+J+1}.0.0-0`:b(Q)?ne=`>=${J}.${H}.0 <${J}.${+H+1}.0-0`:K?(o("replaceTilde pr",K),ne=`>=${J}.${H}.${Q}-${K} <${J}.${+H+1}.0-0`):ne=`>=${J}.${H}.${Q} <${J}.${+H+1}.0-0`,o("tilde return",ne),ne})},R=(j,U)=>j.trim().split(/\s+/).map(G=>F(G,U)).join(" "),F=(j,U)=>{o("caret",j,U);const G=U.loose?s[l.CARETLOOSE]:s[l.CARET],Z=U.includePrerelease?"-0":"";return j.replace(G,(J,H,Q,K,ne)=>{o("caret",j,J,H,Q,K,ne);let he;return b(H)?he="":b(Q)?he=`>=${H}.0.0${Z} <${+H+1}.0.0-0`:b(K)?H==="0"?he=`>=${H}.${Q}.0${Z} <${H}.${+Q+1}.0-0`:he=`>=${H}.${Q}.0${Z} <${+H+1}.0.0-0`:ne?(o("replaceCaret pr",ne),H==="0"?Q==="0"?he=`>=${H}.${Q}.${K}-${ne} <${H}.${Q}.${+K+1}-0`:he=`>=${H}.${Q}.${K}-${ne} <${H}.${+Q+1}.0-0`:he=`>=${H}.${Q}.${K}-${ne} <${+H+1}.0.0-0`):(o("no pr"),H==="0"?Q==="0"?he=`>=${H}.${Q}.${K}${Z} <${H}.${Q}.${+K+1}-0`:he=`>=${H}.${Q}.${K}${Z} <${H}.${+Q+1}.0-0`:he=`>=${H}.${Q}.${K} <${+H+1}.0.0-0`),o("caret return",he),he})},T=(j,U)=>(o("replaceXRanges",j,U),j.split(/\s+/).map(G=>P(G,U)).join(" ")),P=(j,U)=>{j=j.trim();const G=U.loose?s[l.XRANGELOOSE]:s[l.XRANGE];return j.replace(G,(Z,J,H,Q,K,ne)=>{o("xRange",j,Z,J,H,Q,K,ne);const he=b(H),$e=he||b(Q),Ee=$e||b(K),we=Ee;return J==="="&&we&&(J=""),ne=U.includePrerelease?"-0":"",he?J===">"||J==="<"?Z="<0.0.0-0":Z="*":J&&we?($e&&(Q=0),K=0,J===">"?(J=">=",$e?(H=+H+1,Q=0,K=0):(Q=+Q+1,K=0)):J==="<="&&(J="<",$e?H=+H+1:Q=+Q+1),J==="<"&&(ne="-0"),Z=`${J+H}.${Q}.${K}${ne}`):$e?Z=`>=${H}.0.0${ne} <${+H+1}.0.0-0`:Ee&&(Z=`>=${H}.${Q}.0${ne} <${H}.${+Q+1}.0-0`),o("xRange return",Z),Z})},B=(j,U)=>(o("replaceStars",j,U),j.trim().replace(s[l.STAR],"")),O=(j,U)=>(o("replaceGTE0",j,U),j.trim().replace(s[U.includePrerelease?l.GTE0PRE:l.GTE0],"")),D=j=>(U,G,Z,J,H,Q,K,ne,he,$e,Ee,we,Ae)=>(b(Z)?G="":b(J)?G=`>=${Z}.0.0${j?"-0":""}`:b(H)?G=`>=${Z}.${J}.0${j?"-0":""}`:Q?G=`>=${G}`:G=`>=${G}${j?"-0":""}`,b(he)?ne="":b($e)?ne=`<${+he+1}.0.0-0`:b(Ee)?ne=`<${he}.${+$e+1}.0-0`:we?ne=`<=${he}.${$e}.${Ee}-${we}`:j?ne=`<${he}.${$e}.${+Ee+1}-0`:ne=`<=${ne}`,`${G} ${ne}`.trim()),W=(j,U,G)=>{for(let Z=0;Z<j.length;Z++)if(!j[Z].test(U))return!1;if(U.prerelease.length&&!G.includePrerelease){for(let Z=0;Z<j.length;Z++)if(o(j[Z].semver),j[Z].semver!==r.ANY&&j[Z].semver.prerelease.length>0){const J=j[Z].semver;if(J.major===U.major&&J.minor===U.minor&&J.patch===U.patch)return!0}return!1}return!0};return ER}const Tze=Tne(),Aze=(e,t,n)=>{try{t=new Tze(t,n)}catch{return!1}return t.test(e)};var Fze=Aze,Ane=M4e(Fze);function Mze(e,t,n){const i=e.open(t),r=1e4,o=250,{origin:a}=new URL(t);let s=~~(r/o);function l(c){c.source===i&&(s=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){s<=0||(i.postMessage(n,a),setTimeout(u,o),s-=1)}setTimeout(u,o)}var Nze=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Fne(e,...t){for(const n of t)Pze(e,n);return e}function Pze(e,t){for(const n of Object.keys(t))Cm(e,n,t[n],!0)}const ha=vMe;let uv=b3e;const Kx=typeof window<"u"?window:void 0;var E8;uv===void 0&&((E8=Kx==null?void 0:Kx.vl)!=null&&E8.compile)&&(uv=Kx.vl);const $ze={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Oze={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},M0={vega:"Vega","vega-lite":"Vega-Lite"},Qw={vega:ha.version,"vega-lite":uv?uv.version:"not available"},Ize={vega:e=>e,"vega-lite":(e,t)=>uv.compile(e,{config:t}).spec},Lze=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Dze="chart-wrapper";function zze(e){return typeof e=="function"}function o8(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(r+e+o),a.document.title=`${M0[i]} JSON Source`}function jze(e,t){if(e.$schema){const n=bne(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${M0[n.library]}, but mode argument sets ${M0[t]??t}.`);const i=n.library;return Ane(Qw[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${M0[i]} ${n.version}, but the current version of ${M0[i]} is v${Qw[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Mne(e){return!!(e&&"load"in e)}function a8(e){return Mne(e)?e:ha.loader(e)}function Bze(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Ie(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Hze(e,t,n={}){let i,r;Ie(t)?(r=a8(n.loader),i=JSON.parse(await r.load(t))):i=t;const o=Bze(i),a=o.loader;(!r||a)&&(r=a8(n.loader??a));const s=await s8(o,r),l=await s8(n,r),u={...Fne(l,s),config:Sm(l.config??{},s.config??{})};return await Wze(e,i,u,r)}async function s8(e,t){const n=Ie(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Ie(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function Uze(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Wze(e,t,n={},i){const r=n.theme?Sm(w4e[n.theme],n.config??{}):n.config,o=Mc(n.actions)?n.actions:Fne({},$ze,n.actions??{}),a={...Oze,...n.i18n},s=n.renderer??"canvas",l=n.logLevel??ha.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const R="vega-embed-style",{root:F,rootContainer:T}=Uze(c);if(!F.getElementById(R)){const P=document.createElement("style");P.id=R,P.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Nze.toString():n.defaultStyle,T.appendChild(P)}}const d=jze(t,n.mode);let h=Ize[d](t,r);if(d==="vega-lite"&&h.$schema){const R=bne(h.$schema);Ane(Qw.vega,`^${R.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${R.version}, but current version is v${Qw.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let m=c;if(o){const R=document.createElement("div");R.classList.add(Dze),c.appendChild(R),m=R}const g=n.patch;if(g&&(h=g instanceof Function?g(h):I2(h,g,!0,!1).newDocument),n.formatLocale&&ha.formatLocale(n.formatLocale),n.timeFormatLocale&&ha.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const R in n.expressionFunctions){const F=n.expressionFunctions[R];"fn"in F?ha.expressionFunction(R,F.fn,F.visitor):F instanceof Function&&ha.expressionFunction(R,F)}const{ast:y}=n,v=ha.parse(h,d==="vega-lite"?{}:r,{ast:y}),_=new(n.viewClass||ha.View)(v,{loader:i,logLevel:l,renderer:s,...y?{expr:ha.expressionInterpreter??n.expr??TMe}:{}});if(_.addSignalListener("autosize",(R,F)=>{const{type:T}=F;T=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):T=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):T=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:R,tooltip:F}=n,T=R&&!Mne(R)?R==null?void 0:R.baseURL:void 0,P=zze(F)?F:new F4e({baseURL:T,...F===!0?{}:F}).call;_.tooltip(P)}let{hover:b}=n;if(b===void 0&&(b=d==="vega"),b){const{hoverSet:R,updateSet:F}=typeof b=="boolean"?{}:b;_.hover(R,F)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(m,n.bind).runAsync();let S;if(o!==!1){let R=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=a.CLICK_TO_VIEW_ACTIONS,c.append(T),R=T;const P=document.createElement("summary");P.innerHTML=Lze,T.append(P),S=B=>{T.contains(B.target)||T.removeAttribute("open")},document.addEventListener("click",S)}const F=document.createElement("div");if(R.append(F),F.classList.add("vega-actions"),o===!0||o.export!==!1){for(const T of["svg","png"])if(o===!0||o.export===!0||o.export[T]){const P=a[`${T.toUpperCase()}_ACTION`],B=document.createElement("a"),O=Le(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;B.text=P,B.href="#",B.target="_blank",B.download=`${u}.${T}`,B.addEventListener("mousedown",async function(D){D.preventDefault();const W=await _.toImageURL(T,O);this.href=W}),F.append(B)}}if(o===!0||o.source!==!1){const T=document.createElement("a");T.text=a.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(P){o8(QE(t),n.sourceHeader??"",n.sourceFooter??"",d),P.preventDefault()}),F.append(T)}if(d==="vega-lite"&&(o===!0||o.compiled!==!1)){const T=document.createElement("a");T.text=a.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(P){o8(QE(h),n.sourceHeader??"",n.sourceFooter??"","vega"),P.preventDefault()}),F.append(T)}if(o===!0||o.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",P=document.createElement("a");P.text=a.EDITOR_ACTION,P.href="#",P.addEventListener("click",function(B){Mze(window,T,{config:r,mode:d,renderer:s,spec:QE(t)}),B.preventDefault()}),F.append(P)}}function k(){S&&document.removeEventListener("click",S),_.finalize()}return{view:_,spec:t,vgSpec:h,finalize:k,embedOptions:n}}function Gze(e){return!!e&&{}.toString.call(e)==="[object Function]"}function qze(e,t,n){n&&(Gze(n)?n(e.data(t)):e.change(t,ha.changeset().remove(()=>!0).insert(n)))}function Vze(e,t){Object.keys(t).forEach(n=>{qze(e,n,t[n])})}function Nne(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(i=>{t.add(i)})}),t}const Pne=()=>{};function kR(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}var Yze=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){var a=o[r];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const Zze=Td(Yze);function Xze(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i=Nne([e,t]);return i.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),i.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(r=>!(r in e)||!(r in t)||!Zze(e[r],t[r]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function l8(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function RR(e){const{spec:t,width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function N0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $ne extends Pt.PureComponent{constructor(){super(...arguments),N0(this,"containerRef",Pt.createRef()),N0(this,"resultPromise",void 0),N0(this,"handleError",t=>{const{onError:n=Pne}=this.props;n(t,this.containerRef.current),console.warn(t)}),N0(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Nne([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(i=>this.props[i]!==t[i]))this.clearView(),this.createView();else{const i=Xze(RR(this.props),RR(t)),{signalListeners:r}=this.props,{signalListeners:o}=t;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const a=!BT(r,o);this.modifyView(s=>{i.width!==!1&&s.width(i.width),i.height!==!1&&s.height(i.height),a&&(o&&l8(s,o),r&&kR(s,r)),s.run()})}else BT(r,o)||this.modifyView(a=>{o&&l8(a,o),r&&kR(a,r),a.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:i={},width:r,height:o,...a}=this.props;if(this.containerRef.current){const s=RR(this.props);this.resultPromise=Hze(this.containerRef.current,s,a).then(l=>{if(l){const{view:u}=l;kR(u,i)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Pt.createElement("div",{ref:this.containerRef,className:t,style:n})}}N0($ne,"propTypes",{className:bn.string,onError:bn.func});function eM(){return eM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eM.apply(this,arguments)}function tM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Kze={};class eD extends Pt.PureComponent{constructor(){super(...arguments),tM(this,"vegaEmbed",Pt.createRef()),tM(this,"handleNewView",t=>{this.update();const{onNewView:n=Pne}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){BT(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Vze(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Pt.createElement($ne,eM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}tM(eD,"defaultProps",{data:Kze});var One={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u8=Pt.createContext&&Pt.createContext(One),Jze=["attr","size","title"];function Qze(e,t){if(e==null)return{};var n=eje(e,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function eje(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e2.apply(this,arguments)}function c8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function t2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c8(Object(n),!0).forEach(function(i){tje(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function tje(e,t,n){return t=nje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nje(e){var t=ije(e,"string");return typeof t=="symbol"?t:String(t)}function ije(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ine(e){return e&&e.map((t,n)=>Pt.createElement(t.tag,t2({key:n},t.attr),Ine(t.child)))}function qc(e){return t=>Pt.createElement(rje,e2({attr:t2({},e.attr)},t),Ine(e.child))}function rje(e){var t=n=>{var{attr:i,size:r,title:o}=e,a=Qze(e,Jze),s=r||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),Pt.createElement("svg",e2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:l,style:t2(t2({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Pt.createElement("title",null,o),e.children)};return u8!==void 0?Pt.createElement(u8.Consumer,null,n=>t(n)):t(One)}function oje(e){return qc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function aje(e){return qc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function sje(e){return qc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function lje(e){return qc({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function uje(e){return qc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"},child:[]}]})(e)}function cje(e){return qc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(e)}const fje={0:"#E90051",1:"#ED2641",2:"#F24C31",3:"#F67120",4:"#FB9710",5:"#FFBD00",6:"#F5C029",7:"#ECC352",8:"#E2C67A",9:"#D9C9A3",10:"#CFCCCC",11:"#AAC2C6",12:"#86B9BF",13:"#61AFB9",14:"#3DA6B2",15:"#189CAC",16:"#2B8BAC",17:"#3E7AAC",18:"#5068AD",19:"#6357AD"},dje={0:"#73B2FF",1:"#738FE5",2:"#746DCB",3:"#754BB1",4:"#5D5CAC",5:"#3F77AC",6:"#2192AC",7:"#48B0AF",8:"#91D0B5",9:"#DAEFBB",10:"#FFF4A0",11:"#FFDF64",12:"#FFCA28",13:"#FCA908",14:"#F56D22",15:"#EE313B",16:"#EA0956",17:"#F14178",18:"#F87A99",19:"#FFB3BB"},hje={0:"#FFB3BB",1:"#F87A99",2:"#F14178",3:"#EA0956",4:"#EE313B",5:"#F56D22",6:"#FCA908",7:"#FFCA28",8:"#FFDF64",9:"#FFF4A0",10:"#DAEFBB",11:"#91D0B5",12:"#48B0AF",13:"#2192AC",14:"#3F77AC",15:"#5D5CAC",16:"#754BB1",17:"#746DCB",18:"#738FE5",19:"#73B2FF"},pje={ciff_divergent:fje,CIFF20:dje,CIFF20_r:hje};function mje(e){return[].map.call(e,(t,n)=>[t,n]).reduce((t,n)=>n[0]>t[0]?n:t)[1]}function Lne(e){return[].map.call(e,(t,n)=>[t,n]).reduce((t,n)=>n[0]<t[0]?n:t)[1]}function TR({value:e,precision:t=1}){return e?parseFloat(e).toFixed(t):"-"}function Lh(e,t=3){return e?parseFloat(e).toFixed(t):"-"}function Dne(e,t,n){if(e<-90)return null;{e=(e-t[0])/(t[1]-t[0]);const i=pje[n],r=Math.min(Math.max(0,parseInt(19*e)),19),o=String(r);return i[o]}}function gje({name:e,items:t,defaultOpt:n,value:i,pass:r,noDefault:o,extras:a}){i===void 0&&(i=n);function s(l){r(l.target.value),a&&a()}return w.jsx("div",{children:w.jsxs(no.Select,{id:"select"+e,value:i,onChange:s,children:[o?"":w.jsx("option",{value:""}),t.map((l,u)=>{const c=l.replaceAll(" ","");return w.jsx("option",{value:c,children:l},u)})]},"select"+e)})}function yje({element:e,title:t}){const[n,i]=M.useState(!1);function r(){i(!0)}function o(){i(!1)}return w.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[w.jsx("span",{className:"mx-1",title:"Fullscreen",onClick:r,children:w.jsx(sje,{})}),w.jsxs(Rl,{show:n,onHide:o,fullscreen:!0,children:[w.jsx(Rl.Header,{closeButton:!0,children:t}),w.jsx(Rl.Body,{children:e})]})]})}function f8({element:e,elemID:t,param:n,title:i}){return w.jsx("div",{className:"row m-0 p-0",children:w.jsx("div",{className:"col-sm",children:w.jsxs("div",{className:"row float-end",children:[w.jsx("div",{className:"m-0 p-0 px-1 col",children:w.jsx(w.Fragment,{})}),w.jsx("div",{className:"m-0 p-0 px-1 col",children:w.jsx(w.Fragment,{})}),w.jsx("div",{className:"m-0 p-0 px-1 col",children:w.jsx(yje,{element:e,title:i})})]})})})}function vje(e){return qc({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"},child:[]}]})(e)}function xje(e){return qc({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"},child:[]}]})(e)}const _je="/ciff_portal/assets/exceedance-5diRcl3D.png",bje=w.jsxs("div",{children:[w.jsx("b",{children:"For indicators where an increase in the value means improvement over time"}),w.jsxs("p",{children:["An area presenting the smallest increase (or a decrease in value) over time of the selected indicator is classified as being ",w.jsx("i",{children:"the least performing"}),". An area presenting the highest increase over time of the selected indicator is classified as being ",w.jsx("i",{children:"the highest performing"}),"."]}),w.jsx("b",{children:"For indicators where a decrease in the value means improvement over time"}),w.jsxs("p",{children:["An area presenting the highest decrease over time of the selected indicator is classified as being ",w.jsx("i",{children:"the highest performing"}),". An area presenting the smallest decrease over time of the selected indicator (or an increase in value) is classified as being ",w.jsx("i",{children:"the least performing"}),"."]})]}),wje=w.jsx("div",{children:w.jsxs("blockquote",{children:["Irrespective of the direction of each indicator, the legend displays a better condition (improvement over time when looking at time change) in blue, and a worse condition (worsening over time when looking at time change) in red. For example,",w.jsxs("ul",{children:[w.jsx("li",{children:" increasing value meaning better condition like % of contraceptive prevalence "}),w.jsx("li",{children:" increasing value meaning worse condition like % of low birth weight "})]})]})}),Sje=w.jsxs("div",{children:[w.jsx("p",{children:'The values shown on the map are our "best guess" given the data and modelling but as with any statistics there are a range of plausible values.'}),w.jsx("p",{children:"The user can choose the probability that there is meaningful improvement or worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),w.jsx(zne,{}),w.jsx("b",{children:"Technical:"}),w.jsxs("p",{children:["The ",w.jsx("i",{children:"exceedance probability"})," is the probability, given the observed data, that the true change in a district is negative for improvement or positive for worsening."]}),w.jsx("p",{children:"We use that to filter which districts to show on the map. Districts where the exceedance probability is less than the selected limit will be filtered out."}),w.jsx("hr",{}),"Find out more on the ",w.jsx("a",{href:"#technote-2",target:"_blank",children:"Technical Note 2"})," page."]}),Cje=w.jsxs("div",{children:[w.jsx("p",{children:'The values shown on the map are our "best guess" given the data and modelling but as with any statistics there are a range of plausible values.'}),w.jsx("p",{children:"The user can choose the probability that there is meaningful improvement or worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),w.jsx(zne,{}),w.jsx("b",{children:"Technical:"}),w.jsxs("p",{children:["The ",w.jsx("i",{children:"exceedance probability"})," is the probability, given the observed data, that the true change in a district is positive for improvement or negative for worsening."]}),w.jsx("p",{children:"We use that to filter which districts to show on the map. Districts where the exceedance probability is less than the selected limit will be filtered out."}),w.jsx("hr",{}),"Find out more on the ",w.jsx("a",{href:"#tech-note-2",target:"_blank",children:"Technical Note 2"})," page."]}),Eje=w.jsxs("div",{children:[w.jsx("p",{children:"While the surveys were designed to be representative at the district level, caution is advised in interpreting and utilizing the findings due to the inherent limitations posed by small sample sizes for the mentioned indicators. Furthermore, it is important to note that the indicators discussed herein are rare events, further emphasizing the need for careful consideration and caution in their interpretation, given the limited sample sizes at the district level."}),w.jsxs("p",{children:["See ",w.jsx("a",{href:"#tech-note-1",target:"_blank",children:"Technical Note 1"})," from round 1 (NFHS-4) to round 2 (NFHS-5) and national official boundaries to enable over time comparisons."]})]}),kje=w.jsxs("div",{children:["Since census boundaries aligned with NFHS-4 boundaries, the same two-step approached as described in the ",w.jsx("a",{href:"#tech-note-1",children:"Technical Note 1"})," was applied."]});function zne(){const[e,t]=M.useState(!1);function n(){t(!0)}function i(){t(!1)}return w.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[w.jsx(CH,{variant:"danger",size:"sm",onClick:n,children:"Illustration"}),w.jsxs(Rl,{show:e,onHide:i,size:"lg",children:[w.jsx(Rl.Header,{closeButton:!0,children:w.jsx("h4",{children:"Illustration"})}),w.jsx(Rl.Body,{children:w.jsx("img",{alt:"exceedance",src:_je,width:"100%"})})]})]})}function Rje({content:e}){const t=w.jsx(fp,{children:w.jsx(fp.Body,{children:e})});return w.jsx(NW,{trigger:"click",placement:"bottom-start",overlay:t,children:w.jsx("span",{className:"mx-1",title:"Click for more",children:w.jsx(vje,{})})})}function tD({about:e,positive:t=!0,placement:n="auto-start"}){const i={"How to read table":bje,"About this color bar":wje,"NNote on the change certainty":Sje,"Note on the change certainty":Cje,"Note on changing boundaries":Eje,"Note on census boundaries":kje},r=t?i[e]:i["N"+e],o=w.jsxs(fp,{children:[w.jsx(fp.Header,{children:e}),w.jsx(fp.Body,{children:r})]});return w.jsx(NW,{trigger:"click",placement:n,overlay:o,children:w.jsx("span",{className:"mx-1",title:e,children:w.jsx(xje,{})})})}const n2={burkinafaso:{Name:"Burkina Faso",TLC:"BFA",Prefix:"BFA",Adm1:"Region",Adm2:"Province",Center:[12.7,-1.8],Zoom:[6],DistrictOnly:[],NoR1:[],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"}}},india:{Name:"India",TLC:"IND",Prefix:"",N1:36,N2:742,Adm1:"State",Adm2:"District",Center:[22.9,79.6],Zoom:[4],DistrictOnly:["NMR","Unsafe_Ab","CHMR","Lab_child","Stillbirth"],NoR1:[],NoR2:["Lab_child"],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"Child age in India is between 5-17. For child worker, census estimates were used to calculate the indicator, and only had one point in time.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"}}},kenya:{Name:"Kenya",TLC:"KEN",Prefix:"KEN_",N1:47,N2:335,Adm1:"County",Adm2:"Sub-county",Center:[.6,37.5],Zoom:[6],DistrictOnly:["U5","NMR","NTDs_fil","NTDs_oncho","LBW","Stillbirth","Lab_child"],NoR1:["Lab_child"],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"Only county-level estimate is available",Min:0,Max:30,Delta:2.5,CHMin:-15,CHMax:15,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:72,Delta:4,CHMin:-45,CHMax:45,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-20,CHMax:56,CHDelta:4,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:84,CHDelta:6,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:51,Delta:3,CHMin:-6,CHMax:30,CHDelta:2,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:15,Max:80,Delta:5,CHMin:-60,CHMax:30,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:15,Max:90,Delta:5,CHMin:-35,CHMax:60,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:76,Delta:4,CHMin:-25,CHMax:50,CHDelta:5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:0,Max:100,Delta:5,CHMin:-64,CHMax:64,CHDelta:8,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:0,Max:76,Delta:4,CHMin:-60,CHMax:40,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:0,Max:76,Delta:4,CHMin:-60,CHMax:40,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:76,Delta:4,CHMin:-27,CHMax:18,CHDelta:3,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wasting:{Indicator:"Prevalence of wasting",Theme:"Nutrition",Remark:"",Min:0,Max:64,Delta:4,CHMin:-16,CHMax:20,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-90,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-90,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"",Min:10,Max:30,Delta:2.5,CHMin:-4,CHMax:0,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2017"},U5:{Indicator:"Under five mortality rate",Theme:"Child Health",Remark:"",Min:20,Max:100,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2017"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"Child age in Kenya is between 5-17. Only county-level estimate is available.",Min:0,Max:40,Delta:.05,CHMin:-20,CHMax:20,CHDelta:-.05,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"",R2:"Census",Y1:null,Y2:"2019"},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"Only county-level estimate is available.",Min:0,Max:80,Delta:2,CHMin:-60,CHMax:60,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"County",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NTDs_fil:{Indicator:"NTDs: Lymphatic filariasis",Theme:"Neglected Tropical Diseases",Remark:"",Min:0,Max:100,Delta:2,CHMin:-30,CHMax:30,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2018"},NTDs_oncho:{Indicator:"NTDs: Onchocerciasis",Theme:"Neglected Tropical Diseases",Remark:"",Min:0,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2018"}}},nigeria:{Name:"Nigeria",TLC:"NGA",Prefix:"NGA",Adm1:"State",Adm2:"Local Government Area",Center:[9.5,8],Zoom:[6],DistrictOnly:[],NoR1:[],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NAR_prim:{Indicator:"Net primary school attendace",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"}}}},ic={LBW:{Indicator:"Low birth weight",Theme:"Child health",Definition:"Percentage (%) of live births in the 5 years preceding the survey weighed at birth reported as less than 2.5 kg",Unit:"per cent",Denominator:"live births in the five (or three) years preceding the survey with a reported birth weight",Statement:"of live births weighed less than 2.5 kg at birth",Proportional:!1},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Definition:"Percentage (%) of children aged 6 to 23 months who had at least minimum meal frequency and minimum diversified diet during the previous day",Unit:"per cent",Denominator:"children aged 6 to 23 months",Statement:"of children aged 6 to 23 months had at least minimum meal frequency and minimum diversified diet during the previous day",Proportional:!0},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Definition:"Percentage (%) of children wasted (below -3 SD of weight for height according to the WHOs standard)",Unit:"per cent",Denominator:"children under age five",Statement:"of children under age five were wasted",Proportional:!1},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Definition:"Percentage (%) of women 15 to 19 years old who had given birth or were pregnant with their first child over the full sample of women aged 15 to 49",Unit:"per cent",Denominator:"women aged 15 to 49",Statement:"of women aged 15 to 19 years old (over the full sample of women aged 15 to 49) had given birth or were pregnant with their first child",Proportional:!1},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Definition:"Percentage (%) of births that were either wanted earlier or later than occurred (mistimed) or not wanted at all",Unit:"per cent",Denominator:"",Statement:"of births were either wanted earlier or later than occurred (mistimed) or not wanted at all",Proportional:!1},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Definition:"Percentage of women age 15 to 49 with mild, moderate or severe anaemia or with any anaemia",Unit:"per cent",Denominator:"women interviewed (check with DHS if it's all women 15 ot 49 or a subsample of women who were asked about anaemia",Statement:"of women age 15 to 49 had mild, moderate or severe anaemia",Proportional:!1},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a birth in the last 5 years, who had at least 4 antenatal care visits for most recent birth",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey",Statement:"of women with a birth in the last 5 years had at least 4 antenatal care visits for most recent birth",Proportional:!0},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a live birth in the five years preceding the survey who received antenatal care (ANC) for the most recent birth with blood sample taken.",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey and received ANC",Statement:"of women with a live birth in the last five years received antenatal care (ANC) for the most recent birth with blood sample taken",Proportional:!0},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Definition:"Among women who received antenatal care for their most recent live birth in the past 5 years, the percentage (%) that received supplements (IFA, MMS).",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey",Statement:"of women who received antenatal care and supplements (IFA, MMS) for their most recent live birth in the past 5 years",Proportional:!0},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Definition:"Percentage (%) of women who had a live birth in the five years preceding the survey whose first antenatal care visit was at less than 4 months ",Unit:"per cent",Denominator:"",Statement:"of women had the first antenatal care visit at less than 4 months during their pregnancies",Proportional:!0},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a live birth in the five years preceding the survey who received antenatal care (ANC) for the most recent birth with urine sample taken.",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey and received ANC",Statement:"of women with a live birth in the last five years received antenatal care (ANC) for the most recent birth with urine sample taken.",Proportional:!0},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Definition:"Percentage (%) of youngest children under 6 months who were living with their mother who were exclusively breastfed under 6 months of age",Unit:"per cent",Denominator:"children under age 6 months",Statement:"of youngest children under 6 months were living with their mother who were exclusively breastfed under 6 months of age",Proportional:!0},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Definition:"Percentage (%) of currently married or in union women currently using any modern method of contraception",Unit:"per cent",Denominator:"all women",Statement:"of married or in union women currently use any modern method of contraception",Proportional:!0},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Definition:"Percentage (%) of women aged 20 to 24 years who were married or in a union before age 18. ",Unit:"per cent",Denominator:"women aged 15 to 49",Statement:"of women aged 20 to 24 years were married or in union before age 18. ",Proportional:!1},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Definition:"Percentage (%) of currently married or in union women employed in the 12 months preceding the survey. The indicator includes those who worked in the past year, those who were currently working and those who have a job but were on leave over the last 7 days.",Unit:"per cent",Denominator:"women currently in a union",Statement:"of currently married or in union women were employed",Proportional:!0},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Definition:"Percentage (%) of children of official primary school-age who were enrolled in primary education",Unit:"per cent",Denominator:"de facto household population of primary school age (this varies by Country)",Statement:"of children of official primary school age were enrolled in primary education",Proportional:!0},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Definition:"Percentage (%) of children of official secondary school-age who were enrolled in secondary education",Unit:"per cent",Denominator:"de facto household population of secondary school age (this varies by Country)",Statement:"Percentage (%) of children of official secondary school-age who were enrolled in secondary education",Proportional:!0},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Definition:"Percentage (%) of children under age five years stunted (below  to 2SD of height-for-age according to the World Health Organisations (WHO) standard).",Unit:"per cent",Denominator:"children under age five",Statement:"of children under age five years were stunted",Proportional:!1},Wasting:{Indicator:"Prevalence of wasting",Theme:"Nutrition",Definition:"Percentage (%) of children wasted (below  to 2SD of weight-for-height according to the World Health Organisations (WHO) standard).",Unit:"per cent",Denominator:"children",Statement:"of children were wasted",Proportional:!1},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Definition:"Percentage (%) of the population with access to improved toilet facilities (Improved sanitation facilities include flush toilet, pit latrine (with at least a slab) or a composting toilet)",Unit:"per cent",Denominator:"household level",Statement:"of the population had access to improved toilet facilities",Proportional:!0},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Definition:"Percentage (%) of the population with access to improved drinking water (Improved sources of drinking water include water piped into dwelling or yard/plot, to a neighbour, access to a public tap/standpipe, tube well or borehole, protected well, protected spring, rainwater, tanker truck, cart with small tank and bottled water)",Unit:"per cent",Denominator:"household level",Statement:"of the population had access to improved drinking water",Proportional:!0},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Definition:"Probability (expressedper 1,000 live births) of a child dying before reaching the age of 1 month over a 5-year reference period",Unit:"per 1,000 live births",Denominator:"admin unit level",Statement:"were dying before reaching the age of 1 month over a 5-year reference period",Proportional:!1},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Definition:"Percentage (%) of pregnancies terminated either by persons lacking the necessary skills or in an environment that does not conform to minimal medical standards or both ",Unit:"per cent",Denominator:"",Statement:"of pregnancies  were terminated either by persons lacking the necessary skills or in an environment that does not conform to minimal medical standards",Proportional:!1},U5:{Indicator:"Under five mortality rate",Theme:"Child Health",Definition:"",Unit:"",Denominator:"admin unit level",Statement:"",Proportional:!1},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Definition:"Probability (expressedper 1,000 children surviving their first birthday) of a child dying on or after their first birthday but before reaching the age of five years over a 5-year reference period.",Unit:"per 1,000 children surviving to their first birthday",Denominator:"admin unit level",Statement:"were dying on or after their first birthday but before reaching the age of five years",Proportional:!1},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Definition:"Percentage (%) of children engaged in any form of work (both marginal and full-time) that may compromise their physical, mental, social or educational development. The official definition of child age may vary between countries.",Unit:"per cent",Denominator:"",Statement:"of children engaged in any form of work that may compromise their physical, mental, social or educational development",Proportional:!1},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Definition:"Number of pregnancies that lasted seven or more months and terminated in a foetal death in the five years preceding the survey per 1,000 births (stillbirths plus the number of live births in the five years preceding the survey)",Unit:"per 1,000 births",Denominator:"admin unit level",Statement:"were associated with pregnancies that lasted seven or more months and terminated in a foetal death",Proportional:!1},NTDs_helm:{Indicator:"NTDs: Soil-transmitted helminth infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence of soil-transmitted helminth infection in the population",Unit:"per 100,000 people",Denominator:"admin unit level",Statement:"got soil-transmitted helminth infection",Proportional:!1},NTDs_schi:{Indicator:"NTDs: Schistosomiasis",Theme:"Neglected Tropical Diseases",Definition:"Prevalence of schistosomiasis infection in the population",Unit:"per 100,000 people",Denominator:"admin unit level",Statement:"got schistosomiasis infection",Proportional:!1},NTDs_fil:{Indicator:"NTDs: Lymphatic filariasis infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence of lymphatic filariasis infection in the population",Unit:"per 100,000 people",Denominator:"admin unit level",Statement:"got lymphatic filariasis infection",Proportional:!1},NTDs_oncho:{Indicator:"NTDs: Onchocerciasis infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence of onchocerciasis infection in the population",Unit:"per 100,000 people",Denominator:"admin unit level",Statement:"got onchocerciasis infection",Proportional:!1}},d8=()=>({weight:1,opacity:.5,color:"black",fillOpacity:0}),Tje=()=>({weight:3,opacity:1,color:"black",fillOpacity:0}),Aje=()=>({weight:.8,opacity:1,color:"#000000",fillOpacity:0}),h8={ciff_divergent:{0:"#E90051",1:"#ED2641",2:"#F24C31",3:"#F67120",4:"#FB9710",5:"#FFBD00",6:"#F5C029",7:"#ECC352",8:"#E2C67A",9:"#D9C9A3",10:"#CFCCCC",11:"#AAC2C6",12:"#86B9BF",13:"#61AFB9",14:"#3DA6B2",15:"#189CAC",16:"#2B8BAC",17:"#3E7AAC",18:"#5068AD",19:"#6357AD"},CIFF20:{0:"#73B2FF",1:"#738FE5",2:"#746DCB",3:"#754BB1",4:"#5D5CAC",5:"#3F77AC",6:"#2192AC",7:"#48B0AF",8:"#91D0B5",9:"#DAEFBB",10:"#FFF4A0",11:"#FFDF64",12:"#FFCA28",13:"#FCA908",14:"#F56D22",15:"#EE313B",16:"#EA0956",17:"#F14178",18:"#F87A99",19:"#FFB3BB"},CIFF20_r:{0:"#FFB3BB",1:"#F87A99",2:"#F14178",3:"#EA0956",4:"#EE313B",5:"#F56D22",6:"#FCA908",7:"#FFCA28",8:"#FFDF64",9:"#FFF4A0",10:"#DAEFBB",11:"#91D0B5",12:"#48B0AF",13:"#2192AC",14:"#3F77AC",15:"#5D5CAC",16:"#754BB1",17:"#746DCB",18:"#738FE5",19:"#73B2FF"}};let jne=[];Object.keys(ic).forEach(e=>{ic[e].Proportional&&jne.push(e)});const nM=jne,t0={"Show Improvement":{posA:{label:"any (>0%)",limit:0},posB:{label:"likely (>90%)",limit:90},posC:{label:"highly likely (>95%)",limit:95}},"Show Worsening":{negA:{label:"any (>0%)",limit:0},negB:{label:"likely (>90%)",limit:90},negC:{label:"highly likely (>95%)",limit:95}}},Fje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,title:{text:"An increase in the indicator below means improvement",anchor:"start"},data:[{name:"input_data",values:[]},{name:"data_0",source:"input_data",transform:[{type:"filter",expr:"(datum.Proportional === true)"},{type:"filter",expr:'isValid(datum["Mean"]) && isFinite(+datum["Mean"])'}]},{name:"row_domain",source:"data_0",transform:[{type:"aggregate",groupby:["Indicator"]}]}],signals:[{name:"child_width",value:200},{name:"child_height",value:15}],layout:{padding:{row:2,column:20},columns:1,bounds:"full",align:"all"},marks:[{name:"row_header",type:"group",role:"row-header",from:{data:"row_domain"},sort:{field:'datum["Indicator"]',order:"ascending"},title:{text:{signal:'isValid(parent["Indicator"]) ? parent["Indicator"] : ""+parent["Indicator"]'},orient:"left",style:"guide-label",frame:"group",baseline:"middle",align:"left",anchor:"middle",angle:0,offset:10},encode:{update:{height:{signal:"child_height"}}},axes:[{scale:"y",orient:"left",grid:!1,labels:!1,zindex:0}]},{name:"column_footer",type:"group",role:"column-footer",encode:{update:{width:{signal:"child_width"}}},axes:[{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(child_width/40)"},zindex:0}]},{name:"cell",type:"group",style:"cell",from:{facet:{name:"facet",data:"data_0",groupby:["Indicator"]}},sort:{field:['datum["Indicator"]'],order:["ascending"]},encode:{update:{width:{signal:"child_width"},height:{signal:"child_height"}}},marks:[{name:"child_marks",type:"rect",style:["bar"],from:{data:"facet"},encode:{update:{fill:{scale:"color",field:"Round"},tooltip:{signal:'{"Round": isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"], "Mean": format(datum["Mean"], ".1f"), "Std": format(datum["Std"], ".1f")}'},ariaRoleDescription:{value:"bar"},description:{signal:'"Round: " + (isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"]) + "; Mean: " + (format(datum["Mean"], ".1f")) + "; Std: " + (format(datum["Std"], ".1f"))'},x:[{test:'!isValid(datum["Mean"]) || !isFinite(+datum["Mean"])',value:0},{scale:"x",field:"Mean"}],x2:{value:0},y:{scale:"y",field:"Round"},height:{scale:"y",band:1}}}}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(child_width/40)"},domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0}]}],scales:[{name:"x",type:"linear",domain:{data:"data_0",field:"Mean"},range:[0,{signal:"child_width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{data:"data_0",field:"Round",sort:!0},range:[0,{signal:"child_height"}],paddingInner:.1,paddingOuter:.05},{name:"color",type:"ordinal",domain:{data:"data_0",field:"Round",sort:!0},range:["#2b2b2b","#e90051"]}],legends:[{orient:"top",columns:2,fill:"color",symbolType:"square",title:""}]},Mje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,width:200,height:275,data:[{name:"input_data",values:[]},{name:"data_0",source:"input_data",transform:[{type:"formula",expr:"datum.ANC_4plus_R1L",as:"R1L"},{type:"formula",expr:"datum.ANC_4plus_R1",as:"R1"},{type:"formula",expr:"datum.ANC_4plus_R1U",as:"R1U"},{type:"formula",expr:"datum.ANC_4plus_R2L",as:"R2L"},{type:"formula",expr:"datum.ANC_4plus_R2",as:"R2"},{type:"formula",expr:"datum.ANC_4plus_R2U",as:"R2U"},{type:"formula",expr:"datum.R1",as:"sorter"},{type:"fold",fields:["R1","R2"],as:["Round","Avg"]}]},{name:"data_2",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["Avg"]) && isFinite(+datum["Avg"])'}]},{name:"data_3",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_4",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]},{name:"data_5",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["Avg"]) && isFinite(+datum["Avg"])'}]}],marks:[{name:"layer_0_marks",type:"rect",style:["tick"],from:{data:"data_2"},encode:{update:{opacity:{value:.7},fill:{value:"#ffffff"},ariaRoleDescription:{value:"tick"},description:{signal:'"Avg: " + (format(datum["Avg"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"])'},xc:{scale:"x",field:"Avg"},yc:{scale:"y",field:"district",band:.5},height:{value:4},width:{value:1}}}},{name:"layer_1_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R1: " + (format(datum["R1"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R1L: " + (format(datum["R1L"], "")) + "; R2: " + (format(datum["R2"], ".1f"))'},x:{scale:"x",field:"R1"},x2:{scale:"x",field:"R1L"},yc:{scale:"y",field:"district",offset:-5,band:.5},height:{value:6}}}},{name:"layer_2_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R1: " + (format(datum["R1"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R1U: " + (format(datum["R1U"], "")) + "; R2: " + (format(datum["R2"], ".1f"))'},x:{scale:"x",field:"R1"},x2:{scale:"x",field:"R1U"},yc:{scale:"y",field:"district",offset:-5,band:.5},height:{value:6}}}},{name:"layer_3_marks",type:"rect",style:["rect"],from:{data:"data_4"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R2: " + (format(datum["R2"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R2L: " + (format(datum["R2L"], "")) + "; R1: " + (format(datum["R1"], ".1f"))'},x:{scale:"x",field:"R2"},x2:{scale:"x",field:"R2L"},yc:{scale:"y",field:"district",offset:5,band:.5},height:{value:6}}}},{name:"layer_4_marks",type:"rect",style:["rect"],from:{data:"data_4"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R2: " + (format(datum["R2"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R2U: " + (format(datum["R2U"], "")) + "; R1: " + (format(datum["R1"], ".1f"))'},x:{scale:"x",field:"R2"},x2:{scale:"x",field:"R2U"},yc:{scale:"y",field:"district",offset:5,band:.5},height:{value:6}}}},{name:"layer_5_marks",type:"rect",style:["tick"],from:{data:"data_5"},encode:{update:{opacity:{value:.7},fill:{scale:"color",field:"Round"},ariaRoleDescription:{value:"tick"},description:{signal:'"Avg: " + (format(datum["Avg"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; Round: " + (isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"])'},xc:{scale:"x",field:"Avg"},yc:{scale:"y",field:"district",offset:{scale:"yOffset",field:"Round"}},height:{value:8},width:{value:3}}}}],scales:[{name:"x",type:"linear",domain:{fields:[{data:"data_2",field:"Avg"},{data:"data_3",field:"R1"},{data:"data_3",field:"R1L"},{data:"data_3",field:"R1U"},{data:"data_4",field:"R2"},{data:"data_4",field:"R2L"},{data:"data_4",field:"R2U"},{data:"data_5",field:"Avg"}]},range:[0,{signal:"width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{data:"data_0",field:"district",sort:{op:"min",field:"sorter",order:"descending"}},range:[0,{signal:"height"}],paddingInner:0,paddingOuter:0},{name:"yOffset",type:"point",domain:{data:"data_5",field:"Round",sort:!0},range:[0,{signal:"bandwidth('y')"}],paddingOuter:.5},{name:"color",type:"ordinal",domain:{data:"data_5",field:"Round",sort:!0},range:["black","red"]}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(width/40)"},domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(width/40)"},zindex:0},{scale:"y",orient:"left",grid:!0,zindex:0}],legends:[{columns:2,orient:"top",fill:"color",direction:"horizontal",symbolType:"square",encode:{symbols:{update:{opacity:{value:.7}}}}}]},Nje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,width:250,title:{text:"A decrease in the indicator below means improvement",fontSize:12,subtitle:" ",frame:"group"},data:[{name:"data-input",values:[]},{name:"data_0",source:"data-input",transform:[{type:"fold",fields:["R1","R2"],as:["key","value"]},{type:"filter",expr:"(datum.Proportional === true)"}]},{name:"data_2",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["value"]) && isFinite(+datum["value"])'}]},{name:"data_3",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_4",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_5",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]},{name:"data_6",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]}],signals:[{name:"y_step",value:20},{name:"height",update:"bandspace(domain('y').length, 0, 0) * y_step"}],marks:[{name:"layer_0_marks",type:"symbol",style:["square"],from:{data:"data_2"},encode:{update:{opacity:{value:.7},size:{value:1},fill:{scale:"color",field:"key"},x:[{test:'!isValid(datum["value"]) || !isFinite(+datum["value"])',value:0},{scale:"x",field:"value"}],y:{scale:"y",field:"Indicator",band:.5},shape:{value:"square"}}}},{name:"layer_1_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R1": format(datum["R1"], ".2f")}`},x:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],x2:[{test:'!isValid(datum["R1L"]) || !isFinite(+datum["R1L"])',value:0},{scale:"x",field:"R1L"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5}}}},{name:"layer_2_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R1": format(datum["R1"], ".2f")}`},x:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],x2:[{test:'!isValid(datum["R1U"]) || !isFinite(+datum["R1U"])',value:0},{scale:"x",field:"R1U"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5}}}},{name:"layer_3_marks",type:"rect",style:["tick"],from:{data:"data_4"},encode:{update:{opacity:{value:.7},height:{value:6},fill:{value:"#000000"},xc:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5},width:{value:3}}}},{name:"layer_4_marks",type:"rect",style:["rect"],from:{data:"data_5"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R2": format(datum["R2"], ".2f")}`},x:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],x2:[{test:'!isValid(datum["R2L"]) || !isFinite(+datum["R2L"])',value:0},{scale:"x",field:"R2L"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5}}}},{name:"layer_5_marks",type:"rect",style:["rect"],from:{data:"data_5"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R2": format(datum["R2"], ".2f")}`},x:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],x2:[{test:'!isValid(datum["R2U"]) || !isFinite(+datum["R2U"])',value:0},{scale:"x",field:"R2U"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5}}}},{name:"layer_6_marks",type:"rect",style:["tick"],from:{data:"data_6"},encode:{update:{opacity:{value:.7},height:{value:6},fill:{value:"#ff0000"},xc:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5},width:{value:3}}}}],scales:[{name:"x",type:"linear",domain:{fields:[{data:"data_2",field:"value"},{data:"data_3",field:"R1"},{data:"data_3",field:"R1L"},{data:"data_3",field:"R1U"},{data:"data_4",field:"R1"},{data:"data_5",field:"R2"},{data:"data_5",field:"R2L"},{data:"data_5",field:"R2U"},{data:"data_6",field:"R2"}]},range:[0,{signal:"width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{fields:[{data:"data_0",field:"Indicator"},{data:"data_4",field:"Indicator"},{data:"data_6",field:"Indicator"}],sort:!0},range:{step:{signal:"y_step"}},paddingInner:0,paddingOuter:0},{name:"color",type:"ordinal",domain:{data:"data_2",field:"key",sort:!0},range:["black","red"]}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(width/40)"},domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"y",orient:"left",gridScale:"x",grid:!0,domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(width/40)"},zindex:0},{scale:"y",orient:"left",grid:!1,zindex:0}],legends:[{columns:2,orient:"top",fill:"color",direction:"horizontal",symbolType:"square",encode:{symbols:{update:{opacity:{value:.7}}}}}],config:{axis:{grid:!0}}},Bne={StateAggregate:Fje,DistrictRanges:Mje,AllInRanges:Nje};function Pje(e){return e.reduce((t,n)=>t+n)/e.length}function p8({input:e,proportional:t}){let n=JSON.parse(JSON.stringify(Bne.AllInRanges));return n.data[0].values=e,n.width=Math.max(200,100*Math.floor(window.innerWidth/500)),t?(n.title.text="Higher value means improvement",n.data[1].transform[1].expr="(datum.Proportional === true)"):(n.title.text="Lower value means improvement",n.data[1].transform[1].expr="(datum.Proportional === false)"),w.jsx(eD,{spec:n,actions:!1})}function $je(e,t){let n=[];return t.forEach(i=>{n.push({State:e.state,District:e.district,R1L:e[i+"_R1L"],R1U:e[i+"_R1U"],R1:e[i+"_R1"],R2L:e[i+"_R2L"],R2U:e[i+"_R2U"],R2:e[i+"_R2"],Indicator:ic[i].Indicator,Abbreviation:i,Proportional:ic[i].Proportional})}),n}function Oje({obj:e,indicators:t}){const[n,i]=M.useState(!1);function r(){i(!0)}function o(){i(!1)}const a=$je(e.original,t);return w.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[w.jsx("i",{className:"mx-1 pi pi-arrow-circle-right",title:"Show all indicator comparison",onClick:r}),w.jsxs(Rl,{show:n,onHide:o,size:"lg",children:[w.jsx(Rl.Header,{closeButton:!0,children:w.jsx("h4",{children:"All Indicator Comparison"})}),w.jsx(Rl.Body,{children:w.jsxs("div",{children:[w.jsxs("div",{className:"p-0 m-0 mb-2",children:["The charts below summarise the average values of all indicators in ",w.jsxs("b",{children:[e.original.district,", ",e.original.state]}),"."]}),w.jsx("hr",{}),w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"d-flex justify-content-center",children:w.jsx(p8,{input:a,proportional:!0})}),w.jsx("div",{className:"d-flex justify-content-center",children:w.jsx(p8,{input:a,proportional:!1})})]})]})})]})]})}function Ije({columns:e,data:t,palette:n,indicators:i}){if(t.length===0)return w.jsx("kbd",{children:"No data displayed. Modify the filter."});{const{getTableProps:r,getTableBodyProps:o,headerGroups:a,rows:s,prepareRow:l}=N3.useTable({columns:e,data:t},N3.useSortBy);return w.jsx("div",{style:{fontSize:"small"},children:w.jsxs(Kh,{bordered:!0,hover:!0,size:"sm",children:[w.jsx("thead",{children:a.map((u,c)=>w.jsxs("tr",{children:[w.jsx("td",{}),u.headers.map((d,h)=>w.jsxs("th",{...d.getHeaderProps(d.getSortByToggleProps()),children:[d.render("Header"),d.disableSortBy?w.jsx(w.Fragment,{}):w.jsx("span",{children:d.isSorted?d.isSortedDesc?" ":" ":" "})]},h))]},c))}),w.jsx("tbody",{children:s.map((u,c)=>(l(u),w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(Oje,{obj:u,indicators:i})}),u.cells.map((d,h)=>{let m={};if(n[d.column.Header]){const g=Dne(d.value,n[d.column.Header].Minmax,n[d.column.Header].Palette);m.backgroundColor=g,m.fontWeight="bold",m.textAlign=d.column.align}else m.textAlign=d.column.align;return w.jsx("td",{style:m,children:d.render("Cell")},h)})]},c)))})]})})}}function Lje({input:e,field:t}){if(e.length===0)return w.jsx("kbd",{children:"No data displayed. Modify the filter."});{const[n,i]=M.useState("SortbyName"),[r,o]=M.useState("ascending"),a=[t+"_R1",t+"_R2",t+"_CH"],s={SortbyName:"district",SortbyR1:a[0],SortbyR2:a[1],SortbyChange:a[2]};let l=JSON.parse(JSON.stringify(Bne.DistrictRanges));return l.height=25*e.length,l.width=Math.max(300,100*Math.floor(window.innerWidth/500)),l.data[0].values=e,l.data[1].transform[0].expr="datum."+t+"_R1L",l.data[1].transform[1].expr="datum."+t+"_R1",l.data[1].transform[2].expr="datum."+t+"_R1U",l.data[1].transform[3].expr="datum."+t+"_R2L",l.data[1].transform[4].expr="datum."+t+"_R2",l.data[1].transform[5].expr="datum."+t+"_R2U",l.data[1].transform[6].expr="datum."+s[n],l.scales[1].domain.sort.order=r,w.jsxs("div",{className:"row",children:[w.jsxs("div",{className:"p-0 mb-2",children:[w.jsx("div",{className:"float-start",style:{width:"180px"},children:w.jsx(gje,{items:["Sort by Name","Sort by R1","Sort by R2","Sort by Change"],defaultOpt:"SortbyName",noDefault:!0,name:"sortChart",value:n,pass:i})}),w.jsx("div",{className:"float-start m-2",children:w.jsx("button",{className:"map-btn",title:"reverse sort",onClick:()=>{o(r==="ascending"?"descending":"ascending")},children:r==="ascending"?" ":" "})})]}),w.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:w.jsx(eD,{spec:l,actions:!1})})]})}}function Dje({param:e,data:t,filterFunc:n}){const r=t.length===0?"":t[0].state,o=String(e.config.Adm1).toLowerCase(),a=String(e.config.Adm2).toLowerCase(),s=a.slice(-1)==="y"?a.slice(0,-1)+"ies":a+"s",l=e.config.indicators[e.indicator],u=Object.keys(e.config.indicators),c=ic[e.indicator],d=["R1","R2","CH"];let h={};d.forEach(F=>{h[F]={};const T=[l.Min,l.Max];F==="CH"?(h[F].Palette=l.Palette2,h[F].Minmax=[.5*(T[0]-T[1]),.5*(T[1]-T[0])]):(h[F].Palette=l.Palette1,h[F].Minmax=T)});const m=[{Header:`${e.config.Adm2} Name`,accessor:"district",align:"left"},{Header:"R1",accessor:`${e.indicator}_R1`,Cell:TR,sortType:"basic",align:"center"},{Header:"CI_R1",accessor:`${e.indicator}_R1CI`,disableSortBy:!0,align:"center"},{Header:"R2",accessor:`${e.indicator}_R2`,Cell:TR,sortType:"basic",align:"center"},{Header:"CI_R2",accessor:`${e.indicator}_R2CI`,disableSortBy:!0,align:"center"},{Header:"CH",accessor:`${e.indicator}_CH`,Cell:TR,sortType:"basic",align:"center"},{Header:"CI_CH",accessor:`${e.indicator}_CHCI`,disableSortBy:!0,align:"center"}],g=t.filter(n),y=M.useMemo(()=>w.jsx(Lje,{input:g,field:e.indicator}),[g]),v=M.useMemo(()=>["_R1","_R2","_CH"].map(F=>{let T={};function P(W){return W[e.indicator+F]!=null}const B=t.filter(P),O=B.map(W=>W[e.indicator+F]),D=B.map(W=>W.district);if(O.length>0){const W=mje(O),j=Lne(O);T.avg=Lh(Pje(O),1),nM.includes(e.indicator)?(T.best=D[W],T.worst=D[j],T.bestVal=Lh(O[W],1),T.worstVal=Lh(O[j],1)):(T.best=D[j],T.worst=D[W],T.bestVal=Lh(O[j],1),T.worstVal=Lh(O[W],1))}else T.avg="-",T.best="-",T.worst="-",T.bestVal="-",T.worstVal="-";return T}),[t,e]),_=l.R2!=="No data"?` In round 2, (${l.R2}, ${l.Y2}) the figure was ${v[1].avg} ${l.Unit}.`:"",b=w.jsxs(w.Fragment,{children:["The ",a," of ",w.jsx("b",{children:v[2].best})," experienced the highest ",nM.includes(e.indicator)?"increase":"decrease (lowest increase)"," of ",l.Indicator.toLowerCase()," with a ",v[2].bestVal," ",l.Unit," change from round 1 (",l.R1,", ",l.Y1,") to round 2 (",l.R2,", ",l.Y2,"), showing an improvement in conditions."]}),S=w.jsxs("div",{children:[w.jsx("div",{className:"row p-2",children:w.jsxs(Kh,{striped:!0,bordered:!0,size:"sm",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(tD,{about:"How to read table"})}),w.jsx("td",{children:"Round 1"}),w.jsx("td",{children:"Round 2"}),w.jsx("td",{children:"Change"})]})}),w.jsxs("tbody",{children:[w.jsxs("tr",{children:[w.jsxs("td",{children:[e.config.Adm1," Level Average"]}),w.jsx("td",{children:v[0].avg}),w.jsx("td",{children:v[1].avg}),w.jsx("td",{children:v[2].avg})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"Highest Performing"}),w.jsx("td",{children:v[0].best}),w.jsx("td",{children:v[1].best}),w.jsx("td",{children:v[2].best})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"Least Performing"}),w.jsx("td",{children:v[0].worst}),w.jsx("td",{children:v[1].worst}),w.jsx("td",{children:v[2].worst})]})]})]})}),w.jsxs("p",{children:["In the ",o," of ",w.jsx("b",{children:r}),", approximately ",v[0].avg," ",c.Unit," ",c.Statement," in round 1 (",l.R1,", ",l.Y1,").",_]}),w.jsx("p",{children:v[2].best==="-"?"":b})]}),k=w.jsxs("div",{className:"row p-0",children:[w.jsxs("p",{children:["The chart below summarises the indicator values aggregated at ",a," level. Credible intervals ",w.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",w.jsx("b",{children:"(R1)"})," and round 2 ",w.jsx("b",{children:"(R2)"})," are represented as washout rectangles around the mean values."]}),w.jsxs("p",{style:{fontSize:"80%"},children:["The data can be sorted by name, round 1 ",w.jsx("b",{children:"(R1)"})," values, round 2 ",w.jsx("b",{children:"(R2)"})," values and change ",w.jsx("b",{children:"(CH)"})," values by clicking on each heading."]}),w.jsx("hr",{}),y]}),R=w.jsxs("div",{className:"p-0 m-0",children:[w.jsxs("p",{children:["The table below summarises the indicator values aggregated at ",a," level. Credible intervals ",w.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",w.jsx("b",{children:"(R1)"})," and round 2 ",w.jsx("b",{children:"(R2)"})," can be found in brackets."]}),w.jsxs("p",{style:{fontSize:"80%"},children:["The data can be sorted by name, round 1 ",w.jsx("b",{children:"(R1)"})," values, round 2 ",w.jsx("b",{children:"(R2)"})," values and change ",w.jsx("b",{children:"(CH)"})," values by clicking on each heading."]}),w.jsx("hr",{}),w.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:w.jsx(Ije,{columns:m,data:g,palette:h,indicators:u})})]});return w.jsxs("div",{className:"row m-0 p-0",children:[w.jsxs("div",{className:"row m-0 p-2 pt-2 rounded-3 bg-secondary-subtle",children:[w.jsx("div",{className:"p-0",children:w.jsxs("h5",{children:[w.jsx(pb,{bg:"danger",style:{marginRight:"8px"},children:l.Indicator}),w.jsxs(pb,{bg:"danger",children:[r," (",t.length," ",s,")"]})]})}),w.jsx("div",{className:"p-0",children:w.jsxs("p",{children:[e.config.Adm2," and ",o," level summary estimates are presented for the selected indicators and for each survey round and for the change between the two rounds."]})})]}),w.jsxs(GW,{defaultActiveKey:"summary",id:"data-tabs",className:"mt-3",children:[w.jsx(p_,{eventKey:"summary",title:"Summary",children:S}),w.jsx(p_,{eventKey:"table",title:"Table",children:R}),w.jsx(p_,{eventKey:"chart",title:"Chart",children:k})]})]})}function nD(e,t){const n=M.useRef(t);M.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function zje(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const Hne=1;function Une(e){return Object.freeze({__version:Hne,map:e})}function Wne(e,t){return Object.freeze({...e,...t})}const iD=M.createContext(null),UC=iD.Provider;function Kd(){const e=M.useContext(iD);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function rD(e){function t(n,i){const{instance:r,context:o}=e(n).current;return M.useImperativeHandle(i,()=>r),n.children==null?null:Pt.createElement(UC,{value:o},n.children)}return M.forwardRef(t)}function Gne(e){function t(n,i){const[r,o]=M.useState(!1),{instance:a}=e(n,o).current;M.useImperativeHandle(i,()=>a),M.useEffect(function(){r&&a.update()},[a,r,n.children]);const s=a._contentNode;return s?S2.createPortal(n.children,s):null}return M.forwardRef(t)}function oD(e){function t(n,i){const{instance:r}=e(n).current;return M.useImperativeHandle(i,()=>r),null}return M.forwardRef(t)}function qne(e){return function(n){const i=Kd(),r=e(n,i),{instance:o}=r.current,a=M.useRef(n.position),{position:s}=n;return M.useEffect(function(){return o.addTo(i.map),function(){o.remove()}},[i.map,o]),M.useEffect(function(){s!=null&&s!==a.current&&(o.setPosition(s),a.current=s)},[o,s]),r}}function WC(e,t){const n=M.useRef();M.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function u1(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function Vne(e,t){return function(i,r){const o=Kd(),a=e(u1(i,o),o);return nD(o.map,i.attribution),WC(a.current,i.eventHandlers),t(a.current,o,i,r),a}}var iM={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(k8,function(n){var i="1.9.4";function r(f){var p,x,E,A;for(x=1,E=arguments.length;x<E;x++){A=arguments[x];for(p in A)f[p]=A[p]}return f}var o=Object.create||function(){function f(){}return function(p){return f.prototype=p,new f}}();function a(f,p){var x=Array.prototype.slice;if(f.bind)return f.bind.apply(f,x.call(arguments,1));var E=x.call(arguments,2);return function(){return f.apply(p,E.length?E.concat(x.call(arguments)):arguments)}}var s=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++s),f._leaflet_id}function u(f,p,x){var E,A,I,Y;return Y=function(){E=!1,A&&(I.apply(x,A),A=!1)},I=function(){E?A=arguments:(f.apply(x,arguments),setTimeout(Y,p),E=!0)},I}function c(f,p,x){var E=p[1],A=p[0],I=E-A;return f===E&&x?f:((f-A)%I+I)%I+A}function d(){return!1}function h(f,p){if(p===!1)return f;var x=Math.pow(10,p===void 0?6:p);return Math.round(f*x)/x}function m(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function g(f){return m(f).split(/\s+/)}function y(f,p){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?o(f.options):{});for(var x in p)f.options[x]=p[x];return f.options}function v(f,p,x){var E=[];for(var A in f)E.push(encodeURIComponent(x?A.toUpperCase():A)+"="+encodeURIComponent(f[A]));return(!p||p.indexOf("?")===-1?"?":"&")+E.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function b(f,p){return f.replace(_,function(x,E){var A=p[E];if(A===void 0)throw new Error("No value provided for variable "+x);return typeof A=="function"&&(A=A(p)),A})}var S=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function k(f,p){for(var x=0;x<f.length;x++)if(f[x]===p)return x;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var T=0;function P(f){var p=+new Date,x=Math.max(0,16-(p-T));return T=p+x,window.setTimeout(f,x)}var B=window.requestAnimationFrame||F("RequestAnimationFrame")||P,O=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function D(f,p,x){if(x&&B===P)f.call(p);else return B.call(window,a(f,p))}function W(f){f&&O.call(window,f)}var j={__proto__:null,extend:r,create:o,bind:a,get lastId(){return s},stamp:l,throttle:u,wrapNum:c,falseFn:d,formatNum:h,trim:m,splitWords:g,setOptions:y,getParamString:v,template:b,isArray:S,indexOf:k,emptyImageUrl:R,requestFn:B,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:W};function U(){}U.extend=function(f){var p=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=p.__super__=this.prototype,E=o(x);E.constructor=p,p.prototype=E;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(p[A]=this[A]);return f.statics&&r(p,f.statics),f.includes&&(G(f.includes),r.apply(null,[E].concat(f.includes))),r(E,f),delete E.statics,delete E.includes,E.options&&(E.options=x.options?o(x.options):{},r(E.options,f.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,Y=E._initHooks.length;I<Y;I++)E._initHooks[I].call(this)}},p},U.include=function(f){var p=this.prototype.options;return r(this.prototype,f),f.options&&(this.prototype.options=p,this.mergeOptions(f.options)),this},U.mergeOptions=function(f){return r(this.prototype.options,f),this},U.addInitHook=function(f){var p=Array.prototype.slice.call(arguments,1),x=typeof f=="function"?f:function(){this[f].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function G(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=S(f)?f:[f];for(var p=0;p<f.length;p++)f[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(f,p,x){if(typeof f=="object")for(var E in f)this._on(E,f[E],p);else{f=g(f);for(var A=0,I=f.length;A<I;A++)this._on(f[A],p,x)}return this},off:function(f,p,x){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var E in f)this._off(E,f[E],p);else{f=g(f);for(var A=arguments.length===1,I=0,Y=f.length;I<Y;I++)A?this._off(f[I]):this._off(f[I],p,x)}return this},_on:function(f,p,x,E){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(f,p,x)===!1){x===this&&(x=void 0);var A={fn:p,ctx:x};E&&(A.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(A)}},_off:function(f,p,x){var E,A,I;if(this._events&&(E=this._events[f],!!E)){if(arguments.length===1){if(this._firingCount)for(A=0,I=E.length;A<I;A++)E[A].fn=d;delete this._events[f];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var Y=this._listens(f,p,x);if(Y!==!1){var ee=E[Y];this._firingCount&&(ee.fn=d,this._events[f]=E=E.slice()),E.splice(Y,1)}}},fire:function(f,p,x){if(!this.listens(f,x))return this;var E=r({},p,{type:f,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var A=this._events[f];if(A){this._firingCount=this._firingCount+1||1;for(var I=0,Y=A.length;I<Y;I++){var ee=A[I],te=ee.fn;ee.once&&this.off(f,te,ee.ctx),te.call(ee.ctx||this,E)}this._firingCount--}}return x&&this._propagateEvent(E),this},listens:function(f,p,x,E){typeof f!="string"&&console.warn('"string" type argument expected');var A=p;typeof p!="function"&&(E=!!p,A=void 0,x=void 0);var I=this._events&&this._events[f];if(I&&I.length&&this._listens(f,A,x)!==!1)return!0;if(E){for(var Y in this._eventParents)if(this._eventParents[Y].listens(f,p,x,E))return!0}return!1},_listens:function(f,p,x){if(!this._events)return!1;var E=this._events[f]||[];if(!p)return!!E.length;x===this&&(x=void 0);for(var A=0,I=E.length;A<I;A++)if(E[A].fn===p&&E[A].ctx===x)return A;return!1},once:function(f,p,x){if(typeof f=="object")for(var E in f)this._on(E,f[E],p,!0);else{f=g(f);for(var A=0,I=f.length;A<I;A++)this._on(f[A],p,x,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var p in this._eventParents)this._eventParents[p].fire(f.type,r({layer:f.target,propagatedFrom:f.target},f),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var J=U.extend(Z);function H(f,p,x){this.x=x?Math.round(f):f,this.y=x?Math.round(p):p}var Q=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(f){return this.clone()._add(K(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(K(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new H(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new H(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(f){f=K(f);var p=f.x-this.x,x=f.y-this.y;return Math.sqrt(p*p+x*x)},equals:function(f){return f=K(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=K(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function K(f,p,x){return f instanceof H?f:S(f)?new H(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new H(f.x,f.y):new H(f,p,x)}function ne(f,p){if(f)for(var x=p?[f,p]:f,E=0,A=x.length;E<A;E++)this.extend(x[E])}ne.prototype={extend:function(f){var p,x;if(!f)return this;if(f instanceof H||typeof f[0]=="number"||"x"in f)p=x=K(f);else if(f=he(f),p=f.min,x=f.max,!p||!x)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=x.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(f){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var p,x;return typeof f[0]=="number"||f instanceof H?f=K(f):f=he(f),f instanceof ne?(p=f.min,x=f.max):p=x=f,p.x>=this.min.x&&x.x<=this.max.x&&p.y>=this.min.y&&x.y<=this.max.y},intersects:function(f){f=he(f);var p=this.min,x=this.max,E=f.min,A=f.max,I=A.x>=p.x&&E.x<=x.x,Y=A.y>=p.y&&E.y<=x.y;return I&&Y},overlaps:function(f){f=he(f);var p=this.min,x=this.max,E=f.min,A=f.max,I=A.x>p.x&&E.x<x.x,Y=A.y>p.y&&E.y<x.y;return I&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var p=this.min,x=this.max,E=Math.abs(p.x-x.x)*f,A=Math.abs(p.y-x.y)*f;return he(K(p.x-E,p.y-A),K(x.x+E,x.y+A))},equals:function(f){return f?(f=he(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function he(f,p){return!f||f instanceof ne?f:new ne(f,p)}function $e(f,p){if(f)for(var x=p?[f,p]:f,E=0,A=x.length;E<A;E++)this.extend(x[E])}$e.prototype={extend:function(f){var p=this._southWest,x=this._northEast,E,A;if(f instanceof we)E=f,A=f;else if(f instanceof $e){if(E=f._southWest,A=f._northEast,!E||!A)return this}else return f?this.extend(Ae(f)||Ee(f)):this;return!p&&!x?(this._southWest=new we(E.lat,E.lng),this._northEast=new we(A.lat,A.lng)):(p.lat=Math.min(E.lat,p.lat),p.lng=Math.min(E.lng,p.lng),x.lat=Math.max(A.lat,x.lat),x.lng=Math.max(A.lng,x.lng)),this},pad:function(f){var p=this._southWest,x=this._northEast,E=Math.abs(p.lat-x.lat)*f,A=Math.abs(p.lng-x.lng)*f;return new $e(new we(p.lat-E,p.lng-A),new we(x.lat+E,x.lng+A))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof we||"lat"in f?f=Ae(f):f=Ee(f);var p=this._southWest,x=this._northEast,E,A;return f instanceof $e?(E=f.getSouthWest(),A=f.getNorthEast()):E=A=f,E.lat>=p.lat&&A.lat<=x.lat&&E.lng>=p.lng&&A.lng<=x.lng},intersects:function(f){f=Ee(f);var p=this._southWest,x=this._northEast,E=f.getSouthWest(),A=f.getNorthEast(),I=A.lat>=p.lat&&E.lat<=x.lat,Y=A.lng>=p.lng&&E.lng<=x.lng;return I&&Y},overlaps:function(f){f=Ee(f);var p=this._southWest,x=this._northEast,E=f.getSouthWest(),A=f.getNorthEast(),I=A.lat>p.lat&&E.lat<x.lat,Y=A.lng>p.lng&&E.lng<x.lng;return I&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,p){return f?(f=Ee(f),this._southWest.equals(f.getSouthWest(),p)&&this._northEast.equals(f.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ee(f,p){return f instanceof $e?f:new $e(f,p)}function we(f,p,x){if(isNaN(f)||isNaN(p))throw new Error("Invalid LatLng object: ("+f+", "+p+")");this.lat=+f,this.lng=+p,x!==void 0&&(this.alt=+x)}we.prototype={equals:function(f,p){if(!f)return!1;f=Ae(f);var x=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return x<=(p===void 0?1e-9:p)},toString:function(f){return"LatLng("+h(this.lat,f)+", "+h(this.lng,f)+")"},distanceTo:function(f){return Et.distance(this,Ae(f))},wrap:function(){return Et.wrapLatLng(this)},toBounds:function(f){var p=180*f/40075017,x=p/Math.cos(Math.PI/180*this.lat);return Ee([this.lat-p,this.lng-x],[this.lat+p,this.lng+x])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function Ae(f,p,x){return f instanceof we?f:S(f)&&typeof f[0]!="object"?f.length===3?new we(f[0],f[1],f[2]):f.length===2?new we(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new we(f.lat,"lng"in f?f.lng:f.lon,f.alt):p===void 0?null:new we(f,p,x)}var It={latLngToPoint:function(f,p){var x=this.projection.project(f),E=this.scale(p);return this.transformation._transform(x,E)},pointToLatLng:function(f,p){var x=this.scale(p),E=this.transformation.untransform(f,x);return this.projection.unproject(E)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var p=this.projection.bounds,x=this.scale(f),E=this.transformation.transform(p.min,x),A=this.transformation.transform(p.max,x);return new ne(E,A)},infinite:!1,wrapLatLng:function(f){var p=this.wrapLng?c(f.lng,this.wrapLng,!0):f.lng,x=this.wrapLat?c(f.lat,this.wrapLat,!0):f.lat,E=f.alt;return new we(x,p,E)},wrapLatLngBounds:function(f){var p=f.getCenter(),x=this.wrapLatLng(p),E=p.lat-x.lat,A=p.lng-x.lng;if(E===0&&A===0)return f;var I=f.getSouthWest(),Y=f.getNorthEast(),ee=new we(I.lat-E,I.lng-A),te=new we(Y.lat-E,Y.lng-A);return new $e(ee,te)}},Et=r({},It,{wrapLng:[-180,180],R:6371e3,distance:function(f,p){var x=Math.PI/180,E=f.lat*x,A=p.lat*x,I=Math.sin((p.lat-f.lat)*x/2),Y=Math.sin((p.lng-f.lng)*x/2),ee=I*I+Math.cos(E)*Math.cos(A)*Y*Y,te=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*te}}),ke=6378137,Ye={R:ke,MAX_LATITUDE:85.0511287798,project:function(f){var p=Math.PI/180,x=this.MAX_LATITUDE,E=Math.max(Math.min(x,f.lat),-x),A=Math.sin(E*p);return new H(this.R*f.lng*p,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(f){var p=180/Math.PI;return new we((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*p,f.x*p/this.R)},bounds:function(){var f=ke*Math.PI;return new ne([-f,-f],[f,f])}()};function He(f,p,x,E){if(S(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=p,this._c=x,this._d=E}He.prototype={transform:function(f,p){return this._transform(f.clone(),p)},_transform:function(f,p){return p=p||1,f.x=p*(this._a*f.x+this._b),f.y=p*(this._c*f.y+this._d),f},untransform:function(f,p){return p=p||1,new H((f.x/p-this._b)/this._a,(f.y/p-this._d)/this._c)}};function de(f,p,x,E){return new He(f,p,x,E)}var Tt=r({},Et,{code:"EPSG:3857",projection:Ye,transformation:function(){var f=.5/(Math.PI*Ye.R);return de(f,.5,-f,.5)}()}),ft=r({},Tt,{code:"EPSG:900913"});function tt(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Vt(f,p){var x="",E,A,I,Y,ee,te;for(E=0,I=f.length;E<I;E++){for(ee=f[E],A=0,Y=ee.length;A<Y;A++)te=ee[A],x+=(A?"L":"M")+te.x+" "+te.y;x+=p?Ze.svg?"z":"x":""}return x||"M0 0"}var vn=document.documentElement.style,er="ActiveXObject"in window,Vs=er&&!document.addEventListener,Pi="msLaunchUri"in navigator&&!("documentMode"in document),Sr=Ro("webkit"),ia=Ro("android"),eo=Ro("android 2")||Ro("android 3"),Cr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),bt=ia&&Ro("Google")&&Cr<537&&!("AudioNode"in window),ri=!!window.opera,ko=!Pi&&Ro("chrome"),Va=Ro("gecko")&&!Sr&&!ri&&!er,eh=!ko&&Ro("safari"),ru=Ro("phantom"),Vc="OTransition"in vn,dt=navigator.platform.indexOf("Win")===0,Gt=er&&"transition"in vn,$i="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!eo,ra="MozPerspective"in vn,th=!window.L_DISABLE_3D&&(Gt||$i||ra)&&!Vc&&!ru,ou=typeof orientation<"u"||Ro("mobile"),m1=ou&&Sr,g1=ou&&$i,Ym=!window.PointerEvent&&window.MSPointerEvent,Zm=!!(window.PointerEvent||Ym),Xm="ontouchstart"in window||!!window.TouchEvent,y1=!window.L_NO_TOUCH&&(Xm||Zm),Yc=ou&&ri,v1=ou&&Va,JC=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,QC=function(){var f=!1;try{var p=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",d,p),window.removeEventListener("testPassiveEventSupport",d,p)}catch{}return f}(),x1=function(){return!!document.createElement("canvas").getContext}(),Km=!!(document.createElementNS&&tt("svg").createSVGRect),eE=!!Km&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_1=!Km&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var p=f.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),b1=navigator.platform.indexOf("Mac")===0,tE=navigator.platform.indexOf("Linux")===0;function Ro(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ze={ie:er,ielt9:Vs,edge:Pi,webkit:Sr,android:ia,android23:eo,androidStock:bt,opera:ri,chrome:ko,gecko:Va,safari:eh,phantom:ru,opera12:Vc,win:dt,ie3d:Gt,webkit3d:$i,gecko3d:ra,any3d:th,mobile:ou,mobileWebkit:m1,mobileWebkit3d:g1,msPointer:Ym,pointer:Zm,touch:y1,touchNative:Xm,mobileOpera:Yc,mobileGecko:v1,retina:JC,passiveEvents:QC,canvas:x1,svg:Km,vml:_1,inlineSvg:eE,mac:b1,linux:tE},w1=Ze.msPointer?"MSPointerDown":"pointerdown",S1=Ze.msPointer?"MSPointerMove":"pointermove",C1=Ze.msPointer?"MSPointerUp":"pointerup",E1=Ze.msPointer?"MSPointerCancel":"pointercancel",Jm={touchstart:w1,touchmove:S1,touchend:C1,touchcancel:E1},k1={touchstart:rE,touchmove:nh,touchend:nh,touchcancel:nh},Ys={},Qm=!1;function eg(f,p,x){return p==="touchstart"&&iE(),k1[p]?(x=k1[p].bind(this,x),f.addEventListener(Jm[p],x,!1),x):(console.warn("wrong event specified:",p),d)}function Zc(f,p,x){if(!Jm[p]){console.warn("wrong event specified:",p);return}f.removeEventListener(Jm[p],x,!1)}function R1(f){Ys[f.pointerId]=f}function nE(f){Ys[f.pointerId]&&(Ys[f.pointerId]=f)}function tg(f){delete Ys[f.pointerId]}function iE(){Qm||(document.addEventListener(w1,R1,!0),document.addEventListener(S1,nE,!0),document.addEventListener(C1,tg,!0),document.addEventListener(E1,tg,!0),Qm=!0)}function nh(f,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var x in Ys)p.touches.push(Ys[x]);p.changedTouches=[p],f(p)}}function rE(f,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Vn(p),nh(f,p)}function T1(f){var p={},x,E;for(E in f)x=f[E],p[E]=x&&x.bind?x.bind(f):x;return f=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var A1=200;function oE(f,p){f.addEventListener("dblclick",p);var x=0,E;function A(I){if(I.detail!==1){E=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var Y=P1(I);if(!(Y.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!Y.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var ee=Date.now();ee-x<=A1?(E++,E===2&&p(T1(I))):E=1,x=ee}}}return f.addEventListener("click",A),{dblclick:p,simDblclick:A}}function aE(f,p){f.removeEventListener("dblclick",p.dblclick),f.removeEventListener("click",p.simDblclick)}var ih=sh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),au=sh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),F1=au==="webkitTransition"||au==="OTransition"?au+"End":"transitionend";function M1(f){return typeof f=="string"?document.getElementById(f):f}function Xc(f,p){var x=f.style[p]||f.currentStyle&&f.currentStyle[p];if((!x||x==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(f,null);x=E?E[p]:null}return x==="auto"?null:x}function Lt(f,p,x){var E=document.createElement(f);return E.className=p||"",x&&x.appendChild(E),E}function dn(f){var p=f.parentNode;p&&p.removeChild(f)}function rh(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function su(f){var p=f.parentNode;p&&p.lastChild!==f&&p.appendChild(f)}function lu(f){var p=f.parentNode;p&&p.firstChild!==f&&p.insertBefore(f,p.firstChild)}function ng(f,p){if(f.classList!==void 0)return f.classList.contains(p);var x=ah(f);return x.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(x)}function vt(f,p){if(f.classList!==void 0)for(var x=g(p),E=0,A=x.length;E<A;E++)f.classList.add(x[E]);else if(!ng(f,p)){var I=ah(f);oh(f,(I?I+" ":"")+p)}}function En(f,p){f.classList!==void 0?f.classList.remove(p):oh(f,m((" "+ah(f)+" ").replace(" "+p+" "," ")))}function oh(f,p){f.className.baseVal===void 0?f.className=p:f.className.baseVal=p}function ah(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function Er(f,p){"opacity"in f.style?f.style.opacity=p:"filter"in f.style&&sE(f,p)}function sE(f,p){var x=!1,E="DXImageTransform.Microsoft.Alpha";try{x=f.filters.item(E)}catch{if(p===1)return}p=Math.round(p*100),x?(x.Enabled=p!==100,x.Opacity=p):f.style.filter+=" progid:"+E+"(opacity="+p+")"}function sh(f){for(var p=document.documentElement.style,x=0;x<f.length;x++)if(f[x]in p)return f[x];return!1}function Zs(f,p,x){var E=p||new H(0,0);f.style[ih]=(Ze.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(x?" scale("+x+")":"")}function Fn(f,p){f._leaflet_pos=p,Ze.any3d?Zs(f,p):(f.style.left=p.x+"px",f.style.top=p.y+"px")}function Ya(f){return f._leaflet_pos||new H(0,0)}var uu,cu,ig;if("onselectstart"in document)uu=function(){gt(window,"selectstart",Vn)},cu=function(){Jt(window,"selectstart",Vn)};else{var Kc=sh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);uu=function(){if(Kc){var f=document.documentElement.style;ig=f[Kc],f[Kc]="none"}},cu=function(){Kc&&(document.documentElement.style[Kc]=ig,ig=void 0)}}function rg(){gt(window,"dragstart",Vn)}function lh(){Jt(window,"dragstart",Vn)}var uh,og;function ag(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Jc(),uh=f,og=f.style.outlineStyle,f.style.outlineStyle="none",gt(window,"keydown",Jc))}function Jc(){uh&&(uh.style.outlineStyle=og,uh=void 0,og=void 0,Jt(window,"keydown",Jc))}function N1(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function sg(f){var p=f.getBoundingClientRect();return{x:p.width/f.offsetWidth||1,y:p.height/f.offsetHeight||1,boundingClientRect:p}}var lE={__proto__:null,TRANSFORM:ih,TRANSITION:au,TRANSITION_END:F1,get:M1,getStyle:Xc,create:Lt,remove:dn,empty:rh,toFront:su,toBack:lu,hasClass:ng,addClass:vt,removeClass:En,setClass:oh,getClass:ah,setOpacity:Er,testProp:sh,setTransform:Zs,setPosition:Fn,getPosition:Ya,get disableTextSelection(){return uu},get enableTextSelection(){return cu},disableImageDrag:rg,enableImageDrag:lh,preventOutline:ag,restoreOutline:Jc,getSizedParentNode:N1,getScale:sg};function gt(f,p,x,E){if(p&&typeof p=="object")for(var A in p)tf(f,A,p[A],x);else{p=g(p);for(var I=0,Y=p.length;I<Y;I++)tf(f,p[I],x,E)}return this}var kr="_leaflet_events";function Jt(f,p,x,E){if(arguments.length===1)Qc(f),delete f[kr];else if(p&&typeof p=="object")for(var A in p)ch(f,A,p[A],x);else if(p=g(p),arguments.length===2)Qc(f,function(ee){return k(p,ee)!==-1});else for(var I=0,Y=p.length;I<Y;I++)ch(f,p[I],x,E);return this}function Qc(f,p){for(var x in f[kr]){var E=x.split(/\d/)[0];(!p||p(E))&&ch(f,E,null,null,x)}}var ef={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function tf(f,p,x,E){var A=p+l(x)+(E?"_"+l(E):"");if(f[kr]&&f[kr][A])return this;var I=function(ee){return x.call(E||f,ee||window.event)},Y=I;!Ze.touchNative&&Ze.pointer&&p.indexOf("touch")===0?I=eg(f,p,I):Ze.touch&&p==="dblclick"?I=oE(f,I):"addEventListener"in f?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?f.addEventListener(ef[p]||p,I,Ze.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(I=function(ee){ee=ee||window.event,cg(f,ee)&&Y(ee)},f.addEventListener(ef[p],I,!1)):f.addEventListener(p,Y,!1):f.attachEvent("on"+p,I),f[kr]=f[kr]||{},f[kr][A]=I}function ch(f,p,x,E,A){A=A||p+l(x)+(E?"_"+l(E):"");var I=f[kr]&&f[kr][A];if(!I)return this;!Ze.touchNative&&Ze.pointer&&p.indexOf("touch")===0?Zc(f,p,I):Ze.touch&&p==="dblclick"?aE(f,I):"removeEventListener"in f?f.removeEventListener(ef[p]||p,I,!1):f.detachEvent("on"+p,I),f[kr][A]=null}function Za(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function lg(f){return tf(f,"wheel",Za),this}function Xs(f){return gt(f,"mousedown touchstart dblclick contextmenu",Za),f._leaflet_disable_click=!0,this}function Vn(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Ks(f){return Vn(f),Za(f),this}function P1(f){if(f.composedPath)return f.composedPath();for(var p=[],x=f.target;x;)p.push(x),x=x.parentNode;return p}function ug(f,p){if(!p)return new H(f.clientX,f.clientY);var x=sg(p),E=x.boundingClientRect;return new H((f.clientX-E.left)/x.x-p.clientLeft,(f.clientY-E.top)/x.y-p.clientTop)}var uE=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $1(f){return Ze.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/uE:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function cg(f,p){var x=p.relatedTarget;if(!x)return!0;try{for(;x&&x!==f;)x=x.parentNode}catch{return!1}return x!==f}var cE={__proto__:null,on:gt,off:Jt,stopPropagation:Za,disableScrollPropagation:lg,disableClickPropagation:Xs,preventDefault:Vn,stop:Ks,getPropagationPath:P1,getMousePosition:ug,getWheelDelta:$1,isExternalTarget:cg,addListener:gt,removeListener:Jt},fh=J.extend({run:function(f,p,x,E){this.stop(),this._el=f,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Ya(f),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(f){var p=+new Date-this._startTime,x=this._duration*1e3;p<x?this._runFrame(this._easeOut(p/x),f):(this._runFrame(1),this._complete())},_runFrame:function(f,p){var x=this._startPos.add(this._offset.multiplyBy(f));p&&x._round(),Fn(this._el,x),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),C=J.extend({options:{crs:Tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,p){p=y(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(Ae(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=au&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gt(this._proxy,F1,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,p,x){if(p=p===void 0?this._zoom:this._limitZoom(p),f=this._limitCenter(Ae(f),p,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=r({animate:x.animate},x.zoom),x.pan=r({animate:x.animate,duration:x.duration},x.pan));var E=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,p,x.zoom):this._tryAnimatedPan(f,x.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(f,p,x.pan&&x.pan.noMoveStart),this},setZoom:function(f,p){return this._loaded?this.setView(this.getCenter(),f,{zoom:p}):(this._zoom=f,this)},zoomIn:function(f,p){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,p)},zoomOut:function(f,p){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,p)},setZoomAround:function(f,p,x){var E=this.getZoomScale(p),A=this.getSize().divideBy(2),I=f instanceof H?f:this.latLngToContainerPoint(f),Y=I.subtract(A).multiplyBy(1-1/E),ee=this.containerPointToLatLng(A.add(Y));return this.setView(ee,p,{zoom:x})},_getBoundsCenterZoom:function(f,p){p=p||{},f=f.getBounds?f.getBounds():Ee(f);var x=K(p.paddingTopLeft||p.padding||[0,0]),E=K(p.paddingBottomRight||p.padding||[0,0]),A=this.getBoundsZoom(f,!1,x.add(E));if(A=typeof p.maxZoom=="number"?Math.min(p.maxZoom,A):A,A===1/0)return{center:f.getCenter(),zoom:A};var I=E.subtract(x).divideBy(2),Y=this.project(f.getSouthWest(),A),ee=this.project(f.getNorthEast(),A),te=this.unproject(Y.add(ee).divideBy(2).add(I),A);return{center:te,zoom:A}},fitBounds:function(f,p){if(f=Ee(f),!f.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(f,p);return this.setView(x.center,x.zoom,p)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,p){return this.setView(f,this._zoom,{pan:p})},panBy:function(f,p){if(f=K(f).round(),p=p||{},!f.x&&!f.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){vt(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,x,p.duration||.25,p.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,p,x){if(x=x||{},x.animate===!1||!Ze.any3d)return this.setView(f,p,x);this._stop();var E=this.project(this.getCenter()),A=this.project(f),I=this.getSize(),Y=this._zoom;f=Ae(f),p=p===void 0?Y:p;var ee=Math.max(I.x,I.y),te=ee*this.getZoomScale(Y,p),pe=A.distanceTo(E)||1,ze=1.42,ct=ze*ze;function kt(Un){var U1=Un?-1:1,qie=Un?te:ee,Vie=te*te-ee*ee+U1*ct*ct*pe*pe,Yie=2*qie*ct*pe,vE=Vie/Yie,BD=Math.sqrt(vE*vE+1)-vE,Zie=BD<1e-9?-18:Math.log(BD);return Zie}function tr(Un){return(Math.exp(Un)-Math.exp(-Un))/2}function ai(Un){return(Math.exp(Un)+Math.exp(-Un))/2}function To(Un){return tr(Un)/ai(Un)}var Fr=kt(0);function gh(Un){return ee*(ai(Fr)/ai(Fr+ze*Un))}function Hie(Un){return ee*(ai(Fr)*To(Fr+ze*Un)-tr(Fr))/ct}function Uie(Un){return 1-Math.pow(1-Un,1.5)}var Wie=Date.now(),zD=(kt(1)-Fr)/ze,Gie=x.duration?1e3*x.duration:1e3*zD*.8;function jD(){var Un=(Date.now()-Wie)/Gie,U1=Uie(Un)*zD;Un<=1?(this._flyToFrame=D(jD,this),this._move(this.unproject(E.add(A.subtract(E).multiplyBy(Hie(U1)/pe)),Y),this.getScaleZoom(ee/gh(U1),Y),{flyTo:!0})):this._move(f,p)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),jD.call(this),this},flyToBounds:function(f,p){var x=this._getBoundsCenterZoom(f,p);return this.flyTo(x.center,x.zoom,p)},setMaxBounds:function(f){return f=Ee(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var p=this.options.minZoom;return this.options.minZoom=f,this._loaded&&p!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var p=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&p!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,p){this._enforcingBounds=!0;var x=this.getCenter(),E=this._limitCenter(x,this._zoom,Ee(f));return x.equals(E)||this.panTo(E,p),this._enforcingBounds=!1,this},panInside:function(f,p){p=p||{};var x=K(p.paddingTopLeft||p.padding||[0,0]),E=K(p.paddingBottomRight||p.padding||[0,0]),A=this.project(this.getCenter()),I=this.project(f),Y=this.getPixelBounds(),ee=he([Y.min.add(x),Y.max.subtract(E)]),te=ee.getSize();if(!ee.contains(I)){this._enforcingBounds=!0;var pe=I.subtract(ee.getCenter()),ze=ee.extend(I).getSize().subtract(te);A.x+=pe.x<0?-ze.x:ze.x,A.y+=pe.y<0?-ze.y:ze.y,this.panTo(this.unproject(A),p),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=r({animate:!1,pan:!0},f===!0?{animate:!0}:f);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),E=p.divideBy(2).round(),A=x.divideBy(2).round(),I=E.subtract(A);return!I.x&&!I.y?this:(f.animate&&f.pan?this.panBy(I):(f.pan&&this._rawPanBy(I),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=r({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=a(this._handleGeolocationResponse,this),x=a(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,x,f):navigator.geolocation.getCurrentPosition(p,x,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var p=f.code,x=f.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var p=f.coords.latitude,x=f.coords.longitude,E=new we(p,x),A=E.toBounds(f.coords.accuracy*2),I=this._locateOptions;if(I.setView){var Y=this.getBoundsZoom(A);this.setView(E,I.maxZoom?Math.min(Y,I.maxZoom):Y)}var ee={latlng:E,bounds:A,timestamp:f.timestamp};for(var te in f.coords)typeof f.coords[te]=="number"&&(ee[te]=f.coords[te]);this.fire("locationfound",ee)}},addHandler:function(f,p){if(!p)return this;var x=this[f]=new p(this);return this._handlers.push(x),this.options[f]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)dn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,p){var x="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),E=Lt("div",x,p||this._mapPane);return f&&(this._panes[f]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),p=this.unproject(f.getBottomLeft()),x=this.unproject(f.getTopRight());return new $e(p,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,p,x){f=Ee(f),x=K(x||[0,0]);var E=this.getZoom()||0,A=this.getMinZoom(),I=this.getMaxZoom(),Y=f.getNorthWest(),ee=f.getSouthEast(),te=this.getSize().subtract(x),pe=he(this.project(ee,E),this.project(Y,E)).getSize(),ze=Ze.any3d?this.options.zoomSnap:1,ct=te.x/pe.x,kt=te.y/pe.y,tr=p?Math.max(ct,kt):Math.min(ct,kt);return E=this.getScaleZoom(tr,E),ze&&(E=Math.round(E/(ze/100))*(ze/100),E=p?Math.ceil(E/ze)*ze:Math.floor(E/ze)*ze),Math.max(A,Math.min(I,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,p){var x=this._getTopLeftPoint(f,p);return new ne(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,p){var x=this.options.crs;return p=p===void 0?this._zoom:p,x.scale(f)/x.scale(p)},getScaleZoom:function(f,p){var x=this.options.crs;p=p===void 0?this._zoom:p;var E=x.zoom(f*x.scale(p));return isNaN(E)?1/0:E},project:function(f,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(Ae(f),p)},unproject:function(f,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(K(f),p)},layerPointToLatLng:function(f){var p=K(f).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(f){var p=this.project(Ae(f))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(Ae(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(Ee(f))},distance:function(f,p){return this.options.crs.distance(Ae(f),Ae(p))},containerPointToLayerPoint:function(f){return K(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return K(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var p=this.containerPointToLayerPoint(K(f));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(f)))},mouseEventToContainerPoint:function(f){return ug(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var p=this._container=M1(f);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gt(p,"scroll",this._onScroll,this),this._containerId=l(p)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,vt(f,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Xc(f,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fn(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(vt(f.markerPane,"leaflet-zoom-hide"),vt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,p,x){Fn(this._mapPane,new H(0,0));var E=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var A=this._zoom!==p;this._moveStart(A,x)._move(f,p)._moveEnd(A),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(f,p){return f&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(f,p,x,E){p===void 0&&(p=this._zoom);var A=this._zoom!==p;return this._zoom=p,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),E?x&&x.pinch&&this.fire("zoom",x):((A||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Fn(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var p=f?Jt:gt;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,p){for(var x=[],E,A=p==="mouseout"||p==="mouseover",I=f.target||f.srcElement,Y=!1;I;){if(E=this._targets[l(I)],E&&(p==="click"||p==="preclick")&&this._draggableMoved(E)){Y=!0;break}if(E&&E.listens(p,!0)&&(A&&!cg(I,f)||(x.push(E),A))||I===this._container)break;I=I.parentNode}return!x.length&&!Y&&!A&&this.listens(p,!0)&&(x=[this]),x},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var p=f.target||f.srcElement;if(!(!this._loaded||p._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(p))){var x=f.type;x==="mousedown"&&ag(p),this._fireDOMEvent(f,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,p,x){if(f.type==="click"){var E=r({},f);E.type="preclick",this._fireDOMEvent(E,E.type,x)}var A=this._findEventTargets(f,p);if(x){for(var I=[],Y=0;Y<x.length;Y++)x[Y].listens(p,!0)&&I.push(x[Y]);A=I.concat(A)}if(A.length){p==="contextmenu"&&Vn(f);var ee=A[0],te={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var pe=ee.getLatLng&&(!ee._radius||ee._radius<=10);te.containerPoint=pe?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(f),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=pe?ee.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(Y=0;Y<A.length;Y++)if(A[Y].fire(p,te,!0),te.originalEvent._stopped||A[Y].options.bubblingMouseEvents===!1&&k(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,p=this._handlers.length;f<p;f++)this._handlers[f].disable()},whenReady:function(f,p){return this._loaded?f.call(p||this,{target:this}):this.on("load",f,p),this},_getMapPanePos:function(){return Ya(this._mapPane)||new H(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,p){var x=f&&p!==void 0?this._getNewPixelOrigin(f,p):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,p){var x=this.getSize()._divideBy(2);return this.project(f,p)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,p,x){var E=this._getNewPixelOrigin(x,p);return this.project(f,p)._subtract(E)},_latLngBoundsToNewLayerBounds:function(f,p,x){var E=this._getNewPixelOrigin(x,p);return he([this.project(f.getSouthWest(),p)._subtract(E),this.project(f.getNorthWest(),p)._subtract(E),this.project(f.getSouthEast(),p)._subtract(E),this.project(f.getNorthEast(),p)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,p,x){if(!x)return f;var E=this.project(f,p),A=this.getSize().divideBy(2),I=new ne(E.subtract(A),E.add(A)),Y=this._getBoundsOffset(I,x,p);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?f:this.unproject(E.add(Y),p)},_limitOffset:function(f,p){if(!p)return f;var x=this.getPixelBounds(),E=new ne(x.min.add(f),x.max.add(f));return f.add(this._getBoundsOffset(E,p))},_getBoundsOffset:function(f,p,x){var E=he(this.project(p.getNorthEast(),x),this.project(p.getSouthWest(),x)),A=E.min.subtract(f.min),I=E.max.subtract(f.max),Y=this._rebound(A.x,-I.x),ee=this._rebound(A.y,-I.y);return new H(Y,ee)},_rebound:function(f,p){return f+p>0?Math.round(f-p)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(p))},_limitZoom:function(f){var p=this.getMinZoom(),x=this.getMaxZoom(),E=Ze.any3d?this.options.zoomSnap:1;return E&&(f=Math.round(f/E)*E),Math.max(p,Math.min(x,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){En(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,p){var x=this._getCenterOffset(f)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,p),!0)},_createAnimProxy:function(){var f=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(p){var x=ih,E=this._proxy.style[x];Zs(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),E===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),p=this.getZoom();Zs(this._proxy,this.project(f,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,p,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(p),A=this._getCenterOffset(f)._divideBy(1-1/E);return x.animate!==!0&&!this.getSize().contains(A)?!1:(D(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(f,p,!0)},this),!0)},_animateZoom:function(f,p,x,E){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=p,vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:p,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&En(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function N(f,p){return new C(f,p)}var $=U.extend({options:{position:"topright"},initialize:function(f){y(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var p=this._map;return p&&p.removeControl(this),this.options.position=f,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var p=this._container=this.onAdd(f),x=this.getPosition(),E=f._controlCorners[x];return vt(p,"leaflet-control"),x.indexOf("bottom")!==-1?E.insertBefore(p,E.firstChild):E.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),z=function(f){return new $(f)};C.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},p="leaflet-",x=this._controlContainer=Lt("div",p+"control-container",this._container);function E(A,I){var Y=p+A+" "+p+I;f[A+I]=Lt("div",Y,x)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)dn(this._controlCorners[f]);dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var V=$.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,p,x,E){return x<E?-1:E<x?1:0}},initialize:function(f,p,x){y(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in f)this._addLayer(f[E],E);for(E in p)this._addLayer(p[E],E,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return $.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,p){return this._addLayer(f,p),this._map?this._update():this},addOverlay:function(f,p){return this._addLayer(f,p,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var p=this._getLayer(l(f));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):En(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return En(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",p=this._container=Lt("div",f),x=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Xs(p),lg(p);var E=this._section=Lt("section",f+"-list");x&&(this._map.on("click",this.collapse,this),gt(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Lt("a",f+"-toggle",p);A.href="#",A.title="Layers",A.setAttribute("role","button"),gt(A,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){Vn(I),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=Lt("div",f+"-base",E),this._separator=Lt("div",f+"-separator",E),this._overlaysList=Lt("div",f+"-overlays",E),p.appendChild(E)},_getLayer:function(f){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&l(this._layers[p].layer)===f)return this._layers[p]},_addLayer:function(f,p,x){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:p,overlay:x}),this.options.sortLayers&&this._layers.sort(a(function(E,A){return this.options.sortFunction(E.layer,A.layer,E.name,A.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rh(this._baseLayersList),rh(this._overlaysList),this._layerControlInputs=[];var f,p,x,E,A=0;for(x=0;x<this._layers.length;x++)E=this._layers[x],this._addItem(E),p=p||E.overlay,f=f||!E.overlay,A+=E.overlay?0:1;return this.options.hideSingleBase&&(f=f&&A>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=p&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var p=this._getLayer(l(f.target)),x=p.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;x&&this._map.fire(x,p)},_createRadioElement:function(f,p){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(p?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=x,E.firstChild},_addItem:function(f){var p=document.createElement("label"),x=this._map.hasLayer(f.layer),E;f.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=x):E=this._createRadioElement("leaflet-base-layers_"+l(this),x),this._layerControlInputs.push(E),E.layerId=l(f.layer),gt(E,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+f.name;var I=document.createElement("span");p.appendChild(I),I.appendChild(E),I.appendChild(A);var Y=f.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,p,x,E=[],A=[];this._handlingClick=!0;for(var I=f.length-1;I>=0;I--)p=f[I],x=this._getLayer(p.layerId).layer,p.checked?E.push(x):p.checked||A.push(x);for(I=0;I<A.length;I++)this._map.hasLayer(A[I])&&this._map.removeLayer(A[I]);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])||this._map.addLayer(E[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,p,x,E=this._map.getZoom(),A=f.length-1;A>=0;A--)p=f[A],x=this._getLayer(p.layerId).layer,p.disabled=x.options.minZoom!==void 0&&E<x.options.minZoom||x.options.maxZoom!==void 0&&E>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,gt(f,"click",Vn),this.expand();var p=this;setTimeout(function(){Jt(f,"click",Vn),p._preventClick=!1})}}),q=function(f,p,x){return new V(f,p,x)},X=$.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var p="leaflet-control-zoom",x=Lt("div",p+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,p+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,p+"-out",x,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,p,x,E,A){var I=Lt("a",x,E);return I.innerHTML=f,I.href="#",I.title=p,I.setAttribute("role","button"),I.setAttribute("aria-label",p),Xs(I),gt(I,"click",Ks),gt(I,"click",A,this),gt(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var f=this._map,p="leaflet-disabled";En(this._zoomInButton,p),En(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(vt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(vt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});C.mergeOptions({zoomControl:!0}),C.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new X,this.addControl(this.zoomControl))});var re=function(f){return new X(f)},oe=$.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var p="leaflet-control-scale",x=Lt("div",p),E=this.options;return this._addScales(E,p+"-line",x),f.on(E.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),x},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,p,x){f.metric&&(this._mScale=Lt("div",p,x)),f.imperial&&(this._iScale=Lt("div",p,x))},_update:function(){var f=this._map,p=f.getSize().y/2,x=f.distance(f.containerPointToLatLng([0,p]),f.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(x)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var p=this._getRoundNum(f),x=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,x,p/f)},_updateImperial:function(f){var p=f*3.2808399,x,E,A;p>5280?(x=p/5280,E=this._getRoundNum(x),this._updateScale(this._iScale,E+" mi",E/x)):(A=this._getRoundNum(p),this._updateScale(this._iScale,A+" ft",A/p))},_updateScale:function(f,p,x){f.style.width=Math.round(this.options.maxWidth*x)+"px",f.innerHTML=p},_getRoundNum:function(f){var p=Math.pow(10,(Math.floor(f)+"").length-1),x=f/p;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,p*x}}),ue=function(f){return new oe(f)},Re='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ge=$.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?Re+" ":"")+"Leaflet</a>"},initialize:function(f){y(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),Xs(this._container);for(var p in f._layers)f._layers[p].getAttribution&&this.addAttribution(f._layers[p].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var p in this._attributions)this._attributions[p]&&f.push(p);var x=[];this.options.prefix&&x.push(this.options.prefix),f.length&&x.push(f.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});C.mergeOptions({attributionControl:!0}),C.addInitHook(function(){this.options.attributionControl&&new ge().addTo(this)});var Se=function(f){return new ge(f)};$.Layers=V,$.Zoom=X,$.Scale=oe,$.Attribution=ge,z.layers=q,z.zoom=re,z.scale=ue,z.attribution=Se;var ce=U.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ce.addTo=function(f,p){return f.addHandler(p,this),this};var Ce={Events:Z},Pe=Ze.touch?"touchstart mousedown":"mousedown",Me=J.extend({options:{clickTolerance:3},initialize:function(f,p,x,E){y(this,E),this._element=f,this._dragStartTarget=p||f,this._preventOutline=x},enable:function(){this._enabled||(gt(this._dragStartTarget,Pe,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Me._dragging===this&&this.finishDrag(!0),Jt(this._dragStartTarget,Pe,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!ng(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Me._dragging===this&&this.finishDrag();return}if(!(Me._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Me._dragging=this,this._preventOutline&&ag(this._element),rg(),uu(),!this._moving)){this.fire("down");var p=f.touches?f.touches[0]:f,x=N1(this._element);this._startPoint=new H(p.clientX,p.clientY),this._startPos=Ya(this._element),this._parentScale=sg(x);var E=f.type==="mousedown";gt(document,E?"mousemove":"touchmove",this._onMove,this),gt(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var p=f.touches&&f.touches.length===1?f.touches[0]:f,x=new H(p.clientX,p.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,Vn(f),this._moved||(this.fire("dragstart"),this._moved=!0,vt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Fn(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){En(document.body,"leaflet-dragging"),this._lastTarget&&(En(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Jt(document,"mousemove touchmove",this._onMove,this),Jt(document,"mouseup touchend touchcancel",this._onUp,this),lh(),cu();var p=this._moved&&this._moving;this._moving=!1,Me._dragging=!1,p&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function Ge(f,p,x){var E,A=[1,4,2,8],I,Y,ee,te,pe,ze,ct,kt;for(I=0,ze=f.length;I<ze;I++)f[I]._code=yt(f[I],p);for(ee=0;ee<4;ee++){for(ct=A[ee],E=[],I=0,ze=f.length,Y=ze-1;I<ze;Y=I++)te=f[I],pe=f[Y],te._code&ct?pe._code&ct||(kt=St(pe,te,ct,p,x),kt._code=yt(kt,p),E.push(kt)):(pe._code&ct&&(kt=St(pe,te,ct,p,x),kt._code=yt(kt,p),E.push(kt)),E.push(te));f=E}return f}function pt(f,p){var x,E,A,I,Y,ee,te,pe,ze;if(!f||f.length===0)throw new Error("latlngs not passed");ut(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var ct=Ae([0,0]),kt=Ee(f),tr=kt.getNorthWest().distanceTo(kt.getSouthWest())*kt.getNorthEast().distanceTo(kt.getNorthWest());tr<1700&&(ct=Ue(f));var ai=f.length,To=[];for(x=0;x<ai;x++){var Fr=Ae(f[x]);To.push(p.project(Ae([Fr.lat-ct.lat,Fr.lng-ct.lng])))}for(ee=te=pe=0,x=0,E=ai-1;x<ai;E=x++)A=To[x],I=To[E],Y=A.y*I.x-I.y*A.x,te+=(A.x+I.x)*Y,pe+=(A.y+I.y)*Y,ee+=Y*3;ee===0?ze=To[0]:ze=[te/ee,pe/ee];var gh=p.unproject(K(ze));return Ae([gh.lat+ct.lat,gh.lng+ct.lng])}function Ue(f){for(var p=0,x=0,E=0,A=0;A<f.length;A++){var I=Ae(f[A]);p+=I.lat,x+=I.lng,E++}return Ae([p/E,x/E])}var Fe={__proto__:null,clipPolygon:Ge,polygonCenter:pt,centroid:Ue};function lt(f,p){if(!p||!f.length)return f.slice();var x=p*p;return f=ot(f,x),f=wt(f,x),f}function je(f,p,x){return Math.sqrt(We(f,p,x,!0))}function at(f,p,x){return We(f,p,x)}function wt(f,p){var x=f.length,E=typeof Uint8Array<"u"?Uint8Array:Array,A=new E(x);A[0]=A[x-1]=1,Xe(f,A,p,0,x-1);var I,Y=[];for(I=0;I<x;I++)A[I]&&Y.push(f[I]);return Y}function Xe(f,p,x,E,A){var I=0,Y,ee,te;for(ee=E+1;ee<=A-1;ee++)te=We(f[ee],f[E],f[A],!0),te>I&&(Y=ee,I=te);I>x&&(p[Y]=1,Xe(f,p,x,E,Y),Xe(f,p,x,Y,A))}function ot(f,p){for(var x=[f[0]],E=1,A=0,I=f.length;E<I;E++)Yt(f[E],f[A])>p&&(x.push(f[E]),A=E);return A<I-1&&x.push(f[I-1]),x}var At;function st(f,p,x,E,A){var I=E?At:yt(f,x),Y=yt(p,x),ee,te,pe;for(At=Y;;){if(!(I|Y))return[f,p];if(I&Y)return!1;ee=I||Y,te=St(f,p,ee,x,A),pe=yt(te,x),ee===I?(f=te,I=pe):(p=te,Y=pe)}}function St(f,p,x,E,A){var I=p.x-f.x,Y=p.y-f.y,ee=E.min,te=E.max,pe,ze;return x&8?(pe=f.x+I*(te.y-f.y)/Y,ze=te.y):x&4?(pe=f.x+I*(ee.y-f.y)/Y,ze=ee.y):x&2?(pe=te.x,ze=f.y+Y*(te.x-f.x)/I):x&1&&(pe=ee.x,ze=f.y+Y*(ee.x-f.x)/I),new H(pe,ze,A)}function yt(f,p){var x=0;return f.x<p.min.x?x|=1:f.x>p.max.x&&(x|=2),f.y<p.min.y?x|=4:f.y>p.max.y&&(x|=8),x}function Yt(f,p){var x=p.x-f.x,E=p.y-f.y;return x*x+E*E}function We(f,p,x,E){var A=p.x,I=p.y,Y=x.x-A,ee=x.y-I,te=Y*Y+ee*ee,pe;return te>0&&(pe=((f.x-A)*Y+(f.y-I)*ee)/te,pe>1?(A=x.x,I=x.y):pe>0&&(A+=Y*pe,I+=ee*pe)),Y=f.x-A,ee=f.y-I,E?Y*Y+ee*ee:new H(A,I)}function ut(f){return!S(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function hn(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ut(f)}function oi(f,p){var x,E,A,I,Y,ee,te,pe;if(!f||f.length===0)throw new Error("latlngs not passed");ut(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var ze=Ae([0,0]),ct=Ee(f),kt=ct.getNorthWest().distanceTo(ct.getSouthWest())*ct.getNorthEast().distanceTo(ct.getNorthWest());kt<1700&&(ze=Ue(f));var tr=f.length,ai=[];for(x=0;x<tr;x++){var To=Ae(f[x]);ai.push(p.project(Ae([To.lat-ze.lat,To.lng-ze.lng])))}for(x=0,E=0;x<tr-1;x++)E+=ai[x].distanceTo(ai[x+1])/2;if(E===0)pe=ai[0];else for(x=0,I=0;x<tr-1;x++)if(Y=ai[x],ee=ai[x+1],A=Y.distanceTo(ee),I+=A,I>E){te=(I-E)/A,pe=[ee.x-te*(ee.x-Y.x),ee.y-te*(ee.y-Y.y)];break}var Fr=p.unproject(K(pe));return Ae([Fr.lat+ze.lat,Fr.lng+ze.lng])}var nt={__proto__:null,simplify:lt,pointToSegmentDistance:je,closestPointOnSegment:at,clipSegment:st,_getEdgeIntersection:St,_getBitCode:yt,_sqClosestPointOnSegment:We,isFlat:ut,_flat:hn,polylineCenter:oi},nn={project:function(f){return new H(f.lng,f.lat)},unproject:function(f){return new we(f.y,f.x)},bounds:new ne([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var p=Math.PI/180,x=this.R,E=f.lat*p,A=this.R_MINOR/x,I=Math.sqrt(1-A*A),Y=I*Math.sin(E),ee=Math.tan(Math.PI/4-E/2)/Math.pow((1-Y)/(1+Y),I/2);return E=-x*Math.log(Math.max(ee,1e-10)),new H(f.lng*p*x,E)},unproject:function(f){for(var p=180/Math.PI,x=this.R,E=this.R_MINOR/x,A=Math.sqrt(1-E*E),I=Math.exp(-f.y/x),Y=Math.PI/2-2*Math.atan(I),ee=0,te=.1,pe;ee<15&&Math.abs(te)>1e-7;ee++)pe=A*Math.sin(Y),pe=Math.pow((1-pe)/(1+pe),A/2),te=Math.PI/2-2*Math.atan(I*pe)-Y,Y+=te;return new we(Y*p,f.x*p/x)}},bi={__proto__:null,LonLat:nn,Mercator:xn,SphericalMercator:Ye},Hn=r({},Et,{code:"EPSG:3395",projection:xn,transformation:function(){var f=.5/(Math.PI*xn.R);return de(f,.5,-f,.5)}()}),oa=r({},Et,{code:"EPSG:4326",projection:nn,transformation:de(1/180,1,-1/180,.5)}),aa=r({},It,{projection:nn,transformation:de(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,p){var x=p.lng-f.lng,E=p.lat-f.lat;return Math.sqrt(x*x+E*E)},infinite:!0});It.Earth=Et,It.EPSG3395=Hn,It.EPSG3857=Tt,It.EPSG900913=ft,It.EPSG4326=oa,It.Simple=aa;var Rr=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var p=f.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var x=this.getEvents();p.on(x,this),this.once("remove",function(){p.off(x,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});C.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var p=l(f);return this._layers[p]?this:(this._layers[p]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var p=l(f);return this._layers[p]?(this._loaded&&f.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,p){for(var x in this._layers)f.call(p,this._layers[x]);return this},_addLayers:function(f){f=f?S(f)?f:[f]:[];for(var p=0,x=f.length;p<x;p++)this.addLayer(f[p])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var p=l(f);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,p=-1/0,x=this._getZoomSpan();for(var E in this._zoomBoundLayers){var A=this._zoomBoundLayers[E].options;f=A.minZoom===void 0?f:Math.min(f,A.minZoom),p=A.maxZoom===void 0?p:Math.max(p,A.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=f===1/0?void 0:f,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xa=Rr.extend({initialize:function(f,p){y(this,p),this._layers={};var x,E;if(f)for(x=0,E=f.length;x<E;x++)this.addLayer(f[x])},addLayer:function(f){var p=this.getLayerId(f);return this._layers[p]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var p=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(f){var p=typeof f=="number"?f:this.getLayerId(f);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var p=Array.prototype.slice.call(arguments,1),x,E;for(x in this._layers)E=this._layers[x],E[f]&&E[f].apply(E,p);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,p){for(var x in this._layers)f.call(p,this._layers[x]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),fE=function(f,p){return new Xa(f,p)},Tr=Xa.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),Xa.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),Xa.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new $e;for(var p in this._layers){var x=this._layers[p];f.extend(x.getBounds?x.getBounds():x.getLatLng())}return f}}),dE=function(f,p){return new Tr(f,p)},Js=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){y(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,p){var x=this._getIconUrl(f);if(!x){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(x,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(E,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(f,p){var x=this.options,E=x[p+"Size"];typeof E=="number"&&(E=[E,E]);var A=K(E),I=K(p==="shadow"&&x.shadowAnchor||x.iconAnchor||A&&A.divideBy(2,!0));f.className="leaflet-marker-"+p+" "+(x.className||""),I&&(f.style.marginLeft=-I.x+"px",f.style.marginTop=-I.y+"px"),A&&(f.style.width=A.x+"px",f.style.height=A.y+"px")},_createImg:function(f,p){return p=p||document.createElement("img"),p.src=f,p},_getIconUrl:function(f){return Ze.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function dh(f){return new Js(f)}var Ka=Js.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Ka.imagePath!="string"&&(Ka.imagePath=this._detectIconPath()),(this.options.imagePath||Ka.imagePath)+Js.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var p=function(x,E,A){var I=E.exec(x);return I&&I[A]};return f=p(f,/^url\((['"])?(.+)\1\)$/,2),f&&p(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Lt("div","leaflet-default-icon-path",document.body),p=Xc(f,"background-image")||Xc(f,"backgroundImage");if(document.body.removeChild(f),p=this._stripUrl(p),p)return p;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),fg=ce.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Me(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),vt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&En(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var p=this._marker,x=p._map,E=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,I=Ya(p._icon),Y=x.getPixelBounds(),ee=x.getPixelOrigin(),te=he(Y.min._subtract(ee).add(A),Y.max._subtract(ee).subtract(A));if(!te.contains(I)){var pe=K((Math.max(te.max.x,I.x)-te.max.x)/(Y.max.x-te.max.x)-(Math.min(te.min.x,I.x)-te.min.x)/(Y.min.x-te.min.x),(Math.max(te.max.y,I.y)-te.max.y)/(Y.max.y-te.max.y)-(Math.min(te.min.y,I.y)-te.min.y)/(Y.min.y-te.min.y)).multiplyBy(E);x.panBy(pe,{animate:!1}),this._draggable._newPos._add(pe),this._draggable._startPos._add(pe),Fn(p._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=D(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,f)))},_onDrag:function(f){var p=this._marker,x=p._shadow,E=Ya(p._icon),A=p._map.layerPointToLatLng(E);x&&Fn(x,E),p._latlng=A,f.latlng=A,f.oldLatLng=this._oldLatLng,p.fire("move",f).fire("drag",f)},_onDragEnd:function(f){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),nf=Rr.extend({options:{icon:new Ka,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,p){y(this,p),this._latlng=Ae(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var p=this._latlng;return this._latlng=Ae(f),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=f.icon.createIcon(this._icon),E=!1;x!==this._icon&&(this._icon&&this._removeIcon(),E=!0,f.title&&(x.title=f.title),x.tagName==="IMG"&&(x.alt=f.alt||"")),vt(x,p),f.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(x,"focus",this._panOnFocus,this);var A=f.icon.createShadow(this._shadow),I=!1;A!==this._shadow&&(this._removeShadow(),I=!0),A&&(vt(A,p),A.alt=""),this._shadow=A,f.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&I&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(this._icon,"focus",this._panOnFocus,this),dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Fn(this._icon,f),this._shadow&&Fn(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fg)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fg(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&Er(this._icon,f),this._shadow&&Er(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var p=this.options.icon.options,x=p.iconSize?K(p.iconSize):K(0,0),E=p.iconAnchor?K(p.iconAnchor):K(0,0);f.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:x.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function hE(f,p){return new nf(f,p)}var Ja=Rr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return y(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wi=Ja.extend({options:{fill:!0,radius:10},initialize:function(f,p){y(this,p),this._latlng=Ae(f),this._radius=this.options.radius},setLatLng:function(f){var p=this._latlng;return this._latlng=Ae(f),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var p=f&&f.radius||this._radius;return Ja.prototype.setStyle.call(this,f),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,p=this._radiusY||f,x=this._clickTolerance(),E=[f+x,p+x];this._pxBounds=new ne(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dg(f,p){return new wi(f,p)}var hg=wi.extend({initialize:function(f,p,x){if(typeof p=="number"&&(p=r({},x,{radius:p})),y(this,p),this._latlng=Ae(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:Ja.prototype.setStyle,_project:function(){var f=this._latlng.lng,p=this._latlng.lat,x=this._map,E=x.options.crs;if(E.distance===Et.distance){var A=Math.PI/180,I=this._mRadius/Et.R/A,Y=x.project([p+I,f]),ee=x.project([p-I,f]),te=Y.add(ee).divideBy(2),pe=x.unproject(te).lat,ze=Math.acos((Math.cos(I*A)-Math.sin(p*A)*Math.sin(pe*A))/(Math.cos(p*A)*Math.cos(pe*A)))/A;(isNaN(ze)||ze===0)&&(ze=I/Math.cos(Math.PI/180*p)),this._point=te.subtract(x.getPixelOrigin()),this._radius=isNaN(ze)?0:te.x-x.project([pe,f-ze]).x,this._radiusY=te.y-Y.y}else{var ct=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(ct).x}this._updateBounds()}});function hh(f,p,x){return new hg(f,p,x)}var Zt=Ja.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,p){y(this,p),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var p=1/0,x=null,E=We,A,I,Y=0,ee=this._parts.length;Y<ee;Y++)for(var te=this._parts[Y],pe=1,ze=te.length;pe<ze;pe++){A=te[pe-1],I=te[pe];var ct=E(f,A,I,!0);ct<p&&(p=ct,x=E(f,A,I))}return x&&(x.distance=Math.sqrt(p)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,p){return p=p||this._defaultShape(),f=Ae(f),p.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new $e,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var p=[],x=ut(f),E=0,A=f.length;E<A;E++)x?(p[E]=Ae(f[E]),this._bounds.extend(p[E])):p[E]=this._convertLatLngs(f[E]);return p},_project:function(){var f=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),p=new H(f,f);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(f,p,x){var E=f[0]instanceof we,A=f.length,I,Y;if(E){for(Y=[],I=0;I<A;I++)Y[I]=this._map.latLngToLayerPoint(f[I]),x.extend(Y[I]);p.push(Y)}else for(I=0;I<A;I++)this._projectLatlngs(f[I],p,x)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,x,E,A,I,Y,ee,te;for(x=0,A=0,I=this._rings.length;x<I;x++)for(te=this._rings[x],E=0,Y=te.length;E<Y-1;E++)ee=st(te[E],te[E+1],f,E,!0),ee&&(p[A]=p[A]||[],p[A].push(ee[0]),(ee[1]!==te[E+1]||E===Y-2)&&(p[A].push(ee[1]),A++))}},_simplifyPoints:function(){for(var f=this._parts,p=this.options.smoothFactor,x=0,E=f.length;x<E;x++)f[x]=lt(f[x],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,p){var x,E,A,I,Y,ee,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(x=0,I=this._parts.length;x<I;x++)for(ee=this._parts[x],E=0,Y=ee.length,A=Y-1;E<Y;A=E++)if(!(!p&&E===0)&&je(f,ee[A],ee[E])<=te)return!0;return!1}});function O1(f,p){return new Zt(f,p)}Zt._flat=hn;var fu=Zt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var p=Zt.prototype._convertLatLngs.call(this,f),x=p.length;return x>=2&&p[0]instanceof we&&p[0].equals(p[x-1])&&p.pop(),p},_setLatLngs:function(f){Zt.prototype._setLatLngs.call(this,f),ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,p=this.options.weight,x=new H(p,p);if(f=new ne(f.min.subtract(x),f.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,A=this._rings.length,I;E<A;E++)I=Ge(this._rings[E],f,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var p=!1,x,E,A,I,Y,ee,te,pe;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(I=0,te=this._parts.length;I<te;I++)for(x=this._parts[I],Y=0,pe=x.length,ee=pe-1;Y<pe;ee=Y++)E=x[Y],A=x[ee],E.y>f.y!=A.y>f.y&&f.x<(A.x-E.x)*(f.y-E.y)/(A.y-E.y)+E.x&&(p=!p);return p||Zt.prototype._containsPoint.call(this,f,!0)}});function pE(f,p){return new fu(f,p)}var Ar=Tr.extend({initialize:function(f,p){y(this,p),this._layers={},f&&this.addData(f)},addData:function(f){var p=S(f)?f:f.features,x,E,A;if(p){for(x=0,E=p.length;x<E;x++)A=p[x],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var I=this.options;if(I.filter&&!I.filter(f))return this;var Y=du(f,I);return Y?(Y.feature=D1(f),Y.defaultOptions=Y.options,this.resetStyle(Y),I.onEachFeature&&I.onEachFeature(f,Y),this.addLayer(Y)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=r({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(p){this._setLayerStyle(p,f)},this)},_setLayerStyle:function(f,p){f.setStyle&&(typeof p=="function"&&(p=p(f.feature)),f.setStyle(p))}});function du(f,p){var x=f.type==="Feature"?f.geometry:f,E=x?x.coordinates:null,A=[],I=p&&p.pointToLayer,Y=p&&p.coordsToLatLng||mE,ee,te,pe,ze;if(!E&&!x)return null;switch(x.type){case"Point":return ee=Y(E),pg(I,f,ee,p);case"MultiPoint":for(pe=0,ze=E.length;pe<ze;pe++)ee=Y(E[pe]),A.push(pg(I,f,ee,p));return new Tr(A);case"LineString":case"MultiLineString":return te=I1(E,x.type==="LineString"?0:1,Y),new Zt(te,p);case"Polygon":case"MultiPolygon":return te=I1(E,x.type==="Polygon"?1:2,Y),new fu(te,p);case"GeometryCollection":for(pe=0,ze=x.geometries.length;pe<ze;pe++){var ct=du({geometry:x.geometries[pe],type:"Feature",properties:f.properties},p);ct&&A.push(ct)}return new Tr(A);case"FeatureCollection":for(pe=0,ze=x.features.length;pe<ze;pe++){var kt=du(x.features[pe],p);kt&&A.push(kt)}return new Tr(A);default:throw new Error("Invalid GeoJSON object.")}}function pg(f,p,x,E){return f?f(p,x):new nf(x,E&&E.markersInheritOptions&&E)}function mE(f){return new we(f[1],f[0],f[2])}function I1(f,p,x){for(var E=[],A=0,I=f.length,Y;A<I;A++)Y=p?I1(f[A],p-1,x):(x||mE)(f[A]),E.push(Y);return E}function gE(f,p){return f=Ae(f),f.alt!==void 0?[h(f.lng,p),h(f.lat,p),h(f.alt,p)]:[h(f.lng,p),h(f.lat,p)]}function L1(f,p,x,E){for(var A=[],I=0,Y=f.length;I<Y;I++)A.push(p?L1(f[I],ut(f[I])?0:p-1,x,E):gE(f[I],E));return!p&&x&&A.length>0&&A.push(A[0].slice()),A}function ph(f,p){return f.feature?r({},f.feature,{geometry:p}):D1(p)}function D1(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var yE={toGeoJSON:function(f){return ph(this,{type:"Point",coordinates:gE(this.getLatLng(),f)})}};nf.include(yE),hg.include(yE),wi.include(yE),Zt.include({toGeoJSON:function(f){var p=!ut(this._latlngs),x=L1(this._latlngs,p?1:0,!1,f);return ph(this,{type:(p?"Multi":"")+"LineString",coordinates:x})}}),fu.include({toGeoJSON:function(f){var p=!ut(this._latlngs),x=p&&!ut(this._latlngs[0]),E=L1(this._latlngs,x?2:p?1:0,!0,f);return p||(E=[E]),ph(this,{type:(x?"Multi":"")+"Polygon",coordinates:E})}}),Xa.include({toMultiPoint:function(f){var p=[];return this.eachLayer(function(x){p.push(x.toGeoJSON(f).geometry.coordinates)}),ph(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(f){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(f);var x=p==="GeometryCollection",E=[];return this.eachLayer(function(A){if(A.toGeoJSON){var I=A.toGeoJSON(f);if(x)E.push(I.geometry);else{var Y=D1(I);Y.type==="FeatureCollection"?E.push.apply(E,Y.features):E.push(Y)}}}),x?ph(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function wD(f,p){return new Ar(f,p)}var Aie=wD,z1=Rr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,p,x){this._url=f,this._bounds=Ee(p),y(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&su(this._image),this},bringToBack:function(){return this._map&&lu(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=Ee(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",p=this._image=f?this._url:Lt("img");if(vt(p,"leaflet-image-layer"),this._zoomAnimated&&vt(p,"leaflet-zoom-animated"),this.options.className&&vt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onload=a(this.fire,this,"load"),p.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(f){var p=this._map.getZoomScale(f.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Zs(this._image,x,p)},_reset:function(){var f=this._image,p=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=p.getSize();Fn(f,p.min),f.style.width=x.x+"px",f.style.height=x.y+"px"},_updateOpacity:function(){Er(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Fie=function(f,p,x){return new z1(f,p,x)},SD=z1.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",p=this._image=f?this._url:Lt("video");if(vt(p,"leaflet-image-layer"),this._zoomAnimated&&vt(p,"leaflet-zoom-animated"),this.options.className&&vt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onloadeddata=a(this.fire,this,"load"),f){for(var x=p.getElementsByTagName("source"),E=[],A=0;A<x.length;A++)E.push(x[A].src);this._url=x.length>0?E:[p.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var Y=Lt("source");Y.src=this._url[I],p.appendChild(Y)}}});function Mie(f,p,x){return new SD(f,p,x)}var CD=z1.extend({_initImage:function(){var f=this._image=this._url;vt(f,"leaflet-image-layer"),this._zoomAnimated&&vt(f,"leaflet-zoom-animated"),this.options.className&&vt(f,this.options.className),f.onselectstart=d,f.onmousemove=d}});function Nie(f,p,x){return new CD(f,p,x)}var Qa=Rr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,p){f&&(f instanceof we||S(f))?(this._latlng=Ae(f),y(this,p)):(y(this,f),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&Er(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&Er(this._container,1),this.bringToFront(),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(Er(this._container,0),this._removeTimeout=setTimeout(a(dn,void 0,this._container),200)):dn(this._container),this.options.interactive&&(En(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=Ae(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&su(this._container),this},bringToBack:function(){return this._map&&lu(this._container),this},_prepareOpen:function(f){var p=this._source;if(!p._map)return!1;if(p instanceof Tr){p=null;var x=this._source._layers;for(var E in x)if(x[E]._map){p=x[E];break}if(!p)return!1;this._source=p}if(!f)if(p.getCenter)f=p.getCenter();else if(p.getLatLng)f=p.getLatLng();else if(p.getBounds)f=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")f.innerHTML=p;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),p=K(this.options.offset),x=this._getAnchor();this._zoomAnimated?Fn(this._container,f.add(x)):p=p.add(f).add(x);var E=this._containerBottom=-p.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=E+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});C.include({_initOverlay:function(f,p,x,E){var A=p;return A instanceof f||(A=new f(E).setContent(p)),x&&A.setLatLng(x),A}}),Rr.include({_initOverlay:function(f,p,x,E){var A=x;return A instanceof f?(y(A,E),A._source=this):(A=p&&!E?p:new f(E,this),A.setContent(x)),A}});var j1=Qa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,Qa.prototype.openOn.call(this,f)},onAdd:function(f){Qa.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ja||this._source.on("preclick",Za))},onRemove:function(f){Qa.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ja||this._source.off("preclick",Za))},getEvents:function(){var f=Qa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",p=this._container=Lt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=Lt("div",f+"-content-wrapper",p);if(this._contentNode=Lt("div",f+"-content",x),Xs(p),lg(this._contentNode),gt(p,"contextmenu",Za),this._tipContainer=Lt("div",f+"-tip-container",p),this._tip=Lt("div",f+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=Lt("a",f+"-close-button",p);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',gt(E,"click",function(A){Vn(A),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,p=f.style;p.width="",p.whiteSpace="nowrap";var x=f.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),p.width=x+1+"px",p.whiteSpace="",p.height="";var E=f.offsetHeight,A=this.options.maxHeight,I="leaflet-popup-scrolled";A&&E>A?(p.height=A+"px",vt(f,I)):En(f,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),x=this._getAnchor();Fn(this._container,p.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,p=parseInt(Xc(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+p,E=this._containerWidth,A=new H(this._containerLeft,-x-this._containerBottom);A._add(Ya(this._container));var I=f.layerPointToContainerPoint(A),Y=K(this.options.autoPanPadding),ee=K(this.options.autoPanPaddingTopLeft||Y),te=K(this.options.autoPanPaddingBottomRight||Y),pe=f.getSize(),ze=0,ct=0;I.x+E+te.x>pe.x&&(ze=I.x+E-pe.x+te.x),I.x-ze-ee.x<0&&(ze=I.x-ee.x),I.y+x+te.y>pe.y&&(ct=I.y+x-pe.y+te.y),I.y-ct-ee.y<0&&(ct=I.y-ee.y),(ze||ct)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([ze,ct]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pie=function(f,p){return new j1(f,p)};C.mergeOptions({closePopupOnClick:!0}),C.include({openPopup:function(f,p,x){return this._initOverlay(j1,f,p,x).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Rr.include({bindPopup:function(f,p){return this._popup=this._initOverlay(j1,this._popup,f,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Tr||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){Ks(f);var p=f.layer||f.target;if(this._popup._source===p&&!(p instanceof Ja)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=p,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var B1=Qa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){Qa.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){Qa.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=Qa.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",p=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var p,x,E=this._map,A=this._container,I=E.latLngToContainerPoint(E.getCenter()),Y=E.layerPointToContainerPoint(f),ee=this.options.direction,te=A.offsetWidth,pe=A.offsetHeight,ze=K(this.options.offset),ct=this._getAnchor();ee==="top"?(p=te/2,x=pe):ee==="bottom"?(p=te/2,x=0):ee==="center"?(p=te/2,x=pe/2):ee==="right"?(p=0,x=pe/2):ee==="left"?(p=te,x=pe/2):Y.x<I.x?(ee="right",p=0,x=pe/2):(ee="left",p=te+(ze.x+ct.x)*2,x=pe/2),f=f.subtract(K(p,x,!0)).add(ze).add(ct),En(A,"leaflet-tooltip-right"),En(A,"leaflet-tooltip-left"),En(A,"leaflet-tooltip-top"),En(A,"leaflet-tooltip-bottom"),vt(A,"leaflet-tooltip-"+ee),Fn(A,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&Er(this._container,f)},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(p)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),$ie=function(f,p){return new B1(f,p)};C.include({openTooltip:function(f,p,x){return this._initOverlay(B1,f,p,x).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Rr.include({bindTooltip:function(f,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(B1,this._tooltip,f,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var p=f?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[p](x),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Tr||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var p=typeof f.getElement=="function"&&f.getElement();p&&(gt(p,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),gt(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var p=typeof f.getElement=="function"&&f.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var p=f.latlng,x,E;this._tooltip.options.sticky&&f.originalEvent&&(x=this._map.mouseEventToContainerPoint(f.originalEvent),E=this._map.containerPointToLayerPoint(x),p=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(p)}});var ED=Js.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var p=f&&f.tagName==="DIV"?f:document.createElement("div"),x=this.options;if(x.html instanceof Element?(rh(p),p.appendChild(x.html)):p.innerHTML=x.html!==!1?x.html:"",x.bgPos){var E=K(x.bgPos);p.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function Oie(f){return new ED(f)}Js.Default=Ka;var mg=Rr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){y(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),dn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(su(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(lu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof H?f:new H(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var p=this.getPane().children,x=-f(-1/0,1/0),E=0,A=p.length,I;E<A;E++)I=p[E].style.zIndex,p[E]!==this._container&&I&&(x=f(x,+I));isFinite(x)&&(this.options.zIndex=x+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){Er(this._container,this.options.opacity);var f=+new Date,p=!1,x=!1;for(var E in this._tiles){var A=this._tiles[E];if(!(!A.current||!A.loaded)){var I=Math.min(1,(f-A.loaded)/200);Er(A.el,I),I<1?p=!0:(A.active?x=!0:this._onOpaqueTile(A),A.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),p&&(W(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,p=this.options.maxZoom;if(f!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===f?(this._levels[x].el.style.zIndex=p-Math.abs(f-x),this._onUpdateLevel(x)):(dn(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var E=this._levels[f],A=this._map;return E||(E=this._levels[f]={},E.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=p,E.origin=A.project(A.unproject(A.getPixelOrigin()),f).round(),E.zoom=f,this._setZoomTransform(E,A.getCenter(),A.getZoom()),d(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var f,p,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)p=this._tiles[f],p.retain=p.current;for(f in this._tiles)if(p=this._tiles[f],p.current&&!p.active){var E=p.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var p in this._tiles)this._tiles[p].coords.z===f&&this._removeTile(p)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)dn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,p,x,E){var A=Math.floor(f/2),I=Math.floor(p/2),Y=x-1,ee=new H(+A,+I);ee.z=+Y;var te=this._tileCoordsToKey(ee),pe=this._tiles[te];return pe&&pe.active?(pe.retain=!0,!0):(pe&&pe.loaded&&(pe.retain=!0),Y>E?this._retainParent(A,I,Y,E):!1)},_retainChildren:function(f,p,x,E){for(var A=2*f;A<2*f+2;A++)for(var I=2*p;I<2*p+2;I++){var Y=new H(A,I);Y.z=x+1;var ee=this._tileCoordsToKey(Y),te=this._tiles[ee];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);x+1<E&&this._retainChildren(A,I,x+1,E)}},_resetView:function(f){var p=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var p=this.options;return p.minNativeZoom!==void 0&&f<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<f?p.maxNativeZoom:f},_setView:function(f,p,x,E){var A=Math.round(p);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var I=this.options.updateWhenZooming&&A!==this._tileZoom;(!E||I)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(f),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(f,p)},_setZoomTransforms:function(f,p){for(var x in this._levels)this._setZoomTransform(this._levels[x],f,p)},_setZoomTransform:function(f,p,x){var E=this._map.getZoomScale(x,f.zoom),A=f.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(p,x)).round();Ze.any3d?Zs(f.el,A,E):Fn(f.el,A)},_resetGrid:function(){var f=this._map,p=f.options.crs,x=this._tileSize=this.getTileSize(),E=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,p.wrapLng[0]],E).x/x.x),Math.ceil(f.project([0,p.wrapLng[1]],E).x/x.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([p.wrapLat[0],0],E).y/x.x),Math.ceil(f.project([p.wrapLat[1],0],E).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var p=this._map,x=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),E=p.getZoomScale(x,this._tileZoom),A=p.project(f,this._tileZoom).floor(),I=p.getSize().divideBy(E*2);return new ne(A.subtract(I),A.add(I))},_update:function(f){var p=this._map;if(p){var x=this._clampZoom(p.getZoom());if(f===void 0&&(f=p.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(f),A=this._pxBoundsToTileRange(E),I=A.getCenter(),Y=[],ee=this.options.keepBuffer,te=new ne(A.getBottomLeft().subtract([ee,-ee]),A.getTopRight().add([ee,-ee]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pe in this._tiles){var ze=this._tiles[pe].coords;(ze.z!==this._tileZoom||!te.contains(new H(ze.x,ze.y)))&&(this._tiles[pe].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(f,x);return}for(var ct=A.min.y;ct<=A.max.y;ct++)for(var kt=A.min.x;kt<=A.max.x;kt++){var tr=new H(kt,ct);if(tr.z=this._tileZoom,!!this._isValidTile(tr)){var ai=this._tiles[this._tileCoordsToKey(tr)];ai?ai.current=!0:Y.push(tr)}}if(Y.sort(function(Fr,gh){return Fr.distanceTo(I)-gh.distanceTo(I)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var To=document.createDocumentFragment();for(kt=0;kt<Y.length;kt++)this._addTile(Y[kt],To);this._level.el.appendChild(To)}}}},_isValidTile:function(f){var p=this._map.options.crs;if(!p.infinite){var x=this._globalTileRange;if(!p.wrapLng&&(f.x<x.min.x||f.x>x.max.x)||!p.wrapLat&&(f.y<x.min.y||f.y>x.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(f);return Ee(this.options.bounds).overlaps(E)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var p=this._map,x=this.getTileSize(),E=f.scaleBy(x),A=E.add(x),I=p.unproject(E,f.z),Y=p.unproject(A,f.z);return[I,Y]},_tileCoordsToBounds:function(f){var p=this._tileCoordsToNwSe(f),x=new $e(p[0],p[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var p=f.split(":"),x=new H(+p[0],+p[1]);return x.z=+p[2],x},_removeTile:function(f){var p=this._tiles[f];p&&(dn(p.el),delete this._tiles[f],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){vt(f,"leaflet-tile");var p=this.getTileSize();f.style.width=p.x+"px",f.style.height=p.y+"px",f.onselectstart=d,f.onmousemove=d,Ze.ielt9&&this.options.opacity<1&&Er(f,this.options.opacity)},_addTile:function(f,p){var x=this._getTilePos(f),E=this._tileCoordsToKey(f),A=this.createTile(this._wrapCoords(f),a(this._tileReady,this,f));this._initTile(A),this.createTile.length<2&&D(a(this._tileReady,this,f,null,A)),Fn(A,x),this._tiles[E]={el:A,coords:f,current:!0},p.appendChild(A),this.fire("tileloadstart",{tile:A,coords:f})},_tileReady:function(f,p,x){p&&this.fire("tileerror",{error:p,tile:x,coords:f});var E=this._tileCoordsToKey(f);x=this._tiles[E],x&&(x.loaded=+new Date,this._map._fadeAnimated?(Er(x.el,0),W(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),p||(vt(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var p=new H(this._wrapX?c(f.x,this._wrapX):f.x,this._wrapY?c(f.y,this._wrapY):f.y);return p.z=f.z,p},_pxBoundsToTileRange:function(f){var p=this.getTileSize();return new ne(f.min.unscaleBy(p).floor(),f.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function Iie(f){return new mg(f)}var mh=mg.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,p){this._url=f,p=y(this,p),p.detectRetina&&Ze.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,p){return this._url===f&&p===void 0&&(p=!0),this._url=f,p||this.redraw(),this},createTile:function(f,p){var x=document.createElement("img");return gt(x,"load",a(this._tileOnLoad,this,p,x)),gt(x,"error",a(this._tileOnError,this,p,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(f),x},getTileUrl:function(f){var p={r:Ze.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-f.y;this.options.tms&&(p.y=x),p["-y"]=x}return b(this._url,r(p,this.options))},_tileOnLoad:function(f,p){Ze.ielt9?setTimeout(a(f,this,null,p),0):f(null,p)},_tileOnError:function(f,p,x){var E=this.options.errorTileUrl;E&&p.getAttribute("src")!==E&&(p.src=E),f(x,p)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,p=this.options.maxZoom,x=this.options.zoomReverse,E=this.options.zoomOffset;return x&&(f=p-f),f+E},_getSubdomain:function(f){var p=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var f,p;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(p=this._tiles[f].el,p.onload=d,p.onerror=d,!p.complete)){p.src=R;var x=this._tiles[f].coords;dn(p),delete this._tiles[f],this.fire("tileabort",{tile:p,coords:x})}},_removeTile:function(f){var p=this._tiles[f];if(p)return p.el.setAttribute("src",R),mg.prototype._removeTile.call(this,f)},_tileReady:function(f,p,x){if(!(!this._map||x&&x.getAttribute("src")===R))return mg.prototype._tileReady.call(this,f,p,x)}});function kD(f,p){return new mh(f,p)}var RD=mh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,p){this._url=f;var x=r({},this.defaultWmsParams);for(var E in p)E in this.options||(x[E]=p[E]);p=y(this,p);var A=p.detectRetina&&Ze.retina?2:1,I=this.getTileSize();x.width=I.x*A,x.height=I.y*A,this.wmsParams=x},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,mh.prototype.onAdd.call(this,f)},getTileUrl:function(f){var p=this._tileCoordsToNwSe(f),x=this._crs,E=he(x.project(p[0]),x.project(p[1])),A=E.min,I=E.max,Y=(this._wmsVersion>=1.3&&this._crs===oa?[A.y,A.x,I.y,I.x]:[A.x,A.y,I.x,I.y]).join(","),ee=mh.prototype.getTileUrl.call(this,f);return ee+v(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(f,p){return r(this.wmsParams,f),p||this.redraw(),this}});function Lie(f,p){return new RD(f,p)}mh.WMS=RD,kD.wms=Lie;var Qs=Rr.extend({options:{padding:.1},initialize:function(f){y(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,p){var x=this._map.getZoomScale(p,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,p),I=E.multiplyBy(-x).add(A).subtract(this._map._getNewPixelOrigin(f,p));Ze.any3d?Zs(this._container,I,x):Fn(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,p=this._map.getSize(),x=this._map.containerPointToLayerPoint(p.multiplyBy(-f)).round();this._bounds=new ne(x,x.add(p.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),TD=Qs.extend({options:{tolerance:0},getEvents:function(){var f=Qs.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");gt(f,"mousemove",this._onMouseMove,this),gt(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gt(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,dn(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var p in this._layers)f=this._layers[p],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qs.prototype._update.call(this);var f=this._bounds,p=this._container,x=f.getSize(),E=Ze.retina?2:1;Fn(p,f.min),p.width=E*x.x,p.height=E*x.y,p.style.width=x.x+"px",p.style.height=x.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Qs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var p=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var p=f._order,x=p.next,E=p.prev;x?x.prev=E:this._drawLast=E,E?E.next=x:this._drawFirst=x,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var p=f.options.dashArray.split(/[, ]+/),x=[],E,A;for(A=0;A<p.length;A++){if(E=Number(p[A]),isNaN(E))return;x.push(E)}f.options._dashArray=x}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var p=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(f._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(f._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var p=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,p=this._redrawBounds;if(this._ctx.save(),p){var x=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)f=E.layer,(!p||f._pxBounds&&f._pxBounds.intersects(p))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,p){if(this._drawing){var x,E,A,I,Y=f._parts,ee=Y.length,te=this._ctx;if(ee){for(te.beginPath(),x=0;x<ee;x++){for(E=0,A=Y[x].length;E<A;E++)I=Y[x][E],te[E?"lineTo":"moveTo"](I.x,I.y);p&&te.closePath()}this._fillStroke(te,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var p=f._point,x=this._ctx,E=Math.max(Math.round(f._radius),1),A=(Math.max(Math.round(f._radiusY),1)||E)/E;A!==1&&(x.save(),x.scale(1,A)),x.beginPath(),x.arc(p.x,p.y/A,E,0,Math.PI*2,!1),A!==1&&x.restore(),this._fillStroke(x,f)}},_fillStroke:function(f,p){var x=p.options;x.fill&&(f.globalAlpha=x.fillOpacity,f.fillStyle=x.fillColor||x.color,f.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(f.setLineDash&&f.setLineDash(p.options&&p.options._dashArray||[]),f.globalAlpha=x.opacity,f.lineWidth=x.weight,f.strokeStyle=x.color,f.lineCap=x.lineCap,f.lineJoin=x.lineJoin,f.stroke())},_onClick:function(f){for(var p=this._map.mouseEventToLayerPoint(f),x,E,A=this._drawFirst;A;A=A.next)x=A.layer,x.options.interactive&&x._containsPoint(p)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(x))&&(E=x);this._fireEvent(E?[E]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,p)}},_handleMouseOut:function(f){var p=this._hoveredLayer;p&&(En(this._container,"leaflet-interactive"),this._fireEvent([p],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,p){if(!this._mouseHoverThrottled){for(var x,E,A=this._drawFirst;A;A=A.next)x=A.layer,x.options.interactive&&x._containsPoint(p)&&(E=x);E!==this._hoveredLayer&&(this._handleMouseOut(f),E&&(vt(this._container,"leaflet-interactive"),this._fireEvent([E],f,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,p,x){this._map._fireDOMEvent(p,x||p.type,f)},_bringToFront:function(f){var p=f._order;if(p){var x=p.next,E=p.prev;if(x)x.prev=E;else return;E?E.next=x:x&&(this._drawFirst=x),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(f)}},_bringToBack:function(f){var p=f._order;if(p){var x=p.next,E=p.prev;if(E)E.next=x;else return;x?x.prev=E:E&&(this._drawLast=E),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(f)}}});function AD(f){return Ze.canvas?new TD(f):null}var gg=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Die={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qs.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var p=f._container=gg("shape");vt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",f._path=gg("path"),p.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var p=f._container;this._container.appendChild(p),f.options.interactive&&f.addInteractiveTarget(p)},_removePath:function(f){var p=f._container;dn(p),f.removeInteractiveTarget(p),delete this._layers[l(f)]},_updateStyle:function(f){var p=f._stroke,x=f._fill,E=f.options,A=f._container;A.stroked=!!E.stroke,A.filled=!!E.fill,E.stroke?(p||(p=f._stroke=gg("stroke")),A.appendChild(p),p.weight=E.weight+"px",p.color=E.color,p.opacity=E.opacity,E.dashArray?p.dashStyle=S(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=E.lineCap.replace("butt","flat"),p.joinstyle=E.lineJoin):p&&(A.removeChild(p),f._stroke=null),E.fill?(x||(x=f._fill=gg("fill")),A.appendChild(x),x.color=E.fillColor||E.color,x.opacity=E.fillOpacity):x&&(A.removeChild(x),f._fill=null)},_updateCircle:function(f){var p=f._point.round(),x=Math.round(f._radius),E=Math.round(f._radiusY||x);this._setPath(f,f._empty()?"M0 0":"AL "+p.x+","+p.y+" "+x+","+E+" 0,"+65535*360)},_setPath:function(f,p){f._path.v=p},_bringToFront:function(f){su(f._container)},_bringToBack:function(f){lu(f._container)}},H1=Ze.vml?gg:tt,yg=Qs.extend({_initContainer:function(){this._container=H1("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=H1("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dn(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qs.prototype._update.call(this);var f=this._bounds,p=f.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,x.setAttribute("width",p.x),x.setAttribute("height",p.y)),Fn(x,f.min),x.setAttribute("viewBox",[f.min.x,f.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(f){var p=f._path=H1("path");f.options.className&&vt(p,f.options.className),f.options.interactive&&vt(p,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){dn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var p=f._path,x=f.options;p&&(x.stroke?(p.setAttribute("stroke",x.color),p.setAttribute("stroke-opacity",x.opacity),p.setAttribute("stroke-width",x.weight),p.setAttribute("stroke-linecap",x.lineCap),p.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?p.setAttribute("stroke-dasharray",x.dashArray):p.removeAttribute("stroke-dasharray"),x.dashOffset?p.setAttribute("stroke-dashoffset",x.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),x.fill?(p.setAttribute("fill",x.fillColor||x.color),p.setAttribute("fill-opacity",x.fillOpacity),p.setAttribute("fill-rule",x.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(f,p){this._setPath(f,Vt(f._parts,p))},_updateCircle:function(f){var p=f._point,x=Math.max(Math.round(f._radius),1),E=Math.max(Math.round(f._radiusY),1)||x,A="a"+x+","+E+" 0 1,0 ",I=f._empty()?"M0 0":"M"+(p.x-x)+","+p.y+A+x*2+",0 "+A+-x*2+",0 ";this._setPath(f,I)},_setPath:function(f,p){f._path.setAttribute("d",p)},_bringToFront:function(f){su(f._path)},_bringToBack:function(f){lu(f._path)}});Ze.vml&&yg.include(Die);function FD(f){return Ze.svg||Ze.vml?new yg(f):null}C.include({getRenderer:function(f){var p=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var p=this._paneRenderers[f];return p===void 0&&(p=this._createRenderer({pane:f}),this._paneRenderers[f]=p),p},_createRenderer:function(f){return this.options.preferCanvas&&AD(f)||FD(f)}});var MD=fu.extend({initialize:function(f,p){fu.prototype.initialize.call(this,this._boundsToLatLngs(f),p)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=Ee(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function zie(f,p){return new MD(f,p)}yg.create=H1,yg.pointsToPath=Vt,Ar.geometryToLayer=du,Ar.coordsToLatLng=mE,Ar.coordsToLatLngs=I1,Ar.latLngToCoords=gE,Ar.latLngsToCoords=L1,Ar.getFeature=ph,Ar.asFeature=D1,C.mergeOptions({boxZoom:!0});var ND=ce.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),uu(),rg(),this._startPoint=this._map.mouseEventToContainerPoint(f),gt(document,{contextmenu:Ks,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var p=new ne(this._point,this._startPoint),x=p.getSize();Fn(this._box,p.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(dn(this._box),En(this._container,"leaflet-crosshair")),cu(),lh(),Jt(document,{contextmenu:Ks,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var p=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});C.addInitHook("addHandler","boxZoom",ND),C.mergeOptions({doubleClickZoom:!0});var PD=ce.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var p=this._map,x=p.getZoom(),E=p.options.zoomDelta,A=f.originalEvent.shiftKey?x-E:x+E;p.options.doubleClickZoom==="center"?p.setZoom(A):p.setZoomAround(f.containerPoint,A)}});C.addInitHook("addHandler","doubleClickZoom",PD),C.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $D=ce.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Me(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){En(this._map._container,"leaflet-grab"),En(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=Ee(this._map.options.maxBounds);this._offsetLimit=he(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var p=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(p),this._prunePositions(p)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,p){return f-(f-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;f.x<p.min.x&&(f.x=this._viscousLimit(f.x,p.min.x)),f.y<p.min.y&&(f.y=this._viscousLimit(f.y,p.min.y)),f.x>p.max.x&&(f.x=this._viscousLimit(f.x,p.max.x)),f.y>p.max.y&&(f.y=this._viscousLimit(f.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,p=Math.round(f/2),x=this._initialWorldOffset,E=this._draggable._newPos.x,A=(E-p+x)%f+p-x,I=(E+p+x)%f-p-x,Y=Math.abs(A+x)<Math.abs(I+x)?A:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(f){var p=this._map,x=p.options,E=!x.inertia||f.noInertia||this._times.length<2;if(p.fire("dragend",f),E)p.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,Y=x.easeLinearity,ee=A.multiplyBy(Y/I),te=ee.distanceTo([0,0]),pe=Math.min(x.inertiaMaxSpeed,te),ze=ee.multiplyBy(pe/te),ct=pe/(x.inertiaDeceleration*Y),kt=ze.multiplyBy(-ct/2).round();!kt.x&&!kt.y?p.fire("moveend"):(kt=p._limitOffset(kt,p.options.maxBounds),D(function(){p.panBy(kt,{duration:ct,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});C.addInitHook("addHandler","dragging",$D),C.mergeOptions({keyboard:!0,keyboardPanDelta:80});var OD=ce.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),gt(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,p=document.documentElement,x=f.scrollTop||p.scrollTop,E=f.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(E,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var p=this._panKeys={},x=this.keyCodes,E,A;for(E=0,A=x.left.length;E<A;E++)p[x.left[E]]=[-1*f,0];for(E=0,A=x.right.length;E<A;E++)p[x.right[E]]=[f,0];for(E=0,A=x.down.length;E<A;E++)p[x.down[E]]=[0,f];for(E=0,A=x.up.length;E<A;E++)p[x.up[E]]=[0,-1*f]},_setZoomDelta:function(f){var p=this._zoomKeys={},x=this.keyCodes,E,A;for(E=0,A=x.zoomIn.length;E<A;E++)p[x.zoomIn[E]]=f;for(E=0,A=x.zoomOut.length;E<A;E++)p[x.zoomOut[E]]=-f},_addHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var p=f.keyCode,x=this._map,E;if(p in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(E=this._panKeys[p],f.shiftKey&&(E=K(E).multiplyBy(3)),x.options.maxBounds&&(E=x._limitOffset(K(E),x.options.maxBounds)),x.options.worldCopyJump){var A=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(E)));x.panTo(A)}else x.panBy(E)}else if(p in this._zoomKeys)x.setZoom(x.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;Ks(f)}}});C.addInitHook("addHandler","keyboard",OD),C.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ID=ce.extend({addHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var p=$1(f),x=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var E=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),E),Ks(f)},_performZoom:function(){var f=this._map,p=f.getZoom(),x=this._map.options.zoomSnap||0;f._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,I=x?Math.ceil(A/x)*x:A,Y=f._limitZoom(p+(this._delta>0?I:-I))-p;this._delta=0,this._startTime=null,Y&&(f.options.scrollWheelZoom==="center"?f.setZoom(p+Y):f.setZoomAround(this._lastMousePos,p+Y))}});C.addInitHook("addHandler","scrollWheelZoom",ID);var jie=600;C.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var LD=ce.extend({addHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var p=f.touches[0];this._startPos=this._newPos=new H(p.clientX,p.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(gt(document,"touchend",Vn),gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),jie),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Jt(document,"touchend",Vn),Jt(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)},_onMove:function(f){var p=f.touches[0];this._newPos=new H(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,p){var x=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});x._simulated=!0,p.target.dispatchEvent(x)}});C.addInitHook("addHandler","tapHold",LD),C.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var DD=ce.extend({addHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){En(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var p=this._map;if(!(!f.touches||f.touches.length!==2||p._animatingZoom||this._zooming)){var x=p.mouseEventToContainerPoint(f.touches[0]),E=p.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(x.add(E)._divideBy(2))),this._startDist=x.distanceTo(E),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),Vn(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var p=this._map,x=p.mouseEventToContainerPoint(f.touches[0]),E=p.mouseEventToContainerPoint(f.touches[1]),A=x.distanceTo(E)/this._startDist;if(this._zoom=p.getScaleZoom(A,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&A<1||this._zoom>p.getMaxZoom()&&A>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var I=x._add(E)._divideBy(2)._subtract(this._centerPoint);if(A===1&&I.x===0&&I.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var Y=a(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(Y,this,!0),Vn(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});C.addInitHook("addHandler","touchZoom",DD),C.BoxZoom=ND,C.DoubleClickZoom=PD,C.Drag=$D,C.Keyboard=OD,C.ScrollWheelZoom=ID,C.TapHold=LD,C.TouchZoom=DD,n.Bounds=ne,n.Browser=Ze,n.CRS=It,n.Canvas=TD,n.Circle=hg,n.CircleMarker=wi,n.Class=U,n.Control=$,n.DivIcon=ED,n.DivOverlay=Qa,n.DomEvent=cE,n.DomUtil=lE,n.Draggable=Me,n.Evented=J,n.FeatureGroup=Tr,n.GeoJSON=Ar,n.GridLayer=mg,n.Handler=ce,n.Icon=Js,n.ImageOverlay=z1,n.LatLng=we,n.LatLngBounds=$e,n.Layer=Rr,n.LayerGroup=Xa,n.LineUtil=nt,n.Map=C,n.Marker=nf,n.Mixin=Ce,n.Path=Ja,n.Point=H,n.PolyUtil=Fe,n.Polygon=fu,n.Polyline=Zt,n.Popup=j1,n.PosAnimation=fh,n.Projection=bi,n.Rectangle=MD,n.Renderer=Qs,n.SVG=yg,n.SVGOverlay=CD,n.TileLayer=mh,n.Tooltip=B1,n.Transformation=He,n.Util=j,n.VideoOverlay=SD,n.bind=a,n.bounds=he,n.canvas=AD,n.circle=hh,n.circleMarker=dg,n.control=z,n.divIcon=Oie,n.extend=r,n.featureGroup=dE,n.geoJSON=wD,n.geoJson=Aie,n.gridLayer=Iie,n.icon=dh,n.imageOverlay=Fie,n.latLng=Ae,n.latLngBounds=Ee,n.layerGroup=fE,n.map=N,n.marker=hE,n.point=K,n.polygon=pE,n.polyline=O1,n.popup=Pie,n.rectangle=zie,n.setOptions=y,n.stamp=l,n.svg=FD,n.svgOverlay=Nie,n.tileLayer=kD,n.tooltip=$ie,n.transformation=de,n.version=i,n.videoOverlay=Mie;var Bie=window.L;n.noConflict=function(){return window.L=Bie,this},window.L=n})})(iM,iM.exports);var ae=iM.exports;function Yne(e){return e.split(" ").filter(Boolean)}function aD(e,t){Yne(t).forEach(n=>{ae.DomUtil.addClass(e,n)})}function Zne(e,t){Yne(t).forEach(n=>{ae.DomUtil.removeClass(e,n)})}function jje(e,t,n){e!=null&&n!==t&&(t!=null&&t.length>0&&Zne(e,t),n!=null&&n.length>0&&aD(e,n))}function GC(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Vm(e,t){return t==null?function(i,r){const o=M.useRef();return o.current||(o.current=e(i,r)),o}:function(i,r){const o=M.useRef();o.current||(o.current=e(i,r));const a=M.useRef(i),{instance:s}=o.current;return M.useEffect(function(){a.current!==i&&(t(s,i,a.current),a.current=i)},[s,i,r]),o}}function sD(e,t){M.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var o;(o=t.layerContainer)==null||o.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function lD(e){return function(n){const i=Kd(),r=e(u1(n,i),i);return nD(i.map,n.attribution),WC(r.current,n.eventHandlers),sD(r.current,i),r}}function Xne(e,t){const n=M.useRef();M.useEffect(function(){if(t.pathOptions!==n.current){const r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}},[e,t])}function Kne(e){return function(n){const i=Kd(),r=e(u1(n,i),i);return WC(r.current,n.eventHandlers),sD(r.current,i),Xne(r.current,n),r}}function Bje(e){function t(r,o){return GC(e(r),o)}const n=Vm(t),i=qne(n);return oD(i)}function Hje(e,t){const n=Vm(e,t),i=lD(n);return rD(i)}function Uje(e,t){const n=Vm(e),i=Vne(n,t);return Gne(i)}function Jne(e,t){const n=Vm(e,t),i=Kne(n);return rD(i)}function Qne(e,t){const n=Vm(e,t),i=lD(n);return oD(i)}function eie(e,t,n){const{opacity:i,zIndex:r}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),r!=null&&r!==n.zIndex&&e.setZIndex(r)}function Wje(e,t,n){t.bounds instanceof ae.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}const Gje=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:Hne,LeafletContext:iD,LeafletProvider:UC,addClassName:aD,createContainerComponent:rD,createControlComponent:Bje,createControlHook:qne,createDivOverlayComponent:Gne,createDivOverlayHook:Vne,createElementHook:Vm,createElementObject:GC,createLayerComponent:Hje,createLayerHook:lD,createLeafComponent:oD,createLeafletContext:Une,createOverlayComponent:Uje,createPathComponent:Jne,createPathHook:Kne,createTileLayerComponent:Qne,extendContext:Wne,removeClassName:Zne,updateCircle:zje,updateClassName:jje,updateGridLayer:eie,updateMediaOverlay:Wje,useAttribution:nD,useEventHandlers:WC,useLayerLifecycle:sD,useLeafletContext:Kd,usePathOptions:Xne,withPane:u1},Symbol.toStringTag,{value:"Module"}));function qje(){return Kd().map}const n0=Jne(function({data:t,...n},i){const r=new ae.GeoJSON(t,n);return GC(r,Wne(i,{overlayContainer:r}))},function(t,n,i){n.style!==i.style&&(n.style==null?t.resetStyle():t.setStyle(n.style))});function rM(){return rM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rM.apply(this,arguments)}function Vje({bounds:e,boundsOptions:t,center:n,children:i,className:r,id:o,placeholder:a,style:s,whenReady:l,zoom:u,...c},d){const[h]=M.useState({className:r,id:o,style:s}),[m,g]=M.useState(null);M.useImperativeHandle(d,()=>(m==null?void 0:m.map)??null,[m]);const y=M.useCallback(_=>{if(_!==null&&m===null){const b=new ae.Map(_,c);n!=null&&u!=null?b.setView(n,u):e!=null&&b.fitBounds(e,t),l!=null&&b.whenReady(l),g(Une(b))}},[]);M.useEffect(()=>()=>{m==null||m.map.remove()},[m]);const v=m?Pt.createElement(UC,{value:m},i):a??null;return Pt.createElement("div",rM({},h,{ref:y}),v)}const Yje=M.forwardRef(Vje),Zje=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function m8(e,t){const{[t]:n,...i}=e;return i}function Xje(e,t,n){if(Zje.indexOf(e)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${e}`);if(n.map.getPane(e)!=null)throw new Error(`A pane with this name already exists: ${e}`);const i=t.pane??n.pane,r=i?n.map.getPane(i):void 0,o=n.map.createPane(e,r);return t.className!=null&&aD(o,t.className),t.style!=null&&Object.keys(t.style).forEach(a=>{o.style[a]=t.style[a]}),o}function Kje(e,t){const[n]=M.useState(e.name),[i,r]=M.useState(null);M.useImperativeHandle(t,()=>i,[i]);const o=Kd(),a=M.useMemo(()=>({...o,pane:n}),[o]);return M.useEffect(()=>(r(Xje(n,e,o)),function(){var u;const l=o.map.getPane(n);(u=l==null?void 0:l.remove)==null||u.call(l),o.map._panes!=null&&(o.map._panes=m8(o.map._panes,n),o.map._paneRenderers=m8(o.map._paneRenderers,n))}),[]),e.children!=null&&i!=null?S2.createPortal(Pt.createElement(UC,{value:a},e.children),i):null}const Jx=M.forwardRef(Kje),g8=Qne(function({url:t,...n},i){const r=new ae.TileLayer(t,u1(n,i));return GC(r,i)},function(t,n,i){eie(t,n,i);const{url:r}=n;r!=null&&r!==i.url&&t.setUrl(r)});var ao={},Jd={};const Jje="esri-leaflet",Qje="Leaflet plugins for consuming ArcGIS Online and ArcGIS Server services.",e6e="3.0.12",t6e="Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)",n6e={url:"https://github.com/esri/esri-leaflet/issues"},i6e=["Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","John Gravois (https://johngravois.com)","Gavin Rehkemper <grehkemper@esri.com> (https://gavinr.com)","Jacob Wasilkowski (https://jwasilgeo.github.io)"],r6e={"@terraformer/arcgis":"^2.1.0","tiny-binary-search":"^1.0.3"},o6e={"@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-terser":"^0.3.0",chai:"4.3.7","chokidar-cli":"^3.0.0","gh-release":"^7.0.1","highlight.js":"^11.7.0","http-server":"^14.1.1",husky:"^1.1.1",karma:"^6.4.1","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-edgium-launcher":"github:matracey/karma-edgium-launcher","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-safari-launcher":"~1.0.0","karma-sinon-chai":"^2.0.2","karma-sourcemap-loader":"^0.3.8",leaflet:"^1.6.0",mkdirp:"^1.0.4",mocha:"^10.2.0","npm-run-all":"^4.1.5",rollup:"^2.79.1",semistandard:"^14.2.3",sinon:"^15.0.1","sinon-chai":"3.7.0",snazzy:"^9.0.0"},a6e=["src/**/*.js","dist/esri-leaflet.js","dist/esri-leaflet.js.map","dist/esri-leaflet-debug.js.map","dist/siteData.json","profiles/*.js"],s6e="https://developers.arcgis.com/esri-leaflet/",l6e="src/EsriLeaflet.js",u6e={registry:"npm",format:"es6",main:"src/EsriLeaflet.js"},c6e=["arcgis","esri","esri leaflet","gis","leaflet plugin","mapping"],f6e="Apache-2.0",d6e="dist/esri-leaflet-debug.js",h6e={leaflet:"^1.0.0"},p6e="README.md",m6e={type:"git",url:"git@github.com:Esri/esri-leaflet.git"},g6e={build:"rollup -c profiles/debug.js & rollup -c profiles/production.js",lint:"semistandard | snazzy",prebuild:"mkdirp dist",pretest:"npm run build",fix:"semistandard --fix",release:"./scripts/release.sh","start-watch":'chokidar src -c "npm run build"',start:"run-p start-watch serve",serve:"http-server -p 5000 -c-1 -o",test:"npm run lint && karma start"},y6e={globals:["expect","L","XMLHttpRequest","sinon","xhr","proj4"]},v6e="dist/esri-leaflet-debug.js",x6e={hooks:{"pre-commit":"npm run lint"}},_6e={name:Jje,description:Qje,version:e6e,author:t6e,bugs:n6e,contributors:i6e,dependencies:r6e,devDependencies:o6e,files:a6e,homepage:s6e,module:l6e,"jsnext:main":"src/EsriLeaflet.js",jspm:u6e,keywords:c6e,license:f6e,main:d6e,peerDependencies:h6e,readmeFilename:p6e,repository:m6e,scripts:g6e,semistandard:y6e,unpkg:v6e,husky:x6e};var qC=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,vu=document.documentElement.style.pointerEvents==="",Fu={cors:qC,pointerEvents:vu},tie={attributionWidthOffset:55},y8=0;function VC(e){var t="";e.f=e.f||"json";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n],r=Object.prototype.toString.call(i),o;t.length&&(t+="&"),r==="[object Array]"?o=Object.prototype.toString.call(i[0])==="[object Object]"?JSON.stringify(i):i.join(","):r==="[object Object]"?o=JSON.stringify(i):r==="[object Date]"?o=i.valueOf():o=i,t+=encodeURIComponent(n)+"="+encodeURIComponent(o)}return t.replaceAll("'","%27")}function uD(e,t){var n=new window.XMLHttpRequest;return n.onerror=function(i){n.onreadystatechange=ae.Util.falseFn,e.call(t,{error:{code:500,message:"XMLHttpRequest error"}},null)},n.onreadystatechange=function(){var i,r;if(n.readyState===4){try{i=JSON.parse(n.responseText)}catch{i=null,r={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!r&&i.error&&(r=i.error,i=null),n.onerror=ae.Util.falseFn,e.call(t,r,i)}},n.ontimeout=function(){this.onerror()},n}function nie(e,t,n,i){var r=uD(n,i);return r.open("POST",e),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(r.timeout=i.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(VC(t)),r}function iie(e,t,n,i){var r=uD(n,i);return r.open("GET",e+"?"+VC(t),!0),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(r.timeout=i.options.timeout,i.options.withCredentials&&(r.withCredentials=!0)),r.send(null),r}function cD(e,t,n,i){var r=VC(t),o=uD(n,i),a=(e+"?"+r).length;if(a<=2e3&&Fu.cors?o.open("GET",e+"?"+r):a>2e3&&Fu.cors&&(o.open("POST",e),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(o.timeout=i.options.timeout,i.options.withCredentials&&(o.withCredentials=!0)),a<=2e3&&Fu.cors)o.send(null);else if(a>2e3&&Fu.cors)o.send(r);else{if(a<=2e3&&!Fu.cors)return fD(e,t,n,i);kc("a request to "+e+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return o}function fD(e,t,n,i){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var r="c"+y8;t.callback="window._EsriLeafletCallbacks."+r,window._EsriLeafletCallbacks[r]=function(a){if(window._EsriLeafletCallbacks[r]!==!0){var s,l=Object.prototype.toString.call(a);l==="[object Object]"||l==="[object Array]"||(s={error:{code:500,message:"Expected array or object as JSONP response"}},a=null),!s&&a.error&&(s=a,a=null),n.call(i,s,a),window._EsriLeafletCallbacks[r]=!0}};var o=ae.DomUtil.create("script",null,document.body);return o.type="text/javascript",o.src=e+"?"+VC(t),o.id=r,o.onerror=function(a){if(a&&window._EsriLeafletCallbacks[r]!==!0){var s={error:{code:500,message:"An unknown error occurred"}};n.call(i,s),window._EsriLeafletCallbacks[r]=!0}},ae.DomUtil.addClass(o,"esri-leaflet-jsonp"),y8++,{id:r,url:o.src,abort:function(){window._EsriLeafletCallbacks._callback[r]({code:0,message:"Request aborted."})}}}var YC=Fu.cors?iie:fD;YC.CORS=iie;YC.JSONP=fD;function kc(){console&&console.warn&&console.warn.apply(console,arguments)}var i2={request:cD,get:YC,post:nie};/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var b6e=function(t,n,i,r){var o=(r[0]-i[0])*(t[1]-i[1])-(r[1]-i[1])*(t[0]-i[0]),a=(n[0]-t[0])*(t[1]-i[1])-(n[1]-t[1])*(t[0]-i[0]),s=(r[1]-i[1])*(n[0]-t[0])-(r[0]-i[0])*(n[1]-t[1]);if(s!==0){var l=o/s,u=a/s;if(l>=0&&l<=1&&u>=0&&u<=1)return!0}return!1},w6e=function(t,n){for(var i=!1,r=-1,o=t.length,a=o-1;++r<o;a=r)(t[r][1]<=n[1]&&n[1]<t[a][1]||t[a][1]<=n[1]&&n[1]<t[r][1])&&n[0]<(t[a][0]-t[r][0])*(n[1]-t[r][1])/(t[a][1]-t[r][1])+t[r][0]&&(i=!i);return i},S6e=function(t,n){for(var i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},rie=function(t,n){for(var i=0;i<t.length-1;i++)for(var r=0;r<n.length-1;r++)if(b6e(t[i],t[i+1],n[r],n[r+1]))return!0;return!1},oM=function(t){return S6e(t[0],t[t.length-1])||t.push(t[0]),t},aM=function(t){var n=0,i=0,r=t.length,o=t[i],a;for(i;i<r-1;i++)a=t[i+1],n+=(a[0]-o[0])*(a[1]+o[1]),o=a;return n>=0},oie=function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},C6e=function(t,n){var i=rie(t,n),r=w6e(t,n[0]);return!!(!i&&r)},E6e=function(t){for(var n=[],i=[],r,o,a,s=0;s<t.length;s++){var l=oM(t[s].slice(0));if(!(l.length<4))if(aM(l)){var u=[l.slice().reverse()];n.push(u)}else i.push(l.slice().reverse())}for(var c=[];i.length;){a=i.pop();var d=!1;for(r=n.length-1;r>=0;r--)if(o=n[r][0],C6e(o,a)){n[r].push(a),d=!0;break}d||c.push(a)}for(;c.length;){a=c.pop();var h=!1;for(r=n.length-1;r>=0;r--)if(o=n[r][0],rie(o,a)){n[r].push(a),h=!0;break}h||n.push([a.reverse()])}return n.length===1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}},k6e=function(t,n){for(var i=n?[n,"OBJECTID","FID"]:["OBJECTID","FID"],r=0;r<i.length;r++){var o=i[r];if(o in t&&(typeof t[o]=="string"||typeof t[o]=="number"))return t[o]}throw Error("No valid id attribute found")},R6e=function e(t,n){var i={};if(t.features){i.type="FeatureCollection",i.features=[];for(var r=0;r<t.features.length;r++)i.features.push(e(t.features[r],n))}if(typeof t.x=="number"&&typeof t.y=="number"&&(i.type="Point",i.coordinates=[t.x,t.y],typeof t.z=="number"&&i.coordinates.push(t.z)),t.points&&(i.type="MultiPoint",i.coordinates=t.points.slice(0)),t.paths&&(t.paths.length===1?(i.type="LineString",i.coordinates=t.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=t.paths.slice(0))),t.rings&&(i=E6e(t.rings.slice(0))),typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"&&(i.type="Polygon",i.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(i.type="Feature",i.geometry=t.geometry?e(t.geometry):null,i.properties=t.attributes?oie(t.attributes):null,t.attributes))try{i.id=k6e(t.attributes,n)}catch{}return JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),t.spatialReference&&t.spatialReference.wkid&&t.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),i},aie=function(t){var n=[],i=t.slice(0),r=oM(i.shift().slice(0));if(r.length>=4){aM(r)||r.reverse(),n.push(r);for(var o=0;o<i.length;o++){var a=oM(i[o].slice(0));a.length>=4&&(aM(a)&&a.reverse(),n.push(a))}}return n},T6e=function(t){for(var n=[],i=0;i<t.length;i++)for(var r=aie(t[i]),o=r.length-1;o>=0;o--){var a=r[o].slice(0);n.push(a)}return n},A6e=function e(t,n){n=n||"OBJECTID";var i={wkid:4326},r={},o;switch(t.type){case"Point":r.x=t.coordinates[0],r.y=t.coordinates[1],t.coordinates[2]!=null&&(r.z=t.coordinates[2]),r.spatialReference=i;break;case"MultiPoint":r.points=t.coordinates.slice(0),t.coordinates[0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"LineString":r.paths=[t.coordinates.slice(0)],t.coordinates[0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"MultiLineString":r.paths=t.coordinates.slice(0),t.coordinates[0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"Polygon":r.rings=aie(t.coordinates.slice(0)),t.coordinates[0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"MultiPolygon":r.rings=T6e(t.coordinates.slice(0)),t.coordinates[0][0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"Feature":t.geometry&&(r.geometry=e(t.geometry,n)),r.attributes=t.properties?oie(t.properties):{},t.id&&(r.attributes[n]=t.id);break;case"FeatureCollection":for(r=[],o=0;o<t.features.length;o++)r.push(e(t.features[o],n));break;case"GeometryCollection":for(r=[],o=0;o<t.geometries.length;o++)r.push(e(t.geometries[o],n));break}return r},F6e='Powered by <a href="https://www.esri.com">Esri</a>';function cv(e,t){return A6e(e,t)}function sie(e,t){return R6e(e,t)}function sM(e){if(e.xmin!=="NaN"&&e.ymin!=="NaN"&&e.xmax!=="NaN"&&e.ymax!=="NaN"){var t=ae.latLng(e.ymin,e.xmin),n=ae.latLng(e.ymax,e.xmax);return ae.latLngBounds(t,n)}else return null}function dD(e){return e=ae.latLngBounds(e),{xmin:e.getSouthWest().lng,ymin:e.getSouthWest().lat,xmax:e.getNorthEast().lng,ymax:e.getNorthEast().lat,spatialReference:{wkid:4326}}}var lie=/^(OBJECTID|FID|OID|ID)$/i;function uie(e){var t;if(e.objectIdFieldName)t=e.objectIdFieldName;else if(e.fields){for(var n=0;n<=e.fields.length-1;n++)if(e.fields[n].type==="esriFieldTypeOID"){t=e.fields[n].name;break}if(!t){for(n=0;n<=e.fields.length-1;n++)if(e.fields[n].name.match(lie)){t=e.fields[n].name;break}}}return t}function cie(e){for(var t in e.attributes)if(t.match(lie))return t}function c1(e,t){var n,i=e.features||e.results,r=i&&i.length;t?n=t:n=uie(e);var o={type:"FeatureCollection",features:[]};if(r)for(var a=i.length-1;a>=0;a--){var s=sie(i[a],n||cie(i[a]));o.features.push(s)}return o}function ZC(e){return e=ae.Util.trim(e),e[e.length-1]!=="/"&&(e+="/"),e}function Qd(e){if(e.url.indexOf("?")!==-1){e.requestParams=e.requestParams||{};var t=e.url.substring(e.url.indexOf("?")+1);e.url=e.url.split("?")[0],e.requestParams=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return e.url=ZC(e.url.split("?")[0]),e}function fie(e){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(e)}function lM(e){var t;switch(e){case"Point":t="esriGeometryPoint";break;case"MultiPoint":t="esriGeometryMultipoint";break;case"LineString":t="esriGeometryPolyline";break;case"MultiLineString":t="esriGeometryPolyline";break;case"Polygon":t="esriGeometryPolygon";break;case"MultiPolygon":t="esriGeometryPolygon";break}return t}function r2(e){return e.getSize().x-tie.attributionWidthOffset+"px"}function f1(e){if(e.attributionControl){if(e.attributionControl._esriAttributionLayerCount||(e.attributionControl._esriAttributionLayerCount=0),e.attributionControl._esriAttributionLayerCount===0){if(!e.attributionControl._esriAttributionAddedOnce){var t=document.createElement("style");t.type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t);var n=document.createElement("style");n.type="text/css",n.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+r2(e)+";}",document.getElementsByTagName("head")[0].appendChild(n),e.on("resize",function(i){e.attributionControl&&(e.attributionControl._container.style.maxWidth=r2(i.target))}),e.attributionControl._esriAttributionAddedOnce=!0}ae.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),ae.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution")}e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount+1}}function d1(e){e.attributionControl&&(e.attributionControl._esriAttributionLayerCount&&e.attributionControl._esriAttributionLayerCount===1&&(ae.DomUtil.removeClass(e.attributionControl._container,"esri-truncated-attribution:hover"),ae.DomUtil.removeClass(e.attributionControl._container,"esri-truncated-attribution")),e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount-1)}function hD(e){var t={geometry:null,geometryType:null};if(e instanceof ae.LatLngBounds)return t.geometry=dD(e),t.geometryType="esriGeometryEnvelope",t;if(e.getLatLng&&(e=e.getLatLng()),e instanceof ae.LatLng&&(e={type:"Point",coordinates:[e.lng,e.lat]}),e instanceof ae.GeoJSON&&(e=e.getLayers()[0].feature.geometry,t.geometry=cv(e),t.geometryType=lM(e.type)),e.toGeoJSON&&(e=e.toGeoJSON()),e.type==="Feature"&&(e=e.geometry),e.type==="Point"||e.type==="LineString"||e.type==="Polygon"||e.type==="MultiPolygon")return t.geometry=cv(e),t.geometryType=lM(e.type),t;kc("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function die(e,t){Fu.cors&&cD(e,{},ae.Util.bind(function(n,i){if(!n){t._esriAttributions=[];for(var r=0;r<i.contributors.length;r++)for(var o=i.contributors[r],a=0;a<o.coverageAreas.length;a++){var s=o.coverageAreas[a],l=ae.latLng(s.bbox[0],s.bbox[1]),u=ae.latLng(s.bbox[2],s.bbox[3]);t._esriAttributions.push({attribution:o.attribution,score:s.score,bounds:ae.latLngBounds(l,u),minZoom:s.zoomMin,maxZoom:s.zoomMax})}t._esriAttributions.sort(function(d,h){return h.score-d.score});var c={target:t};o2(c)}},this))}function o2(e){var t=e.target,n=t._esriAttributions;if(!(!t||!t.attributionControl)){var i=t.attributionControl._container.querySelector(".esri-dynamic-attribution");if(i&&n){for(var r="",o=t.getBounds(),a=ae.latLngBounds(o.getSouthWest().wrap(),o.getNorthEast().wrap()),s=t.getZoom(),l=0;l<n.length;l++){var u=n[l],c=u.attribution;!r.match(c)&&u.bounds.intersects(a)&&s>=u.minZoom&&s<=u.maxZoom&&(r+=", "+c)}r=F6e+" | "+r.substr(2),i.innerHTML=r,i.style.maxWidth=r2(t),t.fire("attributionupdated",{attribution:r})}}}var M6e={warn:kc,cleanUrl:ZC,getUrlParams:Qd,isArcgisOnline:fie,geojsonTypeToArcGIS:lM,responseToFeatureCollection:c1,geojsonToArcGIS:cv,arcgisToGeoJSON:sie,boundsToExtent:dD,extentToBounds:sM,calcAttributionWidth:r2,setEsriAttribution:f1,removeEsriAttribution:d1,_setGeometry:hD,_getAttributionData:die,_updateMapAttribution:o2,_findIdAttributeFromFeature:cie,_findIdAttributeFromResponse:uie},h1=ae.Class.extend({options:{proxy:!1,useCors:qC},generateSetter:function(e,t){return ae.Util.bind(function(n){return this.params[e]=n,this},t)},initialize:function(e){if(e.request&&e.options?(this._service=e,ae.Util.setOptions(this,e.options)):(ae.Util.setOptions(this,e),this.options.url=ZC(e.url)),this.params=ae.Util.extend({},this.params||{}),this.setters)for(var t in this.setters){var n=this.setters[t];this[t]=this.generateSetter(n,this)}},token:function(e){return this._service?this._service.authenticate(e):this.params.token=e,this},apikey:function(e){return this.token(e)},format:function(e){return this.params.returnUnformattedValues=!e,this},request:function(e,t){return this.options.requestParams&&ae.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,e,t):this._request("request",this.path,this.params,e,t)},_request:function(e,t,n,i,r){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(e==="get"||e==="request")&&!this.options.useCors?i2.get.JSONP(o,n,i,r):i2[e](o,n,i,r)}});function N6e(e){return e=Qd(e),new h1(e)}var hie=h1.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(e,t){return e=ae.latLng(e),this.params.geometry=[e.lng,e.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=t,this.params.inSR=4326,this},where:function(e){return this.params.where=e,this},between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},orderBy:function(e,t){return t=t||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[e,t].join(" "),this},run:function(e,t){return this._cleanParams(),this.options.isModern||fie(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i,i)},this)):this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i&&c1(i),i)},this)},count:function(e,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(n,i){e.call(this,n,i&&i.count,i)},t)},ids:function(e,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(n,i){e.call(this,n,i&&i.objectIds,i)},t)},bounds:function(e,t){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(n,i){i&&i.extent&&sM(i.extent)?e.call(t,n,sM(i.extent),i):(n={message:"Invalid Bounds"},e.call(t,n,null,i))},t)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(e){var t=ae.point(e);return this.params.pixelSize=[t.x,t.y],this},layer:function(e){return this.path=e+"/query",this},_trapSQLerrors:function(e){e&&e.code==="400"&&kc("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(e){this.params.inSR=4326;var t=hD(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function XC(e){return new hie(e)}var pie=h1.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&c1(i),i)},t)}});function mie(e){return new pie(e)}var KC=h1.extend({path:"identify",between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this}});function P6e(e){return new KC(e)}var gie=KC.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(e){var t=dD(e.getBounds()),n=e.getSize();return this.params.imageDisplay=[n.x,n.y,96],this.params.mapExtent=[t.xmin,t.ymin,t.xmax,t.ymax],this},at:function(e){return e.length===2&&(e=ae.latLng(e)),this._setGeometryParams(e),this},layerDef:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){if(n)e.call(t,n,void 0,i);else{var r=c1(i);i.results=i.results.reverse();for(var o=0;o<r.features.length;o++){var a=r.features[o];a.layerId=i.results[o].layerId}e.call(t,void 0,r,i)}})},_setGeometryParams:function(e){var t=hD(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function yie(e){return new gie(e)}var vie=KC.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(e){return e=ae.latLng(e),this.params.geometry=JSON.stringify({x:e.lng,y:e.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(e){var t=e.location,n=e.catalogItems,i=e.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},crs:{type:"EPSG",properties:{code:t.spatialReference.wkid}},properties:{OBJECTID:e.objectId,name:e.name,value:e.value},id:e.objectId}};if(e.properties&&e.properties.Values&&(r.pixel.properties.values=e.properties.Values),n&&n.features&&(r.catalogItems=c1(n),i&&i.length===r.catalogItems.features.length))for(var o=i.length-1;o>=0;o--)r.catalogItems.features[o].properties.catalogItemVisibility=i[o];return r}});function xie(e){return new vie(e)}var p1=ae.Evented.extend({options:{proxy:!1,useCors:qC,timeout:0},initialize:function(e){e=e||{},this._requestQueue=[],this._authenticating=!1,ae.Util.setOptions(this,e),this.options.url=ZC(this.options.url)},get:function(e,t,n,i){return this._request("get",e,t,n,i)},post:function(e,t,n,i){return this._request("post",e,t,n,i)},request:function(e,t,n,i){return this._request("request",e,t,n,i)},metadata:function(e,t){return this._request("get","",{},e,t)},authenticate:function(e){return this._authenticating=!1,this.options.token=e,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(e){this.options.timeout=e},_request:function(e,t,n,i,r){this.fire("requeststart",{url:this.options.url+t,params:n,method:e},!0);var o=this._createServiceCallback(e,t,n,i,r);if(this.options.token&&(n.token=this.options.token),this.options.requestParams&&ae.Util.extend(n,this.options.requestParams),this._authenticating)this._requestQueue.push([e,t,n,i,r]);else{var a=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(e==="get"||e==="request")&&!this.options.useCors?i2.get.JSONP(a,n,o,r):i2[e](a,n,o,r)}},_createServiceCallback:function(e,t,n,i,r){return ae.Util.bind(function(o,a){o&&(o.code===499||o.code===498)&&(this._authenticating=!0,this._requestQueue.push([e,t,n,i,r]),this.fire("authenticationrequired",{authenticate:ae.Util.bind(this.authenticate,this)},!0),o.authenticate=ae.Util.bind(this.authenticate,this)),i.call(r,o,a),o?this.fire("requesterror",{url:this.options.url+t,params:n,message:o.message,code:o.code,method:e},!0):this.fire("requestsuccess",{url:this.options.url+t,params:n,response:a,method:e},!0),this.fire("requestend",{url:this.options.url+t,params:n,method:e},!0)},this)},_runQueue:function(){for(var e=this._requestQueue.length-1;e>=0;e--){var t=this._requestQueue[e],n=t.shift();this[n].apply(this,t)}this._requestQueue=[]}});function $6e(e){return e=Qd(e),new p1(e)}var _ie=p1.extend({identify:function(){return yie(this)},find:function(){return mie(this)},query:function(){return XC(this)}});function pD(e){return new _ie(e)}var bie=p1.extend({query:function(){return XC(this)},identify:function(){return xie(this)}});function wie(e){return new bie(e)}var Sie=p1.extend({options:{idAttribute:"OBJECTID"},query:function(){return XC(this)},addFeature:function(e,t,n){this.addFeatures(e,t,n)},addFeatures:function(e,t,n){for(var i=e.features?e.features:[e],r=i.length-1;r>=0;r--)delete i[r].id;return e=cv(e),e=i.length>1?e:[e],this.post("addFeatures",{features:e},function(o,a){var s=a&&a.addResults?a.addResults.length>1?a.addResults:a.addResults[0]:void 0;t&&t.call(n,o||a.addResults[0].error,s)},n)},updateFeature:function(e,t,n){this.updateFeatures(e,t,n)},updateFeatures:function(e,t,n){var i=e.features?e.features:[e];return e=cv(e,this.options.idAttribute),e=i.length>1?e:[e],this.post("updateFeatures",{features:e},function(r,o){var a=o&&o.updateResults?o.updateResults.length>1?o.updateResults:o.updateResults[0]:void 0;t&&t.call(n,r||o.updateResults[0].error,a)},n)},deleteFeature:function(e,t,n){this.deleteFeatures(e,t,n)},deleteFeatures:function(e,t,n){return this.post("deleteFeatures",{objectIds:e},function(i,r){var o=r&&r.deleteResults?r.deleteResults.length>1?r.deleteResults:r.deleteResults[0]:void 0;t&&t.call(n,i||r.deleteResults[0].error,o)},n)}});function Cie(e){return new Sie(e)}var Wn=window.location.protocol!=="https:"?"http:":"https:",a2=ae.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Wn+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Wn+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Wn+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Wn+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(e,t){var n;if(typeof e=="object"&&e.urlTemplate&&e.options)n=e;else if(typeof e=="string"&&a2.TILES[e])n=a2.TILES[e];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var i=ae.Util.extend(n.options,t);ae.Util.setOptions(this,i),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&n.urlTemplate.indexOf("token=")===-1&&(n.urlTemplate+="?token="+this.options.token),this.options.proxy&&(n.urlTemplate=this.options.proxy+"?"+n.urlTemplate),ae.TileLayer.prototype.initialize.call(this,n.urlTemplate,i)},onAdd:function(e){f1(e),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&die((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,e),e.on("moveend",o2),ae.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){d1(e),e.off("moveend",o2),ae.TileLayer.prototype.onRemove.call(this,e)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var e=this._map.createPane(this.options.pane);e.style.pointerEvents="none",e.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var e='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return e}});function O6e(e,t){return new a2(e,t)}var mD=ae.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(e){e=ae.Util.setOptions(this,e),e=Qd(e),this.tileUrl=(e.proxy?e.proxy+"?":"")+e.url+"tile/{z}/{y}/{x}"+(e.requestParams&&Object.keys(e.requestParams).length>0?ae.Util.getParamString(e.requestParams):""),e.url.indexOf("{s}")!==-1&&e.subdomains&&(e.url=e.url.replace("{s}",e.subdomains[0])),this.service=pD(e),this.service.addEventParent(this);var t=new RegExp(/tiles.arcgis(online)?\.com/g);t.test(e.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),e.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),ae.TileLayer.prototype.initialize.call(this,this.tileUrl,e)},getTileUrl:function(e){var t=this._getZoomForUrl();return ae.Util.template(this.tileUrl,ae.Util.extend({s:this._getSubdomain(e),x:e.x,y:e.y,z:this._lodMap&&this._lodMap[t]!==void 0?this._lodMap[t]:t},this.options))},createTile:function(e,t){var n=document.createElement("img");return ae.DomEvent.on(n,"load",ae.Util.bind(this._tileOnLoad,this,t,n)),ae.DomEvent.on(n,"error",ae.Util.bind(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]!==void 0?n.src=this.getTileUrl(e):this.once("lodmap",function(){n.src=this.getTileUrl(e)},this),n},onAdd:function(e){f1(e),this._lodMap||this.metadata(function(t,n){if(!t&&n.spatialReference){var i=n.spatialReference.latestWkid||n.spatialReference.wkid;if(!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution())),e.options.crs===ae.CRS.EPSG3857&&(i===102100||i===3857)){this._lodMap={};for(var r=n.tileInfo.lods,o=mD.MercatorZoomLevels,a=0;a<r.length;a++){var s=r[a];for(var l in o){var u=o[l];if(this._withinPercentage(s.resolution,u,this.options.zoomOffsetAllowance)){this._lodMap[l]=s.level;break}}}this.fire("lodmap")}else e.options.crs&&e.options.crs.code&&e.options.crs.code.indexOf(i)>-1||kc("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),ae.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){d1(e),ae.TileLayer.prototype.onRemove.call(this,e)},metadata:function(e,t){return this.service.metadata(e,t),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(e){var t="?token="+e;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,t):this.tileUrl+t,this.options.token=e,this.service.authenticate(e),this},_withinPercentage:function(e,t,n){var i=Math.abs(e/t-1);return i<n}});function I6e(e,t){return new mD(e,t)}var L6e=ae.ImageOverlay.extend({onAdd:function(e){this._topLeft=e.getPixelBounds().min,ae.ImageOverlay.prototype.onAdd.call(this,e)},_reset:function(){this._map.options.crs===ae.CRS.EPSG3857?ae.ImageOverlay.prototype._reset.call(this):ae.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),gD=ae.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:qC,attribution:null,interactive:!1,alt:""},onAdd:function(e){f1(e),this.options.zIndex&&(this.options.position=null),this._update=ae.Util.throttle(this._update,this.options.updateInterval,this),e.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,n){!t&&!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(e){d1(e),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(e,t){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=ae.popup(t),this._popupFunction=e,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(e){return this.options.zIndex=e,this._currentImage&&this._currentImage.setZIndex(e),this},_setAutoZIndex:function(e){if(this._currentImage){for(var t=this._currentImage.getPane().children,n=-e(-1/0,1/0),i=0,r=t.length,o;i<r;i++)o=t[i].style.zIndex,t[i]!==this._currentImage._image&&o&&(n=e(n,+o));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t){return this.options.from=e,this.options.to=t,this._update(),this},metadata:function(e,t){return this.service.metadata(e,t),this},authenticate:function(e){return this.service.authenticate(e),this},redraw:function(){this._update()},_renderImage:function(e,t,n){if(this._map){if(n&&(e="data:"+n+";base64,"+e),!e)return;var i=new L6e(e,t,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(){this._map.removeLayer(i),this.fire("error"),i.off("load",o,this)},o=function(a){if(i.off("error",r,this),this._map){var s=a.target,l=this._currentImage;s._bounds.equals(t)&&s._bounds.equals(this._map.getBounds())?(this._currentImage=s,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),l&&this._map&&this._map.removeLayer(l),l&&l._map&&l._map.removeLayer(l)):this._map.removeLayer(s)}this.fire("load",{bounds:t})};i.once("error",r,this),i.once("load",o,this)}},_update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(e>this.options.maxZoom||e<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var n=this._buildExportParams();ae.Util.extend(n,this.options.requestParams),n?(this._requestExport(n,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(e,t,n,i){if(e=ae.latLng(e),this._shouldRenderPopup&&this._lastClick.equals(e)){var r=this._popupFunction(t,n,i);r&&this._popup.setLatLng(e).setContent(r).openOn(this._map)}},_resetPopupState:function(e){this._shouldRenderPopup=!1,this._lastClick=e.latlng},_calculateBbox:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),n=this._map.unproject(e.getTopRight()),i=this._map.options.crs.project(n),r=this._map.options.crs.project(t),o=ae.bounds(i,r);return[o.getBottomLeft().x,o.getBottomLeft().y,o.getTopRight().x,o.getTopRight().y].join(",")},_calculateImageSize:function(){var e=this._map.getPixelBounds(),t=this._map.getSize(),n=this._map.unproject(e.getBottomLeft()),i=this._map.unproject(e.getTopRight()),r=this._map.latLngToLayerPoint(i).y,o=this._map.latLngToLayerPoint(n).y;return(r>0||o<t.y)&&(t.y=o-r),t.x+","+t.y}}),Eie=gD.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(e){e=Qd(e),this.service=wie(e),this.service.addEventParent(this),ae.Util.setOptions(this,e)},setPixelType:function(e){return this.options.pixelType=e,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(e){return ae.Util.isArray(e)?this.options.bandIds=e.join(","):this.options.bandIds=e.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(e,t){return ae.Util.isArray(e)?this.options.noData=e.join(","):this.options.noData=e.toString(),t&&(this.options.noDataInterpretation=t),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(e){this.options.renderingRule=e,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(e){this.options.mosaicRule=e,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(e){var t=ae.Util.bind(function(i,r,o){i||setTimeout(ae.Util.bind(function(){this._renderPopup(e.latlng,i,r,o)},this),300)},this),n=this.identify().at(e.latlng);this.options.mosaicRule&&n.setMosaicRule(this.options.mosaicRule),n.run(t),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(e,t){if(this.options.f==="json")this.service.request("exportImage",e,function(i,r){i||(this.options.token&&(r.href+="?token="+this.options.token),this.options.proxy&&(r.href=this.options.proxy+"?"+r.href),this._renderImage(r.href,t))},this);else{e.f="image";var n=this.options.url+"exportImage"+ae.Util.getParamString(e);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,t)}}});function D6e(e,t){return new Eie(e,t)}var kie=gD.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(e){e=Qd(e),this.service=pD(e),this.service.addEventParent(this),ae.Util.setOptions(this,e)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(e){return this.options.dynamicLayers=e,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(e){return this.options.layers=e,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(e){return this.options.layerDefs=e,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(e){return this.options.timeOptions=e,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(e){var t=ae.Util.bind(function(r,o,a){r||setTimeout(ae.Util.bind(function(){this._renderPopup(e.latlng,r,o,a)},this),300)},this),n;if(this.options.popup?n=this.options.popup.on(this._map).at(e.latlng):n=this.identify().on(this._map).at(e.latlng),n.params.maxAllowableOffset||n.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?n.layers("visible:"+this.options.layers.join(",")):n.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!n.params.layerDefs)for(var i in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,i)&&n.layerDef(i,this.options.layerDefs[i]);n.run(t),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(e,t){if(this.options.f==="json")this.service.request("export",e,function(i,r){i||(this.options.token&&r.href&&(r.href+="?token="+this.options.token),this.options.proxy&&r.href&&(r.href=this.options.proxy+"?"+r.href),r.href?this._renderImage(r.href,t):this._renderImage(r.imageData,t,r.contentType))},this);else{e.f="image";var n=this.options.url+"export"+ae.Util.getParamString(e);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,t)}}});function z6e(e,t){return new kie(e,t)}var Qx=ae.Layer.extend({options:{cellSize:512,updateWhenIdle:ae.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(e){ae.Util.setOptions(this,e)},onAdd:function(e){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(e){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=ae.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),e},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var e=this.options.cellSize;return e instanceof ae.Point?e:new ae.Point(e,e)},_pruneCells:function(){if(this._map){var e,t;for(e in this._cells)t=this._cells[e],t.retain=t.current;for(e in this._cells)if(t=this._cells[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._cells)this._cells[e].retain||this._removeCell(e)}},_removeAllCells:function(){for(var e in this._cells)this._removeCell(e)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),o=Math.floor(t/2),a=n-1,s=new ae.Point(+r,+o);s.z=+a;var l=this._cellCoordsToKey(s),u=this._cells[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>i?this._retainParent(r,o,a,i):!1)},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var a=new ae.Point(r,o);a.z=n+1;var s=this._cellCoordsToKey(a),l=this._cells[s];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);n+1<i&&this._retainChildren(r,o,n+1,i)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(e,t,n,i){var r=Math.round(t);i||(this._cellZoom=r,this._abortLoading&&this._abortLoading(),this._resetGrid(),r!==void 0&&this._update(e),n||this._pruneCells(),this._noPrune=!!n)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._cellSize=this.getCellSize(),i=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(e){var t=e&&(e.pinch||e.flyTo);t||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._cellZoom),r=t.project(e,this._cellZoom).floor(),o=t.getSize().divideBy(i*2);return new ae.Bounds(r.subtract(o),r.add(o))},_update:function(e){var t=this._map;if(t){var n=Math.round(t.getZoom());e===void 0&&(e=t.getCenter());var i=this._getCelldPixelBounds(e),r=this._pxBoundsToCellRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new ae.Bounds(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var u in this._cells){var c=this._cells[u].coords;(c.z!==this._cellZoom||!l.contains(new ae.Point(c.x,c.y)))&&(this._cells[u].current=!1)}if(Math.abs(n-this._cellZoom)>1){this._setView(e,n);return}for(var d=r.min.y;d<=r.max.y;d++)for(var h=r.min.x;h<=r.max.x;h++){var m=new ae.Point(h,d);if(m.z=this._cellZoom,!!this._isValidCell(m)){var g=this._cells[this._cellCoordsToKey(m)];g?g.current=!0:a.push(m)}}if(a.sort(function(_,b){return _.distanceTo(o)-b.distanceTo(o)}),a.length!==0)for(this._loading||(this._loading=!0),h=0;h<a.length;h++){var y=this._cellCoordsToKey(a[h]),v=this._keyToCellCoords(y);this._activeCells[v]?this._reuseCell(a[h]):this._createCell(a[h])}}},_isValidCell:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalCellRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._cellCoordsToBounds(e);return ae.toLatLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._cellCoordsToBounds(this._keyToCellCoords(e))},_cellCoordsToNwSe:function(e){var t=this._map,n=this.getCellSize(),i=e.scaleBy(n),r=i.add(n),o=t.unproject(i,e.z),a=t.unproject(r,e.z);return[o,a]},_cellCoordsToBounds:function(e){var t=this._cellCoordsToNwSe(e),n=new ae.LatLngBounds(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_cellCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToCellCoords:function(e){var t=e.split(":"),n=new ae.Point(+t[0],+t[1]);return n.z=+t[2],n},_removeCell:function(e){var t=this._cells[e];if(t){var n=this._keyToCellCoords(e),i=this._wrapCoords(n),r=this._cellCoordsToBounds(this._wrapCoords(n));t.current=!1,delete this._cells[e],this._activeCells[e]=t,this.cellLeave(r,i,e),this.fire("cellleave",{key:e,coords:i,bounds:r})}},_reuseCell:function(e){var t=this._cellCoordsToKey(e);this._cells[t]=this._activeCells[t],this._cells[t].current=!0;var n=this._wrapCoords(e),i=this._cellCoordsToBounds(this._wrapCoords(e));this.cellEnter(i,n,t),this.fire("cellenter",{key:t,coords:n,bounds:i})},_createCell:function(e){var t=this._cellCoordsToKey(e),n=this._wrapCoords(e),i=this._cellCoordsToBounds(this._wrapCoords(e));this.createCell(i,n,t),this.fire("cellcreate",{key:t,coords:n,bounds:i}),this._cells[t]={coords:e,current:!0},ae.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(e,t,n){var i=this._cellCoordsToKey(e);n=this._cells[i],n&&(n.loaded=+new Date,n.active=!0)},_getCellPos:function(e){return e.scaleBy(this.getCellSize())},_wrapCoords:function(e){var t=new ae.Point(this._wrapX?ae.Util.wrapNum(e.x,this._wrapX):e.x,this._wrapY?ae.Util.wrapNum(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToCellRange:function(e){var t=this.getCellSize();return new ae.Bounds(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))}});function Ol(e){this.values=[].concat(e||[])}Ol.prototype.query=function(e){var t=this.getIndex(e);return this.values[t]};Ol.prototype.getIndex=function(t){this.dirty&&this.sort();for(var n=0,i=this.values.length-1,r,o;n<=i;)if(r=(n+i)/2|0,o=this.values[Math.round(r)],+o.value<+t)n=r+1;else if(+o.value>+t)i=r-1;else return r;return Math.abs(~i)};Ol.prototype.between=function(t,n){var i=this.getIndex(t),r=this.getIndex(n);if(i===0&&r===0)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[r+1]&&this.values[r+1].value===n;)r++;return this.values[r]&&this.values[r].value===n&&this.values[r+1]&&r++,this.values.slice(i,r)};Ol.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this};Ol.prototype.bulkAdd=function(t,n){return this.values=this.values.concat([].concat(t||[])),n?this.sort():this.dirty=!0,this};Ol.prototype.sort=function(){return this.values.sort(function(t,n){return+n.value-+t.value}).reverse(),this.dirty=!1,this};var z_=Qx.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(e){if(Qx.prototype.initialize.call(this,e),e=Qd(e),e=ae.Util.setOptions(this,e),this.service=Cie(e),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var t=!1,n=0;n<this.options.fields.length;n++)this.options.fields[n].match(/^(OBJECTID|FID|OID|ID)$/i)&&(t=!0);t===!1&&kc("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Ol,this._endTimeIndex=new Ol):this.options.timeField&&(this._timeIndex=new Ol),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(e){return f1(e),this.service.metadata(function(t,n){if(!t){var i=n.supportedQueryFormats,r=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(r=!0),!r&&i&&i.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),n.objectIdField&&(this.service.options.idAttribute=n.objectIdField),!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))}},this),e.on("zoomend",this._handleZoomChange,this),Qx.prototype.onAdd.call(this,e)},onRemove:function(e){return d1(e),e.off("zoomend",this._handleZoomChange,this),Qx.prototype.onRemove.call(this,e)},getAttribution:function(){return this.options.attribution},createCell:function(e,t){this._visibleZoom()&&this._requestFeatures(e,t)},_requestFeatures:function(e,t,n,i){this._activeRequests++,i=i||0;var r=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:e},!0),this._buildQuery(e,i).run(function(o,a,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===r&&(!o&&a&&a.features.length&&ae.Util.requestAnimFrame(ae.Util.bind(function(){this._addFeatures(a.features,t),this._postProcessFeatures(e)},this)),!o&&a&&!a.features.length&&this._postProcessFeatures(e),o&&this._postProcessFeatures(e),n&&n.call(this,o,a),s&&(s.exceededTransferLimit||s.properties&&s.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(e,t,n,i+a.features.length))},this)},_postProcessFeatures:function(e){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:e})},_cacheKey:function(e){return e.z+":"+e.x+":"+e.y},_addFeatures:function(e,t){if(t){var n=this._cacheKey(t);this._cache[n]=this._cache[n]||[]}for(var i=e.length-1;i>=0;i--){var r=e[i].id;this._currentSnapshot.indexOf(r)===-1&&this._currentSnapshot.push(r),typeof n<"u"&&this._cache[n].indexOf(r)===-1&&this._cache[n].push(r)}this.options.timeField&&this._buildTimeIndexes(e),this.createLayers(e)},_buildQuery:function(e,t){var n=this.service.query().intersects(e).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(t))&&(n=n.offset(t)),n.params.resultType="tile",this.options.requestParams&&ae.Util.extend(n.params,this.options.requestParams),this.options.simplifyFactor&&n.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&n.between(this.options.from,this.options.to),n},setWhere:function(e,t,n){this.options.where=e&&e.length?e:"1=1";for(var i=[],r=[],o=0,a=null,s=ae.Util.bind(function(h,m){if(h&&(a=h),m)for(var g=m.features.length-1;g>=0;g--)r.push(m.features[g].id);o--,o<=0&&this._visibleZoom()&&e===this.options.where&&(this._currentSnapshot=r,ae.Util.requestAnimFrame(ae.Util.bind(function(){this.removeLayers(i),this.addLayers(r),t&&t.call(n,a)},this)))},this),l=this._currentSnapshot.length-1;l>=0;l--)i.push(this._currentSnapshot[l]);this._cache={};for(var u in this._cells){o++;var c=this._keyToCellCoords(u),d=this._cellCoordsToBounds(c);this._requestFeatures(d,c,s)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t,n,i){var r=this.options.from,o=this.options.to,a=0,s=null,l=ae.Util.bind(function(h){h&&(s=h),this._filterExistingFeatures(r,o,e,t),a--,n&&a<=0&&n.call(i,s)},this);if(this.options.from=e,this.options.to=t,this._filterExistingFeatures(r,o,e,t),this.options.timeFilterMode==="server")for(var u in this._cells){a++;var c=this._keyToCellCoords(u),d=this._cellCoordsToBounds(c);this._requestFeatures(d,c,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(e,t,n,i){var r=e&&t?this._getFeaturesInTimeRange(e,t):this._currentSnapshot,o=this._getFeaturesInTimeRange(n,i);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);s>=0&&r.splice(s,1)}ae.Util.requestAnimFrame(ae.Util.bind(function(){this.removeLayers(r),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(e,t){var n=[],i;if(this.options.timeField.start&&this.options.timeField.end){var r=this._startTimeIndex.between(e,t),o=this._endTimeIndex.between(e,t);i=r.concat(o)}else if(this._timeIndex)i=this._timeIndex.between(e,t);else return kc("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var a=i.length-1;a>=0;a--)n.push(i[a].id);return n},_buildTimeIndexes:function(e){var t,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],r=[];for(t=e.length-1;t>=0;t--)n=e[t],i.push({id:n.id,value:new Date(n.properties[this.options.timeField.start])}),r.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(r)}else{var o=[];for(t=e.length-1;t>=0;t--)n=e[t],o.push({id:n.id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(e){if(!this.options.from||!this.options.to)return!0;var t=+this.options.from.valueOf(),n=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var i=+e.properties[this.options.timeField];return i>=t&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var r=+e.properties[this.options.timeField.start],o=+e.properties[this.options.timeField.end];return r>=t&&r<=n||o>=t&&o<=n||r<=t&&o>=n}},_visibleZoom:function(){if(!this._map)return!1;var e=this._map.getZoom();return!(e>this.options.maxZoom||e<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var e in this._cells){var t=this._cells[e].coords,n=this._cacheKey(t);this._cache[n]&&this.addLayers(this._cache[n])}},authenticate:function(e){return this.service.authenticate(e),this},metadata:function(e,t){return this.service.metadata(e,t),this},query:function(){return this.service.query()},_getMetadata:function(e){if(this._metadata){var t;e(t,this._metadata)}else this.metadata(ae.Util.bind(function(n,i){this._metadata=i,e(n,this._metadata)},this))},addFeature:function(e,t,n){this.addFeatures(e,t,n)},addFeatures:function(e,t,n){this._getMetadata(ae.Util.bind(function(i,r){if(i){t&&t.call(this,i,null);return}var o=e.features?e.features:[e];this.service.addFeatures(e,ae.Util.bind(function(a,s){if(!a){for(var l=o.length-1;l>=0;l--)o[l].properties[r.objectIdField]=o.length>1?s[l].objectId:s.objectId,o[l].id=o.length>1?s[l].objectId:s.objectId;this._addFeatures(o)}t&&t.call(n,a,s)},this))},this))},updateFeature:function(e,t,n){this.updateFeatures(e,t,n)},updateFeatures:function(e,t,n){var i=e.features?e.features:[e];this.service.updateFeatures(e,function(r,o){if(!r){for(var a=i.length-1;a>=0;a--)this.removeLayers([i[a].id],!0);this._addFeatures(i)}t&&t.call(n,r,o)},this)},deleteFeature:function(e,t,n){this.deleteFeatures(e,t,n)},deleteFeatures:function(e,t,n){return this.service.deleteFeatures(e,function(i,r){var o=r.length?r:[r];if(!i&&o.length>0)for(var a=o.length-1;a>=0;a--)this.removeLayers([o[a].objectId],!0);t&&t.call(n,i,r)},this)}}),Rie=z_.extend({options:{cacheLayers:!0},initialize:function(e){e.apikey&&(e.token=e.apikey),z_.prototype.initialize.call(this,e),this._originalStyle=this.options.style,this._layers={}},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t]),this.fire("removefeature",{feature:this._layers[t].feature,permanent:!1},!0);return z_.prototype.onRemove.call(this,e)},createNewLayer:function(e){var t=ae.GeoJSON.geometryToLayer(e,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(e,t){var n=[],i=this.options.coordsToLatLng||ae.GeoJSON.coordsToLatLng;switch(t.properties&&(e.feature.properties=t.properties),t.geometry.type){case"Point":n=ae.GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(n);break;case"LineString":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0,i),e.setLatLngs(n);break;case"MultiLineString":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),e.setLatLngs(n);break;case"Polygon":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),e.setLatLngs(n);break;case"MultiPolygon":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2,i),e.setLatLngs(n);break}this.redraw(e.feature.id)},createLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=this._layers[n.id],r;this._visibleZoom()&&i&&!this._map.hasLayer(i)&&(!this.options.timeField||this._featureWithinTimeRange(n))&&(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature},!0)),i&&(i.setLatLngs||i.setLatLng)&&this._updateLayer(i,n),i||(r=this.createNewLayer(n),r?(r.feature=n,r.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(r.feature,r),this._layers[r.feature.id]=r,this.setFeatureStyle(r.feature.id,this.options.style),this.fire("createfeature",{feature:r.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(r)):kc("invalid GeoJSON encountered"))}},addLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=this._layers[e[t]];n&&(!this.options.timeField||this._featureWithinTimeRange(n.feature))&&(this._map.addLayer(n),this.fire("addfeature",{feature:n.feature},!0))}},removeLayers:function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n],r=this._layers[i];r&&(this.fire("removefeature",{feature:r.feature,permanent:t},!0),this._map.removeLayer(r)),r&&t&&delete this._layers[i]}},cellEnter:function(e,t){this._visibleZoom()&&!this._zooming&&this._map&&ae.Util.requestAnimFrame(ae.Util.bind(function(){var n=this._cacheKey(t),i=this._cellCoordsToKey(t),r=this._cache[n];this._activeCells[i]&&r&&this.addLayers(r)},this))},cellLeave:function(e,t){this._zooming||ae.Util.requestAnimFrame(ae.Util.bind(function(){if(this._map){var n=this._cacheKey(t),i=this._cellCoordsToKey(t),r=this._cache[n],o=this._map.getBounds();if(!this._activeCells[i]&&r){for(var a=!0,s=0;s<r.length;s++){var l=this._layers[r[s]];l&&l.getBounds&&o.intersects(l.getBounds())&&(a=!1)}a&&this.removeLayers(r,!this.options.cacheLayers),!this.options.cacheLayers&&a&&(delete this._cache[n],delete this._cells[i],delete this._activeCells[i])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(e){this.resetFeatureStyle(e.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(e){var t=this._layers[e],n=this._originalStyle||ae.Path.prototype.options;return t&&(ae.Util.extend(t.options,t.defaultOptions),this.setFeatureStyle(e,n)),this},setFeatureStyle:function(e,t){var n=this._layers[e];return typeof t=="function"&&(t=t(n.feature)),n.setStyle&&n.setStyle(t),this},eachActiveFeature:function(e,t){if(this._map){var n=this._map.getBounds();for(var i in this._layers)this._currentSnapshot.indexOf(this._layers[i].feature.id)!==-1&&(typeof this._layers[i].getLatLng=="function"&&n.contains(this._layers[i].getLatLng())?e.call(t,this._layers[i]):typeof this._layers[i].getBounds=="function"&&n.intersects(this._layers[i].getBounds())&&e.call(t,this._layers[i]))}return this},eachFeature:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getFeature:function(e){return this._layers[e]},bringToBack:function(){this.eachFeature(function(e){e.bringToBack&&e.bringToBack()})},bringToFront:function(){this.eachFeature(function(e){e.bringToFront&&e.bringToFront()})},redraw:function(e){return e&&this._redraw(e),this},_redraw:function(e){var t=this._layers[e],n=t.feature;if(t&&t.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var i=this.options.pointToLayer(n,ae.latLng(n.geometry.coordinates[1],n.geometry.coordinates[0])),r=i.options.icon;t.setIcon(r)}if(t&&t.setStyle&&this.options.pointToLayer){var o=this.options.pointToLayer(n,ae.latLng(n.geometry.coordinates[1],n.geometry.coordinates[0])),a=o.options;this.setFeatureStyle(n.id,a)}t&&t.setStyle&&this.options.style&&this.resetFeatureStyle(n.id)},openPopup(e){return this._popup&&this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(e){return this._tooltip&&this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});function j6e(e){return new Rie(e)}var B6e=_6e.version;const H6e=Object.freeze(Object.defineProperty({__proto__:null,BasemapLayer:a2,DynamicMapLayer:kie,FeatureLayer:Rie,FeatureLayerService:Sie,FeatureManager:z_,Find:pie,Identify:KC,IdentifyFeatures:gie,IdentifyImage:vie,ImageMapLayer:Eie,ImageService:bie,MapService:_ie,Query:hie,RasterLayer:gD,Service:p1,Support:Fu,Task:h1,TiledMapLayer:mD,Util:M6e,VERSION:B6e,basemapLayer:O6e,dynamicMapLayer:z6e,featureLayer:j6e,featureLayerService:Cie,find:mie,get:YC,identify:P6e,identifyFeatures:yie,identifyImage:xie,imageMapLayer:D6e,imageService:wie,mapService:pD,options:tie,post:nie,query:XC,request:cD,service:$6e,task:N6e,tiledMapLayer:I6e},Symbol.toStringTag,{value:"Module"})),U6e=R8(H6e),W6e=R8(Gje);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.updateEsriLayer=void 0;const t=U6e,n=W6e,i=(a,s)=>{var l;const{layerType:u,name:c}=a;switch(u){case"basemapLayer":l=t.basemapLayer(c,{...a});break;default:l=new t[u]({...a})}return{instance:l,context:s}},r=(a,s,l)=>{l.url!==s.url&&a.setUrl&&a.setUrl(s.url),l.opacity!==s.opacity&&a.setOpacity&&a.setOpacity(s.opacity),l.zIndex!==s.zIndex&&a.setZIndex&&a.setZIndex(s.zIndex),(l.to!==s.to||l.from!==s.from)&&a.setTimeRange&&a.setTimeRange(s.to,s.from,s.setTimeCallback||null),l.style!==s.style&&a.setStyle&&a.setStyle(s.style),l.where!==s.where&&a.setWhere&&a.setWhere(s.where),l.layers!==s.layers&&a.setLayers&&a.setLayers(s.layers),l.layerDefs!==s.layerDefs&&a.setLayerDefs&&a.setLayerDefs(s.layerDefs),l.dynamicLayers!==s.dynamicLayers&&a.setDynamicLayers&&a.setDynamicLayers(s.dynamicLayers),l.timeOptions!==s.timeOptions&&a.setTimeOptions&&a.setTimeOptions(s.timeOptions),l.bandIds!==s.bandIds&&a.setBandIds&&a.setBandIds(s.bandIds),l.noData!==s.noData&&a.setNoData&&a.setNoData(s.bandIds),l.pixelType!==s.pixelType&&a.setPixelType&&a.setPixelType(s.bandIds),l.renderingRule!==s.renderingRule&&a.setRenderingRule&&a.setRenderingRule(s.renderingRule),l.mosaicRule!==s.mosaicRule&&a.setMosaicRule&&a.setMosaicRule(s.mosaicRule)};e.updateEsriLayer=r;const o=(0,n.createLayerComponent)(i,e.updateEsriLayer);e.default=o})(Jd);var yD={};Object.defineProperty(yD,"__esModule",{value:!0});const v8=M,G6e=Jd,q6e=v8.forwardRef((e,t)=>v8.createElement(G6e.default,{ref:t,layerType:"basemapLayer",...e}));yD.default=q6e;var vD={};Object.defineProperty(vD,"__esModule",{value:!0});const x8=M,V6e=Jd,Y6e=x8.forwardRef((e,t)=>x8.createElement(V6e.default,{ref:t,layerType:"featureLayer",...e}));vD.default=Y6e;var xD={};Object.defineProperty(xD,"__esModule",{value:!0});const _8=M,Z6e=Jd,X6e=_8.forwardRef((e,t)=>_8.createElement(Z6e.default,{ref:t,layerType:"imageMapLayer",...e}));xD.default=X6e;var _D={};Object.defineProperty(_D,"__esModule",{value:!0});const b8=M,K6e=Jd,J6e=b8.forwardRef((e,t)=>b8.createElement(K6e.default,{ref:t,layerType:"dynamicMapLayer",...e}));_D.default=J6e;var bD={};Object.defineProperty(bD,"__esModule",{value:!0});const w8=M,Q6e=Jd,eBe=w8.forwardRef((e,t)=>w8.createElement(Q6e.default,{ref:t,layerType:"tiledMapLayer",...e}));bD.default=eBe;Object.defineProperty(ao,"__esModule",{value:!0});var Tie=ao.TiledMapLayer=ao.DynamicMapLayer=ao.ImageMapLayer=ao.FeatureLayer=ao.BasemapLayer=ao.EsriLeafletLayer=void 0;const tBe=Jd;ao.EsriLeafletLayer=tBe.default;const nBe=yD;ao.BasemapLayer=nBe.default;const iBe=vD;ao.FeatureLayer=iBe.default;const rBe=xD;ao.ImageMapLayer=rBe.default;const oBe=_D;ao.DynamicMapLayer=oBe.default;const aBe=bD;Tie=ao.TiledMapLayer=aBe.default;function sBe({param:e,opt:t}){let n=t==="CH"?[e.CHMin,e.CHMax]:[e.Min,e.Max];const i=t==="CH"?h8[e.Palette2]:h8[e.Palette1],r=[...Array(20).keys()],o=e.Unit==="per cent"?"value in %":e.Unit,a=e.Proportional?"increasing value means better condition":"increasing value means worse condition";let s=[.1,.2,.5,1,2,5,10,20],l=[1,1,1,0,0,0,0,0];const u=Lne(s.map(g=>Math.abs(6-(n[1]-n[0])/g)));s=s[u],l=l[u];let c=[n[0]],d=[5];const h=90*s/(n[1]-n[0]);for(;c[c.length-1]<n[1];){const g=c.length;c.push(c[g-1]+s),d.push(d[g-1]+h)}const m=w.jsxs("div",{className:"text-center",children:[w.jsxs("svg",{width:"100%",height:"65",children:[r.slice(0,18).map(g=>w.jsx("rect",{x:5+g*5+"%",y:"0%",rx:"5px",ry:"5px",width:"5%",height:"30",stroke:"#2b2b2b",fill:i[g]},g)),w.jsx("line",{x1:"0",x2:"100%",y1:"40",y2:"40",stroke:"black",weight:"2"}),d.map((g,y)=>w.jsx("line",{x1:g+"%",x2:g+"%",y1:"37",y2:"43",stroke:"black",weight:"2"},y)),c.map((g,y)=>w.jsx("text",{x:d[y]+"%",y:"55",textAnchor:"middle",fontSize:"90%",children:parseFloat(g).toFixed(l)},y))]}),w.jsx("span",{children:w.jsx("b",{children:o})}),w.jsx("br",{}),w.jsx("span",{children:w.jsx("i",{children:a})})]});return w.jsxs("div",{className:"row m-0 p-2 mb-2 rounded-3 bg-secondary-subtle",style:{maxWidth:"800px"},children:[w.jsx("div",{className:"p-0",children:w.jsx("h5",{children:w.jsx(pb,{bg:"danger",children:e.Indicator})})}),w.jsxs("div",{className:"row p-0 m-0",children:[w.jsxs("div",{className:"col-5 p-0 m-0",style:{fontSize:"75%"},children:[w.jsxs("p",{children:[w.jsx("b",{children:"Definition"}),w.jsx("br",{}),e.Definition]}),e.Remark?w.jsxs("p",{children:[w.jsx("b",{children:"Note"}),w.jsx(Rje,{content:e.Remark})]}):w.jsx(w.Fragment,{})]}),w.jsx("div",{className:"col-7",style:{fontSize:"75%"},children:w.jsxs("div",{className:"row p-0 m-0 justify-content-between",children:[w.jsxs("div",{className:"col-md-5 p-1 m-0",children:[w.jsx("b",{children:"Remarks"}),w.jsx("br",{}),w.jsxs("b",{children:["R",w.jsx("sub",{children:"2"}),""]})," ",e.R2,", ",e.Y2,w.jsx("br",{}),w.jsxs("b",{children:["R",w.jsx("sub",{children:"1"}),""]})," ",e.R1,", ",e.Y1,w.jsx("br",{}),w.jsxs("b",{children:["Ch",""]})," (R",w.jsx("sub",{children:"2"})," - R",w.jsx("sub",{children:"1"}),")"]}),w.jsxs("div",{className:"col-md-7 p-1 m-0",children:[w.jsx("div",{className:"float-end",children:w.jsx(tD,{about:"About this color bar"})}),m]})]})})]})]})}const S8={esri:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",label:"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",positron:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png"};function lBe({param:e,data:t,boundary:n,func:i,filterFunc:r}){const o=n2[e.country],a=o.NoR2.includes(e.indicator)?"R1":"R2",[s,l]=M.useState(),[u,c]=M.useState({round:a,field:e.indicator+"_"+a,showRaster:!1,showLabel:!1});M.useEffect(()=>{const W=o.NoR2.includes(e.indicator)?"R1":"R2";c({round:W,field:e.indicator+"_"+W,showRaster:!1,showLabel:!1}),l()},[e.indicator]);const d=M.useRef(),h=M.useRef(),m=M.useRef(),g=M.useRef();var y;const v=()=>(y=qje(),null);function _(W){y.fitBounds(W)}function b(){return w.jsx("div",{id:"zoomPanel",className:"leaflet-bottom leaflet-left",children:w.jsxs("div",{className:"leaflet-control btn-group-vertical",children:[w.jsx("button",{className:"map-btn",title:"Zoom-in",onClick:()=>y.zoomIn(),children:w.jsx(cje,{})}),w.jsx("button",{className:"map-btn",title:"Zoom-out",onClick:()=>y.zoomOut(),children:w.jsx(uje,{})}),w.jsx("button",{className:"map-btn",title:"Reset View",onClick:()=>y.setView(o.Center,o.Zoom),children:w.jsx(lje,{})})]})})}function S(){const[W,j]=M.useState(!0);let U=!!o.DistrictOnly.includes(e.indicator),G=!!o.NoR1.includes(e.indicator),Z=!!o.NoR2.includes(e.indicator);function J(){let ne=document.getElementById("layerControl");ne.getAttribute("style")==="display: block;"?(ne.style.display="none",j(!1)):(ne.style.display="block",j(!0))}function H(ne){let he={...u};he.round=ne,he.field=e.indicator+"_"+ne,he.showRaster=!1,c(he,{replace:!0})}function Q(ne){let he={...u};he.showRaster=ne,c(he,{replace:!0})}function K(){let ne={...u};ne.showLabel=!u.showLabel,c(ne,{replace:!0})}return w.jsx("div",{className:"leaflet-top leaflet-left",children:w.jsx("div",{className:"leaflet-control m-1 p-0 m-0",children:w.jsxs("div",{className:"p-1 m-0 mt-1 rounded-2 bg-secondary-subtle",style:{display:"block"},children:[w.jsxs("div",{className:"subtitle",onClick:J,style:{height:"25px",width:"125px"},children:[w.jsx("b",{children:"Control"}),w.jsx("i",{className:"float-end",children:W?w.jsx(aje,{title:"minimize"}):w.jsx(oje,{title:"maximize"})})]}),w.jsxs("div",{id:"layerControl",children:[w.jsxs(no,{children:[w.jsx(no.Check,{defaultChecked:u.round==="R2",disabled:Z,type:"radio",id:"radio2",label:"Round 2",name:"optRound",title:Z?"Unavailable for this indicator":"Show round 2 data",onClick:()=>H("R2")}),w.jsx(no.Check,{defaultChecked:u.round==="R1",disabled:G,type:"radio",id:"radio1",label:"Round 1",name:"optRound",title:G?"Unavailable for this indicator":"Show round 1 data",onClick:()=>H("R1")}),w.jsx(no.Check,{defaultChecked:u.round==="CH",disabled:Z||G,type:"radio",id:"radio3",label:"Change",name:"optRound",title:Z?"Unavailable for this indicator":"Show change",onClick:()=>H("CH")})]}),w.jsx("hr",{className:"mb-2 mt-0"}),w.jsxs(no,{children:[w.jsx(no.Check,{defaultChecked:u.showRaster===!1,type:"radio",id:"radio_agg",label:"District Level",name:"optRaster",title:"Show aggregated data",onClick:()=>Q(!1)}),w.jsx(no.Check,{defaultChecked:u.showRaster===!0,disabled:U,type:"radio",id:"radio_grid",label:"Grid Level",name:"optRaster",title:U?"Unavailable for this indicator":"Show gridded data",onClick:()=>Q(!0)})]}),w.jsx("hr",{className:"mb-2 mt-0"}),w.jsx(no,{children:w.jsx(no.Check,{type:"switch",id:"showLabel",label:"Show label",defaultChecked:u.showLabel,onChange:K})})]})]})})})}const k=M.useMemo(()=>{let W=o.indicators[e.indicator];return W.Definition=ic[e.indicator].Definition,W.Unit=ic[e.indicator].Unit,W.Proportional=ic[e.indicator].Proportional,w.jsx(sBe,{param:W,opt:u.round})},[e.indicator,u.round]),R=M.useMemo(()=>w.jsx(S,{}),[e.indicator,u]);M.useMemo(()=>w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-lg-7"}),w.jsx("div",{className:"col-lg-5",children:w.jsx("b",{children:"Inspect Map"})})]}),[u]);const F=M.useCallback(W=>{let j=o.indicators[e.indicator].Palette1,U=[o.indicators[e.indicator].Min,o.indicators[e.indicator].Max];return u.round==="CH"&&(j=o.indicators[e.indicator].Palette2,U=[o.indicators[e.indicator].CHMin,o.indicators[e.indicator].CHMax]),{zIndex:2,weight:.5,opacity:1,color:"#FFFFFF",fillOpacity:1,fillColor:Dne(W.properties[u.field],U,j)}},[e.indicator,u]);let T=t?t.features.filter(W=>W.properties.state===s):[];T.forEach(W=>{const j=u.round==="CH"?{R1:W.properties[e.indicator+"_R1"],R2:W.properties[e.indicator+"_R2"],CH:W.properties[e.indicator+"_CH"]}:{[u.round]:W.properties[u.field]};W.properties.toDisplay=j}),M.useEffect(()=>{d.current&&(d.current.clearLayers(),d.current.addData(T))},[d,T]),M.useEffect(()=>{h.current&&(h.current.clearLayers(),h.current.addData(n))},[d,n]),M.useEffect(()=>{if(m.current){const W=n.features.filter(j=>j.properties.state===s);m.current.clearLayers(),m.current.addData(W)}},[m,s]),M.useEffect(()=>{let W={...t};W.features=t.features.filter(j=>r(j.properties)),g.current&&(g.current.clearLayers(),g.current.addData(W),g.current.setStyle(F))},[g,e.indicator,u,r]);const P=M.useMemo(()=>{if(u.showRaster){let W="https://tiles.arcgis.com/tiles/7vxqqNxnsIHE3EKt/arcgis/rest/services/";return W+=`${e.config.Prefix}${u.field}/MapServer`,w.jsx(Tie,{name:"thisRaster",url:W})}else return w.jsx(n0,{data:t,ref:g,style:F,attribution:'Powered by <a href="https://www.esri.com">Esri</a>'})},[u.showRaster,u.field,e.indicator,t]),B=(W,j)=>{j.on({mouseover:function(U){let Z=`<div><b>${U.target.feature.properties.state}</b></div>`;j.setStyle({weight:3}),j.bindTooltip(Z),j.openTooltip()},mouseout:function(U){j.setStyle({weight:.5}),j.closeTooltip()},click:function(U){const G=U.target.feature.properties.state;j.setStyle({weight:3}),_(U.target._bounds),l(G),i(G)}})},O=(W,j)=>{j.on({mouseover:function(U){const G=U.target.feature.properties,Z=D(G);j.setStyle({weight:3,fillOpacity:.7}),j.bindTooltip(Z),j.openTooltip()},mouseout:function(U){j.setStyle({weight:.5,fillOpacity:0}),j.closeTooltip()}})};function D(W){let j=`<div><b>${W.district}</b>`;const U={R1:"R<sub>1</sub>",R2:"R<sub>2</sub>",CH:"Change"};return j+=`<br/>${W.state}<br/>`,Object.keys(W.toDisplay).forEach((G,Z)=>{j+=`<br/> ${U[G]} ${Lh(W.toDisplay[G],1)}`}),j+="</div>",j}return w.jsxs("div",{id:"map-container",className:"row p-0 m-0",children:[k,w.jsx("div",{className:"row m-0 p-0 mb-2",children:w.jsxs(Yje,{zoomControl:!1,center:e.config.Center,zoom:e.config.Zoom,minZoom:3,maxZoom:9,style:{width:"100%",height:"60vh",minHeight:"400px",background:"#fff",borderRadius:"10px"},children:[w.jsx(v,{}),w.jsx(b,{}),R,w.jsx(Jx,{name:"basemap",style:{zIndex:0},children:w.jsx(g8,{url:S8.positron})}),u.showLabel?w.jsx(g8,{url:S8.label,zIndex:500}):w.jsx(w.Fragment,{}),w.jsx(Jx,{name:"tiles",style:{zIndex:55},children:P}),w.jsxs(Jx,{name:"selected",style:{zIndex:60},children:[w.jsx(n0,{data:s,ref:m,style:Tje,zIndex:400}),w.jsx(n0,{data:n,ref:h,style:d8,onEachFeature:B})]}),u.showLabel?null:w.jsxs(Jx,{name:"boundary",style:{zIndex:65},children:[w.jsx(n0,{data:n,style:d8,onEachFeature:B}),w.jsx(n0,{data:T,ref:d,style:Aje,onEachFeature:O})]})]})})]})}const uBe=Object.keys(n2),cBe=["Burkina Faso","India","Kenya","Nigeria"],fBe=["Burkina Faso","Nigeria"],$h=async(e,t)=>{await fetch(e).then(n=>n.json()).then(n=>t(n))};function AR(){let e=Kae(),t=rN();const[n,i]=M.useState({country:"",indicator:"",config:"",showData:"all",probLimit:0}),[r,o]=M.useState(),[a,s]=M.useState(),[l,u]=M.useState(),[c,d]=M.useState(),[h,m]=M.useState();M.useEffect(()=>{const B=t.pathname.split("/");let O={country:"",indicator:"",config:"",showData:"all",probLimit:0};if(uBe.includes(B[1])){O.country=B[1],O.config=n2[B[1]];const D=Object.keys(O.config.indicators);B.length===3&D.includes(B[2])?O.indicator=B[2]:O.indicator="";const W=`./src/data/${O.country}`;$h(`${W}/${O.config.TLC}_adm1.json`,o),$h(`${W}/${O.config.TLC}_data.json`,s),$h(`${W}/${O.config.TLC}_table.json`,u),console.log("fetch data",W)}i(O,{replace:!0})},[]),M.useEffect(()=>{if(h){const B=l.filter(O=>O.state===h);d(B,{replace:!0})}},[h]);const g=M.useMemo(()=>w.jsx("div",{children:w.jsx(Rle,{variant:"light"})}),[]),y=M.useMemo(()=>{let B={rounds:""};if(n.indicator){const O=n.config.indicators[n.indicator],D=!n.config.NoR1.includes(n.indicator)&!n.config.NoR2.includes(n.indicator),W=n.config.NoR1.includes(n.indicator)?`Round 2 (${O.R2}, ${O.Y2})`:`Round 1 (${O.R1}, ${O.Y1})`;B={rounds:D?`Round 1 (${O.R1}, ${O.Y1}), Round 2 (${O.R2}, ${O.Y2}), or the change between rounds (Round 2 and Round 1)`:W}}return B},[n.indicator]),v=M.useCallback(B=>{const O=B[`${n.indicator}_CH`],D=B[`${n.indicator}_CH_P`];let W=!0;return nM.includes(n.indicator)?W=n.showData==="pos"?O>0&&D>n.probLimit:n.showData==="neg"?O<=0&&D<100-n.probLimit:!0:W=n.showData==="neg"?O>0&&D>n.probLimit:n.showData==="pos"?O<=0&&D<100-n.probLimit:!0,W},[n.showData,n.probLimit]);function _(B){const O=B.target.value;let D={country:O,indicator:"",config:n2[O],showData:"all",probLimit:0};m(),s(),d(),i(D,{replace:!0}),e("/"+O,{replace:!0});const W=`./src/data/${D.country}`;console.log("fetch data",W),$h(`${W}/${D.config.TLC}_adm1.json`,o),$h(`${W}/${D.config.TLC}_data.json`,s),$h(`${W}/${D.config.TLC}_table.json`,u),document.getElementById("selectIndicator")&&(document.getElementById("selectIndicator").value="")}function b(B){const O=B.target.value;let D={...n};D.indicator=O,D.showData="all",D.probLimit=0,m(),d(),i(D,{replace:!0}),e(`/${n.country}/${O}`,{replace:!0});const W=document.getElementById("selectFilter");W&&(W.value="all")}function S(B){const O=B.target.value;let D={...n};O.slice(0,3)==="pos"?(D.showData="pos",D.probLimit=t0["Show Improvement"][O].limit):O.slice(0,3)==="neg"?(D.showData="neg",D.probLimit=t0["Show Worsening"][O].limit):(D.showData="all",D.probLimit=0),i(D,{replace:!0})}function k(){return w.jsxs("div",{children:[w.jsx("b",{children:"Select country"}),w.jsxs(no.Select,{id:"selectCountry",onChange:_,defaultValue:n.country,children:[w.jsx("option",{value:""}),cBe.map((B,O)=>{const D=B.replace(" ","").toLowerCase();return w.jsx("option",{value:D,disabled:fBe.includes(B),children:B},O)})]})]})}const R=M.useMemo(()=>{if(n.country!=""){let B={};return Object.keys(n.config.indicators).forEach(O=>{const D=n.config.indicators[O].Theme;Object.keys(B).includes(D)?B[D].push({Key:O,Indicator:n.config.indicators[O].Indicator}):B[D]=[{Key:O,Indicator:n.config.indicators[O].Indicator}]}),w.jsxs("div",{children:[w.jsx("b",{children:"Select indicator"}),w.jsxs(no.Select,{id:"selectIndicator",onChange:b,defaultValue:n.indicator,children:[w.jsx("option",{value:""}),Object.keys(B).sort().map((O,D)=>w.jsx("optgroup",{label:O,children:B[O].sort().map((W,j)=>w.jsx("option",{value:W.Key,children:W.Indicator},j))},D))]})]})}else return w.jsx(w.Fragment,{})},[n.country]),F=M.useMemo(()=>{const B=l?!l[0][n.indicator+"_CH_P"]:!1;return w.jsxs("div",{children:[w.jsx("b",{children:"Filter by Change Significance"}),w.jsx(tD,{about:"Note on the change certainty",positive:!0}),w.jsxs(no.Select,{id:"selectFilter",onChange:S,disabled:B,defaultValue:"all",children:[w.jsx("option",{value:"all",children:"Show all"}),Object.keys(t0).map((O,D)=>w.jsx("optgroup",{label:O,children:Object.keys(t0[O]).map((W,j)=>w.jsx("option",{value:W,children:t0[O][W].label},j))},D))]})]})},[n.indicator]),T=M.useMemo(()=>a?w.jsx(lBe,{param:n,boundary:r,data:a,func:m,filterFunc:v}):w.jsx(w.Fragment,{children:"Refresh"}),[n,a]),P=M.useMemo(()=>c?w.jsx(Dje,{data:c,param:n,filterFunc:v}):w.jsx(w.Fragment,{}),[c,n]);return w.jsxs("div",{className:"container-fluid",children:[w.jsx("blockquote",{className:"blockquote text-center p-2",children:w.jsxs("h2",{className:"display-6",children:["Subnational mapping of child and maternal health and development indicators in selected low- and ",w.jsx("br",{}),"middle-income countries"]})}),w.jsx("div",{className:"row mt-3 p-2 mb-3 rounded-3 bg-secondary-subtle",children:w.jsxs("div",{className:"row d-flex justify-content-between",children:[w.jsxs("div",{className:"col-lg-8",children:[w.jsx("p",{children:"This web application presents a summary of the child and maternal health and development indicators calculated at subnational level (geographic areas below the national level) for a selection of countries of interest to CIFF."}),w.jsx("p",{children:"Multiple indicators are presented in map, chart, and tabulated form, and for multiple time points based on data availability. Changes over time for each indicator are also presented."}),w.jsxs("p",{children:["Please consult the ",w.jsx("a",{href:"./#/guide",children:"Guide"})," and the ",w.jsx("a",{href:"./#/about",children:"About"})," sections for more information on how to use this portal."]})]}),w.jsxs("div",{className:"col-lg-4 px-3",id:"selection",children:[w.jsx(k,{}),w.jsx("br",{}),R]})]})}),n.indicator===""?w.jsx(w.Fragment,{}):w.jsxs("div",{className:"p-0 m-0",children:[w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-lg-4 p-0",children:g}),w.jsxs("div",{className:"col-lg-8 p-2 mb-3 rounded-3 bg-secondary-subtle",children:[w.jsx("h3",{children:w.jsxs(pb,{bg:"danger",children:[n.config.indicators[n.indicator].Indicator," in ",n.config.Name]})}),w.jsx("hr",{}),w.jsxs("p",{children:["The map below displays surfaces of subnational areas (either at ",n.config.Adm1.toLowerCase()," and ",n.config.Adm2.toLowerCase()," level or high-resolution 5x5km - pixel level data) of a particular indicator in ",n.config.Name,"."]}),w.jsxs("p",{children:["Data from ",y.rounds," for ",n.config.Name," can be selected and displayed."]}),w.jsxs("p",{children:["To get deeper information on a specific ",n.config.Adm1.toLowerCase()," or ",n.config.Adm2.toLowerCase()," in ",n.config.Name,", click on an area on the map or use the drop-down menu below. Once an area on the map has been selected, an additional set of information including tables or graphs to facilitate the interpretation of the data is displayed on the right side panel (Summary, Chart, and Table tabs)."]})]})]}),w.jsxs("div",{className:"row mt-3 p-0 mb-3",children:[w.jsxs("div",{className:"col-xl-7 p-0 m-0 px-1",children:[w.jsx(f8,{element:T,elemID:"map-container",param:["map",n],title:w.jsx("div",{className:"subtitle",children:w.jsxs("h4",{children:["Map of ",n.country]})})}),T,w.jsxs("div",{className:"row rounded-3 m-0 bg-secondary-subtle",children:[w.jsx("div",{className:"col-6 p-2",children:"The data displayed can also be filtered according to how significant the change is."}),w.jsx("div",{className:"col-6 p-2 ",id:"selection",children:F})]})]}),w.jsxs("div",{className:"col-xl-5 p-0 m-0 px-1",children:[h?w.jsx(f8,{element:P,param:["table",n],elemID:"chart-container"}):w.jsx(w.Fragment,{}),P]})]})]})]})}const dBe="/ciff_portal/assets/exceedance-2-zf-W3bHS.png",hBe="/ciff_portal/assets/aggregation-25r2IAUX.png",pBe="/ciff_portal/assets/disaggregation-2WkmDDpY.png",mBe="/ciff_portal/assets/type-1-QWprYAVG.png",gBe="/ciff_portal/assets/type-2-ICDnb6Aq.png",yBe="/ciff_portal/assets/workflow-S-atE33Q.png";function C8({which:e}){return e==="boundary"?w.jsx(EBe,{}):w.jsx(kBe,{})}function Dh({src:e,label:t,number:n,caption:i,width:r="80%"}){return w.jsxs("div",{id:t,className:"m-2 text-center",children:[w.jsx("div",{className:"text-center",children:w.jsx(yce,{alt:t,src:e})}),w.jsxs("figcaption",{className:"text-center",children:[w.jsxs("b",{children:["Figure ",n,"."]})," ",i]})]})}const vBe=[{State:"Andaman & Nicobar Islands",Count:"3"},{State:"Andhra Pradesh",Count:"13"},{State:"Bihar",Count:"38"},{State:"Chandigarh",Count:"1"},{State:"Dandra & Nagar Haveli & Daman & Diu",Count:"3"},{State:"Goa",Count:"2"},{State:"Himachal Pradesh",Count:"12"},{State:"Jammu and Kashmir",Count:"20"},{State:"Jharkhand",Count:"24"},{State:"Karnataka",Count:"30"},{State:"Kerala",Count:"2"},{State:"Ladakh",Count:"1"},{State:"Lakshadweep",Count:"14"},{State:"Manipur",Count:"9"},{State:"Mizoram",Count:"8"},{State:"Nagaland",Count:"11"},{State:"Odisha",Count:"30"},{State:"Puducherry",Count:"4"},{State:"Rajasthan",Count:"33"},{State:"Sikkim",Count:"4"},{State:"Tamil Nadu",Count:"32"},{State:"Uttarakhand",Count:"13"}],xBe=[{State:"Arunachal Pradesh",Type1:"6",Type2:"1",Count15:"16",Count19:"20",New:"4"},{State:"Assam",Type1:"12",Type2:"-",Count15:"27",Count19:"33",New:"6"},{State:"Chhattisgarh",Type1:"15",Type2:"-",Count15:"18",Count19:"27",New:"9"},{State:"Gujarat",Type1:"8",Type2:"3",Count15:"26",Count19:"33",New:"7"},{State:"Haryana",Type1:"1",Type2:"-",Count15:"21",Count19:"22",New:"1"},{State:"Madhya Pradesh",Type1:"2",Type2:"-",Count15:"50",Count19:"51",New:"1"},{State:"Maharashtra",Type1:"2",Type2:"-",Count15:"35",Count19:"36",New:"1"},{State:"Meghalaya",Type1:"8",Type2:"-",Count15:"7",Count19:"11",New:"4"},{State:"NCT of Delhi",Type1:"4",Type2:"4",Count15:"9",Count19:"11",New:"2"},{State:"Punjab",Type1:"4",Type2:"-",Count15:"20",Count19:"22",New:"2"},{State:"Telangana",Type1:"23",Type2:"7",Count15:"10",Count19:"31",New:"21"},{State:"Tripura",Type1:"7",Type2:"-",Count15:"4",Count19:"8",New:"4"},{State:"Uttar Pradesh",Type1:"4",Type2:"2",Count15:"71",Count19:"75",New:"4"},{State:"West Bengal",Type1:"2",Type2:"-",Count15:"19",Count19:"20",New:"1"}],_Be=[{title:"Arunachal Pradesh",items:["A new district (Kra Daadi) was formed from Kurung Kumey district.","Longding district was created from Tirap district.","Namsai district was created from Lohit district.","A new Siang district was created from Parent districts West Siang and East Siang."]},{title:"Assam",subtitle:"All 6 new districts created from type 1 Parent districts include:",items:["Biswanath district was created from Sonitpur","Charaideo from Sivasagar","Hojai from Nagaon","Majuli from Jorhat","South Salmara Mancachar from Dhubri","West Karbi Anglong from Karbi Anglong"]},{title:"Gujarat",subtitle:"New districts formed include:",items:["Botad from Bhavnagar and Ahmadabad","Chhota Udaipur from Vadodara","Devbhumi Dwarka from Jamnagar","Gir Somnath from Junagadh","Mahisagar from Panchmahal and Kheda","Morbi from Rajkot and Surrendranagar"]},{title:"Chhattisgarh",subtitle:"Dakshin Bastar Dantewada district in 2015-16 no longer exists, as two new districts: Dantewada and Sukma were created from it in 2019-21. Balod and Bemetara districts were also created from Durg district, thus forming three new districts including Durg.  Surguja district in 2015-16 has also been divided into three: Balarampur, Surajpur, and Surguja. Other districts formed include:",items:["Baloda Bazar from Raipur","Kodagaon from Bastar","Mungeli from Bilaspur"]},{title:"NCT of Delhi",subtitle:"Two entirely new districts: Shahdara (formed from North East and East districts), and South East Delhi (formed from South district) have been added. Although other districts bear the same name as in 2015-16, they have changed boundaries, for example,",items:["Central district and North district boundaries have been merged to form a new Central district in 2019-21","With the 2015-16 North merging as stated above, the 2015-16 North West district was also divided into new North and North West districts","New Delhi district in 2019-21 now includes a part of the 2015-16 South West boundaries with the 2015-16 New Delhi boundary","2015-16 South district is now divided into two 2019-21 districts- South and South East"]},{title:"Telangana",subtitle:"The following type 1 and type 2 districts exist in Telangana state in 2019-21:",items:["Komaram Bheem Asifabad, Mancherial, and Nirmal from Adilabad district in 2015-16","Jagitial, Peddapalli, and Rajanna Sircilla districts from Karimnagar 2015-16 district","Kothagudem from Khammam","Jogulamba Gadwal and Nagarkurnool from Mahbubnagar","Kamareddy from Nizamabad","Medchal-Malkajgiri from RangaReddy","Sangareddy from Medak","Suryapet and Yadadri Bhuvanagiri from Nalgonda","Warangal Rural from Warangal","Jangoan from Warangal and Nalgonda","Jayashankar Bhupalapally from Karimnagar, Warangal, and Khammam","Mahabubabad from Warangal and Khammam","Ranga Reddy and Vikarabad from RangaReddy and Mahabubnagar","Siddipet from Medak, Warangal, and Karimnagar","Warangal Urban from Warangal and Karimnagar"]},{title:"Haryana",subtitle:"The only new district formed is Charkhi Dadri from Bhiwani district.",items:""},{title:"Madhya Pradesh",subtitle:"Only one new district was formed: Agar Malwa from Shajapur district.",items:""},{title:"Punjab",subtitle:"The two new districts formed are:",items:["Fazilka from Firozpur","Pathankot from Gurdaspur"]},{title:"Meghalaya",subtitle:"Jaintia Hills no longer exists in 2015-16 as the district now includes two new districts: East Jaintia Hills and West Jaintia Hills. Other new districts formed include:",items:["North Garo Hills from East Garo Hills","South West Garo Hills from West Garo Hills","South West Khasi Hills from West Khasi Hills"]},{title:"Uttar Pradesh",subtitle:"Four new districts formed are:",items:["Amethi from Sultanpur and Rae Bareli","Hapur from Ghaziabad","Sambhal from Moradabad and Budaun","Shamli from Muzaffarnagar"]},{title:"West Bengal",subtitle:"Barddhaman district no longer exists, but has two new districts created from it:",items:["Paschim Barddhaman and Purba Barddhaman"]},{title:"Tripura",subtitle:"The new districts formed include:",items:["Khowai and Sepahijala from West district","Unakoti from North district"]}];function bBe({obj:e}){return w.jsx("div",{children:w.jsx(Rg,{border:"primary",children:w.jsxs(Rg.Body,{children:[w.jsx(Rg.Title,{children:e.title}),w.jsx(Rg.Subtitle,{children:e.subtitle?e.subtitle:""}),e.items?w.jsx(Rg.Text,{children:w.jsx("div",{children:w.jsx("ul",{children:e.items.map((t,n)=>w.jsx("li",{children:t},n))})})}):""]})})})}function wBe(){return w.jsx(Ffe,{xs:1,md:3,className:"g-2",children:_Be.map((e,t)=>w.jsx(GH,{children:w.jsx(bBe,{obj:e},t)},t))})}function SBe(){return w.jsxs("div",{className:"bg-light rounded-4 p-3",children:[w.jsx("h4",{children:"Background"}),w.jsxs("p",{children:["The India NFHS surveys are constructed to be representative at national, province and district level for most of the indicators. In the case of rare events indicators such as stillbirth rates, or where more sophisticated estimation methods were needed such as mortality rates (child and neonatal mortality rates), indicators were constructed and mapped at district level using the surveys. Specifically, for four indicators named, unsafe abortion, neonatal mortality rate, child mortality rate and stillbirth rate we used a two-step approach: ",w.jsx("b",{children:"Step 1"}),". We followed the methods described in Subramaniam et al. (2021) and Ulahannan et al. (2022) to match the 2015-16 NFHS-4 data to 2019-21 NFHS-5 boundaries (ICF. The Demographic and Health Surveys Program Spatial Data Repository), in order to be able to compare changing districts over time; ",w.jsx("b",{children:"Step 2"}),". Once all data were available at NFHS-5 boundaries, we rasterised the data for the whole country and then aggregated the data using the district level official boundaries of India (Ministry of Science and Technology, Government of India), which were used for final display on the online portal. Average values for districts were used for aggregation."]}),w.jsx("p",{children:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available. Since census boundaries aligned with NFHS-4 boundaries, the same two-step approached as described above was applied."}),w.jsx("p",{children:"While the surveys were designed to be representative at the district level, caution is advised in interpreting and utilizing the findings due to the inherent limitations posed by small sample sizes for the mentioned indicators"}),w.jsx("p",{children:"Furthermore, it is important to note that the indicators discussed herein are rare events, further emphasizing the need for careful consideration and caution in their interpretation, given the limited sample sizes at the district level."}),w.jsx("h5",{children:"Step 1. Harmonising boundaries from round 1 (NFHS-4) to round 2 (NFHS-5) to match round 2 (NFHS-5)"}),w.jsx("p",{children:"The administrative boundaries of India for the year 2015-2016 (NFHS-4) count a total of 640 districts while the administrative boundaries of India for the year 2019-2021 (NFHS-5) count a total of 707 districts (67 additional districts) (ICF. The Demographic and Health Surveys Program Spatial Data Repository). However, there are 36 states in both years with changes. The boundary changes begin with the addition of new states and the removal of some states, for example, at the state level, a new state Ladakh was created in 2019-2021 from Jammu and Kashmir, as shown in Figure 1 below."}),w.jsx(Dh,{src:pBe,label:"dissagregation",number:"1",width:"600px",caption:"States dissagregation example"}),w.jsx("p",{children:"Meanwhile, Dadra and Nagar Haveli and Daman and Diu, two distinct states have now merged to form a new state called Dadra & Nagar Haveli & Daman & Diu as shown below in Figure 2."}),w.jsx(Dh,{src:hBe,label:"aggregation",number:"2",width:"550px",caption:"States agregation example"}),w.jsx("p",{children:"For the additional 67 districts, data from NFHS-4 are not available therefore, to be able to compare changes in indicators aggregated at the district level, we applied a simple methodology to harmonize geographical boundaries across the two time periods and assign the corresponding indicator value following Subramaniam et al. (2021) and Ulahannan et al. (2022). The methodology that we applied involves re-assigning indicators' values calculated from NFHS-4 data to all the 2019-21 NFHS-5 districts. This approach therefore does not make any alterations to the 2019-21 NFHS-5 data that are reported at the district level."}),w.jsx("p",{children:"The newly created 67 districts were formed from one or more districts included in the NFHS-4 dataset and can be divided into two different categories: type 1 and type 2. Type 1 districts (55 districts) were formed by altering the boundaries of one single district from 2015-16 NFHS-4 administrative boundaries and creating one new district. In comparison, type 2 districts (12 districts) were formed by adding geographical units from two or more parent districts. For the type 1 districts formed from one single parent district we assigned the same indicator's value as the parent district (Figure 3 and Table 1)"}),w.jsx(Dh,{src:mBe,label:"type1",number:"3",width:"400px",caption:"Example of type 1 districts (Assam State)"}),w.jsx("p",{children:"In the example above the type 1 districts Biswanath and Hojai were formed from the parent district Sonitpur and Nagaon, respectively. For example, to calculate the NFHS-5 Unsafe abortion values, the new district (Biswanath) takes the same value for its parent district (Sonitpur). The same is applicable to the 95% Lower and Upper Confidence Intervals (CI) as shown in the table below:"}),w.jsxs("div",{id:"table1",className:"px-5",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("b",{children:"Table 1."})," Example of indicator's value assignment for type 1 districts"]}),w.jsxs(Kh,{hover:!0,striped:"columns",children:[w.jsxs("thead",{children:[w.jsxs("tr",{children:[w.jsx("td",{}),w.jsx("td",{colSpan:4,className:"text-center",children:"Unsafe Abortion Value"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"District"}),w.jsx("td",{children:"NFHS-4 (mean)"}),w.jsx("td",{children:"NFHS-4 (lower CI)"}),w.jsx("td",{children:"NFHS-4 (upper CI)"}),w.jsx("td",{children:"NFHS-5 (mean)"})]})]}),w.jsxs("tbody",{children:[w.jsxs("tr",{children:[w.jsx("td",{children:"Sonitpur"}),w.jsx("td",{children:"21.3"}),w.jsx("td",{children:"8.8"}),w.jsx("td",{children:"43.0"}),w.jsx("td",{children:"35.9"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"Biswanath"}),w.jsx("td",{children:"21.3"}),w.jsx("td",{children:"8.8"}),w.jsx("td",{children:"43.0"}),w.jsx("td",{children:"35.9"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"*Sonitpur"}),w.jsx("td",{children:"21.3"}),w.jsx("td",{children:"8.8"}),w.jsx("td",{children:"43.0"}),w.jsx("td",{children:"35.9"})]})]}),w.jsx("tfoot",{children:w.jsx("tr",{children:w.jsx("td",{colSpan:5,children:"Notes: *Sonitpur is the altered version of Sonitpur from NFHS-4 after Biswanath was created from it."})})})]})]}),w.jsx("p",{children:"For type 2 districts, which were formed by adding areas from two or more parent districts, we assigned the average indicator's value of the respective parent district (Figure 4 and Table 2)."}),w.jsx(Dh,{src:gBe,label:"type2",number:"4",width:"450px",caption:"Example of type 2 districts (Gujarat State)"}),w.jsx("p",{children:"In the example above the type 2 district Botad was formed from the parent districts Ahmadabad and Bhavnagar."}),w.jsxs("div",{id:"table2",className:"px-5",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("b",{children:"Table 2."})," Example of indicator's value assignment for type 2 districts"]}),w.jsxs(Kh,{hover:!0,striped:"columns",children:[w.jsxs("thead",{children:[w.jsxs("tr",{children:[w.jsx("td",{}),w.jsx("td",{colSpan:4,className:"text-center",children:"Total Fertility Rate"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"District"}),w.jsx("td",{children:"NFHS-4 (mean)"}),w.jsx("td",{children:"NFHS-4 (lower CI)"}),w.jsx("td",{children:"NFHS-4 (upper CI)"}),w.jsx("td",{children:"NFHS-5 (mean)"})]})]}),w.jsxs("tbody",{children:[w.jsxs("tr",{children:[w.jsx("td",{children:"Ahmadabad"}),w.jsx("td",{children:"0.256"}),w.jsx("td",{children:"0.067"}),w.jsx("td",{children:"0.621"}),w.jsx("td",{children:"0.284"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"Bhavnagar"}),w.jsx("td",{children:"0.000"}),w.jsx("td",{children:"n/a"}),w.jsx("td",{children:"n/a"}),w.jsx("td",{children:"0.000"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"Botad"}),w.jsx("td",{children:"0.128"}),w.jsx("td",{children:"0.067"}),w.jsx("td",{children:"0.621"}),w.jsx("td",{children:"0.000"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"*Ahmadabad"}),w.jsx("td",{children:"0.256"}),w.jsx("td",{children:"0.067"}),w.jsx("td",{children:"0.621"}),w.jsx("td",{children:"1.712"})]}),w.jsxs("tr",{children:[w.jsx("td",{children:"*Bhavnagar"}),w.jsx("td",{children:"0.000"}),w.jsx("td",{children:"0.067"}),w.jsx("td",{children:"0.621"}),w.jsx("td",{children:"1.794"})]})]}),w.jsxs("tfoot",{children:[w.jsx("tr",{children:w.jsx("td",{colSpan:5,children:"Notes: *Ahmadabad and *Bhavnagar are the altered versions of Ahmadabad and Bhavnagar from NFHS-4 after Botad was created from it."})}),w.jsx("tr",{children:w.jsx("td",{colSpan:5,children:"n/a = not applicable, only *Ahmadabad and *Bhavnagar are part of NFHS-5"})})]})]})]}),w.jsx("p",{children:"Out of 36 states, 22 states have neither type 1 nor type 2 boundaries, these states are listed below with their numbers of unchanging district boundaries, that is, same number of boundaries in 2015-16 and 2019-21 (Table 3)."}),w.jsxs("div",{id:"table3",className:"px-5",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("b",{children:"Table 3."})," Number of districts in each state in 2019-21"]}),w.jsxs(Kh,{hover:!0,striped:"columns",size:"lg",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("td",{children:"No."}),w.jsx("td",{children:"State"}),w.jsx("td",{children:"Total Districts in 2019-2021"})]})}),w.jsx("tbody",{children:vBe.map((e,t)=>w.jsxs("tr",{children:[w.jsx("td",{children:t+1}),w.jsx("td",{children:e.State}),w.jsx("td",{children:e.Count})]},t))}),w.jsx("tfoot",{children:w.jsxs("tr",{style:{fontWeight:"bold"},children:[w.jsx("td",{colSpan:2,children:"SUM"}),w.jsx("td",{children:"307"})]})})]})]}),w.jsx("p",{children:"These constitute 307 out of 707 districts that have not changed boundaries to either type 1 or type 2. The remaining 400 districts fall within 14 states, and all have type 1 districts, the only states without type 2 district boundaries are Assam, Chhattisgarh, Haryana, Madhya Pradesh, Maharashtra, Meghalaya, Punjab, Tripura, and West Bengal states."}),w.jsx("p",{children:"The following are the number of type 1 and type 2 districts with the total districts in each respective year, stating the number of new districts created in each state (Table 4)."}),w.jsxs("div",{id:"table4",className:"px-5",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("b",{children:"Table 4."})," Number of districts in each state in 2019-21"]}),w.jsxs(Kh,{hover:!0,striped:"columns",size:"lg",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("td",{children:"No."}),w.jsx("td",{children:"State"}),w.jsx("td",{children:"Type-1 Districts"}),w.jsx("td",{children:"Type-2 Districts"}),w.jsx("td",{children:"Total Districts in 2015-2016"}),w.jsx("td",{children:"Total Districts in 2019-2021"}),w.jsx("td",{children:"New Districts"})]})}),w.jsx("tbody",{children:xBe.map((e,t)=>w.jsxs("tr",{children:[w.jsx("td",{children:t+1}),w.jsx("td",{children:e.State}),w.jsx("td",{children:e.Type1}),w.jsx("td",{children:e.Type2}),w.jsx("td",{children:e.Count15}),w.jsx("td",{children:e.Count19}),w.jsx("td",{children:e.New})]},t))}),w.jsx("tfoot",{children:w.jsxs("tr",{style:{fontWeight:"bold"},children:[w.jsx("td",{colSpan:2,children:"Total"}),w.jsx("td",{}),w.jsx("td",{}),w.jsx("td",{children:"333"}),w.jsx("td",{children:"400"}),w.jsx("td",{children:"67"})]})})]})]}),w.jsx(lx,{className:"mb-3",children:w.jsxs(lx.Item,{eventKey:"0",children:[w.jsx(lx.Header,{children:"Click to show the details on the changes."}),w.jsx(lx.Body,{children:w.jsx(wBe,{})})]})}),w.jsx("h5",{children:"Step 2. Rasterization and harmonisation to national official boundaries to enable over time comparisons"}),w.jsx("p",{children:"With indicator values for the 707 NFHS-5 districts in table format, these are joined to the NFHS-5 district boundary shapefile using a common attribute (State_District). For each indicator and confidence intervals within the joined table, the shapefile is rasterized, to match the raster properties (coordinate system, cell size and grid alignment) derived from a common mastergrid of the national boundaries (WorldPop et al, 2018). The rasterized indicator values are then summarized using the district level official boundaries of India (Ministry of Science and Technology, Government of India) by using a GIS tool that calculates the zonal statistics using R (2021) software. This produces statistics (mean and median) from all the raster cells that sit within each district boundary so that indicator values are generated for each of the 742 districts. Medians were used to summarise the indicators of interest. This outputted table can be exported as a csv file or shapefile. A flowchart of the steps can be found in Figure 5."}),w.jsx(Dh,{src:yBe,label:"flowchart",number:"5",caption:"Flowchart illustrating the process of convering indicator values from NFHS-5 district boundaries to official distric boundaries"}),w.jsxs("div",{id:"reference",children:[w.jsx("h4",{children:"Reference"}),w.jsxs("ul",{children:[w.jsx("li",{id:"subramaniam2021",children:"Subramaniam SV, Kumar A, Tripathi N. Geographic insights lab. NFHS policy Tracker for districts. Cambridge, USA: Harvard Center for Population and Development Studies and Center for Geographic Analysis at Harvard, 2021."}),w.jsx("li",{id:"ulahannan2022",children:w.jsx("a",{href:"https://gh.bmj.com/content/7/4/e007798.abstract",target:"_blank",children:'Ulahannan, Sabu Kochupurackal, et al. "Alarming level of severe acute malnutrition in Indian districts. BMJ global health 7.4 (2022): e007798.'})}),w.jsx("li",{id:"worldpop2018",children:w.jsx("a",{href:"https://hub.worldpop.org/geodata/summary?id=29691",target:"_blank",children:"WorldPop (www.worldpop.org - School of Geography and Environmental Science, University of Southampton; Department of Geography and Geosciences, University of Louisville; Departement de Geographie, Universite de Namur) and Center for International Earth Science Information Network (CIESIN), Columbia University (2018). Global High Resolution Population Denominators Project - Funded by The Bill and Melinda Gates Foundation (OPP1134076). https://hub.worldpop.org/geodata/summary?id=29691 . [Accessed 09 January 2023]."})}),w.jsx("li",{id:"rcoreteam2021",children:w.jsx("a",{href:"https://R-project.org",target:"_blank",children:"R Core Team (2021). R: A language and environment for statistical. computing. R Foundation for Statistical Computing, Vienna, Austria"})})]})]}),w.jsx("br",{}),w.jsx("hr",{}),w.jsx("h4",{children:"."})]})}function CBe(){return w.jsxs("div",{className:"bg-light rounded-4 p-3",children:[w.jsx("h4",{children:"Background"}),w.jsxs("div",{id:"reference",children:[w.jsx("h4",{children:"Reference"}),w.jsx("ul",{children:w.jsx("li",{id:"worldpop2018",children:w.jsx("a",{href:"https://hub.worldpop.org/geodata/summary?id=29691",target:"_blank",children:"WorldPop (www.worldpop.org - School of Geography and Environmental Science, University of Southampton; Department of Geography and Geosciences, University of Louisville; Departement de Geographie, Universite de Namur) and Center for International Earth Science Information Network (CIESIN), Columbia University (2018). Global High Resolution Population Denominators Project - Funded by The Bill and Melinda Gates Foundation (OPP1134076). https://hub.worldpop.org/geodata/summary?id=29691 . [Accessed 09 January 2023]."})})})]}),w.jsx("br",{}),w.jsx("hr",{}),w.jsx("h4",{children:"."})]})}function EBe(){const e=["India","Kenya"],t={India:SBe(),Kenya:CBe()};return w.jsxs("div",{className:"bg-light rounded-4 p-3",children:[w.jsx("h2",{children:"Technical Note 1"}),w.jsx("h3",{children:"Managing over time changing boundaries and harmonising boundaries from round 1 to round 2 and national official boundaries to enable over time comparisons"}),w.jsx("hr",{}),w.jsx(GW,{className:"mb-3",children:e.map((n,i)=>w.jsx(p_,{eventKey:n,title:n,children:t[n]},i))})]})}function kBe(){return w.jsxs("div",{className:"bg-light rounded-4 p-3",children:[w.jsx("h2",{children:"Technical Note 2"}),w.jsx("h3",{children:"Exceedance Probability and Confidence in Changes Over Time"}),w.jsx("hr",{}),w.jsx("h4",{children:"Background"}),w.jsx("p",{children:"We have produced 5x5km high-resolution (also referred to as grid level) prediction and uncertainty maps illustrating changes over time for health and development indicators within specific subnational areas, such as districts or similar administrative divisions varying by country. Our methodology relies on data from the two most recent rounds of the nationally representative Demographic and Health Surveys (DHS), which are available at the cluster level, and mapped through GPS coordinates of the cluster centres. In the case of India, we utilised the National Family Health Surveys (NFHS), specifically NFHS-4 (2015-16) denoted as Round 1, and NFHS-5 (2019-22) denoted as Round 2. Measuring changes between these survey rounds allows us to track and assess the progress of the health and development indicators over time"}),w.jsx("p",{children:"To ensure the reliability of our estimates of the changes within each subnational area, we employed exceedance probability to quantify our confidence in these observed changes. Exceedance probability, commonly applied in environmental and risk analysis Richards et al., 2014, assesses the likelihood of an event surpassing a specific limit within a defined period (Soch, 2020). In simpler terms, exceedance probability helps us assess potential improvements or worsening of our health and development indicators. We express this likelihood as a percentage, indicating the probability of an indicator exceeding our defined threshold. For this work, we use the statistical significance levels of 90% (likely), 95% (highly likely), and 99% (almost certain)."}),w.jsx("h4",{children:"Outline"}),w.jsx("p",{children:'We outline the entire process of implementing and applying exceedance probability using the indicator "Percentage of women who had 4 or more antenatal visits" (ANC4+) in India as an example. For India, the subnational areas are the districts. This outline unfolds in three main steps: (1) preparation, (2) implementation, and (3) application. Further detail can be found in the Methods section.'}),w.jsxs("div",{className:"border border-secondary rounded-4 p-3 mb-4",children:[w.jsx("h5",{children:"Preparation"}),w.jsxs("ol",{children:[w.jsx("li",{children:"Sample grid-level estimates from the posterior distributions of the models. These models, processed through the Integrated Nested Laplace Approximation  Stochastic Partial Differential Equation method (INLA-SPDE) (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013), pertain to the two rounds of survey data for ANC4+."}),w.jsx("li",{children:"Derive grid-level change estimate samples by calculating the difference between the grid-level estimate samples of Round 2 and Round 1."}),w.jsx("li",{children:"Aggregate the grid level change estimate samples to the subnational level, specifically at the district level, to obtain district level change estimate samples (see Figure 1a)."})]}),w.jsx("h5",{children:"Implementation"}),w.jsxs("ol",{children:[w.jsx("li",{children:"The district level change estimate samples can be depicted using an empirical cumulative density function (ECDF) (Dekking et al., 2005). The ECDF offers insights into the probability, given the data, that the true change is equal to or less than a specified value. It derives from the proportion of samples that are equal to or less than the specified value. For change in ANC4+, we are interested in the district estimate value zero, because we want to observe where there have been meaningful improvements for ANC4+."}),w.jsx("li",{children:"The ECDF at zero for each district indicates the proportion of samples equal to or less than zero. This informs us of the probability, given the data, that the true change is less than or equal to zero."}),w.jsx("li",{children:"The complement of the ECDF at zero, calculated as 1 - ECDF(0), tells us the proportion of samples greater than zero. This provides the probability, given the data, that the true change is greater than zero (see Figure 1b)."})]}),w.jsx("h5",{children:"Application"}),w.jsx("div",{children:w.jsxs("ol",{children:[w.jsx("li",{children:"To ensure a high level of certainty (95% certain) that district level estimates are greater than zero, compare the probability (or proportion) obtained with 95% (or 0.95). Adjust the slider in the Portal to highlight districts where improvements are highly certain (95% certain)."}),w.jsx("li",{children:"Conversely, if the probability (or proportion) is below 95% (less than 0.95), it indicates a lack of high certainty (95% certain) regarding meaningful improvements in those districts."}),w.jsx("li",{children:"Steps 1 and 2 can be repeated for various certainty levels (see Figure 1c)."})]})}),w.jsx("br",{}),w.jsx(Dh,{src:dBe,label:"fig-exceedance",number:"1",caption:"Workflow highlighting some of the key steps of the process described in the Outline for implementing and applying exceedance probability using the indicator ANC4+ in selected districts in India. Panel (a) links to Step 1.3 in the Outline and shows the samples of district level estimates for the change over time between NFHS-4 (Round 1) and NFHS-5 (Round2) for the ANC4+ indicator in the state of Odisha, India. Panel (b) links to Step 2.3 in the Outline and shows the histograms and proportions of samples for estimates of change over time in two districts within the state of Odisha, India. Panel (c) links to Step 3 in the Outline and is a visual representation of how changing significance levels affect the confidence (uncertainty) around the estimated improvement of ANC4+ over time for the selected districts."})]}),w.jsx("h4",{children:"Methods"}),w.jsx("p",{children:"In examining changes in ANC4, we employed the statistical method INLA-SPDE to estimate ANC4+ values. This method generates best estimations (posterior distributions) based on available data, enabling us to predict potential ANC4 values. By comparing these values across different survey rounds, we obtain samples representing changes at grid and district levels."}),w.jsx("p",{children:"To ensure reliability in these estimates, we utilised the ECDF. The ECDF visually represents the likelihood of observing specific changes in ANC4+. For example, the ECDF at zero indicates the likelihood of observing changes equal to or less than zero in ANC4+. Its complement, calculated as 1 minus the ECDF value at zero, informs us about the probability, given the data, of observing changes greater than zero (see Figure 1c). We then apply this information by comparing probabilities from the ECDF at zero against a 95% threshold, illustrated in Figure 1d, to highlight districts where improvements are highly certain (95% certain)."}),w.jsx("h4",{children:"Conclusion"}),w.jsx("p",{children:"Our utilisation of exceedance probability establishes a robust framework for interpreting changes over time, offering critical insights into trends and the potential for achieving significant improvements within specified timeframes. For example, assessing the exceedance probability associated with the prevalence of stunting provides valuable insights into the reduction of stunting over time. This methodology empowers policymakers by providing a credible assessment of trends, enabling informed decisions for effective interventions."}),w.jsxs("div",{id:"reference",children:[w.jsx("h4",{children:"Reference"}),w.jsxs("ul",{children:[w.jsx("li",{id:"dekking2005",children:w.jsx("a",{href:"https://link.springer.com/book/10.1007/1-84628-168-7",target:"_blank",children:"Dekking, F. M., Kraaikamp, C., Lopuha, H. P., & Meester, L. E. (2005). A Modern Introduction to Probability and Statistics: Understanding why and how (Vol. 488). London: springer."})}),w.jsx("li",{id:"lindgren2011",children:w.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",target:"_blank",children:"Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498."})}),w.jsx("li",{id:"martins2013",children:w.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",target:"_blank",children:"Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83."})}),w.jsx("li",{id:"richards2014",children:w.jsx("a",{href:"https://doi.org/10.1016/j.sste.2014.08.002",target:"_blank",children:"Richards, K. K., Hazelton, M. L., Stevenson, M. A., Lockhart, C. Y., Pinto, J., & Nguyen, L. (2014). Using exceedance probabilities to detect anomalies in routinely recorded animal health data, with particular reference to foot-and-mouth disease in Viet Nam. Spatial and Spatio-Temporal Epidemiology, 11, 125-133."})}),w.jsx("li",{id:"rue2009",children:w.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",target:"_blank",children:"Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392."})}),w.jsx("li",{id:"soch2020",children:w.jsx("a",{href:"https://statproofbook.github.io/D/prob-exc.html",target:"_blank",children:"Soch, J. (2020). Definition: Exceedance probability. The Book of Statistical Proofs."})})]})]}),w.jsx("br",{}),w.jsx("hr",{}),w.jsx("h4",{children:"."})]})}function RBe(){return w.jsxs("div",{className:"bg-light rounded-4 p-3",children:[w.jsx("h2",{children:"About"}),w.jsx("hr",{}),w.jsx("p",{children:"This web application presents a summary of family health conditions at subnational scales. Multiple indicators are presented in map, chart, and tabulated form."}),w.jsx("h3",{children:"Methods"}),w.jsx("p",{children:"The estimates presented in this portal are the result of a standard modelling approach for estimating high resolution maps and there may be deviations from aggregated measures published elsewhere."}),w.jsxs("p",{children:["For more information, please refer to the related previously published work here: ",w.jsx("a",{href:"https://doi.org/10.1038/s41597-023-01961-2",target:"_blank",children:"Pezzulo et al. (2023)"}),"."]}),w.jsx("h3",{children:"Disclaimer"}),w.jsx("p",{children:"Maps used on this website are for general illustration only, and are not intended to be used for reference purposes."}),w.jsx("p",{children:"The representation of political boundaries does not necessarily reflect the organization's view on the legal status of a country or territory."}),w.jsx("p",{children:"In certain areas of Northern India, including Leh in Ladakh and areas of Jammu and Kashmir State, there was a lack of survey data and ancillary covariates for modelling. Predictions were generated for specific portions of the districts in the North, as seen in the gridded maps.  Aggregates at the state and district level are based only on the portions of the areas for which ancillary covariates were available. The entire area is assigned the same value as the portions where predictions were made."}),w.jsx("h3",{children:"Acknowledgement"}),w.jsxs("ul",{children:[w.jsxs("li",{children:["Administrative Boundary of India: Ministry of Science and Technology, Government of India. Survey of India. Online Maps Portal. Administrative Boundary Database (",w.jsx("a",{href:"https://onlinemaps.surveyofindia.gov.in/Digital_Product_Show.aspx",children:"OVSF/1M/7"}),"). Accessed 09 January 2023."]}),w.jsx("li",{children:"NFHS-4 data: International Institute for Population Sciences (IIPS) and ICF. 2017. National Family Health Survey (NFHS-4), 2015-16: India. Mumbai: IIPS."}),w.jsx("li",{children:"NFHS-5 data: International Institute for Population Sciences (IIPS) and ICF. 2021. National Family Health Survey (NFHS-5), India, 2019-21: India. Mumbai: IIPS."})]})]})}const TBe="/ciff_portal/assets/guide-1-EhbKg05e.png",ABe="/ciff_portal/assets/guide-2-8HN-tZB0.png",FBe="/ciff_portal/assets/guide-3-pPt52UQw.png";function MBe(){return w.jsxs("div",{className:"bg-light rounded-4 p-3",children:[w.jsx("h2",{children:"Guide"}),w.jsx("hr",{}),w.jsx("div",{className:"row",children:w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-lg-5 pb-3",children:w.jsxs("div",{className:"row",children:[w.jsxs("div",{className:"pb-3",children:[w.jsx("h4",{children:"Basic Usage"}),w.jsxs("ol",{children:[w.jsx("li",{children:"Select a country and indicator to display. A subnational map of the indicator will be displayed on the left."}),w.jsx("li",{children:"By default, indicator value from the Round 2 survey is displayed on the map."}),w.jsxs("ul",{children:[w.jsxs("li",{children:["Click ",w.jsx("kbd",{children:"Round 1"})," to see the value from the Round 1 survey."]}),w.jsxs("li",{children:["Click ",w.jsx("kbd",{children:"Change"})," to see the difference between the values from two rounds."]}),w.jsxs("li",{children:["Click ",w.jsx("kbd",{children:"Grid Level"})," to load the grid level data (5x5 km)."]})]}),w.jsxs("li",{children:["Click ",w.jsx("i",{className:"pi pi-plus-circle"})," or ",w.jsx("i",{className:"pi pi-minus-circle"})," to zoom-in or zoom-out the map. Click ",w.jsx("i",{className:"pi pi-home"})," to reset the map view."]}),w.jsx("li",{children:"Select an administrative unit by clicking any region on the map."}),w.jsx("li",{children:"Chart and tabulated data for the selected unit is displayed on the right. The data can be sorted according to the sub-unit name or the indicator values."}),w.jsxs("li",{children:["By clicking ",w.jsx("i",{className:"pi pi-arrow-circle-right"}),", the aggregated values of all indicators from the selected unit can be displayed."]}),w.jsxs("li",{children:["Throughout the site, additional information can be accessed by hovering over or clicking on the ",w.jsx("i",{className:"pi pi-question-circle"})," icon where available."]}),w.jsxs("li",{children:["For a selected number of indicators, additional technical information were created. ",w.jsx("a",{href:"#/technote-1",children:"Technical Note 1"}),' about "Managing over time changing boundaries and harmonising boundaries from round 1 (NFHS4) to round 2 (NFHS-5) and national official boundaries to enable over time comparisons" can be accessed here and through the drop-down menu on the top right bar of this site.']})]})]}),w.jsxs("div",{children:[w.jsx("h4",{children:"Filtering by change"}),w.jsxs("ol",{start:9,children:[w.jsx("li",{children:"If the underlying dataset is statistically sufficient to estimate the significance in change between rounds, 'Filtering by change' can be performed."}),w.jsx("li",{children:"Use the dropdown to display subnational units with significant improvement or worsening through time for the selected indicator. This allows the user to choose the probability that there is meaningful improvement/worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),w.jsxs("li",{children:["Additional information can be found by clicking on the ",w.jsx("i",{className:"pi pi-question-circle"})," icon on top of the change significance slider."]}),w.jsxs("li",{children:["An illustration and ",w.jsx("a",{href:"#/technote-2",children:"Technical Note 2"}),' providing details on "Exceedance Probability and Confidence in Changes Over Time" can be accessed from here and also by using the drop-down "Technical Note" menu on the top right bar of this site.']})]})]})]})}),w.jsxs("div",{className:"col-lg-7 text-center",children:[w.jsx("img",{alt:"guide",src:TBe,width:"100%"}),w.jsx("img",{alt:"guide",src:ABe,width:"98%"}),w.jsx("img",{alt:"guide",src:FBe,width:"98%"})]})]})})]})}function NBe(){return w.jsx(vse,{children:w.jsx(gse,{children:w.jsxs(rl,{path:"/",element:w.jsx(PBe,{}),exact:!0,children:[w.jsx(rl,{index:!0,element:w.jsx(AR,{})}),w.jsx(rl,{path:":country",element:w.jsx(AR,{}),children:w.jsx(rl,{path:":indicator",element:w.jsx(AR,{})})}),w.jsx(rl,{path:"about",element:w.jsx(RBe,{})}),w.jsx(rl,{path:"guide",element:w.jsx(MBe,{})}),w.jsx(rl,{path:"technote-1",element:w.jsx(C8,{which:"boundary"})}),w.jsx(rl,{path:"technote-2",element:w.jsx(C8,{which:"change"})})]})})})}function PBe(){return w.jsxs("div",{children:[w.jsx("div",{className:"shadow mb-2",children:w.jsx("div",{className:"container-xl px-2",children:w.jsxs(fx,{expand:"md",children:[w.jsx(fx.Toggle,{}),w.jsx(fx.Collapse,{children:w.jsxs(yf,{children:[w.jsxs(yf.Link,{href:"./",children:[w.jsx("i",{className:"pi pi-home mx-1"}),"Home"]}),w.jsxs(yf.Link,{href:"#/about",children:[w.jsx("i",{className:"pi pi-info-circle mx-1"}),"About"]}),w.jsxs(yf.Link,{href:"#/guide",children:[w.jsx("i",{className:"pi pi-question-circle mx-1"}),"Guide"]}),w.jsxs(JE,{title:w.jsxs("span",{children:[w.jsx("i",{className:"pi pi-question-circle mx-1"}),"Technical Note"]}),children:[w.jsx(JE.Item,{href:"#/technote-1",children:"Technical Note 1"}),w.jsx(JE.Item,{href:"#/technote-2",children:"Technical Note 2"})]})]})}),w.jsx(fx,{className:"justify-content-end",children:w.jsx(yf,{children:w.jsxs(yf.Link,{href:"/temporary/",children:[w.jsx("i",{className:"pi pi-sign-out mx-1"}),"Logout"]})})})]})})}),w.jsx("div",{className:"container-xl px-2",style:{paddingBottom:"50px"},children:w.jsx(pse,{})}),w.jsxs("div",{className:"shadow fixed-bottom p-2 justify-content-end",children:[" 2024 ",w.jsx("a",{href:"https://sdi.worldpop.org",children:"WorldPop SDI"})]})]})}FR.createRoot(document.getElementById("root")).render(w.jsx(Pt.StrictMode,{children:w.jsx(NBe,{})}));
