function yie(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var v8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Td(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function x8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var _8={exports:{}},n2={},b8={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=Symbol.for("react.element"),vie=Symbol.for("react.portal"),xie=Symbol.for("react.fragment"),_ie=Symbol.for("react.strict_mode"),bie=Symbol.for("react.profiler"),wie=Symbol.for("react.provider"),Sie=Symbol.for("react.context"),Cie=Symbol.for("react.forward_ref"),Eie=Symbol.for("react.suspense"),kie=Symbol.for("react.memo"),Rie=Symbol.for("react.lazy"),$L=Symbol.iterator;function Tie(e){return e===null||typeof e!="object"?null:(e=$L&&e[$L]||e["@@iterator"],typeof e=="function"?e:null)}var w8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S8=Object.assign,C8={};function pm(e,t,n){this.props=e,this.context=t,this.refs=C8,this.updater=n||w8}pm.prototype.isReactComponent={};pm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function E8(){}E8.prototype=pm.prototype;function oF(e,t,n){this.props=e,this.context=t,this.refs=C8,this.updater=n||w8}var aF=oF.prototype=new E8;aF.constructor=oF;S8(aF,pm.prototype);aF.isPureReactComponent=!0;var IL=Array.isArray,k8=Object.prototype.hasOwnProperty,sF={current:null},R8={key:!0,ref:!0,__self:!0,__source:!0};function T8(e,t,n){var i,r={},o=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)k8.call(t,i)&&!R8.hasOwnProperty(i)&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return{$$typeof:fv,type:e,key:o,ref:a,props:r,_owner:sF.current}}function Aie(e,t){return{$$typeof:fv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lF(e){return typeof e=="object"&&e!==null&&e.$$typeof===fv}function Mie(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var OL=/\/+/g;function pE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mie(""+e.key):t.toString(36)}function Kx(e,t,n,i,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fv:case vie:a=!0}}if(a)return a=e,r=r(a),e=i===""?"."+pE(a,0):i,IL(r)?(n="",e!=null&&(n=e.replace(OL,"$&/")+"/"),Kx(r,t,n,"",function(u){return u})):r!=null&&(lF(r)&&(r=Aie(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(OL,"$&/")+"/")+e)),t.push(r)),1;if(a=0,i=i===""?".":i+":",IL(e))for(var s=0;s<e.length;s++){o=e[s];var l=i+pE(o,s);a+=Kx(o,t,n,l,r)}else if(l=Tie(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=i+pE(o,s++),a+=Kx(o,t,n,l,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function U1(e,t,n){if(e==null)return e;var i=[],r=0;return Kx(e,i,"","",function(o){return t.call(n,o,r++)}),i}function Fie(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var br={current:null},Jx={transition:null},Pie={ReactCurrentDispatcher:br,ReactCurrentBatchConfig:Jx,ReactCurrentOwner:sF};Pt.Children={map:U1,forEach:function(e,t,n){U1(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return U1(e,function(){t++}),t},toArray:function(e){return U1(e,function(t){return t})||[]},only:function(e){if(!lF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pt.Component=pm;Pt.Fragment=xie;Pt.Profiler=bie;Pt.PureComponent=oF;Pt.StrictMode=_ie;Pt.Suspense=Eie;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pie;Pt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=S8({},e.props),r=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=sF.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)k8.call(t,l)&&!R8.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}return{$$typeof:fv,type:e.type,key:r,ref:o,props:i,_owner:a}};Pt.createContext=function(e){return e={$$typeof:Sie,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wie,_context:e},e.Consumer=e};Pt.createElement=T8;Pt.createFactory=function(e){var t=T8.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:Cie,render:e}};Pt.isValidElement=lF;Pt.lazy=function(e){return{$$typeof:Rie,_payload:{_status:-1,_result:e},_init:Fie}};Pt.memo=function(e,t){return{$$typeof:kie,type:e,compare:t===void 0?null:t}};Pt.startTransition=function(e){var t=Jx.transition;Jx.transition={};try{e()}finally{Jx.transition=t}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(e,t){return br.current.useCallback(e,t)};Pt.useContext=function(e){return br.current.useContext(e)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(e){return br.current.useDeferredValue(e)};Pt.useEffect=function(e,t){return br.current.useEffect(e,t)};Pt.useId=function(){return br.current.useId()};Pt.useImperativeHandle=function(e,t,n){return br.current.useImperativeHandle(e,t,n)};Pt.useInsertionEffect=function(e,t){return br.current.useInsertionEffect(e,t)};Pt.useLayoutEffect=function(e,t){return br.current.useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return br.current.useMemo(e,t)};Pt.useReducer=function(e,t,n){return br.current.useReducer(e,t,n)};Pt.useRef=function(e){return br.current.useRef(e)};Pt.useState=function(e){return br.current.useState(e)};Pt.useSyncExternalStore=function(e,t,n){return br.current.useSyncExternalStore(e,t,n)};Pt.useTransition=function(){return br.current.useTransition()};Pt.version="18.2.0";b8.exports=Pt;var P=b8.exports;const $t=Td(P),Nie=yie({__proto__:null,default:$t},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $ie=P,Iie=Symbol.for("react.element"),Oie=Symbol.for("react.fragment"),Die=Object.prototype.hasOwnProperty,Lie=$ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jie={key:!0,ref:!0,__self:!0,__source:!0};function A8(e,t,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)Die.call(t,i)&&!jie.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:Iie,type:e,key:o,ref:a,props:r,_owner:Lie.current}}n2.Fragment=Oie;n2.jsx=A8;n2.jsxs=A8;_8.exports=n2;var v=_8.exports,CR={},M8={exports:{}},Co={},F8={exports:{}},P8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,J){var Q=W.length;W.push(J);e:for(;0<Q;){var ae=Q-1>>>1,ge=W[ae];if(0<r(ge,J))W[ae]=J,W[Q]=ge,Q=ae;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var J=W[0],Q=W.pop();if(Q!==J){W[0]=Q;e:for(var ae=0,ge=W.length,ke=ge>>>1;ae<ke;){var pe=2*(ae+1)-1,Se=W[pe],Fe=pe+1,Nt=W[Fe];if(0>r(Se,Q))Fe<ge&&0>r(Nt,Se)?(W[ae]=Nt,W[Fe]=Q,ae=Fe):(W[ae]=Se,W[pe]=Q,ae=pe);else if(Fe<ge&&0>r(Nt,Q))W[ae]=Nt,W[Fe]=Q,ae=Fe;else break e}}return J}function r(W,J){var Q=W.sortIndex-J.sortIndex;return Q!==0?Q:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var J=n(u);J!==null;){if(J.callback===null)i(u);else if(J.startTime<=W)i(u),J.sortIndex=J.expirationTime,t(l,J);else break;J=n(u)}}function k(W){if(y=!1,S(W),!g)if(n(l)!==null)g=!0,q(R);else{var J=n(u);J!==null&&K(k,J.startTime-W)}}function R(W,J){g=!1,y&&(y=!1,b(N),N=-1),m=!0;var Q=h;try{for(S(J),d=n(l);d!==null&&(!(d.expirationTime>J)||W&&!U());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,h=d.priorityLevel;var ge=ae(d.expirationTime<=J);J=e.unstable_now(),typeof ge=="function"?d.callback=ge:d===n(l)&&i(l),S(J)}else i(l);d=n(l)}if(d!==null)var ke=!0;else{var pe=n(u);pe!==null&&K(k,pe.startTime-J),ke=!1}return ke}finally{d=null,h=Q,m=!1}}var M=!1,T=null,N=-1,z=5,H=-1;function U(){return!(e.unstable_now()-H<z)}function X(){if(T!==null){var W=e.unstable_now();H=W;var J=!0;try{J=T(!0,W)}finally{J?B():(M=!1,T=null)}}else M=!1}var B;if(typeof w=="function")B=function(){w(X)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,j=O.port2;O.port1.onmessage=X,B=function(){j.postMessage(null)}}else B=function(){x(X,0)};function q(W){T=W,M||(M=!0,B())}function K(W,J){N=x(function(){W(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,q(R))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(W){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var Q=h;h=J;try{return W()}finally{h=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=h;h=W;try{return J()}finally{h=Q}},e.unstable_scheduleCallback=function(W,J,Q){var ae=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ae+Q:ae):Q=ae,W){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Q+ge,W={id:c++,callback:J,priorityLevel:W,startTime:Q,expirationTime:ge,sortIndex:-1},Q>ae?(W.sortIndex=Q,t(u,W),n(l)===null&&W===n(u)&&(y?(b(N),N=-1):y=!0,K(k,Q-ae))):(W.sortIndex=ge,t(l,W),g||m||(g=!0,q(R))),W},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(W){var J=h;return function(){var Q=h;h=J;try{return W.apply(this,arguments)}finally{h=Q}}}})(P8);F8.exports=P8;var zie=F8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N8=P,yo=zie;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $8=new Set,oy={};function Ad(e,t){Sp(e,t),Sp(e+"Capture",t)}function Sp(e,t){for(oy[e]=t,e=0;e<t.length;e++)$8.add(t[e])}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ER=Object.prototype.hasOwnProperty,Bie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DL={},LL={};function Hie(e){return ER.call(LL,e)?!0:ER.call(DL,e)?!1:Bie.test(e)?LL[e]=!0:(DL[e]=!0,!1)}function Uie(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wie(e,t,n,i){if(t===null||typeof t>"u"||Uie(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wr(e,t,n,i,r,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new wr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new wr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new wr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new wr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new wr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new wr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new wr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new wr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new wr(e,5,!1,e.toLowerCase(),null,!1,!1)});var uF=/[\-:]([a-z])/g;function cF(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uF,cF);Mi[t]=new wr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uF,cF);Mi[t]=new wr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uF,cF);Mi[t]=new wr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new wr(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new wr(e,1,!1,e.toLowerCase(),null,!0,!0)});function fF(e,t,n,i){var r=Mi.hasOwnProperty(t)?Mi[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wie(t,n,r,i)&&(n=null),i||r===null?Hie(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Wl=N8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W1=Symbol.for("react.element"),jh=Symbol.for("react.portal"),zh=Symbol.for("react.fragment"),dF=Symbol.for("react.strict_mode"),kR=Symbol.for("react.profiler"),I8=Symbol.for("react.provider"),O8=Symbol.for("react.context"),hF=Symbol.for("react.forward_ref"),RR=Symbol.for("react.suspense"),TR=Symbol.for("react.suspense_list"),pF=Symbol.for("react.memo"),yu=Symbol.for("react.lazy"),D8=Symbol.for("react.offscreen"),jL=Symbol.iterator;function yg(e){return e===null||typeof e!="object"?null:(e=jL&&e[jL]||e["@@iterator"],typeof e=="function"?e:null)}var Tn=Object.assign,mE;function n0(e){if(mE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);mE=t&&t[1]||""}return`
`+mE+e}var gE=!1;function yE(e,t){if(!e||gE)return"";gE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||r[a]!==o[s]){var l=`
`+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{gE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?n0(e):""}function Gie(e){switch(e.tag){case 5:return n0(e.type);case 16:return n0("Lazy");case 13:return n0("Suspense");case 19:return n0("SuspenseList");case 0:case 2:case 15:return e=yE(e.type,!1),e;case 11:return e=yE(e.type.render,!1),e;case 1:return e=yE(e.type,!0),e;default:return""}}function AR(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zh:return"Fragment";case jh:return"Portal";case kR:return"Profiler";case dF:return"StrictMode";case RR:return"Suspense";case TR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O8:return(e.displayName||"Context")+".Consumer";case I8:return(e._context.displayName||"Context")+".Provider";case hF:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pF:return t=e.displayName||null,t!==null?t:AR(e.type)||"Memo";case yu:t=e._payload,e=e._init;try{return AR(e(t))}catch{}}return null}function qie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AR(t);case 8:return t===dF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vie(e){var t=L8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function G1(e){e._valueTracker||(e._valueTracker=Vie(e))}function j8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=L8(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function O_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function MR(e,t){var n=t.checked;return Tn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zL(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=oc(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z8(e,t){t=t.checked,t!=null&&fF(e,"checked",t,!1)}function FR(e,t){z8(e,t);var n=oc(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?PR(e,t.type,n):t.hasOwnProperty("defaultValue")&&PR(e,t.type,oc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BL(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function PR(e,t,n){(t!=="number"||O_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var i0=Array.isArray;function rp(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+oc(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function NR(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Tn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function HL(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_e(92));if(i0(n)){if(1<n.length)throw Error(_e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oc(n)}}function B8(e,t){var n=oc(t.value),i=oc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function UL(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function H8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $R(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?H8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var q1,U8=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(q1=q1||document.createElement("div"),q1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=q1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ay(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var P0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yie=["Webkit","ms","Moz","O"];Object.keys(P0).forEach(function(e){Yie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),P0[t]=P0[e]})});function W8(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||P0.hasOwnProperty(e)&&P0[e]?(""+t).trim():t+"px"}function G8(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=W8(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var Zie=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IR(e,t){if(t){if(Zie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function OR(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DR=null;function mF(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var LR=null,op=null,ap=null;function WL(e){if(e=pv(e)){if(typeof LR!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=s2(t),LR(e.stateNode,e.type,t))}}function q8(e){op?ap?ap.push(e):ap=[e]:op=e}function V8(){if(op){var e=op,t=ap;if(ap=op=null,WL(e),t)for(e=0;e<t.length;e++)WL(t[e])}}function Y8(e,t){return e(t)}function Z8(){}var vE=!1;function X8(e,t,n){if(vE)return e(t,n);vE=!0;try{return Y8(e,t,n)}finally{vE=!1,(op!==null||ap!==null)&&(Z8(),V8())}}function sy(e,t){var n=e.stateNode;if(n===null)return null;var i=s2(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_e(231,t,typeof n));return n}var jR=!1;if(Nl)try{var vg={};Object.defineProperty(vg,"passive",{get:function(){jR=!0}}),window.addEventListener("test",vg,vg),window.removeEventListener("test",vg,vg)}catch{jR=!1}function Xie(e,t,n,i,r,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var N0=!1,D_=null,L_=!1,zR=null,Kie={onError:function(e){N0=!0,D_=e}};function Jie(e,t,n,i,r,o,a,s,l){N0=!1,D_=null,Xie.apply(Kie,arguments)}function Qie(e,t,n,i,r,o,a,s,l){if(Jie.apply(this,arguments),N0){if(N0){var u=D_;N0=!1,D_=null}else throw Error(_e(198));L_||(L_=!0,zR=u)}}function Md(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function K8(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function GL(e){if(Md(e)!==e)throw Error(_e(188))}function ere(e){var t=e.alternate;if(!t){if(t=Md(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return GL(r),e;if(o===i)return GL(r),t;o=o.sibling}throw Error(_e(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,s=r.child;s;){if(s===n){a=!0,n=r,i=o;break}if(s===i){a=!0,i=r,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=r;break}if(s===i){a=!0,i=o,n=r;break}s=s.sibling}if(!a)throw Error(_e(189))}}if(n.alternate!==i)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?e:t}function J8(e){return e=ere(e),e!==null?Q8(e):null}function Q8(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Q8(e);if(t!==null)return t;e=e.sibling}return null}var e9=yo.unstable_scheduleCallback,qL=yo.unstable_cancelCallback,tre=yo.unstable_shouldYield,nre=yo.unstable_requestPaint,Ln=yo.unstable_now,ire=yo.unstable_getCurrentPriorityLevel,gF=yo.unstable_ImmediatePriority,t9=yo.unstable_UserBlockingPriority,j_=yo.unstable_NormalPriority,rre=yo.unstable_LowPriority,n9=yo.unstable_IdlePriority,i2=null,gs=null;function ore(e){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(i2,e,void 0,(e.current.flags&128)===128)}catch{}}var Fa=Math.clz32?Math.clz32:lre,are=Math.log,sre=Math.LN2;function lre(e){return e>>>=0,e===0?32:31-(are(e)/sre|0)|0}var V1=64,Y1=4194304;function r0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function z_(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~r;s!==0?i=r0(s):(o&=a,o!==0&&(i=r0(o)))}else a=n&~r,a!==0?i=r0(a):o!==0&&(i=r0(o));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Fa(t),r=1<<n,i|=e[n],t&=~r;return i}function ure(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cre(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Fa(o),s=1<<a,l=r[a];l===-1?(!(s&n)||s&i)&&(r[a]=ure(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function BR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function i9(){var e=V1;return V1<<=1,!(V1&4194240)&&(V1=64),e}function xE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fa(t),e[t]=n}function fre(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Fa(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}function yF(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Fa(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var en=0;function r9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var o9,vF,a9,s9,l9,HR=!1,Z1=[],Wu=null,Gu=null,qu=null,ly=new Map,uy=new Map,Eu=[],dre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VL(e,t){switch(e){case"focusin":case"focusout":Wu=null;break;case"dragenter":case"dragleave":Gu=null;break;case"mouseover":case"mouseout":qu=null;break;case"pointerover":case"pointerout":ly.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uy.delete(t.pointerId)}}function xg(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=pv(t),t!==null&&vF(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function hre(e,t,n,i,r){switch(t){case"focusin":return Wu=xg(Wu,e,t,n,i,r),!0;case"dragenter":return Gu=xg(Gu,e,t,n,i,r),!0;case"mouseover":return qu=xg(qu,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return ly.set(o,xg(ly.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,uy.set(o,xg(uy.get(o)||null,e,t,n,i,r)),!0}return!1}function u9(e){var t=Tf(e.target);if(t!==null){var n=Md(t);if(n!==null){if(t=n.tag,t===13){if(t=K8(n),t!==null){e.blockedOn=t,l9(e.priority,function(){a9(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=UR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);DR=i,n.target.dispatchEvent(i),DR=null}else return t=pv(n),t!==null&&vF(t),e.blockedOn=n,!1;t.shift()}return!0}function YL(e,t,n){Qx(e)&&n.delete(t)}function pre(){HR=!1,Wu!==null&&Qx(Wu)&&(Wu=null),Gu!==null&&Qx(Gu)&&(Gu=null),qu!==null&&Qx(qu)&&(qu=null),ly.forEach(YL),uy.forEach(YL)}function _g(e,t){e.blockedOn===t&&(e.blockedOn=null,HR||(HR=!0,yo.unstable_scheduleCallback(yo.unstable_NormalPriority,pre)))}function cy(e){function t(r){return _g(r,e)}if(0<Z1.length){_g(Z1[0],e);for(var n=1;n<Z1.length;n++){var i=Z1[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Wu!==null&&_g(Wu,e),Gu!==null&&_g(Gu,e),qu!==null&&_g(qu,e),ly.forEach(t),uy.forEach(t),n=0;n<Eu.length;n++)i=Eu[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Eu.length&&(n=Eu[0],n.blockedOn===null);)u9(n),n.blockedOn===null&&Eu.shift()}var sp=Wl.ReactCurrentBatchConfig,B_=!0;function mre(e,t,n,i){var r=en,o=sp.transition;sp.transition=null;try{en=1,xF(e,t,n,i)}finally{en=r,sp.transition=o}}function gre(e,t,n,i){var r=en,o=sp.transition;sp.transition=null;try{en=4,xF(e,t,n,i)}finally{en=r,sp.transition=o}}function xF(e,t,n,i){if(B_){var r=UR(e,t,n,i);if(r===null)AE(e,t,i,H_,n),VL(e,i);else if(hre(r,e,t,n,i))i.stopPropagation();else if(VL(e,i),t&4&&-1<dre.indexOf(e)){for(;r!==null;){var o=pv(r);if(o!==null&&o9(o),o=UR(e,t,n,i),o===null&&AE(e,t,i,H_,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else AE(e,t,i,null,n)}}var H_=null;function UR(e,t,n,i){if(H_=null,e=mF(i),e=Tf(e),e!==null)if(t=Md(e),t===null)e=null;else if(n=t.tag,n===13){if(e=K8(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return H_=e,null}function c9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ire()){case gF:return 1;case t9:return 4;case j_:case rre:return 16;case n9:return 536870912;default:return 16}default:return 16}}var Mu=null,_F=null,e_=null;function f9(){if(e_)return e_;var e,t=_F,n=t.length,i,r="value"in Mu?Mu.value:Mu.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[o-i];i++);return e_=r.slice(e,1<i?1-i:void 0)}function t_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function X1(){return!0}function ZL(){return!1}function Eo(e){function t(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?X1:ZL,this.isPropagationStopped=ZL,this}return Tn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=X1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=X1)},persist:function(){},isPersistent:X1}),t}var mm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bF=Eo(mm),hv=Tn({},mm,{view:0,detail:0}),yre=Eo(hv),_E,bE,bg,r2=Tn({},hv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wF,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bg&&(bg&&e.type==="mousemove"?(_E=e.screenX-bg.screenX,bE=e.screenY-bg.screenY):bE=_E=0,bg=e),_E)},movementY:function(e){return"movementY"in e?e.movementY:bE}}),XL=Eo(r2),vre=Tn({},r2,{dataTransfer:0}),xre=Eo(vre),_re=Tn({},hv,{relatedTarget:0}),wE=Eo(_re),bre=Tn({},mm,{animationName:0,elapsedTime:0,pseudoElement:0}),wre=Eo(bre),Sre=Tn({},mm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cre=Eo(Sre),Ere=Tn({},mm,{data:0}),KL=Eo(Ere),kre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Are(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tre[e])?!!t[e]:!1}function wF(){return Are}var Mre=Tn({},hv,{key:function(e){if(e.key){var t=kre[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=t_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rre[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wF,charCode:function(e){return e.type==="keypress"?t_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?t_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fre=Eo(Mre),Pre=Tn({},r2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JL=Eo(Pre),Nre=Tn({},hv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wF}),$re=Eo(Nre),Ire=Tn({},mm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ore=Eo(Ire),Dre=Tn({},r2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lre=Eo(Dre),jre=[9,13,27,32],SF=Nl&&"CompositionEvent"in window,$0=null;Nl&&"documentMode"in document&&($0=document.documentMode);var zre=Nl&&"TextEvent"in window&&!$0,d9=Nl&&(!SF||$0&&8<$0&&11>=$0),QL=" ",e5=!1;function h9(e,t){switch(e){case"keyup":return jre.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bh=!1;function Bre(e,t){switch(e){case"compositionend":return p9(t);case"keypress":return t.which!==32?null:(e5=!0,QL);case"textInput":return e=t.data,e===QL&&e5?null:e;default:return null}}function Hre(e,t){if(Bh)return e==="compositionend"||!SF&&h9(e,t)?(e=f9(),e_=_F=Mu=null,Bh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d9&&t.locale!=="ko"?null:t.data;default:return null}}var Ure={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ure[e.type]:t==="textarea"}function m9(e,t,n,i){q8(i),t=U_(t,"onChange"),0<t.length&&(n=new bF("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var I0=null,fy=null;function Wre(e){k9(e,0)}function o2(e){var t=Wh(e);if(j8(t))return e}function Gre(e,t){if(e==="change")return t}var g9=!1;if(Nl){var SE;if(Nl){var CE="oninput"in document;if(!CE){var n5=document.createElement("div");n5.setAttribute("oninput","return;"),CE=typeof n5.oninput=="function"}SE=CE}else SE=!1;g9=SE&&(!document.documentMode||9<document.documentMode)}function i5(){I0&&(I0.detachEvent("onpropertychange",y9),fy=I0=null)}function y9(e){if(e.propertyName==="value"&&o2(fy)){var t=[];m9(t,fy,e,mF(e)),X8(Wre,t)}}function qre(e,t,n){e==="focusin"?(i5(),I0=t,fy=n,I0.attachEvent("onpropertychange",y9)):e==="focusout"&&i5()}function Vre(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return o2(fy)}function Yre(e,t){if(e==="click")return o2(t)}function Zre(e,t){if(e==="input"||e==="change")return o2(t)}function Xre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oa=typeof Object.is=="function"?Object.is:Xre;function dy(e,t){if(Oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ER.call(t,r)||!Oa(e[r],t[r]))return!1}return!0}function r5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o5(e,t){var n=r5(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r5(n)}}function v9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?v9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x9(){for(var e=window,t=O_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=O_(e.document)}return t}function CF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kre(e){var t=x9(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&v9(n.ownerDocument.documentElement,n)){if(i!==null&&CF(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=o5(n,o);var a=o5(n,i);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jre=Nl&&"documentMode"in document&&11>=document.documentMode,Hh=null,WR=null,O0=null,GR=!1;function a5(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;GR||Hh==null||Hh!==O_(i)||(i=Hh,"selectionStart"in i&&CF(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),O0&&dy(O0,i)||(O0=i,i=U_(WR,"onSelect"),0<i.length&&(t=new bF("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Hh)))}function K1(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Uh={animationend:K1("Animation","AnimationEnd"),animationiteration:K1("Animation","AnimationIteration"),animationstart:K1("Animation","AnimationStart"),transitionend:K1("Transition","TransitionEnd")},EE={},_9={};Nl&&(_9=document.createElement("div").style,"AnimationEvent"in window||(delete Uh.animationend.animation,delete Uh.animationiteration.animation,delete Uh.animationstart.animation),"TransitionEvent"in window||delete Uh.transitionend.transition);function a2(e){if(EE[e])return EE[e];if(!Uh[e])return e;var t=Uh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _9)return EE[e]=t[n];return e}var b9=a2("animationend"),w9=a2("animationiteration"),S9=a2("animationstart"),C9=a2("transitionend"),E9=new Map,s5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tc(e,t){E9.set(e,t),Ad(t,[e])}for(var kE=0;kE<s5.length;kE++){var RE=s5[kE],Qre=RE.toLowerCase(),eoe=RE[0].toUpperCase()+RE.slice(1);Tc(Qre,"on"+eoe)}Tc(b9,"onAnimationEnd");Tc(w9,"onAnimationIteration");Tc(S9,"onAnimationStart");Tc("dblclick","onDoubleClick");Tc("focusin","onFocus");Tc("focusout","onBlur");Tc(C9,"onTransitionEnd");Sp("onMouseEnter",["mouseout","mouseover"]);Sp("onMouseLeave",["mouseout","mouseover"]);Sp("onPointerEnter",["pointerout","pointerover"]);Sp("onPointerLeave",["pointerout","pointerover"]);Ad("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ad("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ad("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ad("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var o0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),toe=new Set("cancel close invalid load scroll toggle".split(" ").concat(o0));function l5(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,Qie(i,t,void 0,e),e.currentTarget=null}function k9(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;l5(r,s,u),o=l}else for(a=0;a<i.length;a++){if(s=i[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;l5(r,s,u),o=l}}}if(L_)throw e=zR,L_=!1,zR=null,e}function hn(e,t){var n=t[XR];n===void 0&&(n=t[XR]=new Set);var i=e+"__bubble";n.has(i)||(R9(t,e,2,!1),n.add(i))}function TE(e,t,n){var i=0;t&&(i|=4),R9(n,e,i,t)}var J1="_reactListening"+Math.random().toString(36).slice(2);function hy(e){if(!e[J1]){e[J1]=!0,$8.forEach(function(n){n!=="selectionchange"&&(toe.has(n)||TE(n,!1,e),TE(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[J1]||(t[J1]=!0,TE("selectionchange",!1,t))}}function R9(e,t,n,i){switch(c9(t)){case 1:var r=mre;break;case 4:r=gre;break;default:r=xF}n=r.bind(null,t,n,e),r=void 0,!jR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function AE(e,t,n,i,r){var o=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var s=i.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;s!==null;){if(a=Tf(s),a===null)return;if(l=a.tag,l===5||l===6){i=o=a;continue e}s=s.parentNode}}i=i.return}X8(function(){var u=o,c=mF(n),d=[];e:{var h=E9.get(e);if(h!==void 0){var m=bF,g=e;switch(e){case"keypress":if(t_(n)===0)break e;case"keydown":case"keyup":m=Fre;break;case"focusin":g="focus",m=wE;break;case"focusout":g="blur",m=wE;break;case"beforeblur":case"afterblur":m=wE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=XL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=xre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$re;break;case b9:case w9:case S9:m=wre;break;case C9:m=Ore;break;case"scroll":m=yre;break;case"wheel":m=Lre;break;case"copy":case"cut":case"paste":m=Cre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=JL}var y=(t&4)!==0,x=!y&&e==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,b!==null&&(k=sy(w,b),k!=null&&y.push(py(w,k,S)))),x)break;w=w.return}0<y.length&&(h=new m(h,g,null,n,c),d.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==DR&&(g=n.relatedTarget||n.fromElement)&&(Tf(g)||g[$l]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Tf(g):null,g!==null&&(x=Md(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=XL,k="onMouseLeave",b="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=JL,k="onPointerLeave",b="onPointerEnter",w="pointer"),x=m==null?h:Wh(m),S=g==null?h:Wh(g),h=new y(k,w+"leave",m,n,c),h.target=x,h.relatedTarget=S,k=null,Tf(c)===u&&(y=new y(b,w+"enter",g,n,c),y.target=S,y.relatedTarget=x,k=y),x=k,m&&g)t:{for(y=m,b=g,w=0,S=y;S;S=yh(S))w++;for(S=0,k=b;k;k=yh(k))S++;for(;0<w-S;)y=yh(y),w--;for(;0<S-w;)b=yh(b),S--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=yh(y),b=yh(b)}y=null}else y=null;m!==null&&u5(d,h,m,y,!1),g!==null&&x!==null&&u5(d,x,g,y,!0)}}e:{if(h=u?Wh(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var R=Gre;else if(t5(h))if(g9)R=Zre;else{R=Vre;var M=qre}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=Yre);if(R&&(R=R(e,u))){m9(d,R,n,c);break e}M&&M(e,h,u),e==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&PR(h,"number",h.value)}switch(M=u?Wh(u):window,e){case"focusin":(t5(M)||M.contentEditable==="true")&&(Hh=M,WR=u,O0=null);break;case"focusout":O0=WR=Hh=null;break;case"mousedown":GR=!0;break;case"contextmenu":case"mouseup":case"dragend":GR=!1,a5(d,n,c);break;case"selectionchange":if(Jre)break;case"keydown":case"keyup":a5(d,n,c)}var T;if(SF)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Bh?h9(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(d9&&n.locale!=="ko"&&(Bh||N!=="onCompositionStart"?N==="onCompositionEnd"&&Bh&&(T=f9()):(Mu=c,_F="value"in Mu?Mu.value:Mu.textContent,Bh=!0)),M=U_(u,N),0<M.length&&(N=new KL(N,e,null,n,c),d.push({event:N,listeners:M}),T?N.data=T:(T=p9(n),T!==null&&(N.data=T)))),(T=zre?Bre(e,n):Hre(e,n))&&(u=U_(u,"onBeforeInput"),0<u.length&&(c=new KL("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}k9(d,t)})}function py(e,t,n){return{instance:e,listener:t,currentTarget:n}}function U_(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=sy(e,n),o!=null&&i.unshift(py(e,o,r)),o=sy(e,t),o!=null&&i.push(py(e,o,r))),e=e.return}return i}function yh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function u5(e,t,n,i,r){for(var o=t._reactName,a=[];n!==null&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===i)break;s.tag===5&&u!==null&&(s=u,r?(l=sy(n,o),l!=null&&a.unshift(py(n,l,s))):r||(l=sy(n,o),l!=null&&a.push(py(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var noe=/\r\n?/g,ioe=/\u0000|\uFFFD/g;function c5(e){return(typeof e=="string"?e:""+e).replace(noe,`
`).replace(ioe,"")}function Q1(e,t,n){if(t=c5(t),c5(e)!==t&&n)throw Error(_e(425))}function W_(){}var qR=null,VR=null;function YR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ZR=typeof setTimeout=="function"?setTimeout:void 0,roe=typeof clearTimeout=="function"?clearTimeout:void 0,f5=typeof Promise=="function"?Promise:void 0,ooe=typeof queueMicrotask=="function"?queueMicrotask:typeof f5<"u"?function(e){return f5.resolve(null).then(e).catch(aoe)}:ZR;function aoe(e){setTimeout(function(){throw e})}function ME(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),cy(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);cy(t)}function Vu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function d5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gm=Math.random().toString(36).slice(2),fs="__reactFiber$"+gm,my="__reactProps$"+gm,$l="__reactContainer$"+gm,XR="__reactEvents$"+gm,soe="__reactListeners$"+gm,loe="__reactHandles$"+gm;function Tf(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$l]||n[fs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=d5(e);e!==null;){if(n=e[fs])return n;e=d5(e)}return t}e=n,n=e.parentNode}return null}function pv(e){return e=e[fs]||e[$l],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function s2(e){return e[my]||null}var KR=[],Gh=-1;function Ac(e){return{current:e}}function gn(e){0>Gh||(e.current=KR[Gh],KR[Gh]=null,Gh--)}function un(e,t){Gh++,KR[Gh]=e.current,e.current=t}var ac={},Ji=Ac(ac),Br=Ac(!1),Kf=ac;function Cp(e,t){var n=e.type.contextTypes;if(!n)return ac;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Hr(e){return e=e.childContextTypes,e!=null}function G_(){gn(Br),gn(Ji)}function h5(e,t,n){if(Ji.current!==ac)throw Error(_e(168));un(Ji,t),un(Br,n)}function T9(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(_e(108,qie(e)||"Unknown",r));return Tn({},n,i)}function q_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ac,Kf=Ji.current,un(Ji,e),un(Br,Br.current),!0}function p5(e,t,n){var i=e.stateNode;if(!i)throw Error(_e(169));n?(e=T9(e,t,Kf),i.__reactInternalMemoizedMergedChildContext=e,gn(Br),gn(Ji),un(Ji,e)):gn(Br),un(Br,n)}var sl=null,l2=!1,FE=!1;function A9(e){sl===null?sl=[e]:sl.push(e)}function uoe(e){l2=!0,A9(e)}function Mc(){if(!FE&&sl!==null){FE=!0;var e=0,t=en;try{var n=sl;for(en=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}sl=null,l2=!1}catch(r){throw sl!==null&&(sl=sl.slice(e+1)),e9(gF,Mc),r}finally{en=t,FE=!1}}return null}var qh=[],Vh=0,V_=null,Y_=0,$o=[],Io=0,Jf=null,pl=1,ml="";function gf(e,t){qh[Vh++]=Y_,qh[Vh++]=V_,V_=e,Y_=t}function M9(e,t,n){$o[Io++]=pl,$o[Io++]=ml,$o[Io++]=Jf,Jf=e;var i=pl;e=ml;var r=32-Fa(i)-1;i&=~(1<<r),n+=1;var o=32-Fa(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,pl=1<<32-Fa(t)+r|n<<r|i,ml=o+e}else pl=1<<o|n<<r|i,ml=e}function EF(e){e.return!==null&&(gf(e,1),M9(e,1,0))}function kF(e){for(;e===V_;)V_=qh[--Vh],qh[Vh]=null,Y_=qh[--Vh],qh[Vh]=null;for(;e===Jf;)Jf=$o[--Io],$o[Io]=null,ml=$o[--Io],$o[Io]=null,pl=$o[--Io],$o[Io]=null}var po=null,uo=null,bn=!1,_a=null;function F9(e,t){var n=Lo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function m5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,po=e,uo=Vu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,po=e,uo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Jf!==null?{id:pl,overflow:ml}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,po=e,uo=null,!0):!1;default:return!1}}function JR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function QR(e){if(bn){var t=uo;if(t){var n=t;if(!m5(e,t)){if(JR(e))throw Error(_e(418));t=Vu(n.nextSibling);var i=po;t&&m5(e,t)?F9(i,n):(e.flags=e.flags&-4097|2,bn=!1,po=e)}}else{if(JR(e))throw Error(_e(418));e.flags=e.flags&-4097|2,bn=!1,po=e}}}function g5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;po=e}function ex(e){if(e!==po)return!1;if(!bn)return g5(e),bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!YR(e.type,e.memoizedProps)),t&&(t=uo)){if(JR(e))throw P9(),Error(_e(418));for(;t;)F9(e,t),t=Vu(t.nextSibling)}if(g5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){uo=Vu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}uo=null}}else uo=po?Vu(e.stateNode.nextSibling):null;return!0}function P9(){for(var e=uo;e;)e=Vu(e.nextSibling)}function Ep(){uo=po=null,bn=!1}function RF(e){_a===null?_a=[e]:_a.push(e)}var coe=Wl.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){t=Tn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Z_=Ac(null),X_=null,Yh=null,TF=null;function AF(){TF=Yh=X_=null}function MF(e){var t=Z_.current;gn(Z_),e._currentValue=t}function eT(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function lp(e,t){X_=e,TF=Yh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jr=!0),e.firstContext=null)}function qo(e){var t=e._currentValue;if(TF!==e)if(e={context:e,memoizedValue:t,next:null},Yh===null){if(X_===null)throw Error(_e(308));Yh=e,X_.dependencies={lanes:0,firstContext:e}}else Yh=Yh.next=e;return t}var Af=null;function FF(e){Af===null?Af=[e]:Af.push(e)}function N9(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,FF(t)):(n.next=r.next,r.next=n),t.interleaved=n,Il(e,i)}function Il(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vu=!1;function PF(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $9(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yu(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,jt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Il(e,n)}return r=i.interleaved,r===null?(t.next=t,FF(i)):(t.next=r.next,r.next=t),i.interleaved=t,Il(e,n)}function n_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yF(e,n)}}function y5(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function K_(e,t,n,i){var r=e.updateQueue;vu=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;a=0,c=u=l=null,s=o;do{var h=s.lane,m=s.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,y=s;switch(h=t,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=Tn({},d,h);break e;case 2:vu=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[s]:h.push(s))}else m={eventTime:m,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,a|=h;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;h=s,s=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);ed|=a,e.lanes=a,e.memoizedState=d}}function v5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(_e(191,r));r.call(i)}}}var I9=new N8.Component().refs;function tT(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Tn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var u2={isMounted:function(e){return(e=e._reactInternals)?Md(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=pr(),r=Xu(e),o=Sl(i,r);o.payload=t,n!=null&&(o.callback=n),t=Yu(e,o,r),t!==null&&(Pa(t,e,r,i),n_(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=pr(),r=Xu(e),o=Sl(i,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Yu(e,o,r),t!==null&&(Pa(t,e,r,i),n_(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pr(),i=Xu(e),r=Sl(n,i);r.tag=2,t!=null&&(r.callback=t),t=Yu(e,r,i),t!==null&&(Pa(t,e,i,n),n_(t,e,i))}};function x5(e,t,n,i,r,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,a):t.prototype&&t.prototype.isPureReactComponent?!dy(n,i)||!dy(r,o):!0}function O9(e,t,n){var i=!1,r=ac,o=t.contextType;return typeof o=="object"&&o!==null?o=qo(o):(r=Hr(t)?Kf:Ji.current,i=t.contextTypes,o=(i=i!=null)?Cp(e,r):ac),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=u2,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function _5(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&u2.enqueueReplaceState(t,t.state,null)}function nT(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=I9,PF(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=qo(o):(o=Hr(t)?Kf:Ji.current,r.context=Cp(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(tT(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&u2.enqueueReplaceState(r,r.state,null),K_(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function wg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var i=n.stateNode}if(!i)throw Error(_e(147,e));var r=i,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=r.refs;s===I9&&(s=r.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,e))}return e}function tx(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b5(e){var t=e._init;return t(e._payload)}function D9(e){function t(b,w){if(e){var S=b.deletions;S===null?(b.deletions=[w],b.flags|=16):S.push(w)}}function n(b,w){if(!e)return null;for(;w!==null;)t(b,w),w=w.sibling;return null}function i(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function r(b,w){return b=Ku(b,w),b.index=0,b.sibling=null,b}function o(b,w,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<w?(b.flags|=2,w):S):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function s(b,w,S,k){return w===null||w.tag!==6?(w=LE(S,b.mode,k),w.return=b,w):(w=r(w,S),w.return=b,w)}function l(b,w,S,k){var R=S.type;return R===zh?c(b,w,S.props.children,k,S.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yu&&b5(R)===w.type)?(k=r(w,S.props),k.ref=wg(b,w,S),k.return=b,k):(k=l_(S.type,S.key,S.props,null,b.mode,k),k.ref=wg(b,w,S),k.return=b,k)}function u(b,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=jE(S,b.mode,k),w.return=b,w):(w=r(w,S.children||[]),w.return=b,w)}function c(b,w,S,k,R){return w===null||w.tag!==7?(w=Lf(S,b.mode,k,R),w.return=b,w):(w=r(w,S),w.return=b,w)}function d(b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=LE(""+w,b.mode,S),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case W1:return S=l_(w.type,w.key,w.props,null,b.mode,S),S.ref=wg(b,null,w),S.return=b,S;case jh:return w=jE(w,b.mode,S),w.return=b,w;case yu:var k=w._init;return d(b,k(w._payload),S)}if(i0(w)||yg(w))return w=Lf(w,b.mode,S,null),w.return=b,w;tx(b,w)}return null}function h(b,w,S,k){var R=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:s(b,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case W1:return S.key===R?l(b,w,S,k):null;case jh:return S.key===R?u(b,w,S,k):null;case yu:return R=S._init,h(b,w,R(S._payload),k)}if(i0(S)||yg(S))return R!==null?null:c(b,w,S,k,null);tx(b,S)}return null}function m(b,w,S,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(S)||null,s(w,b,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case W1:return b=b.get(k.key===null?S:k.key)||null,l(w,b,k,R);case jh:return b=b.get(k.key===null?S:k.key)||null,u(w,b,k,R);case yu:var M=k._init;return m(b,w,S,M(k._payload),R)}if(i0(k)||yg(k))return b=b.get(S)||null,c(w,b,k,R,null);tx(w,k)}return null}function g(b,w,S,k){for(var R=null,M=null,T=w,N=w=0,z=null;T!==null&&N<S.length;N++){T.index>N?(z=T,T=null):z=T.sibling;var H=h(b,T,S[N],k);if(H===null){T===null&&(T=z);break}e&&T&&H.alternate===null&&t(b,T),w=o(H,w,N),M===null?R=H:M.sibling=H,M=H,T=z}if(N===S.length)return n(b,T),bn&&gf(b,N),R;if(T===null){for(;N<S.length;N++)T=d(b,S[N],k),T!==null&&(w=o(T,w,N),M===null?R=T:M.sibling=T,M=T);return bn&&gf(b,N),R}for(T=i(b,T);N<S.length;N++)z=m(T,b,N,S[N],k),z!==null&&(e&&z.alternate!==null&&T.delete(z.key===null?N:z.key),w=o(z,w,N),M===null?R=z:M.sibling=z,M=z);return e&&T.forEach(function(U){return t(b,U)}),bn&&gf(b,N),R}function y(b,w,S,k){var R=yg(S);if(typeof R!="function")throw Error(_e(150));if(S=R.call(S),S==null)throw Error(_e(151));for(var M=R=null,T=w,N=w=0,z=null,H=S.next();T!==null&&!H.done;N++,H=S.next()){T.index>N?(z=T,T=null):z=T.sibling;var U=h(b,T,H.value,k);if(U===null){T===null&&(T=z);break}e&&T&&U.alternate===null&&t(b,T),w=o(U,w,N),M===null?R=U:M.sibling=U,M=U,T=z}if(H.done)return n(b,T),bn&&gf(b,N),R;if(T===null){for(;!H.done;N++,H=S.next())H=d(b,H.value,k),H!==null&&(w=o(H,w,N),M===null?R=H:M.sibling=H,M=H);return bn&&gf(b,N),R}for(T=i(b,T);!H.done;N++,H=S.next())H=m(T,b,N,H.value,k),H!==null&&(e&&H.alternate!==null&&T.delete(H.key===null?N:H.key),w=o(H,w,N),M===null?R=H:M.sibling=H,M=H);return e&&T.forEach(function(X){return t(b,X)}),bn&&gf(b,N),R}function x(b,w,S,k){if(typeof S=="object"&&S!==null&&S.type===zh&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case W1:e:{for(var R=S.key,M=w;M!==null;){if(M.key===R){if(R=S.type,R===zh){if(M.tag===7){n(b,M.sibling),w=r(M,S.props.children),w.return=b,b=w;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yu&&b5(R)===M.type){n(b,M.sibling),w=r(M,S.props),w.ref=wg(b,M,S),w.return=b,b=w;break e}n(b,M);break}else t(b,M);M=M.sibling}S.type===zh?(w=Lf(S.props.children,b.mode,k,S.key),w.return=b,b=w):(k=l_(S.type,S.key,S.props,null,b.mode,k),k.ref=wg(b,w,S),k.return=b,b=k)}return a(b);case jh:e:{for(M=S.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(b,w.sibling),w=r(w,S.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else t(b,w);w=w.sibling}w=jE(S,b.mode,k),w.return=b,b=w}return a(b);case yu:return M=S._init,x(b,w,M(S._payload),k)}if(i0(S))return g(b,w,S,k);if(yg(S))return y(b,w,S,k);tx(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(b,w.sibling),w=r(w,S),w.return=b,b=w):(n(b,w),w=LE(S,b.mode,k),w.return=b,b=w),a(b)):n(b,w)}return x}var kp=D9(!0),L9=D9(!1),mv={},ys=Ac(mv),gy=Ac(mv),yy=Ac(mv);function Mf(e){if(e===mv)throw Error(_e(174));return e}function NF(e,t){switch(un(yy,t),un(gy,e),un(ys,mv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$R(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$R(t,e)}gn(ys),un(ys,t)}function Rp(){gn(ys),gn(gy),gn(yy)}function j9(e){Mf(yy.current);var t=Mf(ys.current),n=$R(t,e.type);t!==n&&(un(gy,e),un(ys,n))}function $F(e){gy.current===e&&(gn(ys),gn(gy))}var kn=Ac(0);function J_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var PE=[];function IF(){for(var e=0;e<PE.length;e++)PE[e]._workInProgressVersionPrimary=null;PE.length=0}var i_=Wl.ReactCurrentDispatcher,NE=Wl.ReactCurrentBatchConfig,Qf=0,Rn=null,Zn=null,li=null,Q_=!1,D0=!1,vy=0,foe=0;function Oi(){throw Error(_e(321))}function OF(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oa(e[n],t[n]))return!1;return!0}function DF(e,t,n,i,r,o){if(Qf=o,Rn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,i_.current=e===null||e.memoizedState===null?moe:goe,e=n(i,r),D0){o=0;do{if(D0=!1,vy=0,25<=o)throw Error(_e(301));o+=1,li=Zn=null,t.updateQueue=null,i_.current=yoe,e=n(i,r)}while(D0)}if(i_.current=eb,t=Zn!==null&&Zn.next!==null,Qf=0,li=Zn=Rn=null,Q_=!1,t)throw Error(_e(300));return e}function LF(){var e=vy!==0;return vy=0,e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Rn.memoizedState=li=e:li=li.next=e,li}function Vo(){if(Zn===null){var e=Rn.alternate;e=e!==null?e.memoizedState:null}else e=Zn.next;var t=li===null?Rn.memoizedState:li.next;if(t!==null)li=t,Zn=e;else{if(e===null)throw Error(_e(310));Zn=e,e={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},li===null?Rn.memoizedState=li=e:li=li.next=e}return li}function xy(e,t){return typeof t=="function"?t(e):t}function $E(e){var t=Vo(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var i=Zn,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((Qf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=i):l=l.next=d,Rn.lanes|=c,ed|=c}u=u.next}while(u!==null&&u!==o);l===null?a=i:l.next=s,Oa(i,t.memoizedState)||(jr=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do o=r.lane,Rn.lanes|=o,ed|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function IE(e){var t=Vo(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=e(o,a.action),a=a.next;while(a!==r);Oa(o,t.memoizedState)||(jr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function z9(){}function B9(e,t){var n=Rn,i=Vo(),r=t(),o=!Oa(i.memoizedState,r);if(o&&(i.memoizedState=r,jr=!0),i=i.queue,jF(W9.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||li!==null&&li.memoizedState.tag&1){if(n.flags|=2048,_y(9,U9.bind(null,n,i,r,t),void 0,null),gi===null)throw Error(_e(349));Qf&30||H9(n,t,r)}return r}function H9(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rn.updateQueue,t===null?(t={lastEffect:null,stores:null},Rn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function U9(e,t,n,i){t.value=n,t.getSnapshot=i,G9(t)&&q9(e)}function W9(e,t,n){return n(function(){G9(t)&&q9(e)})}function G9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oa(e,n)}catch{return!0}}function q9(e){var t=Il(e,1);t!==null&&Pa(t,e,1,-1)}function w5(e){var t=ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xy,lastRenderedState:e},t.queue=e,e=e.dispatch=poe.bind(null,Rn,e),[t.memoizedState,e]}function _y(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Rn.updateQueue,t===null?(t={lastEffect:null,stores:null},Rn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function V9(){return Vo().memoizedState}function r_(e,t,n,i){var r=ss();Rn.flags|=e,r.memoizedState=_y(1|t,n,void 0,i===void 0?null:i)}function c2(e,t,n,i){var r=Vo();i=i===void 0?null:i;var o=void 0;if(Zn!==null){var a=Zn.memoizedState;if(o=a.destroy,i!==null&&OF(i,a.deps)){r.memoizedState=_y(t,n,o,i);return}}Rn.flags|=e,r.memoizedState=_y(1|t,n,o,i)}function S5(e,t){return r_(8390656,8,e,t)}function jF(e,t){return c2(2048,8,e,t)}function Y9(e,t){return c2(4,2,e,t)}function Z9(e,t){return c2(4,4,e,t)}function X9(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K9(e,t,n){return n=n!=null?n.concat([e]):null,c2(4,4,X9.bind(null,t,e),n)}function zF(){}function J9(e,t){var n=Vo();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&OF(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Q9(e,t){var n=Vo();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&OF(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function e7(e,t,n){return Qf&21?(Oa(n,t)||(n=i9(),Rn.lanes|=n,ed|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jr=!0),e.memoizedState=n)}function doe(e,t){var n=en;en=n!==0&&4>n?n:4,e(!0);var i=NE.transition;NE.transition={};try{e(!1),t()}finally{en=n,NE.transition=i}}function t7(){return Vo().memoizedState}function hoe(e,t,n){var i=Xu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},n7(e))i7(t,n);else if(n=N9(e,t,n,i),n!==null){var r=pr();Pa(n,e,i,r),r7(n,t,i)}}function poe(e,t,n){var i=Xu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(n7(e))i7(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,Oa(s,a)){var l=t.interleaved;l===null?(r.next=r,FF(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=N9(e,t,r,i),n!==null&&(r=pr(),Pa(n,e,i,r),r7(n,t,i))}}function n7(e){var t=e.alternate;return e===Rn||t!==null&&t===Rn}function i7(e,t){D0=Q_=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function r7(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yF(e,n)}}var eb={readContext:qo,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},moe={readContext:qo,useCallback:function(e,t){return ss().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:S5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,r_(4194308,4,X9.bind(null,t,e),n)},useLayoutEffect:function(e,t){return r_(4194308,4,e,t)},useInsertionEffect:function(e,t){return r_(4,2,e,t)},useMemo:function(e,t){var n=ss();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ss();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=hoe.bind(null,Rn,e),[i.memoizedState,e]},useRef:function(e){var t=ss();return e={current:e},t.memoizedState=e},useState:w5,useDebugValue:zF,useDeferredValue:function(e){return ss().memoizedState=e},useTransition:function(){var e=w5(!1),t=e[0];return e=doe.bind(null,e[1]),ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Rn,r=ss();if(bn){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=t(),gi===null)throw Error(_e(349));Qf&30||H9(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,S5(W9.bind(null,i,o,e),[e]),i.flags|=2048,_y(9,U9.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=ss(),t=gi.identifierPrefix;if(bn){var n=ml,i=pl;n=(i&~(1<<32-Fa(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=vy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=foe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},goe={readContext:qo,useCallback:J9,useContext:qo,useEffect:jF,useImperativeHandle:K9,useInsertionEffect:Y9,useLayoutEffect:Z9,useMemo:Q9,useReducer:$E,useRef:V9,useState:function(){return $E(xy)},useDebugValue:zF,useDeferredValue:function(e){var t=Vo();return e7(t,Zn.memoizedState,e)},useTransition:function(){var e=$E(xy)[0],t=Vo().memoizedState;return[e,t]},useMutableSource:z9,useSyncExternalStore:B9,useId:t7,unstable_isNewReconciler:!1},yoe={readContext:qo,useCallback:J9,useContext:qo,useEffect:jF,useImperativeHandle:K9,useInsertionEffect:Y9,useLayoutEffect:Z9,useMemo:Q9,useReducer:IE,useRef:V9,useState:function(){return IE(xy)},useDebugValue:zF,useDeferredValue:function(e){var t=Vo();return Zn===null?t.memoizedState=e:e7(t,Zn.memoizedState,e)},useTransition:function(){var e=IE(xy)[0],t=Vo().memoizedState;return[e,t]},useMutableSource:z9,useSyncExternalStore:B9,useId:t7,unstable_isNewReconciler:!1};function Tp(e,t){try{var n="",i=t;do n+=Gie(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function OE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function iT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var voe=typeof WeakMap=="function"?WeakMap:Map;function o7(e,t,n){n=Sl(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){nb||(nb=!0,hT=i),iT(e,t)},n}function a7(e,t,n){n=Sl(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){iT(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){iT(e,t),typeof i!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function C5(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new voe;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Poe.bind(null,e,t,n),t.then(e,e))}function E5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function k5(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Sl(-1,1),t.tag=2,Yu(n,t,1))),n.lanes|=1),e)}var xoe=Wl.ReactCurrentOwner,jr=!1;function sr(e,t,n,i){t.child=e===null?L9(t,null,n,i):kp(t,e.child,n,i)}function R5(e,t,n,i,r){n=n.render;var o=t.ref;return lp(t,r),i=DF(e,t,n,i,o,r),n=LF(),e!==null&&!jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ol(e,t,r)):(bn&&n&&EF(t),t.flags|=1,sr(e,t,i,r),t.child)}function T5(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!YF(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,s7(e,t,o,i,r)):(e=l_(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:dy,n(a,i)&&e.ref===t.ref)return Ol(e,t,r)}return t.flags|=1,e=Ku(o,i),e.ref=t.ref,e.return=t,t.child=e}function s7(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if(dy(o,i)&&e.ref===t.ref)if(jr=!1,t.pendingProps=i=o,(e.lanes&r)!==0)e.flags&131072&&(jr=!0);else return t.lanes=e.lanes,Ol(e,t,r)}return rT(e,t,n,i,r)}function l7(e,t,n){var i=t.pendingProps,r=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Xh,ro),ro|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,un(Xh,ro),ro|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,un(Xh,ro),ro|=i}else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,un(Xh,ro),ro|=i;return sr(e,t,r,n),t.child}function u7(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function rT(e,t,n,i,r){var o=Hr(n)?Kf:Ji.current;return o=Cp(t,o),lp(t,r),n=DF(e,t,n,i,o,r),i=LF(),e!==null&&!jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ol(e,t,r)):(bn&&i&&EF(t),t.flags|=1,sr(e,t,n,r),t.child)}function A5(e,t,n,i,r){if(Hr(n)){var o=!0;q_(t)}else o=!1;if(lp(t,r),t.stateNode===null)o_(e,t),O9(t,n,i),nT(t,n,i,r),i=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=qo(u):(u=Hr(n)?Kf:Ji.current,u=Cp(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==i||l!==u)&&_5(t,a,i,u),vu=!1;var h=t.memoizedState;a.state=h,K_(t,i,a,r),l=t.memoizedState,s!==i||h!==l||Br.current||vu?(typeof c=="function"&&(tT(t,n,c,i),l=t.memoizedState),(s=vu||x5(t,n,s,i,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,$9(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),a.props=u,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=qo(l):(l=Hr(n)?Kf:Ji.current,l=Cp(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&_5(t,a,i,l),vu=!1,h=t.memoizedState,a.state=h,K_(t,i,a,r);var g=t.memoizedState;s!==d||h!==g||Br.current||vu?(typeof m=="function"&&(tT(t,n,m,i),g=t.memoizedState),(u=vu||x5(t,n,u,i,h,g,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),a.props=i,a.state=g,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return oT(e,t,n,i,o,r)}function oT(e,t,n,i,r,o){u7(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return r&&p5(t,n,!1),Ol(e,t,o);i=t.stateNode,xoe.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=kp(t,e.child,null,o),t.child=kp(t,null,s,o)):sr(e,t,s,o),t.memoizedState=i.state,r&&p5(t,n,!0),t.child}function c7(e){var t=e.stateNode;t.pendingContext?h5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&h5(e,t.context,!1),NF(e,t.containerInfo)}function M5(e,t,n,i,r){return Ep(),RF(r),t.flags|=256,sr(e,t,n,i),t.child}var aT={dehydrated:null,treeContext:null,retryLane:0};function sT(e){return{baseLanes:e,cachePool:null,transitions:null}}function f7(e,t,n){var i=t.pendingProps,r=kn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),un(kn,r&1),e===null)return QR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=h2(a,i,0,null),e=Lf(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=sT(n),t.memoizedState=aT,e):BF(t,a));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return _oe(e,t,a,i,s,r,n);if(o){o=i.fallback,a=t.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ku(r,l),i.subtreeFlags=r.subtreeFlags&14680064),s!==null?o=Ku(s,o):(o=Lf(o,a,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=e.child.memoizedState,a=a===null?sT(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=aT,i}return o=e.child,e=o.sibling,i=Ku(o,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function BF(e,t){return t=h2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function nx(e,t,n,i){return i!==null&&RF(i),kp(t,e.child,null,n),e=BF(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _oe(e,t,n,i,r,o,a){if(n)return t.flags&256?(t.flags&=-257,i=OE(Error(_e(422))),nx(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=h2({mode:"visible",children:i.children},r,0,null),o=Lf(o,r,a,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,t.mode&1&&kp(t,e.child,null,a),t.child.memoizedState=sT(a),t.memoizedState=aT,o);if(!(t.mode&1))return nx(e,t,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var s=i.dgst;return i=s,o=Error(_e(419)),i=OE(o,i,void 0),nx(e,t,a,i)}if(s=(a&e.childLanes)!==0,jr||s){if(i=gi,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Il(e,r),Pa(i,e,r,-1))}return VF(),i=OE(Error(_e(421))),nx(e,t,a,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Noe.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,uo=Vu(r.nextSibling),po=t,bn=!0,_a=null,e!==null&&($o[Io++]=pl,$o[Io++]=ml,$o[Io++]=Jf,pl=e.id,ml=e.overflow,Jf=t),t=BF(t,i.children),t.flags|=4096,t)}function F5(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),eT(e.return,t,n)}function DE(e,t,n,i,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function d7(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(sr(e,t,i.children,n),i=kn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&F5(e,n,t);else if(e.tag===19)F5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(un(kn,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&J_(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),DE(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&J_(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}DE(t,!0,n,null,o);break;case"together":DE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function o_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ol(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ed|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,n=Ku(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ku(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function boe(e,t,n){switch(t.tag){case 3:c7(t),Ep();break;case 5:j9(t);break;case 1:Hr(t.type)&&q_(t);break;case 4:NF(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;un(Z_,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(un(kn,kn.current&1),t.flags|=128,null):n&t.child.childLanes?f7(e,t,n):(un(kn,kn.current&1),e=Ol(e,t,n),e!==null?e.sibling:null);un(kn,kn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return d7(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),un(kn,kn.current),i)break;return null;case 22:case 23:return t.lanes=0,l7(e,t,n)}return Ol(e,t,n)}var h7,lT,p7,m7;h7=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lT=function(){};p7=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Mf(ys.current);var o=null;switch(n){case"input":r=MR(e,r),i=MR(e,i),o=[];break;case"select":r=Tn({},r,{value:void 0}),i=Tn({},i,{value:void 0}),o=[];break;case"textarea":r=NR(e,r),i=NR(e,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=W_)}IR(n,i);var a;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var s=r[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(oy.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var l=i[u];if(s=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(oy.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&hn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};m7=function(e,t,n,i){n!==i&&(t.flags|=4)};function Sg(e,t){if(!bn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Di(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function woe(e,t,n){var i=t.pendingProps;switch(kF(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(t),null;case 1:return Hr(t.type)&&G_(),Di(t),null;case 3:return i=t.stateNode,Rp(),gn(Br),gn(Ji),IF(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ex(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_a!==null&&(gT(_a),_a=null))),lT(e,t),Di(t),null;case 5:$F(t);var r=Mf(yy.current);if(n=t.type,e!==null&&t.stateNode!=null)p7(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(_e(166));return Di(t),null}if(e=Mf(ys.current),ex(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[fs]=t,i[my]=o,e=(t.mode&1)!==0,n){case"dialog":hn("cancel",i),hn("close",i);break;case"iframe":case"object":case"embed":hn("load",i);break;case"video":case"audio":for(r=0;r<o0.length;r++)hn(o0[r],i);break;case"source":hn("error",i);break;case"img":case"image":case"link":hn("error",i),hn("load",i);break;case"details":hn("toggle",i);break;case"input":zL(i,o),hn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},hn("invalid",i);break;case"textarea":HL(i,o),hn("invalid",i)}IR(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?i.textContent!==s&&(o.suppressHydrationWarning!==!0&&Q1(i.textContent,s,e),r=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Q1(i.textContent,s,e),r=["children",""+s]):oy.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&hn("scroll",i)}switch(n){case"input":G1(i),BL(i,o,!0);break;case"textarea":G1(i),UL(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=W_)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=H8(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(n,{is:i.is}):(e=a.createElement(n),n==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,n),e[fs]=t,e[my]=i,h7(e,t,!1,!1),t.stateNode=e;e:{switch(a=OR(n,i),n){case"dialog":hn("cancel",e),hn("close",e),r=i;break;case"iframe":case"object":case"embed":hn("load",e),r=i;break;case"video":case"audio":for(r=0;r<o0.length;r++)hn(o0[r],e);r=i;break;case"source":hn("error",e),r=i;break;case"img":case"image":case"link":hn("error",e),hn("load",e),r=i;break;case"details":hn("toggle",e),r=i;break;case"input":zL(e,i),r=MR(e,i),hn("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=Tn({},i,{value:void 0}),hn("invalid",e);break;case"textarea":HL(e,i),r=NR(e,i),hn("invalid",e);break;default:r=i}IR(n,r),s=r;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?G8(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&U8(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ay(e,l):typeof l=="number"&&ay(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(oy.hasOwnProperty(o)?l!=null&&o==="onScroll"&&hn("scroll",e):l!=null&&fF(e,o,l,a))}switch(n){case"input":G1(e),BL(e,i,!1);break;case"textarea":G1(e),UL(e);break;case"option":i.value!=null&&e.setAttribute("value",""+oc(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?rp(e,!!i.multiple,o,!1):i.defaultValue!=null&&rp(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=W_)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Di(t),null;case 6:if(e&&t.stateNode!=null)m7(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(_e(166));if(n=Mf(yy.current),Mf(ys.current),ex(t)){if(i=t.stateNode,n=t.memoizedProps,i[fs]=t,(o=i.nodeValue!==n)&&(e=po,e!==null))switch(e.tag){case 3:Q1(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Q1(i.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[fs]=t,t.stateNode=i}return Di(t),null;case 13:if(gn(kn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bn&&uo!==null&&t.mode&1&&!(t.flags&128))P9(),Ep(),t.flags|=98560,o=!1;else if(o=ex(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(_e(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(_e(317));o[fs]=t}else Ep(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Di(t),o=!1}else _a!==null&&(gT(_a),_a=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||kn.current&1?Jn===0&&(Jn=3):VF())),t.updateQueue!==null&&(t.flags|=4),Di(t),null);case 4:return Rp(),lT(e,t),e===null&&hy(t.stateNode.containerInfo),Di(t),null;case 10:return MF(t.type._context),Di(t),null;case 17:return Hr(t.type)&&G_(),Di(t),null;case 19:if(gn(kn),o=t.memoizedState,o===null)return Di(t),null;if(i=(t.flags&128)!==0,a=o.rendering,a===null)if(i)Sg(o,!1);else{if(Jn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=J_(e),a!==null){for(t.flags|=128,Sg(o,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,e=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return un(kn,kn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ln()>Ap&&(t.flags|=128,i=!0,Sg(o,!1),t.lanes=4194304)}else{if(!i)if(e=J_(a),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Sg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!bn)return Di(t),null}else 2*Ln()-o.renderingStartTime>Ap&&n!==1073741824&&(t.flags|=128,i=!0,Sg(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ln(),t.sibling=null,n=kn.current,un(kn,i?n&1|2:n&1),t):(Di(t),null);case 22:case 23:return qF(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ro&1073741824&&(Di(t),t.subtreeFlags&6&&(t.flags|=8192)):Di(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function Soe(e,t){switch(kF(t),t.tag){case 1:return Hr(t.type)&&G_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rp(),gn(Br),gn(Ji),IF(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $F(t),null;case 13:if(gn(kn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));Ep()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gn(kn),null;case 4:return Rp(),null;case 10:return MF(t.type._context),null;case 22:case 23:return qF(),null;case 24:return null;default:return null}}var ix=!1,Ui=!1,Coe=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Zh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Pn(e,t,i)}else n.current=null}function uT(e,t,n){try{n()}catch(i){Pn(e,t,i)}}var P5=!1;function Eoe(e,t){if(qR=B_,e=x9(),CF(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(s=a+r),d!==o||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===r&&(s=a),h===o&&++c===i&&(l=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(VR={focusedElem:e,selectionRange:n},B_=!1,ze=t;ze!==null;)if(t=ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ze=e;else for(;ze!==null;){t=ze;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,b=t.stateNode,w=b.getSnapshotBeforeUpdate(t.elementType===t.type?y:ma(t.type,y),x);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(k){Pn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ze=e;break}ze=t.return}return g=P5,P5=!1,g}function L0(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&uT(t,n,o)}r=r.next}while(r!==i)}}function f2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function cT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function g7(e){var t=e.alternate;t!==null&&(e.alternate=null,g7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fs],delete t[my],delete t[XR],delete t[soe],delete t[loe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y7(e){return e.tag===5||e.tag===3||e.tag===4}function N5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fT(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=W_));else if(i!==4&&(e=e.child,e!==null))for(fT(e,t,n),e=e.sibling;e!==null;)fT(e,t,n),e=e.sibling}function dT(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(dT(e,t,n),e=e.sibling;e!==null;)dT(e,t,n),e=e.sibling}var Si=null,ya=!1;function cu(e,t,n){for(n=n.child;n!==null;)v7(e,t,n),n=n.sibling}function v7(e,t,n){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(i2,n)}catch{}switch(n.tag){case 5:Ui||Zh(n,t);case 6:var i=Si,r=ya;Si=null,cu(e,t,n),Si=i,ya=r,Si!==null&&(ya?(e=Si,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Si.removeChild(n.stateNode));break;case 18:Si!==null&&(ya?(e=Si,n=n.stateNode,e.nodeType===8?ME(e.parentNode,n):e.nodeType===1&&ME(e,n),cy(e)):ME(Si,n.stateNode));break;case 4:i=Si,r=ya,Si=n.stateNode.containerInfo,ya=!0,cu(e,t,n),Si=i,ya=r;break;case 0:case 11:case 14:case 15:if(!Ui&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&uT(n,t,a),r=r.next}while(r!==i)}cu(e,t,n);break;case 1:if(!Ui&&(Zh(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Pn(n,t,s)}cu(e,t,n);break;case 21:cu(e,t,n);break;case 22:n.mode&1?(Ui=(i=Ui)||n.memoizedState!==null,cu(e,t,n),Ui=i):cu(e,t,n);break;default:cu(e,t,n)}}function $5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Coe),t.forEach(function(i){var r=$oe.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ca(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Si=s.stateNode,ya=!1;break e;case 3:Si=s.stateNode.containerInfo,ya=!0;break e;case 4:Si=s.stateNode.containerInfo,ya=!0;break e}s=s.return}if(Si===null)throw Error(_e(160));v7(o,a,r),Si=null,ya=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Pn(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x7(t,e),t=t.sibling}function x7(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ca(t,e),ns(e),i&4){try{L0(3,e,e.return),f2(3,e)}catch(y){Pn(e,e.return,y)}try{L0(5,e,e.return)}catch(y){Pn(e,e.return,y)}}break;case 1:ca(t,e),ns(e),i&512&&n!==null&&Zh(n,n.return);break;case 5:if(ca(t,e),ns(e),i&512&&n!==null&&Zh(n,n.return),e.flags&32){var r=e.stateNode;try{ay(r,"")}catch(y){Pn(e,e.return,y)}}if(i&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&z8(r,o),OR(s,a);var u=OR(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?G8(r,d):c==="dangerouslySetInnerHTML"?U8(r,d):c==="children"?ay(r,d):fF(r,c,d,u)}switch(s){case"input":FR(r,o);break;case"textarea":B8(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?rp(r,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?rp(r,!!o.multiple,o.defaultValue,!0):rp(r,!!o.multiple,o.multiple?[]:"",!1))}r[my]=o}catch(y){Pn(e,e.return,y)}}break;case 6:if(ca(t,e),ns(e),i&4){if(e.stateNode===null)throw Error(_e(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(y){Pn(e,e.return,y)}}break;case 3:if(ca(t,e),ns(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{cy(t.containerInfo)}catch(y){Pn(e,e.return,y)}break;case 4:ca(t,e),ns(e);break;case 13:ca(t,e),ns(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(WF=Ln())),i&4&&$5(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ui=(u=Ui)||c,ca(t,e),Ui=u):ca(t,e),ns(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(ze=e,c=e.child;c!==null;){for(d=ze=c;ze!==null;){switch(h=ze,m=h.child,h.tag){case 0:case 11:case 14:case 15:L0(4,h,h.return);break;case 1:Zh(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Pn(i,n,y)}}break;case 5:Zh(h,h.return);break;case 22:if(h.memoizedState!==null){O5(d);continue}}m!==null?(m.return=h,ze=m):O5(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=W8("display",a))}catch(y){Pn(e,e.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Pn(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ca(t,e),ns(e),i&4&&$5(e);break;case 21:break;default:ca(t,e),ns(e)}}function ns(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(y7(n)){var i=n;break e}n=n.return}throw Error(_e(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ay(r,""),i.flags&=-33);var o=N5(e);dT(e,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,s=N5(e);fT(e,s,a);break;default:throw Error(_e(161))}}catch(l){Pn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function koe(e,t,n){ze=e,_7(e)}function _7(e,t,n){for(var i=(e.mode&1)!==0;ze!==null;){var r=ze,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||ix;if(!a){var s=r.alternate,l=s!==null&&s.memoizedState!==null||Ui;s=ix;var u=Ui;if(ix=a,(Ui=l)&&!u)for(ze=r;ze!==null;)a=ze,l=a.child,a.tag===22&&a.memoizedState!==null?D5(r):l!==null?(l.return=a,ze=l):D5(r);for(;o!==null;)ze=o,_7(o),o=o.sibling;ze=r,ix=s,Ui=u}I5(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ze=o):I5(e)}}function I5(e){for(;ze!==null;){var t=ze;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ui||f2(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ui)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&v5(t,o,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}v5(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&cy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Ui||t.flags&512&&cT(t)}catch(h){Pn(t,t.return,h)}}if(t===e){ze=null;break}if(n=t.sibling,n!==null){n.return=t.return,ze=n;break}ze=t.return}}function O5(e){for(;ze!==null;){var t=ze;if(t===e){ze=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ze=n;break}ze=t.return}}function D5(e){for(;ze!==null;){var t=ze;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{f2(4,t)}catch(l){Pn(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){Pn(t,r,l)}}var o=t.return;try{cT(t)}catch(l){Pn(t,o,l)}break;case 5:var a=t.return;try{cT(t)}catch(l){Pn(t,a,l)}}}catch(l){Pn(t,t.return,l)}if(t===e){ze=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ze=s;break}ze=t.return}}var Roe=Math.ceil,tb=Wl.ReactCurrentDispatcher,HF=Wl.ReactCurrentOwner,Uo=Wl.ReactCurrentBatchConfig,jt=0,gi=null,Gn=null,Ri=0,ro=0,Xh=Ac(0),Jn=0,by=null,ed=0,d2=0,UF=0,j0=null,Ir=null,WF=0,Ap=1/0,rl=null,nb=!1,hT=null,Zu=null,rx=!1,Fu=null,ib=0,z0=0,pT=null,a_=-1,s_=0;function pr(){return jt&6?Ln():a_!==-1?a_:a_=Ln()}function Xu(e){return e.mode&1?jt&2&&Ri!==0?Ri&-Ri:coe.transition!==null?(s_===0&&(s_=i9()),s_):(e=en,e!==0||(e=window.event,e=e===void 0?16:c9(e.type)),e):1}function Pa(e,t,n,i){if(50<z0)throw z0=0,pT=null,Error(_e(185));dv(e,n,i),(!(jt&2)||e!==gi)&&(e===gi&&(!(jt&2)&&(d2|=n),Jn===4&&ku(e,Ri)),Ur(e,i),n===1&&jt===0&&!(t.mode&1)&&(Ap=Ln()+500,l2&&Mc()))}function Ur(e,t){var n=e.callbackNode;cre(e,t);var i=z_(e,e===gi?Ri:0);if(i===0)n!==null&&qL(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&qL(n),t===1)e.tag===0?uoe(L5.bind(null,e)):A9(L5.bind(null,e)),ooe(function(){!(jt&6)&&Mc()}),n=null;else{switch(r9(i)){case 1:n=gF;break;case 4:n=t9;break;case 16:n=j_;break;case 536870912:n=n9;break;default:n=j_}n=T7(n,b7.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function b7(e,t){if(a_=-1,s_=0,jt&6)throw Error(_e(327));var n=e.callbackNode;if(up()&&e.callbackNode!==n)return null;var i=z_(e,e===gi?Ri:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=rb(e,i);else{t=i;var r=jt;jt|=2;var o=S7();(gi!==e||Ri!==t)&&(rl=null,Ap=Ln()+500,Df(e,t));do try{Moe();break}catch(s){w7(e,s)}while(!0);AF(),tb.current=o,jt=r,Gn!==null?t=0:(gi=null,Ri=0,t=Jn)}if(t!==0){if(t===2&&(r=BR(e),r!==0&&(i=r,t=mT(e,r))),t===1)throw n=by,Df(e,0),ku(e,i),Ur(e,Ln()),n;if(t===6)ku(e,i);else{if(r=e.current.alternate,!(i&30)&&!Toe(r)&&(t=rb(e,i),t===2&&(o=BR(e),o!==0&&(i=o,t=mT(e,o))),t===1))throw n=by,Df(e,0),ku(e,i),Ur(e,Ln()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(_e(345));case 2:yf(e,Ir,rl);break;case 3:if(ku(e,i),(i&130023424)===i&&(t=WF+500-Ln(),10<t)){if(z_(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){pr(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ZR(yf.bind(null,e,Ir,rl),t);break}yf(e,Ir,rl);break;case 4:if(ku(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-Fa(i);o=1<<a,a=t[a],a>r&&(r=a),i&=~o}if(i=r,i=Ln()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Roe(i/1960))-i,10<i){e.timeoutHandle=ZR(yf.bind(null,e,Ir,rl),i);break}yf(e,Ir,rl);break;case 5:yf(e,Ir,rl);break;default:throw Error(_e(329))}}}return Ur(e,Ln()),e.callbackNode===n?b7.bind(null,e):null}function mT(e,t){var n=j0;return e.current.memoizedState.isDehydrated&&(Df(e,t).flags|=256),e=rb(e,t),e!==2&&(t=Ir,Ir=n,t!==null&&gT(t)),e}function gT(e){Ir===null?Ir=e:Ir.push.apply(Ir,e)}function Toe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Oa(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ku(e,t){for(t&=~UF,t&=~d2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fa(t),i=1<<n;e[n]=-1,t&=~i}}function L5(e){if(jt&6)throw Error(_e(327));up();var t=z_(e,0);if(!(t&1))return Ur(e,Ln()),null;var n=rb(e,t);if(e.tag!==0&&n===2){var i=BR(e);i!==0&&(t=i,n=mT(e,i))}if(n===1)throw n=by,Df(e,0),ku(e,t),Ur(e,Ln()),n;if(n===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yf(e,Ir,rl),Ur(e,Ln()),null}function GF(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(Ap=Ln()+500,l2&&Mc())}}function td(e){Fu!==null&&Fu.tag===0&&!(jt&6)&&up();var t=jt;jt|=1;var n=Uo.transition,i=en;try{if(Uo.transition=null,en=1,e)return e()}finally{en=i,Uo.transition=n,jt=t,!(jt&6)&&Mc()}}function qF(){ro=Xh.current,gn(Xh)}function Df(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,roe(n)),Gn!==null)for(n=Gn.return;n!==null;){var i=n;switch(kF(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&G_();break;case 3:Rp(),gn(Br),gn(Ji),IF();break;case 5:$F(i);break;case 4:Rp();break;case 13:gn(kn);break;case 19:gn(kn);break;case 10:MF(i.type._context);break;case 22:case 23:qF()}n=n.return}if(gi=e,Gn=e=Ku(e.current,null),Ri=ro=t,Jn=0,by=null,UF=d2=ed=0,Ir=j0=null,Af!==null){for(t=0;t<Af.length;t++)if(n=Af[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Af=null}return e}function w7(e,t){do{var n=Gn;try{if(AF(),i_.current=eb,Q_){for(var i=Rn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Q_=!1}if(Qf=0,li=Zn=Rn=null,D0=!1,vy=0,HF.current=null,n===null||n.return===null){Jn=1,by=t,Gn=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Ri,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=E5(a);if(m!==null){m.flags&=-257,k5(m,a,s,o,t),m.mode&1&&C5(o,u,t),t=m,l=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break e}else{if(!(t&1)){C5(o,u,t),VF();break e}l=Error(_e(426))}}else if(bn&&s.mode&1){var x=E5(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),k5(x,a,s,o,t),RF(Tp(l,s));break e}}o=l=Tp(l,s),Jn!==4&&(Jn=2),j0===null?j0=[o]:j0.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=o7(o,l,t);y5(o,b);break e;case 1:s=l;var w=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Zu===null||!Zu.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=a7(o,s,t);y5(o,k);break e}}o=o.return}while(o!==null)}E7(n)}catch(R){t=R,Gn===n&&n!==null&&(Gn=n=n.return);continue}break}while(!0)}function S7(){var e=tb.current;return tb.current=eb,e===null?eb:e}function VF(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),gi===null||!(ed&268435455)&&!(d2&268435455)||ku(gi,Ri)}function rb(e,t){var n=jt;jt|=2;var i=S7();(gi!==e||Ri!==t)&&(rl=null,Df(e,t));do try{Aoe();break}catch(r){w7(e,r)}while(!0);if(AF(),jt=n,tb.current=i,Gn!==null)throw Error(_e(261));return gi=null,Ri=0,Jn}function Aoe(){for(;Gn!==null;)C7(Gn)}function Moe(){for(;Gn!==null&&!tre();)C7(Gn)}function C7(e){var t=R7(e.alternate,e,ro);e.memoizedProps=e.pendingProps,t===null?E7(e):Gn=t,HF.current=null}function E7(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Soe(n,t),n!==null){n.flags&=32767,Gn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Jn=6,Gn=null;return}}else if(n=woe(n,t,ro),n!==null){Gn=n;return}if(t=t.sibling,t!==null){Gn=t;return}Gn=t=e}while(t!==null);Jn===0&&(Jn=5)}function yf(e,t,n){var i=en,r=Uo.transition;try{Uo.transition=null,en=1,Foe(e,t,n,i)}finally{Uo.transition=r,en=i}return null}function Foe(e,t,n,i){do up();while(Fu!==null);if(jt&6)throw Error(_e(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(fre(e,o),e===gi&&(Gn=gi=null,Ri=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rx||(rx=!0,T7(j_,function(){return up(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Uo.transition,Uo.transition=null;var a=en;en=1;var s=jt;jt|=4,HF.current=null,Eoe(e,n),x7(n,e),Kre(VR),B_=!!qR,VR=qR=null,e.current=n,koe(n),nre(),jt=s,en=a,Uo.transition=o}else e.current=n;if(rx&&(rx=!1,Fu=e,ib=r),o=e.pendingLanes,o===0&&(Zu=null),ore(n.stateNode),Ur(e,Ln()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(nb)throw nb=!1,e=hT,hT=null,e;return ib&1&&e.tag!==0&&up(),o=e.pendingLanes,o&1?e===pT?z0++:(z0=0,pT=e):z0=0,Mc(),null}function up(){if(Fu!==null){var e=r9(ib),t=Uo.transition,n=en;try{if(Uo.transition=null,en=16>e?16:e,Fu===null)var i=!1;else{if(e=Fu,Fu=null,ib=0,jt&6)throw Error(_e(331));var r=jt;for(jt|=4,ze=e.current;ze!==null;){var o=ze,a=o.child;if(ze.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ze=u;ze!==null;){var c=ze;switch(c.tag){case 0:case 11:case 15:L0(8,c,o)}var d=c.child;if(d!==null)d.return=c,ze=d;else for(;ze!==null;){c=ze;var h=c.sibling,m=c.return;if(g7(c),c===u){ze=null;break}if(h!==null){h.return=m,ze=h;break}ze=m}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ze=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ze=a;else e:for(;ze!==null;){if(o=ze,o.flags&2048)switch(o.tag){case 0:case 11:case 15:L0(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ze=b;break e}ze=o.return}}var w=e.current;for(ze=w;ze!==null;){a=ze;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ze=S;else e:for(a=w;ze!==null;){if(s=ze,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:f2(9,s)}}catch(R){Pn(s,s.return,R)}if(s===a){ze=null;break e}var k=s.sibling;if(k!==null){k.return=s.return,ze=k;break e}ze=s.return}}if(jt=r,Mc(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(i2,e)}catch{}i=!0}return i}finally{en=n,Uo.transition=t}}return!1}function j5(e,t,n){t=Tp(n,t),t=o7(e,t,1),e=Yu(e,t,1),t=pr(),e!==null&&(dv(e,1,t),Ur(e,t))}function Pn(e,t,n){if(e.tag===3)j5(e,e,n);else for(;t!==null;){if(t.tag===3){j5(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Zu===null||!Zu.has(i))){e=Tp(n,e),e=a7(t,e,1),t=Yu(t,e,1),e=pr(),t!==null&&(dv(t,1,e),Ur(t,e));break}}t=t.return}}function Poe(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=pr(),e.pingedLanes|=e.suspendedLanes&n,gi===e&&(Ri&n)===n&&(Jn===4||Jn===3&&(Ri&130023424)===Ri&&500>Ln()-WF?Df(e,0):UF|=n),Ur(e,t)}function k7(e,t){t===0&&(e.mode&1?(t=Y1,Y1<<=1,!(Y1&130023424)&&(Y1=4194304)):t=1);var n=pr();e=Il(e,t),e!==null&&(dv(e,t,n),Ur(e,n))}function Noe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),k7(e,n)}function $oe(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(_e(314))}i!==null&&i.delete(t),k7(e,n)}var R7;R7=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Br.current)jr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return jr=!1,boe(e,t,n);jr=!!(e.flags&131072)}else jr=!1,bn&&t.flags&1048576&&M9(t,Y_,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;o_(e,t),e=t.pendingProps;var r=Cp(t,Ji.current);lp(t,n),r=DF(null,t,i,e,r,n);var o=LF();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hr(i)?(o=!0,q_(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,PF(t),r.updater=u2,t.stateNode=r,r._reactInternals=t,nT(t,i,e,n),t=oT(null,t,i,!0,o,n)):(t.tag=0,bn&&o&&EF(t),sr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(o_(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=Ooe(i),e=ma(i,e),r){case 0:t=rT(null,t,i,e,n);break e;case 1:t=A5(null,t,i,e,n);break e;case 11:t=R5(null,t,i,e,n);break e;case 14:t=T5(null,t,i,ma(i.type,e),n);break e}throw Error(_e(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),rT(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),A5(e,t,i,r,n);case 3:e:{if(c7(t),e===null)throw Error(_e(387));i=t.pendingProps,o=t.memoizedState,r=o.element,$9(e,t),K_(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=Tp(Error(_e(423)),t),t=M5(e,t,i,n,r);break e}else if(i!==r){r=Tp(Error(_e(424)),t),t=M5(e,t,i,n,r);break e}else for(uo=Vu(t.stateNode.containerInfo.firstChild),po=t,bn=!0,_a=null,n=L9(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ep(),i===r){t=Ol(e,t,n);break e}sr(e,t,i,n)}t=t.child}return t;case 5:return j9(t),e===null&&QR(t),i=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,a=r.children,YR(i,r)?a=null:o!==null&&YR(i,o)&&(t.flags|=32),u7(e,t),sr(e,t,a,n),t.child;case 6:return e===null&&QR(t),null;case 13:return f7(e,t,n);case 4:return NF(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=kp(t,null,i,n):sr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),R5(e,t,i,r,n);case 7:return sr(e,t,t.pendingProps,n),t.child;case 8:return sr(e,t,t.pendingProps.children,n),t.child;case 12:return sr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,un(Z_,i._currentValue),i._currentValue=a,o!==null)if(Oa(o.value,a)){if(o.children===r.children&&!Br.current){t=Ol(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=Sl(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),eT(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(_e(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),eT(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}sr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,lp(t,n),r=qo(r),i=i(r),t.flags|=1,sr(e,t,i,n),t.child;case 14:return i=t.type,r=ma(i,t.pendingProps),r=ma(i.type,r),T5(e,t,i,r,n);case 15:return s7(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),o_(e,t),t.tag=1,Hr(i)?(e=!0,q_(t)):e=!1,lp(t,n),O9(t,i,r),nT(t,i,r,n),oT(null,t,i,!0,e,n);case 19:return d7(e,t,n);case 22:return l7(e,t,n)}throw Error(_e(156,t.tag))};function T7(e,t){return e9(e,t)}function Ioe(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lo(e,t,n,i){return new Ioe(e,t,n,i)}function YF(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ooe(e){if(typeof e=="function")return YF(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hF)return 11;if(e===pF)return 14}return 2}function Ku(e,t){var n=e.alternate;return n===null?(n=Lo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function l_(e,t,n,i,r,o){var a=2;if(i=e,typeof e=="function")YF(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case zh:return Lf(n.children,r,o,t);case dF:a=8,r|=8;break;case kR:return e=Lo(12,n,t,r|2),e.elementType=kR,e.lanes=o,e;case RR:return e=Lo(13,n,t,r),e.elementType=RR,e.lanes=o,e;case TR:return e=Lo(19,n,t,r),e.elementType=TR,e.lanes=o,e;case D8:return h2(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I8:a=10;break e;case O8:a=9;break e;case hF:a=11;break e;case pF:a=14;break e;case yu:a=16,i=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=Lo(a,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function Lf(e,t,n,i){return e=Lo(7,e,i,t),e.lanes=n,e}function h2(e,t,n,i){return e=Lo(22,e,i,t),e.elementType=D8,e.lanes=n,e.stateNode={isHidden:!1},e}function LE(e,t,n){return e=Lo(6,e,null,t),e.lanes=n,e}function jE(e,t,n){return t=Lo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Doe(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xE(0),this.expirationTimes=xE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xE(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ZF(e,t,n,i,r,o,a,s,l){return e=new Doe(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Lo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},PF(o),e}function Loe(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function A7(e){if(!e)return ac;e=e._reactInternals;e:{if(Md(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var n=e.type;if(Hr(n))return T9(e,n,t)}return t}function M7(e,t,n,i,r,o,a,s,l){return e=ZF(n,i,!0,e,r,o,a,s,l),e.context=A7(null),n=e.current,i=pr(),r=Xu(n),o=Sl(i,r),o.callback=t??null,Yu(n,o,r),e.current.lanes=r,dv(e,r,i),Ur(e,i),e}function p2(e,t,n,i){var r=t.current,o=pr(),a=Xu(r);return n=A7(n),t.context===null?t.context=n:t.pendingContext=n,t=Sl(o,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Yu(r,t,a),e!==null&&(Pa(e,r,a,o),n_(e,r,a)),a}function ob(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function z5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function XF(e,t){z5(e,t),(e=e.alternate)&&z5(e,t)}function joe(){return null}var F7=typeof reportError=="function"?reportError:function(e){console.error(e)};function KF(e){this._internalRoot=e}m2.prototype.render=KF.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));p2(e,t,null,null)};m2.prototype.unmount=KF.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;td(function(){p2(null,e,null,null)}),t[$l]=null}};function m2(e){this._internalRoot=e}m2.prototype.unstable_scheduleHydration=function(e){if(e){var t=s9();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Eu.length&&t!==0&&t<Eu[n].priority;n++);Eu.splice(n,0,e),n===0&&u9(e)}};function JF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function B5(){}function zoe(e,t,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var u=ob(a);o.call(u)}}var a=M7(t,i,e,0,null,!1,!1,"",B5);return e._reactRootContainer=a,e[$l]=a.current,hy(e.nodeType===8?e.parentNode:e),td(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var s=i;i=function(){var u=ob(l);s.call(u)}}var l=ZF(e,0,!1,null,null,!1,!1,"",B5);return e._reactRootContainer=l,e[$l]=l.current,hy(e.nodeType===8?e.parentNode:e),td(function(){p2(t,l,n,i)}),l}function y2(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var s=r;r=function(){var l=ob(a);s.call(l)}}p2(t,a,e,r)}else a=zoe(n,t,e,r,i);return ob(a)}o9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=r0(t.pendingLanes);n!==0&&(yF(t,n|1),Ur(t,Ln()),!(jt&6)&&(Ap=Ln()+500,Mc()))}break;case 13:td(function(){var i=Il(e,1);if(i!==null){var r=pr();Pa(i,e,1,r)}}),XF(e,1)}};vF=function(e){if(e.tag===13){var t=Il(e,134217728);if(t!==null){var n=pr();Pa(t,e,134217728,n)}XF(e,134217728)}};a9=function(e){if(e.tag===13){var t=Xu(e),n=Il(e,t);if(n!==null){var i=pr();Pa(n,e,t,i)}XF(e,t)}};s9=function(){return en};l9=function(e,t){var n=en;try{return en=e,t()}finally{en=n}};LR=function(e,t,n){switch(t){case"input":if(FR(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=s2(i);if(!r)throw Error(_e(90));j8(i),FR(i,r)}}}break;case"textarea":B8(e,n);break;case"select":t=n.value,t!=null&&rp(e,!!n.multiple,t,!1)}};Y8=GF;Z8=td;var Boe={usingClientEntryPoint:!1,Events:[pv,Wh,s2,q8,V8,GF]},Cg={findFiberByHostInstance:Tf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Hoe={bundleType:Cg.bundleType,version:Cg.version,rendererPackageName:Cg.rendererPackageName,rendererConfig:Cg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J8(e),e===null?null:e.stateNode},findFiberByHostInstance:Cg.findFiberByHostInstance||joe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ox.isDisabled&&ox.supportsFiber)try{i2=ox.inject(Hoe),gs=ox}catch{}}Co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Boe;Co.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JF(t))throw Error(_e(200));return Loe(e,t,null,n)};Co.createRoot=function(e,t){if(!JF(e))throw Error(_e(299));var n=!1,i="",r=F7;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=ZF(e,1,!1,null,null,n,!1,i,r),e[$l]=t.current,hy(e.nodeType===8?e.parentNode:e),new KF(t)};Co.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=J8(t),e=e===null?null:e.stateNode,e};Co.flushSync=function(e){return td(e)};Co.hydrate=function(e,t,n){if(!g2(t))throw Error(_e(200));return y2(null,e,t,!0,n)};Co.hydrateRoot=function(e,t,n){if(!JF(e))throw Error(_e(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=F7;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=M7(t,null,e,1,n??null,r,!1,o,a),e[$l]=t.current,hy(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new m2(t)};Co.render=function(e,t,n){if(!g2(t))throw Error(_e(200));return y2(null,e,t,!1,n)};Co.unmountComponentAtNode=function(e){if(!g2(e))throw Error(_e(40));return e._reactRootContainer?(td(function(){y2(null,null,e,!1,function(){e._reactRootContainer=null,e[$l]=null})}),!0):!1};Co.unstable_batchedUpdates=GF;Co.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!g2(n))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return y2(e,t,n,!1,i)};Co.version="18.2.0-next-9e3b772b8-20220608";function P7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P7)}catch(e){console.error(e)}}P7(),M8.exports=Co;var v2=M8.exports;const Ff=Td(v2);var H5=v2;CR.createRoot=H5.createRoot,CR.hydrateRoot=H5.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wy.apply(this,arguments)}var Pu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pu||(Pu={}));const U5="popstate";function Uoe(e){e===void 0&&(e={});function t(r,o){let{pathname:a="/",search:s="",hash:l=""}=Fd(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),yT("",{pathname:a,search:s,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let l=r.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof o=="string"?o:N7(o))}function i(r,o){x2(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Goe(t,n,i,e)}function ti(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function x2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Woe(){return Math.random().toString(36).substr(2,8)}function W5(e,t){return{usr:e.state,key:e.key,idx:t}}function yT(e,t,n,i){return n===void 0&&(n=null),wy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Fd(t):t,{state:n,key:t&&t.key||i||Woe()})}function N7(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Fd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Goe(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,s=Pu.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(wy({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){s=Pu.Pop;let x=c(),b=x==null?null:x-u;u=x,l&&l({action:s,location:y.location,delta:b})}function h(x,b){s=Pu.Push;let w=yT(y.location,x,b);n&&n(w,x),u=c()+1;let S=W5(w,u),k=y.createHref(w);try{a.pushState(S,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(k)}o&&l&&l({action:s,location:y.location,delta:1})}function m(x,b){s=Pu.Replace;let w=yT(y.location,x,b);n&&n(w,x),u=c();let S=W5(w,u),k=y.createHref(w);a.replaceState(S,"",k),o&&l&&l({action:s,location:y.location,delta:0})}function g(x){let b=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof x=="string"?x:N7(x);return ti(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return s},get location(){return e(r,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(U5,d),l=x,()=>{r.removeEventListener(U5,d),l=null}},createHref(x){return t(r,x)},createURL:g,encodeLocation(x){let b=g(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(x){return a.go(x)}};return y}var G5;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(G5||(G5={}));function qoe(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?Fd(t):t,r=O7(i.pathname||"/",n);if(r==null)return null;let o=$7(e);Voe(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=nae(o[s],oae(r));return a}function $7(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(ti(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=jf([i,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(ti(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),$7(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:eae(u,o.index),routesMeta:c})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))r(o,a);else for(let l of I7(o.path))r(o,a,l)}),t}function I7(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=I7(i.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),r&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function Voe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tae(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Yoe=/^:[\w-]+$/,Zoe=3,Xoe=2,Koe=1,Joe=10,Qoe=-2,q5=e=>e==="*";function eae(e,t){let n=e.split("/"),i=n.length;return n.some(q5)&&(i+=Qoe),t&&(i+=Xoe),n.filter(r=>!q5(r)).reduce((r,o)=>r+(Yoe.test(o)?Zoe:o===""?Koe:Joe),i)}function tae(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function nae(e,t){let{routesMeta:n}=e,i={},r="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],l=a===n.length-1,u=r==="/"?t:t.slice(r.length)||"/",c=iae({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(i,c.params);let d=s.route;o.push({params:i,pathname:jf([r,c.pathname]),pathnameBase:dae(jf([r,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(r=jf([r,c.pathnameBase]))}return o}function iae(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=rae(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:i.reduce((u,c,d)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let y=s[d]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=s[d];return m&&!g?u[h]=void 0:u[h]=aae(g||"",h),u},{}),pathname:o,pathnameBase:a,pattern:e}}function rae(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),x2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(i.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function oae(e){try{return decodeURI(e)}catch(t){return x2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function aae(e,t){try{return decodeURIComponent(e)}catch(n){return x2(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function O7(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function sae(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Fd(e):e;return{pathname:n?n.startsWith("/")?n:lae(n,t):t,search:hae(i),hash:pae(r)}}function lae(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function zE(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uae(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cae(e,t){let n=uae(e);return t?n.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function fae(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=Fd(e):(r=wy({},e),ti(!r.pathname||!r.pathname.includes("?"),zE("?","pathname","search",r)),ti(!r.pathname||!r.pathname.includes("#"),zE("#","pathname","hash",r)),ti(!r.search||!r.search.includes("#"),zE("#","search","hash",r)));let o=e===""||r.pathname==="",a=o?"/":r.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}s=d>=0?t[d]:"/"}let l=sae(r,s),u=a&&a!=="/"&&a.endsWith("/"),c=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const jf=e=>e.join("/").replace(/\/\/+/g,"/"),dae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const D7=["post","put","patch","delete"];new Set(D7);const gae=["get",...D7];new Set(gae);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sy.apply(this,arguments)}const QF=P.createContext(null),yae=P.createContext(null),_2=P.createContext(null),b2=P.createContext(null),Pd=P.createContext({outlet:null,matches:[],isDataRoute:!1}),L7=P.createContext(null);function w2(){return P.useContext(b2)!=null}function eP(){return w2()||ti(!1),P.useContext(b2).location}function j7(e){P.useContext(_2).static||P.useLayoutEffect(e)}function vae(){let{isDataRoute:e}=P.useContext(Pd);return e?Nae():xae()}function xae(){w2()||ti(!1);let e=P.useContext(QF),{basename:t,future:n,navigator:i}=P.useContext(_2),{matches:r}=P.useContext(Pd),{pathname:o}=eP(),a=JSON.stringify(cae(r,n.v7_relativeSplatPath)),s=P.useRef(!1);return j7(()=>{s.current=!0}),P.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){i.go(u);return}let d=fae(u,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:jf([t,d.pathname])),(c.replace?i.replace:i.push)(d,c.state,c)},[t,i,a,o,e])}const _ae=P.createContext(null);function bae(e){let t=P.useContext(Pd).outlet;return t&&P.createElement(_ae.Provider,{value:e},t)}function wae(e,t){return Sae(e,t)}function Sae(e,t,n,i){w2()||ti(!1);let{navigator:r}=P.useContext(_2),{matches:o}=P.useContext(Pd),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=eP(),c;if(t){var d;let x=typeof t=="string"?Fd(t):t;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||ti(!1),c=x}else c=u;let h=c.pathname||"/",m=l==="/"?h:h.slice(l.length)||"/",g=qoe(e,{pathname:m}),y=Tae(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},s,x.params),pathname:jf([l,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:jf([l,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,i);return t&&y?P.createElement(b2.Provider,{value:{location:Sy({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Pu.Pop}},y):y}function Cae(){let e=Pae(),t=mae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:r},n):null,null)}const Eae=P.createElement(Cae,null);class kae extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?P.createElement(Pd.Provider,{value:this.props.routeContext},P.createElement(L7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rae(e){let{routeContext:t,match:n,children:i}=e,r=P.useContext(QF);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Pd.Provider,{value:t},i)}function Tae(e,t,n,i){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let a=e,s=(r=n)==null?void 0:r.errors;if(s!=null){let c=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id]));c>=0||ti(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,h)=>{let m,g=!1,y=null,x=null;n&&(m=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||Eae,l&&(u<0&&h===0?($ae("route-fallback",!1),g=!0,x=null):u===h&&(g=!0,x=d.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,h+1)),w=()=>{let S;return m?S=y:g?S=x:d.route.Component?S=P.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=c,P.createElement(Rae,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(kae,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var z7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(z7||{}),ab=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ab||{});function Aae(e){let t=P.useContext(QF);return t||ti(!1),t}function Mae(e){let t=P.useContext(yae);return t||ti(!1),t}function Fae(e){let t=P.useContext(Pd);return t||ti(!1),t}function B7(e){let t=Fae(),n=t.matches[t.matches.length-1];return n.route.id||ti(!1),n.route.id}function Pae(){var e;let t=P.useContext(L7),n=Mae(ab.UseRouteError),i=B7(ab.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function Nae(){let{router:e}=Aae(z7.UseNavigateStable),t=B7(ab.UseNavigateStable),n=P.useRef(!1);return j7(()=>{n.current=!0}),P.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Sy({fromRouteId:t},o)))},[e,t])}const V5={};function $ae(e,t,n){!t&&!V5[e]&&(V5[e]=!0)}function Iae(e){return bae(e.context)}function No(e){ti(!1)}function Oae(e){let{basename:t="/",children:n=null,location:i,navigationType:r=Pu.Pop,navigator:o,static:a=!1,future:s}=e;w2()&&ti(!1);let l=t.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:l,navigator:o,static:a,future:Sy({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof i=="string"&&(i=Fd(i));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:g="default"}=i,y=P.useMemo(()=>{let x=O7(c,l);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:g},navigationType:r}},[l,c,d,h,m,g,r]);return y==null?null:P.createElement(_2.Provider,{value:u},P.createElement(b2.Provider,{children:n,value:y}))}function Dae(e){let{children:t,location:n}=e;return wae(vT(t),n)}new Promise(()=>{});function vT(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(i,r)=>{if(!P.isValidElement(i))return;let o=[...t,r];if(i.type===P.Fragment){n.push.apply(n,vT(i.props.children,o));return}i.type!==No&&ti(!1),!i.props.index||!i.props.children||ti(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=vT(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Lae="startTransition",Y5=Nie[Lae];function jae(e){let{basename:t,children:n,future:i,window:r}=e,o=P.useRef();o.current==null&&(o.current=Uoe({window:r,v5Compat:!0}));let a=o.current,[s,l]=P.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},c=P.useCallback(d=>{u&&Y5?Y5(()=>l(d)):l(d)},[l,u]);return P.useLayoutEffect(()=>a.listen(c),[a,c]),P.createElement(Oae,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:i})}var Z5;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Z5||(Z5={}));var X5;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(X5||(X5={}));var H7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=r(o,i(s)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=r(a,s));return a}function r(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(H7);var zae=H7.exports;const De=Td(zae);function xT(){return xT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xT.apply(this,arguments)}function U7(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function K5(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Bae(e){var t=Hae(e,"string");return typeof t=="symbol"?t:String(t)}function Hae(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W7(e,t,n){var i=P.useRef(e!==void 0),r=P.useState(t),o=r[0],a=r[1],s=e!==void 0,l=i.current;return i.current=s,!s&&l&&o!==t&&a(t),[s?e:o,P.useCallback(function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];n&&n.apply(void 0,[u].concat(d)),a(u)},[n])]}function gv(e,t){return Object.keys(t).reduce(function(n,i){var r,o=n,a=o[K5(i)],s=o[i],l=U7(o,[K5(i),i].map(Bae)),u=t[i],c=W7(s,a,e[u]),d=c[0],h=c[1];return xT({},l,(r={},r[i]=d,r[u]=h,r))},e)}function _T(e,t){return _T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},_T(e,t)}function Uae(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_T(e,t)}const Wae=["xxl","xl","lg","md","sm","xs"],Gae="xs",S2=P.createContext({prefixes:{},breakpoints:Wae,minBreakpoint:Gae});function We(e,t){const{prefixes:n}=P.useContext(S2);return e||n[t]||t}function G7(){const{breakpoints:e}=P.useContext(S2);return e}function q7(){const{minBreakpoint:e}=P.useContext(S2);return e}function C2(){const{dir:e}=P.useContext(S2);return e==="rtl"}function ym(e){return e&&e.ownerDocument||document}function qae(e){var t=ym(e);return t&&t.defaultView||window}function Vae(e,t){return qae(e).getComputedStyle(e,t)}var Yae=/([A-Z])/g;function Zae(e){return e.replace(Yae,"-$1").toLowerCase()}var Xae=/^ms-/;function ax(e){return Zae(e).replace(Xae,"-ms-")}var Kae=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Jae(e){return!!(e&&Kae.test(e))}function Cl(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(ax(t))||Vae(e).getPropertyValue(ax(t));Object.keys(t).forEach(function(r){var o=t[r];!o&&o!==0?e.style.removeProperty(ax(r)):Jae(r)?i+=r+"("+o+") ":n+=ax(r)+": "+o+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}var V7={exports:{}},Qae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ese=Qae,tse=ese;function Y7(){}function Z7(){}Z7.resetWarningCache=Y7;var nse=function(){function e(i,r,o,a,s,l){if(l!==tse){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Z7,resetWarningCache:Y7};return n.PropTypes=n,n};V7.exports=nse();var ise=V7.exports;const _n=Td(ise),J5={disabled:!1},X7=$t.createContext(null);var rse=function(t){return t.scrollTop},a0="unmounted",xu="exited",ba="entering",fl="entered",Cy="exiting",Gl=function(e){Uae(t,e);function t(i,r){var o;o=e.call(this,i,r)||this;var a=r,s=a&&!a.isMounting?i.enter:i.appear,l;return o.appearStatus=null,i.in?s?(l=xu,o.appearStatus=ba):l=fl:i.unmountOnExit||i.mountOnEnter?l=a0:l=xu,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(r,o){var a=r.in;return a&&o.status===a0?{status:xu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var o=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==ba&&a!==fl&&(o=ba):(a===ba||a===fl)&&(o=Cy)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,o,a,s;return o=a=s=r,r!=null&&typeof r!="number"&&(o=r.exit,a=r.enter,s=r.appear!==void 0?r.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===ba){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Ff.findDOMNode(this);a&&rse(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xu&&this.setState({status:a0})},n.performEnter=function(r){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:r,l=this.props.nodeRef?[s]:[Ff.findDOMNode(this),s],u=l[0],c=l[1],d=this.getTimeouts(),h=s?d.appear:d.enter;if(!r&&!a||J5.disabled){this.safeSetState({status:fl},function(){o.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:ba},function(){o.props.onEntering(u,c),o.onTransitionEnd(h,function(){o.safeSetState({status:fl},function(){o.props.onEntered(u,c)})})})},n.performExit=function(){var r=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:Ff.findDOMNode(this);if(!o||J5.disabled){this.safeSetState({status:xu},function(){r.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:Cy},function(){r.props.onExiting(s),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:xu},function(){r.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},n.setNextCallback=function(r){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,r(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:Ff.findDOMNode(this),s=r==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===a0)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=U7(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return $t.createElement(X7.Provider,{value:null},typeof a=="function"?a(r,s):$t.cloneElement($t.Children.only(a),s))},t}($t.Component);Gl.contextType=X7;Gl.propTypes={};function vh(){}Gl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vh,onEntering:vh,onEntered:vh,onExit:vh,onExiting:vh,onExited:vh};Gl.UNMOUNTED=a0;Gl.EXITED=xu;Gl.ENTERING=ba;Gl.ENTERED=fl;Gl.EXITING=Cy;const ose=Gl,vm=!!(typeof window<"u"&&window.document&&window.document.createElement);var bT=!1,wT=!1;try{var BE={get passive(){return bT=!0},get once(){return wT=bT=!0}};vm&&(window.addEventListener("test",BE,BE),window.removeEventListener("test",BE,!0))}catch{}function K7(e,t,n,i){if(i&&typeof i!="boolean"&&!wT){var r=i.once,o=i.capture,a=n;!wT&&r&&(a=n.__once||function s(l){this.removeEventListener(t,s,o),n.call(this,l)},n.__once=a),e.addEventListener(t,a,bT?i:o)}e.addEventListener(t,n,i)}function ST(e,t,n,i){var r=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function gl(e,t,n,i){return K7(e,t,n,i),function(){ST(e,t,n,i)}}function ase(e,t,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,i),e.dispatchEvent(r)}}function sse(e){var t=Cl(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function lse(e,t,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||ase(e,"transitionend",!0)},t+n),o=gl(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),o()}}function J7(e,t,n,i){n==null&&(n=sse(e)||0);var r=lse(e,n,i),o=gl(e,"transitionend",t);return function(){r(),o()}}function Q5(e,t){const n=Cl(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function E2(e,t){const n=Q5(e,"transitionDuration"),i=Q5(e,"transitionDelay"),r=J7(e,o=>{o.target===e&&(r(),t(o))},n+i)}function Eg(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...r){t.apply(this,r),n.apply(this,r)}},null)}function tP(e){e.offsetHeight}const e3=e=>!e||typeof e=="function"?e:t=>{e.current=t};function use(e,t){const n=e3(e),i=e3(t);return r=>{n&&n(r),i&&i(r)}}function Fc(e,t){return P.useMemo(()=>use(e,t),[e,t])}function sb(e){return e&&"setState"in e?Ff.findDOMNode(e):e??null}const cse=$t.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,onExited:o,addEndListener:a,children:s,childRef:l,...u},c)=>{const d=P.useRef(null),h=Fc(d,l),m=M=>{h(sb(M))},g=M=>T=>{M&&d.current&&M(d.current,T)},y=P.useCallback(g(e),[e]),x=P.useCallback(g(t),[t]),b=P.useCallback(g(n),[n]),w=P.useCallback(g(i),[i]),S=P.useCallback(g(r),[r]),k=P.useCallback(g(o),[o]),R=P.useCallback(g(a),[a]);return v.jsx(ose,{ref:c,...u,onEnter:y,onEntered:b,onEntering:x,onExit:w,onExited:k,onExiting:S,addEndListener:R,nodeRef:d,children:typeof s=="function"?(M,T)=>s(M,{...T,ref:m}):$t.cloneElement(s,{ref:m})})}),k2=cse,fse={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function dse(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,i=t[n],r=fse[e];return i+parseInt(Cl(t,r[0]),10)+parseInt(Cl(t,r[1]),10)}const hse={[xu]:"collapse",[Cy]:"collapsing",[ba]:"collapsing",[fl]:"collapse show"},pse=$t.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,className:o,children:a,dimension:s="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:d=!1,appear:h=!1,getDimensionValue:m=dse,...g},y)=>{const x=typeof s=="function"?s():s,b=P.useMemo(()=>Eg(M=>{M.style[x]="0"},e),[x,e]),w=P.useMemo(()=>Eg(M=>{const T=`scroll${x[0].toUpperCase()}${x.slice(1)}`;M.style[x]=`${M[T]}px`},t),[x,t]),S=P.useMemo(()=>Eg(M=>{M.style[x]=null},n),[x,n]),k=P.useMemo(()=>Eg(M=>{M.style[x]=`${m(x,M)}px`,tP(M)},i),[i,m,x]),R=P.useMemo(()=>Eg(M=>{M.style[x]=null},r),[x,r]);return v.jsx(k2,{ref:y,addEndListener:E2,...g,"aria-expanded":g.role?l:null,onEnter:b,onEntering:w,onEntered:S,onExit:k,onExiting:R,childRef:a.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:d,appear:h,children:(M,T)=>$t.cloneElement(a,{...T,className:De(o,a.props.className,hse[M],x==="width"&&"collapse-horizontal")})})}),Q7=pse;function eH(e,t){return Array.isArray(e)?e.includes(t):e===t}const tH=P.createContext({});tH.displayName="AccordionContext";const R2=tH,nH=P.forwardRef(({as:e="div",bsPrefix:t,className:n,children:i,eventKey:r,...o},a)=>{const{activeEventKey:s}=P.useContext(R2);return t=We(t,"accordion-collapse"),v.jsx(Q7,{ref:a,in:eH(s,r),...o,className:De(n,t),children:v.jsx(e,{children:P.Children.only(i)})})});nH.displayName="AccordionCollapse";const iH=nH,rH=P.createContext({eventKey:""});rH.displayName="AccordionItemContext";const nP=rH,oH=P.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:i,onEntering:r,onEntered:o,onExit:a,onExiting:s,onExited:l,...u},c)=>{t=We(t,"accordion-body");const{eventKey:d}=P.useContext(nP);return v.jsx(iH,{eventKey:d,onEnter:i,onEntering:r,onEntered:o,onExit:a,onExiting:s,onExited:l,children:v.jsx(e,{ref:c,...u,className:De(n,t)})})});oH.displayName="AccordionBody";const mse=oH;function gse(e,t){const{activeEventKey:n,onSelect:i,alwaysOpen:r}=P.useContext(R2);return o=>{let a=e===n?null:e;r&&(Array.isArray(n)?n.includes(e)?a=n.filter(s=>s!==e):a=[...n,e]:a=[e]),i==null||i(a,o),t==null||t(o)}}const aH=P.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:i,...r},o)=>{t=We(t,"accordion-button");const{eventKey:a}=P.useContext(nP),s=gse(a,i),{activeEventKey:l}=P.useContext(R2);return e==="button"&&(r.type="button"),v.jsx(e,{ref:o,onClick:s,...r,"aria-expanded":Array.isArray(l)?l.includes(a):a===l,className:De(n,t,!eH(l,a)&&"collapsed")})});aH.displayName="AccordionButton";const sH=aH,lH=P.forwardRef(({as:e="h2",bsPrefix:t,className:n,children:i,onClick:r,...o},a)=>(t=We(t,"accordion-header"),v.jsx(e,{ref:a,...o,className:De(n,t),children:v.jsx(sH,{onClick:r,children:i})})));lH.displayName="AccordionHeader";const yse=lH,uH=P.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:i,...r},o)=>{t=We(t,"accordion-item");const a=P.useMemo(()=>({eventKey:i}),[i]);return v.jsx(nP.Provider,{value:a,children:v.jsx(e,{ref:o,...r,className:De(n,t)})})});uH.displayName="AccordionItem";const vse=uH,cH=P.forwardRef((e,t)=>{const{as:n="div",activeKey:i,bsPrefix:r,className:o,onSelect:a,flush:s,alwaysOpen:l,...u}=gv(e,{activeKey:"onSelect"}),c=We(r,"accordion"),d=P.useMemo(()=>({activeEventKey:i,onSelect:a,alwaysOpen:l}),[i,a,l]);return v.jsx(R2.Provider,{value:d,children:v.jsx(n,{ref:t,...u,className:De(o,c,s&&`${c}-flush`)})})});cH.displayName="Accordion";const Nu=Object.assign(cH,{Button:sH,Collapse:iH,Item:vse,Header:yse,Body:mse});function fH(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e},[e]),t}function qn(e){const t=fH(e);return P.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const T2=e=>P.forwardRef((t,n)=>v.jsx("div",{...t,ref:n,className:De(t.className,e)}));function CT(){return P.useState(null)}function iP(){const e=P.useRef(!0),t=P.useRef(()=>e.current);return P.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function xse(e){const t=P.useRef(null);return P.useEffect(()=>{t.current=e}),t.current}const _se=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",bse=typeof document<"u",lb=bse||_se?P.useLayoutEffect:P.useEffect,wse=["as","disabled"];function Sse(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Cse(e){return!e||e.trim()==="#"}function rP({tagName:e,disabled:t,href:n,target:i,rel:r,role:o,onClick:a,tabIndex:s=0,type:l}){e||(n!=null||i!=null||r!=null?e="a":e="button");const u={tagName:e};if(e==="button")return[{type:l||"button",disabled:t},u];const c=h=>{if((t||e==="a"&&Cse(n))&&h.preventDefault(),t){h.stopPropagation();return}a==null||a(h)},d=h=>{h.key===" "&&(h.preventDefault(),c(h))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:c,onKeyDown:d},u]}const dH=P.forwardRef((e,t)=>{let{as:n,disabled:i}=e,r=Sse(e,wse);const[o,{tagName:a}]=rP(Object.assign({tagName:n,disabled:i},r));return v.jsx(a,Object.assign({},r,o,{ref:t}))});dH.displayName="Button";const Ese=["onKeyDown"];function kse(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Rse(e){return!e||e.trim()==="#"}const hH=P.forwardRef((e,t)=>{let{onKeyDown:n}=e,i=kse(e,Ese);const[r]=rP(Object.assign({tagName:"a"},i)),o=qn(a=>{r.onKeyDown(a),n==null||n(a)});return Rse(i.href)||i.role==="button"?v.jsx("a",Object.assign({ref:t},i,r,{onKeyDown:o})):v.jsx("a",Object.assign({ref:t},i,{onKeyDown:n}))});hH.displayName="Anchor";const ET=hH,Tse={[ba]:"show",[fl]:"show"},pH=P.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...r},o)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},s=P.useCallback((l,u)=>{tP(l),i==null||i(l,u)},[i]);return v.jsx(k2,{ref:o,addEndListener:E2,...a,onEnter:s,childRef:t.ref,children:(l,u)=>P.cloneElement(t,{...u,className:De("fade",e,t.props.className,Tse[l],n[l])})})});pH.displayName="Fade";const nd=pH,Ase={"aria-label":_n.string,onClick:_n.func,variant:_n.oneOf(["white"])},oP=P.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},r)=>v.jsx("button",{ref:r,type:"button",className:De("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));oP.displayName="CloseButton";oP.propTypes=Ase;const Mse=oP,mH=P.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:i,className:r,as:o="span",...a},s)=>{const l=We(e,"badge");return v.jsx(o,{ref:s,...a,className:De(r,l,n&&"rounded-pill",i&&`text-${i}`,t&&`bg-${t}`)})});mH.displayName="Badge";const ub=mH,gH=P.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:r=!1,disabled:o=!1,className:a,...s},l)=>{const u=We(t,"btn"),[c,{tagName:d}]=rP({tagName:e,disabled:o,...s}),h=d;return v.jsx(h,{...c,...s,ref:l,disabled:o,className:De(a,u,r&&"active",n&&`${u}-${n}`,i&&`${u}-${i}`,s.href&&o&&"disabled")})});gH.displayName="Button";const Fse=gH,yH=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"card-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));yH.displayName="CardBody";const vH=yH,xH=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"card-footer"),v.jsx(n,{ref:r,className:De(e,t),...i})));xH.displayName="CardFooter";const Pse=xH,_H=P.createContext(null);_H.displayName="CardHeaderContext";const bH=_H,wH=P.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=We(e,"card-header"),a=P.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return v.jsx(bH.Provider,{value:a,children:v.jsx(n,{ref:r,...i,className:De(t,o)})})});wH.displayName="CardHeader";const Nse=wH,SH=P.forwardRef(({bsPrefix:e,className:t,variant:n,as:i="img",...r},o)=>{const a=We(e,"card-img");return v.jsx(i,{ref:o,className:De(n?`${a}-${n}`:a,t),...r})});SH.displayName="CardImg";const $se=SH,CH=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"card-img-overlay"),v.jsx(n,{ref:r,className:De(e,t),...i})));CH.displayName="CardImgOverlay";const Ise=CH,EH=P.forwardRef(({className:e,bsPrefix:t,as:n="a",...i},r)=>(t=We(t,"card-link"),v.jsx(n,{ref:r,className:De(e,t),...i})));EH.displayName="CardLink";const Ose=EH,Dse=T2("h6"),kH=P.forwardRef(({className:e,bsPrefix:t,as:n=Dse,...i},r)=>(t=We(t,"card-subtitle"),v.jsx(n,{ref:r,className:De(e,t),...i})));kH.displayName="CardSubtitle";const Lse=kH,RH=P.forwardRef(({className:e,bsPrefix:t,as:n="p",...i},r)=>(t=We(t,"card-text"),v.jsx(n,{ref:r,className:De(e,t),...i})));RH.displayName="CardText";const jse=RH,zse=T2("h5"),TH=P.forwardRef(({className:e,bsPrefix:t,as:n=zse,...i},r)=>(t=We(t,"card-title"),v.jsx(n,{ref:r,className:De(e,t),...i})));TH.displayName="CardTitle";const Bse=TH,AH=P.forwardRef(({bsPrefix:e,className:t,bg:n,text:i,border:r,body:o=!1,children:a,as:s="div",...l},u)=>{const c=We(e,"card");return v.jsx(s,{ref:u,...l,className:De(t,c,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:o?v.jsx(vH,{children:a}):a})});AH.displayName="Card";const On=Object.assign(AH,{Img:$se,Title:Bse,Subtitle:Lse,Body:vH,Link:Ose,Text:jse,Header:Nse,Footer:Pse,ImgOverlay:Ise});function Hse(e,t){const n=P.useRef(!0);P.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function Use(e){const t=P.useRef(e);return t.current=e,t}function aP(e){const t=Use(e);P.useEffect(()=>()=>t.current(),[])}const kT=2**31-1;function MH(e,t,n){const i=n-Date.now();e.current=i<=kT?setTimeout(t,i):setTimeout(()=>MH(e,t,n),kT)}function FH(){const e=iP(),t=P.useRef();return aP(()=>clearTimeout(t.current)),P.useMemo(()=>{const n=()=>clearTimeout(t.current);function i(r,o=0){e()&&(n(),o<=kT?t.current=setTimeout(r,o):MH(t,r,Date.now()+o))}return{set:i,clear:n,handleRef:t}},[])}const PH=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"carousel-caption"),v.jsx(n,{ref:r,className:De(e,t),...i})));PH.displayName="CarouselCaption";const Wse=PH,NH=P.forwardRef(({as:e="div",bsPrefix:t,className:n,...i},r)=>{const o=De(n,We(t,"carousel-item"));return v.jsx(e,{ref:r,...i,className:o})});NH.displayName="CarouselItem";const Gse=NH;function cb(e,t){let n=0;return P.Children.map(e,i=>P.isValidElement(i)?t(i,n++):i)}function $H(e,t){let n=0;P.Children.forEach(e,i=>{P.isValidElement(i)&&t(i,n++)})}function qse(e,t){return P.Children.toArray(e).some(n=>P.isValidElement(n)&&n.type===t)}const Vse=40;function Yse(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&getComputedStyle(e.parentNode).display!=="none"}const IH=P.forwardRef(({defaultActiveIndex:e=0,...t},n)=>{const{as:i="div",bsPrefix:r,slide:o=!0,fade:a=!1,controls:s=!0,indicators:l=!0,indicatorLabels:u=[],activeIndex:c,onSelect:d,onSlide:h,onSlid:m,interval:g=5e3,keyboard:y=!0,onKeyDown:x,pause:b="hover",onMouseOver:w,onMouseOut:S,wrap:k=!0,touch:R=!0,onTouchStart:M,onTouchMove:T,onTouchEnd:N,prevIcon:z=v.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:H="Previous",nextIcon:U=v.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:X="Next",variant:B,className:O,children:j,...q}=gv({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),K=We(r,"carousel"),W=C2(),J=P.useRef(null),[Q,ae]=P.useState("next"),[ge,ke]=P.useState(!1),[pe,Se]=P.useState(!1),[Fe,Nt]=P.useState(c||0);P.useEffect(()=>{!pe&&c!==Fe&&(J.current?ae(J.current):ae((c||0)>Fe?"next":"prev"),o&&Se(!0),Nt(c||0))},[c,pe,Fe,o]),P.useEffect(()=>{J.current&&(J.current=null)});let Et=0,Te;$H(j,(dt,Gt)=>{++Et,Gt===c&&(Te=dt.props.interval)});const Ye=fH(Te),Be=P.useCallback(dt=>{if(pe)return;let Gt=Fe-1;if(Gt<0){if(!k)return;Gt=Et-1}J.current="prev",d==null||d(Gt,dt)},[pe,Fe,d,k,Et]),ce=qn(dt=>{if(pe)return;let Gt=Fe+1;if(Gt>=Et){if(!k)return;Gt=0}J.current="next",d==null||d(Gt,dt)}),Tt=P.useRef();P.useImperativeHandle(n,()=>({element:Tt.current,prev:Be,next:ce}));const ft=qn(()=>{!document.hidden&&Yse(Tt.current)&&(W?Be():ce())}),Xe=Q==="next"?"start":"end";Hse(()=>{o||(h==null||h(Fe,Xe),m==null||m(Fe,Xe))},[Fe]);const Vt=`${K}-item-${Q}`,yn=`${K}-item-${Xe}`,tr=P.useCallback(dt=>{tP(dt),h==null||h(Fe,Xe)},[h,Fe,Xe]),Vs=P.useCallback(()=>{Se(!1),m==null||m(Fe,Xe)},[m,Fe,Xe]),Ni=P.useCallback(dt=>{if(y&&!/input|textarea/i.test(dt.target.tagName))switch(dt.key){case"ArrowLeft":dt.preventDefault(),W?ce(dt):Be(dt);return;case"ArrowRight":dt.preventDefault(),W?Be(dt):ce(dt);return}x==null||x(dt)},[y,x,Be,ce,W]),Er=P.useCallback(dt=>{b==="hover"&&ke(!0),w==null||w(dt)},[b,w]),aa=P.useCallback(dt=>{ke(!1),S==null||S(dt)},[S]),Ro=P.useRef(0),nr=P.useRef(0),To=FH(),vt=P.useCallback(dt=>{Ro.current=dt.touches[0].clientX,nr.current=0,b==="hover"&&ke(!0),M==null||M(dt)},[b,M]),$i=P.useCallback(dt=>{dt.touches&&dt.touches.length>1?nr.current=0:nr.current=dt.touches[0].clientX-Ro.current,T==null||T(dt)},[T]),no=P.useCallback(dt=>{if(R){const Gt=nr.current;Math.abs(Gt)>Vse&&(Gt>0?Be(dt):ce(dt))}b==="hover"&&To.set(()=>{ke(!1)},g||void 0),N==null||N(dt)},[R,b,Be,ce,To,g,N]),eh=g!=null&&!ge&&!pe,tu=P.useRef();P.useEffect(()=>{var dt,Gt;if(!eh)return;const Ii=W?Be:ce;return tu.current=window.setInterval(document.visibilityState?ft:Ii,(dt=(Gt=Ye.current)!=null?Gt:g)!=null?dt:void 0),()=>{tu.current!==null&&clearInterval(tu.current)}},[eh,Be,ce,Ye,g,ft,W]);const Yc=P.useMemo(()=>l&&Array.from({length:Et},(dt,Gt)=>Ii=>{d==null||d(Gt,Ii)}),[l,Et,d]);return v.jsxs(i,{ref:Tt,...q,onKeyDown:Ni,onMouseOver:Er,onMouseOut:aa,onTouchStart:vt,onTouchMove:$i,onTouchEnd:no,className:De(O,K,o&&"slide",a&&`${K}-fade`,B&&`${K}-${B}`),children:[l&&v.jsx("div",{className:`${K}-indicators`,children:cb(j,(dt,Gt)=>v.jsx("button",{type:"button","data-bs-target":"","aria-label":u!=null&&u.length?u[Gt]:`Slide ${Gt+1}`,className:Gt===Fe?"active":void 0,onClick:Yc?Yc[Gt]:void 0,"aria-current":Gt===Fe},Gt))}),v.jsx("div",{className:`${K}-inner`,children:cb(j,(dt,Gt)=>{const Ii=Gt===Fe;return o?v.jsx(k2,{in:Ii,onEnter:Ii?tr:void 0,onEntered:Ii?Vs:void 0,addEndListener:E2,children:(sa,th)=>P.cloneElement(dt,{...th,className:De(dt.props.className,Ii&&sa!=="entered"&&Vt,(sa==="entered"||sa==="exiting")&&"active",(sa==="entering"||sa==="exiting")&&yn)})}):P.cloneElement(dt,{className:De(dt.props.className,Ii&&"active")})})}),s&&v.jsxs(v.Fragment,{children:[(k||c!==0)&&v.jsxs(ET,{className:`${K}-control-prev`,onClick:Be,children:[z,H&&v.jsx("span",{className:"visually-hidden",children:H})]}),(k||c!==Et-1)&&v.jsxs(ET,{className:`${K}-control-next`,onClick:ce,children:[U,X&&v.jsx("span",{className:"visually-hidden",children:X})]})]})]})});IH.displayName="Carousel";const Zse=Object.assign(IH,{Caption:Wse,Item:Gse});function Xse({as:e,bsPrefix:t,className:n,...i}){t=We(t,"col");const r=G7(),o=q7(),a=[],s=[];return r.forEach(l=>{const u=i[l];delete i[l];let c,d,h;typeof u=="object"&&u!=null?{span:c,offset:d,order:h}=u:c=u;const m=l!==o?`-${l}`:"";c&&a.push(c===!0?`${t}${m}`:`${t}${m}-${c}`),h!=null&&s.push(`order${m}-${h}`),d!=null&&s.push(`offset${m}-${d}`)}),[{...i,className:De(n,...a,...s)},{as:e,bsPrefix:t,spans:a}]}const OH=P.forwardRef((e,t)=>{const[{className:n,...i},{as:r="div",bsPrefix:o,spans:a}]=Xse(e);return v.jsx(r,{...i,ref:t,className:De(n,!a.length&&o)})});OH.displayName="Col";const DH=OH;var Kse=Function.prototype.bind.call(Function.prototype.call,[].slice);function vf(e,t){return Kse(e.querySelectorAll(t))}function Jse(e,t,n){const i=P.useRef(e!==void 0),[r,o]=P.useState(t),a=e!==void 0,s=i.current;return i.current=a,!a&&s&&r!==t&&o(t),[a?e:r,P.useCallback((...l)=>{const[u,...c]=l;let d=n==null?void 0:n(u,...c);return o(u),d},[n])]}function Qse(){const[,e]=P.useReducer(t=>!t,!1);return e}var t3=Object.prototype.hasOwnProperty;function n3(e,t,n){for(n of e.keys())if(B0(n,t))return n}function B0(e,t){var n,i,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&B0(e[i],t[i]););return i===-1}if(n===Set){if(e.size!==t.size)return!1;for(i of e)if(r=i,r&&typeof r=="object"&&(r=n3(t,r),!r)||!t.has(r))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(i of e)if(r=i[0],r&&typeof r=="object"&&(r=n3(t,r),!r)||!B0(i[1],t.get(r)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return i===-1}if(!n||typeof e=="object"){i=0;for(n in e)if(t3.call(e,n)&&++i&&!t3.call(t,n)||!(n in t)||!B0(e[n],t[n]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}function ele(e){const t=iP();return[e[0],P.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Wr="top",Yo="bottom",Zo="right",Gr="left",sP="auto",yv=[Wr,Yo,Zo,Gr],Mp="start",Ey="end",tle="clippingParents",LH="viewport",kg="popper",nle="reference",i3=yv.reduce(function(e,t){return e.concat([t+"-"+Mp,t+"-"+Ey])},[]),jH=[].concat(yv,[sP]).reduce(function(e,t){return e.concat([t,t+"-"+Mp,t+"-"+Ey])},[]),ile="beforeRead",rle="read",ole="afterRead",ale="beforeMain",sle="main",lle="afterMain",ule="beforeWrite",cle="write",fle="afterWrite",dle=[ile,rle,ole,ale,sle,lle,ule,cle,fle];function vs(e){return e.split("-")[0]}function vo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function id(e){var t=vo(e).Element;return e instanceof t||e instanceof Element}function xs(e){var t=vo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function lP(e){if(typeof ShadowRoot>"u")return!1;var t=vo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var zf=Math.max,fb=Math.min,Fp=Math.round;function RT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function zH(){return!/^((?!chrome|android).)*safari/i.test(RT())}function Pp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&xs(e)&&(r=e.offsetWidth>0&&Fp(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Fp(i.height)/e.offsetHeight||1);var a=id(e)?vo(e):window,s=a.visualViewport,l=!zH()&&n,u=(i.left+(l&&s?s.offsetLeft:0))/r,c=(i.top+(l&&s?s.offsetTop:0))/o,d=i.width/r,h=i.height/o;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function uP(e){var t=Pp(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function BH(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&lP(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function sc(e){return e?(e.nodeName||"").toLowerCase():null}function Dl(e){return vo(e).getComputedStyle(e)}function hle(e){return["table","td","th"].indexOf(sc(e))>=0}function Pc(e){return((id(e)?e.ownerDocument:e.document)||window.document).documentElement}function A2(e){return sc(e)==="html"?e:e.assignedSlot||e.parentNode||(lP(e)?e.host:null)||Pc(e)}function r3(e){return!xs(e)||Dl(e).position==="fixed"?null:e.offsetParent}function ple(e){var t=/firefox/i.test(RT()),n=/Trident/i.test(RT());if(n&&xs(e)){var i=Dl(e);if(i.position==="fixed")return null}var r=A2(e);for(lP(r)&&(r=r.host);xs(r)&&["html","body"].indexOf(sc(r))<0;){var o=Dl(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function vv(e){for(var t=vo(e),n=r3(e);n&&hle(n)&&Dl(n).position==="static";)n=r3(n);return n&&(sc(n)==="html"||sc(n)==="body"&&Dl(n).position==="static")?t:n||ple(e)||t}function cP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function H0(e,t,n){return zf(e,fb(t,n))}function mle(e,t,n){var i=H0(e,t,n);return i>n?n:i}function HH(){return{top:0,right:0,bottom:0,left:0}}function UH(e){return Object.assign({},HH(),e)}function WH(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var gle=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,UH(typeof t!="number"?t:WH(t,yv))};function yle(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=vs(n.placement),l=cP(s),u=[Gr,Zo].indexOf(s)>=0,c=u?"height":"width";if(!(!o||!a)){var d=gle(r.padding,n),h=uP(o),m=l==="y"?Wr:Gr,g=l==="y"?Yo:Zo,y=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],x=a[l]-n.rects.reference[l],b=vv(o),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,S=y/2-x/2,k=d[m],R=w-h[c]-d[g],M=w/2-h[c]/2+S,T=H0(k,M,R),N=l;n.modifiersData[i]=(t={},t[N]=T,t.centerOffset=T-M,t)}}function vle(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||BH(t.elements.popper,r)&&(t.elements.arrow=r))}const xle={name:"arrow",enabled:!0,phase:"main",fn:yle,effect:vle,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Np(e){return e.split("-")[1]}var _le={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ble(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Fp(n*r)/r||0,y:Fp(i*r)/r||0}}function o3(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,h=a.x,m=h===void 0?0:h,g=a.y,y=g===void 0?0:g,x=typeof c=="function"?c({x:m,y}):{x:m,y};m=x.x,y=x.y;var b=a.hasOwnProperty("x"),w=a.hasOwnProperty("y"),S=Gr,k=Wr,R=window;if(u){var M=vv(n),T="clientHeight",N="clientWidth";if(M===vo(n)&&(M=Pc(n),Dl(M).position!=="static"&&s==="absolute"&&(T="scrollHeight",N="scrollWidth")),M=M,r===Wr||(r===Gr||r===Zo)&&o===Ey){k=Yo;var z=d&&M===R&&R.visualViewport?R.visualViewport.height:M[T];y-=z-i.height,y*=l?1:-1}if(r===Gr||(r===Wr||r===Yo)&&o===Ey){S=Zo;var H=d&&M===R&&R.visualViewport?R.visualViewport.width:M[N];m-=H-i.width,m*=l?1:-1}}var U=Object.assign({position:s},u&&_le),X=c===!0?ble({x:m,y},vo(n)):{x:m,y};if(m=X.x,y=X.y,l){var B;return Object.assign({},U,(B={},B[k]=w?"0":"",B[S]=b?"0":"",B.transform=(R.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",B))}return Object.assign({},U,(t={},t[k]=w?y+"px":"",t[S]=b?m+"px":"",t.transform="",t))}function wle(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:vs(t.placement),variation:Np(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,o3(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,o3(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Sle={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:wle,data:{}};var sx={passive:!0};function Cle(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=r===void 0?!0:r,a=i.resize,s=a===void 0?!0:a,l=vo(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,sx)}),s&&l.addEventListener("resize",n.update,sx),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,sx)}),s&&l.removeEventListener("resize",n.update,sx)}}const Ele={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Cle,data:{}};var kle={left:"right",right:"left",bottom:"top",top:"bottom"};function u_(e){return e.replace(/left|right|bottom|top/g,function(t){return kle[t]})}var Rle={start:"end",end:"start"};function a3(e){return e.replace(/start|end/g,function(t){return Rle[t]})}function fP(e){var t=vo(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function dP(e){return Pp(Pc(e)).left+fP(e).scrollLeft}function Tle(e,t){var n=vo(e),i=Pc(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var u=zH();(u||!u&&t==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+dP(e),y:l}}function Ale(e){var t,n=Pc(e),i=fP(e),r=(t=e.ownerDocument)==null?void 0:t.body,o=zf(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=zf(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+dP(e),l=-i.scrollTop;return Dl(r||n).direction==="rtl"&&(s+=zf(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function hP(e){var t=Dl(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function GH(e){return["html","body","#document"].indexOf(sc(e))>=0?e.ownerDocument.body:xs(e)&&hP(e)?e:GH(A2(e))}function U0(e,t){var n;t===void 0&&(t=[]);var i=GH(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),o=vo(i),a=r?[o].concat(o.visualViewport||[],hP(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(U0(A2(a)))}function TT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Mle(e,t){var n=Pp(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function s3(e,t,n){return t===LH?TT(Tle(e,n)):id(t)?Mle(t,n):TT(Ale(Pc(e)))}function Fle(e){var t=U0(A2(e)),n=["absolute","fixed"].indexOf(Dl(e).position)>=0,i=n&&xs(e)?vv(e):e;return id(i)?t.filter(function(r){return id(r)&&BH(r,i)&&sc(r)!=="body"}):[]}function Ple(e,t,n,i){var r=t==="clippingParents"?Fle(e):[].concat(t),o=[].concat(r,[n]),a=o[0],s=o.reduce(function(l,u){var c=s3(e,u,i);return l.top=zf(c.top,l.top),l.right=fb(c.right,l.right),l.bottom=fb(c.bottom,l.bottom),l.left=zf(c.left,l.left),l},s3(e,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function qH(e){var t=e.reference,n=e.element,i=e.placement,r=i?vs(i):null,o=i?Np(i):null,a=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(r){case Wr:l={x:a,y:t.y-n.height};break;case Yo:l={x:a,y:t.y+t.height};break;case Zo:l={x:t.x+t.width,y:s};break;case Gr:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=r?cP(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case Mp:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Ey:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function ky(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,o=n.strategy,a=o===void 0?e.strategy:o,s=n.boundary,l=s===void 0?tle:s,u=n.rootBoundary,c=u===void 0?LH:u,d=n.elementContext,h=d===void 0?kg:d,m=n.altBoundary,g=m===void 0?!1:m,y=n.padding,x=y===void 0?0:y,b=UH(typeof x!="number"?x:WH(x,yv)),w=h===kg?nle:kg,S=e.rects.popper,k=e.elements[g?w:h],R=Ple(id(k)?k:k.contextElement||Pc(e.elements.popper),l,c,a),M=Pp(e.elements.reference),T=qH({reference:M,element:S,strategy:"absolute",placement:r}),N=TT(Object.assign({},S,T)),z=h===kg?N:M,H={top:R.top-z.top+b.top,bottom:z.bottom-R.bottom+b.bottom,left:R.left-z.left+b.left,right:z.right-R.right+b.right},U=e.modifiersData.offset;if(h===kg&&U){var X=U[r];Object.keys(H).forEach(function(B){var O=[Zo,Yo].indexOf(B)>=0?1:-1,j=[Wr,Yo].indexOf(B)>=0?"y":"x";H[B]+=X[j]*O})}return H}function Nle(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?jH:l,c=Np(i),d=c?s?i3:i3.filter(function(g){return Np(g)===c}):yv,h=d.filter(function(g){return u.indexOf(g)>=0});h.length===0&&(h=d);var m=h.reduce(function(g,y){return g[y]=ky(e,{placement:y,boundary:r,rootBoundary:o,padding:a})[vs(y)],g},{});return Object.keys(m).sort(function(g,y){return m[g]-m[y]})}function $le(e){if(vs(e)===sP)return[];var t=u_(e);return[a3(e),t,a3(t)]}function Ile(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,g=m===void 0?!0:m,y=n.allowedAutoPlacements,x=t.options.placement,b=vs(x),w=b===x,S=l||(w||!g?[u_(x)]:$le(x)),k=[x].concat(S).reduce(function(pe,Se){return pe.concat(vs(Se)===sP?Nle(t,{placement:Se,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:y}):Se)},[]),R=t.rects.reference,M=t.rects.popper,T=new Map,N=!0,z=k[0],H=0;H<k.length;H++){var U=k[H],X=vs(U),B=Np(U)===Mp,O=[Wr,Yo].indexOf(X)>=0,j=O?"width":"height",q=ky(t,{placement:U,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),K=O?B?Zo:Gr:B?Yo:Wr;R[j]>M[j]&&(K=u_(K));var W=u_(K),J=[];if(o&&J.push(q[X]<=0),s&&J.push(q[K]<=0,q[W]<=0),J.every(function(pe){return pe})){z=U,N=!1;break}T.set(U,J)}if(N)for(var Q=g?3:1,ae=function(Se){var Fe=k.find(function(Nt){var Et=T.get(Nt);if(Et)return Et.slice(0,Se).every(function(Te){return Te})});if(Fe)return z=Fe,"break"},ge=Q;ge>0;ge--){var ke=ae(ge);if(ke==="break")break}t.placement!==z&&(t.modifiersData[i]._skip=!0,t.placement=z,t.reset=!0)}}const Ole={name:"flip",enabled:!0,phase:"main",fn:Ile,requiresIfExists:["offset"],data:{_skip:!1}};function l3(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function u3(e){return[Wr,Zo,Yo,Gr].some(function(t){return e[t]>=0})}function Dle(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=ky(t,{elementContext:"reference"}),s=ky(t,{altBoundary:!0}),l=l3(a,i),u=l3(s,r,o),c=u3(l),d=u3(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const Lle={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Dle};function jle(e,t,n){var i=vs(e),r=[Gr,Wr].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[Gr,Zo].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}function zle(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=r===void 0?[0,0]:r,a=jH.reduce(function(c,d){return c[d]=jle(d,t.rects,o),c},{}),s=a[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=a}const Ble={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:zle};function Hle(e){var t=e.state,n=e.name;t.modifiersData[n]=qH({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ule={name:"popperOffsets",enabled:!0,phase:"read",fn:Hle,data:{}};function Wle(e){return e==="x"?"y":"x"}function Gle(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,m=h===void 0?!0:h,g=n.tetherOffset,y=g===void 0?0:g,x=ky(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),b=vs(t.placement),w=Np(t.placement),S=!w,k=cP(b),R=Wle(k),M=t.modifiersData.popperOffsets,T=t.rects.reference,N=t.rects.popper,z=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,H=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,X={x:0,y:0};if(M){if(o){var B,O=k==="y"?Wr:Gr,j=k==="y"?Yo:Zo,q=k==="y"?"height":"width",K=M[k],W=K+x[O],J=K-x[j],Q=m?-N[q]/2:0,ae=w===Mp?T[q]:N[q],ge=w===Mp?-N[q]:-T[q],ke=t.elements.arrow,pe=m&&ke?uP(ke):{width:0,height:0},Se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:HH(),Fe=Se[O],Nt=Se[j],Et=H0(0,T[q],pe[q]),Te=S?T[q]/2-Q-Et-Fe-H.mainAxis:ae-Et-Fe-H.mainAxis,Ye=S?-T[q]/2+Q+Et+Nt+H.mainAxis:ge+Et+Nt+H.mainAxis,Be=t.elements.arrow&&vv(t.elements.arrow),ce=Be?k==="y"?Be.clientTop||0:Be.clientLeft||0:0,Tt=(B=U==null?void 0:U[k])!=null?B:0,ft=K+Te-Tt-ce,Xe=K+Ye-Tt,Vt=H0(m?fb(W,ft):W,K,m?zf(J,Xe):J);M[k]=Vt,X[k]=Vt-K}if(s){var yn,tr=k==="x"?Wr:Gr,Vs=k==="x"?Yo:Zo,Ni=M[R],Er=R==="y"?"height":"width",aa=Ni+x[tr],Ro=Ni-x[Vs],nr=[Wr,Gr].indexOf(b)!==-1,To=(yn=U==null?void 0:U[R])!=null?yn:0,vt=nr?aa:Ni-T[Er]-N[Er]-To+H.altAxis,$i=nr?Ni+T[Er]+N[Er]-To-H.altAxis:Ro,no=m&&nr?mle(vt,Ni,$i):H0(m?vt:aa,Ni,m?$i:Ro);M[R]=no,X[R]=no-Ni}t.modifiersData[i]=X}}const qle={name:"preventOverflow",enabled:!0,phase:"main",fn:Gle,requiresIfExists:["offset"]};function Vle(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Yle(e){return e===vo(e)||!xs(e)?fP(e):Vle(e)}function Zle(e){var t=e.getBoundingClientRect(),n=Fp(t.width)/e.offsetWidth||1,i=Fp(t.height)/e.offsetHeight||1;return n!==1||i!==1}function Xle(e,t,n){n===void 0&&(n=!1);var i=xs(t),r=xs(t)&&Zle(t),o=Pc(t),a=Pp(e,r,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((sc(t)!=="body"||hP(o))&&(s=Yle(t)),xs(t)?(l=Pp(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=dP(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Kle(e){var t=new Map,n=new Set,i=[];e.forEach(function(o){t.set(o.name,o)});function r(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&r(l)}}),i.push(o)}return e.forEach(function(o){n.has(o.name)||r(o)}),i}function Jle(e){var t=Kle(e);return dle.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function Qle(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function eue(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var c3={placement:"bottom",modifiers:[],strategy:"absolute"};function f3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function tue(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,o=r===void 0?c3:r;return function(s,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},c3,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],h=!1,m={state:c,setOptions:function(b){var w=typeof b=="function"?b(c.options):b;y(),c.options=Object.assign({},o,c.options,w),c.scrollParents={reference:id(s)?U0(s):s.contextElement?U0(s.contextElement):[],popper:U0(l)};var S=Jle(eue([].concat(i,c.options.modifiers)));return c.orderedModifiers=S.filter(function(k){return k.enabled}),g(),m.update()},forceUpdate:function(){if(!h){var b=c.elements,w=b.reference,S=b.popper;if(f3(w,S)){c.rects={reference:Xle(w,vv(S),c.options.strategy==="fixed"),popper:uP(S)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(H){return c.modifiersData[H.name]=Object.assign({},H.data)});for(var k=0;k<c.orderedModifiers.length;k++){if(c.reset===!0){c.reset=!1,k=-1;continue}var R=c.orderedModifiers[k],M=R.fn,T=R.options,N=T===void 0?{}:T,z=R.name;typeof M=="function"&&(c=M({state:c,options:N,name:z,instance:m})||c)}}}},update:Qle(function(){return new Promise(function(x){m.forceUpdate(),x(c)})}),destroy:function(){y(),h=!0}};if(!f3(s,l))return m;m.setOptions(u).then(function(x){!h&&u.onFirstUpdate&&u.onFirstUpdate(x)});function g(){c.orderedModifiers.forEach(function(x){var b=x.name,w=x.options,S=w===void 0?{}:w,k=x.effect;if(typeof k=="function"){var R=k({state:c,name:b,instance:m,options:S}),M=function(){};d.push(R||M)}})}function y(){d.forEach(function(x){return x()}),d=[]}return m}}const nue=tue({defaultModifiers:[Lle,Ule,Sle,Ele,Ble,Ole,qle,xle]}),iue=["enabled","placement","strategy","modifiers"];function rue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const oue={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},aue={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const i=(t.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);i.length?t.setAttribute("aria-describedby",i.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:i}=e.elements,r=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in i){const o=i.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(n.id)!==-1)return;i.setAttribute("aria-describedby",o?`${o},${n.id}`:n.id)}}},sue=[];function lue(e,t,n={}){let{enabled:i=!0,placement:r="bottom",strategy:o="absolute",modifiers:a=sue}=n,s=rue(n,iue);const l=P.useRef(a),u=P.useRef(),c=P.useCallback(()=>{var x;(x=u.current)==null||x.update()},[]),d=P.useCallback(()=>{var x;(x=u.current)==null||x.forceUpdate()},[]),[h,m]=ele(P.useState({placement:r,update:c,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),g=P.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:x})=>{const b={},w={};Object.keys(x.elements).forEach(S=>{b[S]=x.styles[S],w[S]=x.attributes[S]}),m({state:x,styles:b,attributes:w,update:c,forceUpdate:d,placement:x.placement})}}),[c,d,m]),y=P.useMemo(()=>(B0(l.current,a)||(l.current=a),l.current),[a]);return P.useEffect(()=>{!u.current||!i||u.current.setOptions({placement:r,strategy:o,modifiers:[...y,g,oue]})},[o,r,g,i,y]),P.useEffect(()=>{if(!(!i||e==null||t==null))return u.current=nue(e,t,Object.assign({},s,{placement:r,strategy:o,modifiers:[...y,aue,g]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,m(x=>Object.assign({},x,{attributes:{},styles:{popper:{}}})))}},[i,e,t]),h}function Ry(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var uue=function(){},cue=uue;const fue=Td(cue),d3=()=>{};function due(e){return e.button===0}function hue(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const c_=e=>e&&("current"in e?e.current:e),h3={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function pue(e,t=d3,{disabled:n,clickTrigger:i="click"}={}){const r=P.useRef(!1),o=P.useRef(!1),a=P.useCallback(u=>{const c=c_(e);fue(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!c||hue(u)||!due(u)||!!Ry(c,u.target)||o.current,o.current=!1},[e]),s=qn(u=>{const c=c_(e);c&&Ry(c,u.target)&&(o.current=!0)}),l=qn(u=>{r.current||t(u)});P.useEffect(()=>{var u,c;if(n||e==null)return;const d=ym(c_(e)),h=d.defaultView||window;let m=(u=h.event)!=null?u:(c=h.parent)==null?void 0:c.event,g=null;h3[i]&&(g=gl(d,h3[i],s,!0));const y=gl(d,i,a,!0),x=gl(d,i,w=>{if(w===m){m=void 0;return}l(w)});let b=[];return"ontouchstart"in d.documentElement&&(b=[].slice.call(d.body.children).map(w=>gl(w,"mousemove",d3))),()=>{g==null||g(),y(),x(),b.forEach(w=>w())}},[e,n,i,a,s,l])}function mue(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function gue(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function yue({enabled:e,enableEvents:t,placement:n,flip:i,offset:r,fixed:o,containerPadding:a,arrowElement:s,popperConfig:l={}}){var u,c,d,h,m;const g=mue(l.modifiers);return Object.assign({},l,{placement:n,enabled:e,strategy:o?"fixed":l.strategy,modifiers:gue(Object.assign({},g,{eventListeners:{enabled:t,options:(u=g.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},g.preventOverflow,{options:a?Object.assign({padding:a},(c=g.preventOverflow)==null?void 0:c.options):(d=g.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:r},(h=g.offset)==null?void 0:h.options)},arrow:Object.assign({},g.arrow,{enabled:!!s,options:Object.assign({},(m=g.arrow)==null?void 0:m.options,{element:s})}),flip:Object.assign({enabled:!!i},g.flip)}))})}const db={prefix:String(Math.round(Math.random()*1e10)),current:0},VH=$t.createContext(db),vue=$t.createContext(!1);let xue=!!(typeof window<"u"&&window.document&&window.document.createElement),HE=new WeakMap;function _ue(e=!1){let t=P.useContext(VH),n=P.useRef(null);if(n.current===null&&!e){var i,r;let o=(r=$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(o){let a=HE.get(o);a==null?HE.set(o,{id:t.current,state:o.memoizedState}):o.memoizedState!==a.state&&(t.current=a.id,HE.delete(o))}n.current=++t.current}return n.current}function bue(e){let t=P.useContext(VH);t===db&&!xue&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=_ue(!!e),i=`react-aria${t.prefix}`;return e||`${i}-${n}`}function wue(e){let t=$t.useId(),[n]=P.useState(Rue()),i=n?"react-aria":`react-aria${db.prefix}`;return e||`${i}-${t}`}const Sue=typeof $t.useId=="function"?wue:bue;function Cue(){return!1}function Eue(){return!0}function kue(e){return()=>{}}function Rue(){return typeof $t.useSyncExternalStore=="function"?$t.useSyncExternalStore(kue,Cue,Eue):P.useContext(vue)}const Tue=P.createContext(null),Ty=(e,t=null)=>e!=null?String(e):t||null,rd=Tue,YH=P.createContext(null);YH.displayName="NavContext";const ZH=YH,Aue="data-rr-ui-",Mue="rrUi";function M2(e){return`${Aue}${e}`}function Fue(e){return`${Mue}${e}`}const XH=P.createContext(vm?window:void 0);XH.Provider;function pP(){return P.useContext(XH)}const KH=P.createContext(null);KH.displayName="NavbarContext";const xm=KH;_n.string,_n.bool,_n.bool,_n.bool,_n.bool;const JH=P.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:i=!1,roundedCircle:r=!1,thumbnail:o=!1,...a},s)=>(e=We(e,"img"),v.jsx("img",{ref:s,...a,className:De(t,n&&`${e}-fluid`,i&&"rounded",r&&"rounded-circle",o&&`${e}-thumbnail`)})));JH.displayName="Image";const Pue=JH,Nue={type:_n.string,tooltip:_n.bool,as:_n.elementType},mP=P.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...r},o)=>v.jsx(e,{...r,ref:o,className:De(t,`${n}-${i?"tooltip":"feedback"}`)}));mP.displayName="Feedback";mP.propTypes=Nue;const QH=mP,$ue=P.createContext({}),Ll=$ue,eU=P.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:r=!1,isInvalid:o=!1,as:a="input",...s},l)=>{const{controlId:u}=P.useContext(Ll);return t=We(t,"form-check-input"),v.jsx(a,{...s,ref:l,type:i,id:e||u,className:De(n,t,r&&"is-valid",o&&"is-invalid")})});eU.displayName="FormCheckInput";const tU=eU,nU=P.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},r)=>{const{controlId:o}=P.useContext(Ll);return e=We(e,"form-check-label"),v.jsx("label",{...i,ref:r,htmlFor:n||o,className:De(t,e)})});nU.displayName="FormCheckLabel";const AT=nU,iU=P.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:o=!1,isValid:a=!1,isInvalid:s=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:d,style:h,title:m="",type:g="checkbox",label:y,children:x,as:b="input",...w},S)=>{t=We(t,"form-check"),n=We(n,"form-switch");const{controlId:k}=P.useContext(Ll),R=P.useMemo(()=>({controlId:e||k}),[k,e]),M=!x&&y!=null&&y!==!1||qse(x,AT),T=v.jsx(tU,{...w,type:g==="switch"?"checkbox":g,ref:S,isValid:a,isInvalid:s,disabled:o,as:b});return v.jsx(Ll.Provider,{value:R,children:v.jsx("div",{style:h,className:De(d,M&&t,i&&`${t}-inline`,r&&`${t}-reverse`,g==="switch"&&n),children:x||v.jsxs(v.Fragment,{children:[T,M&&v.jsx(AT,{title:m,children:y}),u&&v.jsx(QH,{type:c,tooltip:l,children:u})]})})})});iU.displayName="FormCheck";const hb=Object.assign(iU,{Input:tU,Label:AT}),rU=P.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:r,className:o,isValid:a=!1,isInvalid:s=!1,plaintext:l,readOnly:u,as:c="input",...d},h)=>{const{controlId:m}=P.useContext(Ll);return e=We(e,"form-control"),v.jsx(c,{...d,type:t,size:i,ref:h,readOnly:u,id:r||m,className:De(o,l?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",s&&"is-invalid")})});rU.displayName="FormControl";const Iue=Object.assign(rU,{Feedback:QH}),oU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"form-floating"),v.jsx(n,{ref:r,className:De(e,t),...i})));oU.displayName="FormFloating";const Oue=oU,aU=P.forwardRef(({controlId:e,as:t="div",...n},i)=>{const r=P.useMemo(()=>({controlId:e}),[e]);return v.jsx(Ll.Provider,{value:r,children:v.jsx(t,{...n,ref:i})})});aU.displayName="FormGroup";const sU=aU,lU=P.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:o,...a},s)=>{const{controlId:l}=P.useContext(Ll);t=We(t,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=De(r,t,i&&"visually-hidden",n&&u);return o=o||l,n?v.jsx(DH,{ref:s,as:"label",className:c,htmlFor:o,...a}):v.jsx(e,{ref:s,className:c,htmlFor:o,...a})});lU.displayName="FormLabel";const Due=lU,uU=P.forwardRef(({bsPrefix:e,className:t,id:n,...i},r)=>{const{controlId:o}=P.useContext(Ll);return e=We(e,"form-range"),v.jsx("input",{...i,type:"range",ref:r,className:De(t,e),id:n||o})});uU.displayName="FormRange";const Lue=uU,cU=P.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:r=!1,isInvalid:o=!1,id:a,...s},l)=>{const{controlId:u}=P.useContext(Ll);return e=We(e,"form-select"),v.jsx("select",{...s,size:n,ref:l,className:De(i,e,t&&`${e}-${t}`,r&&"is-valid",o&&"is-invalid"),id:a||u})});cU.displayName="FormSelect";const jue=cU,fU=P.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...r},o)=>(e=We(e,"form-text"),v.jsx(n,{...r,ref:o,className:De(t,e,i&&"text-muted")})));fU.displayName="FormText";const zue=fU,dU=P.forwardRef((e,t)=>v.jsx(hb,{...e,ref:t,type:"switch"}));dU.displayName="Switch";const Bue=Object.assign(dU,{Input:hb.Input,Label:hb.Label}),hU=P.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:r,...o},a)=>(e=We(e,"form-floating"),v.jsxs(sU,{ref:a,className:De(t,e),controlId:i,...o,children:[n,v.jsx("label",{htmlFor:i,children:r})]})));hU.displayName="FloatingLabel";const Hue=hU,Uue={_ref:_n.any,validated:_n.bool,as:_n.elementType},gP=P.forwardRef(({className:e,validated:t,as:n="form",...i},r)=>v.jsx(n,{...i,ref:r,className:De(e,t&&"was-validated")}));gP.displayName="Form";gP.propTypes=Uue;const Nr=Object.assign(gP,{Group:sU,Control:Iue,Floating:Oue,Check:hb,Switch:Bue,Label:Due,Text:zue,Range:Lue,Select:jue,FloatingLabel:Hue}),Wue=P.createContext(null),_m=Wue,Gue=["as","active","eventKey"];function que(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function pU({key:e,onClick:t,active:n,id:i,role:r,disabled:o}){const a=P.useContext(rd),s=P.useContext(ZH),l=P.useContext(_m);let u=n;const c={role:r};if(s){!r&&s.role==="tablist"&&(c.role="tab");const d=s.getControllerId(e??null),h=s.getControlledId(e??null);c[M2("event-key")]=e,c.id=d||i,u=n==null&&e!=null?s.activeKey===e:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=h)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),o&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=qn(d=>{o||(t==null||t(d),e!=null&&a&&!d.isPropagationStopped()&&a(e,d))}),[c,{isActive:u}]}const mU=P.forwardRef((e,t)=>{let{as:n=dH,active:i,eventKey:r}=e,o=que(e,Gue);const[a,s]=pU(Object.assign({key:Ty(r,o.href),active:i},o));return a[M2("active")]=s.isActive,v.jsx(n,Object.assign({},o,a,{ref:t}))});mU.displayName="NavItem";const Vue=mU,Yue=["as","onSelect","activeKey","role","onKeyDown"];function Zue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const p3=()=>{},m3=M2("event-key"),gU=P.forwardRef((e,t)=>{let{as:n="div",onSelect:i,activeKey:r,role:o,onKeyDown:a}=e,s=Zue(e,Yue);const l=Qse(),u=P.useRef(!1),c=P.useContext(rd),d=P.useContext(_m);let h,m;d&&(o=o||"tablist",r=d.activeKey,h=d.getControlledId,m=d.getControllerId);const g=P.useRef(null),y=S=>{const k=g.current;if(!k)return null;const R=vf(k,`[${m3}]:not([aria-disabled=true])`),M=k.querySelector("[aria-selected=true]");if(!M||M!==document.activeElement)return null;const T=R.indexOf(M);if(T===-1)return null;let N=T+S;return N>=R.length&&(N=0),N<0&&(N=R.length-1),R[N]},x=(S,k)=>{S!=null&&(i==null||i(S,k),c==null||c(S,k))},b=S=>{if(a==null||a(S),!d)return;let k;switch(S.key){case"ArrowLeft":case"ArrowUp":k=y(-1);break;case"ArrowRight":case"ArrowDown":k=y(1);break;default:return}k&&(S.preventDefault(),x(k.dataset[Fue("EventKey")]||null,S),u.current=!0,l())};P.useEffect(()=>{if(g.current&&u.current){const S=g.current.querySelector(`[${m3}][aria-selected=true]`);S==null||S.focus()}u.current=!1});const w=Fc(t,g);return v.jsx(rd.Provider,{value:x,children:v.jsx(ZH.Provider,{value:{role:o,activeKey:Ty(r),getControlledId:h||p3,getControllerId:m||p3},children:v.jsx(n,Object.assign({},s,{onKeyDown:b,ref:w,role:o}))})})});gU.displayName="Nav";const Xue=Object.assign(gU,{Item:Vue});var lx;function g3(e){if((!lx&&lx!==0||e)&&vm){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),lx=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return lx}function UE(e){e===void 0&&(e=ym());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Kue(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const y3=M2("modal-open");class Jue{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Kue(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[i]:r.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(Cl(r,i)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(y3,""),Cl(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(y3),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const yP=Jue,WE=(e,t)=>vm?e==null?(t||ym()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function MT(e,t){const n=pP(),[i,r]=P.useState(()=>WE(e,n==null?void 0:n.document));if(!i){const o=WE(e);o&&r(o)}return P.useEffect(()=>{t&&i&&t(i)},[t,i]),P.useEffect(()=>{const o=WE(e);o!==i&&r(o)},[e,i]),i}function vP({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:r}){const o=P.useRef(null),a=P.useRef(t),s=qn(n);P.useEffect(()=>{t?a.current=!0:s(o.current)},[t,s]);const l=Fc(o,e.ref),u=P.cloneElement(e,{ref:l});return t?u:r||!a.current&&i?null:u}function Que({in:e,onTransition:t}){const n=P.useRef(null),i=P.useRef(!0),r=qn(t);return lb(()=>{if(!n.current)return;let o=!1;return r({in:e,element:n.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[e,r]),lb(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function ece({children:e,in:t,onExited:n,onEntered:i,transition:r}){const[o,a]=P.useState(!t);t&&o&&a(!1);const s=Que({in:!!t,onTransition:u=>{const c=()=>{u.isStale()||(u.in?i==null||i(u.element,u.initial):(a(!0),n==null||n(u.element)))};Promise.resolve(r(u)).then(c,d=>{throw u.in||a(!0),d})}}),l=Fc(s,e.ref);return o&&!t?null:P.cloneElement(e,{ref:l})}function FT(e,t,n){return e?v.jsx(e,Object.assign({},n)):t?v.jsx(ece,Object.assign({},n,{transition:t})):v.jsx(vP,Object.assign({},n))}function yU(e){return e.code==="Escape"||e.keyCode===27}const tce=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function nce(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}let GE;function ice(e){return GE||(GE=new yP({ownerDocument:e==null?void 0:e.document})),GE}function rce(e){const t=pP(),n=e||ice(t),i=P.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:P.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:P.useCallback(r=>{i.current.backdrop=r},[])})}const vU=P.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:r,style:o,children:a,backdrop:s=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:d,runTransition:h,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:x=!0,restoreFocus:b=!0,restoreFocusOptions:w,renderDialog:S,renderBackdrop:k=Xe=>v.jsx("div",Object.assign({},Xe)),manager:R,container:M,onShow:T,onHide:N=()=>{},onExit:z,onExited:H,onExiting:U,onEnter:X,onEntering:B,onEntered:O}=e,j=nce(e,tce);const q=pP(),K=MT(M),W=rce(R),J=iP(),Q=xse(n),[ae,ge]=P.useState(!n),ke=P.useRef(null);P.useImperativeHandle(t,()=>W,[W]),vm&&!Q&&n&&(ke.current=UE(q==null?void 0:q.document)),n&&ae&&ge(!1);const pe=qn(()=>{if(W.add(),Ye.current=gl(document,"keydown",Et),Te.current=gl(document,"focus",()=>setTimeout(Fe),!0),T&&T(),y){var Xe,Vt;const yn=UE((Xe=(Vt=W.dialog)==null?void 0:Vt.ownerDocument)!=null?Xe:q==null?void 0:q.document);W.dialog&&yn&&!Ry(W.dialog,yn)&&(ke.current=yn,W.dialog.focus())}}),Se=qn(()=>{if(W.remove(),Ye.current==null||Ye.current(),Te.current==null||Te.current(),b){var Xe;(Xe=ke.current)==null||Xe.focus==null||Xe.focus(w),ke.current=null}});P.useEffect(()=>{!n||!K||pe()},[n,K,pe]),P.useEffect(()=>{ae&&Se()},[ae,Se]),aP(()=>{Se()});const Fe=qn(()=>{if(!x||!J()||!W.isTopModal())return;const Xe=UE(q==null?void 0:q.document);W.dialog&&Xe&&!Ry(W.dialog,Xe)&&W.dialog.focus()}),Nt=qn(Xe=>{Xe.target===Xe.currentTarget&&(u==null||u(Xe),s===!0&&N())}),Et=qn(Xe=>{l&&yU(Xe)&&W.isTopModal()&&(c==null||c(Xe),Xe.defaultPrevented||N())}),Te=P.useRef(),Ye=P.useRef(),Be=(...Xe)=>{ge(!0),H==null||H(...Xe)};if(!K)return null;const ce=Object.assign({role:i,ref:W.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},j,{style:o,className:r,tabIndex:-1});let Tt=S?S(ce):v.jsx("div",Object.assign({},ce,{children:P.cloneElement(a,{role:"document"})}));Tt=FT(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:z,onExiting:U,onExited:Be,onEnter:X,onEntering:B,onEntered:O,children:Tt});let ft=null;return s&&(ft=k({ref:W.setBackdropRef,onClick:Nt}),ft=FT(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ft})),v.jsx(v.Fragment,{children:Ff.createPortal(v.jsxs(v.Fragment,{children:[ft,Tt]}),K)})});vU.displayName="Modal";const xU=Object.assign(vU,{Manager:yP});function PT(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function oce(e,t){e.classList?e.classList.add(t):PT(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function v3(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ace(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=v3(e.className,t):e.setAttribute("class",v3(e.className&&e.className.baseVal||"",t))}const xh={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class _U extends yP{adjustAndStore(t,n,i){const r=n.style[t];n.dataset[t]=r,Cl(n,{[t]:`${parseFloat(Cl(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],Cl(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(oce(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";vf(n,xh.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth)),vf(n,xh.STICKY_CONTENT).forEach(o=>this.adjustAndStore(r,o,-t.scrollBarWidth)),vf(n,xh.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(r,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();ace(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";vf(n,xh.FIXED_CONTENT).forEach(o=>this.restore(i,o)),vf(n,xh.STICKY_CONTENT).forEach(o=>this.restore(r,o)),vf(n,xh.NAVBAR_TOGGLER).forEach(o=>this.restore(r,o))}}let qE;function bU(e){return qE||(qE=new _U(e)),qE}const wU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"modal-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));wU.displayName="ModalBody";const sce=wU,lce=P.createContext({onHide(){}}),xP=lce,SU=P.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:r,fullscreen:o,children:a,scrollable:s,...l},u)=>{e=We(e,"modal");const c=`${e}-dialog`,d=typeof o=="string"?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return v.jsx("div",{...l,ref:u,className:De(c,t,r&&`${e}-${r}`,i&&`${c}-centered`,s&&`${c}-scrollable`,o&&d),children:v.jsx("div",{className:De(`${e}-content`,n),children:a})})});SU.displayName="ModalDialog";const CU=SU,EU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"modal-footer"),v.jsx(n,{ref:r,className:De(e,t),...i})));EU.displayName="ModalFooter";const uce=EU,cce=P.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:r,...o},a)=>{const s=P.useContext(xP),l=qn(()=>{s==null||s.onHide(),i==null||i()});return v.jsxs("div",{ref:a,...o,children:[r,n&&v.jsx(Mse,{"aria-label":e,variant:t,onClick:l})]})}),kU=cce,RU=P.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(e=We(e,"modal-header"),v.jsx(kU,{ref:o,...r,className:De(t,e),closeLabel:n,closeButton:i})));RU.displayName="ModalHeader";const fce=RU,dce=T2("h4"),TU=P.forwardRef(({className:e,bsPrefix:t,as:n=dce,...i},r)=>(t=We(t,"modal-title"),v.jsx(n,{ref:r,className:De(e,t),...i})));TU.displayName="ModalTitle";const hce=TU;function pce(e){return v.jsx(nd,{...e,timeout:null})}function mce(e){return v.jsx(nd,{...e,timeout:null})}const AU=P.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:r,children:o,dialogAs:a=CU,"data-bs-theme":s,"aria-labelledby":l,"aria-describedby":u,"aria-label":c,show:d=!1,animation:h=!0,backdrop:m=!0,keyboard:g=!0,onEscapeKeyDown:y,onShow:x,onHide:b,container:w,autoFocus:S=!0,enforceFocus:k=!0,restoreFocus:R=!0,restoreFocusOptions:M,onEntered:T,onExit:N,onExiting:z,onEnter:H,onEntering:U,onExited:X,backdropClassName:B,manager:O,...j},q)=>{const[K,W]=P.useState({}),[J,Q]=P.useState(!1),ae=P.useRef(!1),ge=P.useRef(!1),ke=P.useRef(null),[pe,Se]=CT(),Fe=Fc(q,Se),Nt=qn(b),Et=C2();e=We(e,"modal");const Te=P.useMemo(()=>({onHide:Nt}),[Nt]);function Ye(){return O||bU({isRTL:Et})}function Be(vt){if(!vm)return;const $i=Ye().getScrollbarWidth()>0,no=vt.scrollHeight>ym(vt).documentElement.clientHeight;W({paddingRight:$i&&!no?g3():void 0,paddingLeft:!$i&&no?g3():void 0})}const ce=qn(()=>{pe&&Be(pe.dialog)});aP(()=>{ST(window,"resize",ce),ke.current==null||ke.current()});const Tt=()=>{ae.current=!0},ft=vt=>{ae.current&&pe&&vt.target===pe.dialog&&(ge.current=!0),ae.current=!1},Xe=()=>{Q(!0),ke.current=J7(pe.dialog,()=>{Q(!1)})},Vt=vt=>{vt.target===vt.currentTarget&&Xe()},yn=vt=>{if(m==="static"){Vt(vt);return}if(ge.current||vt.target!==vt.currentTarget){ge.current=!1;return}b==null||b()},tr=vt=>{g?y==null||y(vt):(vt.preventDefault(),m==="static"&&Xe())},Vs=(vt,$i)=>{vt&&Be(vt),H==null||H(vt,$i)},Ni=vt=>{ke.current==null||ke.current(),N==null||N(vt)},Er=(vt,$i)=>{U==null||U(vt,$i),K7(window,"resize",ce)},aa=vt=>{vt&&(vt.style.display=""),X==null||X(vt),ST(window,"resize",ce)},Ro=P.useCallback(vt=>v.jsx("div",{...vt,className:De(`${e}-backdrop`,B,!h&&"show")}),[h,B,e]),nr={...n,...K};nr.display="block";const To=vt=>v.jsx("div",{role:"dialog",...vt,style:nr,className:De(t,e,J&&`${e}-static`,!h&&"show"),onClick:m?yn:void 0,onMouseUp:ft,"data-bs-theme":s,"aria-label":c,"aria-labelledby":l,"aria-describedby":u,children:v.jsx(a,{...j,onMouseDown:Tt,className:i,contentClassName:r,children:o})});return v.jsx(xP.Provider,{value:Te,children:v.jsx(xU,{show:d,ref:Fe,backdrop:m,container:w,keyboard:!0,autoFocus:S,enforceFocus:k,restoreFocus:R,restoreFocusOptions:M,onEscapeKeyDown:tr,onShow:x,onHide:b,onEnter:Vs,onEntering:Er,onEntered:T,onExit:Ni,onExiting:z,onExited:aa,manager:Ye(),transition:h?pce:void 0,backdropTransition:h?mce:void 0,renderBackdrop:Ro,renderDialog:To})})});AU.displayName="Modal";const cp=Object.assign(AU,{Body:sce,Header:fce,Title:hce,Footer:uce,Dialog:CU,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var x3={exports:{}},NT={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){function r(a,s,l,u,c,d){var h=u||"<<anonymous>>",m=d||l;if(s[l]==null)return a?new Error("Required "+c+" `"+m+"` was not specified "+("in `"+h+"`.")):null;for(var g=arguments.length,y=Array(g>6?g-6:0),x=6;x<g;x++)y[x-6]=arguments[x];return i.apply(void 0,[s,l,h,c,m].concat(y))}var o=r.bind(null,!1);return o.isRequired=r.bind(null,!0),o}e.exports=t.default})(NT,NT.exports);var gce=NT.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=gce,i=r(n);function r(a){return a&&a.__esModule?a:{default:a}}function o(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];function u(){for(var c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=null;return s.forEach(function(g){if(m==null){var y=g.apply(void 0,d);y!=null&&(m=y)}}),m}return(0,i.default)(u)}e.exports=t.default})(x3,x3.exports);const MU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"nav-item"),v.jsx(n,{ref:r,className:De(e,t),...i})));MU.displayName="NavItem";const FU=MU,PU=P.forwardRef(({bsPrefix:e,className:t,as:n=ET,active:i,eventKey:r,disabled:o=!1,...a},s)=>{e=We(e,"nav-link");const[l,u]=pU({key:Ty(r,a.href),active:i,disabled:o,...a});return v.jsx(n,{...a,...l,ref:s,disabled:o,className:De(t,e,o&&"disabled",u.isActive&&"active")})});PU.displayName="NavLink";const NU=PU,$U=P.forwardRef((e,t)=>{const{as:n="div",bsPrefix:i,variant:r,fill:o=!1,justify:a=!1,navbar:s,navbarScroll:l,className:u,activeKey:c,...d}=gv(e,{activeKey:"onSelect"}),h=We(i,"nav");let m,g,y=!1;const x=P.useContext(xm),b=P.useContext(bH);return x?(m=x.bsPrefix,y=s??!0):b&&({cardHeaderBsPrefix:g}=b),v.jsx(Xue,{as:n,ref:t,activeKey:c,className:De(u,{[h]:!y,[`${m}-nav`]:y,[`${m}-nav-scroll`]:y&&l,[`${g}-${r}`]:!!g,[`${h}-${r}`]:!!r,[`${h}-fill`]:o,[`${h}-justified`]:a}),...d})});$U.displayName="Nav";const $h=Object.assign($U,{Item:FU,Link:NU}),IU=P.forwardRef(({bsPrefix:e,className:t,as:n,...i},r)=>{e=We(e,"navbar-brand");const o=n||(i.href?"a":"span");return v.jsx(o,{...i,ref:r,className:De(t,e)})});IU.displayName="NavbarBrand";const yce=IU,OU=P.forwardRef(({children:e,bsPrefix:t,...n},i)=>{t=We(t,"navbar-collapse");const r=P.useContext(xm);return v.jsx(Q7,{in:!!(r&&r.expanded),...n,children:v.jsx("div",{ref:i,className:t,children:e})})});OU.displayName="NavbarCollapse";const vce=OU,DU=P.forwardRef(({bsPrefix:e,className:t,children:n,label:i="Toggle navigation",as:r="button",onClick:o,...a},s)=>{e=We(e,"navbar-toggler");const{onToggle:l,expanded:u}=P.useContext(xm)||{},c=qn(d=>{o&&o(d),l&&l()});return r==="button"&&(a.type="button"),v.jsx(r,{...a,ref:s,onClick:c,"aria-label":i,className:De(t,e,!u&&"collapsed"),children:n||v.jsx("span",{className:`${e}-icon`})})});DU.displayName="NavbarToggle";const xce=DU,$T=new WeakMap,_3=(e,t)=>{if(!e||!t)return;const n=$T.get(t)||new Map;$T.set(t,n);let i=n.get(e);return i||(i=t.matchMedia(e),i.refCount=0,n.set(i.media,i)),i};function _ce(e,t=typeof window>"u"?void 0:window){const n=_3(e,t),[i,r]=P.useState(()=>n?n.matches:!1);return lb(()=>{let o=_3(e,t);if(!o)return r(!1);let a=$T.get(t);const s=()=>{r(o.matches)};return o.refCount++,o.addListener(s),s(),()=>{o.removeListener(s),o.refCount--,o.refCount<=0&&(a==null||a.delete(o.media)),o=void 0}},[e]),i}function bce(e){const t=Object.keys(e);function n(s,l){return s===l?l:s?`${s} and ${l}`:l}function i(s){return t[Math.min(t.indexOf(s)+1,t.length-1)]}function r(s){const l=i(s);let u=e[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function o(s){let l=e[s];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function a(s,l,u){let c;typeof s=="object"?(c=s,u=l,l=!0):(l=l||!0,c={[s]:l});let d=P.useMemo(()=>Object.entries(c).reduce((h,[m,g])=>((g==="up"||g===!0)&&(h=n(h,o(m))),(g==="down"||g===!0)&&(h=n(h,r(m))),h),""),[JSON.stringify(c)]);return _ce(d,u)}return a}const wce=bce({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),LU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"offcanvas-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));LU.displayName="OffcanvasBody";const Sce=LU,Cce={[ba]:"show",[fl]:"show"},jU=P.forwardRef(({bsPrefix:e,className:t,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:o=!1,appear:a=!1,...s},l)=>(e=We(e,"offcanvas"),v.jsx(k2,{ref:l,addEndListener:E2,in:i,mountOnEnter:r,unmountOnExit:o,appear:a,...s,childRef:n.ref,children:(u,c)=>P.cloneElement(n,{...c,className:De(t,n.props.className,(u===ba||u===Cy)&&`${e}-toggling`,Cce[u])})})));jU.displayName="OffcanvasToggling";const Ece=jU,zU=P.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(e=We(e,"offcanvas-header"),v.jsx(kU,{ref:o,...r,className:De(t,e),closeLabel:n,closeButton:i})));zU.displayName="OffcanvasHeader";const kce=zU,Rce=T2("h5"),BU=P.forwardRef(({className:e,bsPrefix:t,as:n=Rce,...i},r)=>(t=We(t,"offcanvas-title"),v.jsx(n,{ref:r,className:De(e,t),...i})));BU.displayName="OffcanvasTitle";const Tce=BU;function Ace(e){return v.jsx(Ece,{...e})}function Mce(e){return v.jsx(nd,{...e})}const HU=P.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":i,placement:r="start",responsive:o,show:a=!1,backdrop:s=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:d,onHide:h,container:m,autoFocus:g=!0,enforceFocus:y=!0,restoreFocus:x=!0,restoreFocusOptions:b,onEntered:w,onExit:S,onExiting:k,onEnter:R,onEntering:M,onExited:T,backdropClassName:N,manager:z,renderStaticNode:H=!1,...U},X)=>{const B=P.useRef();e=We(e,"offcanvas");const{onToggle:O}=P.useContext(xm)||{},[j,q]=P.useState(!1),K=wce(o||"xs","up");P.useEffect(()=>{q(o?a&&!K:a)},[a,o,K]);const W=qn(()=>{O==null||O(),h==null||h()}),J=P.useMemo(()=>({onHide:W}),[W]);function Q(){return z||(u?(B.current||(B.current=new _U({handleContainerOverflow:!1})),B.current):bU())}const ae=(Se,...Fe)=>{Se&&(Se.style.visibility="visible"),R==null||R(Se,...Fe)},ge=(Se,...Fe)=>{Se&&(Se.style.visibility=""),T==null||T(...Fe)},ke=P.useCallback(Se=>v.jsx("div",{...Se,className:De(`${e}-backdrop`,N)}),[N,e]),pe=Se=>v.jsx("div",{...Se,...U,className:De(t,o?`${e}-${o}`:e,`${e}-${r}`),"aria-labelledby":i,children:n});return v.jsxs(v.Fragment,{children:[!j&&(o||H)&&pe({}),v.jsx(xP.Provider,{value:J,children:v.jsx(xU,{show:j,ref:X,backdrop:s,container:m,keyboard:l,autoFocus:g,enforceFocus:y&&!u,restoreFocus:x,restoreFocusOptions:b,onEscapeKeyDown:c,onShow:d,onHide:W,onEnter:ae,onEntering:M,onEntered:w,onExit:S,onExiting:k,onExited:ge,manager:Q(),transition:Ace,backdropTransition:Mce,renderBackdrop:ke,renderDialog:pe})})]})});HU.displayName="Offcanvas";const Fce=Object.assign(HU,{Body:Sce,Header:kce,Title:Tce}),UU=P.forwardRef((e,t)=>{const n=P.useContext(xm);return v.jsx(Fce,{ref:t,show:!!(n!=null&&n.expanded),...e,renderStaticNode:!0})});UU.displayName="NavbarOffcanvas";const Pce=UU,WU=P.forwardRef(({className:e,bsPrefix:t,as:n="span",...i},r)=>(t=We(t,"navbar-text"),v.jsx(n,{ref:r,className:De(e,t),...i})));WU.displayName="NavbarText";const Nce=WU,GU=P.forwardRef((e,t)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:o,fixed:a,sticky:s,className:l,as:u="nav",expanded:c,onToggle:d,onSelect:h,collapseOnSelect:m=!1,...g}=gv(e,{expanded:"onToggle"}),y=We(n,"navbar"),x=P.useCallback((...S)=>{h==null||h(...S),m&&c&&(d==null||d(!1))},[h,m,c,d]);g.role===void 0&&u!=="nav"&&(g.role="navigation");let b=`${y}-expand`;typeof i=="string"&&(b=`${b}-${i}`);const w=P.useMemo(()=>({onToggle:()=>d==null?void 0:d(!c),bsPrefix:y,expanded:!!c,expand:i}),[y,c,i,d]);return v.jsx(xm.Provider,{value:w,children:v.jsx(rd.Provider,{value:x,children:v.jsx(u,{ref:t,...g,className:De(l,y,i&&b,r&&`${y}-${r}`,o&&`bg-${o}`,s&&`sticky-${s}`,a&&`fixed-${a}`)})})})});GU.displayName="Navbar";const VE=Object.assign(GU,{Brand:yce,Collapse:vce,Offcanvas:Pce,Text:Nce,Toggle:xce}),$ce=()=>{};function Ice(e,t,{disabled:n,clickTrigger:i}={}){const r=t||$ce;pue(e,r,{disabled:n,clickTrigger:i});const o=qn(a=>{yU(a)&&r(a)});P.useEffect(()=>{if(n||e==null)return;const a=ym(c_(e));let s=(a.defaultView||window).event;const l=gl(a,"keyup",u=>{if(u===s){s=void 0;return}o(u)});return()=>{l()}},[e,n,o])}const qU=P.forwardRef((e,t)=>{const{flip:n,offset:i,placement:r,containerPadding:o,popperConfig:a={},transition:s,runTransition:l}=e,[u,c]=CT(),[d,h]=CT(),m=Fc(c,t),g=MT(e.container),y=MT(e.target),[x,b]=P.useState(!e.show),w=lue(y,u,yue({placement:r,enableEvents:!!e.show,containerPadding:o||5,flip:n,offset:i,arrowElement:d,popperConfig:a}));e.show&&x&&b(!1);const S=(...U)=>{b(!0),e.onExited&&e.onExited(...U)},k=e.show||!x;if(Ice(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!k)return null;const{onExit:R,onExiting:M,onEnter:T,onEntering:N,onEntered:z}=e;let H=e.children(Object.assign({},w.attributes.popper,{style:w.styles.popper,ref:m}),{popper:w,placement:r,show:!!e.show,arrowProps:Object.assign({},w.attributes.arrow,{style:w.styles.arrow,ref:h})});return H=FT(s,l,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:H,onExit:R,onExiting:M,onExited:S,onEnter:T,onEntering:N,onEntered:z}),g?Ff.createPortal(H,g):null});qU.displayName="Overlay";const Oce=qU,VU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"popover-header"),v.jsx(n,{ref:r,className:De(e,t),...i})));VU.displayName="PopoverHeader";const Dce=VU,YU=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"popover-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));YU.displayName="PopoverBody";const ZU=YU;function XU(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function KU(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Lce=P.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:i,children:r,body:o,arrowProps:a,hasDoneInitialMeasure:s,popper:l,show:u,...c},d)=>{const h=We(e,"popover"),m=C2(),[g]=(t==null?void 0:t.split("-"))||[],y=XU(g,m);let x=i;return u&&!s&&(x={...i,...KU(l==null?void 0:l.strategy)}),v.jsxs("div",{ref:d,role:"tooltip",style:x,"x-placement":g,className:De(n,h,g&&`bs-popover-${y}`),...c,children:[v.jsx("div",{className:"popover-arrow",...a}),o?v.jsx(ZU,{children:r}):r]})}),fp=Object.assign(Lce,{Header:Dce,Body:ZU,POPPER_OFFSET:[0,8]}),JU=P.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:i,children:r,arrowProps:o,hasDoneInitialMeasure:a,popper:s,show:l,...u},c)=>{e=We(e,"tooltip");const d=C2(),[h]=(t==null?void 0:t.split("-"))||[],m=XU(h,d);let g=i;return l&&!a&&(g={...i,...KU(s==null?void 0:s.strategy)}),v.jsxs("div",{ref:c,style:g,role:"tooltip","x-placement":h,className:De(n,e,`bs-tooltip-${m}`),...u,children:[v.jsx("div",{className:"tooltip-arrow",...o}),v.jsx("div",{className:`${e}-inner`,children:r})]})});JU.displayName="Tooltip";const jce=Object.assign(JU,{TOOLTIP_OFFSET:[0,6]});function zce(e){const t=P.useRef(null),n=We(void 0,"popover"),i=We(void 0,"tooltip"),r=P.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(PT(t.current,n))return fp.POPPER_OFFSET;if(PT(t.current,i))return jce.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,i]);return[t,[r]]}function Bce(e,t){const{ref:n}=e,{ref:i}=t;e.ref=n.__wrapped||(n.__wrapped=r=>n(sb(r))),t.ref=i.__wrapped||(i.__wrapped=r=>i(sb(r)))}const QU=P.forwardRef(({children:e,transition:t=nd,popperConfig:n={},rootClose:i=!1,placement:r="top",show:o=!1,...a},s)=>{const l=P.useRef({}),[u,c]=P.useState(null),[d,h]=zce(a.offset),m=Fc(s,d),g=t===!0?nd:t||void 0,y=qn(x=>{c(x),n==null||n.onFirstUpdate==null||n.onFirstUpdate(x)});return lb(()=>{u&&a.target&&(l.current.scheduleUpdate==null||l.current.scheduleUpdate())},[u,a.target]),P.useEffect(()=>{o||c(null)},[o]),v.jsx(Oce,{...a,ref:m,popperConfig:{...n,modifiers:h.concat(n.modifiers||[]),onFirstUpdate:y},transition:g,rootClose:i,placement:r,show:o,children:(x,{arrowProps:b,popper:w,show:S})=>{var k,R;Bce(x,b);const M=w==null?void 0:w.placement,T=Object.assign(l.current,{state:w==null?void 0:w.state,scheduleUpdate:w==null?void 0:w.update,placement:M,outOfBoundaries:(w==null||(k=w.state)==null||(R=k.modifiersData.hide)==null?void 0:R.isReferenceHidden)||!1,strategy:n.strategy}),N=!!u;return typeof e=="function"?e({...x,placement:M,show:S,...!t&&S&&{className:"show"},popper:T,arrowProps:b,hasDoneInitialMeasure:N}):P.cloneElement(e,{...x,placement:M,arrowProps:b,popper:T,hasDoneInitialMeasure:N,className:De(e.props.className,!t&&S&&"show"),style:{...e.props.style,...x.style}})}})});QU.displayName="Overlay";const Hce=QU;function Uce(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function b3(e,t,n){const[i]=t,r=i.currentTarget,o=i.relatedTarget||i.nativeEvent[n];(!o||o!==r)&&!Ry(r,o)&&e(...t)}_n.oneOf(["click","hover","focus"]);const Wce=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:i={},show:r,defaultShow:o=!1,onToggle:a,delay:s,placement:l,flip:u=l&&l.indexOf("auto")!==-1,...c})=>{const d=P.useRef(null),h=Fc(d,n.ref),m=FH(),g=P.useRef(""),[y,x]=W7(r,o,a),b=Uce(s),{onFocus:w,onBlur:S,onClick:k}=typeof n!="function"?P.Children.only(n).props:{},R=j=>{h(sb(j))},M=P.useCallback(()=>{if(m.clear(),g.current="show",!b.show){x(!0);return}m.set(()=>{g.current==="show"&&x(!0)},b.show)},[b.show,x,m]),T=P.useCallback(()=>{if(m.clear(),g.current="hide",!b.hide){x(!1);return}m.set(()=>{g.current==="hide"&&x(!1)},b.hide)},[b.hide,x,m]),N=P.useCallback((...j)=>{M(),w==null||w(...j)},[M,w]),z=P.useCallback((...j)=>{T(),S==null||S(...j)},[T,S]),H=P.useCallback((...j)=>{x(!y),k==null||k(...j)},[k,x,y]),U=P.useCallback((...j)=>{b3(M,j,"fromElement")},[M]),X=P.useCallback((...j)=>{b3(T,j,"toElement")},[T]),B=e==null?[]:[].concat(e),O={ref:R};return B.indexOf("click")!==-1&&(O.onClick=H),B.indexOf("focus")!==-1&&(O.onFocus=N,O.onBlur=z),B.indexOf("hover")!==-1&&(O.onMouseOver=U,O.onMouseOut=X),v.jsxs(v.Fragment,{children:[typeof n=="function"?n(O):P.cloneElement(n,O),v.jsx(Hce,{...c,show:y,onHide:T,flip:u,placement:l,popperConfig:i,target:d.current,children:t})]})},eW=Wce,tW=P.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=We(e,"row"),a=G7(),s=q7(),l=`${o}-cols`,u=[];return a.forEach(c=>{const d=i[c];delete i[c];let h;d!=null&&typeof d=="object"?{cols:h}=d:h=d;const m=c!==s?`-${c}`:"";h!=null&&u.push(`${l}${m}-${h}`)}),v.jsx(n,{ref:r,...i,className:De(t,o,...u)})});tW.displayName="Row";const nW=tW,Gce=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],qce=["activeKey","getControlledId","getControllerId"],Vce=["as"];function IT(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function iW(e){let{active:t,eventKey:n,mountOnEnter:i,transition:r,unmountOnExit:o,role:a="tabpanel",onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}=e,m=IT(e,Gce);const g=P.useContext(_m);if(!g)return[Object.assign({},m,{role:a}),{eventKey:n,isActive:t,mountOnEnter:i,transition:r,unmountOnExit:o,onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}];const{activeKey:y,getControlledId:x,getControllerId:b}=g,w=IT(g,qce),S=Ty(n);return[Object.assign({},m,{role:a,id:x(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:t==null&&S!=null?Ty(y)===S:t,transition:r||w.transition,mountOnEnter:i??w.mountOnEnter,unmountOnExit:o??w.unmountOnExit,onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}]}const rW=P.forwardRef((e,t)=>{let{as:n="div"}=e,i=IT(e,Vce);const[r,{isActive:o,onEnter:a,onEntering:s,onEntered:l,onExit:u,onExiting:c,onExited:d,mountOnEnter:h,unmountOnExit:m,transition:g=vP}]=iW(i);return v.jsx(_m.Provider,{value:null,children:v.jsx(rd.Provider,{value:null,children:v.jsx(g,{in:o,onEnter:a,onEntering:s,onEntered:l,onExit:u,onExiting:c,onExited:d,mountOnEnter:h,unmountOnExit:m,children:v.jsx(n,Object.assign({},r,{ref:t,hidden:!o,"aria-hidden":!o}))})})})});rW.displayName="TabPanel";const oW=e=>{const{id:t,generateChildId:n,onSelect:i,activeKey:r,defaultActiveKey:o,transition:a,mountOnEnter:s,unmountOnExit:l,children:u}=e,[c,d]=Jse(r,o,i),h=Sue(t),m=P.useMemo(()=>n||((y,x)=>h?`${h}-${x}-${y}`:null),[h,n]),g=P.useMemo(()=>({onSelect:d,activeKey:c,transition:a,mountOnEnter:s||!1,unmountOnExit:l||!1,getControlledId:y=>m(y,"tabpane"),getControllerId:y=>m(y,"tab")}),[d,c,a,s,l,m]);return v.jsx(_m.Provider,{value:g,children:v.jsx(rd.Provider,{value:d||null,children:u})})};oW.Panel=rW;const aW=oW;function _P(e){return typeof e=="boolean"?e?nd:vP:e}const sW=({transition:e,...t})=>v.jsx(aW,{...t,transition:_P(e)});sW.displayName="TabContainer";const Yce=sW,lW=P.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"tab-content"),v.jsx(n,{ref:r,className:De(e,t),...i})));lW.displayName="TabContent";const uW=lW,cW=P.forwardRef(({bsPrefix:e,transition:t,...n},i)=>{const[{className:r,as:o="div",...a},{isActive:s,onEnter:l,onEntering:u,onEntered:c,onExit:d,onExiting:h,onExited:m,mountOnEnter:g,unmountOnExit:y,transition:x=nd}]=iW({...n,transition:_P(t)}),b=We(e,"tab-pane");return v.jsx(_m.Provider,{value:null,children:v.jsx(rd.Provider,{value:null,children:v.jsx(x,{in:s,onEnter:l,onEntering:u,onEntered:c,onExit:d,onExiting:h,onExited:m,mountOnEnter:g,unmountOnExit:y,children:v.jsx(o,{...a,ref:i,className:De(r,b,s&&"active")})})})})});cW.displayName="TabPane";const fW=cW,Zce={eventKey:_n.oneOfType([_n.string,_n.number]),title:_n.node.isRequired,disabled:_n.bool,tabClassName:_n.string,tabAttrs:_n.object},dW=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};dW.propTypes=Zce;const Ru=Object.assign(dW,{Container:Yce,Content:uW,Pane:fW}),Xce=P.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:i,borderless:r,hover:o,size:a,variant:s,responsive:l,...u},c)=>{const d=We(e,"table"),h=De(t,d,s&&`${d}-${s}`,a&&`${d}-${a}`,n&&`${d}-${typeof n=="string"?`striped-${n}`:"striped"}`,i&&`${d}-bordered`,r&&`${d}-borderless`,o&&`${d}-hover`),m=v.jsx("table",{...u,className:h,ref:c});if(l){let g=`${d}-responsive`;return typeof l=="string"&&(g=`${g}-${l}`),v.jsx("div",{className:g,children:m})}return m}),$u=Xce;function Kce(e){let t;return $H(e,n=>{t==null&&(t=n.props.eventKey)}),t}function Jce(e){const{title:t,eventKey:n,disabled:i,tabClassName:r,tabAttrs:o,id:a}=e.props;return t==null?null:v.jsx(FU,{as:"li",role:"presentation",children:v.jsx(NU,{as:"button",type:"button",eventKey:n,disabled:i,id:a,className:r,...o,children:t})})}const hW=e=>{const{id:t,onSelect:n,transition:i,mountOnEnter:r=!1,unmountOnExit:o=!1,variant:a="tabs",children:s,activeKey:l=Kce(s),...u}=gv(e,{activeKey:"onSelect"});return v.jsxs(aW,{id:t,activeKey:l,onSelect:n,transition:_P(i),mountOnEnter:r,unmountOnExit:o,children:[v.jsx($h,{...u,role:"tablist",as:"ul",variant:a,children:cb(s,Jce)}),v.jsx(uW,{children:cb(s,c=>{const d={...c.props};return delete d.title,delete d.disabled,delete d.tabClassName,delete d.tabAttrs,v.jsx(fW,{...d})})})]})};hW.displayName="Tabs";const Ay=hW;var pW={exports:{}},OT={exports:{}};(function(e,t){(function(n,i){i(t,P)})(v8,function(n,i){function r(C,F,$,D,V,G,Z){try{var ie=C[G](Z),re=ie.value}catch(ue){return void $(ue)}ie.done?F(re):Promise.resolve(re).then(D,V)}function o(C){return function(){var F=this,$=arguments;return new Promise(function(D,V){var G=C.apply(F,$);function Z(re){r(G,D,V,Z,ie,"next",re)}function ie(re){r(G,D,V,Z,ie,"throw",re)}Z(void 0)})}}function a(){return(a=Object.assign||function(C){for(var F=1;F<arguments.length;F++){var $=arguments[F];for(var D in $)Object.prototype.hasOwnProperty.call($,D)&&(C[D]=$[D])}return C}).apply(this,arguments)}function s(C,F){if(C==null)return{};var $,D,V={},G=Object.keys(C);for(D=0;D<G.length;D++)$=G[D],F.indexOf($)>=0||(V[$]=C[$]);return V}function l(C){var F=function($,D){if(typeof $!="object"||$===null)return $;var V=$[Symbol.toPrimitive];if(V!==void 0){var G=V.call($,D||"default");if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)($)}(C,"string");return typeof F=="symbol"?F:String(F)}i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var u={init:"init"},c=function(C){var F=C.value;return F===void 0?"":F},d=function(){return i.createElement(i.Fragment,null,"")},h={Cell:c,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function m(){for(var C=arguments.length,F=new Array(C),$=0;$<C;$++)F[$]=arguments[$];return F.reduce(function(D,V){var G=V.style,Z=V.className;return D=a({},D,{},s(V,["style","className"])),G&&(D.style=D.style?a({},D.style||{},{},G||{}):G),Z&&(D.className=D.className?D.className+" "+Z:Z),D.className===""&&delete D.className,D},{})}var g=function(C,F){return F===void 0&&(F={}),function($){return $===void 0&&($={}),[].concat(C,[$]).reduce(function(D,V){return function G(Z,ie,re){return typeof ie=="function"?G({},ie(Z,re)):Array.isArray(ie)?m.apply(void 0,[Z].concat(ie)):m(Z,ie)}(D,V,a({},F,{userProps:$}))},{})}},y=function(C,F,$,D){return $===void 0&&($={}),C.reduce(function(V,G){return G(V,$)},F)},x=function(C,F,$){return $===void 0&&($={}),C.forEach(function(D){D(F,$)})};function b(C,F,$,D){C.findIndex(function(V){return V.pluginName===$}),F.forEach(function(V){C.findIndex(function(G){return G.pluginName===V})})}function w(C,F){return typeof C=="function"?C(F):C}function S(C){var F=i.useRef();return F.current=C,i.useCallback(function(){return F.current},[])}var k=typeof document<"u"?i.useLayoutEffect:i.useEffect;function R(C,F){var $=i.useRef(!1);k(function(){$.current&&C(),$.current=!0},F)}function M(C,F,$){return $===void 0&&($={}),function(D,V){V===void 0&&(V={});var G=typeof D=="string"?F[D]:D;if(G===void 0)throw console.info(F),new Error("Renderer Error ");return T(G,a({},C,{column:F},$,{},V))}}function T(C,F){return function(D){return typeof D=="function"&&(V=Object.getPrototypeOf(D)).prototype&&V.prototype.isReactComponent;var V}($=C)||typeof $=="function"||function(D){return typeof D=="object"&&typeof D.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(D.$$typeof.description)}($)?i.createElement(C,F):C;var $}function N(C,F,$){return $===void 0&&($=0),C.map(function(D){return H(D=a({},D,{parent:F,depth:$})),D.columns&&(D.columns=N(D.columns,D,$+1)),D})}function z(C){return q(C,"columns")}function H(C){var F=C.id,$=C.accessor,D=C.Header;if(typeof $=="string"){F=F||$;var V=$.split(".");$=function(G){return function(Z,ie,re){if(!ie)return Z;var ue,Re=typeof ie=="function"?ie:JSON.stringify(ie),ye=B.get(Re)||function(){var Ce=function(fe){return function Ee(Ne,Pe){if(Pe===void 0&&(Pe=[]),Array.isArray(Ne))for(var Ge=0;Ge<Ne.length;Ge+=1)Ee(Ne[Ge],Pe);else Pe.push(Ne);return Pe}(fe).map(function(Ee){return String(Ee).replace(".","_")}).join(".").replace(ge,".").replace(ke,"").split(".")}(ie);return B.set(Re,Ce),Ce}();try{ue=ye.reduce(function(Ce,fe){return Ce[fe]},Z)}catch{}return ue!==void 0?ue:re}(G,V)}}if(!F&&typeof D=="string"&&D&&(F=D),!F&&C.columns)throw console.error(C),new Error('A column ID (or unique "Header" value) is required!');if(!F)throw console.error(C),new Error("A column ID (or string accessor) is required!");return Object.assign(C,{id:F,accessor:$}),C}function U(C,F){if(!F)throw new Error;return Object.assign(C,a({Header:d,Footer:d},h,{},F,{},C)),Object.assign(C,{originalWidth:C.width}),C}function X(C,F,$){$===void 0&&($=function(){return{}});for(var D=[],V=C,G=0,Z=function(){return G++},ie=function(){var re={headers:[]},ue=[],Re=V.some(function(ye){return ye.parent});V.forEach(function(ye){var Ce,fe=[].concat(ue).reverse()[0];Re&&(ye.parent?Ce=a({},ye.parent,{originalId:ye.parent.id,id:ye.parent.id+"_"+Z(),headers:[ye]},$(ye)):Ce=U(a({originalId:ye.id+"_placeholder",id:ye.id+"_placeholder_"+Z(),placeholderOf:ye,headers:[ye]},$(ye)),F),fe&&fe.originalId===Ce.originalId?fe.headers.push(ye):ue.push(Ce)),re.headers.push(ye)}),D.push(re),V=ue};V.length;)ie();return D.reverse()}var B=new Map;function O(){for(var C=arguments.length,F=new Array(C),$=0;$<C;$++)F[$]=arguments[$];for(var D=0;D<F.length;D+=1)if(F[D]!==void 0)return F[D]}function j(C){if(typeof C=="function")return C}function q(C,F){var $=[];return function D(V){V.forEach(function(G){G[F]?D(G[F]):$.push(G)})}(C),$}function K(C,F){var $=F.manualExpandedKey,D=F.expanded,V=F.expandSubRows,G=V===void 0||V,Z=[];return C.forEach(function(ie){return function re(ue,Re){Re===void 0&&(Re=!0),ue.isExpanded=ue.original&&ue.original[$]||D[ue.id],ue.canExpand=ue.subRows&&!!ue.subRows.length,Re&&Z.push(ue),ue.subRows&&ue.subRows.length&&ue.isExpanded&&ue.subRows.forEach(function(ye){return re(ye,G)})}(ie)}),Z}function W(C,F,$){return j(C)||F[C]||$[C]||$.text}function J(C,F,$){return C?C(F,$):F===void 0}function Q(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var ae=null,ge=/\[/g,ke=/\]/g,pe=function(C){return a({role:"table"},C)},Se=function(C){return a({role:"rowgroup"},C)},Fe=function(C,F){var $=F.column;return a({key:"header_"+$.id,colSpan:$.totalVisibleHeaderCount,role:"columnheader"},C)},Nt=function(C,F){var $=F.column;return a({key:"footer_"+$.id,colSpan:$.totalVisibleHeaderCount},C)},Et=function(C,F){return a({key:"headerGroup_"+F.index,role:"row"},C)},Te=function(C,F){return a({key:"footerGroup_"+F.index},C)},Ye=function(C,F){return a({key:"row_"+F.row.id,role:"row"},C)},Be=function(C,F){var $=F.cell;return a({key:"cell_"+$.row.id+"_"+$.column.id,role:"cell"},C)};function ce(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[pe],getTableBodyProps:[Se],getHeaderGroupProps:[Et],getFooterGroupProps:[Te],getHeaderProps:[Fe],getFooterProps:[Nt],getRowProps:[Ye],getCellProps:[Be],useFinalInstance:[]}}u.resetHiddenColumns="resetHiddenColumns",u.toggleHideColumn="toggleHideColumn",u.setHiddenColumns="setHiddenColumns",u.toggleHideAllColumns="toggleHideAllColumns";var Tt=function(C){C.getToggleHiddenProps=[ft],C.getToggleHideAllColumnsProps=[Xe],C.stateReducers.push(Vt),C.useInstanceBeforeDimensions.push(yn),C.headerGroupsDeps.push(function(F,$){var D=$.instance;return[].concat(F,[D.state.hiddenColumns])}),C.useInstance.push(tr)};Tt.pluginName="useColumnVisibility";var ft=function(C,F){var $=F.column;return[C,{onChange:function(D){$.toggleHidden(!D.target.checked)},style:{cursor:"pointer"},checked:$.isVisible,title:"Toggle Column Visible"}]},Xe=function(C,F){var $=F.instance;return[C,{onChange:function(D){$.toggleHideAllColumns(!D.target.checked)},style:{cursor:"pointer"},checked:!$.allColumnsHidden&&!$.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!$.allColumnsHidden&&$.state.hiddenColumns.length}]};function Vt(C,F,$,D){if(F.type===u.init)return a({hiddenColumns:[]},C);if(F.type===u.resetHiddenColumns)return a({},C,{hiddenColumns:D.initialState.hiddenColumns||[]});if(F.type===u.toggleHideColumn){var V=(F.value!==void 0?F.value:!C.hiddenColumns.includes(F.columnId))?[].concat(C.hiddenColumns,[F.columnId]):C.hiddenColumns.filter(function(G){return G!==F.columnId});return a({},C,{hiddenColumns:V})}return F.type===u.setHiddenColumns?a({},C,{hiddenColumns:w(F.value,C.hiddenColumns)}):F.type===u.toggleHideAllColumns?a({},C,{hiddenColumns:(F.value!==void 0?F.value:!C.hiddenColumns.length)?D.allColumns.map(function(G){return G.id}):[]}):void 0}function yn(C){var F=C.headers,$=C.state.hiddenColumns;i.useRef(!1).current;var D=0;F.forEach(function(V){return D+=function G(Z,ie){Z.isVisible=ie&&!$.includes(Z.id);var re=0;return Z.headers&&Z.headers.length?Z.headers.forEach(function(ue){return re+=G(ue,Z.isVisible)}):re=Z.isVisible?1:0,Z.totalVisibleHeaderCount=re,re}(V,!0)})}function tr(C){var F=C.columns,$=C.flatHeaders,D=C.dispatch,V=C.allColumns,G=C.getHooks,Z=C.state.hiddenColumns,ie=C.autoResetHiddenColumns,re=ie===void 0||ie,ue=S(C),Re=V.length===Z.length,ye=i.useCallback(function(Pe,Ge){return D({type:u.toggleHideColumn,columnId:Pe,value:Ge})},[D]),Ce=i.useCallback(function(Pe){return D({type:u.setHiddenColumns,value:Pe})},[D]),fe=i.useCallback(function(Pe){return D({type:u.toggleHideAllColumns,value:Pe})},[D]),Ee=g(G().getToggleHideAllColumnsProps,{instance:ue()});$.forEach(function(Pe){Pe.toggleHidden=function(Ge){D({type:u.toggleHideColumn,columnId:Pe.id,value:Ge})},Pe.getToggleHiddenProps=g(G().getToggleHiddenProps,{instance:ue(),column:Pe})});var Ne=S(re);R(function(){Ne()&&D({type:u.resetHiddenColumns})},[D,F]),Object.assign(C,{allColumnsHidden:Re,toggleHideColumn:ye,setHiddenColumns:Ce,toggleHideAllColumns:fe,getToggleHideAllColumnsProps:Ee})}var Vs={},Ni={},Er=function(C,F,$){return C},aa=function(C,F){return C.subRows||[]},Ro=function(C,F,$){return""+($?[$.id,F].join("."):F)},nr=function(C){return C};function To(C){var F=C.initialState,$=F===void 0?Vs:F,D=C.defaultColumn,V=D===void 0?Ni:D,G=C.getSubRows,Z=G===void 0?aa:G,ie=C.getRowId,re=ie===void 0?Ro:ie,ue=C.stateReducer,Re=ue===void 0?Er:ue,ye=C.useControlledState,Ce=ye===void 0?nr:ye;return a({},s(C,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:$,defaultColumn:V,getSubRows:Z,getRowId:re,stateReducer:Re,useControlledState:Ce})}function vt(C,F){F===void 0&&(F=0);var $=0,D=0,V=0,G=0;return C.forEach(function(Z){var ie=Z.headers;if(Z.totalLeft=F,ie&&ie.length){var re=vt(ie,F),ue=re[0],Re=re[1],ye=re[2],Ce=re[3];Z.totalMinWidth=ue,Z.totalWidth=Re,Z.totalMaxWidth=ye,Z.totalFlexWidth=Ce}else Z.totalMinWidth=Z.minWidth,Z.totalWidth=Math.min(Math.max(Z.minWidth,Z.width),Z.maxWidth),Z.totalMaxWidth=Z.maxWidth,Z.totalFlexWidth=Z.canResize?Z.totalWidth:0;Z.isVisible&&(F+=Z.totalWidth,$+=Z.totalMinWidth,D+=Z.totalWidth,V+=Z.totalMaxWidth,G+=Z.totalFlexWidth)}),[$,D,V,G]}function $i(C){var F=C.data,$=C.rows,D=C.flatRows,V=C.rowsById,G=C.column,Z=C.getRowId,ie=C.getSubRows,re=C.accessValueHooks,ue=C.getInstance;F.forEach(function(Re,ye){return function Ce(fe,Ee,Ne,Pe,Ge){Ne===void 0&&(Ne=0);var pt=fe,He=Z(fe,Ee,Pe),Me=V[He];if(Me)Me.subRows&&Me.originalSubRows.forEach(function(je,at){return Ce(je,at,Ne+1,Me)});else if((Me={id:He,original:pt,index:Ee,depth:Ne,cells:[{}]}).cells.map=Q,Me.cells.filter=Q,Me.cells.forEach=Q,Me.cells[0].getCellProps=Q,Me.values={},Ge.push(Me),D.push(Me),V[He]=Me,Me.originalSubRows=ie(fe,Ee),Me.originalSubRows){var lt=[];Me.originalSubRows.forEach(function(je,at){return Ce(je,at,Ne+1,Me,lt)}),Me.subRows=lt}G.accessor&&(Me.values[G.id]=G.accessor(fe,Ee,Me,Ge,F)),Me.values[G.id]=y(re,Me.values[G.id],{row:Me,column:G,instance:ue()})}(Re,ye,0,void 0,$)})}u.resetExpanded="resetExpanded",u.toggleRowExpanded="toggleRowExpanded",u.toggleAllRowsExpanded="toggleAllRowsExpanded";var no=function(C){C.getToggleAllRowsExpandedProps=[eh],C.getToggleRowExpandedProps=[tu],C.stateReducers.push(Yc),C.useInstance.push(dt),C.prepareRow.push(Gt)};no.pluginName="useExpanded";var eh=function(C,F){var $=F.instance;return[C,{onClick:function(D){$.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},tu=function(C,F){var $=F.row;return[C,{onClick:function(){$.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function Yc(C,F,$,D){if(F.type===u.init)return a({expanded:{}},C);if(F.type===u.resetExpanded)return a({},C,{expanded:D.initialState.expanded||{}});if(F.type===u.toggleAllRowsExpanded){var V=F.value,G=D.rowsById,Z=Object.keys(G).length===Object.keys(C.expanded).length;if(V!==void 0?V:!Z){var ie={};return Object.keys(G).forEach(function(Ee){ie[Ee]=!0}),a({},C,{expanded:ie})}return a({},C,{expanded:{}})}if(F.type===u.toggleRowExpanded){var re,ue=F.id,Re=F.value,ye=C.expanded[ue],Ce=Re!==void 0?Re:!ye;if(!ye&&Ce)return a({},C,{expanded:a({},C.expanded,(re={},re[ue]=!0,re))});if(ye&&!Ce){var fe=C.expanded;return fe[ue],a({},C,{expanded:s(fe,[ue].map(l))})}return C}}function dt(C){var F=C.data,$=C.rows,D=C.rowsById,V=C.manualExpandedKey,G=V===void 0?"expanded":V,Z=C.paginateExpandedRows,ie=Z===void 0||Z,re=C.expandSubRows,ue=re===void 0||re,Re=C.autoResetExpanded,ye=Re===void 0||Re,Ce=C.getHooks,fe=C.plugins,Ee=C.state.expanded,Ne=C.dispatch;b(fe,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var Pe=S(ye),Ge=!!(Object.keys(D).length&&Object.keys(Ee).length);Ge&&Object.keys(D).some(function(wt){return!Ee[wt]})&&(Ge=!1),R(function(){Pe()&&Ne({type:u.resetExpanded})},[Ne,F]);var pt=i.useCallback(function(wt,Ke){Ne({type:u.toggleRowExpanded,id:wt,value:Ke})},[Ne]),He=i.useCallback(function(wt){return Ne({type:u.toggleAllRowsExpanded,value:wt})},[Ne]),Me=i.useMemo(function(){return ie?K($,{manualExpandedKey:G,expanded:Ee,expandSubRows:ue}):$},[ie,$,G,Ee,ue]),lt=i.useMemo(function(){return function(wt){var Ke=0;return Object.keys(wt).forEach(function(ot){var At=ot.split(".");Ke=Math.max(Ke,At.length)}),Ke}(Ee)},[Ee]),je=S(C),at=g(Ce().getToggleAllRowsExpandedProps,{instance:je()});Object.assign(C,{preExpandedRows:$,expandedRows:Me,rows:Me,expandedDepth:lt,isAllRowsExpanded:Ge,toggleRowExpanded:pt,toggleAllRowsExpanded:He,getToggleAllRowsExpandedProps:at})}function Gt(C,F){var $=F.instance.getHooks,D=F.instance;C.toggleRowExpanded=function(V){return D.toggleRowExpanded(C.id,V)},C.getToggleRowExpandedProps=g($().getToggleRowExpandedProps,{instance:D,row:C})}var Ii=function(C,F,$){return C=C.filter(function(D){return F.some(function(V){var G=D.values[V];return String(G).toLowerCase().includes(String($).toLowerCase())})})};Ii.autoRemove=function(C){return!C};var sa=function(C,F,$){return C.filter(function(D){return F.some(function(V){var G=D.values[V];return G===void 0||String(G).toLowerCase()===String($).toLowerCase()})})};sa.autoRemove=function(C){return!C};var th=function(C,F,$){return C.filter(function(D){return F.some(function(V){var G=D.values[V];return G===void 0||String(G)===String($)})})};th.autoRemove=function(C){return!C};var nu=function(C,F,$){return C.filter(function(D){return F.some(function(V){return D.values[V].includes($)})})};nu.autoRemove=function(C){return!C||!C.length};var p1=function(C,F,$){return C.filter(function(D){return F.some(function(V){var G=D.values[V];return G&&G.length&&$.every(function(Z){return G.includes(Z)})})})};p1.autoRemove=function(C){return!C||!C.length};var m1=function(C,F,$){return C.filter(function(D){return F.some(function(V){var G=D.values[V];return G&&G.length&&$.some(function(Z){return G.includes(Z)})})})};m1.autoRemove=function(C){return!C||!C.length};var Vm=function(C,F,$){return C.filter(function(D){return F.some(function(V){var G=D.values[V];return $.includes(G)})})};Vm.autoRemove=function(C){return!C||!C.length};var Ym=function(C,F,$){return C.filter(function(D){return F.some(function(V){return D.values[V]===$})})};Ym.autoRemove=function(C){return C===void 0};var Zm=function(C,F,$){return C.filter(function(D){return F.some(function(V){return D.values[V]==$})})};Zm.autoRemove=function(C){return C==null};var g1=function(C,F,$){var D=$||[],V=D[0],G=D[1];if((V=typeof V=="number"?V:-1/0)>(G=typeof G=="number"?G:1/0)){var Z=V;V=G,G=Z}return C.filter(function(ie){return F.some(function(re){var ue=ie.values[re];return ue>=V&&ue<=G})})};g1.autoRemove=function(C){return!C||typeof C[0]!="number"&&typeof C[1]!="number"};var Zc=Object.freeze({__proto__:null,text:Ii,exactText:sa,exactTextCase:th,includes:nu,includesAll:p1,includesSome:m1,includesValue:Vm,exact:Ym,equals:Zm,between:g1});u.resetFilters="resetFilters",u.setFilter="setFilter",u.setAllFilters="setAllFilters";var y1=function(C){C.stateReducers.push(VC),C.useInstance.push(YC)};function VC(C,F,$,D){if(F.type===u.init)return a({filters:[]},C);if(F.type===u.resetFilters)return a({},C,{filters:D.initialState.filters||[]});if(F.type===u.setFilter){var V=F.columnId,G=F.filterValue,Z=D.allColumns,ie=D.filterTypes,re=Z.find(function(Ne){return Ne.id===V});if(!re)throw new Error("React-Table: Could not find a column with id: "+V);var ue=W(re.filter,ie||{},Zc),Re=C.filters.find(function(Ne){return Ne.id===V}),ye=w(G,Re&&Re.value);return J(ue.autoRemove,ye,re)?a({},C,{filters:C.filters.filter(function(Ne){return Ne.id!==V})}):a({},C,Re?{filters:C.filters.map(function(Ne){return Ne.id===V?{id:V,value:ye}:Ne})}:{filters:[].concat(C.filters,[{id:V,value:ye}])})}if(F.type===u.setAllFilters){var Ce=F.filters,fe=D.allColumns,Ee=D.filterTypes;return a({},C,{filters:w(Ce,C.filters).filter(function(Ne){var Pe=fe.find(function(Ge){return Ge.id===Ne.id});return!J(W(Pe.filter,Ee||{},Zc).autoRemove,Ne.value,Pe)})})}}function YC(C){var F=C.data,$=C.rows,D=C.flatRows,V=C.rowsById,G=C.allColumns,Z=C.filterTypes,ie=C.manualFilters,re=C.defaultCanFilter,ue=re!==void 0&&re,Re=C.disableFilters,ye=C.state.filters,Ce=C.dispatch,fe=C.autoResetFilters,Ee=fe===void 0||fe,Ne=i.useCallback(function(je,at){Ce({type:u.setFilter,columnId:je,filterValue:at})},[Ce]),Pe=i.useCallback(function(je){Ce({type:u.setAllFilters,filters:je})},[Ce]);G.forEach(function(je){var at=je.id,wt=je.accessor,Ke=je.defaultCanFilter,ot=je.disableFilters;je.canFilter=wt?O(ot!==!0&&void 0,Re!==!0&&void 0,!0):O(Ke,ue,!1),je.setFilter=function(st){return Ne(je.id,st)};var At=ye.find(function(st){return st.id===at});je.filterValue=At&&At.value});var Ge=i.useMemo(function(){if(ie||!ye.length)return[$,D,V];var je=[],at={};return[function wt(Ke,ot){ot===void 0&&(ot=0);var At=Ke;return(At=ye.reduce(function(st,St){var yt=St.id,Yt=St.value,Ue=G.find(function(dn){return dn.id===yt});if(!Ue)return st;ot===0&&(Ue.preFilteredRows=st);var ut=W(Ue.filter,Z||{},Zc);return ut?(Ue.filteredRows=ut(st,[yt],Yt),Ue.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+Ue.id+"."),st)},Ke)).forEach(function(st){je.push(st),at[st.id]=st,st.subRows&&(st.subRows=st.subRows&&st.subRows.length>0?wt(st.subRows,ot+1):st.subRows)}),At}($),je,at]},[ie,ye,$,D,V,G,Z]),pt=Ge[0],He=Ge[1],Me=Ge[2];i.useMemo(function(){G.filter(function(je){return!ye.find(function(at){return at.id===je.id})}).forEach(function(je){je.preFilteredRows=pt,je.filteredRows=pt})},[pt,ye,G]);var lt=S(Ee);R(function(){lt()&&Ce({type:u.resetFilters})},[Ce,ie?null:F]),Object.assign(C,{preFilteredRows:$,preFilteredFlatRows:D,preFilteredRowsById:V,filteredRows:pt,filteredFlatRows:He,filteredRowsById:Me,rows:pt,flatRows:He,rowsById:Me,setFilter:Ne,setAllFilters:Pe})}y1.pluginName="useFilters",u.resetGlobalFilter="resetGlobalFilter",u.setGlobalFilter="setGlobalFilter";var v1=function(C){C.stateReducers.push(Xm),C.useInstance.push(ZC)};function Xm(C,F,$,D){if(F.type===u.resetGlobalFilter)return a({},C,{globalFilter:D.initialState.globalFilter||void 0});if(F.type===u.setGlobalFilter){var V=F.filterValue,G=D.userFilterTypes,Z=W(D.globalFilter,G||{},Zc),ie=w(V,C.globalFilter);return J(Z.autoRemove,ie)?(C.globalFilter,s(C,["globalFilter"])):a({},C,{globalFilter:ie})}}function ZC(C){var F=C.data,$=C.rows,D=C.flatRows,V=C.rowsById,G=C.allColumns,Z=C.filterTypes,ie=C.globalFilter,re=C.manualGlobalFilter,ue=C.state.globalFilter,Re=C.dispatch,ye=C.autoResetGlobalFilter,Ce=ye===void 0||ye,fe=C.disableGlobalFilter,Ee=i.useCallback(function(Me){Re({type:u.setGlobalFilter,filterValue:Me})},[Re]),Ne=i.useMemo(function(){if(re||ue===void 0)return[$,D,V];var Me=[],lt={},je=W(ie,Z||{},Zc);if(!je)return console.warn("Could not find a valid 'globalFilter' option."),$;G.forEach(function(wt){var Ke=wt.disableGlobalFilter;wt.canFilter=O(Ke!==!0&&void 0,fe!==!0&&void 0,!0)});var at=G.filter(function(wt){return wt.canFilter===!0});return[function wt(Ke){return(Ke=je(Ke,at.map(function(ot){return ot.id}),ue)).forEach(function(ot){Me.push(ot),lt[ot.id]=ot,ot.subRows=ot.subRows&&ot.subRows.length?wt(ot.subRows):ot.subRows}),Ke}($),Me,lt]},[re,ue,ie,Z,G,$,D,V,fe]),Pe=Ne[0],Ge=Ne[1],pt=Ne[2],He=S(Ce);R(function(){He()&&Re({type:u.resetGlobalFilter})},[Re,re?null:F]),Object.assign(C,{preGlobalFilteredRows:$,preGlobalFilteredFlatRows:D,preGlobalFilteredRowsById:V,globalFilteredRows:Pe,globalFilteredFlatRows:Ge,globalFilteredRowsById:pt,rows:Pe,flatRows:Ge,rowsById:pt,setGlobalFilter:Ee,disableGlobalFilter:fe})}function x1(C,F){return F.reduce(function($,D){return $+(typeof D=="number"?D:0)},0)}v1.pluginName="useGlobalFilter";var _1=Object.freeze({__proto__:null,sum:x1,min:function(C){var F=C[0]||0;return C.forEach(function($){typeof $=="number"&&(F=Math.min(F,$))}),F},max:function(C){var F=C[0]||0;return C.forEach(function($){typeof $=="number"&&(F=Math.max(F,$))}),F},minMax:function(C){var F=C[0]||0,$=C[0]||0;return C.forEach(function(D){typeof D=="number"&&(F=Math.min(F,D),$=Math.max($,D))}),F+".."+$},average:function(C){return x1(0,C)/C.length},median:function(C){if(!C.length)return null;var F=Math.floor(C.length/2),$=[].concat(C).sort(function(D,V){return D-V});return C.length%2!=0?$[F]:($[F-1]+$[F])/2},unique:function(C){return Array.from(new Set(C).values())},uniqueCount:function(C){return new Set(C).size},count:function(C){return C.length}}),XC=[],Ao={};u.resetGroupBy="resetGroupBy",u.setGroupBy="setGroupBy",u.toggleGroupBy="toggleGroupBy";var Ze=function(C){C.getGroupByToggleProps=[b1],C.stateReducers.push(w1),C.visibleColumnsDeps.push(function(F,$){var D=$.instance;return[].concat(F,[D.state.groupBy])}),C.visibleColumns.push(S1),C.useInstance.push(Km),C.prepareRow.push(E1)};Ze.pluginName="useGroupBy";var b1=function(C,F){var $=F.header;return[C,{onClick:$.canGroupBy?function(D){D.persist(),$.toggleGroupBy()}:void 0,style:{cursor:$.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function w1(C,F,$,D){if(F.type===u.init)return a({groupBy:[]},C);if(F.type===u.resetGroupBy)return a({},C,{groupBy:D.initialState.groupBy||[]});if(F.type===u.setGroupBy)return a({},C,{groupBy:F.value});if(F.type===u.toggleGroupBy){var V=F.columnId,G=F.value,Z=G!==void 0?G:!C.groupBy.includes(V);return a({},C,Z?{groupBy:[].concat(C.groupBy,[V])}:{groupBy:C.groupBy.filter(function(ie){return ie!==V})})}}function S1(C,F){var $=F.instance.state.groupBy,D=$.map(function(G){return C.find(function(Z){return Z.id===G})}).filter(Boolean),V=C.filter(function(G){return!$.includes(G.id)});return(C=[].concat(D,V)).forEach(function(G){G.isGrouped=$.includes(G.id),G.groupedIndex=$.indexOf(G.id)}),C}var C1={};function Km(C){var F=C.data,$=C.rows,D=C.flatRows,V=C.rowsById,G=C.allColumns,Z=C.flatHeaders,ie=C.groupByFn,re=ie===void 0?Ys:ie,ue=C.manualGroupBy,Re=C.aggregations,ye=Re===void 0?C1:Re,Ce=C.plugins,fe=C.state.groupBy,Ee=C.dispatch,Ne=C.autoResetGroupBy,Pe=Ne===void 0||Ne,Ge=C.disableGroupBy,pt=C.defaultCanGroupBy,He=C.getHooks;b(Ce,["useColumnOrder","useFilters"],"useGroupBy");var Me=S(C);G.forEach(function(Ue){var ut=Ue.accessor,dn=Ue.defaultGroupBy,oi=Ue.disableGroupBy;Ue.canGroupBy=ut?O(Ue.canGroupBy,oi!==!0&&void 0,Ge!==!0&&void 0,!0):O(Ue.canGroupBy,dn,pt,!1),Ue.canGroupBy&&(Ue.toggleGroupBy=function(){return C.toggleGroupBy(Ue.id)}),Ue.Aggregated=Ue.Aggregated||Ue.Cell});var lt=i.useCallback(function(Ue,ut){Ee({type:u.toggleGroupBy,columnId:Ue,value:ut})},[Ee]),je=i.useCallback(function(Ue){Ee({type:u.setGroupBy,value:Ue})},[Ee]);Z.forEach(function(Ue){Ue.getGroupByToggleProps=g(He().getGroupByToggleProps,{instance:Me(),header:Ue})});var at=i.useMemo(function(){if(ue||!fe.length)return[$,D,V,XC,Ao,D,V];var Ue=fe.filter(function(Hn){return G.find(function(la){return la.id===Hn})}),ut=[],dn={},oi=[],nt={},nn=[],vn={},bi=function Hn(la,ua,Tr){if(ua===void 0&&(ua=0),ua===Ue.length)return la.map(function(Ar){return a({},Ar,{depth:ua})});var Ja=Ue[ua],aE=re(la,Ja);return Object.entries(aE).map(function(Ar,sE){var Js=Ar[0],dh=Ar[1],Qa=Ja+":"+Js,cg=Hn(dh,ua+1,Qa=Tr?Tr+">"+Qa:Qa),rf=ua?q(dh,"leafRows"):dh,lE=function(wi,fg,dg){var hh={};return G.forEach(function(Zt){if(Ue.includes(Zt.id))hh[Zt.id]=fg[0]?fg[0].values[Zt.id]:null;else{var $1=typeof Zt.aggregate=="function"?Zt.aggregate:ye[Zt.aggregate]||_1[Zt.aggregate];if($1){var lu=fg.map(function(Mr){return Mr.values[Zt.id]}),uE=wi.map(function(Mr){var uu=Mr.values[Zt.id];if(!dg&&Zt.aggregateValue){var hg=typeof Zt.aggregateValue=="function"?Zt.aggregateValue:ye[Zt.aggregateValue]||_1[Zt.aggregateValue];if(!hg)throw console.info({column:Zt}),new Error("React Table: Invalid column.aggregateValue option for column listed above");uu=hg(uu,Mr,Zt)}return uu});hh[Zt.id]=$1(uE,lu)}else{if(Zt.aggregate)throw console.info({column:Zt}),new Error("React Table: Invalid column.aggregate option for column listed above");hh[Zt.id]=null}}}),hh}(rf,dh,ua),es={id:Qa,isGrouped:!0,groupByID:Ja,groupByVal:Js,values:lE,subRows:cg,leafRows:rf,depth:ua,index:sE};return cg.forEach(function(wi){ut.push(wi),dn[wi.id]=wi,wi.isGrouped?(oi.push(wi),nt[wi.id]=wi):(nn.push(wi),vn[wi.id]=wi)}),es})}($);return bi.forEach(function(Hn){ut.push(Hn),dn[Hn.id]=Hn,Hn.isGrouped?(oi.push(Hn),nt[Hn.id]=Hn):(nn.push(Hn),vn[Hn.id]=Hn)}),[bi,ut,dn,oi,nt,nn,vn]},[ue,fe,$,D,V,G,ye,re]),wt=at[0],Ke=at[1],ot=at[2],At=at[3],st=at[4],St=at[5],yt=at[6],Yt=S(Pe);R(function(){Yt()&&Ee({type:u.resetGroupBy})},[Ee,ue?null:F]),Object.assign(C,{preGroupedRows:$,preGroupedFlatRow:D,preGroupedRowsById:V,groupedRows:wt,groupedFlatRows:Ke,groupedRowsById:ot,onlyGroupedFlatRows:At,onlyGroupedRowsById:st,nonGroupedFlatRows:St,nonGroupedRowsById:yt,rows:wt,flatRows:Ke,rowsById:ot,toggleGroupBy:lt,setGroupBy:je})}function E1(C){C.allCells.forEach(function(F){var $;F.isGrouped=F.column.isGrouped&&F.column.id===C.groupByID,F.isPlaceholder=!F.isGrouped&&F.column.isGrouped,F.isAggregated=!F.isGrouped&&!F.isPlaceholder&&(($=C.subRows)==null?void 0:$.length)})}function Ys(C,F){return C.reduce(function($,D,V){var G=""+D.values[F];return $[G]=Array.isArray($[G])?$[G]:[],$[G].push(D),$},{})}var Jm=/([0-9]+)/gm;function Qm(C,F){return C===F?0:C>F?1:-1}function Xc(C,F,$){return[C.values[$],F.values[$]]}function k1(C){return typeof C=="number"?isNaN(C)||C===1/0||C===-1/0?"":String(C):typeof C=="string"?C:""}var KC=Object.freeze({__proto__:null,alphanumeric:function(C,F,$){var D=Xc(C,F,$),V=D[0],G=D[1];for(V=k1(V),G=k1(G),V=V.split(Jm).filter(Boolean),G=G.split(Jm).filter(Boolean);V.length&&G.length;){var Z=V.shift(),ie=G.shift(),re=parseInt(Z,10),ue=parseInt(ie,10),Re=[re,ue].sort();if(isNaN(Re[0])){if(Z>ie)return 1;if(ie>Z)return-1}else{if(isNaN(Re[1]))return isNaN(re)?-1:1;if(re>ue)return 1;if(ue>re)return-1}}return V.length-G.length},datetime:function(C,F,$){var D=Xc(C,F,$),V=D[0],G=D[1];return Qm(V=V.getTime(),G=G.getTime())},basic:function(C,F,$){var D=Xc(C,F,$);return Qm(D[0],D[1])},string:function(C,F,$){var D=Xc(C,F,$),V=D[0],G=D[1];for(V=V.split("").filter(Boolean),G=G.split("").filter(Boolean);V.length&&G.length;){var Z=V.shift(),ie=G.shift(),re=Z.toLowerCase(),ue=ie.toLowerCase();if(re>ue)return 1;if(ue>re)return-1;if(Z>ie)return 1;if(ie>Z)return-1}return V.length-G.length},number:function(C,F,$){var D=Xc(C,F,$),V=D[0],G=D[1],Z=/[^0-9.]/gi;return Qm(V=Number(String(V).replace(Z,"")),G=Number(String(G).replace(Z,"")))}});u.resetSortBy="resetSortBy",u.setSortBy="setSortBy",u.toggleSortBy="toggleSortBy",u.clearSortBy="clearSortBy",h.sortType="alphanumeric",h.sortDescFirst=!1;var eg=function(C){C.getSortByToggleProps=[JC],C.stateReducers.push(nh),C.useInstance.push(QC)};eg.pluginName="useSortBy";var JC=function(C,F){var $=F.instance,D=F.column,V=$.isMultiSortEvent,G=V===void 0?function(Z){return Z.shiftKey}:V;return[C,{onClick:D.canSort?function(Z){Z.persist(),D.toggleSortBy(void 0,!$.disableMultiSort&&G(Z))}:void 0,style:{cursor:D.canSort?"pointer":void 0},title:D.canSort?"Toggle SortBy":void 0}]};function nh(C,F,$,D){if(F.type===u.init)return a({sortBy:[]},C);if(F.type===u.resetSortBy)return a({},C,{sortBy:D.initialState.sortBy||[]});if(F.type===u.clearSortBy)return a({},C,{sortBy:C.sortBy.filter(function(Me){return Me.id!==F.columnId})});if(F.type===u.setSortBy)return a({},C,{sortBy:F.sortBy});if(F.type===u.toggleSortBy){var V,G=F.columnId,Z=F.desc,ie=F.multi,re=D.allColumns,ue=D.disableMultiSort,Re=D.disableSortRemove,ye=D.disableMultiRemove,Ce=D.maxMultiSortColCount,fe=Ce===void 0?Number.MAX_SAFE_INTEGER:Ce,Ee=C.sortBy,Ne=re.find(function(Me){return Me.id===G}).sortDescFirst,Pe=Ee.find(function(Me){return Me.id===G}),Ge=Ee.findIndex(function(Me){return Me.id===G}),pt=Z!=null,He=[];return(V=!ue&&ie?Pe?"toggle":"add":Ge!==Ee.length-1||Ee.length!==1?"replace":Pe?"toggle":"replace")!="toggle"||Re||pt||ie&&ye||!(Pe&&Pe.desc&&!Ne||!Pe.desc&&Ne)||(V="remove"),V==="replace"?He=[{id:G,desc:pt?Z:Ne}]:V==="add"?(He=[].concat(Ee,[{id:G,desc:pt?Z:Ne}])).splice(0,He.length-fe):V==="toggle"?He=Ee.map(function(Me){return Me.id===G?a({},Me,{desc:pt?Z:!Pe.desc}):Me}):V==="remove"&&(He=Ee.filter(function(Me){return Me.id!==G})),a({},C,{sortBy:He})}}function QC(C){var F=C.data,$=C.rows,D=C.flatRows,V=C.allColumns,G=C.orderByFn,Z=G===void 0?R1:G,ie=C.sortTypes,re=C.manualSortBy,ue=C.defaultCanSort,Re=C.disableSortBy,ye=C.flatHeaders,Ce=C.state.sortBy,fe=C.dispatch,Ee=C.plugins,Ne=C.getHooks,Pe=C.autoResetSortBy,Ge=Pe===void 0||Pe;b(Ee,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var pt=i.useCallback(function(Ke){fe({type:u.setSortBy,sortBy:Ke})},[fe]),He=i.useCallback(function(Ke,ot,At){fe({type:u.toggleSortBy,columnId:Ke,desc:ot,multi:At})},[fe]),Me=S(C);ye.forEach(function(Ke){var ot=Ke.accessor,At=Ke.canSort,st=Ke.disableSortBy,St=Ke.id,yt=ot?O(st!==!0&&void 0,Re!==!0&&void 0,!0):O(ue,At,!1);Ke.canSort=yt,Ke.canSort&&(Ke.toggleSortBy=function(Ue,ut){return He(Ke.id,Ue,ut)},Ke.clearSortBy=function(){fe({type:u.clearSortBy,columnId:Ke.id})}),Ke.getSortByToggleProps=g(Ne().getSortByToggleProps,{instance:Me(),column:Ke});var Yt=Ce.find(function(Ue){return Ue.id===St});Ke.isSorted=!!Yt,Ke.sortedIndex=Ce.findIndex(function(Ue){return Ue.id===St}),Ke.isSortedDesc=Ke.isSorted?Yt.desc:void 0});var lt=i.useMemo(function(){if(re||!Ce.length)return[$,D];var Ke=[],ot=Ce.filter(function(At){return V.find(function(st){return st.id===At.id})});return[function At(st){var St=Z(st,ot.map(function(yt){var Yt=V.find(function(dn){return dn.id===yt.id});if(!Yt)throw new Error("React-Table: Could not find a column with id: "+yt.id+" while sorting");var Ue=Yt.sortType,ut=j(Ue)||(ie||{})[Ue]||KC[Ue];if(!ut)throw new Error("React-Table: Could not find a valid sortType of '"+Ue+"' for column '"+yt.id+"'.");return function(dn,oi){return ut(dn,oi,yt.id,yt.desc)}}),ot.map(function(yt){var Yt=V.find(function(Ue){return Ue.id===yt.id});return Yt&&Yt.sortInverted?yt.desc:!yt.desc}));return St.forEach(function(yt){Ke.push(yt),yt.subRows&&yt.subRows.length!==0&&(yt.subRows=At(yt.subRows))}),St}($),Ke]},[re,Ce,$,D,V,Z,ie]),je=lt[0],at=lt[1],wt=S(Ge);R(function(){wt()&&fe({type:u.resetSortBy})},[re?null:F]),Object.assign(C,{preSortedRows:$,preSortedFlatRows:D,sortedRows:je,sortedFlatRows:at,rows:je,flatRows:at,setSortBy:pt,toggleSortBy:He})}function R1(C,F,$){return[].concat(C).sort(function(D,V){for(var G=0;G<F.length;G+=1){var Z=F[G],ie=$[G]===!1||$[G]==="desc",re=Z(D,V);if(re!==0)return ie?-re:re}return $[0]?D.index-V.index:V.index-D.index})}u.resetPage="resetPage",u.gotoPage="gotoPage",u.setPageSize="setPageSize";var T1=function(C){C.stateReducers.push(eE),C.useInstance.push(tE)};function eE(C,F,$,D){if(F.type===u.init)return a({pageSize:10,pageIndex:0},C);if(F.type===u.resetPage)return a({},C,{pageIndex:D.initialState.pageIndex||0});if(F.type===u.gotoPage){var V=D.pageCount,G=D.page,Z=w(F.pageIndex,C.pageIndex),ie=!1;return Z>C.pageIndex?ie=V===-1?G.length>=C.pageSize:Z<V:Z<C.pageIndex&&(ie=Z>-1),ie?a({},C,{pageIndex:Z}):C}if(F.type===u.setPageSize){var re=F.pageSize,ue=C.pageSize*C.pageIndex;return a({},C,{pageIndex:Math.floor(ue/re),pageSize:re})}}function tE(C){var F=C.rows,$=C.autoResetPage,D=$===void 0||$,V=C.manualExpandedKey,G=V===void 0?"expanded":V,Z=C.plugins,ie=C.pageCount,re=C.paginateExpandedRows,ue=re===void 0||re,Re=C.expandSubRows,ye=Re===void 0||Re,Ce=C.state,fe=Ce.pageSize,Ee=Ce.pageIndex,Ne=Ce.expanded,Pe=Ce.globalFilter,Ge=Ce.filters,pt=Ce.groupBy,He=Ce.sortBy,Me=C.dispatch,lt=C.data,je=C.manualPagination;b(Z,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var at=S(D);R(function(){at()&&Me({type:u.resetPage})},[Me,je?null:lt,Pe,Ge,pt,He]);var wt=je?ie:Math.ceil(F.length/fe),Ke=i.useMemo(function(){return wt>0?[].concat(new Array(wt)).fill(null).map(function(ut,dn){return dn}):[]},[wt]),ot=i.useMemo(function(){var ut;if(je)ut=F;else{var dn=fe*Ee,oi=dn+fe;ut=F.slice(dn,oi)}return ue?ut:K(ut,{manualExpandedKey:G,expanded:Ne,expandSubRows:ye})},[ye,Ne,G,je,Ee,fe,ue,F]),At=Ee>0,st=wt===-1?ot.length>=fe:Ee<wt-1,St=i.useCallback(function(ut){Me({type:u.gotoPage,pageIndex:ut})},[Me]),yt=i.useCallback(function(){return St(function(ut){return ut-1})},[St]),Yt=i.useCallback(function(){return St(function(ut){return ut+1})},[St]),Ue=i.useCallback(function(ut){Me({type:u.setPageSize,pageSize:ut})},[Me]);Object.assign(C,{pageOptions:Ke,pageCount:wt,page:ot,canPreviousPage:At,canNextPage:st,gotoPage:St,previousPage:yt,nextPage:Yt,setPageSize:Ue})}T1.pluginName="usePagination",u.resetPivot="resetPivot",u.togglePivot="togglePivot";var ih=function(C){C.getPivotToggleProps=[A1],C.stateReducers.push(M1),C.useInstanceAfterData.push(Kc),C.allColumns.push(Dt),C.accessValue.push(fn),C.materializedColumns.push(rh),C.materializedColumnsDeps.push(ru),C.visibleColumns.push(ou),C.visibleColumnsDeps.push(tg),C.useInstance.push(xt),C.prepareRow.push(Cn)};ih.pluginName="usePivotColumns";var iu=[],A1=function(C,F){var $=F.header;return[C,{onClick:$.canPivot?function(D){D.persist(),$.togglePivot()}:void 0,style:{cursor:$.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function M1(C,F,$,D){if(F.type===u.init)return a({pivotColumns:iu},C);if(F.type===u.resetPivot)return a({},C,{pivotColumns:D.initialState.pivotColumns||iu});if(F.type===u.togglePivot){var V=F.columnId,G=F.value,Z=G!==void 0?G:!C.pivotColumns.includes(V);return a({},C,Z?{pivotColumns:[].concat(C.pivotColumns,[V])}:{pivotColumns:C.pivotColumns.filter(function(ie){return ie!==V})})}}function Kc(C){C.allColumns.forEach(function(F){F.isPivotSource=C.state.pivotColumns.includes(F.id)})}function Dt(C,F){var $=F.instance;return C.forEach(function(D){D.isPivotSource=$.state.pivotColumns.includes(D.id),D.uniqueValues=new Set}),C}function fn(C,F){var $=F.column;return $.uniqueValues&&C!==void 0&&$.uniqueValues.add(C),C}function rh(C,F){var $=F.instance,D=$.allColumns,V=$.state;if(!V.pivotColumns.length||!V.groupBy||!V.groupBy.length)return C;var G=V.pivotColumns.map(function(re){return D.find(function(ue){return ue.id===re})}).filter(Boolean),Z=D.filter(function(re){return!re.isPivotSource&&!V.groupBy.includes(re.id)&&!V.pivotColumns.includes(re.id)}),ie=z(function re(ue,Re,ye){ue===void 0&&(ue=0),ye===void 0&&(ye=[]);var Ce=G[ue];return Ce?Array.from(Ce.uniqueValues).sort().map(function(fe){var Ee=a({},Ce,{Header:Ce.PivotHeader||typeof Ce.header=="string"?Ce.Header+": "+fe:fe,isPivotGroup:!0,parent:Re,depth:ue,id:Re?Re.id+"."+Ce.id+"."+fe:Ce.id+"."+fe,pivotValue:fe});return Ee.columns=re(ue+1,Ee,[].concat(ye,[function(Ne){return Ne.values[Ce.id]===fe}])),Ee}):Z.map(function(fe){return a({},fe,{canPivot:!1,isPivoted:!0,parent:Re,depth:ue,id:""+(Re?Re.id+"."+fe.id:fe.id),accessor:function(Ee,Ne,Pe){if(ye.every(function(Ge){return Ge(Pe)}))return Pe.values[fe.id]}})})}());return[].concat(C,ie)}function ru(C,F){var $=F.instance.state,D=$.pivotColumns,V=$.groupBy;return[].concat(C,[D,V])}function ou(C,F){var $=F.instance.state;return C=C.filter(function(D){return!D.isPivotSource}),$.pivotColumns.length&&$.groupBy&&$.groupBy.length&&(C=C.filter(function(D){return D.isGrouped||D.isPivoted})),C}function tg(C,F){var $=F.instance;return[].concat(C,[$.state.pivotColumns,$.state.groupBy])}function xt(C){var F=C.columns,$=C.allColumns,D=C.flatHeaders,V=C.getHooks,G=C.plugins,Z=C.dispatch,ie=C.autoResetPivot,re=ie===void 0||ie,ue=C.manaulPivot,Re=C.disablePivot,ye=C.defaultCanPivot;b(G,["useGroupBy"],"usePivotColumns");var Ce=S(C);$.forEach(function(Ee){var Ne=Ee.accessor,Pe=Ee.defaultPivot,Ge=Ee.disablePivot;Ee.canPivot=Ne?O(Ee.canPivot,Ge!==!0&&void 0,Re!==!0&&void 0,!0):O(Ee.canPivot,Pe,ye,!1),Ee.canPivot&&(Ee.togglePivot=function(){return C.togglePivot(Ee.id)}),Ee.Aggregated=Ee.Aggregated||Ee.Cell}),D.forEach(function(Ee){Ee.getPivotToggleProps=g(V().getPivotToggleProps,{instance:Ce(),header:Ee})});var fe=S(re);R(function(){fe()&&Z({type:u.resetPivot})},[Z,ue?null:F]),Object.assign(C,{togglePivot:function(Ee,Ne){Z({type:u.togglePivot,columnId:Ee,value:Ne})}})}function Cn(C){C.allCells.forEach(function(F){F.isPivoted=F.column.isPivoted})}u.resetSelectedRows="resetSelectedRows",u.toggleAllRowsSelected="toggleAllRowsSelected",u.toggleRowSelected="toggleRowSelected",u.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var oh=function(C){C.getToggleRowSelectedProps=[ah],C.getToggleAllRowsSelectedProps=[kr],C.getToggleAllPageRowsSelectedProps=[nE],C.stateReducers.push(sh),C.useInstance.push(Zs),C.prepareRow.push(An)};oh.pluginName="useRowSelect";var ah=function(C,F){var $=F.instance,D=F.row,V=$.manualRowSelectedKey,G=V===void 0?"isSelected":V;return[C,{onChange:function(Z){D.toggleRowSelected(Z.target.checked)},style:{cursor:"pointer"},checked:!(!D.original||!D.original[G])||D.isSelected,title:"Toggle Row Selected",indeterminate:D.isSomeSelected}]},kr=function(C,F){var $=F.instance;return[C,{onChange:function(D){$.toggleAllRowsSelected(D.target.checked)},style:{cursor:"pointer"},checked:$.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!$.isAllRowsSelected&&Object.keys($.state.selectedRowIds).length)}]},nE=function(C,F){var $=F.instance;return[C,{onChange:function(D){$.toggleAllPageRowsSelected(D.target.checked)},style:{cursor:"pointer"},checked:$.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!$.isAllPageRowsSelected&&$.page.some(function(D){var V=D.id;return $.state.selectedRowIds[V]}))}]};function sh(C,F,$,D){if(F.type===u.init)return a({selectedRowIds:{}},C);if(F.type===u.resetSelectedRows)return a({},C,{selectedRowIds:D.initialState.selectedRowIds||{}});if(F.type===u.toggleAllRowsSelected){var V=F.value,G=D.isAllRowsSelected,Z=D.rowsById,ie=D.nonGroupedRowsById,re=ie===void 0?Z:ie,ue=V!==void 0?V:!G,Re=Object.assign({},C.selectedRowIds);return ue?Object.keys(re).forEach(function(St){Re[St]=!0}):Object.keys(re).forEach(function(St){delete Re[St]}),a({},C,{selectedRowIds:Re})}if(F.type===u.toggleRowSelected){var ye=F.id,Ce=F.value,fe=D.rowsById,Ee=D.selectSubRows,Ne=Ee===void 0||Ee,Pe=D.getSubRows,Ge=C.selectedRowIds[ye],pt=Ce!==void 0?Ce:!Ge;if(Ge===pt)return C;var He=a({},C.selectedRowIds);return function St(yt){var Yt=fe[yt];if(Yt&&(Yt.isGrouped||(pt?He[yt]=!0:delete He[yt]),Ne&&Pe(Yt)))return Pe(Yt).forEach(function(Ue){return St(Ue.id)})}(ye),a({},C,{selectedRowIds:He})}if(F.type===u.toggleAllPageRowsSelected){var Me=F.value,lt=D.page,je=D.rowsById,at=D.selectSubRows,wt=at===void 0||at,Ke=D.isAllPageRowsSelected,ot=D.getSubRows,At=Me!==void 0?Me:!Ke,st=a({},C.selectedRowIds);return lt.forEach(function(St){return function yt(Yt){var Ue=je[Yt];if(Ue.isGrouped||(At?st[Yt]=!0:delete st[Yt]),wt&&ot(Ue))return ot(Ue).forEach(function(ut){return yt(ut.id)})}(St.id)}),a({},C,{selectedRowIds:st})}return C}function Zs(C){var F=C.data,$=C.rows,D=C.getHooks,V=C.plugins,G=C.rowsById,Z=C.nonGroupedRowsById,ie=Z===void 0?G:Z,re=C.autoResetSelectedRows,ue=re===void 0||re,Re=C.state.selectedRowIds,ye=C.selectSubRows,Ce=ye===void 0||ye,fe=C.dispatch,Ee=C.page,Ne=C.getSubRows;b(V,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var Pe=i.useMemo(function(){var ot=[];return $.forEach(function(At){var st=Ce?function St(yt,Yt,Ue){if(Yt[yt.id])return!0;var ut=Ue(yt);if(ut&&ut.length){var dn=!0,oi=!1;return ut.forEach(function(nt){oi&&!dn||(St(nt,Yt,Ue)?oi=!0:dn=!1)}),!!dn||!!oi&&null}return!1}(At,Re,Ne):!!Re[At.id];At.isSelected=!!st,At.isSomeSelected=st===null,st&&ot.push(At)}),ot},[$,Ce,Re,Ne]),Ge=!!(Object.keys(ie).length&&Object.keys(Re).length),pt=Ge;Ge&&Object.keys(ie).some(function(ot){return!Re[ot]})&&(Ge=!1),Ge||Ee&&Ee.length&&Ee.some(function(ot){var At=ot.id;return!Re[At]})&&(pt=!1);var He=S(ue);R(function(){He()&&fe({type:u.resetSelectedRows})},[fe,F]);var Me=i.useCallback(function(ot){return fe({type:u.toggleAllRowsSelected,value:ot})},[fe]),lt=i.useCallback(function(ot){return fe({type:u.toggleAllPageRowsSelected,value:ot})},[fe]),je=i.useCallback(function(ot,At){return fe({type:u.toggleRowSelected,id:ot,value:At})},[fe]),at=S(C),wt=g(D().getToggleAllRowsSelectedProps,{instance:at()}),Ke=g(D().getToggleAllPageRowsSelectedProps,{instance:at()});Object.assign(C,{selectedFlatRows:Pe,isAllRowsSelected:Ge,isAllPageRowsSelected:pt,toggleRowSelected:je,toggleAllRowsSelected:Me,getToggleAllRowsSelectedProps:wt,getToggleAllPageRowsSelectedProps:Ke,toggleAllPageRowsSelected:lt})}function An(C,F){var $=F.instance;C.toggleRowSelected=function(D){return $.toggleRowSelected(C.id,D)},C.getToggleRowSelectedProps=g($.getHooks().getToggleRowSelectedProps,{instance:$,row:C})}var Xa=function(C){return{}},au=function(C){return{}};u.setRowState="setRowState",u.setCellState="setCellState",u.resetRowState="resetRowState";var su=function(C){C.stateReducers.push(ng),C.useInstance.push(Jc),C.prepareRow.push(ig)};function ng(C,F,$,D){var V=D.initialRowStateAccessor,G=V===void 0?Xa:V,Z=D.initialCellStateAccessor,ie=Z===void 0?au:Z,re=D.rowsById;if(F.type===u.init)return a({rowState:{}},C);if(F.type===u.resetRowState)return a({},C,{rowState:D.initialState.rowState||{}});if(F.type===u.setRowState){var ue,Re=F.rowId,ye=F.value,Ce=C.rowState[Re]!==void 0?C.rowState[Re]:G(re[Re]);return a({},C,{rowState:a({},C.rowState,(ue={},ue[Re]=w(ye,Ce),ue))})}if(F.type===u.setCellState){var fe,Ee,Ne,Pe,Ge,pt=F.rowId,He=F.columnId,Me=F.value,lt=C.rowState[pt]!==void 0?C.rowState[pt]:G(re[pt]),je=(lt==null||(fe=lt.cellState)==null?void 0:fe[He])!==void 0?lt.cellState[He]:ie((Ee=re[pt])==null||(Ne=Ee.cells)==null?void 0:Ne.find(function(at){return at.column.id===He}));return a({},C,{rowState:a({},C.rowState,(Ge={},Ge[pt]=a({},lt,{cellState:a({},lt.cellState||{},(Pe={},Pe[He]=w(Me,je),Pe))}),Ge))})}}function Jc(C){var F=C.autoResetRowState,$=F===void 0||F,D=C.data,V=C.dispatch,G=i.useCallback(function(re,ue){return V({type:u.setRowState,rowId:re,value:ue})},[V]),Z=i.useCallback(function(re,ue,Re){return V({type:u.setCellState,rowId:re,columnId:ue,value:Re})},[V]),ie=S($);R(function(){ie()&&V({type:u.resetRowState})},[D]),Object.assign(C,{setRowState:G,setCellState:Z})}function ig(C,F){var $=F.instance,D=$.initialRowStateAccessor,V=D===void 0?Xa:D,G=$.initialCellStateAccessor,Z=G===void 0?au:G,ie=$.state.rowState;C&&(C.state=ie[C.id]!==void 0?ie[C.id]:V(C),C.setState=function(re){return $.setRowState(C.id,re)},C.cells.forEach(function(re){C.state.cellState||(C.state.cellState={}),re.state=C.state.cellState[re.column.id]!==void 0?C.state.cellState[re.column.id]:Z(re),re.setState=function(ue){return $.setCellState(C.id,re.column.id,ue)}}))}su.pluginName="useRowState",u.resetColumnOrder="resetColumnOrder",u.setColumnOrder="setColumnOrder";var lh=function(C){C.stateReducers.push(uh),C.visibleColumnsDeps.push(function(F,$){var D=$.instance;return[].concat(F,[D.state.columnOrder])}),C.visibleColumns.push(rg),C.useInstance.push(og)};function uh(C,F,$,D){return F.type===u.init?a({columnOrder:[]},C):F.type===u.resetColumnOrder?a({},C,{columnOrder:D.initialState.columnOrder||[]}):F.type===u.setColumnOrder?a({},C,{columnOrder:w(F.columnOrder,C.columnOrder)}):void 0}function rg(C,F){var $=F.instance.state.columnOrder;if(!$||!$.length)return C;for(var D=[].concat($),V=[].concat(C),G=[],Z=function(){var ie=D.shift(),re=V.findIndex(function(ue){return ue.id===ie});re>-1&&G.push(V.splice(re,1)[0])};V.length&&D.length;)Z();return[].concat(G,V)}function og(C){var F=C.dispatch;C.setColumnOrder=i.useCallback(function($){return F({type:u.setColumnOrder,columnOrder:$})},[F])}lh.pluginName="useColumnOrder",h.canResize=!0,u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize";var Qc=function(C){C.getResizerProps=[F1],C.getHeaderProps.push({style:{position:"relative"}}),C.stateReducers.push(ag),C.useInstance.push(gt),C.useInstanceBeforeDimensions.push(iE)},F1=function(C,F){var $=F.instance,D=F.header,V=$.dispatch,G=function(Z,ie){var re=!1;if(Z.type==="touchstart"){if(Z.touches&&Z.touches.length>1)return;re=!0}var ue,Re,ye=function(He){var Me=[];return function lt(je){je.columns&&je.columns.length&&je.columns.map(lt),Me.push(je)}(He),Me}(ie).map(function(He){return[He.id,He.totalWidth]}),Ce=re?Math.round(Z.touches[0].clientX):Z.clientX,fe=function(){window.cancelAnimationFrame(ue),ue=null,V({type:u.columnDoneResizing})},Ee=function(){window.cancelAnimationFrame(ue),ue=null,V({type:u.columnResizing,clientX:Re})},Ne=function(He){Re=He,ue||(ue=window.requestAnimationFrame(Ee))},Pe={mouse:{moveEvent:"mousemove",moveHandler:function(He){return Ne(He.clientX)},upEvent:"mouseup",upHandler:function(He){document.removeEventListener("mousemove",Pe.mouse.moveHandler),document.removeEventListener("mouseup",Pe.mouse.upHandler),fe()}},touch:{moveEvent:"touchmove",moveHandler:function(He){return He.cancelable&&(He.preventDefault(),He.stopPropagation()),Ne(He.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(He){document.removeEventListener(Pe.touch.moveEvent,Pe.touch.moveHandler),document.removeEventListener(Pe.touch.upEvent,Pe.touch.moveHandler),fe()}}},Ge=re?Pe.touch:Pe.mouse,pt=!!function(){if(typeof ae=="boolean")return ae;var He=!1;try{var Me={get passive(){return He=!0,!1}};window.addEventListener("test",null,Me),window.removeEventListener("test",null,Me)}catch{He=!1}return ae=He}()&&{passive:!1};document.addEventListener(Ge.moveEvent,Ge.moveHandler,pt),document.addEventListener(Ge.upEvent,Ge.upHandler,pt),V({type:u.columnStartResizing,columnId:ie.id,columnWidth:ie.totalWidth,headerIdWidths:ye,clientX:Ce})};return[C,{onMouseDown:function(Z){return Z.persist()||G(Z,D)},onTouchStart:function(Z){return Z.persist()||G(Z,D)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function ag(C,F){if(F.type===u.init)return a({columnResizing:{columnWidths:{}}},C);if(F.type===u.resetResize)return a({},C,{columnResizing:{columnWidths:{}}});if(F.type===u.columnStartResizing){var $=F.clientX,D=F.columnId,V=F.columnWidth,G=F.headerIdWidths;return a({},C,{columnResizing:a({},C.columnResizing,{startX:$,headerIdWidths:G,columnWidth:V,isResizingColumn:D})})}if(F.type===u.columnResizing){var Z=F.clientX,ie=C.columnResizing,re=ie.startX,ue=ie.columnWidth,Re=ie.headerIdWidths,ye=(Z-re)/ue,Ce={};return(Re===void 0?[]:Re).forEach(function(fe){var Ee=fe[0],Ne=fe[1];Ce[Ee]=Math.max(Ne+Ne*ye,0)}),a({},C,{columnResizing:a({},C.columnResizing,{columnWidths:a({},C.columnResizing.columnWidths,{},Ce)})})}return F.type===u.columnDoneResizing?a({},C,{columnResizing:a({},C.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Qc.pluginName="useResizeColumns";var iE=function(C){var F=C.flatHeaders,$=C.disableResizing,D=C.getHooks,V=C.state.columnResizing,G=S(C);F.forEach(function(Z){var ie=O(Z.disableResizing!==!0&&void 0,$!==!0&&void 0,!0);Z.canResize=ie,Z.width=V.columnWidths[Z.id]||Z.originalWidth||Z.width,Z.isResizing=V.isResizingColumn===Z.id,ie&&(Z.getResizerProps=g(D().getResizerProps,{instance:G(),header:Z}))})};function gt(C){var F=C.plugins,$=C.dispatch,D=C.autoResetResize,V=D===void 0||D,G=C.columns;b(F,["useAbsoluteLayout"],"useResizeColumns");var Z=S(V);R(function(){Z()&&$({type:u.resetResize})},[G]);var ie=i.useCallback(function(){return $({type:u.resetResize})},[$]);Object.assign(C,{resetResizing:ie})}var Rr={position:"absolute",top:0},Jt=function(C){C.getTableBodyProps.push(ef),C.getRowProps.push(ef),C.getHeaderGroupProps.push(ef),C.getFooterGroupProps.push(ef),C.getHeaderProps.push(function(F,$){var D=$.column;return[F,{style:a({},Rr,{left:D.totalLeft+"px",width:D.totalWidth+"px"})}]}),C.getCellProps.push(function(F,$){var D=$.cell;return[F,{style:a({},Rr,{left:D.column.totalLeft+"px",width:D.column.totalWidth+"px"})}]}),C.getFooterProps.push(function(F,$){var D=$.column;return[F,{style:a({},Rr,{left:D.totalLeft+"px",width:D.totalWidth+"px"})}]})};Jt.pluginName="useAbsoluteLayout";var ef=function(C,F){return[C,{style:{position:"relative",width:F.instance.totalColumnsWidth+"px"}}]},tf={display:"inline-block",boxSizing:"border-box"},nf=function(C,F){return[C,{style:{display:"flex",width:F.instance.totalColumnsWidth+"px"}}]},ch=function(C){C.getRowProps.push(nf),C.getHeaderGroupProps.push(nf),C.getFooterGroupProps.push(nf),C.getHeaderProps.push(function(F,$){var D=$.column;return[F,{style:a({},tf,{width:D.totalWidth+"px"})}]}),C.getCellProps.push(function(F,$){var D=$.cell;return[F,{style:a({},tf,{width:D.column.totalWidth+"px"})}]}),C.getFooterProps.push(function(F,$){var D=$.column;return[F,{style:a({},tf,{width:D.totalWidth+"px"})}]})};function Ka(C){C.getTableProps.push(sg),C.getRowProps.push(Xs),C.getHeaderGroupProps.push(Xs),C.getFooterGroupProps.push(Xs),C.getHeaderProps.push(Yn),C.getCellProps.push(Ks),C.getFooterProps.push(P1)}ch.pluginName="useBlockLayout",Ka.pluginName="useFlexLayout";var sg=function(C,F){return[C,{style:{minWidth:F.instance.totalColumnsMinWidth+"px"}}]},Xs=function(C,F){return[C,{style:{display:"flex",flex:"1 0 auto",minWidth:F.instance.totalColumnsMinWidth+"px"}}]},Yn=function(C,F){var $=F.column;return[C,{style:{boxSizing:"border-box",flex:$.totalFlexWidth?$.totalFlexWidth+" 0 auto":void 0,minWidth:$.totalMinWidth+"px",width:$.totalWidth+"px"}}]},Ks=function(C,F){var $=F.cell;return[C,{style:{boxSizing:"border-box",flex:$.column.totalFlexWidth+" 0 auto",minWidth:$.column.totalMinWidth+"px",width:$.column.totalWidth+"px"}}]},P1=function(C,F){var $=F.column;return[C,{style:{boxSizing:"border-box",flex:$.totalFlexWidth?$.totalFlexWidth+" 0 auto":void 0,minWidth:$.totalMinWidth+"px",width:$.totalWidth+"px"}}]};function lg(C){C.stateReducers.push(oE),C.getTableProps.push(rE),C.getHeaderProps.push(N1),C.getRowProps.push(ug)}u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize",lg.pluginName="useGridLayout";var rE=function(C,F){var $=F.instance;return[C,{style:{display:"grid",gridTemplateColumns:$.visibleColumns.map(function(D){var V;return $.state.gridLayout.columnWidths[D.id]?$.state.gridLayout.columnWidths[D.id]+"px":(V=$.state.columnResizing)!=null&&V.isResizingColumn?$.state.gridLayout.startWidths[D.id]+"px":typeof D.width=="number"?D.width+"px":D.width}).join(" ")}}]},N1=function(C,F){var $=F.column;return[C,{id:"header-cell-"+$.id,style:{position:"sticky",gridColumn:"span "+$.totalVisibleHeaderCount}}]},ug=function(C,F){var $=F.row;return $.isExpanded?[C,{style:{gridColumn:"1 / "+($.cells.length+1)}}]:[C,{}]};function oE(C,F,$,D){if(F.type===u.init)return a({gridLayout:{columnWidths:{}}},C);if(F.type===u.resetResize)return a({},C,{gridLayout:{columnWidths:{}}});if(F.type===u.columnStartResizing){var V=F.columnId,G=F.headerIdWidths,Z=fh(V);if(Z!==void 0){var ie=D.visibleColumns.reduce(function(Me,lt){var je;return a({},Me,((je={})[lt.id]=fh(lt.id),je))},{}),re=D.visibleColumns.reduce(function(Me,lt){var je;return a({},Me,((je={})[lt.id]=lt.minWidth,je))},{}),ue=D.visibleColumns.reduce(function(Me,lt){var je;return a({},Me,((je={})[lt.id]=lt.maxWidth,je))},{}),Re=G.map(function(Me){var lt=Me[0];return[lt,fh(lt)]});return a({},C,{gridLayout:a({},C.gridLayout,{startWidths:ie,minWidths:re,maxWidths:ue,headerIdGridWidths:Re,columnWidth:Z})})}return C}if(F.type===u.columnResizing){var ye=F.clientX,Ce=C.columnResizing.startX,fe=C.gridLayout,Ee=fe.columnWidth,Ne=fe.minWidths,Pe=fe.maxWidths,Ge=fe.headerIdGridWidths,pt=(ye-Ce)/Ee,He={};return(Ge===void 0?[]:Ge).forEach(function(Me){var lt=Me[0],je=Me[1];He[lt]=Math.min(Math.max(Ne[lt],je+je*pt),Pe[lt])}),a({},C,{gridLayout:a({},C.gridLayout,{columnWidths:a({},C.gridLayout.columnWidths,{},He)})})}return F.type===u.columnDoneResizing?a({},C,{gridLayout:a({},C.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function fh(C){var F,$=(F=document.getElementById("header-cell-"+C))==null?void 0:F.offsetWidth;if($!==void 0)return $}n._UNSTABLE_usePivotColumns=ih,n.actions=u,n.defaultColumn=h,n.defaultGroupByFn=Ys,n.defaultOrderByFn=R1,n.defaultRenderer=c,n.emptyRenderer=d,n.ensurePluginOrder=b,n.flexRender=T,n.functionalUpdate=w,n.loopHooks=x,n.makePropGetter=g,n.makeRenderer=M,n.reduceHooks=y,n.safeUseLayoutEffect=k,n.useAbsoluteLayout=Jt,n.useAsyncDebounce=function(C,F){F===void 0&&(F=0);var $=i.useRef({}),D=S(C),V=S(F);return i.useCallback(function(){var G=o(regeneratorRuntime.mark(function Z(){var ie,re,ue,Re=arguments;return regeneratorRuntime.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:for(ie=Re.length,re=new Array(ie),ue=0;ue<ie;ue++)re[ue]=Re[ue];return $.current.promise||($.current.promise=new Promise(function(Ce,fe){$.current.resolve=Ce,$.current.reject=fe})),$.current.timeout&&clearTimeout($.current.timeout),$.current.timeout=setTimeout(o(regeneratorRuntime.mark(function Ce(){return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return delete $.current.timeout,fe.prev=1,fe.t0=$.current,fe.next=5,D().apply(void 0,re);case 5:fe.t1=fe.sent,fe.t0.resolve.call(fe.t0,fe.t1),fe.next=12;break;case 9:fe.prev=9,fe.t2=fe.catch(1),$.current.reject(fe.t2);case 12:return fe.prev=12,delete $.current.promise,fe.finish(12);case 15:case"end":return fe.stop()}},Ce,null,[[1,9,12,15]])})),V()),ye.abrupt("return",$.current.promise);case 5:case"end":return ye.stop()}},Z)}));return function(){return G.apply(this,arguments)}}(),[D,V])},n.useBlockLayout=ch,n.useColumnOrder=lh,n.useExpanded=no,n.useFilters=y1,n.useFlexLayout=Ka,n.useGetLatest=S,n.useGlobalFilter=v1,n.useGridLayout=lg,n.useGroupBy=Ze,n.useMountedLayoutEffect=R,n.usePagination=T1,n.useResizeColumns=Qc,n.useRowSelect=oh,n.useRowState=su,n.useSortBy=eg,n.useTable=function(C){for(var F=arguments.length,$=new Array(F>1?F-1:0),D=1;D<F;D++)$[D-1]=arguments[D];C=To(C),$=[Tt].concat($);var V=i.useRef({}),G=S(V.current);Object.assign(G(),a({},C,{plugins:$,hooks:ce()})),$.filter(Boolean).forEach(function(nt){nt(G().hooks)});var Z=S(G().hooks);G().getHooks=Z,delete G().hooks,Object.assign(G(),y(Z().useOptions,To(C)));var ie=G(),re=ie.data,ue=ie.columns,Re=ie.initialState,ye=ie.defaultColumn,Ce=ie.getSubRows,fe=ie.getRowId,Ee=ie.stateReducer,Ne=ie.useControlledState,Pe=S(Ee),Ge=i.useCallback(function(nt,nn){if(!nn.type)throw console.info({action:nn}),new Error("Unknown Action ");return[].concat(Z().stateReducers,Array.isArray(Pe())?Pe():[Pe()]).reduce(function(vn,bi){return bi(vn,nn,nt,G())||vn},nt)},[Z,Pe,G]),pt=i.useReducer(Ge,void 0,function(){return Ge(Re,{type:u.init})}),He=pt[0],Me=pt[1],lt=y([].concat(Z().useControlledState,[Ne]),He,{instance:G()});Object.assign(G(),{state:lt,dispatch:Me});var je=i.useMemo(function(){return N(y(Z().columns,ue,{instance:G()}))},[Z,G,ue].concat(y(Z().columnsDeps,[],{instance:G()})));G().columns=je;var at=i.useMemo(function(){return y(Z().allColumns,z(je),{instance:G()}).map(H)},[je,Z,G].concat(y(Z().allColumnsDeps,[],{instance:G()})));G().allColumns=at;var wt=i.useMemo(function(){for(var nt=[],nn=[],vn={},bi=[].concat(at);bi.length;){var Hn=bi.shift();$i({data:re,rows:nt,flatRows:nn,rowsById:vn,column:Hn,getRowId:fe,getSubRows:Ce,accessValueHooks:Z().accessValue,getInstance:G})}return[nt,nn,vn]},[at,re,fe,Ce,Z,G]),Ke=wt[0],ot=wt[1],At=wt[2];Object.assign(G(),{rows:Ke,initialRows:[].concat(Ke),flatRows:ot,rowsById:At}),x(Z().useInstanceAfterData,G());var st=i.useMemo(function(){return y(Z().visibleColumns,at,{instance:G()}).map(function(nt){return U(nt,ye)})},[Z,at,G,ye].concat(y(Z().visibleColumnsDeps,[],{instance:G()})));at=i.useMemo(function(){var nt=[].concat(st);return at.forEach(function(nn){nt.find(function(vn){return vn.id===nn.id})||nt.push(nn)}),nt},[at,st]),G().allColumns=at;var St=i.useMemo(function(){return y(Z().headerGroups,X(st,ye),G())},[Z,st,ye,G].concat(y(Z().headerGroupsDeps,[],{instance:G()})));G().headerGroups=St;var yt=i.useMemo(function(){return St.length?St[0].headers:[]},[St]);G().headers=yt,G().flatHeaders=St.reduce(function(nt,nn){return[].concat(nt,nn.headers)},[]),x(Z().useInstanceBeforeDimensions,G());var Yt=st.filter(function(nt){return nt.isVisible}).map(function(nt){return nt.id}).sort().join("_");st=i.useMemo(function(){return st.filter(function(nt){return nt.isVisible})},[st,Yt]),G().visibleColumns=st;var Ue=vt(yt),ut=Ue[0],dn=Ue[1],oi=Ue[2];return G().totalColumnsMinWidth=ut,G().totalColumnsWidth=dn,G().totalColumnsMaxWidth=oi,x(Z().useInstance,G()),[].concat(G().flatHeaders,G().allColumns).forEach(function(nt){nt.render=M(G(),nt),nt.getHeaderProps=g(Z().getHeaderProps,{instance:G(),column:nt}),nt.getFooterProps=g(Z().getFooterProps,{instance:G(),column:nt})}),G().headerGroups=i.useMemo(function(){return St.filter(function(nt,nn){return nt.headers=nt.headers.filter(function(vn){return vn.headers?function bi(Hn){return Hn.filter(function(la){return la.headers?bi(la.headers):la.isVisible}).length}(vn.headers):vn.isVisible}),!!nt.headers.length&&(nt.getHeaderGroupProps=g(Z().getHeaderGroupProps,{instance:G(),headerGroup:nt,index:nn}),nt.getFooterGroupProps=g(Z().getFooterGroupProps,{instance:G(),headerGroup:nt,index:nn}),!0)})},[St,G,Z]),G().footerGroups=[].concat(G().headerGroups).reverse(),G().prepareRow=i.useCallback(function(nt){nt.getRowProps=g(Z().getRowProps,{instance:G(),row:nt}),nt.allCells=at.map(function(nn){var vn=nt.values[nn.id],bi={column:nn,row:nt,value:vn};return bi.getCellProps=g(Z().getCellProps,{instance:G(),cell:bi}),bi.render=M(G(),nn,{row:nt,cell:bi,value:vn}),bi}),nt.cells=st.map(function(nn){return nt.allCells.find(function(vn){return vn.column.id===nn.id})}),x(Z().prepareRow,nt,{instance:G()})},[Z,G,at,st]),G().getTableProps=g(Z().getTableProps,{instance:G()}),G().getTableBodyProps=g(Z().getTableBodyProps,{instance:G()}),x(Z().useFinalInstance,G()),G()},Object.defineProperty(n,"__esModule",{value:!0})})})(OT,OT.exports);var Qce=OT.exports;pW.exports=Qce;var w3=pW.exports;const S3={};function DT(e,t){e===void 0&&(e=S3),t===void 0&&(t=S3);const n=Object.keys(e),i=Object.keys(t);return e===t||n.length===i.length&&n.every(r=>e[r]===t[r])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var efe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),tfe=Object.prototype.hasOwnProperty;function LT(e,t){return tfe.call(e,t)}function jT(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)LT(e,r)&&i.push(r);return i}function co(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function zT(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function xf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function mW(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function BT(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(BT(e[t]))return!0}else if(typeof e=="object"){for(var i=jT(e),r=i.length,o=0;o<r;o++)if(BT(e[i[o]]))return!0}}return!1}function C3(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var gW=function(e){efe(t,e);function t(n,i,r,o,a){var s=this.constructor,l=e.call(this,C3(n,{name:i,index:r,operation:o,tree:a}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=a,Object.setPrototypeOf(l,s.prototype),l.message=C3(n,{name:i,index:r,operation:o,tree:a}),l}return t}(Error),Fn=gW,nfe=co,Kh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=pb(n,this.path);i&&(i=co(i));var r=Bf(n,{op:"remove",path:this.from}).removed;return Bf(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=pb(n,this.from);return Bf(n,{op:"add",path:this.path,value:co(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:My(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ife={add:function(e,t,n){return zT(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Kh.move,copy:Kh.copy,test:Kh.test,_get:Kh._get};function pb(e,t){if(t=="")return e;var n={op:"_get",path:t};return Bf(e,n),n.value}function Bf(e,t,n,i,r,o){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):mb(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=pb(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=My(e,t.value),a.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Fn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{i||(e=co(e));var s=t.path||"",l=s.split("/"),u=e,c=1,d=l.length,h=void 0,m=void 0,g=void 0;for(typeof n=="function"?g=n:g=mb;;){if(m=l[c],m&&m.indexOf("~")!=-1&&(m=mW(m)),r&&(m=="__proto__"||m=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(u[m]===void 0?h=l.slice(0,c).join("/"):c==d-1&&(h=t.path),h!==void 0&&g(t,0,e,h)),c++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!zT(m))throw new Fn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);zT(m)&&(m=~~m)}if(c>=d){if(n&&t.op==="add"&&m>u.length)throw new Fn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=ife[t.op].call(t,u,m,e);if(a.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=d){var a=Kh[t.op].call(t,u,m,e);if(a.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(u=u[m],n&&c<d&&(!u||typeof u!="object"))throw new Fn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function F2(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Fn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=co(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Bf(e,t[a],n,!0,r,a),e=o[a].newDocument;return o.newDocument=e,o}function rfe(e,t,n){var i=Bf(e,t);if(i.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function mb(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Kh[e.op]){if(typeof e.path!="string")throw new Fn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&BT(e.value))throw new Fn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new Fn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Fn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=yW([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function yW(e,t,n){try{if(!Array.isArray(e))throw new Fn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)F2(co(t),co(e),n||!0);else{n=n||mb;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Fn)return r;throw r}}function My(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,o,a;if(n&&i){if(o=e.length,o!=t.length)return!1;for(r=o;r--!==0;)if(!My(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(r=o;r--!==0;)if(!t.hasOwnProperty(s[r]))return!1;for(r=o;r--!==0;)if(a=s[r],!My(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const ofe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fn,_areEquals:My,applyOperation:Bf,applyPatch:F2,applyReducer:rfe,deepClone:nfe,getValueByPointer:pb,validate:yW,validator:mb},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var bP=new WeakMap,afe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),sfe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function lfe(e){return bP.get(e)}function ufe(e,t){return e.observers.get(t)}function cfe(e,t){e.observers.delete(t.callback)}function ffe(e,t){t.unobserve()}function dfe(e,t){var n=[],i,r=lfe(e);if(!r)r=new afe(e),bP.set(e,r);else{var o=ufe(r,t);i=o&&o.observer}if(i)return i;if(i={},r.value=co(e),t){i.callback=t,i.next=null;var a=function(){HT(i)},s=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return i.patches=n,i.object=e,i.unobserve=function(){HT(i),clearTimeout(i.next),cfe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},r.observers.set(t,new sfe(t,i)),i}function HT(e,t){t===void 0&&(t=!1);var n=bP.get(e.object);wP(n.value,e.object,e.patches,"",t),e.patches.length&&F2(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function wP(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=jT(t),a=jT(e),s=!1,l=a.length-1;l>=0;l--){var u=a[l],c=e[u];if(LT(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?wP(c,d,n,i+"/"+xf(u),r):c!==d&&(r&&n.push({op:"test",path:i+"/"+xf(u),value:co(c)}),n.push({op:"replace",path:i+"/"+xf(u),value:co(d)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+xf(u),value:co(c)}),n.push({op:"remove",path:i+"/"+xf(u)}),s=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!s&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!LT(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+xf(u),value:co(t[u])})}}}function hfe(e,t,n){n===void 0&&(n=!1);var i=[];return wP(e,t,i,"",n),i}const pfe=Object.freeze(Object.defineProperty({__proto__:null,compare:hfe,generate:HT,observe:dfe,unobserve:ffe},Symbol.toStringTag,{value:"Module"}));Object.assign({},ofe,pfe,{JsonPatchError:gW,deepClone:co,escapePathComponent:xf,unescapePathComponent:mW});var mfe=/("(?:[^\\"]|\\.)*")|[:,]/g,gfe=function(t,n){var i,r,o;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),r=i===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,l,u){var c,d,h,m,g,y,x,b,w,S,k,R;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),k=JSON.stringify(s,o),k===void 0)return k;if(x=r-l.length-u,k.length<=x&&(w=k.replace(mfe,function(M,T){return T||M+" "}),w.length<=x))return w;if(o!=null&&(s=JSON.parse(k),o=void 0),typeof s=="object"&&s!==null){if(b=l+i,h=[],d=0,Array.isArray(s))for(S="[",c="]",x=s.length;d<x;d++)h.push(a(s[d],b,d===x-1?0:1)||"null");else for(S="{",c="}",y=Object.keys(s),x=y.length;d<x;d++)m=y[d],g=JSON.stringify(m)+": ",R=a(s[m],b,g.length+(d===x-1?0:1)),R!==void 0&&h.push(g+R);if(h.length>0)return[S,i+h.join(`,
`+b),c].join(`
`+l)}return k}(t,"",0)};const YE=Td(gfe);function eo(e,t,n){return e.fields=t||[],e.fname=n,e}function In(e){return e==null?null:e.fname}function Yi(e){return e==null?null:e.fields}function vW(e){return e.length===1?yfe(e[0]):vfe(e)}const yfe=e=>function(t){return t[e]},vfe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function le(e){throw Error(e)}function Is(e){const t=[],n=e.length;let i=null,r=0,o="",a,s,l;e=e+"";function u(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(l=e[s],l==="\\")o+=e.substring(a,s++),a=s;else if(l===i)u(),i=null,r=-1;else{if(i)continue;a===r&&l==='"'||a===r&&l==="'"?(a=s+1,i=l):l==="."&&!r?s>a?u():a=s+1:l==="["?(s>a&&u(),r=a=s+1):l==="]"&&(r||le("Access path missing open bracket: "+e),r>0&&u(),r=0,a=s+1)}return r&&le("Access path missing closing bracket: "+e),i&&le("Access path missing closing quote: "+e),s>a&&(s++,u()),t}function Xo(e,t,n){const i=Is(e);return e=i.length===1?i[0]:e,eo((n&&n.get||vW)(i),[e],t||e)}const xv=Xo("id"),Qi=eo(e=>e,[],"identity"),Tu=eo(()=>0,[],"zero"),bm=eo(()=>1,[],"one"),Ko=eo(()=>!0,[],"true"),hu=eo(()=>!1,[],"false");function xfe(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const xW=0,SP=1,CP=2,_W=3,bW=4;function EP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xfe,i=e||xW;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=SP&&n(t||"error","ERROR",arguments),this},warn(){return i>=CP&&n(t||"warn","WARN",arguments),this},info(){return i>=_W&&n(t||"log","INFO",arguments),this},debug(){return i>=bW&&n(t||"log","DEBUG",arguments),this}}}var de=Array.isArray;function Oe(e){return e===Object(e)}const E3=e=>e!=="__proto__";function wm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const o in r)if(o==="signals")i.signals=_fe(i.signals,r.signals);else{const a=o==="legend"?{layout:1}:o==="style"?!0:null;Sm(i,o,r[o],a)}return i},{})}function Sm(e,t,n,i){if(!E3(t))return;let r,o;if(Oe(n)&&!de(n)){o=Oe(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Sm(o,r,n[r]):E3(r)&&(o[r]=n[r])}else e[t]=n}function _fe(e,t){if(e==null)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function Ot(e){return e[e.length-1]}function Gi(e){return e==null||e===""?null:+e}const wW=e=>t=>e*Math.exp(t),SW=e=>t=>Math.log(e*t),CW=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),EW=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,gb=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function P2(e,t,n,i){const r=n(e[0]),o=n(Ot(e)),a=(o-r)*t;return[i(r-a),i(o-a)]}function kW(e,t){return P2(e,t,Gi,Qi)}function RW(e,t){var n=Math.sign(e[0]);return P2(e,t,SW(n),wW(n))}function TW(e,t,n){return P2(e,t,gb(n),gb(1/n))}function AW(e,t,n){return P2(e,t,CW(n),EW(n))}function N2(e,t,n,i,r){const o=i(e[0]),a=i(Ot(e)),s=t!=null?i(t):(o+a)/2;return[r(s+(o-s)*n),r(s+(a-s)*n)]}function kP(e,t,n){return N2(e,t,n,Gi,Qi)}function RP(e,t,n){const i=Math.sign(e[0]);return N2(e,t,n,SW(i),wW(i))}function yb(e,t,n,i){return N2(e,t,n,gb(i),gb(1/i))}function TP(e,t,n,i){return N2(e,t,n,CW(i),EW(i))}function MW(e){return 1+~~(new Date(e).getMonth()/3)}function FW(e){return 1+~~(new Date(e).getUTCMonth()/3)}function $e(e){return e!=null?de(e)?e:[e]:[]}function PW(e,t,n){let i=e[0],r=e[1],o;return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function bt(e){return typeof e=="function"}const bfe="descending";function AP(e,t,n){n=n||{},t=$e(t)||[];const i=[],r=[],o={},a=n.comparator||wfe;return $e(e).forEach((s,l)=>{s!=null&&(i.push(t[l]===bfe?-1:1),r.push(s=bt(s)?s:Xo(s,null,n)),(Yi(s)||[]).forEach(u=>o[u]=1))}),r.length===0?null:eo(a(r,i),Object.keys(o))}const $2=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),wfe=(e,t)=>e.length===1?Sfe(e[0],t[0]):Cfe(e,t,e.length),Sfe=(e,t)=>function(n,i){return $2(e(n),e(i))*t},Cfe=(e,t,n)=>(t.push(0),function(i,r){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=$2(o(i),o(r));return a*t[s]});function er(e){return bt(e)?e:()=>e}function MP(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function _t(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function ks(e,t){let n=0,i,r,o,a;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(o=a=r;n<i;++n)r=e[n],r!=null&&(r<o&&(o=r),r>a&&(a=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(o=a=r;n<i;++n)r=t(e[n]),r!=null&&(r<o&&(o=r),r>a&&(a=r))}return[o,a]}function NW(e,t){const n=e.length;let i=-1,r,o,a,s,l;if(t==null){for(;++i<n;)if(o=e[i],o!=null&&o>=o){r=a=o;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)o=e[i],o!=null&&(r>o&&(r=o,s=i),a<o&&(a=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),o!=null&&o>=o){r=a=o;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)o=t(e[i],i,e),o!=null&&(r>o&&(r=o,s=i),a<o&&(a=o,l=i))}return[s,l]}const Efe=Object.prototype.hasOwnProperty;function tt(e,t){return Efe.call(e,t)}const ux={};function Cm(e){let t={},n;function i(o){return tt(t,o)&&t[o]!==ux}const r={size:0,empty:0,object:t,has:i,get(o){return i(o)?t[o]:void 0},set(o,a){return i(o)||(++r.size,t[o]===ux&&--r.empty),t[o]=a,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=ux),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let a=0;for(const s in t){const l=t[s];l!==ux&&(!n||!n(l))&&(o[s]=l,++a)}r.size=a,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function $W(e,t,n,i,r,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],l=Ot(e),u;l<s&&(u=s,s=l,l=u),u=Math.abs(t-s);const c=Math.abs(l-t);return u<c&&u<=a?i:c<=a?r:o}function be(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),_t(i,n)}function Jh(e,t,n,i){let r=t[0],o=t[t.length-1],a;return r>o&&(a=r,r=o,o=a),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=o:e<o)}function Nc(e){return typeof e=="boolean"}function Ju(e){return Object.prototype.toString.call(e)==="[object Date]"}function IW(e){return e&&bt(e[Symbol.iterator])}function zt(e){return typeof e=="number"}function OW(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ie(e){return typeof e=="string"}function FP(e,t,n){e&&(e=t?$e(e).map(s=>s.replace(/\\(.)/g,"$1")):$e(e));const i=e&&e.length,r=n&&n.get||vW,o=s=>r(t?[s]:Is(s));let a;if(!i)a=function(){return""};else if(i===1){const s=o(e[0]);a=function(l){return""+s(l)}}else{const s=e.map(o);a=function(l){let u=""+s[0](l),c=0;for(;++c<i;)u+="|"+s[c](l);return u}}return eo(a,e,"key")}function DW(e,t){const n=e[0],i=Ot(e),r=+t;return r?r===1?i:n+r*(i-n):n}const kfe=1e4;function LW(e){e=+e||kfe;let t,n,i;const r=()=>{t={},n={},i=0},o=(a,s)=>(++i>e&&(n=t,t={},i=1),t[a]=s);return r(),{clear:r,has:a=>tt(t,a)||tt(n,a),get:a=>tt(t,a)?t[a]:tt(n,a)?o(a,n[a]):void 0,set:(a,s)=>tt(t,a)?t[a]=s:o(a,s)}}function jW(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const a=i||new t.constructor(r+o);let s=0,l=0,u=0;for(;s<r&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<r;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a}function s0(e,t){let n="";for(;--t>=0;)n+=e;return n}function zW(e,t,n,i){const r=n||" ",o=e+"",a=t-o.length;return a<=0?o:i==="left"?s0(r,a)+o:i==="center"?s0(r,~~(a/2))+o+s0(r,Math.ceil(a/2)):o+s0(r,a)}function _v(e){return e&&Ot(e)-e[0]||0}function we(e){return de(e)?"["+e.map(we)+"]":Oe(e)||Ie(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function PP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Rfe=e=>zt(e)||Ju(e)?e:Date.parse(e);function NP(e,t){return t=t||Rfe,e==null||e===""?null:t(e)}function $P(e){return e==null||e===""?null:e+""}function Da(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function BW(e,t,n,i){const r=i??"",o=e+"",a=o.length,s=Math.max(0,t-r.length);return a<=t?o:n==="left"?r+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+r+o.slice(a-~~(s/2)):o.slice(0,s)+r}function _u(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}var k3={},ZE={},XE=34,Rg=10,KE=13;function HW(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Tfe(e,t){var n=HW(e);return function(i,r){return t(n(i),r,e)}}function R3(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Pr(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Afe(e){return e<0?"-"+Pr(-e,6):e>9999?"+"+Pr(e,6):Pr(e,4)}function Mfe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Afe(e.getUTCFullYear())+"-"+Pr(e.getUTCMonth()+1,2)+"-"+Pr(e.getUTCDate(),2)+(r?"T"+Pr(t,2)+":"+Pr(n,2)+":"+Pr(i,2)+"."+Pr(r,3)+"Z":i?"T"+Pr(t,2)+":"+Pr(n,2)+":"+Pr(i,2)+"Z":n||t?"T"+Pr(t,2)+":"+Pr(n,2)+"Z":"")}function Ffe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(d,h){var m,g,y=r(d,function(x,b){if(m)return m(x,b-1);g=x,m=h?Tfe(x,h):HW(x)});return y.columns=g||[],y}function r(d,h){var m=[],g=d.length,y=0,x=0,b,w=g<=0,S=!1;d.charCodeAt(g-1)===Rg&&--g,d.charCodeAt(g-1)===KE&&--g;function k(){if(w)return ZE;if(S)return S=!1,k3;var M,T=y,N;if(d.charCodeAt(T)===XE){for(;y++<g&&d.charCodeAt(y)!==XE||d.charCodeAt(++y)===XE;);return(M=y)>=g?w=!0:(N=d.charCodeAt(y++))===Rg?S=!0:N===KE&&(S=!0,d.charCodeAt(y)===Rg&&++y),d.slice(T+1,M-1).replace(/""/g,'"')}for(;y<g;){if((N=d.charCodeAt(M=y++))===Rg)S=!0;else if(N===KE)S=!0,d.charCodeAt(y)===Rg&&++y;else if(N!==n)continue;return d.slice(T,M)}return w=!0,d.slice(T,g)}for(;(b=k())!==ZE;){for(var R=[];b!==k3&&b!==ZE;)R.push(b),b=k();h&&(R=h(R,x++))==null||m.push(R)}return m}function o(d,h){return d.map(function(m){return h.map(function(g){return c(m[g])}).join(e)})}function a(d,h){return h==null&&(h=R3(d)),[h.map(c).join(e)].concat(o(d,h)).join(`
`)}function s(d,h){return h==null&&(h=R3(d)),o(d,h).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Mfe(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:i,parseRows:r,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}function Pfe(e){return e}function Nfe(e){if(e==null)return Pfe;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var u=2,c=s.length,d=new Array(c);for(d[0]=(t+=s[0])*i+o,d[1]=(n+=s[1])*r+a;u<c;)d[u]=s[u],++u;return d}}function $fe(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function Ife(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return T3(e,n)})}:T3(e,t)}function T3(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,o=UW(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:o}:i==null?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function UW(e,t){var n=Nfe(e.transform),i=e.arcs;function r(c,d){d.length&&d.pop();for(var h=i[c<0?~c:c],m=0,g=h.length;m<g;++m)d.push(n(h[m],m));c<0&&$fe(d,g)}function o(c){return n(c)}function a(c){for(var d=[],h=0,m=c.length;h<m;++h)r(c[h],d);return d.length<2&&d.push(d[0]),d}function s(c){for(var d=a(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(s)}function u(c){var d=c.type,h;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":h=o(c.coordinates);break;case"MultiPoint":h=c.coordinates.map(o);break;case"LineString":h=a(c.arcs);break;case"MultiLineString":h=c.arcs.map(a);break;case"Polygon":h=l(c.arcs);break;case"MultiPolygon":h=c.arcs.map(l);break;default:return null}return{type:d,coordinates:h}}return u(t)}function Ofe(e,t){var n={},i={},r={},o=[],a=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],h;d.length<3&&!d[1][0]&&!d[1][1]&&(h=t[++a],t[a]=u,t[c]=h)}),t.forEach(function(u){var c=s(u),d=c[0],h=c[1],m,g;if(m=r[d])if(delete r[m.end],m.push(u),m.end=h,g=i[h]){delete i[g.start];var y=g===m?m:m.concat(g);i[y.start=m.start]=r[y.end=g.end]=y}else i[m.start]=r[m.end]=m;else if(m=i[h])if(delete i[m.start],m.unshift(u),m.start=d,g=r[d]){delete r[g.end];var x=g===m?m:g.concat(m);i[x.start=g.start]=r[x.end=m.end]=x}else i[m.start]=r[m.end]=m;else m=[u],i[m.start=d]=r[m.end=h]=m});function s(u){var c=e.arcs[u<0?~u:u],d=c[0],h;return e.transform?(h=[0,0],c.forEach(function(m){h[0]+=m[0],h[1]+=m[1]})):h=c[c.length-1],u<0?[h,d]:[d,h]}function l(u,c){for(var d in u){var h=u[d];delete c[h.start],delete h.start,delete h.end,h.forEach(function(m){n[m<0?~m:m]=1}),o.push(h)}}return l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Dfe(e){return UW(e,Lfe.apply(this,arguments))}function Lfe(e,t,n){var i,r,o;if(arguments.length>1)i=jfe(e,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:Ofe(e,i)}}function jfe(e,t,n){var i=[],r=[],o;function a(d){var h=d<0?~d:d;(r[h]||(r[h]=[])).push({i:d,g:o})}function s(d){d.forEach(a)}function l(d){d.forEach(s)}function u(d){d.forEach(l)}function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":s(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),r.forEach(n==null?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}function El(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zfe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Em(e){let t,n,i;e.length!==2?(t=El,n=(s,l)=>El(e(s),l),i=(s,l)=>e(s)-l):(t=e===El||e===zfe?e:Bfe,n=e,i=e);function r(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=r(s,l,u,c-1);return d>u&&i(s[d-1],l)>-i(s[d],l)?d-1:d}return{left:r,center:a,right:o}}function Bfe(){return 0}function WW(e){return e===null?NaN:+e}function*Hfe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const GW=Em(El),lc=GW.right,Ufe=GW.left;Em(WW).center;function Wfe(e,t){let n=0,i,r=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r))}if(n>1)return o/(n-1)}function Gfe(e,t){const n=Wfe(e,t);return n&&Math.sqrt(n)}class mr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[i++]=s),t=a}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=t[--n];n>0&&(i=a,r=t[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class A3 extends Map{constructor(t,n=YW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(UT(this,t))}has(t){return super.has(UT(this,t))}set(t,n){return super.set(qW(this,t),n)}delete(t){return super.delete(VW(this,t))}}class vb extends Set{constructor(t,n=YW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(UT(this,t))}add(t){return super.add(qW(this,t))}delete(t){return super.delete(VW(this,t))}}function UT({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function qW({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function VW({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function YW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function qfe(e,t){return Array.from(t,n=>e[n])}function Vfe(e=El){if(e===El)return ZW;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function ZW(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Yfe=Math.sqrt(50),Zfe=Math.sqrt(10),Xfe=Math.sqrt(2);function xb(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Yfe?10:o>=Zfe?5:o>=Xfe?2:1;let s,l,u;return r<0?(u=Math.pow(10,-r)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,r)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?xb(e,t,n*2):[s,l,u]}function WT(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,o,a]=i?xb(t,e,n):xb(e,t,n);if(!(o>=r))return[];const s=o-r+1,l=new Array(s);if(i)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(r+u)/-a;else for(let u=0;u<s;++u)l[u]=(r+u)*a;return l}function GT(e,t,n){return t=+t,e=+e,n=+n,xb(e,t,n)[2]}function uc(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?GT(t,e,n):GT(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Hf(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function qT(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function XW(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?ZW:Vfe(r);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/l+h)),g=Math.min(i,Math.floor(t+(l-u)*d/l+h));XW(e,t,m,g,r)}const o=e[t];let a=n,s=i;for(Tg(e,n,t),r(e[i],o)>0&&Tg(e,n,i);a<s;){for(Tg(e,a,s),++a,--s;r(e[a],o)<0;)++a;for(;r(e[s],o)>0;)--s}r(e[n],o)===0?Tg(e,n,s):(++s,Tg(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function Tg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function VT(e,t,n){if(e=Float64Array.from(Hfe(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return qT(e);if(t>=1)return Hf(e);var i,r=(i-1)*t,o=Math.floor(r),a=Hf(XW(e,o).subarray(0,o+1)),s=qT(e.subarray(o+1));return a+(s-a)*(r-o)}}function KW(e,t,n=WW){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(r-o)}}function Kfe(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function JW(e,t){return VT(e,.5,t)}function*Jfe(e){for(const t of e)yield*t}function QW(e){return Array.from(Jfe(e))}function fo(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++i<r;)o[i]=e+i*n;return o}function eG(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function Qfe(e,...t){e=new vb(e),t=t.map(ede);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function ede(e){return e instanceof vb?e:new vb(e)}function tde(...e){const t=new vb;for(const n of e)for(const i of n)t.add(i);return t}function nde(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _b(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function $p(e){return e=_b(Math.abs(e)),e?e[1]:NaN}function ide(e,t){return function(n,i){for(var r=n.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function rde(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ode=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function od(e){if(!(t=ode.exec(e)))throw new Error("invalid format: "+e);var t;return new IP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}od.prototype=IP.prototype;function IP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}IP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ade(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var tG;function sde(e,t){var n=_b(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(tG=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+_b(e,Math.max(0,t+o-1))[0]}function M3(e,t){var n=_b(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const F3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nde,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>M3(e*100,t),r:M3,s:sde,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function P3(e){return e}var N3=Array.prototype.map,$3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nG(e){var t=e.grouping===void 0||e.thousands===void 0?P3:ide(N3.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?P3:rde(N3.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=od(d);var h=d.fill,m=d.align,g=d.sign,y=d.symbol,x=d.zero,b=d.width,w=d.comma,S=d.precision,k=d.trim,R=d.type;R==="n"?(w=!0,R="g"):F3[R]||(S===void 0&&(S=12),k=!0,R="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var M=y==="$"?n:y==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",T=y==="$"?i:/[%p]/.test(R)?a:"",N=F3[R],z=/[defgprs%]/.test(R);S=S===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function H(U){var X=M,B=T,O,j,q;if(R==="c")B=N(U)+B,U="";else{U=+U;var K=U<0||1/U<0;if(U=isNaN(U)?l:N(Math.abs(U),S),k&&(U=ade(U)),K&&+U==0&&g!=="+"&&(K=!1),X=(K?g==="("?g:s:g==="-"||g==="("?"":g)+X,B=(R==="s"?$3[8+tG/3]:"")+B+(K&&g==="("?")":""),z){for(O=-1,j=U.length;++O<j;)if(q=U.charCodeAt(O),48>q||q>57){B=(q===46?r+U.slice(O+1):U.slice(O))+B,U=U.slice(0,O);break}}}w&&!x&&(U=t(U,1/0));var W=X.length+U.length+B.length,J=W<b?new Array(b-W+1).join(h):"";switch(w&&x&&(U=t(J+U,J.length?b-B.length:1/0),J=""),m){case"<":U=X+U+B+J;break;case"=":U=X+J+U+B;break;case"^":U=J.slice(0,W=J.length>>1)+X+U+B+J.slice(W);break;default:U=J+X+U+B;break}return o(U)}return H.toString=function(){return d+""},H}function c(d,h){var m=u((d=od(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor($p(h)/3)))*3,y=Math.pow(10,-g),x=$3[8+g/3];return function(b){return m(y*b)+x}}return{format:u,formatPrefix:c}}var cx,I2,OP;lde({thousands:",",grouping:[3],currency:["$",""]});function lde(e){return cx=nG(e),I2=cx.format,OP=cx.formatPrefix,cx}function iG(e){return Math.max(0,-$p(Math.abs(e)))}function rG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($p(t)/3)))*3-$p(Math.abs(e)))}function oG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$p(t)-$p(e))+1}const JE=new Date,QE=new Date;function ii(e,t,n,i){function r(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const a=r(o),s=r.ceil(o);return o-a<s-o?a:s},r.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,s)=>{const l=[];if(o=r.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},r.filter=o=>ii(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(r.count=(o,a)=>(JE.setTime(+o),QE.setTime(+a),e(JE),e(QE),Math.floor(n(JE,QE))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Ip=ii(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ip.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ii(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ip);Ip.range;const yl=1e3,jo=yl*60,vl=jo*60,jl=vl*24,DP=jl*7,I3=jl*30,ek=jl*365,xl=ii(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*yl)},(e,t)=>(t-e)/yl,e=>e.getUTCSeconds());xl.range;const O2=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*yl)},(e,t)=>{e.setTime(+e+t*jo)},(e,t)=>(t-e)/jo,e=>e.getMinutes());O2.range;const D2=ii(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jo)},(e,t)=>(t-e)/jo,e=>e.getUTCMinutes());D2.range;const L2=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*yl-e.getMinutes()*jo)},(e,t)=>{e.setTime(+e+t*vl)},(e,t)=>(t-e)/vl,e=>e.getHours());L2.range;const j2=ii(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*vl)},(e,t)=>(t-e)/vl,e=>e.getUTCHours());j2.range;const kl=ii(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jo)/jl,e=>e.getDate()-1);kl.range;const Qu=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jl,e=>e.getUTCDate()-1);Qu.range;const aG=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jl,e=>Math.floor(e/jl));aG.range;function Nd(e){return ii(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*jo)/DP)}const km=Nd(0),bb=Nd(1),ude=Nd(2),cde=Nd(3),Op=Nd(4),fde=Nd(5),dde=Nd(6);km.range;bb.range;ude.range;cde.range;Op.range;fde.range;dde.range;function $d(e){return ii(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/DP)}const Rm=$d(0),wb=$d(1),hde=$d(2),pde=$d(3),Dp=$d(4),mde=$d(5),gde=$d(6);Rm.range;wb.range;hde.range;pde.range;Dp.range;mde.range;gde.range;const Fy=ii(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fy.range;const Py=ii(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Py.range;const Rs=ii(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Rs.range;const Ts=ii(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ts.range;function sG(e,t,n,i,r,o){const a=[[xl,1,yl],[xl,5,5*yl],[xl,15,15*yl],[xl,30,30*yl],[o,1,jo],[o,5,5*jo],[o,15,15*jo],[o,30,30*jo],[r,1,vl],[r,3,3*vl],[r,6,6*vl],[r,12,12*vl],[i,1,jl],[i,2,2*jl],[n,1,DP],[t,1,I3],[t,3,3*I3],[e,1,ek]];function s(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const m=d&&typeof d.range=="function"?d:l(u,c,d),g=m?m.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,m=Em(([,,x])=>x).right(a,h);if(m===a.length)return e.every(uc(u/ek,c/ek,d));if(m===0)return Ip.every(Math.max(uc(u,c,d),1));const[g,y]=a[h/a[m-1][2]<a[m][2]/h?m-1:m];return g.every(y)}return[s,l]}const[yde,vde]=sG(Ts,Py,Rm,aG,j2,D2),[xde,_de]=sG(Rs,Fy,km,kl,L2,O2),Ti="year",Yr="quarter",Zi="month",Qn="week",Zr="date",Wi="day",As="dayofyear",xo="hours",_o="minutes",Jo="seconds",La="milliseconds",LP=[Ti,Yr,Zi,Qn,Zr,Wi,As,xo,_o,Jo,La],tk=LP.reduce((e,t,n)=>(e[t]=1+n,e),{});function jP(e){const t=$e(e).slice(),n={};return t.length||le("Missing time unit."),t.forEach(r=>{tt(tk,r)?n[r]=1:le(`Invalid time unit: ${r}.`)}),(n[Qn]||n[Wi]?1:0)+(n[Yr]||n[Zi]||n[Zr]?1:0)+(n[As]?1:0)>1&&le(`Incompatible time units: ${e}`),t.sort((r,o)=>tk[r]-tk[o]),t}const bde={[Ti]:"%Y ",[Yr]:"Q%q ",[Zi]:"%b ",[Zr]:"%d ",[Qn]:"W%U ",[Wi]:"%a ",[As]:"%j ",[xo]:"%H:00",[_o]:"00:%M",[Jo]:":%S",[La]:".%L",[`${Ti}-${Zi}`]:"%Y-%m ",[`${Ti}-${Zi}-${Zr}`]:"%Y-%m-%d ",[`${xo}-${_o}`]:"%H:%M"};function lG(e,t){const n=_t({},bde,t),i=jP(e),r=i.length;let o="",a=0,s,l;for(a=0;a<r;)for(s=i.length;s>a;--s)if(l=i.slice(a,s).join("-"),n[l]!=null){o+=n[l],a=s;break}return o.trim()}const wf=new Date;function zP(e){return wf.setFullYear(e),wf.setMonth(0),wf.setDate(1),wf.setHours(0,0,0,0),wf}function uG(e){return fG(new Date(e))}function cG(e){return YT(new Date(e))}function fG(e){return kl.count(zP(e.getFullYear())-1,e)}function YT(e){return km.count(zP(e.getFullYear())-1,e)}function ZT(e){return zP(e).getDay()}function wde(e,t,n,i,r,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,i,r,o,a);return s.setFullYear(e),s}return new Date(e,t,n,i,r,o,a)}function dG(e){return pG(new Date(e))}function hG(e){return XT(new Date(e))}function pG(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Qu.count(t-1,e)}function XT(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rm.count(t-1,e)}function KT(e){return wf.setTime(Date.UTC(e,0,1)),wf.getUTCDay()}function Sde(e,t,n,i,r,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,i,r,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,i,r,o,a))}function mG(e,t,n,i,r){const o=t||1,a=Ot(e),s=(b,w,S)=>(S=S||b,Cde(n[S],i[S],b===a&&o,w)),l=new Date,u=Da(e),c=u[Ti]?s(Ti):er(2012),d=u[Zi]?s(Zi):u[Yr]?s(Yr):Tu,h=u[Qn]&&u[Wi]?s(Wi,1,Qn+Wi):u[Qn]?s(Qn,1):u[Wi]?s(Wi,1):u[Zr]?s(Zr,1):u[As]?s(As,1):bm,m=u[xo]?s(xo):Tu,g=u[_o]?s(_o):Tu,y=u[Jo]?s(Jo):Tu,x=u[La]?s(La):Tu;return function(b){l.setTime(+b);const w=c(l);return r(w,d(l),h(l,w),m(l),g(l),y(l),x(l))}}function Cde(e,t,n,i){const r=n<=1?e:i?(o,a)=>i+n*Math.floor((e(o,a)-i)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(r(o,a),a):r}function Lp(e,t,n){return t+e*7-(n+6)%7}const Ede={[Ti]:e=>e.getFullYear(),[Yr]:e=>Math.floor(e.getMonth()/3),[Zi]:e=>e.getMonth(),[Zr]:e=>e.getDate(),[xo]:e=>e.getHours(),[_o]:e=>e.getMinutes(),[Jo]:e=>e.getSeconds(),[La]:e=>e.getMilliseconds(),[As]:e=>fG(e),[Qn]:e=>YT(e),[Qn+Wi]:(e,t)=>Lp(YT(e),e.getDay(),ZT(t)),[Wi]:(e,t)=>Lp(1,e.getDay(),ZT(t))},kde={[Yr]:e=>3*e,[Qn]:(e,t)=>Lp(e,0,ZT(t))};function gG(e,t){return mG(e,t||1,Ede,kde,wde)}const Rde={[Ti]:e=>e.getUTCFullYear(),[Yr]:e=>Math.floor(e.getUTCMonth()/3),[Zi]:e=>e.getUTCMonth(),[Zr]:e=>e.getUTCDate(),[xo]:e=>e.getUTCHours(),[_o]:e=>e.getUTCMinutes(),[Jo]:e=>e.getUTCSeconds(),[La]:e=>e.getUTCMilliseconds(),[As]:e=>pG(e),[Qn]:e=>XT(e),[Wi]:(e,t)=>Lp(1,e.getUTCDay(),KT(t)),[Qn+Wi]:(e,t)=>Lp(XT(e),e.getUTCDay(),KT(t))},Tde={[Yr]:e=>3*e,[Qn]:(e,t)=>Lp(e,0,KT(t))};function yG(e,t){return mG(e,t||1,Rde,Tde,Sde)}const Ade={[Ti]:Rs,[Yr]:Fy.every(3),[Zi]:Fy,[Qn]:km,[Zr]:kl,[Wi]:kl,[As]:kl,[xo]:L2,[_o]:O2,[Jo]:xl,[La]:Ip},Mde={[Ti]:Ts,[Yr]:Py.every(3),[Zi]:Py,[Qn]:Rm,[Zr]:Qu,[Wi]:Qu,[As]:Qu,[xo]:j2,[_o]:D2,[Jo]:xl,[La]:Ip};function Tm(e){return Ade[e]}function Am(e){return Mde[e]}function vG(e,t,n){return e?e.offset(t,n):void 0}function xG(e,t,n){return vG(Tm(e),t,n)}function _G(e,t,n){return vG(Am(e),t,n)}function bG(e,t,n,i){return e?e.range(t,n,i):void 0}function wG(e,t,n,i){return bG(Tm(e),t,n,i)}function SG(e,t,n,i){return bG(Am(e),t,n,i)}const l0=1e3,u0=l0*60,c0=u0*60,z2=c0*24,Fde=z2*7,O3=z2*30,JT=z2*365,CG=[Ti,Zi,Zr,xo,_o,Jo,La],f0=CG.slice(0,-1),d0=f0.slice(0,-1),h0=d0.slice(0,-1),Pde=h0.slice(0,-1),Nde=[Ti,Qn],D3=[Ti,Zi],EG=[Ti],Ag=[[f0,1,l0],[f0,5,5*l0],[f0,15,15*l0],[f0,30,30*l0],[d0,1,u0],[d0,5,5*u0],[d0,15,15*u0],[d0,30,30*u0],[h0,1,c0],[h0,3,3*c0],[h0,6,6*c0],[h0,12,12*c0],[Pde,1,z2],[Nde,1,Fde],[D3,1,O3],[D3,3,3*O3],[EG,1,JT]];function kG(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(_v(t))/n;let r=Em(s=>s[2]).right(Ag,i),o,a;return r===Ag.length?(o=EG,a=uc(t[0]/JT,t[1]/JT,n)):r?(r=Ag[i/Ag[r-1][2]<Ag[r][2]/i?r-1:r],o=r[0],a=r[1]):(o=CG,a=Math.max(uc(t[0],t[1],n),1)),{units:o,step:a}}function nk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ik(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function RG(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=Fg(r),c=Pg(r),d=Fg(o),h=Pg(o),m=Fg(a),g=Pg(a),y=Fg(s),x=Pg(s),b=Fg(l),w=Pg(l),S={a:K,A:W,b:J,B:Q,c:null,d:U3,e:U3,f:nhe,g:dhe,G:phe,H:Qde,I:ehe,j:the,L:TG,m:ihe,M:rhe,p:ae,q:ge,Q:q3,s:V3,S:ohe,u:ahe,U:she,V:lhe,w:uhe,W:che,x:null,X:null,y:fhe,Y:hhe,Z:mhe,"%":G3},k={a:ke,A:pe,b:Se,B:Fe,c:null,d:W3,e:W3,f:xhe,g:Ahe,G:Fhe,H:ghe,I:yhe,j:vhe,L:MG,m:_he,M:bhe,p:Nt,q:Et,Q:q3,s:V3,S:whe,u:She,U:Che,V:Ehe,w:khe,W:Rhe,x:null,X:null,y:The,Y:Mhe,Z:Phe,"%":G3},R={a:H,A:U,b:X,B,c:O,d:B3,e:B3,f:Zde,g:z3,G:j3,H:H3,I:H3,j:Gde,L:Yde,m:Wde,M:qde,p:z,q:Ude,Q:Kde,s:Jde,S:Vde,u:Lde,U:jde,V:zde,w:Dde,W:Bde,x:j,X:q,y:z3,Y:j3,Z:Hde,"%":Xde};S.x=M(n,S),S.X=M(i,S),S.c=M(t,S),k.x=M(n,k),k.X=M(i,k),k.c=M(t,k);function M(Te,Ye){return function(Be){var ce=[],Tt=-1,ft=0,Xe=Te.length,Vt,yn,tr;for(Be instanceof Date||(Be=new Date(+Be));++Tt<Xe;)Te.charCodeAt(Tt)===37&&(ce.push(Te.slice(ft,Tt)),(yn=L3[Vt=Te.charAt(++Tt)])!=null?Vt=Te.charAt(++Tt):yn=Vt==="e"?" ":"0",(tr=Ye[Vt])&&(Vt=tr(Be,yn)),ce.push(Vt),ft=Tt+1);return ce.push(Te.slice(ft,Tt)),ce.join("")}}function T(Te,Ye){return function(Be){var ce=Mg(1900,void 0,1),Tt=N(ce,Te,Be+="",0),ft,Xe;if(Tt!=Be.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Ye&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(ft=ik(Mg(ce.y,0,1)),Xe=ft.getUTCDay(),ft=Xe>4||Xe===0?wb.ceil(ft):wb(ft),ft=Qu.offset(ft,(ce.V-1)*7),ce.y=ft.getUTCFullYear(),ce.m=ft.getUTCMonth(),ce.d=ft.getUTCDate()+(ce.w+6)%7):(ft=nk(Mg(ce.y,0,1)),Xe=ft.getDay(),ft=Xe>4||Xe===0?bb.ceil(ft):bb(ft),ft=kl.offset(ft,(ce.V-1)*7),ce.y=ft.getFullYear(),ce.m=ft.getMonth(),ce.d=ft.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Xe="Z"in ce?ik(Mg(ce.y,0,1)).getUTCDay():nk(Mg(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Xe+5)%7:ce.w+ce.U*7-(Xe+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,ik(ce)):nk(ce)}}function N(Te,Ye,Be,ce){for(var Tt=0,ft=Ye.length,Xe=Be.length,Vt,yn;Tt<ft;){if(ce>=Xe)return-1;if(Vt=Ye.charCodeAt(Tt++),Vt===37){if(Vt=Ye.charAt(Tt++),yn=R[Vt in L3?Ye.charAt(Tt++):Vt],!yn||(ce=yn(Te,Be,ce))<0)return-1}else if(Vt!=Be.charCodeAt(ce++))return-1}return ce}function z(Te,Ye,Be){var ce=u.exec(Ye.slice(Be));return ce?(Te.p=c.get(ce[0].toLowerCase()),Be+ce[0].length):-1}function H(Te,Ye,Be){var ce=m.exec(Ye.slice(Be));return ce?(Te.w=g.get(ce[0].toLowerCase()),Be+ce[0].length):-1}function U(Te,Ye,Be){var ce=d.exec(Ye.slice(Be));return ce?(Te.w=h.get(ce[0].toLowerCase()),Be+ce[0].length):-1}function X(Te,Ye,Be){var ce=b.exec(Ye.slice(Be));return ce?(Te.m=w.get(ce[0].toLowerCase()),Be+ce[0].length):-1}function B(Te,Ye,Be){var ce=y.exec(Ye.slice(Be));return ce?(Te.m=x.get(ce[0].toLowerCase()),Be+ce[0].length):-1}function O(Te,Ye,Be){return N(Te,t,Ye,Be)}function j(Te,Ye,Be){return N(Te,n,Ye,Be)}function q(Te,Ye,Be){return N(Te,i,Ye,Be)}function K(Te){return a[Te.getDay()]}function W(Te){return o[Te.getDay()]}function J(Te){return l[Te.getMonth()]}function Q(Te){return s[Te.getMonth()]}function ae(Te){return r[+(Te.getHours()>=12)]}function ge(Te){return 1+~~(Te.getMonth()/3)}function ke(Te){return a[Te.getUTCDay()]}function pe(Te){return o[Te.getUTCDay()]}function Se(Te){return l[Te.getUTCMonth()]}function Fe(Te){return s[Te.getUTCMonth()]}function Nt(Te){return r[+(Te.getUTCHours()>=12)]}function Et(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var Ye=M(Te+="",S);return Ye.toString=function(){return Te},Ye},parse:function(Te){var Ye=T(Te+="",!1);return Ye.toString=function(){return Te},Ye},utcFormat:function(Te){var Ye=M(Te+="",k);return Ye.toString=function(){return Te},Ye},utcParse:function(Te){var Ye=T(Te+="",!0);return Ye.toString=function(){return Te},Ye}}}var L3={"-":"",_:" ",0:"0"},xi=/^\s*\d+/,$de=/^%/,Ide=/[\\^$*+?|[\]().{}]/g;function Ht(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function Ode(e){return e.replace(Ide,"\\$&")}function Fg(e){return new RegExp("^(?:"+e.map(Ode).join("|")+")","i")}function Pg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Dde(e,t,n){var i=xi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Lde(e,t,n){var i=xi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function jde(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function zde(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Bde(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function j3(e,t,n){var i=xi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function z3(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Hde(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Ude(e,t,n){var i=xi.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function Wde(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function B3(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Gde(e,t,n){var i=xi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function H3(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function qde(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Vde(e,t,n){var i=xi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Yde(e,t,n){var i=xi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Zde(e,t,n){var i=xi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Xde(e,t,n){var i=$de.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Kde(e,t,n){var i=xi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Jde(e,t,n){var i=xi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function U3(e,t){return Ht(e.getDate(),t,2)}function Qde(e,t){return Ht(e.getHours(),t,2)}function ehe(e,t){return Ht(e.getHours()%12||12,t,2)}function the(e,t){return Ht(1+kl.count(Rs(e),e),t,3)}function TG(e,t){return Ht(e.getMilliseconds(),t,3)}function nhe(e,t){return TG(e,t)+"000"}function ihe(e,t){return Ht(e.getMonth()+1,t,2)}function rhe(e,t){return Ht(e.getMinutes(),t,2)}function ohe(e,t){return Ht(e.getSeconds(),t,2)}function ahe(e){var t=e.getDay();return t===0?7:t}function she(e,t){return Ht(km.count(Rs(e)-1,e),t,2)}function AG(e){var t=e.getDay();return t>=4||t===0?Op(e):Op.ceil(e)}function lhe(e,t){return e=AG(e),Ht(Op.count(Rs(e),e)+(Rs(e).getDay()===4),t,2)}function uhe(e){return e.getDay()}function che(e,t){return Ht(bb.count(Rs(e)-1,e),t,2)}function fhe(e,t){return Ht(e.getFullYear()%100,t,2)}function dhe(e,t){return e=AG(e),Ht(e.getFullYear()%100,t,2)}function hhe(e,t){return Ht(e.getFullYear()%1e4,t,4)}function phe(e,t){var n=e.getDay();return e=n>=4||n===0?Op(e):Op.ceil(e),Ht(e.getFullYear()%1e4,t,4)}function mhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ht(t/60|0,"0",2)+Ht(t%60,"0",2)}function W3(e,t){return Ht(e.getUTCDate(),t,2)}function ghe(e,t){return Ht(e.getUTCHours(),t,2)}function yhe(e,t){return Ht(e.getUTCHours()%12||12,t,2)}function vhe(e,t){return Ht(1+Qu.count(Ts(e),e),t,3)}function MG(e,t){return Ht(e.getUTCMilliseconds(),t,3)}function xhe(e,t){return MG(e,t)+"000"}function _he(e,t){return Ht(e.getUTCMonth()+1,t,2)}function bhe(e,t){return Ht(e.getUTCMinutes(),t,2)}function whe(e,t){return Ht(e.getUTCSeconds(),t,2)}function She(e){var t=e.getUTCDay();return t===0?7:t}function Che(e,t){return Ht(Rm.count(Ts(e)-1,e),t,2)}function FG(e){var t=e.getUTCDay();return t>=4||t===0?Dp(e):Dp.ceil(e)}function Ehe(e,t){return e=FG(e),Ht(Dp.count(Ts(e),e)+(Ts(e).getUTCDay()===4),t,2)}function khe(e){return e.getUTCDay()}function Rhe(e,t){return Ht(wb.count(Ts(e)-1,e),t,2)}function The(e,t){return Ht(e.getUTCFullYear()%100,t,2)}function Ahe(e,t){return e=FG(e),Ht(e.getUTCFullYear()%100,t,2)}function Mhe(e,t){return Ht(e.getUTCFullYear()%1e4,t,4)}function Fhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dp(e):Dp.ceil(e),Ht(e.getUTCFullYear()%1e4,t,4)}function Phe(){return"+0000"}function G3(){return"%"}function q3(e){return+e}function V3(e){return Math.floor(+e/1e3)}var _h,BP,PG,HP,NG;Nhe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nhe(e){return _h=RG(e),BP=_h.format,PG=_h.parse,HP=_h.utcFormat,NG=_h.utcParse,_h}function p0(e){const t={};return n=>t[n]||(t[n]=e(n))}function $he(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=Ihe(i,r);const a=o<i.length?i.slice(o):"";for(;--o>r;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+a}}function Ihe(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function $G(e){const t=p0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=od(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return $he(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,o,a){a=od(a??",f");const s=uc(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=rG(s,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=oG(s,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=iG(s))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let QT;IG();function IG(){return QT=$G({format:I2,formatPrefix:OP})}function OG(e){return $G(nG(e))}function Sb(e){return arguments.length?QT=OG(e):QT}function Y3(e,t,n){n=n||{},Oe(n)||le(`Invalid time multi-format specifier: ${n}`);const i=t(Jo),r=t(_o),o=t(xo),a=t(Zr),s=t(Qn),l=t(Zi),u=t(Yr),c=t(Ti),d=e(n[La]||".%L"),h=e(n[Jo]||":%S"),m=e(n[_o]||"%I:%M"),g=e(n[xo]||"%I %p"),y=e(n[Zr]||n[Wi]||"%a %d"),x=e(n[Qn]||"%b %d"),b=e(n[Zi]||"%B"),w=e(n[Yr]||"%B"),S=e(n[Ti]||"%Y");return k=>(i(k)<k?d:r(k)<k?h:o(k)<k?m:a(k)<k?g:l(k)<k?s(k)<k?y:x:c(k)<k?u(k)<k?b:w:S)(k)}function DG(e){const t=p0(e.format),n=p0(e.utcFormat);return{timeFormat:i=>Ie(i)?t(i):Y3(t,Tm,i),utcFormat:i=>Ie(i)?n(i):Y3(n,Am,i),timeParse:p0(e.parse),utcParse:p0(e.utcParse)}}let eA;LG();function LG(){return eA=DG({format:BP,parse:PG,utcFormat:HP,utcParse:NG})}function jG(e){return DG(RG(e))}function Ny(e){return arguments.length?eA=jG(e):eA}const tA=(e,t)=>_t({},e,t);function zG(e,t){const n=e?OG(e):Sb(),i=t?jG(t):Ny();return tA(n,i)}function UP(e,t){const n=arguments.length;return n&&n!==2&&le("defaultLocale expects either zero or two arguments."),n?tA(Sb(e),Ny(t)):tA(Sb(),Ny())}function Ohe(){return IG(),LG(),UP()}const Dhe=/^(data:|([A-Za-z]+:)?\/\/)/,Lhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,jhe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Z3="file://";function zhe(e,t){return n=>({options:n||{},sanitize:Hhe,load:Bhe,fileAccess:!!t,file:Uhe(t),http:Ghe(e)})}async function Bhe(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function Hhe(e,t){t=_t({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,a;const s=Lhe.test(e.replace(jhe,""));(e==null||typeof e!="string"||!s)&&le("Sanitize failure, invalid URI: "+we(e));const l=Dhe.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(r=e.startsWith(Z3))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(Z3.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function Uhe(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):Whe}async function Whe(){le("No file system access.")}function Ghe(e){return e?async function(t,n){const i=_t({},this.options.http,n),r=n&&n.response,o=await e(t,i);return o.ok?bt(o[r])?o[r]():o.text():le(o.status+""+o.statusText)}:qhe}async function qhe(){le("No HTTP fetch method available.")}const Vhe=e=>e!=null&&e===e,Yhe=e=>e==="true"||e==="false"||e===!0||e===!1,Zhe=e=>!Number.isNaN(Date.parse(e)),BG=e=>!Number.isNaN(+e)&&!(e instanceof Date),Xhe=e=>BG(e)&&Number.isInteger(+e),nA={boolean:PP,integer:Gi,number:Gi,date:NP,string:$P,unknown:Qi},fx=[Yhe,Xhe,BG,Zhe],Khe=["boolean","integer","number","date"];function HG(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=fx.length,r=fx.map((o,a)=>a+1);for(let o=0,a=0,s,l;o<n;++o)for(l=t?e[o][t]:e[o],s=0;s<i;++s)if(r[s]&&Vhe(l)&&!fx[s](l)&&(r[s]=0,++a,a===fx.length))return"string";return Khe[r.reduce((o,a)=>o===0?a:o,0)-1]}function UG(e,t){return t.reduce((n,i)=>(n[i]=HG(e,i),n),{})}function X3(e){const t=function(n,i){const r={delimiter:e};return WP(n,i?_t(i,r):r)};return t.responseType="text",t}function WP(e,t){return t.header&&(e=t.header.map(we).join(t.delimiter)+`
`+e),Ffe(t.delimiter).parse(e+"")}WP.responseType="text";function Jhe(e){return typeof Buffer=="function"&&bt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function GP(e,t){const n=t&&t.property?Xo(t.property):Qi;return Oe(e)&&!Jhe(e)?Qhe(n(e),t):n(JSON.parse(e))}GP.responseType="json";function Qhe(e,t){return!de(e)&&IW(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const epe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function WG(e,t){let n,i,r,o;return e=GP(e,t),t&&t.feature?(n=Ife,r=t.feature):t&&t.mesh?(n=Dfe,r=t.mesh,o=epe[t.filter]):le("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):le("Invalid TopoJSON object: "+r),i&&i.features||[i]}WG.responseType="json";const f_={dsv:WP,csv:X3(","),tsv:X3("	"),json:GP,topojson:WG};function qP(e,t){return arguments.length>1?(f_[e]=t,this):tt(f_,e)?f_[e]:null}function GG(e){const t=qP(e);return t&&t.responseType||"text"}function qG(e,t,n,i){t=t||{};const r=qP(t.type||"json");return r||le("Unknown data format type: "+t.type),e=r(e,t),t.parse&&tpe(e,t.parse,n,i),tt(e,"columns")&&delete e.columns,e}function tpe(e,t,n,i){if(!e.length)return;const r=Ny();n=n||r.timeParse,i=i||r.utcParse;let o=e.columns||Object.keys(e[0]),a,s,l,u,c,d;t==="auto"&&(t=UG(e,o)),o=Object.keys(t);const h=o.map(m=>{const g=t[m];let y,x;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return y=g.split(/:(.+)?/,2),x=y[1],(x[0]==="'"&&x[x.length-1]==="'"||x[0]==='"'&&x[x.length-1]==='"')&&(x=x.slice(1,-1)),(y[0]==="utc"?i:n)(x);if(!nA[g])throw Error("Illegal format pattern: "+m+":"+g);return nA[g]});for(l=0,c=e.length,d=o.length;l<c;++l)for(a=e[l],u=0;u<d;++u)s=o[u],a[s]=h[u](a[s])}const B2=zhe(typeof fetch<"u"&&fetch,null);function H2(e){const t=e||Qi,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const a=n.indexOf(r);a>=0&&n.splice(a,1)}return n},n}async function d_(e,t){try{await t(e)}catch(n){e.error(n)}}const VG=Symbol("vega_id");let npe=1;function U2(e){return!!(e&&Qe(e))}function Qe(e){return e[VG]}function YG(e,t){return e[VG]=t,e}function qt(e){const t=e===Object(e)?e:{data:e};return Qe(t)?t:YG(t,npe++)}function VP(e){return W2(e,qt({}))}function W2(e,t){for(const n in e)t[n]=e[n];return t}function ZG(e,t){return YG(t,Qe(e))}function Id(e,t){return e?t?(n,i)=>e(n,i)||Qe(t(n))-Qe(t(i)):(n,i)=>e(n,i)||Qe(n)-Qe(i):null}function XG(e){return e&&e.constructor===Od}function Od(){const e=[],t=[],n=[],i=[],r=[];let o=null,a=!1;return{constructor:Od,insert(s){const l=$e(s),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(s){const l=bt(s)?i:t,u=$e(s),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(s,l,u){const c={field:l,value:er(u)};return bt(s)?(c.filter=s,r.push(c)):(c.tuple=s,n.push(c)),this},encode(s,l){return bt(s)?r.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,l){const u={},c={};let d,h,m,g,y,x;for(d=0,h=l.length;d<h;++d)u[Qe(l[d])]=1;for(d=0,h=t.length;d<h;++d)y=t[d],u[Qe(y)]=-1;for(d=0,h=i.length;d<h;++d)g=i[d],l.forEach(w=>{g(w)&&(u[Qe(w)]=-1)});for(d=0,h=e.length;d<h;++d)y=e[d],x=Qe(y),u[x]?u[x]=1:s.add.push(qt(e[d]));for(d=0,h=l.length;d<h;++d)y=l[d],u[Qe(y)]<0&&s.rem.push(y);function b(w,S,k){k?w[S]=k(w):s.encode=S,a||(c[Qe(w)]=w)}for(d=0,h=n.length;d<h;++d)m=n[d],y=m.tuple,g=m.field,x=u[Qe(y)],x>0&&(b(y,g,m.value),s.modifies(g));for(d=0,h=r.length;d<h;++d)m=r[d],g=m.filter,l.forEach(w=>{g(w)&&u[Qe(w)]>0&&b(w,m.field,m.value)}),s.modifies(m.field);if(a)s.mod=t.length||i.length?l.filter(w=>u[Qe(w)]>0):l.slice();else for(x in c)s.mod.push(c[x]);return(o||o==null&&(t.length||i.length))&&s.clean(!0),s}}}const h_="_:mod:_";function G2(){Object.defineProperty(this,h_,{writable:!0,value:{}})}G2.prototype={set(e,t,n,i){const r=this,o=r[e],a=r[h_];return t!=null&&t>=0?(o[t]!==n||i)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||i)&&(r[e]=n,a[e]=de(n)?1+n.length:-1),r},modified(e,t){const n=this[h_];if(arguments.length){if(de(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[h_]={},this}};let ipe=0;const rpe="pulse",ope=new G2,ape=1,spe=2;function sn(e,t,n,i){this.id=++ipe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function K3(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}sn.prototype={targets(){return this._targets||(this._targets=H2(xv))},set(e){return this.value!==e?(this.value=e,1):0},skip:K3(ape),modified:K3(spe),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new G2,r=this._argops=this._argops||[],o=[];let a,s,l,u;const c=(d,h,m)=>{m instanceof sn?(m!==this&&(t&&m.targets().add(this),o.push(m)),r.push({op:m,name:d,index:h})):i.set(d,h,m)};for(a in e)if(s=e[a],a===rpe)$e(s).forEach(d=>{d instanceof sn?d!==this&&(d.targets().add(this),o.push(d)):le("Pulse parameters must be operator instances.")}),this.source=s;else if(de(s))for(i.set(a,-1,Array(l=s.length)),u=0;u<l;++u)c(a,u,s[u]);else c(a,-1,s);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||ope,n=this._argops;let i,r,o,a;if(n){const s=n.length;for(r=0;r<s;++r)i=n[r],o=i.op,a=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,a);if(n.initonly){for(r=0;r<s;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function lpe(e,t,n,i){let r=1,o;return e instanceof sn?o=e:e&&e.prototype instanceof sn?o=new e:bt(e)?o=new sn(null,e):(r=0,o=new sn(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o}function upe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let cpe=0;function q2(e,t,n){this.id=++cpe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function pu(e,t,n){return new q2(e,t,n)}q2.prototype={_filter:Ko,_apply:Qi,targets(){return this._targets||(this._targets=H2(xv))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=pu(e);return this.targets().add(t),t},apply(e){const t=pu(null,e);return this.targets().add(t),t},merge(){const e=pu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=pu();return this.targets().add(pu(null,null,MP(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(pu(null,null,()=>n=!0)),t.targets().add(pu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ko,this._targets=null}};function fpe(e,t,n,i){const r=this,o=pu(n,i),a=function(u){u.dataflow=r;try{o.receive(u)}catch(c){r.error(c)}finally{r.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=$e(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,a);return o}function dpe(e,t){const n=this.locale();return qG(e,t,n.timeParse,n.utcParse)}function hpe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function ppe(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:GG(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}}async function mpe(e,t,n){const i=this,r=i._pending||gpe(i);r.requests+=1;const o=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ko).insert(o.data||[])),r.done(),o}function gpe(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const ype={skip:!0};function vpe(e,t,n,i,r){return(e instanceof sn?_pe:xpe)(this,e,t,n,i,r),this}function xpe(e,t,n,i,r,o){const a=_t({},o,ype);let s,l;bt(n)||(n=er(n)),i===void 0?s=u=>e.touch(n(u)):bt(i)?(l=new sn(null,i,r,!1),s=u=>{l.evaluate(u);const c=n(u),d=l.value;XG(d)?e.pulse(c,d,o):e.update(c,d,a)}):s=u=>e.update(n(u),i,a),t.apply(s)}function _pe(e,t,n,i,r,o){if(i===void 0)t.targets().add(n);else{const a=o||{},s=new sn(null,bpe(n,i),r,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function bpe(e,t){return t=bt(t)?t:er(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function wpe(e){e.rank=++this._rank}function Spe(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&le("Cycle detected in dataflow graph.")}const Cb={},ls=1,bu=2,ol=4,Cpe=ls|bu,J3=ls|ol,bh=ls|bu|ol,Q3=8,Ng=16,e4=32,t4=64;function ec(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function rk(e,t){const n=[];return _u(e,t,i=>n.push(i)),n}function n4(e,t){const n={};return e.visit(t,i=>{n[Qe(i)]=1}),i=>n[Qe(i)]?null:i}function dx(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}ec.prototype={StopPropagation:Cb,ADD:ls,REM:bu,MOD:ol,ADD_REM:Cpe,ADD_MOD:J3,ALL:bh,REFLOW:Q3,SOURCE:Ng,NO_SOURCE:e4,NO_FIELDS:t4,fork(e){return new ec(this.dataflow).init(this,e)},clone(){const e=this.fork(bh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(bh|Ng)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ec(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&t4)&&(n.fields=e.fields),t&ls?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&bu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ol?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&e4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||bh;return t&ls&&this.add.length||t&bu&&this.rem.length||t&ol&&this.mod.length},reflow(e){if(e)return this.fork(bh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ol,n4(this,ls))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return de(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?de(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ls&&(n.addF=dx(n.addF,t)),e&bu&&(n.remF=dx(n.remF,t)),e&ol&&(n.modF=dx(n.modF,t)),e&Ng&&(n.srcF=dx(n.srcF,t)),n},materialize(e){e=e||bh;const t=this;return e&ls&&t.addF&&(t.add=rk(t.add,t.addF),t.addF=null),e&bu&&t.remF&&(t.rem=rk(t.rem,t.remF),t.remF=null),e&ol&&t.modF&&(t.mod=rk(t.mod,t.modF),t.modF=null),e&Ng&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Ng)return _u(n.source,n.srcF,i),n;e&ls&&_u(n.add,n.addF,i),e&bu&&_u(n.rem,n.remF,i),e&ol&&_u(n.mod,n.modF,i);const r=n.source;if(e&Q3&&r){const o=n.add.length+n.mod.length;o===r.length||(o?_u(r,n4(n,J3),i):_u(r,n.srcF,i))}return n}};function YP(e,t,n,i){const r=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const s=r.fields||(r.fields={});for(const l in a.fields)s[l]=1}a.changed(r.ADD)&&(o|=r.ADD),a.changed(r.REM)&&(o|=r.REM),a.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}be(YP,ec,{fork(e){const t=new ec(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?de(e)?e.some(i=>n[i]):n[e]:0},filter(){le("MultiPulse does not support filtering.")},materialize(){le("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});async function Epe(e,t,n){const i=this,r=[];if(i._pulse)return KG(i);if(i._pending&&await i._pending,t&&await d_(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new ec(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=H2(xv);let a=0,s,l,u;try{for(;i._heap.size()>0;){if(s=i._heap.pop(),s.rank!==s.qrank){i._enqueue(s,!0);continue}l=s.run(i._getPulse(s,e)),l.then?l=await l:l.async&&(r.push(l.async),l=Cb),l!==Cb&&s._targets&&s._targets.forEach(c=>i._enqueue(c)),++a}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${a} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,h)=>h.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)await d_(i,c[d].callback)}return n&&await d_(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(h){i.error(h)}})})),i}async function kpe(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Rpe(e,t,n){return this._pulse?KG(this):(this.evaluate(e,t,n),this)}function Tpe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function KG(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Ape(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Mpe(e,t){const n=e.source,i=this._clock;return n&&de(n)?new YP(this,i,n.map(r=>r.pulse),t):this._input[e.id]||Fpe(this._pulse,n&&n.pulse)}function Fpe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Cb&&(e.source=t.source),e)}const ZP={skip:!1,force:!1};function Ppe(e,t){const n=t||ZP;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Npe(e,t,n){const i=n||ZP;return(e.set(t)||i.force)&&this.touch(e,i),this}function $pe(e,t,n){this.touch(e,n||ZP);const i=new ec(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function Ipe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),JG(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,Ope(t,0,e)):i=n,i}}}function JG(e,t,n,i){let r,o;const a=e[n];for(;n>t;){if(o=n-1>>1,r=e[o],i(a,r)<0){e[n]=r,n=o;continue}break}return e[n]=a}function Ope(e,t,n){const i=t,r=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<r;)s=a+1,s<r&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,JG(e,i,t,n)}function dp(){this.logger(EP()),this.logLevel(SP),this._clock=0,this._rank=0,this._locale=UP();try{this._loader=B2()}catch{}this._touched=H2(xv),this._input={},this._pulse=null,this._heap=Ipe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function $g(e){return function(){return this._log[e].apply(this,arguments)}}dp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:$g("error"),warn:$g("warn"),info:$g("info"),debug:$g("debug"),logLevel:$g("level"),cleanThreshold:1e4,add:lpe,connect:upe,rank:wpe,rerank:Spe,pulse:$pe,touch:Ppe,update:Npe,changeset:Od,ingest:hpe,parse:dpe,preload:mpe,request:ppe,events:fpe,on:vpe,evaluate:Epe,run:Rpe,runAsync:kpe,runAfter:Tpe,_enqueue:Ape,_getPulse:Mpe};function ne(e,t){sn.call(this,e,null,t)}be(ne,sn,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const jp={};function QG(e){const t=eq(e);return t&&t.Definition||null}function eq(e){return e=e&&e.toLowerCase(),tt(jp,e)?jp[e]:null}function*tq(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function XP(e,t,n){const i=Float64Array.from(tq(e,n));return i.sort(El),t.map(r=>KW(i,r))}function KP(e,t){return XP(e,[.25,.5,.75],t)}function JP(e,t){const n=e.length,i=Gfe(e,t),r=KP(e,t),o=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function nq(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,l,u,c,d,h;const m=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(c=m/t,d=0,h=e.steps.length;d<h&&e.steps[d]<c;++d);s=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,s=Math.max(u,Math.pow(n,Math.round(Math.log(m)/i)-l));Math.ceil(m/s)>t;)s*=n;for(d=0,h=r.length;d<h;++d)c=s/r[d],c>=u&&m/c<=t&&(s=c)}c=Math.log(s);const g=c>=0?0:~~(-c/i)+1,y=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/s+y)*s,o=o<c?c-s:c,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Qo=Math.random;function Dpe(e){Qo=e}function iq(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(tq(e,i)),o=r.length,a=t;let s,l,u,c;for(u=0,c=Array(a);u<a;++u){for(s=0,l=0;l<o;++l)s+=r[~~(Qo()*o)];c[u]=s/o}return c.sort(El),[VT(c,n/2),VT(c,1-n/2)]}function rq(e,t,n,i){i=i||(h=>h);const r=e.length,o=new Float64Array(r);let a=0,s=1,l=i(e[0]),u=l,c=l+t,d;for(;s<r;++s){if(d=i(e[s]),d>=c){for(u=(l+u)/2;a<s;++a)o[a]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;a<s;++a)o[a]=u;return n?Lpe(o,t+t/4):o}function Lpe(e,t){const n=e.length;let i=0,r=1,o,a;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(a=r+(i+o-r-r>>1);a<r;)e[a++]=e[r];for(;a>r;)e[a--]=e[i]}i=r,r=o}return e}function jpe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function zpe(e,t){t==null&&(t=e,e=0);let n,i,r;const o={min(a){return arguments.length?(n=a||0,r=i-n,o):n},max(a){return arguments.length?(i=a||0,r=i-n,o):i},sample(){return n+Math.floor(r*Qo())},pdf(a){return a===Math.floor(a)&&a>=n&&a<i?1/r:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=i?1:(s-n+1)/r},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*r):NaN}};return o.min(e).max(t)}const oq=Math.sqrt(2*Math.PI),Bpe=Math.SQRT2;let Ig=NaN;function V2(e,t){e=e||0,t=t??1;let n=0,i=0,r,o;if(Ig===Ig)n=Ig,Ig=NaN;else{do n=Qo()*2-1,i=Qo()*2-1,r=n*n+i*i;while(r===0||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,Ig=i*o}return e+n*t}function QP(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*oq)}function Y2(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let o;if(r>37)o=0;else{const a=Math.exp(-r*r/2);let s;r<7.07106781186547?(s=.0352624965998911*r+.700383064443688,s=s*r+6.37396220353165,s=s*r+33.912866078383,s=s*r+112.079291497871,s=s*r+221.213596169931,s=s*r+220.206867912376,o=a*s,s=.0883883476483184*r+1.75566716318264,s=s*r+16.064177579207,s=s*r+86.7807322029461,s=s*r+296.564248779674,s=s*r+637.333633378831,s=s*r+793.826512519948,s=s*r+440.413735824752,o=o/s):(s=r+.65,s=r+4/s,s=r+3/s,s=r+2/s,s=r+1/s,o=a/s/2.506628274631)}return i>0?1-o:o}function Z2(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Bpe*Hpe(2*e-1)}function Hpe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function eN(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>V2(n,i),pdf:o=>QP(o,n,i),cdf:o=>Y2(o,n,i),icdf:o=>Z2(o,n,i)};return r.mean(e).stdev(t)}function tN(e,t){const n=eN();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=JP(e)),r):t},sample(){return e[~~(Qo()*i)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<i;++s)a+=n.pdf((o-e[s])/t);return a/t/i},cdf(o){let a=0,s=0;for(;s<i;++s)a+=n.cdf((o-e[s])/t);return a/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function nN(e,t){return e=e||0,t=t??1,Math.exp(e+V2()*t)}function iN(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*oq*e)}function rN(e,t,n){return Y2(Math.log(e),t,n)}function oN(e,t,n){return Math.exp(Z2(e,t,n))}function aq(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>nN(n,i),pdf:o=>iN(o,n,i),cdf:o=>rN(o,n,i),icdf:o=>oN(o,n,i)};return r.mean(e).stdev(t)}function sq(e,t){let n=0,i;function r(a){const s=[];let l=0,u;for(u=0;u<n;++u)l+=s[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)s[u]/=l;return s}const o={weights(a){return arguments.length?(i=r(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=Qo();let s=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(a<l){s=e[u];break}return s.sample()},pdf(a){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].pdf(a);return s},cdf(a){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function aN(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Qo()}function sN(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function lN(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function uN(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function lq(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=o??1,r):i},sample:()=>aN(n,i),pdf:o=>sN(o,n,i),cdf:o=>lN(o,n,i),icdf:o=>uN(o,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function cN(e,t,n){let i=0,r=0;for(const o of e){const a=n(o);t(o)==null||a==null||isNaN(a)||(i+=(a-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function bv(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function X2(e,t,n,i){e=e.filter(m=>{let g=t(m),y=n(m);return g!=null&&(g=+g)>=g&&y!=null&&(y=+y)>=y}),i&&e.sort((m,g)=>t(m)-t(g));const r=e.length,o=new Float64Array(r),a=new Float64Array(r);let s=0,l=0,u=0,c,d,h;for(h of e)o[s]=c=+t(h),a[s]=d=+n(h),++s,l+=(c-l)/s,u+=(d-u)/s;for(s=0;s<r;++s)o[s]-=l,a[s]-=u;return[o,a,l,u]}function wv(e,t,n,i){let r=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&i(o,a,++r)}function Mm(e,t,n,i,r){let o=0,a=0;return wv(e,t,n,(s,l)=>{const u=l-r(s),c=l-i;o+=u*u,a+=c*c}),1-o/a}function fN(e,t,n){let i=0,r=0,o=0,a=0,s=0;wv(e,t,n,(c,d)=>{++s,i+=(c-i)/s,r+=(d-r)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=bv(i,r,o,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Mm(e,t,n,r,u)}}function uq(e,t,n){let i=0,r=0,o=0,a=0,s=0;wv(e,t,n,(c,d)=>{++s,c=Math.log(c),i+=(c-i)/s,r+=(d-r)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=bv(i,r,o,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Mm(e,t,n,r,u)}}function cq(e,t,n){const[i,r,o,a]=X2(e,t,n);let s=0,l=0,u=0,c=0,d=0,h,m,g;wv(e,t,n,(w,S)=>{h=i[d++],m=Math.log(S),g=h*S,s+=(S*m-s)/d,l+=(g-l)/d,u+=(g*m-u)/d,c+=(h*g-c)/d});const[y,x]=bv(l/a,s/a,u/a,c/a),b=w=>Math.exp(y+x*(w-o));return{coef:[Math.exp(y-x*o),x],predict:b,rSquared:Mm(e,t,n,a,b)}}function fq(e,t,n){let i=0,r=0,o=0,a=0,s=0,l=0;wv(e,t,n,(d,h)=>{const m=Math.log(d),g=Math.log(h);++l,i+=(m-i)/l,r+=(g-r)/l,o+=(m*g-o)/l,a+=(m*m-a)/l,s+=(h-s)/l});const u=bv(i,r,o,a),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Mm(e,t,n,s,c)}}function dN(e,t,n){const[i,r,o,a]=X2(e,t,n),s=i.length;let l=0,u=0,c=0,d=0,h=0,m,g,y,x;for(m=0;m<s;)g=i[m],y=r[m++],x=g*g,l+=(x-l)/m,u+=(x*g-u)/m,c+=(x*x-c)/m,d+=(g*y-d)/m,h+=(x*y-h)/m;const b=c-l*l,w=l*b-u*u,S=(h*l-d*u)/w,k=(d*b-h*u)/w,R=-S*l,M=T=>(T=T-o,S*T*T+k*T+R+a);return{coef:[R-k*o+S*o*o+a,k-2*S*o,S],predict:M,rSquared:Mm(e,t,n,a,M)}}function dq(e,t,n,i){if(i===0)return cN(e,t,n);if(i===1)return fN(e,t,n);if(i===2)return dN(e,t,n);const[r,o,a,s]=X2(e,t,n),l=r.length,u=[],c=[],d=i+1;let h,m,g,y,x;for(h=0;h<d;++h){for(g=0,y=0;g<l;++g)y+=Math.pow(r[g],h)*o[g];for(u.push(y),x=new Float64Array(d),m=0;m<d;++m){for(g=0,y=0;g<l;++g)y+=Math.pow(r[g],h+m);x[m]=y}c.push(x)}c.push(u);const b=Wpe(c),w=S=>{S-=a;let k=s+b[0]+b[1]*S+b[2]*S*S;for(h=3;h<d;++h)k+=b[h]*Math.pow(S,h);return k};return{coef:Upe(d,b,-a,s),predict:w,rSquared:Mm(e,t,n,s,w)}}function Upe(e,t,n,i){const r=Array(e);let o,a,s,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],l=1,r[o]+=s,a=1;a<=o;++a)l*=(o+1-a)/a,r[o-a]+=s*Math.pow(n,a)*l;return r[0]+=i,r}function Wpe(e){const t=e.length-1,n=[];let i,r,o,a,s;for(i=0;i<t;++i){for(a=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][a])&&(a=r);for(o=i;o<t+1;++o)s=e[o][i],e[o][i]=e[o][a],e[o][a]=s;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(s=0,o=r+1;o<t;++o)s+=e[o][r]*n[o];n[r]=(e[t][r]-s)/e[r][r]}return n}const i4=2,r4=1e-12;function hq(e,t,n,i){const[r,o,a,s]=X2(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),h=new Float64Array(l).fill(1);for(let m=-1;++m<=i4;){const g=[0,u-1];for(let x=0;x<l;++x){const b=r[x],w=g[0],S=g[1],k=b-r[w]>r[S]-b?w:S;let R=0,M=0,T=0,N=0,z=0;const H=1/Math.abs(r[k]-b||1);for(let B=w;B<=S;++B){const O=r[B],j=o[B],q=Gpe(Math.abs(b-O)*H)*h[B],K=O*q;R+=q,M+=K,T+=j*q,N+=j*K,z+=O*K}const[U,X]=bv(M/R,T/R,N/R,z/R);c[x]=U+X*b,d[x]=Math.abs(o[x]-c[x]),qpe(r,x+1,g)}if(m===i4)break;const y=JW(d);if(Math.abs(y)<r4)break;for(let x=0,b,w;x<l;++x)b=d[x]/(6*y),h[x]=b>=1?r4:(w=1-b*b)*w}return Vpe(r,c,a,s)}function Gpe(e){return(e=1-e*e*e)*e*e}function qpe(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}function Vpe(e,t,n,i){const r=e.length,o=[];let a=0,s=0,l=[],u;for(;a<r;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++s:(s=0,l[1]+=i,l=[u,t[a]],o.push(l));return l[1]+=i,o}const Ype=.5*Math.PI/180;function K2(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=y=>[y,e(y)],o=t[0],a=t[1],s=a-o,l=s/i,u=[r(o)],c=[];if(n===i){for(let y=1;y<i;++y)u.push(r(o+y/n*s));return u.push(r(a)),u}else{c.push(r(a));for(let y=n;--y>0;)c.push(r(o+y/n*s))}let d=u[0],h=c[c.length-1];const m=1/s,g=Zpe(d[1],c);for(;h;){const y=r((d[0]+h[0])/2);y[0]-d[0]>=l&&Xpe(d,y,h,m,g)>Ype?c.push(y):(d=h,u.push(h),c.pop()),h=c[c.length-1]}return u}function Zpe(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const a=t[o][1];a<n&&(n=a),a>i&&(i=a)}return 1/(i-n)}function Xpe(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),a=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-a)}function Kpe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function iA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Kpe(e)}function pq(e,t,n){return n||e+(t?"_"+t:"")}const ok=()=>{},Jpe={init:ok,add:ok,rem:ok,idx:0},$y={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Sv=Object.keys($y).filter(e=>e!=="__count__");function Qpe(e,t){return(n,i)=>_t({name:e,aggregate_param:i,out:n||e},Jpe,t)}[...Sv,"__count__"].forEach(e=>{$y[e]=Qpe(e,$y[e])});function mq(e,t,n){return $y[e](n,t)}function gq(e,t){return e.idx-t.idx}function eme(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=$y[r]())})};return e.forEach(n),Object.values(t).sort(gq)}function tme(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function nme(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ime(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function rme(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function yq(e,t){const n=t||Qi,i=eme(e),r=e.slice().sort(gq);function o(a){this._ops=i,this._out=r,this.cell=a,this.init()}return o.prototype.init=tme,o.prototype.add=nme,o.prototype.rem=ime,o.prototype.set=rme,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function hN(e){this._key=e?Xo(e):Qe,this.reset()}const Pi=hN.prototype;Pi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Pi.add=function(e){this._add.push(e)};Pi.rem=function(e){this._rem.push(e)};Pi.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),a={};let s,l,u;for(s=0;s<r;++s)a[n(t[s])]=1;for(s=0,l=0;s<i;++s)a[n(u=e[s])]?a[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Pi.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,o;for(;--i>=0;)o=e(t[i])+"",tt(n,o)||(n[o]=1,++r);return r};Pi.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=NW(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Pi.argmin=function(e){return this.extent(e)[0]||{}};Pi.argmax=function(e){return this.extent(e)[1]||{}};Pi.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Pi.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Pi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=KP(this.values(),e),this._get=e),this._q};Pi.q1=function(e){return this.quartile(e)[0]};Pi.q2=function(e){return this.quartile(e)[1]};Pi.q3=function(e){return this.quartile(e)[2]};Pi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=iq(this.values(),1e3,.05,e),this._get=e),this._ci};Pi.ci0=function(e){return this.ci(e)[0]};Pi.ci1=function(e){return this.ci(e)[1]};function cc(e){ne.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}cc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Sv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};be(cc,ne,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(s){let l,u,c,d;for(l in s)for(c=s[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}o(e._prev),o(t);function a(s,l,u){const c=n[u],d=i[u++];for(const h in d){const m=s?s+"|"+h:h;l[c]=d[h],u<r?a(m,l,u):t[m]||e.cell(m,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const S=$e(Yi(w)),k=S.length;let R=0,M;for(;R<k;++R)i[M=S[R]]||(i[M]=1,t.push(M))}this._dims=$e(e.groupby),this._dnames=this._dims.map(w=>{const S=In(w);return r(w),n.push(S),S}),this.cellkey=e.key?e.key:iA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let d,h,m,g,y,x,b;for(u!==a.length&&le("Unmatched number of fields and aggregate ops."),b=0;b<u;++b){if(d=o[b],h=a[b],m=s[b]||null,d==null&&h!=="count"&&le("Null aggregate field specified."),y=In(d),x=pq(h,y,l[b]),n.push(x),h==="count"){this._counts.push(x);continue}g=c[y],g||(r(d),g=c[y]=[],g.field=d,this._measures.push(g)),h!=="count"&&(this._countOnly=!1),g.push(mq(h,m,x))}return this._measures=this._measures.map(w=>yq(w,w.field)),Object.create(null)},cellkey:iA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new hN),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let a=0;a<r;++a)o[n[a]]=i[a](e);return t?ZG(t.tuple,o):qt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,a=e.rem,s=e.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&a.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&r?a:s).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const ome=1e-14;function pN(e){ne.call(this,null,e)}pN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};be(pN,ne,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,o=i.step,a=e.as||["bin0","bin1"],s=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Yi(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=i(c);c[s]=d,c[l]=d==null?null:r+o*(1+(d-r)/o)}:c=>c[s]=i(c)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=nq(e),i=n.step;let r=n.start,o=r+Math.ceil((n.stop-r)/i)*i,a,s;(a=e.anchor)!=null&&(s=a-(r+i*Math.floor((a-r)/i)),r+=s,o+=s);const l=function(u){let c=Gi(t(u));return c==null?null:c<r?-1/0:c>o?1/0:(c=Math.max(r,Math.min(c,o-i)),r+i*Math.floor(ome+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=eo(l,Yi(t),e.name||"bin_"+In(t))}});function vq(e,t,n){const i=e;let r=t||[],o=n||[],a={},s=0;return{add:l=>o.push(l),remove:l=>a[i(l)]=++s,size:()=>r.length,data:(l,u)=>(s&&(r=r.filter(c=>!a[i(c)]),a={},s=0),u&&l&&r.sort(l),o.length&&(r=l?jW(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function mN(e){ne.call(this,[],e)}mN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};be(mN,ne,{transform(e,t){const n=t.fork(t.ALL),i=vq(Qe,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Id(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function xq(e){sn.call(this,null,ame,e)}be(xq,sn);function ame(e){return this.value&&!e.modified()?this.value:AP(e.fields,e.orders)}function gN(e){ne.call(this,null,e)}gN.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function sme(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}be(gN,ne,{transform(e,t){const n=d=>h=>{for(var m=sme(s(h),e.case,o)||[],g,y=0,x=m.length;y<x;++y)a.test(g=m[y])||d(g)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=i[s],u=n[s]||0,!l&&u?(i[s]=l=qt({}),l[r]=s,l[o]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[s]=null,i[s]=null):l[o]!==u&&(l[o]=u,a.mod.push(l));return a.modifies(t)}});function yN(e){ne.call(this,null,e)}yN.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};be(yN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=lme(s,r,o,e.filter||Ko)):n.mod=s,n.source=this.value,n.modifies(i)}});function lme(e,t,n,i){for(var r=[],o={},a=e.length,s=0,l,u;s<a;++s)for(o[t]=u=e[s],l=0;l<a;++l)o[n]=e[l],i(o)&&(r.push(qt(o)),o={},o[t]=u);return r}const o4={kde:tN,mixture:sq,normal:eN,lognormal:aq,uniform:lq},ume="distributions",a4="function",cme="field";function _q(e,t){const n=e[a4];tt(o4,n)||le("Unknown distribution function: "+n);const i=o4[n]();for(const r in e)r===cme?i.data((e.from||t()).map(e[r])):r===ume?i[r](e[r].map(o=>_q(o,t))):typeof i[r]===a4&&i[r](e[r]);return i}function vN(e){ne.call(this,null,e)}const bq=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],fme={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:bq},{name:"weights",type:"number",array:!0}]};vN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:bq.concat(fme)},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(vN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=_q(e.distribution,dme(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&le("Invalid density method: "+a),!e.extent&&!i.data&&le("Missing density extent parameter."),a=i[a];const s=e.as||["value","density"],l=e.extent||ks(i.data()),u=K2(a,l,r,o).map(c=>{const d={};return d[s[0]]=c[0],d[s[1]]=c[1],qt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function dme(e){return()=>e.materialize(e.SOURCE).source}function wq(e,t){return e?e.map((n,i)=>t[i]||In(n)):null}function xN(e,t,n){const i=[],r=d=>d(l);let o,a,s,l,u,c;if(t==null)i.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)l=e[a],u=t.map(r),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}const Sq="bin";function _N(e){ne.call(this,null,e)}_N.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Sq}]};const hme=(e,t)=>_v(ks(e,t))/30;be(_N,ne,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=xN(t.source,e.groupby,Qi),r=e.smooth||!1,o=e.field,a=e.step||hme(n,o),s=Id((g,y)=>o(g)-o(y)),l=e.as||Sq,u=i.length;let c=1/0,d=-1/0,h=0,m;for(;h<u;++h){const g=i[h].sort(s);m=-1;for(const y of rq(g,a,r,o))y<c&&(c=y),y>d&&(d=y),g[++m][l]=y}return this.value={start:c,stop:d,step:a},t.reflow(!0).modifies(l)}});function Cq(e){sn.call(this,null,pme,e),this.modified(!0)}be(Cq,sn);function pme(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:eo(n=>t(n,e),Yi(t),In(t))}function bN(e){ne.call(this,[void 0,void 0],e)}bN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};be(bN,ne,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],a=n[1];if((r||o==null)&&(o=1/0,a=-1/0),t.visit(r?t.SOURCE:t.ADD,s=>{const l=Gi(i(s));l!=null&&(l<o&&(o=l),l>a&&(a=l))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=In(i);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function wN(e,t){sn.call(this,e),this.parent=t,this.count=0}be(wN,sn,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function J2(e){ne.call(this,{},e),this._keys=Cm();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}be(J2,ne,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let o=tt(r,e)&&r[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=i||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new wN(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,a=e.modified("key"),s=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Qe(l),c=o.get(u);c!==void 0&&(o.delete(u),s(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);o.set(Qe(l),u),s(u).add(l)}),a||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=Qe(l),c=o.get(u),d=i(l);c===d?s(d).mod(l):(o.set(u,d),s(c).rem(l),s(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{s(o.get(Qe(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=Qe(l),c=o.get(u),d=i(l);c!==d&&(o.set(u,d),s(c).rem(l),s(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function Eq(e){sn.call(this,null,mme,e)}be(Eq,sn);function mme(e){return this.value&&!e.modified()?this.value:de(e.name)?$e(e.name).map(t=>Xo(t)):Xo(e.name,e.as)}function SN(e){ne.call(this,Cm(),e)}SN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};be(SN,ne,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,a=r.rem,s=r.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const h=Qe(d);i.has(h)?i.delete(h):a.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(Qe(d),1)});function c(d){const h=Qe(d),m=l(d,e),g=i.get(h);m&&g?(i.delete(h),o.push(d)):!m&&!g?(i.set(h,1),a.push(d)):u&&m&&!g&&s.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function CN(e){ne.call(this,[],e)}CN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};be(CN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=wq(i,e.as||[]),o=e.index||null,a=r.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const l=i.map(g=>g(s)),u=l.reduce((g,y)=>Math.max(g,y.length),0);let c=0,d,h,m;for(;c<u;++c){for(h=VP(s),d=0;d<a;++d)h[r[d]]=(m=l[d][c])==null?null:m;o&&(h[o]=c),n.add.push(h)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}});function EN(e){ne.call(this,[],e)}EN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};be(EN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(In),o=e.as||["key","value"],a=o[0],s=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=VP(u),d[a]=r[c],d[s]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}});function kN(e){ne.call(this,null,e)}kN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};be(kN,ne,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,a=>a[i]=n(a,e))}});function kq(e){ne.call(this,[],e)}be(kq,ne,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,o=e.size-r.length,a,s,l;if(o>0){for(a=[];--o>=0;)a.push(l=qt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,r=r.slice(-o);return n.source=this.value=r,n}});const hx={value:"value",median:JW,mean:Kfe,min:qT,max:Hf},gme=[];function RN(e){ne.call(this,[],e)}RN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function yme(e){var t=e.method||hx.value,n;if(hx[t]==null)le("Unrecognized imputation method: "+t);else return t===hx.value?(n=e.value!==void 0?e.value:0,()=>n):hx[t]}function vme(e){const t=e.field;return n=>n?t(n):NaN}be(RN,ne,{transform(e,t){var n=t.fork(t.ALL),i=yme(e),r=vme(e),o=In(e.field),a=In(e.key),s=(e.groupby||[]).map(In),l=xme(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,h,m,g,y,x,b,w,S,k,R;for(x=0,S=l.length;x<S;++x)for(h=l[x],g=h.values,m=NaN,w=0;w<d;++w)if(h[w]==null){for(y=l.domain[w],R={_impute:!0},b=0,k=g.length;b<k;++b)R[s[b]]=g[b];R[a]=y,R[o]=Number.isNaN(m)?m=i(h,r):m,u.push(qt(R))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function xme(e,t,n,i){var r=b=>b(x),o=[],a=i?i.slice():[],s={},l={},u,c,d,h,m,g,y,x;for(a.forEach((b,w)=>s[b]=w+1),h=0,y=e.length;h<y;++h)x=e[h],g=n(x),m=s[g]||(s[g]=a.push(g)),c=(u=t?t.map(r):gme)+"",(d=l[c])||(d=l[c]=[],o.push(d),d.values=u),d[m-1]=x;return o.domain=a,o}function TN(e){cc.call(this,e)}TN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Sv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};be(TN,cc,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{_t(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function AN(e){ne.call(this,null,e)}AN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(AN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=xN(i,e.groupby,e.field),o=(e.groupby||[]).map(In),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&le("Invalid density method: "+s),e.resolve==="shared"&&(c||(c=ks(i,e.field)),d=h=e.steps||h),r.forEach(m=>{const g=tN(m,a)[s],y=e.counts?m.length:1,x=c||ks(m);K2(g,x,d,h).forEach(b=>{const w={};for(let S=0;S<o.length;++S)w[o[S]]=m.dims[S];w[l[0]]=b[0],w[l[1]]=b[1]*y,u.push(qt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Rq(e){sn.call(this,null,_me,e)}be(Rq,sn);function _me(e){return this.value&&!e.modified()?this.value:FP(e.fields,e.flat)}function Tq(e){ne.call(this,[],e),this._pending=null}be(Tq,ne,{transform(e,t){const n=t.dataflow;return this._pending?ak(this,t,this._pending):bme(e)?t.StopPropagation:e.values?ak(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=$e(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>ak(this,t,$e(i.data)))}});function bme(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function ak(e,t,n){n.forEach(qt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function MN(e){ne.call(this,{},e)}MN.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};be(MN,ne,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let l=a?t.SOURCE:t.ADD,u=t,c=e.as,d,h,m;return r?(h=r.length,s>1&&!c&&le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==s*h&&le('The "as" parameter has too few output field names.'),c=c||r.map(In),d=function(g){for(var y=0,x=0,b,w;y<s;++y)if(w=i.get(n[y](g)),w==null)for(b=0;b<h;++b,++x)g[c[x]]=o;else for(b=0;b<h;++b,++x)g[c[x]]=r[b](w)}):(c||le("Missing output field names."),d=function(g){for(var y=0,x;y<s;++y)x=i.get(n[y](g)),g[c[y]]=x??o}),a?u=t.reflow(!0):(m=n.some(g=>t.modified(g.fields)),l|=m?t.MOD:0),t.visit(l,d),u.modifies(c)}});function Aq(e){sn.call(this,null,wme,e)}be(Aq,sn);function wme(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<i&&(i=a[0]),a[1]>r&&(r=a[1]);return[i,r]}function Mq(e){sn.call(this,null,Sme,e)}be(Mq,sn);function Sme(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function Fq(e){ne.call(this,null,e)}be(Fq,ne,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function FN(e){cc.call(this,e)}FN.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Sv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};be(FN,cc,{_transform:cc.prototype.transform,transform(e,t){return this._transform(Cme(e,t),t)}});function Cme(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",o=Yi(n).concat(Yi(i)),a=kme(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>r),fields:a.map(s=>Eme(s,n,i,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function Eme(e,t,n,i){return eo(r=>t(r)===e?n(r):NaN,i,e+"")}function kme(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const a=e(o);i[a]||(i[a]=1,r.push(a))}),r.sort($2),t?r.slice(0,t):r}function Pq(e){J2.call(this,e)}be(Pq,J2,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(Qe(o),n,t,o);return(e.modified("field")||i&&t.modified(Yi(i)))&&le("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const a=r(o);i(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=r(o);i(o).forEach(s=>a.add(qt(s)))}),t.visit(t.REM,o=>{const a=r(o);i(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function PN(e){ne.call(this,null,e)}PN.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};be(PN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=wq(e.fields,e.as||[]),o=i?(s,l)=>Rme(s,l,i,r):W2;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const l=Qe(s);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,s=>{const l=o(s,qt({}));a[Qe(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Qe(s)]))}),n}});function Rme(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}function Nq(e){ne.call(this,null,e)}be(Nq,ne,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function NN(e){ne.call(this,null,e)}NN.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Tme=1e-14;be(NN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,o=xN(r,e.groupby,e.field),a=(e.groupby||[]).map(In),s=[],l=e.step||.01,u=e.probs||fo(l/2,1-Tme,l),c=u.length;return o.forEach(d=>{const h=XP(d,u);for(let m=0;m<c;++m){const g={};for(let y=0;y<a.length;++y)g[a[y]]=d.dims[y];g[i[0]]=u[m],g[i[1]]=h[m],s.push(qt(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function $q(e){ne.call(this,null,e)}be($q,ne,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=Qe(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=VP(r);i[Qe(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[Qe(r)];for(const a in r)o[a]=r[a],n.modifies(a);n.mod.push(o)})),n}});function $N(e){ne.call(this,[],e),this.count=0}$N.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};be($N,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((c,d)=>(c[Qe(d)]=1,c),{});let a=this.value,s=this.count,l=0;function u(c){let d,h;a.length<r?a.push(c):(h=~~((s+1)*Qo()),h<a.length&&h>=l&&(d=a[h],o[Qe(d)]&&n.rem.push(d),a[h]=c)),++s}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Qe(c);o[d]&&(o[d]=-1,n.rem.push(c)),--s}),a=a.filter(c=>o[Qe(c)]!==-1)),(t.rem.length||i)&&a.length<r&&t.source&&(l=s=a.length,t.visit(t.SOURCE,c=>{o[Qe(c)]||u(c)}),l=-1),i&&a.length>r){const c=a.length-r;for(let d=0;d<c;++d)o[Qe(a[d])]=-1,n.rem.push(a[d]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Qe(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(c=>!o[Qe(c)])),this.count=s,this.value=n.source=a,n}});function IN(e){ne.call(this,null,e)}IN.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};be(IN,ne,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=fo(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,qt(o)}),n.add=t.add.concat(this.value),n}});function Iq(e){ne.call(this,null,e),this.modified(!0)}be(Iq,ne,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ON(e){ne.call(this,null,e)}const Oq=["unit0","unit1"];ON.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:LP,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Oq}]};be(ON,ne,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",o=this._floor(e,t),a=(r?Am:Tm)(o.unit).offset,s=e.as||Oq,l=s[0],u=s[1],c=o.step;let d=o.start||1/0,h=o.stop||-1/0,m=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Yi(n)))&&(t=t.reflow(!0),m=t.SOURCE,d=1/0,h=-1/0),t.visit(m,g=>{const y=n(g);let x,b;y==null?(g[l]=null,i&&(g[u]=null)):(g[l]=x=b=o(y),i&&(g[u]=b=a(x,c)),x<d&&(d=x),b>h&&(h=b))}),o.start=d,o.stop=h,t.modifies(i?s:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:kG({extent:e.extent||ks(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=jP(i),a=this.value||{},s=(n?yG:gG)(o,r);return s.unit=Ot(o),s.units=o,s.step=r,s.start=a.start,s.stop=a.stop,this.value=s}});function Dq(e){ne.call(this,Cm(),e)}be(Dq,ne,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=s=>r.set(i(s),s);let a=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>r.delete(i(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function Lq(e){ne.call(this,null,e)}be(Lq,ne,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Id(e.sort)):t.source).map(e.field))}});function Ame(e,t,n,i){const r=Iy[e](t,n);return{init:r.init||Tu,update:function(o,a){a[i]=r.next(o)}}}const Iy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Iy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||le("ntile num must be greater than zero.");const n=Iy.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||le("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=Mme(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function Mme(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Fme=Object.keys(Iy);function jq(e){const t=$e(e.ops),n=$e(e.fields),i=$e(e.params),r=$e(e.aggregate_params),o=$e(e.as),a=this.outputs=[],s=this.windows=[],l={},u={},c=[],d=[];let h=!0;function m(g){$e(Yi(g)).forEach(y=>l[y]=1)}m(e.sort),t.forEach((g,y)=>{const x=n[y],b=i[y],w=r[y]||null,S=In(x),k=pq(g,S,o[y]);if(m(x),a.push(k),tt(Iy,g))s.push(Ame(g,x,b,k));else{if(x==null&&g!=="count"&&le("Null aggregate field specified."),g==="count"){c.push(k);return}h=!1;let R=u[S];R||(R=u[S]=[],R.field=x,d.push(R)),R.push(mq(g,w,k))}}),(c.length||d.length)&&(this.cell=Pme(d,c,h)),this.inputs=Object.keys(l)}const zq=jq.prototype;zq.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};zq.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(r[a]);for(a=e.p1;a<e.i1;++a)n.add(r[a]);n.set(t)}for(a=0;a<o;++a)i[a].update(e,t)};function Pme(e,t,n){e=e.map(l=>yq(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),a=0;a<r;++a)o[a]=new e[a](i);if(i.store)var s=i.data=new hN;return i.add=function(l){if(i.num+=1,!n){s&&s.add(l);for(let u=0;u<r;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){s&&s.rem(l);for(let u=0;u<r;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(s&&s.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,s&&s.reset();for(let l=0;l<r;++l)o[l].init()},i}function DN(e){ne.call(this,{},e),this._mlen=0,this._mods=[]}DN.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Fme.concat(Sv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};be(DN,ne,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Id(e.sort),r=iA(e.groupby),o=s=>this.group(r(s));let a=this.state;(!a||n)&&(a=this.state=new jq(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)Nme(this._mods[s],a,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=vq(Qe),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Nme(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,a=i.frame||[null,0],s=e.data(n),l=s.length,u=o?Em(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:r||er(-1)};t.init();for(let d=0;d<l;++d)$me(c,a,d,l),o&&Ime(c,u),t.update(c,s[d])}function $me(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Ime(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,a=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<a&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}const Ome=Object.freeze(Object.defineProperty({__proto__:null,aggregate:cc,bin:pN,collect:mN,compare:xq,countpattern:gN,cross:yN,density:vN,dotbin:_N,expression:Cq,extent:bN,facet:J2,field:Eq,filter:SN,flatten:CN,fold:EN,formula:kN,generate:kq,impute:RN,joinaggregate:TN,kde:AN,key:Rq,load:Tq,lookup:MN,multiextent:Aq,multivalues:Mq,params:Fq,pivot:FN,prefacet:Pq,project:PN,proxy:Nq,quantile:NN,relay:$q,sample:$N,sequence:IN,sieve:Iq,subflow:wN,timeunit:ON,tupleindex:Dq,values:Lq,window:DN},Symbol.toStringTag,{value:"Module"}));function Xt(e){return function(){return e}}const s4=Math.abs,Li=Math.atan2,of=Math.cos,Dme=Math.max,sk=Math.min,is=Math.sin,Pf=Math.sqrt,zi=1e-12,zp=Math.PI,Eb=zp/2,Bq=2*zp;function Lme(e){return e>1?0:e<-1?zp:Math.acos(e)}function l4(e){return e>=1?Eb:e<=-1?-Eb:Math.asin(e)}const rA=Math.PI,oA=2*rA,_f=1e-6,jme=oA-_f;function Hq(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zme(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Hq;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let LN=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Hq:zme(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,a){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=i-t,u=r-n,c=a-t,d=s-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>_f)if(!(Math.abs(d*l-u*c)>_f)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let m=i-a,g=r-s,y=l*l+u*u,x=m*m+g*g,b=Math.sqrt(y),w=Math.sqrt(h),S=o*Math.tan((rA-Math.acos((y+h-x)/(2*b*w)))/2),k=S/w,R=S/b;Math.abs(k-1)>_f&&this._append`L${t+k*c},${n+k*d}`,this._append`A${o},${o},0,0,${+(d*m>c*g)},${this._x1=t+R*l},${this._y1=n+R*u}`}}arc(t,n,i,r,o,a){if(t=+t,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),l=i*Math.sin(r),u=t+s,c=n+l,d=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>_f||Math.abs(this._y1-c)>_f)&&this._append`L${u},${c}`,i&&(h<0&&(h=h%oA+oA),h>jme?this._append`A${i},${i},0,1,${d},${t-s},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:h>_f&&this._append`A${i},${i},0,${+(h>=rA)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Q2(){return new LN}Q2.prototype=LN.prototype;function eS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new LN(t)}function Bme(e){return e.innerRadius}function Hme(e){return e.outerRadius}function Ume(e){return e.startAngle}function Wme(e){return e.endAngle}function Gme(e){return e&&e.padAngle}function qme(e,t,n,i,r,o,a,s){var l=n-e,u=i-t,c=a-r,d=s-o,h=d*l-c*u;if(!(h*h<zi))return h=(c*(t-o)-d*(e-r))/h,[e+h*l,t+h*u]}function px(e,t,n,i,r,o,a){var s=e-n,l=t-i,u=(a?o:-o)/Pf(s*s+l*l),c=u*l,d=-u*s,h=e+c,m=t+d,g=n+c,y=i+d,x=(h+g)/2,b=(m+y)/2,w=g-h,S=y-m,k=w*w+S*S,R=r-o,M=h*y-g*m,T=(S<0?-1:1)*Pf(Dme(0,R*R*k-M*M)),N=(M*S-w*T)/k,z=(-M*w-S*T)/k,H=(M*S+w*T)/k,U=(-M*w+S*T)/k,X=N-x,B=z-b,O=H-x,j=U-b;return X*X+B*B>O*O+j*j&&(N=H,z=U),{cx:N,cy:z,x01:-c,y01:-d,x11:N*(r/R-1),y11:z*(r/R-1)}}function Vme(){var e=Bme,t=Hme,n=Xt(0),i=null,r=Ume,o=Wme,a=Gme,s=null,l=eS(u);function u(){var c,d,h=+e.apply(this,arguments),m=+t.apply(this,arguments),g=r.apply(this,arguments)-Eb,y=o.apply(this,arguments)-Eb,x=s4(y-g),b=y>g;if(s||(s=c=l()),m<h&&(d=m,m=h,h=d),!(m>zi))s.moveTo(0,0);else if(x>Bq-zi)s.moveTo(m*of(g),m*is(g)),s.arc(0,0,m,g,y,!b),h>zi&&(s.moveTo(h*of(y),h*is(y)),s.arc(0,0,h,y,g,b));else{var w=g,S=y,k=g,R=y,M=x,T=x,N=a.apply(this,arguments)/2,z=N>zi&&(i?+i.apply(this,arguments):Pf(h*h+m*m)),H=sk(s4(m-h)/2,+n.apply(this,arguments)),U=H,X=H,B,O;if(z>zi){var j=l4(z/h*is(N)),q=l4(z/m*is(N));(M-=j*2)>zi?(j*=b?1:-1,k+=j,R-=j):(M=0,k=R=(g+y)/2),(T-=q*2)>zi?(q*=b?1:-1,w+=q,S-=q):(T=0,w=S=(g+y)/2)}var K=m*of(w),W=m*is(w),J=h*of(R),Q=h*is(R);if(H>zi){var ae=m*of(S),ge=m*is(S),ke=h*of(k),pe=h*is(k),Se;if(x<zp)if(Se=qme(K,W,ke,pe,ae,ge,J,Q)){var Fe=K-Se[0],Nt=W-Se[1],Et=ae-Se[0],Te=ge-Se[1],Ye=1/is(Lme((Fe*Et+Nt*Te)/(Pf(Fe*Fe+Nt*Nt)*Pf(Et*Et+Te*Te)))/2),Be=Pf(Se[0]*Se[0]+Se[1]*Se[1]);U=sk(H,(h-Be)/(Ye-1)),X=sk(H,(m-Be)/(Ye+1))}else U=X=0}T>zi?X>zi?(B=px(ke,pe,K,W,m,X,b),O=px(ae,ge,J,Q,m,X,b),s.moveTo(B.cx+B.x01,B.cy+B.y01),X<H?s.arc(B.cx,B.cy,X,Li(B.y01,B.x01),Li(O.y01,O.x01),!b):(s.arc(B.cx,B.cy,X,Li(B.y01,B.x01),Li(B.y11,B.x11),!b),s.arc(0,0,m,Li(B.cy+B.y11,B.cx+B.x11),Li(O.cy+O.y11,O.cx+O.x11),!b),s.arc(O.cx,O.cy,X,Li(O.y11,O.x11),Li(O.y01,O.x01),!b))):(s.moveTo(K,W),s.arc(0,0,m,w,S,!b)):s.moveTo(K,W),!(h>zi)||!(M>zi)?s.lineTo(J,Q):U>zi?(B=px(J,Q,ae,ge,h,-U,b),O=px(K,W,ke,pe,h,-U,b),s.lineTo(B.cx+B.x01,B.cy+B.y01),U<H?s.arc(B.cx,B.cy,U,Li(B.y01,B.x01),Li(O.y01,O.x01),!b):(s.arc(B.cx,B.cy,U,Li(B.y01,B.x01),Li(B.y11,B.x11),!b),s.arc(0,0,h,Li(B.cy+B.y11,B.cx+B.x11),Li(O.cy+O.y11,O.cx+O.x11),b),s.arc(O.cx,O.cy,U,Li(O.y11,O.x11),Li(O.y01,O.x01),!b))):s.arc(0,0,h,R,k,b)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-zp/2;return[of(d)*c,is(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xt(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xt(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xt(+c),u):n},u.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Xt(+c),u):i},u.startAngle=function(c){return arguments.length?(r=typeof c=="function"?c:Xt(+c),u):r},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xt(+c),u):o},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Xt(+c),u):a},u.context=function(c){return arguments.length?(s=c??null,u):s},u}function Uq(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wq(e){this._context=e}Wq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jN(e){return new Wq(e)}function Gq(e){return e[0]}function qq(e){return e[1]}function Vq(e,t){var n=Xt(!0),i=null,r=jN,o=null,a=eS(s);e=typeof e=="function"?e:e===void 0?Gq:Xt(e),t=typeof t=="function"?t:t===void 0?qq:Xt(t);function s(l){var u,c=(l=Uq(l)).length,d,h=!1,m;for(i==null&&(o=r(m=a())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(d,u,l),+t(d,u,l));if(m)return o=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Xt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Xt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Xt(!!l),s):n},s.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),s):r},s.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),s):i},s}function Yq(e,t,n){var i=null,r=Xt(!0),o=null,a=jN,s=null,l=eS(u);e=typeof e=="function"?e:e===void 0?Gq:Xt(+e),t=typeof t=="function"?t:Xt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?qq:Xt(+n);function u(d){var h,m,g,y=(d=Uq(d)).length,x,b=!1,w,S=new Array(y),k=new Array(y);for(o==null&&(s=a(w=l())),h=0;h<=y;++h){if(!(h<y&&r(x=d[h],h,d))===b)if(b=!b)m=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=h-1;g>=m;--g)s.point(S[g],k[g]);s.lineEnd(),s.areaEnd()}b&&(S[h]=+e(x,h,d),k[h]=+t(x,h,d),s.point(i?+i(x,h,d):S[h],n?+n(x,h,d):k[h]))}if(w)return s=null,w+""||null}function c(){return Vq().defined(r).curve(a).context(o)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Xt(+d),i=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Xt(+d),u):e},u.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Xt(+d),u):i},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Xt(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Xt(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Xt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(i).y(t)},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Xt(!!d),u):r},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}const Yme={draw(e,t){const n=Pf(t/zp);e.moveTo(n,0),e.arc(0,0,n,0,Bq)}};function Zme(e,t){let n=null,i=eS(r);e=typeof e=="function"?e:Xt(e||Yme),t=typeof t=="function"?t:Xt(t===void 0?64:+t);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return r.type=function(o){return arguments.length?(e=typeof o=="function"?o:Xt(o),r):e},r.size=function(o){return arguments.length?(t=typeof o=="function"?o:Xt(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}function fc(){}function kb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function tS(e){this._context=e}tS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xme(e){return new tS(e)}function Zq(e){this._context=e}Zq.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:kb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kme(e){return new Zq(e)}function Xq(e){this._context=e}Xq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:kb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jme(e){return new Xq(e)}function Kq(e,t){this._basis=new tS(e),this._beta=t}Kq.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],o=e[n]-i,a=t[n]-r,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*o),this._beta*t[s]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Qme=function e(t){function n(i){return t===1?new tS(i):new Kq(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Rb(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function zN(e,t){this._context=e,this._k=(1-t)/6}zN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Rb(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Rb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ege=function e(t){function n(i){return new zN(i,t)}return n.tension=function(i){return e(+i)},n}(0);function BN(e,t){this._context=e,this._k=(1-t)/6}BN.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Rb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tge=function e(t){function n(i){return new BN(i,t)}return n.tension=function(i){return e(+i)},n}(0);function HN(e,t){this._context=e,this._k=(1-t)/6}HN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nge=function e(t){function n(i){return new HN(i,t)}return n.tension=function(i){return e(+i)},n}(0);function UN(e,t,n){var i=e._x1,r=e._y1,o=e._x2,a=e._y2;if(e._l01_a>zi){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>zi){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,o,a,e._x2,e._y2)}function Jq(e,t){this._context=e,this._alpha=t}Jq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:UN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ige=function e(t){function n(i){return t?new Jq(i,t):new zN(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Qq(e,t){this._context=e,this._alpha=t}Qq.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:UN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rge=function e(t){function n(i){return t?new Qq(i,t):new BN(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function eV(e,t){this._context=e,this._alpha=t}eV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:UN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oge=function e(t){function n(i){return t?new eV(i,t):new HN(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function tV(e){this._context=e}tV.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function age(e){return new tV(e)}function u4(e){return e<0?-1:1}function c4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(u4(o)+u4(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function f4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function lk(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function Tb(e){this._context=e}Tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lk(this,this._t0,f4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lk(this,f4(this,n=c4(this,e,t)),n);break;default:lk(this,this._t0,n=c4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function nV(e){this._context=new iV(e)}(nV.prototype=Object.create(Tb.prototype)).point=function(e,t){Tb.prototype.point.call(this,t,e)};function iV(e){this._context=e}iV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}};function sge(e){return new Tb(e)}function lge(e){return new nV(e)}function rV(e){this._context=e}rV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=d4(e),r=d4(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function d4(e){var t,n=e.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/o[t-1],o[t]-=i,a[t]-=i*a[t-1];for(r[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(a[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function uge(e){return new rV(e)}function nS(e,t){this._context=e,this._t=t}nS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function cge(e){return new nS(e,.5)}function fge(e){return new nS(e,0)}function dge(e){return new nS(e,1)}function tc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const hge=()=>typeof Image<"u"?Image:null;function Os(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $c(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aA=Symbol("implicit");function WN(){var e=new A3,t=[],n=[],i=aA;function r(o){let a=e.get(o);if(a===void 0){if(i!==aA)return i;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new A3;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return WN(t,n).unknown(i)},Os.apply(r,arguments),r}function Fm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cv(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ic(){}var ad=.7,Bp=1/ad,hp="\\s*([+-]?\\d+)\\s*",Oy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pge=/^#([0-9a-f]{3,8})$/,mge=new RegExp(`^rgb\\(${hp},${hp},${hp}\\)$`),gge=new RegExp(`^rgb\\(${_s},${_s},${_s}\\)$`),yge=new RegExp(`^rgba\\(${hp},${hp},${hp},${Oy}\\)$`),vge=new RegExp(`^rgba\\(${_s},${_s},${_s},${Oy}\\)$`),xge=new RegExp(`^hsl\\(${Oy},${_s},${_s}\\)$`),_ge=new RegExp(`^hsla\\(${Oy},${_s},${_s},${Oy}\\)$`),h4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fm(Ic,Dy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:p4,formatHex:p4,formatHex8:bge,formatHsl:wge,formatRgb:m4,toString:m4});function p4(){return this.rgb().formatHex()}function bge(){return this.rgb().formatHex8()}function wge(){return oV(this).formatHsl()}function m4(){return this.rgb().formatRgb()}function Dy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?g4(t):n===3?new fi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mge.exec(e))?new fi(t[1],t[2],t[3],1):(t=gge.exec(e))?new fi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yge.exec(e))?mx(t[1],t[2],t[3],t[4]):(t=vge.exec(e))?mx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xge.exec(e))?x4(t[1],t[2]/100,t[3]/100,1):(t=_ge.exec(e))?x4(t[1],t[2]/100,t[3]/100,t[4]):h4.hasOwnProperty(e)?g4(h4[e]):e==="transparent"?new fi(NaN,NaN,NaN,0):null}function g4(e){return new fi(e>>16&255,e>>8&255,e&255,1)}function mx(e,t,n,i){return i<=0&&(e=t=n=NaN),new fi(e,t,n,i)}function GN(e){return e instanceof Ic||(e=Dy(e)),e?(e=e.rgb(),new fi(e.r,e.g,e.b,e.opacity)):new fi}function dc(e,t,n,i){return arguments.length===1?GN(e):new fi(e,t,n,i??1)}function fi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Fm(fi,dc,Cv(Ic,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new fi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new fi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fi(Uf(this.r),Uf(this.g),Uf(this.b),Ab(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:y4,formatHex:y4,formatHex8:Sge,formatRgb:v4,toString:v4}));function y4(){return`#${Nf(this.r)}${Nf(this.g)}${Nf(this.b)}`}function Sge(){return`#${Nf(this.r)}${Nf(this.g)}${Nf(this.b)}${Nf((isNaN(this.opacity)?1:this.opacity)*255)}`}function v4(){const e=Ab(this.opacity);return`${e===1?"rgb(":"rgba("}${Uf(this.r)}, ${Uf(this.g)}, ${Uf(this.b)}${e===1?")":`, ${e})`}`}function Ab(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nf(e){return e=Uf(e),(e<16?"0":"")+e.toString(16)}function x4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ca(e,t,n,i)}function oV(e){if(e instanceof Ca)return new Ca(e.h,e.s,e.l,e.opacity);if(e instanceof Ic||(e=Dy(e)),!e)return new Ca;if(e instanceof Ca)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Ca(a,s,l,e.opacity)}function Mb(e,t,n,i){return arguments.length===1?oV(e):new Ca(e,t,n,i??1)}function Ca(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Fm(Ca,Mb,Cv(Ic,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new Ca(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Ca(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new fi(uk(e>=240?e-240:e+120,r,i),uk(e,r,i),uk(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Ca(_4(this.h),gx(this.s),gx(this.l),Ab(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ab(this.opacity);return`${e===1?"hsl(":"hsla("}${_4(this.h)}, ${gx(this.s)*100}%, ${gx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _4(e){return e=(e||0)%360,e<0?e+360:e}function gx(e){return Math.max(0,Math.min(1,e||0))}function uk(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const aV=Math.PI/180,sV=180/Math.PI,Fb=18,lV=.96422,uV=1,cV=.82521,fV=4/29,pp=6/29,dV=3*pp*pp,Cge=pp*pp*pp;function hV(e){if(e instanceof bs)return new bs(e.l,e.a,e.b,e.opacity);if(e instanceof _l)return pV(e);e instanceof fi||(e=GN(e));var t=hk(e.r),n=hk(e.g),i=hk(e.b),r=ck((.2225045*t+.7168786*n+.0606169*i)/uV),o,a;return t===n&&n===i?o=a=r:(o=ck((.4360747*t+.3850649*n+.1430804*i)/lV),a=ck((.0139322*t+.0971045*n+.7141733*i)/cV)),new bs(116*r-16,500*(o-r),200*(r-a),e.opacity)}function Pb(e,t,n,i){return arguments.length===1?hV(e):new bs(e,t,n,i??1)}function bs(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Fm(bs,Pb,Cv(Ic,{brighter(e){return new bs(this.l+Fb*(e??1),this.a,this.b,this.opacity)},darker(e){return new bs(this.l-Fb*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=lV*fk(t),e=uV*fk(e),n=cV*fk(n),new fi(dk(3.1338561*t-1.6168667*e-.4906146*n),dk(-.9787684*t+1.9161415*e+.033454*n),dk(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function ck(e){return e>Cge?Math.pow(e,1/3):e/dV+fV}function fk(e){return e>pp?e*e*e:dV*(e-fV)}function dk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function hk(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ege(e){if(e instanceof _l)return new _l(e.h,e.c,e.l,e.opacity);if(e instanceof bs||(e=hV(e)),e.a===0&&e.b===0)return new _l(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*sV;return new _l(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Nb(e,t,n,i){return arguments.length===1?Ege(e):new _l(e,t,n,i??1)}function _l(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function pV(e){if(isNaN(e.h))return new bs(e.l,0,0,e.opacity);var t=e.h*aV;return new bs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fm(_l,Nb,Cv(Ic,{brighter(e){return new _l(this.h,this.c,this.l+Fb*(e??1),this.opacity)},darker(e){return new _l(this.h,this.c,this.l-Fb*(e??1),this.opacity)},rgb(){return pV(this).rgb()}}));var mV=-.14861,qN=1.78277,VN=-.29227,iS=-.90649,Ly=1.97294,b4=Ly*iS,w4=Ly*qN,S4=qN*VN-iS*mV;function kge(e){if(e instanceof Wf)return new Wf(e.h,e.s,e.l,e.opacity);e instanceof fi||(e=GN(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(S4*i+b4*t-w4*n)/(S4+b4-w4),o=i-r,a=(Ly*(n-r)-VN*o)/iS,s=Math.sqrt(a*a+o*o)/(Ly*r*(1-r)),l=s?Math.atan2(a,o)*sV-120:NaN;return new Wf(l<0?l+360:l,s,r,e.opacity)}function sA(e,t,n,i){return arguments.length===1?kge(e):new Wf(e,t,n,i??1)}function Wf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Fm(Wf,sA,Cv(Ic,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new Wf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Wf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*aV,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new fi(255*(t+n*(mV*i+qN*r)),255*(t+n*(VN*i+iS*r)),255*(t+n*(Ly*i)),this.opacity)}}));function gV(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}function yV(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return gV((n-i/t)*t,a,r,o,s)}}function vV(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return gV((n-i/t)*t,r,o,a,s)}}const rS=e=>()=>e;function xV(e,t){return function(n){return e+n*t}}function Rge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function oS(e,t){var n=t-e;return n?xV(e,n>180||n<-180?n-360*Math.round(n/360):n):rS(isNaN(e)?t:e)}function Tge(e){return(e=+e)==1?di:function(t,n){return n-t?Rge(t,n,e):rS(isNaN(t)?n:t)}}function di(e,t){var n=t-e;return n?xV(e,n):rS(isNaN(e)?t:e)}const lA=function e(t){var n=Tge(t);function i(r,o){var a=n((r=dc(r)).r,(o=dc(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),u=di(r.opacity,o.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function _V(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=dc(t[a]),i[a]=s.r||0,r[a]=s.g||0,o[a]=s.b||0;return i=e(i),r=e(r),o=e(o),s.opacity=1,function(l){return s.r=i(l),s.g=r(l),s.b=o(l),s+""}}}var Age=_V(yV),Mge=_V(vV);function YN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function bV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Fge(e,t){return(bV(t)?YN:wV)(e,t)}function wV(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=Oc(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function SV(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function wa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function CV(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Oc(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var uA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pk=new RegExp(uA.source,"g");function Pge(e){return function(){return e}}function Nge(e){return function(t){return e(t)+""}}function EV(e,t){var n=uA.lastIndex=pk.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=uA.exec(e))&&(r=pk.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:wa(i,r)})),n=pk.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Nge(l[0].x):Pge(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function Oc(e,t){var n=typeof t,i;return t==null||n==="boolean"?rS(t):(n==="number"?wa:n==="string"?(i=Dy(t))?(t=i,lA):EV:t instanceof Dy?lA:t instanceof Date?SV:bV(t)?YN:Array.isArray(t)?wV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?CV:wa)(e,t)}function $ge(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ige(e,t){var n=oS(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Ev(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var C4=180/Math.PI,cA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kV(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*C4,skewX:Math.atan(l)*C4,scaleX:a,scaleY:s}}var yx;function Oge(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cA:kV(t.a,t.b,t.c,t.d,t.e,t.f)}function Dge(e){return e==null||(yx||(yx=document.createElementNS("http://www.w3.org/2000/svg","g")),yx.setAttribute("transform",e),!(e=yx.transform.baseVal.consolidate()))?cA:(e=e.matrix,kV(e.a,e.b,e.c,e.d,e.e,e.f))}function RV(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,d,h,m,g){if(u!==d||c!==h){var y=m.push("translate(",null,t,null,n);g.push({i:y-4,x:wa(u,d)},{i:y-2,x:wa(c,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function a(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:wa(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function s(u,c,d,h){u!==c?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:wa(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,h,m,g){if(u!==d||c!==h){var y=m.push(r(m)+"scale(",null,",",null,")");g.push({i:y-4,x:wa(u,d)},{i:y-2,x:wa(c,h)})}else(d!==1||h!==1)&&m.push(r(m)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,h),a(u.rotate,c.rotate,d,h),s(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(m){for(var g=-1,y=h.length,x;++g<y;)d[(x=h[g]).i]=x.x(m);return d.join("")}}}var Lge=RV(Oge,"px, ","px)","deg)"),jge=RV(Dge,", ",")",")"),zge=1e-12;function E4(e){return((e=Math.exp(e))+1/e)/2}function Bge(e){return((e=Math.exp(e))-1/e)/2}function Hge(e){return((e=Math.exp(2*e))-1)/(e+1)}const Uge=function e(t,n,i){function r(o,a){var s=o[0],l=o[1],u=o[2],c=a[0],d=a[1],h=a[2],m=c-s,g=d-l,y=m*m+g*g,x,b;if(y<zge)b=Math.log(h/u)/t,x=function(T){return[s+T*m,l+T*g,u*Math.exp(t*T*b)]};else{var w=Math.sqrt(y),S=(h*h-u*u+i*y)/(2*u*n*w),k=(h*h-u*u-i*y)/(2*h*n*w),R=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(k*k+1)-k);b=(M-R)/t,x=function(T){var N=T*b,z=E4(R),H=u/(n*w)*(z*Hge(t*N+R)-Bge(R));return[s+H*m,l+H*g,u*z/E4(t*N+R)]}}return x.duration=b*1e3*t/Math.SQRT2,x}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);function TV(e){return function(t,n){var i=e((t=Mb(t)).h,(n=Mb(n)).h),r=di(t.s,n.s),o=di(t.l,n.l),a=di(t.opacity,n.opacity);return function(s){return t.h=i(s),t.s=r(s),t.l=o(s),t.opacity=a(s),t+""}}}const Wge=TV(oS);var Gge=TV(di);function qge(e,t){var n=di((e=Pb(e)).l,(t=Pb(t)).l),i=di(e.a,t.a),r=di(e.b,t.b),o=di(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=r(a),e.opacity=o(a),e+""}}function AV(e){return function(t,n){var i=e((t=Nb(t)).h,(n=Nb(n)).h),r=di(t.c,n.c),o=di(t.l,n.l),a=di(t.opacity,n.opacity);return function(s){return t.h=i(s),t.c=r(s),t.l=o(s),t.opacity=a(s),t+""}}}const Vge=AV(oS);var Yge=AV(di);function MV(e){return function t(n){n=+n;function i(r,o){var a=e((r=sA(r)).h,(o=sA(o)).h),s=di(r.s,o.s),l=di(r.l,o.l),u=di(r.opacity,o.opacity);return function(c){return r.h=a(c),r.s=s(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return i.gamma=t,i}(1)}const Zge=MV(oS);var Xge=MV(di);function ZN(e,t){t===void 0&&(t=e,e=Oc);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(a){var s=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[s](a-s)}}function Kge(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Jge=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Oc,interpolateArray:Fge,interpolateBasis:yV,interpolateBasisClosed:vV,interpolateCubehelix:Zge,interpolateCubehelixLong:Xge,interpolateDate:SV,interpolateDiscrete:$ge,interpolateHcl:Vge,interpolateHclLong:Yge,interpolateHsl:Wge,interpolateHslLong:Gge,interpolateHue:Ige,interpolateLab:qge,interpolateNumber:wa,interpolateNumberArray:YN,interpolateObject:CV,interpolateRgb:lA,interpolateRgbBasis:Age,interpolateRgbBasisClosed:Mge,interpolateRound:Ev,interpolateString:EV,interpolateTransformCss:Lge,interpolateTransformSvg:jge,interpolateZoom:Uge,piecewise:ZN,quantize:Kge},Symbol.toStringTag,{value:"Module"}));function Qge(e){return function(){return e}}function fA(e){return+e}var k4=[0,1];function zr(e){return e}function dA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Qge(isNaN(t)?NaN:.5)}function e0e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function t0e(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=dA(r,i),o=n(a,o)):(i=dA(i,r),o=n(o,a)),function(s){return o(i(s))}}function n0e(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=dA(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=lc(e,s,1,i)-1;return o[l](r[l](s))}}function kv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aS(){var e=k4,t=k4,n=Oc,i,r,o,a=zr,s,l,u;function c(){var h=Math.min(e.length,t.length);return a!==zr&&(a=e0e(e[0],e[h-1])),s=h>2?n0e:t0e,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=s(e.map(i),t,n)))(i(a(h)))}return d.invert=function(h){return a(r((u||(u=s(t,e.map(i),wa)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,fA),c()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=Ev,c()},d.clamp=function(h){return arguments.length?(a=h?!0:zr,c()):a!==zr},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,m){return i=h,r=m,c()}}function FV(){return aS()(zr,zr)}function PV(e,t,n,i){var r=uc(e,t,n),o;switch(i=od(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=rG(r,a))&&(i.precision=o),OP(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=oG(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=iG(r))&&(i.precision=o-(i.type==="%")*2);break}}return I2(i)}function Dd(e){var t=e.domain;return e.ticks=function(n){var i=t();return WT(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return PV(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,o=i.length-1,a=i[r],s=i[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=r,r=o,o=u);c-- >0;){if(u=GT(a,s,n),u===l)return i[r]=a,i[o]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function NV(){var e=FV();return e.copy=function(){return kv(e,NV())},Os.apply(e,arguments),Dd(e)}function $V(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,fA),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return $V(e).unknown(t)},e=arguments.length?Array.from(e,fA):[0,1],Dd(n)}function IV(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],o=e[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),e[n]=t.floor(r),e[i]=t.ceil(o),e}function R4(e){return Math.log(e)}function T4(e){return Math.exp(e)}function i0e(e){return-Math.log(-e)}function r0e(e){return-Math.exp(-e)}function o0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function a0e(e){return e===10?o0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function s0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function A4(e){return(t,n)=>-e(-t,n)}function XN(e){const t=e(R4,T4),n=t.domain;let i=10,r,o;function a(){return r=s0e(i),o=a0e(i),n()[0]<0?(r=A4(r),o=A4(o),e(i0e,r0e)):e(R4,T4),t}return t.base=function(s){return arguments.length?(i=+s,a()):i},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=r(u),m=r(c),g,y;const x=s==null?10:+s;let b=[];if(!(i%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<i;++g)if(y=h<0?g/o(-h):g*o(h),!(y<u)){if(y>c)break;b.push(y)}}else for(;h<=m;++h)for(g=i-1;g>=1;--g)if(y=h>0?g/o(-h):g*o(h),!(y<u)){if(y>c)break;b.push(y)}b.length*2<x&&(b=WT(u,c,x))}else b=WT(h,m,Math.min(m-h,x)).map(o);return d?b.reverse():b},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=od(l)).precision==null&&(l.trim=!0),l=I2(l)),s===1/0)return l;const u=Math.max(1,i*s/t.ticks().length);return c=>{let d=c/o(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},t.nice=()=>n(IV(n(),{floor:s=>o(Math.floor(r(s))),ceil:s=>o(Math.ceil(r(s)))})),t}function OV(){const e=XN(aS()).domain([1,10]);return e.copy=()=>kv(e,OV()).base(e.base()),Os.apply(e,arguments),e}function M4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function F4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KN(e){var t=1,n=e(M4(t),F4(t));return n.constant=function(i){return arguments.length?e(M4(t=+i),F4(t)):t},Dd(n)}function DV(){var e=KN(aS());return e.copy=function(){return kv(e,DV()).constant(e.constant())},Os.apply(e,arguments)}function P4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function l0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function u0e(e){return e<0?-e*e:e*e}function JN(e){var t=e(zr,zr),n=1;function i(){return n===1?e(zr,zr):n===.5?e(l0e,u0e):e(P4(n),P4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Dd(t)}function QN(){var e=JN(aS());return e.copy=function(){return kv(e,QN()).exponent(e.exponent())},Os.apply(e,arguments),e}function c0e(){return QN.apply(null,arguments).exponent(.5)}function LV(){var e=[],t=[],n=[],i;function r(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=KW(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?i:t[lc(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(El),r()},o.range=function(a){return arguments.length?(t=Array.from(a),r()):t.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return LV().domain(e).range(t).unknown(i)},Os.apply(o,arguments)}function jV(){var e=0,t=1,n=1,i=[.5],r=[0,1],o;function a(l){return l!=null&&l<=l?r[lc(i,l,0,n)]:o}function s(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,s()):r.slice()},a.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return i.slice()},a.copy=function(){return jV().domain([e,t]).range(r).unknown(o)},Os.apply(Dd(a),arguments)}function zV(){var e=[.5],t=[0,1],n,i=1;function r(o){return o!=null&&o<=o?t[lc(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return zV().domain(e).range(t).unknown(n)},Os.apply(r,arguments)}function f0e(e){return new Date(e)}function d0e(e){return e instanceof Date?+e:+new Date(+e)}function e$(e,t,n,i,r,o,a,s,l,u){var c=FV(),d=c.invert,h=c.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),x=u("%I %p"),b=u("%a %d"),w=u("%b %d"),S=u("%B"),k=u("%Y");function R(M){return(l(M)<M?m:s(M)<M?g:a(M)<M?y:o(M)<M?x:i(M)<M?r(M)<M?b:w:n(M)<M?S:k)(M)}return c.invert=function(M){return new Date(d(M))},c.domain=function(M){return arguments.length?h(Array.from(M,d0e)):h().map(f0e)},c.ticks=function(M){var T=h();return e(T[0],T[T.length-1],M??10)},c.tickFormat=function(M,T){return T==null?R:u(T)},c.nice=function(M){var T=h();return(!M||typeof M.range!="function")&&(M=t(T[0],T[T.length-1],M??10)),M?h(IV(T,M)):c},c.copy=function(){return kv(c,e$(e,t,n,i,r,o,a,s,l,u))},c}function h0e(){return Os.apply(e$(xde,_de,Rs,Fy,km,kl,L2,O2,xl,BP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function p0e(){return Os.apply(e$(yde,vde,Ts,Py,Rm,Qu,j2,D2,xl,HP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sS(){var e=0,t=1,n,i,r,o,a=zr,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(r===0?.5:(d=(o(d)-n)*r,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function c(d){return function(h){var m,g;return arguments.length?([m,g]=h,a=d(m,g),u):[a(0),a(1)]}}return u.range=c(Oc),u.rangeRound=c(Ev),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),u}}function Dc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function t$(){var e=Dd(sS()(zr));return e.copy=function(){return Dc(e,t$())},$c.apply(e,arguments)}function BV(){var e=XN(sS()).domain([1,10]);return e.copy=function(){return Dc(e,BV()).base(e.base())},$c.apply(e,arguments)}function HV(){var e=KN(sS());return e.copy=function(){return Dc(e,HV()).constant(e.constant())},$c.apply(e,arguments)}function n$(){var e=JN(sS());return e.copy=function(){return Dc(e,n$()).exponent(e.exponent())},$c.apply(e,arguments)}function m0e(){return n$.apply(null,arguments).exponent(.5)}function lS(){var e=0,t=.5,n=1,i=1,r,o,a,s,l,u=zr,c,d=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+c(y))-o)*(i*y<i*o?s:l),u(d?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,n]=y,r=c(e=+e),o=c(t=+t),a=c(n=+n),s=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,m):[e,t,n]},m.clamp=function(y){return arguments.length?(d=!!y,m):d},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(x){var b,w,S;return arguments.length?([b,w,S]=x,u=ZN(y,[b,w,S]),m):[u(0),u(.5),u(1)]}}return m.range=g(Oc),m.rangeRound=g(Ev),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return c=y,r=y(e),o=y(t),a=y(n),s=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,m}}function UV(){var e=Dd(lS()(zr));return e.copy=function(){return Dc(e,UV())},$c.apply(e,arguments)}function WV(){var e=XN(lS()).domain([.1,1,10]);return e.copy=function(){return Dc(e,WV()).base(e.base())},$c.apply(e,arguments)}function GV(){var e=KN(lS());return e.copy=function(){return Dc(e,GV()).constant(e.constant())},$c.apply(e,arguments)}function i$(){var e=JN(lS());return e.copy=function(){return Dc(e,i$()).exponent(e.exponent())},$c.apply(e,arguments)}function g0e(){return i$.apply(null,arguments).exponent(.5)}function r$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const y0e="identity",Hp="linear",zl="log",Rv="pow",Tv="sqrt",uS="symlog",sd="time",ld="utc",ws="sequential",Pm="diverging",Up="quantile",cS="quantize",fS="threshold",o$="ordinal",hA="point",qV="band",a$="bin-ordinal",ri="continuous",Av="discrete",Mv="discretizing",ia="interpolating",s$="temporal";function v0e(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function x0e(e){return function(t){const n=e.range();let i=t[0],r=t[1],o=-1,a,s,l,u;for(r<i&&(s=i,i=r,r=s),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),a=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[a]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function l$(){const e=WN().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,o,a=!1,s=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,h=i[1]<i[0],m=i[1-h],g=r$(d,s,l);let y=i[h-0];r=(m-y)/(g||1),a&&(r=Math.floor(r)),y+=(m-y-r*(d-s))*u,o=r*(1-s),a&&(y=Math.round(y),o=Math.round(o));const x=fo(d).map(b=>y+r*b);return n(h?x.reverse():x)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],a=!0,c()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(a=!!d,c()):a},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),s=l,c()):s},e.paddingInner=function(d){return arguments.length?(s=Math.max(0,Math.min(1,d)),c()):s},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const h=i[1]<i[0],m=h?n().reverse():n(),g=m.length-1;let y=+d[0],x=+d[1],b,w,S;if(!(y!==y||x!==x)&&(x<y&&(S=y,y=x,x=S),!(x<m[0]||y>i[1-h])))return b=Math.max(0,lc(m,y)-1),w=y===x?b:lc(m,x)-1,y-m[b]>o+1e-10&&++b,h&&(S=b,b=g-w,w=g-S),b>w?void 0:t().slice(b,w+1)},e.invert=function(d){const h=e.invertRange([d,d]);return h&&h[0]},e.copy=function(){return l$().domain(t()).range(i).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}function VV(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return VV(t())},e}function _0e(){return VV(l$().paddingInner(1))}var b0e=Array.prototype.map;function w0e(e){return b0e.call(e,Gi)}const S0e=Array.prototype.slice;function YV(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(lc(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=w0e(i),n):e.slice()},n.range=function(i){return arguments.length?(t=S0e.call(i),n):t.slice()},n.tickFormat=function(i,r){return PV(e[0],Ot(e),i??10,r)},n.copy=function(){return YV().domain(n.domain()).range(n.range())},n}const $b=new Map,ZV=Symbol("vega_scale");function XV(e){return e[ZV]=!0,e}function C0e(e){return e&&e[ZV]===!0}function E0e(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?v0e(o):o.invertExtent?x0e(o):void 0),o.type=e,XV(o)};return i.metadata=Da($e(n)),i}function Ut(e,t,n){return arguments.length>1?($b.set(e,E0e(e,t,n)),this):KV(e)?$b.get(e):void 0}Ut(y0e,$V);Ut(Hp,NV,ri);Ut(zl,OV,[ri,zl]);Ut(Rv,QN,ri);Ut(Tv,c0e,ri);Ut(uS,DV,ri);Ut(sd,h0e,[ri,s$]);Ut(ld,p0e,[ri,s$]);Ut(ws,t$,[ri,ia]);Ut(`${ws}-${Hp}`,t$,[ri,ia]);Ut(`${ws}-${zl}`,BV,[ri,ia,zl]);Ut(`${ws}-${Rv}`,n$,[ri,ia]);Ut(`${ws}-${Tv}`,m0e,[ri,ia]);Ut(`${ws}-${uS}`,HV,[ri,ia]);Ut(`${Pm}-${Hp}`,UV,[ri,ia]);Ut(`${Pm}-${zl}`,WV,[ri,ia,zl]);Ut(`${Pm}-${Rv}`,i$,[ri,ia]);Ut(`${Pm}-${Tv}`,g0e,[ri,ia]);Ut(`${Pm}-${uS}`,GV,[ri,ia]);Ut(Up,LV,[Mv,Up]);Ut(cS,jV,Mv);Ut(fS,zV,Mv);Ut(a$,YV,[Av,Mv]);Ut(o$,WN,Av);Ut(qV,l$,Av);Ut(hA,_0e,Av);function KV(e){return $b.has(e)}function Ld(e,t){const n=$b.get(e);return n&&n.metadata[t]}function u$(e){return Ld(e,ri)}function Wp(e){return Ld(e,Av)}function pA(e){return Ld(e,Mv)}function JV(e){return Ld(e,zl)}function k0e(e){return Ld(e,s$)}function QV(e){return Ld(e,ia)}function eY(e){return Ld(e,Up)}const R0e=["clamp","base","constant","exponent"];function tY(e,t){const n=t[0],i=Ot(t)-n;return function(r){return e(n+r*i)}}function dS(e,t,n){return ZN(c$(t||"rgb",n),e)}function nY(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function iY(e,t,n){const i=n-t;let r,o,a;return!i||!Number.isFinite(i)?er(.5):(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),a=Ut(o)().domain([t,n]).range([0,1]),R0e.forEach(s=>e[s]?a[s](e[s]()):0),a)}function c$(e,t){const n=Jge[T0e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function T0e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const A0e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},M0e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function rY(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function oY(e,t){for(const n in e)f$(n,t(e[n]))}const N4={};oY(M0e,rY);oY(A0e,e=>dS(rY(e)));function f$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(N4[e]=t,this):N4[e]}const p_="symbol",F0e="discrete",P0e="gradient",N0e=e=>de(e)?e.map(t=>String(t)):String(e),$0e=(e,t)=>e[1]-t[1],I0e=(e,t)=>t[1]-e[1];function d$(e,t,n){let i;return zt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(_v(e.domain())/n||1)+1))),Oe(t)&&(i=t.step,t=t.interval),Ie(t)&&(t=e.type===sd?Tm(t):e.type==ld?Am(t):le("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function aY(e,t,n){let i=e.range(),r=i[0],o=Ot(i),a=$0e;if(r>o&&(i=o,o=r,r=i,a=I0e),r=Math.floor(r),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>r<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],Ot(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=s)}return t}function h$(e,t){return e.bins?aY(e,e.bins):e.ticks?e.ticks(t):e.domain()}function sY(e,t,n,i,r,o){const a=t.type;let s=N0e;if(a===sd||r===sd)s=e.timeFormat(i);else if(a===ld||r===ld)s=e.utcFormat(i);else if(JV(a)){const l=e.formatFloat(i);if(o||t.bins)s=l;else{const u=lY(t,n,!1);s=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();s=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(s=e.format(i));return s}function lY(e,t,n){const i=h$(e,t),r=e.base(),o=Math.log(r),a=Math.max(1,r*t/i.length),s=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/o));return u*r<r-.5&&(u*=r),u<=a};return n?i.filter(s):s}const mA={[Up]:"quantiles",[cS]:"thresholds",[fS]:"domain"},uY={[Up]:"quantiles",[cS]:"domain"};function cY(e,t){return e.bins?L0e(e.bins):e.type===zl?lY(e,t,!0):mA[e.type]?D0e(e[mA[e.type]]()):h$(e,t)}function O0e(e,t,n){const i=t[uY[t.type]](),r=i.length;let o=r>1?i[1]-i[0]:i[0],a;for(a=1;a<r;++a)o=Math.min(o,i[a]-i[a-1]);return e.formatSpan(0,o,3*10,n)}function D0e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function L0e(e){const t=e.slice(0,-1);return t.max=Ot(e),t}const j0e=e=>mA[e.type]||e.bins;function fY(e,t,n,i,r,o,a){const s=uY[t.type]&&o!==sd&&o!==ld?O0e(e,t,r):sY(e,t,n,r,o,a);return i===p_&&j0e(t)?z0e(s):i===F0e?B0e(s):H0e(s)}const z0e=e=>(t,n,i)=>{const r=$4(i[n+1],$4(i.max,1/0)),o=I4(t,e),a=I4(r,e);return o&&a?o+"  "+a:a?"< "+a:" "+o},$4=(e,t)=>e??t,B0e=e=>(t,n)=>n?e(t):null,H0e=e=>t=>e(t),I4=(e,t)=>Number.isFinite(e)?t(e):null;function U0e(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Ot(t),o=r-i;if(e.type===fS){const a=n?o/n:.1;i-=a,r+=a,o=r-i}return a=>(a-i)/o}function W0e(e,t,n,i){const r=i||t.type;return Ie(n)&&k0e(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===sd?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===ld?e.utcFormat("%A, %d %B %Y, %X UTC"):fY(e,t,5,null,n,i,!0)}function dY(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=W0e(e,t,n.format,n.formatType);if(pA(t.type)){const o=cY(t).slice(1).map(r),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(Wp(t.type)){const o=t.domain(),a=o.length,s=a>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{const o=t.domain();return`values from ${r(o[0])} to ${r(Ot(o))}`}}let hY=0;function G0e(){hY=0}const Ib="p_";function p$(e){return e&&e.gradient}function pY(e,t,n){const i=e.gradient;let r=e.id,o=i==="radial"?Ib:"";return r||(r=e.id="gradient_"+hY++,i==="radial"?(e.x1=rs(e.x1,.5),e.y1=rs(e.y1,.5),e.r1=rs(e.r1,0),e.x2=rs(e.x2,.5),e.y2=rs(e.y2,.5),e.r2=rs(e.r2,.5),o=Ib):(e.x1=rs(e.x1,0),e.y1=rs(e.y1,0),e.x2=rs(e.x2,1),e.y2=rs(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function rs(e,t){return e??t}function mY(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const O4={basis:{curve:Xme},"basis-closed":{curve:Kme},"basis-open":{curve:Jme},bundle:{curve:Qme,tension:"beta",value:.85},cardinal:{curve:ege,tension:"tension",value:0},"cardinal-open":{curve:nge,tension:"tension",value:0},"cardinal-closed":{curve:tge,tension:"tension",value:0},"catmull-rom":{curve:ige,tension:"alpha",value:.5},"catmull-rom-closed":{curve:rge,tension:"alpha",value:.5},"catmull-rom-open":{curve:oge,tension:"alpha",value:.5},linear:{curve:jN},"linear-closed":{curve:age},monotone:{horizontal:lge,vertical:sge},natural:{curve:uge},step:{curve:cge},"step-after":{curve:dge},"step-before":{curve:fge}};function m$(e,t,n){var i=tt(O4,e)&&O4[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const q0e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},V0e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Y0e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Z0e=/^((\s+,?\s*)|(,\s*))/,X0e=/^[01]/;function Gp(e){const t=[];return(e.match(V0e)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),a=q0e[o],s=K0e(o,a,i.slice(1).trim()),l=s.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...s.slice(0,a)]),l!==a){o==="m"&&(r=r==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([r,...s.slice(u,u+a)])}}),t}function K0e(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let o=0;o<t;++o){const a=e==="a"&&(o===3||o===4)?X0e:Y0e,s=n.slice(r).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");r+=s[0].length,i.push(+s[0]);const l=n.slice(r).match(Z0e);l!==null&&(r+=l[0].length)}return i}const hc=Math.PI/180,J0e=1e-14,Sf=Math.PI/2,ds=Math.PI*2,wh=Math.sqrt(3)/2;var mk={},gk={},gY=[].join;function Q0e(e,t,n,i,r,o,a,s,l){const u=gY.call(arguments);if(mk[u])return mk[u];const c=a*hc,d=Math.sin(c),h=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const m=h*(s-e)*.5+d*(l-t)*.5,g=h*(l-t)*.5-d*(s-e)*.5;let y=m*m/(n*n)+g*g/(i*i);y>1&&(y=Math.sqrt(y),n*=y,i*=y);const x=h/n,b=d/n,w=-d/i,S=h/i,k=x*s+b*l,R=w*s+S*l,M=x*e+b*t,T=w*e+S*t;let z=1/((M-k)*(M-k)+(T-R)*(T-R))-.25;z<0&&(z=0);let H=Math.sqrt(z);o==r&&(H=-H);const U=.5*(k+M)-H*(T-R),X=.5*(R+T)+H*(M-k),B=Math.atan2(R-X,k-U);let j=Math.atan2(T-X,M-U)-B;j<0&&o===1?j+=ds:j>0&&o===0&&(j-=ds);const q=Math.ceil(Math.abs(j/(Sf+.001))),K=[];for(let W=0;W<q;++W){const J=B+W*j/q,Q=B+(W+1)*j/q;K[W]=[U,X,J,Q,n,i,d,h]}return mk[u]=K}function eye(e){const t=gY.call(e);if(gk[t])return gk[t];var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];const c=u*a,d=-l*s,h=l*a,m=u*s,g=Math.cos(r),y=Math.sin(r),x=Math.cos(o),b=Math.sin(o),w=.5*(o-r),S=Math.sin(w*.5),k=8/3*S*S/Math.sin(w),R=n+g-k*y,M=i+y+k*g,T=n+x,N=i+b,z=T+k*b,H=N-k*x;return gk[t]=[c*R+d*M,h*R+m*M,c*z+d*H,h*z+m*H,c*T+d*N,h*T+m*N]}const Fo=["l",0,0,0,0,0,0,0];function tye(e,t,n){const i=Fo[0]=e[0];if(i==="a"||i==="A")Fo[1]=t*e[1],Fo[2]=n*e[2],Fo[3]=e[3],Fo[4]=e[4],Fo[5]=e[5],Fo[6]=t*e[6],Fo[7]=n*e[7];else if(i==="h"||i==="H")Fo[1]=t*e[1];else if(i==="v"||i==="V")Fo[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Fo[r]=(r%2==1?t:n)*e[r];return Fo}function jy(e,t,n,i,r,o){var a,s=null,l=0,u=0,c=0,d=0,h,m,g,y,x=0,b=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),o==null&&(o=r),e.beginPath&&e.beginPath();for(var w=0,S=t.length;w<S;++w){switch(a=t[w],(r!==1||o!==1)&&(a=tye(a,r,o)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+i);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+i);break;case"h":l+=a[1],e.lineTo(l+n,u+i);break;case"H":l=a[1],e.lineTo(l+n,u+i);break;case"v":u+=a[1],e.lineTo(l+n,u+i);break;case"V":u=a[1],e.lineTo(l+n,u+i);break;case"m":l+=a[1],u+=a[2],x=l,b=u,e.moveTo(l+n,u+i);break;case"M":l=a[1],u=a[2],x=l,b=u,e.moveTo(l+n,u+i);break;case"c":h=l+a[5],m=u+a[6],c=l+a[3],d=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+i,c+n,d+i,h+n,m+i),l=h,u=m;break;case"C":l=a[5],u=a[6],c=a[3],d=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,c+n,d+i,l+n,u+i);break;case"s":h=l+a[3],m=u+a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+i,l+a[1]+n,u+a[2]+i,h+n,m+i),c=l+a[1],d=u+a[2],l=h,u=m;break;case"S":h=a[3],m=a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+i,a[1]+n,a[2]+i,h+n,m+i),l=h,u=m,c=a[1],d=a[2];break;case"q":h=l+a[3],m=u+a[4],c=l+a[1],d=u+a[2],e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m;break;case"Q":h=a[3],m=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,h+n,m+i),l=h,u=m,c=a[1],d=a[2];break;case"t":h=l+a[1],m=u+a[2],s[0].match(/[QqTt]/)===null?(c=l,d=u):s[0]==="t"?(c=2*l-g,d=2*u-y):s[0]==="q"&&(c=2*l-c,d=2*u-d),g=c,y=d,e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m,c=l+a[1],d=u+a[2];break;case"T":h=a[1],m=a[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m;break;case"a":D4(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+i]),l+=a[6],u+=a[7];break;case"A":D4(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),l=a[6],u=a[7];break;case"z":case"Z":l=x,u=b,e.closePath();break}s=a}}function D4(e,t,n,i){const r=Q0e(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const a=eye(r[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const L4=.5773502691896257,j4={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ds)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n,r=i-n*L4,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n,r=i-n*L4;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=wh*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function yY(e){return tt(j4,e)?j4[e]:nye(e)}var yk={};function nye(e){if(!tt(yk,e)){const t=Gp(e);yk[e]={draw:function(n,i){jy(n,t,0,0,Math.sqrt(i)/2)}}}return yk[e]}const fu=.448084975506;function iye(e){return e.x}function rye(e){return e.y}function oye(e){return e.width}function aye(e){return e.height}function el(e){return typeof e=="function"?e:()=>+e}function vx(e,t,n){return Math.max(t,Math.min(e,n))}function vY(){var e=iye,t=rye,n=oye,i=aye,r=el(0),o=r,a=r,s=r,l=null;function u(c,d,h){var m,g=d??+e.call(this,c),y=h??+t.call(this,c),x=+n.call(this,c),b=+i.call(this,c),w=Math.min(x,b)/2,S=vx(+r.call(this,c),0,w),k=vx(+o.call(this,c),0,w),R=vx(+a.call(this,c),0,w),M=vx(+s.call(this,c),0,w);if(l||(l=m=Q2()),S<=0&&k<=0&&R<=0&&M<=0)l.rect(g,y,x,b);else{var T=g+x,N=y+b;l.moveTo(g+S,y),l.lineTo(T-k,y),l.bezierCurveTo(T-fu*k,y,T,y+fu*k,T,y+k),l.lineTo(T,N-M),l.bezierCurveTo(T,N-fu*M,T-fu*M,N,T-M,N),l.lineTo(g+R,N),l.bezierCurveTo(g+fu*R,N,g,N-fu*R,g,N-R),l.lineTo(g,y+S),l.bezierCurveTo(g,y+fu*S,g+fu*S,y,g+S,y),l.closePath()}if(m)return l=null,m+""||null}return u.x=function(c){return arguments.length?(e=el(c),u):e},u.y=function(c){return arguments.length?(t=el(c),u):t},u.width=function(c){return arguments.length?(n=el(c),u):n},u.height=function(c){return arguments.length?(i=el(c),u):i},u.cornerRadius=function(c,d,h,m){return arguments.length?(r=el(c),o=d!=null?el(d):r,s=h!=null?el(h):r,a=m!=null?el(m):o,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function xY(){var e,t,n,i,r=null,o,a,s,l;function u(d,h,m){const g=m/2;if(o){var y=s-h,x=d-a;if(y||x){var b=Math.hypot(y,x),w=(y/=b)*l,S=(x/=b)*l,k=Math.atan2(x,y);r.moveTo(a-w,s-S),r.lineTo(d-y*g,h-x*g),r.arc(d,h,g,k-Math.PI,k),r.lineTo(a+w,s+S),r.arc(a,s,l,k,k+Math.PI)}else r.arc(d,h,g,0,ds);r.closePath()}else o=1;a=d,s=h,l=g}function c(d){var h,m=d.length,g,y=!1,x;for(r==null&&(r=x=Q2()),h=0;h<=m;++h)!(h<m&&i(g=d[h],h,d))===y&&(y=!y)&&(o=0),y&&u(+e(g,h,d),+t(g,h,d),+n(g,h,d));if(x)return r=null,x+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(d==null?r=null:r=d,c):r},c}function Fv(e,t){return e??t}const Pv=e=>e.x||0,Nv=e=>e.y||0,sye=e=>e.width||0,lye=e=>e.height||0,uye=e=>(e.x||0)+(e.width||0),cye=e=>(e.y||0)+(e.height||0),fye=e=>e.startAngle||0,dye=e=>e.endAngle||0,hye=e=>e.padAngle||0,pye=e=>e.innerRadius||0,mye=e=>e.outerRadius||0,gye=e=>e.cornerRadius||0,yye=e=>Fv(e.cornerRadiusTopLeft,e.cornerRadius)||0,vye=e=>Fv(e.cornerRadiusTopRight,e.cornerRadius)||0,xye=e=>Fv(e.cornerRadiusBottomRight,e.cornerRadius)||0,_ye=e=>Fv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,bye=e=>Fv(e.size,64),wye=e=>e.size||1,hS=e=>e.defined!==!1,Sye=e=>yY(e.shape||"circle"),Cye=Vme().startAngle(fye).endAngle(dye).padAngle(hye).innerRadius(pye).outerRadius(mye).cornerRadius(gye),Eye=Yq().x(Pv).y1(Nv).y0(cye).defined(hS),kye=Yq().y(Nv).x1(Pv).x0(uye).defined(hS),Rye=Vq().x(Pv).y(Nv).defined(hS),Tye=vY().x(Pv).y(Nv).width(sye).height(lye).cornerRadius(yye,vye,xye,_ye),Aye=Zme().type(Sye).size(bye),Mye=xY().x(Pv).y(Nv).defined(hS).size(wye);function g$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Fye(e,t){return Cye.context(e)(t)}function Pye(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?kye:Eye).curve(m$(i,n.orient,n.tension)).context(e)(t)}function Nye(e,t){const n=t[0],i=n.interpolate||"linear";return Rye.curve(m$(i,n.orient,n.tension)).context(e)(t)}function Nm(e,t,n,i){return Tye.context(e)(t,n,i)}function $ye(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Iye(e,t){return Aye.context(e)(t)}function Oye(e,t){return Mye.context(e)(t)}var _Y=1;function bY(){_Y=1}function y$(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+_Y++),a=r.clipping[o]||(r.clipping[o]={id:o});return bt(i)?a.path=i(null):g$(n)?a.path=Nm(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Vn(e){this.clear(),e&&this.union(e)}Vn.prototype={clone(){return new Vn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[s*i-l*r+u,l*i+s*r+c,s*i-l*a+u,l*i+s*a+c,s*o-l*r+u,l*o+s*r+c,s*o-l*a+u,l*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function pS(e){this.mark=e,this.bounds=this.bounds||new Vn}function mS(e){pS.call(this,e),this.items=this.items||[]}be(mS,pS);function v$(e){this._pending=0,this._loader=e||B2()}function z4(e){e._pending+=1}function Og(e){e._pending-=1}v$.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return z4(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Og(t),n)).catch(()=>(Og(t),null))},loadImage(e){const t=this,n=hge();return z4(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const o=new n,a=tt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Og(t),o.onerror=()=>Og(t),o.src=r,o}).catch(i=>(Og(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}n(!1)})}};function ql(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Dye(t,i):0))}return e}function Dye(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Lye=ds-1e-8;let gS,m_,g_,$f,gA,y_,yA,vA;const Iu=(e,t)=>gS.add(e,t),v_=(e,t)=>Iu(m_=e,g_=t),B4=e=>Iu(e,gS.y1),H4=e=>Iu(gS.x1,e),Cf=(e,t)=>gA*e+yA*t,Ef=(e,t)=>y_*e+vA*t,vk=(e,t)=>Iu(Cf(e,t),Ef(e,t)),xk=(e,t)=>v_(Cf(e,t),Ef(e,t));function $v(e,t){return gS=e,t?($f=t*hc,gA=vA=Math.cos($f),y_=Math.sin($f),yA=-y_):(gA=vA=1,$f=y_=yA=0),jye}const jye={beginPath(){},closePath(){},moveTo:xk,lineTo:xk,rect(e,t,n,i){$f?(vk(e+n,t),vk(e+n,t+i),vk(e,t+i),xk(e,t)):(Iu(e+n,t+i),v_(e,t))},quadraticCurveTo(e,t,n,i){const r=Cf(e,t),o=Ef(e,t),a=Cf(n,i),s=Ef(n,i);U4(m_,r,a,B4),U4(g_,o,s,H4),v_(a,s)},bezierCurveTo(e,t,n,i,r,o){const a=Cf(e,t),s=Ef(e,t),l=Cf(n,i),u=Ef(n,i),c=Cf(r,o),d=Ef(r,o);W4(m_,a,l,c,B4),W4(g_,s,u,d,H4),v_(c,d)},arc(e,t,n,i,r,o){if(i+=$f,r+=$f,m_=n*Math.cos(r)+e,g_=n*Math.sin(r)+t,Math.abs(r-i)>Lye)Iu(e-n,t-n),Iu(e+n,t+n);else{const a=u=>Iu(n*Math.cos(u)+e,n*Math.sin(u)+t);let s,l;if(a(i),a(r),r!==i)if(i=i%ds,i<0&&(i+=ds),r=r%ds,r<0&&(r+=ds),r<i&&(o=!o,s=i,i=r,r=s),o)for(r-=ds,s=i-i%Sf,l=0;l<4&&s>r;++l,s-=Sf)a(s);else for(s=i-i%Sf+Sf,l=0;l<4&&s<r;++l,s=s+Sf)a(s)}}};function U4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function W4(e,t,n,i,r){const o=i-e+3*t-3*n,a=e+n-2*t,s=e-t;let l=0,u=0,c;Math.abs(o)>J0e?(c=a*a+s*o,c>=0&&(c=Math.sqrt(c),l=(-a+c)/o,u=(-a-c)/o)):l=.5*s/a,0<l&&l<1&&r(G4(l,e,t,n,i)),0<u&&u<1&&r(G4(u,e,t,n,i))}function G4(e,t,n,i,r){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*i+s*e*r}var nc=(nc=tc(1,1))?nc.getContext("2d"):null;const xA=new Vn;function x$(e){return function(t,n){if(!nc)return!0;e(nc,t),xA.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:a}=xA;for(let s=r;s<=a;++s)for(let l=i;l<=o;++l)if(nc.isPointInPath(l,s))return!0;return!1}}function _$(e,t){return t.contains(e.x||0,e.y||0)}function wY(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,o=e.height||0;return t.intersects(xA.set(n,i,n+r,i+o))}function SY(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:i;return Qh(t,n,i,r,o)}function Qh(e,t,n,i,r){const{x1:o,y1:a,x2:s,y2:l}=e,u=i-t,c=r-n;let d=0,h=1,m,g,y,x;for(x=0;x<4;++x){if(x===0&&(m=-u,g=-(o-t)),x===1&&(m=u,g=s-t),x===2&&(m=-c,g=-(a-n)),x===3&&(m=c,g=l-n),Math.abs(m)<1e-10&&g<0)return!1;if(y=g/m,m<0){if(y>h)return!1;y>d&&(d=y)}else if(m>0){if(y<d)return!1;y<h&&(h=y)}}return!0}function qp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function da(e,t){return e??t}function q4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function zye(e,t,n){const i=n.width(),r=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+da(t.x1,.5)*i,n.y1+da(t.y1,.5)*r,Math.max(i,r)*da(t.r1,0),n.x1+da(t.x2,.5)*i,n.y1+da(t.y2,.5)*r,Math.max(i,r)*da(t.r2,.5));else{const a=da(t.x1,0),s=da(t.y1,0),l=da(t.x2,1),u=da(t.y2,0);if(a===l||s===u||i===r)o=e.createLinearGradient(n.x1+a*i,n.y1+s*r,n.x1+l*i,n.y1+u*r);else{const c=tc(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=q4(d.createLinearGradient(a,s,l,u),t.stops),d.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}}return q4(o,t.stops)}function CY(e,t,n){return p$(n)?zye(e,n,t.bounds):n}function Ob(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=CY(e,t,t.fill),!0):!1}var Bye=[];function Vp(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=CY(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Bye),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Hye(e,t){return e.zindex-t.zindex||e.index-t.index}function b$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,o;for(r=0,o=t.length;r<o;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Hye)}function ja(e,t){var n=e.items,i,r;if(!n||!n.length)return;const o=b$(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function Db(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const o=b$(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function w$(e){return function(t,n,i){ja(n,r=>{(!i||i.intersects(r.bounds))&&EY(e,t,r,r)})}}function Uye(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&EY(e,t,n.items[0],n.items)}}function EY(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(qp(t,n),n.fill&&Ob(t,n,r)&&t.fill(),n.stroke&&Vp(t,n,r)&&t.stroke()))}function yS(e){return e=e||Ko,function(t,n,i,r,o,a){return i*=t.pixelRatio,r*=t.pixelRatio,Db(n,s=>{const l=s.bounds;if(!(l&&!l.contains(o,a)||!l)&&e(t,s,i,r,o,a))return s})}}function Iv(e,t){return function(n,i,r,o){var a=Array.isArray(i)?i[0]:i,s=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,i)?!1:s&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o)}}function S$(e){return yS(Iv(e))}function Gf(e,t){return"translate("+e+","+t+")"}function C$(e){return"rotate("+e+")"}function Wye(e,t){return"scale("+e+","+t+")"}function kY(e){return Gf(e.x||0,e.y||0)}function Gye(e){return Gf(e.x||0,e.y||0)+(e.angle?" "+C$(e.angle):"")}function qye(e){return Gf(e.x||0,e.y||0)+(e.angle?" "+C$(e.angle):"")+(e.scaleX||e.scaleY?" "+Wye(e.scaleX||1,e.scaleY||1):"")}function E$(e,t,n){function i(a,s){a("transform",Gye(s)),a("d",t(null,s))}function r(a,s){return t($v(a,s.angle),s),ql(a,s).translate(s.x||0,s.y||0)}function o(a,s){var l=s.x||0,u=s.y||0,c=s.angle||0;a.translate(l,u),c&&a.rotate(c*=hc),a.beginPath(),t(a,s),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:w$(o),pick:S$(o),isect:n||x$(o)}}var Vye=E$("arc",Fye);function Yye(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,o=1/0,a,s;--r>=0;)e[r].defined!==!1&&(s=Math.abs(e[r][i]-n),s<o&&(o=s,a=e[r]));return a}function Zye(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,o,a;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],o=e[i].y-t[1],a=r*r+o*o,a<n))return e[i];return null}function Xye(e,t){for(var n=e.length,i,r,o;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],o=i*i+r*r,i=e[n].size||1,o<i*i))return e[n];return null}function k$(e,t,n){function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function r(l,u){var c=u.items;return c.length===0?l:(t($v(l),c),ql(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const a=Iv(o);function s(l,u,c,d,h,m){var g=u.items,y=u.bounds;return!g||!g.length||y&&!y.contains(h,m)?null:(c*=l.pixelRatio,d*=l.pixelRatio,a(l,g,c,d)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Uye(o),pick:s,isect:_$,tip:n}}var Kye=k$("area",Pye,Yye);function Jye(e,t){var n=t.clip;e.save(),bt(n)?(e.beginPath(),n(e),e.clip()):RY(e,t.group)}function RY(e,t){e.beginPath(),g$(t)?Nm(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function TY(e){const t=da(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Qye(e,t){e("transform",kY(t))}function AY(e,t){const n=TY(t);e("d",Nm(null,t,n,n))}function eve(e,t){e("class","background"),e("aria-hidden",!0),AY(e,t)}function tve(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?AY(e,t):e("d","")}function nve(e,t,n){const i=t.clip?y$(n,t,t):null;e("clip-path",i)}function ive(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ql(e,t),e.translate(t.x||0,t.y||0)}function zy(e,t,n,i){const r=TY(t);e.beginPath(),Nm(e,t,(n||0)+r,(i||0)+r)}const rve=Iv(zy),ove=Iv(zy,!1),ave=Iv(zy,!0);function sve(e,t,n,i){ja(t,r=>{const o=r.x||0,a=r.y||0,s=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(zy(e,r,o,a),qp(e,r),r.fill&&Ob(e,r,l)&&e.fill(),r.stroke&&!s&&Vp(e,r,l)&&e.stroke()),e.save(),e.translate(o,a),r.clip&&RY(e,r),n&&n.translate(-o,-a),ja(r,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(o,a),e.restore(),s&&r.stroke&&l&&(zy(e,r,o,a),qp(e,r),Vp(e,r,l)&&e.stroke())})}function lve(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const a=n*e.pixelRatio,s=i*e.pixelRatio;return Db(t,l=>{let u,c,d;const h=l.bounds;if(h&&!h.contains(r,o))return;c=l.x||0,d=l.y||0;const m=c+(l.width||0),g=d+(l.height||0),y=l.clip;if(y&&(r<c||r>m||o<d||o>g))return;if(e.save(),e.translate(c,d),c=r-c,d=o-d,y&&g$(l)&&!ave(e,l,a,s))return e.restore(),null;const x=l.strokeForeground,b=t.interactive!==!1;return b&&x&&l.stroke&&ove(e,l,a,s)?(e.restore(),l):(u=Db(l,w=>uve(w,c,d)?this.pick(w,n,i,c,d):null),!u&&b&&(l.fill||!x&&l.stroke)&&rve(e,l,a,s)&&(u=l),e.restore(),u||null)})}function uve(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var cve={type:"group",tag:"g",nested:!1,attr:Qye,bound:ive,draw:sve,pick:lve,isect:wY,content:nve,background:eve,foreground:tve},By={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function R$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function T$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function A$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function vS(e,t){return e==="center"?t/2:e==="right"?t:0}function xS(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function fve(e,t,n){const i=R$(t,n),r=T$(t,i),o=A$(t,i),a=(t.x||0)-vS(t.align,r),s=(t.y||0)-xS(t.baseline,o),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,By["xmlns:xlink"],"xlink:href"),e("transform",Gf(a,s)),e("width",r),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function dve(e,t){const n=t.image,i=T$(t,n),r=A$(t,n),o=(t.x||0)-vS(t.align,i),a=(t.y||0)-xS(t.baseline,r);return e.set(o,a,o+i,a+r)}function hve(e,t,n){ja(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=R$(i,this);let o=T$(i,r),a=A$(i,r);if(o===0||a===0)return;let s=(i.x||0)-vS(i.align,o),l=(i.y||0)-xS(i.baseline,a),u,c,d,h;i.aspect!==!1&&(c=r.width/r.height,d=i.width/i.height,c===c&&d===d&&c!==d&&(d<c?(h=o/c,l+=(a-h)/2,a=h):(h=a*c,s+=(o-h)/2,o=h))),(r.complete||r.toDataURL)&&(qp(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,s,l,o,a))})}var pve={type:"image",tag:"image",nested:!1,attr:fve,bound:dve,draw:hve,pick:yS(),isect:Ko,get:R$,xOffset:vS,yOffset:xS},mve=k$("line",Nye,Zye);function gve(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",qye(t)),e("d",t.path)}function x_(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*hc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Gp(n)).path=n),s&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(s),jy(e,l,0,0,o,a),e.rotate(-s),e.translate(-i,-r)):jy(e,l,i,r,o,a)}function yve(e,t){return x_($v(e,t.angle),t)?e.set(0,0,0,0):ql(e,t,!0)}var vve={type:"path",tag:"path",nested:!1,attr:gve,bound:yve,draw:w$(x_),pick:S$(x_),isect:x$(x_)};function xve(e,t){e("d",Nm(null,t))}function _ve(e,t){var n,i;return ql(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function V4(e,t){e.beginPath(),Nm(e,t)}var bve={type:"rect",tag:"path",nested:!1,attr:xve,bound:_ve,draw:w$(V4),pick:S$(V4),isect:wY};function wve(e,t){e("transform",kY(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Sve(e,t){var n,i;return ql(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function MY(e,t,n){var i,r,o,a;return t.stroke&&Vp(e,t,n)?(i=t.x||0,r=t.y||0,o=t.x2!=null?t.x2:i,a=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,a),!0):!1}function Cve(e,t,n){ja(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&MY(e,i,r)&&(qp(e,i),e.stroke())}})}function Eve(e,t,n,i){return e.isPointInStroke?MY(e,t,1)&&e.isPointInStroke(n,i):!1}var kve={type:"rule",tag:"line",nested:!1,attr:wve,bound:Sve,draw:Cve,pick:yS(Eve),isect:SY},Rve=E$("shape",$ye),Tve=E$("symbol",Iye,_$);const Y4=LW();var mo={height:Ds,measureWidth:M$,estimateWidth:Lb,width:Lb,canvas:FY};FY(!0);function FY(e){mo.width=e&&nc?M$:Lb}function Lb(e,t){return PY(mc(e,t),Ds(e))}function PY(e,t){return~~(.8*e.length*t)}function M$(e,t){return Ds(e)<=0||!(t=mc(e,t))?0:NY(t,_S(e))}function NY(e,t){const n=`(${t}) ${e}`;let i=Y4.get(n);return i===void 0&&(nc.font=t,i=nc.measureText(e).width,Y4.set(n,i)),i}function Ds(e){return e.fontSize!=null?+e.fontSize||0:11}function pc(e){return e.lineHeight!=null?e.lineHeight:Ds(e)+2}function Ave(e){return de(e)?e.length>1?e:e[0]:e}function Ov(e){return Ave(e.lineBreak&&e.text&&!de(e.text)?e.text.split(e.lineBreak):e.text)}function F$(e){const t=Ov(e);return(de(t)?t.length-1:0)*pc(e)}function mc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Fve(e,n):n}function Mve(e){if(mo.width===M$){const t=_S(e);return n=>NY(n,t)}else if(mo.width===Lb){const t=Ds(e);return n=>PY(n,t)}else return t=>mo.width(e,t)}function Fve(e,t){var n=+e.limit,i=Mve(e);if(i(t)<n)return t;var r=e.ellipsis||"",o=e.dir==="rtl",a=0,s=t.length,l;if(n-=i(r),o){for(;a<s;)l=a+s>>>1,i(t.slice(l))>n?a=l+1:s=l;return r+t.slice(a)}else{for(;a<s;)l=1+(a+s>>>1),i(t.slice(0,l))<n?a=l:s=l-1;return t.slice(0,a)+r}}function Dv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function _S(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ds(e)+"px "+Dv(e,t)}function P$(e){var t=e.baseline,n=Ds(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*pc(e):t==="line-bottom"?.29*n-.5*pc(e):0)}const Pve={left:"start",center:"middle",right:"end"},W0=new Vn;function bS(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Sf,t+=i*Math.cos(r),n+=i*Math.sin(r)),W0.x1=t,W0.y1=n,W0}function Nve(e,t){var n=t.dx||0,i=(t.dy||0)+P$(t),r=bS(t),o=r.x1,a=r.y1,s=t.angle||0,l;e("text-anchor",Pve[t.align]||"start"),s?(l=Gf(o,a)+" "+C$(s),(n||i)&&(l+=" "+Gf(n,i))):l=Gf(o+n,a+i),e("transform",l)}function N$(e,t,n){var i=mo.height(t),r=t.align,o=bS(t),a=o.x1,s=o.y1,l=t.dx||0,u=(t.dy||0)+P$(t)-Math.round(.8*i),c=Ov(t),d;if(de(c)?(i+=pc(t)*(c.length-1),d=c.reduce((h,m)=>Math.max(h,mo.width(t,m)),0)):d=mo.width(t,c),r==="center"?l-=d/2:r==="right"&&(l-=d),e.set(l+=a,u+=s,l+d,u+i),t.angle&&!n)e.rotate(t.angle*hc,a,s);else if(n===2)return e.rotatedPoints(t.angle*hc,a,s);return e}function $ve(e,t,n){ja(t,i=>{var r=i.opacity==null?1:i.opacity,o,a,s,l,u,c,d;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=_S(i),e.textAlign=i.align||"left",o=bS(i),a=o.x1,s=o.y1,i.angle&&(e.save(),e.translate(a,s),e.rotate(i.angle*hc),a=s=0),a+=i.dx||0,s+=(i.dy||0)+P$(i),c=Ov(i),qp(e,i),de(c))for(u=pc(i),l=0;l<c.length;++l)d=mc(i,c[l]),i.fill&&Ob(e,i,r)&&e.fillText(d,a,s),i.stroke&&Vp(e,i,r)&&e.strokeText(d,a,s),s+=u;else d=mc(i,c),i.fill&&Ob(e,i,r)&&e.fillText(d,a,s),i.stroke&&Vp(e,i,r)&&e.strokeText(d,a,s);i.angle&&e.restore()}})}function Ive(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=bS(t),s=a.x1,l=a.y1,u=N$(W0,t,1),c=-t.angle*hc,d=Math.cos(c),h=Math.sin(c),m=d*r-h*o+(s-d*s+h*l),g=h*r+d*o+(l-h*s-d*l);return u.contains(m,g)}function Ove(e,t){const n=N$(W0,e,2);return Qh(t,n[0],n[1],n[2],n[3])||Qh(t,n[0],n[1],n[4],n[5])||Qh(t,n[4],n[5],n[6],n[7])||Qh(t,n[2],n[3],n[6],n[7])}var Dve={type:"text",tag:"text",nested:!1,attr:Nve,bound:N$,draw:$ve,pick:yS(Ive),isect:Ove},Lve=k$("trail",Oye,Xye),bo={arc:Vye,area:Kye,group:cve,image:pve,line:mve,path:vve,rect:bve,rule:kve,shape:Rve,symbol:Tve,text:Dve,trail:Lve};function _A(e,t,n){var i=bo[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new Vn),e,n)}var Z4={mark:null};function $Y(e,t,n){var i=bo[e.marktype],r=i.bound,o=e.items,a=o&&o.length,s,l,u,c;if(i.nested)return a?u=o[0]:(Z4.mark=e,u=Z4),c=_A(u,r,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Vn,a)for(s=0,l=o.length;s<l;++s)t.union(_A(o[s],r,n));return e.bounds=t}const jve=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function IY(e,t){return JSON.stringify(e,jve,t)}function OY(e){const t=typeof e=="string"?JSON.parse(e):e;return DY(t)}function DY(e){var t=e.marktype,n=e.items,i,r,o;if(n)for(r=0,o=n.length;r<o;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&DY(n[r]);return t&&$Y(e),e}function $$(e){arguments.length?this.root=OY(e):(this.root=LY({marktype:"group",name:"root",role:"frame"}),this.root.items=[new mS(this.root)])}$$.prototype={toJSON(e){return IY(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const i=LY(e,t);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function LY(e,t){const n={bounds:new Vn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ou(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function I$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Kn(e,t,n,i){var r=e.childNodes[t],o;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=Ou(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function Oo(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function jY(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function wS(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function zve(e,t,n,i){var r=e&&e.mark,o,a;if(r&&(o=bo[r.marktype]).tip){for(a=wS(t,n),a[0]-=i[0],a[1]-=i[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(r.items,a)}return e}function gc(e,t){this._active=null,this._handlers={},this._loader=e||B2(),this._tooltip=t||Bve}function Bve(e,t,n,i){e.element().setAttribute("title",i||"")}gc.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),o=Ou(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=zve(t,e,this.canvas(),this._origin);const i=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,i)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,o=r.width(),a=r.height();let s=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,l+=e.y||0;return{x:s,y:l,width:o,height:a,left:s,top:l,right:s+o,bottom:l+a}}};function ko(e){this._el=null,this._bgcolor=null,this._loader=new v$(e)}ko.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(o=>{o&&r(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Hve="keydown",Uve="keypress",Wve="keyup",zY="dragenter",__="dragleave",BY="dragover",bA="pointerdown",Gve="pointerup",jb="pointermove",G0="pointerout",HY="pointerover",wA="mousedown",qve="mouseup",UY="mousemove",SA="mouseout",WY="mouseover",zb="click",Vve="dblclick",Yve="wheel",GY="mousewheel",Bb="touchstart",Hb="touchmove",Ub="touchend",Zve=[Hve,Uve,Wve,zY,__,BY,bA,Gve,jb,G0,HY,wA,qve,UY,SA,WY,zb,Vve,Yve,GY,Bb,Hb,Ub],CA=jb,Hy=G0,EA=zb;function yc(e,t){gc.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const Xve=e=>e===Bb||e===Hb||e===Ub?[Bb,Hb,Ub]:[e];function X4(e,t){Xve(t).forEach(n=>Kve(e,n))}function Kve(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function m0(e,t,n){t.forEach(i=>e.fire(i,n))}function K4(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r?m0(this,e,i):((!r||!r.exit)&&m0(this,n,i),this._active=o,m0(this,t,i),m0(this,e,i))}}function J4(e){return function(t){m0(this,e,t),this._active=null}}be(yc,gc,{initialize(e,t,n){return this._canvas=e&&I$(e,"canvas"),[zb,wA,bA,jb,G0,__].forEach(i=>X4(this,i)),gc.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Zve,DOMMouseScroll(e){this.fire(GY,e)},pointermove:K4([jb,UY],[HY,WY],[G0,SA]),dragover:K4([BY],[zY],[__]),pointerout:J4([G0,SA]),dragleave:J4([__]),pointerdown(e){this._down=this._active,this.fire(bA,e)},mousedown(e){this._down=this._active,this.fire(wA,e)},click(e){this._down===this._active&&(this.fire(zb,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Bb,e,!0)},touchmove(e){this.fire(Hb,e,!0)},touchend(e){this.fire(Ub,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===EA&&i&&i.href?this.handleHref(t,i,i.href):(e===CA||e===Hy)&&this.handleTooltip(t,i,e!==Hy),r)for(let o=0,a=r.length;o<a;++o)r[o].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(X4(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=wS(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const o=this.context();return bo[e.marktype].pick.call(this,o,e,t,n,i,r)}});function Jve(){return typeof window<"u"&&window.devicePixelRatio||1}function Qve(e,t,n,i,r,o){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),l=a?Jve():r;e.width=t*l,e.height=n*l;for(const u in o)s[u]=o[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*i[0],l*i[1]),e}function Uy(e){ko.call(this,e),this._options={},this._redraw=!1,this._dirty=new Vn,this._tempb=new Vn}const Q4=ko.prototype,e1e=(e,t,n)=>new Vn().set(0,0,t,n).translate(-e[0],-e[1]);function t1e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}be(Uy,ko,{initialize(e,t,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:tc(1,1,this._options.type),e&&this._canvas&&(Oo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Q4.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(Q4.resize.call(this,e,t,n,i),this._canvas)Qve(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||le("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),i=this._origin,r=this._width,o=this._height,a=this._dirty,s=e1e(i,r,o);n.save();const l=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):t1e(n,s.intersect(a),i);return this.clear(-i[0],-i[1],r,o),this.draw(n,e,l,t),n.restore(),a.clear(),this},draw(e,t,n,i){if(t.marktype!=="group"&&i!=null&&!i.includes(t.marktype))return;const r=bo[t.marktype];t.clip&&Jye(e,t),r.draw.call(this,e,t,n,i),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,o=this.context();r.type!=="pdf"&&!r.externalContext&&o.clearRect(e,t,n,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,i))}});function O$(e,t){gc.call(this,e,t);const n=this;n._hrefHandler=kA(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=kA(n,(i,r)=>{n.handleTooltip(i,r,i.type!==Hy)})}const kA=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};be(O$,gc,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(EA,this._hrefHandler),i.removeEventListener(CA,this._tooltipHandler),i.removeEventListener(Hy,this._tooltipHandler)),this._svg=i=e&&I$(e,"svg"),i&&(i.addEventListener(EA,this._hrefHandler),i.addEventListener(CA,this._tooltipHandler),i.addEventListener(Hy,this._tooltipHandler)),gc.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const o={type:e,handler:t,listener:kA(this,t)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const qY="aria-hidden",D$="aria-label",L$="role",j$="aria-roledescription",VY="graphics-object",z$="graphics-symbol",YY=(e,t,n)=>({[L$]:e,[j$]:t,[D$]:n||void 0}),n1e=Da(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ej={axis:{desc:"axis",caption:o1e},legend:{desc:"legend",caption:a1e},"title-text":{desc:"title",caption:e=>`Title text '${nj(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${nj(e)}'`}},tj={ariaRole:L$,ariaRoleDescription:j$,description:D$};function ZY(e,t){const n=t.aria===!1;if(e(qY,n||void 0),n||t.description==null)for(const i in tj)e(tj[i],void 0);else{const i=t.mark.marktype;e(D$,t.description),e(L$,t.ariaRole||(i==="group"?VY:z$)),e(j$,t.ariaRoleDescription||`${i} mark`)}}function XY(e){return e.aria===!1?{[qY]:!0}:n1e[e.role]?null:ej[e.role]?r1e(e,ej[e.role]):i1e(e)}function i1e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return YY(n?VY:z$,`${t} mark container`,e.description)}function r1e(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return YY(t.role||z$,t.desc,n.description||i(n))}catch{return null}}function nj(e){return $e(e.text).join(" ")}function o1e(e){const t=e.datum,n=e.orient,i=t.title?KY(e):null,r=e.context,o=r.scales[t.scale].value,a=r.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Wp(s)?"discrete":s} scale with ${dY(a,o,e)}`}function a1e(e){const t=e.datum,n=t.title?KY(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),a=e.context,s=a.scales[r[o[0]]].value,l=a.dataflow.locale();return l1e(i)+(n?` titled '${n}'`:"")+` for ${s1e(o)} with ${dY(l,s,e)}`}function KY(e){try{return $e(Ot(e.items).items[0].text).join(" ")}catch{return null}}function s1e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ot(e)}function l1e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const JY=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u1e=e=>JY(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function B$(){let e="",t="",n="";const i=[],r=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},a=(l,u)=>(u!=null&&(t+=` ${l}="${u1e(u)}"`),s),s={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const h of c)for(const m in h)a(m,h[m]);return s},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),s},attr:a,text:l=>(n+=JY(l),s),toString:()=>e};return s}const QY=e=>eZ(B$(),e)+"";function eZ(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):eZ(e,i)}return e.close()}const Wb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Gb={blend:"mix-blend-mode"},tZ={fill:"none","stroke-miterlimit":10},Dg=0,ij="http://www.w3.org/2000/xmlns/",Xn=By.xmlns;function SS(e){ko.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const _k=ko.prototype;be(SS,ko,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=Kn(e,0,"svg",Xn),this._svg.setAttributeNS(ij,"xmlns",Xn),this._svg.setAttributeNS(ij,"xmlns:xlink",By["xmlns:xlink"]),this._svg.setAttribute("version",By.version),this._svg.setAttribute("class","marks"),Oo(e,1),this._root=Kn(this._svg,Dg,"g",Xn),Du(this._root,tZ),Oo(this._svg,Dg+1)),this.background(this._bgcolor),_k.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),_k.background.apply(this,arguments)},resize(e,t,n,i){return _k.resize.call(this,e,t,n,i),this._svg&&(Du(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Kn(e,Dg,"rect",Xn),Du(n,{width:this._width,height:this._height,fill:t}));const i=QY(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Oo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,o,a,s,l;for(a=0,s=e.length;a<s;++a)if(n=e[a],i=n.mark,i.marktype!==r&&(r=i.marktype,o=bo[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,rj(n,t),i.items.forEach(u=>{u.dirty=t})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,rj(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,i){if(!this.isDirty(t))return t._svg;const r=this._svg,o=t.marktype,a=bo[o],s=t.interactive===!1?"none":null,l=a.tag==="g",u=oj(t,e,n,"g",r);if(o!=="group"&&i!=null&&!i.includes(o))return Oo(u,0),t._svg;u.setAttribute("class",jY(t));const c=XY(t);for(const g in c)ar(u,g,c[g]);l||ar(u,"pointer-events",s),ar(u,"clip-path",t.clip?y$(this,t,t.group):null);let d=null,h=0;const m=g=>{const y=this.isDirty(g),x=oj(g,u,d,a.tag,r);y&&(this._update(a,x,g),l&&d1e(this,x,g,i)),d=x,++h};return a.nested?t.items.length&&m(t.items[0]):ja(t,m),Oo(u,h),u},_update(e,t,n){bl=t,Hi=t.__values__,ZY(q0,n),e.attr(q0,n,this);const i=p1e[e.type];i&&i.call(this,e,t,n),bl&&this.style(bl,n)},style(e,t){if(t!=null){for(const n in Wb){let i=n==="font"?Dv(t):t[n];if(i===Hi[n])continue;const r=Wb[n];i==null?e.removeAttribute(r):(p$(i)&&(i=pY(i,this._defs.gradient,nZ())),e.setAttribute(r,i+"")),Hi[n]=i}for(const n in Gb)b_(e,Gb[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=Kn(e,Dg+1,"defs",Xn)),i=c1e(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=Kn(e,Dg+1,"defs",Xn)),i=f1e(n,t.clipping[r],i);n&&(i===0?(e.removeChild(n),t.el=null):Oo(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function rj(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function c1e(e,t,n){let i,r,o;if(t.gradient==="radial"){let a=Kn(e,n++,"pattern",Xn);Du(a,{id:Ib+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Kn(a,0,"rect",Xn),Du(a,{width:1,height:1,fill:`url(${nZ()}#${t.id})`}),e=Kn(e,n++,"radialGradient",Xn),Du(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Kn(e,n++,"linearGradient",Xn),Du(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=Kn(e,i,"stop",Xn),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Oo(e,i),n}function f1e(e,t,n){let i;return e=Kn(e,n,"clipPath",Xn),e.setAttribute("id",t.id),t.path?(i=Kn(e,0,"path",Xn),i.setAttribute("d",t.path)):(i=Kn(e,0,"rect",Xn),Du(i,{x:0,y:0,width:t.width,height:t.height})),Oo(e,1),n+1}function d1e(e,t,n,i){t=t.lastChild.previousSibling;let r,o=0;ja(n,a=>{r=e.mark(t,a,r,i),++o}),Oo(t,1+o)}function oj(e,t,n,i,r){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=Ou(a,i,Xn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},i==="g"))){const s=Ou(a,"path",Xn);o.appendChild(s),s.__data__=e;const l=Ou(a,"g",Xn);o.appendChild(l),l.__data__=e;const u=Ou(a,"path",Xn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==r||h1e(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function h1e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let bl=null,Hi=null;const p1e={group(e,t,n){const i=bl=t.childNodes[2];Hi=i.__values__,e.foreground(q0,n,this),Hi=t.__values__,bl=t.childNodes[1],e.content(q0,n,this);const r=bl=t.childNodes[0];e.background(q0,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Hi.events&&(ar(i,"pointer-events",o),ar(r,"pointer-events",o),Hi.events=o),n.strokeForeground&&n.stroke){const a=n.fill;ar(i,"display",null),this.style(r,n),ar(r,"stroke",null),a&&(n.fill=null),Hi=i.__values__,this.style(i,n),a&&(n.fill=a),bl=null}else ar(i,"display","none")},image(e,t,n){n.smooth===!1?(b_(t,"image-rendering","optimizeSpeed"),b_(t,"image-rendering","pixelated")):b_(t,"image-rendering",null)},text(e,t,n){const i=Ov(n);let r,o,a,s;de(i)?(o=i.map(l=>mc(n,l)),r=o.join(`
`),r!==Hi.text&&(Oo(t,0),a=t.ownerDocument,s=pc(n),o.forEach((l,u)=>{const c=Ou(a,"tspan",Xn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",s)),t.appendChild(c)}),Hi.text=r)):(o=mc(n,i),o!==Hi.text&&(t.textContent=o,Hi.text=o)),ar(t,"font-family",Dv(n)),ar(t,"font-size",Ds(n)+"px"),ar(t,"font-style",n.fontStyle),ar(t,"font-variant",n.fontVariant),ar(t,"font-weight",n.fontWeight)}};function q0(e,t,n){t!==Hi[e]&&(n?m1e(bl,e,t,n):ar(bl,e,t),Hi[e]=t)}function b_(e,t,n){n!==Hi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Hi[t]=n)}function Du(e,t){for(const n in t)ar(e,n,t[n])}function ar(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function m1e(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function nZ(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function H$(e){ko.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}be(H$,ko,{svg(){return this._text},_render(e){const t=B$();t.open("svg",_t({},By,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",tZ,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=bo[t.marktype],i=n.tag,r=[ZY,n.attr];e.open("g",{class:jY(t),"clip-path":t.clip?y$(this,t,t.group):null},XY(t),{"pointer-events":i!=="g"&&t.interactive===!1?"none":null});const o=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(i,this.attr(t,a,r,i!=="g"?i:null)),i==="text"){const l=Ov(a);if(de(l)){const u={x:0,dy:pc(a)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(mc(a,l[c])).close()}else e.text(mc(a,l))}else if(i==="g"){const l=a.strokeForeground,u=a.fill,c=a.stroke;l&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),ja(a,d=>this.mark(e,d)),e.close(),l&&c?(u&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),u&&(a.fill=u)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):ja(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const r={},o=(a,s,l,u)=>{r[u||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),i&&g1e(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const o=t[r],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Ib+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(const r in n){const o=n[r];e.open("clipPath",{id:r}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function g1e(e,t,n,i,r){let o;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Dv(t),e["font-size"]=Ds(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in Wb){let s=t[a];const l=Wb[a];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(p$(s)&&(s=pY(s,r.gradient,"")),e[l]=s)}for(const a in Gb){const s=t[a];s!=null&&(o=o||[],o.push(`${Gb[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}const va={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function y1e(e){va.svgMarkTypes=e.svgMarkTypes??["text"],va.svgOnTop=e.svgOnTop??!0,va.debug=e.debug??!1}function qb(e){ko.call(this,e),this._svgRenderer=new SS(e),this._canvasRenderer=new Uy(e)}const aj=ko.prototype;be(qb,ko,{initialize(e,t,n,i,r){this._root_el=Kn(e,0,"div");const o=Kn(this._root_el,0,"div"),a=Kn(this._root_el,1,"div");return this._root_el.style.position="relative",va.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=va.svgOnTop?a:o,this._canvasEl=va.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,i,r),this._svgRenderer.initialize(this._svgEl,t,n,i,r),aj.initialize.call(this,e,t,n,i,r)},dirty(e){return va.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const i=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(r=>!va.svgMarkTypes.includes(r));this._svgRenderer.render(e,va.svgMarkTypes),this._canvasRenderer.render(e,i)},resize(e,t,n,i){return aj.resize.call(this,e,t,n,i),this._svgRenderer.resize(e,t,n,i),this._canvasRenderer.resize(e,t,n,i),this},background(e){return va.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function U$(e,t){yc.call(this,e,t)}be(U$,yc,{initialize(e,t,n){const i=Kn(Kn(e,0,"div"),va.svgOnTop?0:1,"div");return yc.prototype.initialize.call(this,i,t,n)}});const iZ="canvas",rZ="hybrid",oZ="png",aZ="svg",sZ="none",Lu={Canvas:iZ,PNG:oZ,SVG:aZ,Hybrid:rZ,None:sZ},ud={};ud[iZ]=ud[oZ]={renderer:Uy,headless:Uy,handler:yc};ud[aZ]={renderer:SS,headless:H$,handler:O$};ud[rZ]={renderer:qb,headless:qb,handler:U$};ud[sZ]={};function CS(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(ud[e]=t,this):ud[e]}function lZ(e,t,n){const i=[],r=new Vn().union(t),o=e.marktype;return o?uZ(e,r,n,i):o==="group"?cZ(e,r,n,i):le("Intersect scene must be mark node or group item.")}function uZ(e,t,n,i){if(v1e(e,t,n)){const r=e.items,o=e.marktype,a=r.length;let s=0;if(o==="group")for(;s<a;++s)cZ(r[s],t,n,i);else for(const l=bo[o].isect;s<a;++s){const u=r[s];fZ(u,t,l)&&i.push(u)}}return i}function v1e(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function cZ(e,t,n,i){n&&n(e.mark)&&fZ(e,t,bo.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let l=0;l<o;++l)uZ(r[l],t,n,i);t.translate(a,s)}return i}function fZ(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const bk=new Vn;function dZ(e){const t=e.clip;if(bt(t))t($v(bk.clear()));else if(t)bk.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(bk)}const x1e=1e-9;function W$(e,t,n){return e===t?!0:n==="path"?hZ(e,t):e instanceof Date&&t instanceof Date?+e==+t:zt(e)&&zt(t)?Math.abs(e-t)<=x1e:!e||!t||!Oe(e)&&!Oe(t)?e==t:_1e(e,t)}function hZ(e,t){return W$(Gp(e),Gp(t))}function _1e(e,t){var n=Object.keys(e),i=Object.keys(t),r,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(r=n[o],!W$(e[r],t[r],r))return!1;return typeof e==typeof t}function b1e(){bY(),G0e()}const Yp="top",Ea="left",ka="right",vc="bottom",w1e="top-left",S1e="top-right",C1e="bottom-left",E1e="bottom-right",G$="start",RA="middle",lr="end",k1e="x",R1e="y",ES="group",q$="axis",V$="title",T1e="frame",A1e="scope",Y$="legend",pZ="row-header",mZ="row-footer",gZ="row-title",yZ="column-header",vZ="column-footer",xZ="column-title",M1e="padding",F1e="symbol",_Z="fit",bZ="fit-x",wZ="fit-y",P1e="pad",Z$="none",xx="all",TA="each",X$="flush",ju="column",zu="row";function SZ(e){ne.call(this,null,e)}be(SZ,ne,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=bo[r],a=o.bound;let s=i.bounds,l;if(o.nested)i.items.length&&n.dirty(i.items[0]),s=_x(i,a),i.items.forEach(u=>{u.bounds.clear().union(s)});else if(r===ES||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),s.clear(),i.items.forEach(u=>s.union(_x(u,a))),i.role){case q$:case Y$:case V$:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{s.union(_x(u,a))}),t.visit(t.MOD,u=>{l=l||s.alignsWith(u.bounds),n.dirty(u),s.union(_x(u,a))}),l&&(s.clear(),i.items.forEach(u=>s.union(u.bounds)));return dZ(i),t.modifies("bounds")}});function _x(e,t,n){return t(e.bounds.clear(),e,n)}const sj=":vega_identifier:";function K$(e){ne.call(this,0,e)}K$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};be(K$,ne,{transform(e,t){const n=N1e(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}});function N1e(e){return e._signals[sj]||(e._signals[sj]=e.add(0))}function CZ(e){ne.call(this,null,e)}be(CZ,ne,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,$1e(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===ES?mS:pS;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function $1e(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function EZ(e){ne.call(this,null,e)}const lj={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!kZ(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},kZ=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),uj=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,o;n<i;r=o,++n)if(kZ(r,o=e[n].bounds,t))return!0},I1e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},O1e=(e,t,n)=>{var i=e.range(),r=new Vn;return t===Yp||t===vc?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)},cj=e=>(e.forEach(t=>t.opacity=1),e),fj=(e,t)=>e.reflow(t.modified()).modifies("opacity");be(EZ,ne,{transform(e,t){const n=lj[e.method]||lj.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,o,a;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(cj(r),t=fj(t,e)),t;if(r=r.filter(I1e),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=cj(r),t=fj(t,e),o.length>=3&&uj(o,i)){do o=n(o,i);while(o.length>=3&&uj(o,i));o.length<3&&!Ot(r).opacity&&(o.length>1&&(Ot(o).opacity=0),Ot(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=O1e(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{a(l)||(l.opacity=0)}));const s=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&s.union(l.bounds)}),t}});function RZ(e){ne.call(this,null,e)}be(RZ,ne,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Bi=new Vn;function ep(e,t,n){return e[t]===n?0:(e[t]=n,1)}function D1e(e){var t=e.items[0].orient;return t===Ea||t===ka}function L1e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function j1e(e,t,n,i){var r=t.items[0],o=r.datum,a=r.translate!=null?r.translate:.5,s=r.orient,l=L1e(o),u=r.range,c=r.offset,d=r.position,h=r.minExtent,m=r.maxExtent,g=o.title&&r.items[l[2]].items[0],y=r.titlePadding,x=r.bounds,b=g&&F$(g),w=0,S=0,k,R;switch(Bi.clear().union(x),x.clear(),(k=l[0])>-1&&x.union(r.items[k].bounds),(k=l[1])>-1&&x.union(r.items[k].bounds),s){case Yp:w=d||0,S=-c,R=Math.max(h,Math.min(m,-x.y1)),x.add(0,-R).add(u,0),g&&bx(e,g,R,y,b,0,-1,x);break;case Ea:w=-c,S=d||0,R=Math.max(h,Math.min(m,-x.x1)),x.add(-R,0).add(0,u),g&&bx(e,g,R,y,b,1,-1,x);break;case ka:w=n+c,S=d||0,R=Math.max(h,Math.min(m,x.x2)),x.add(0,0).add(R,u),g&&bx(e,g,R,y,b,1,1,x);break;case vc:w=d||0,S=i+c,R=Math.max(h,Math.min(m,x.y2)),x.add(0,0).add(u,R),g&&bx(e,g,R,y,0,0,1,x);break;default:w=r.x,S=r.y}return ql(x.translate(w,S),r),ep(r,"x",w+a)|ep(r,"y",S+a)&&(r.bounds=Bi,e.dirty(r),r.bounds=x,e.dirty(r)),r.mark.bounds.clear().union(x)}function bx(e,t,n,i,r,o,a,s){const l=t.bounds;if(t.auto){const u=a*(n+r+i);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}s.union(l)}const dj=(e,t)=>Math.floor(Math.min(e,t)),hj=(e,t)=>Math.ceil(Math.max(e,t));function z1e(e){var t=e.items,n=t.length,i=0,r,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],o=r.items,r.marktype===ES)switch(r.role){case q$:case Y$:case V$:break;case pZ:a.rowheaders.push(...o);break;case mZ:a.rowfooters.push(...o);break;case yZ:a.colheaders.push(...o);break;case vZ:a.colfooters.push(...o);break;case gZ:a.rowtitle=o[0];break;case xZ:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function B1e(e){return new Vn().set(0,0,e.width||0,e.height||0)}function H1e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function xn(e,t,n){const i=Oe(e)?e[t]:e;return i??(n!==void 0?n:0)}function pj(e){return e<0?Math.ceil(-e):0}function TZ(e,t,n){var i=!n.nodirty,r=n.bounds===X$?B1e:H1e,o=Bi.set(0,0,0,0),a=xn(n.align,ju),s=xn(n.align,zu),l=xn(n.padding,ju),u=xn(n.padding,zu),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),h=t.length,m=Array(h),g=Array(c),y=0,x=Array(h),b=Array(d),w=0,S=Array(h),k=Array(h),R=Array(h),M,T,N,z,H,U,X,B,O,j,q;for(T=0;T<c;++T)g[T]=0;for(T=0;T<d;++T)b[T]=0;for(T=0;T<h;++T)U=t[T],H=R[T]=r(U),U.x=U.x||0,S[T]=0,U.y=U.y||0,k[T]=0,N=T%c,z=~~(T/c),y=Math.max(y,X=Math.ceil(H.x2)),w=Math.max(w,B=Math.ceil(H.y2)),g[N]=Math.max(g[N],X),b[z]=Math.max(b[z],B),m[T]=l+pj(H.x1),x[T]=u+pj(H.y1),i&&e.dirty(t[T]);for(T=0;T<h;++T)T%c===0&&(m[T]=0),T<c&&(x[T]=0);if(a===TA)for(N=1;N<c;++N){for(q=0,T=N;T<h;T+=c)q<m[T]&&(q=m[T]);for(T=N;T<h;T+=c)m[T]=q+g[N-1]}else if(a===xx){for(q=0,T=0;T<h;++T)T%c&&q<m[T]&&(q=m[T]);for(T=0;T<h;++T)T%c&&(m[T]=q+y)}else for(a=!1,N=1;N<c;++N)for(T=N;T<h;T+=c)m[T]+=g[N-1];if(s===TA)for(z=1;z<d;++z){for(q=0,T=z*c,M=T+c;T<M;++T)q<x[T]&&(q=x[T]);for(T=z*c;T<M;++T)x[T]=q+b[z-1]}else if(s===xx){for(q=0,T=c;T<h;++T)q<x[T]&&(q=x[T]);for(T=c;T<h;++T)x[T]=q+w}else for(s=!1,z=1;z<d;++z)for(T=z*c,M=T+c;T<M;++T)x[T]+=b[z-1];for(O=0,T=0;T<h;++T)O=m[T]+(T%c?O:0),S[T]+=O-t[T].x;for(N=0;N<c;++N)for(j=0,T=N;T<h;T+=c)j+=x[T],k[T]+=j-t[T].y;if(a&&xn(n.center,ju)&&d>1)for(T=0;T<h;++T)H=a===xx?y:g[T%c],O=H-R[T].x2-t[T].x-S[T],O>0&&(S[T]+=O/2);if(s&&xn(n.center,zu)&&c!==1)for(T=0;T<h;++T)H=s===xx?w:b[~~(T/c)],j=H-R[T].y2-t[T].y-k[T],j>0&&(k[T]+=j/2);for(T=0;T<h;++T)o.union(R[T].translate(S[T],k[T]));switch(O=xn(n.anchor,k1e),j=xn(n.anchor,R1e),xn(n.anchor,ju)){case lr:O-=o.width();break;case RA:O-=o.width()/2}switch(xn(n.anchor,zu)){case lr:j-=o.height();break;case RA:j-=o.height()/2}for(O=Math.round(O),j=Math.round(j),o.clear(),T=0;T<h;++T)t[T].mark.bounds.clear();for(T=0;T<h;++T)U=t[T],U.x+=S[T]+=O,U.y+=k[T]+=j,o.union(U.mark.bounds.union(U.bounds.translate(S[T],k[T]))),i&&e.dirty(U);return o}function U1e(e,t,n){var i=z1e(t),r=i.marks,o=n.bounds===X$?W1e:G1e,a=n.offset,s=n.columns||r.length,l=s<=0?1:Math.ceil(r.length/s),u=l*s,c,d,h,m,g,y,x;const b=TZ(e,r,n);b.empty()&&b.set(0,0,0,0),i.rowheaders&&(y=xn(n.headerBand,zu,null),c=wx(e,i.rowheaders,r,s,l,-xn(a,"rowHeader"),dj,0,o,"x1",0,s,1,y)),i.colheaders&&(y=xn(n.headerBand,ju,null),d=wx(e,i.colheaders,r,s,s,-xn(a,"columnHeader"),dj,1,o,"y1",0,1,s,y)),i.rowfooters&&(y=xn(n.footerBand,zu,null),h=wx(e,i.rowfooters,r,s,l,xn(a,"rowFooter"),hj,0,o,"x2",s-1,s,1,y)),i.colfooters&&(y=xn(n.footerBand,ju,null),m=wx(e,i.colfooters,r,s,s,xn(a,"columnFooter"),hj,1,o,"y2",u-s,1,s,y)),i.rowtitle&&(g=xn(n.titleAnchor,zu),x=xn(a,"rowTitle"),x=g===lr?h+x:c-x,y=xn(n.titleBand,zu,.5),mj(e,i.rowtitle,x,0,b,y)),i.coltitle&&(g=xn(n.titleAnchor,ju),x=xn(a,"columnTitle"),x=g===lr?m+x:d-x,y=xn(n.titleBand,ju,.5),mj(e,i.coltitle,x,1,b,y))}function W1e(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function G1e(e,t){return e.bounds[t]}function wx(e,t,n,i,r,o,a,s,l,u,c,d,h,m){var g=n.length,y=0,x=0,b,w,S,k,R,M,T,N,z;if(!g)return y;for(b=c;b<g;b+=d)n[b]&&(y=a(y,l(n[b],u)));if(!t.length)return y;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),y+=o,w=0,k=t.length;w<k;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(b=c,w=0,k=t.length;w<k;++w,b+=d){for(M=t[w],R=M.mark.bounds,S=b;S>=0&&(T=n[S])==null;S-=h);s?(N=m==null?T.x:Math.round(T.bounds.x1+m*T.bounds.width()),z=y):(N=y,z=m==null?T.y:Math.round(T.bounds.y1+m*T.bounds.height())),R.union(M.bounds.translate(N-(M.x||0),z-(M.y||0))),M.x=N,M.y=z,e.dirty(M),x=a(x,R[u])}return x}function mj(e,t,n,i,r,o){if(t){e.dirty(t);var a=n,s=n;i?a=Math.round(r.x1+o*r.width()):s=Math.round(r.y1+o*r.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function q1e(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function V1e(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Y1e(e,t,n,i,r,o,a){const s=q1e(n,t),l=V1e(e,s("offset",0)),u=s("anchor",G$),c=u===lr?1:u===RA?.5:0,d={align:TA,bounds:s("bounds",X$),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case Ea:d.anchor={x:Math.floor(i.x1)-l,column:lr,y:c*(a||i.height()+2*i.y1),row:u};break;case ka:d.anchor={x:Math.ceil(i.x2)+l,y:c*(a||i.height()+2*i.y1),row:u};break;case Yp:d.anchor={y:Math.floor(r.y1)-l,row:lr,x:c*(o||r.width()+2*r.x1),column:u};break;case vc:d.anchor={y:Math.ceil(r.y2)+l,x:c*(o||r.width()+2*r.x1),column:u};break;case w1e:d.anchor={x:l,y:l};break;case S1e:d.anchor={x:o-l,y:l,column:lr};break;case C1e:d.anchor={x:l,y:a-l,row:lr};break;case E1e:d.anchor={x:o-l,y:a-l,column:lr,row:lr};break}return d}function Z1e(e,t){var n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,a=n.x,s=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),K1e(e,n,n.items[0].items[0]),o=X1e(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),i.type===F1e&&J1e(n.items[0].items[0].items[0].items),r!==Z$&&(n.x=a=0,n.y=s=0),n.width=l,n.height=u,ql(o.set(a,s,a+l,s+u),n),n.mark.bounds.clear().union(o),n}function X1e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function K1e(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(!t.datum.title)(r||o)&&Lg(e,n,r,o);else{var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=i-a.x,c=i-a.y;switch(a.orient){case Ea:r+=Math.ceil(a.bounds.width())+l;break;case ka:case vc:break;default:o+=a.bounds.height()+l}switch((r||o)&&Lg(e,n,r,o),a.orient){case Ea:c+=Sh(t,n,a,s,1,1);break;case ka:u+=Sh(t,n,a,lr,0,0)+l,c+=Sh(t,n,a,s,1,1);break;case vc:u+=Sh(t,n,a,s,0,0),c+=Sh(t,n,a,lr,-1,0,1)+l;break;default:u+=Sh(t,n,a,s,0,0)}(u||c)&&Lg(e,a,u,c),(u=Math.round(a.bounds.x1-i))<0&&(Lg(e,n,-u,0),Lg(e,a,-u,0))}}function Sh(e,t,n,i,r,o,a){const s=e.datum.type!=="symbol",l=n.datum.vgrad,u=s&&(o||!l)&&!a?t.items[0]:t,c=u.bounds[r?"y2":"x2"]-e.padding,d=l&&o?c:0,h=l&&o?0:c,m=r<=0?0:F$(n);return Math.round(i===G$?d:i===lr?h-m:.5*(c-m))}function Lg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function J1e(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Q1e(e,t,n,i,r){var o=t.items[0],a=o.frame,s=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],m=s===Ea||s===ka?i:n,g=0,y=0,x=0,b=0,w=0,S;if(a!==ES?s===Ea?(g=r.y2,m=r.y1):s===ka?(g=r.y1,m=r.y2):(g=r.x1,m=r.x2):s===Ea&&(g=i,m=0),S=l===G$?g:l===lr?m:(g+m)/2,h&&h.text){switch(s){case Yp:case vc:w=d.bounds.height()+c;break;case Ea:b=d.bounds.width()+c;break;case ka:b=-d.bounds.width()-c;break}Bi.clear().union(h.bounds),Bi.translate(b-(h.x||0),w-(h.y||0)),ep(h,"x",b)|ep(h,"y",w)&&(e.dirty(h),h.bounds.clear().union(Bi),h.mark.bounds.clear().union(Bi),e.dirty(h)),Bi.clear().union(h.bounds)}else Bi.clear();switch(Bi.union(d.bounds),s){case Yp:y=S,x=r.y1-Bi.height()-u;break;case Ea:y=r.x1-Bi.width()-u,x=S;break;case ka:y=r.x2+Bi.width()+u,x=S;break;case vc:y=S,x=r.y2+u;break;default:y=o.x,x=o.y}return ep(o,"x",y)|ep(o,"y",x)&&(Bi.translate(y,x),e.dirty(o),o.bounds.clear().union(Bi),t.bounds.clear().union(Bi),e.dirty(o)),o.bounds}function AZ(e){ne.call(this,null,e)}be(AZ,ne,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&U1e(n,i,e.layout),txe(n,i,e)}),exe(e.mark.group)?t.reflow():t}});function exe(e){return e&&e.mark.role!=="legend-entry"}function txe(e,t,n){var i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Vn().set(0,0,r,o),s=a.clone(),l=a.clone(),u=[],c,d,h,m,g,y;for(g=0,y=i.length;g<y;++g)switch(d=i[g],d.role){case q$:m=D1e(d)?s:l,m.union(j1e(e,d,r,o));break;case V$:c=d;break;case Y$:u.push(Z1e(e,d));break;case T1e:case A1e:case pZ:case mZ:case gZ:case yZ:case vZ:case xZ:s.union(d.bounds),l.union(d.bounds);break;default:a.union(d.bounds)}if(u.length){const x={};u.forEach(b=>{h=b.orient||ka,h!==Z$&&(x[h]||(x[h]=[])).push(b)});for(const b in x){const w=x[b];TZ(e,w,Y1e(w,b,n.legends,s,l,r,o))}u.forEach(b=>{const w=b.bounds;if(w.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=w,e.dirty(b)),n.autosize&&(n.autosize.type===_Z||n.autosize.type===bZ||n.autosize.type===wZ))switch(b.orient){case Ea:case ka:a.add(w.x1,0).add(w.x2,0);break;case Yp:case vc:a.add(0,w.y1).add(0,w.y2)}else a.union(w)})}a.union(s).union(l),c&&a.union(Q1e(e,c,r,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),nxe(e,t,a,n)}function nxe(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),m=Math.max(0,Math.ceil(n.y2-c));if(r.contains===M1e){const g=e.padding();a-=g.left+g.right,s-=g.top+g.bottom}o===Z$?(u=0,d=0,l=a,c=s):o===_Z?(l=Math.max(0,a-u-h),c=Math.max(0,s-d-m)):o===bZ?(l=Math.max(0,a-u-h),s=c+d+m):o===wZ?(a=l+u+h,c=Math.max(0,s-d-m)):o===P1e&&(a=l+u+h,s=c+d+m),e._resizeView(a,s,l,c,[u,d],r.resize)}const ixe=Object.freeze(Object.defineProperty({__proto__:null,bound:SZ,identifier:K$,mark:CZ,overlap:EZ,render:RZ,viewlayout:AZ},Symbol.toStringTag,{value:"Module"}));function MZ(e){ne.call(this,null,e)}be(MZ,ne,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=d$(o,a,e.minstep),l=e.format||sY(n,o,s,e.formatSpecifier,e.formatType,!!e.values),u=e.values?aY(o,e.values,s):h$(o,s);return r&&(i.rem=r),r=u.map((c,d)=>qt({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(qt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function FZ(e){ne.call(this,null,e)}function rxe(){return qt({})}function oxe(e){const t=Cm().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}be(FZ,ne,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||rxe,o=e.key||Qe,a=this.value;return de(i.encode)&&(i.encode=null),a&&(e.modified("key")||t.modified(o))&&le("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=oxe(o)),t.visit(t.ADD,s=>{const l=o(s);let u=a.get(l);u?u.exit?(a.empty--,i.add.push(u)):i.mod.push(u):(u=r(s),a.set(l,u),i.add.push(u)),u.datum=s,u.exit=!1}),t.visit(t.MOD,s=>{const l=o(s),u=a.get(l);u&&(u.datum=s,i.mod.push(u))}),t.visit(t.REM,s=>{const l=o(s),u=a.get(l);s===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),i}});function PZ(e){ne.call(this,null,e)}be(PZ,ne,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(de(o))if(n.changed()||o.every(d=>r[d]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=r.update||hu,l=r.enter||hu,u=r.exit||hu,c=(o&&!a?r[o]:s)||hu;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),s(d,e)}),n.modifies(l.output),n.modifies(s.output),c!==hu&&c!==s&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==hu&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),a||c!==hu){const d=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(d,h=>{const m=l(h,e)||i;(c(h,e)||m)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):t.visit(d,h=>{(c(h,e)||i)&&n.mod.push(h)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function NZ(e){ne.call(this,[],e)}be(NZ,ne,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||p_,a=e.scale,s=+e.limit,l=d$(a,e.count==null?5:e.count,e.minstep),u=!!e.values||o===p_,c=e.format||fY(n,a,l,o,e.formatSpecifier,e.formatType,u),d=e.values||cY(a,l),h,m,g,y,x;return r&&(i.rem=r),o===p_?(s&&d.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,s-1),x=!0):r=d,bt(g=e.size)?(!e.values&&a(r[0])===0&&(r=r.slice(1)),y=r.reduce((b,w)=>Math.max(b,g(w,e)),0)):g=er(y=g||8),r=r.map((b,w)=>qt({index:w,label:c(b,w,r),value:b,offset:y,size:g(b,e)})),x&&(x=d[r.length],r.push(qt({index:r.length,label:`${d.length-r.length} entries`,value:x,offset:y,size:g(x,e)})))):o===P0e?(h=a.domain(),m=iY(a,h[0],Ot(h)),d.length<3&&!e.values&&h[0]!==Ot(h)&&(d=[h[0],Ot(h)]),r=d.map((b,w)=>qt({index:w,label:c(b,w,d),value:b,perc:m(b)}))):(g=d.length-1,m=U0e(a),r=d.map((b,w)=>qt({index:w,label:c(b,w,d),value:b,perc:w?m(b):0,perc2:w===g?1:m(d[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const axe=e=>e.source.x,sxe=e=>e.source.y,lxe=e=>e.target.x,uxe=e=>e.target.y;function J$(e){ne.call(this,{},e)}J$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};be(J$,ne,{transform(e,t){var n=e.sourceX||axe,i=e.sourceY||sxe,r=e.targetX||lxe,o=e.targetY||uxe,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=gj.get(l+"-"+s)||gj.get(l);return u||le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=u(n(c),i(c),r(c),o(c))}),t.reflow(e.modified()).modifies(a)}});const $Z=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,cxe=(e,t,n,i)=>$Z(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),IZ=(e,t,n,i)=>{var r=n-e,o=i-t,a=Math.hypot(r,o)/2,s=180*Math.atan2(o,r)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+i},fxe=(e,t,n,i)=>IZ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),OZ=(e,t,n,i)=>{const r=n-e,o=i-t,a=.2*(r+o),s=.2*(o-r);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(i-a)+" "+n+","+i},dxe=(e,t,n,i)=>OZ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),hxe=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,pxe=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,mxe=(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*s+"L"+i*a+","+i*s},gxe=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},yxe=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},vxe=(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*a+","+l*s+" "+i*a+","+i*s},gj=Cm({line:$Z,"line-radial":cxe,arc:IZ,"arc-radial":fxe,curve:OZ,"curve-radial":dxe,"orthogonal-horizontal":hxe,"orthogonal-vertical":pxe,"orthogonal-radial":mxe,"diagonal-horizontal":gxe,"diagonal-vertical":yxe,"diagonal-radial":vxe});function Q$(e){ne.call(this,null,e)}Q$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};be(Q$,ne,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],o=e.field||bm,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,d=a,h=(s-a)/eG(u),m=fo(c),g,y,x;for(e.sort&&m.sort((b,w)=>u[b]-u[w]),g=0;g<c;++g)x=u[m[g]],y=l[m[g]],y[i]=d,y[r]=d+=x*h;return this.value=u,t.reflow(e.modified()).modifies(n)}});const xxe=5;function _xe(e){const t=e.type;return!e.bins&&(t===Hp||t===Rv||t===Tv)}function DZ(e){return u$(e)&&e!==ws}const bxe=Da(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function LZ(e){ne.call(this,null,e),this.modified(!0)}be(LZ,ne,{transform(e,t){var n=t.dataflow,i=this.value,r=wxe(e);(!i||r!==i.type)&&(this.value=i=Ut(r)());for(r in e)if(!bxe[r]){if(r==="padding"&&DZ(i.type))continue;bt(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Txe(i,e,Rxe(i,e,Cxe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function wxe(e){var t=e.type,n="",i;return t===ws?ws+"-"+Hp:(Sxe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?ws+"-":i===3?Pm+"-":""),(n+t||Hp).toLowerCase())}function Sxe(e){const t=e.type;return u$(t)&&t!==sd&&t!==ld&&(e.scheme||e.range&&e.range.length&&e.range.every(Ie))}function Cxe(e,t,n){const i=Exe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,o=e.type,a=t.zero||t.zero===void 0&&_xe(e),s,l;if(!r)return 0;if(DZ(o)&&t.padding&&r[0]!==Ot(r)&&(r=kxe(o,r,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(r=r.slice()).length-1||1,a&&(r[0]>0&&(r[0]=0),r[s]<0&&(r[s]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[s]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>r[s]?s+1:l<r[0]?0:s;u!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return e.domain(jZ(o,r,n)),o===o$&&e.unknown(t.domainImplicit?aA:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&d$(e,t.nice)||null),r.length}function Exe(e,t,n){return t?(e.domain(jZ(e.type,t,n)),t.length):-1}function kxe(e,t,n,i,r,o){var a=Math.abs(Ot(n)-n[0]),s=a/(a-2*i),l=e===zl?RP(t,null,s):e===Tv?yb(t,null,s,.5):e===Rv?yb(t,null,s,r||1):e===uS?TP(t,null,s,o||1):kP(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function jZ(e,t,n){if(JV(e)){var i=Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+we(t))}return t}function Rxe(e,t,n){let i=t.bins;if(i&&!de(i)){const r=e.domain(),o=r[0],a=Ot(r),s=i.step;let l=i.start==null?o:i.start,u=i.stop==null?a:i.stop;s||le("Scale bins parameter missing step property."),l<o&&(l=s*Math.ceil(o/s)),u>a&&(u=s*Math.floor(a/s)),i=fo(l,u+s/2,s)}return i?e.bins=i:e.bins&&delete e.bins,e.type===a$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Txe(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Axe(i,t,n);else if(t.scheme&&(o=Mxe(i,t,n),bt(o))){if(e.interpolator)return e.interpolator(o);le(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&QV(i))return e.interpolator(dS(AA(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(c$(t.interpolate,t.interpolateGamma)):bt(e.round)?e.round(r):bt(e.rangeRound)&&e.interpolate(r?Ev:Oc),o&&e.range(AA(o,t.reverse))}function Axe(e,t,n){e!==qV&&e!==hA&&le("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===hA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*r$(n,r,i)]}function Mxe(e,t,n){var i=t.schemeExtent,r,o;return de(t.scheme)?o=dS(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),o=f$(r),o||le(`Unrecognized scheme name: ${t.scheme}`)),n=e===fS?n+1:e===a$?n-1:e===Up||e===cS?+t.schemeCount||xxe:n,QV(e)?yj(o,i,t.reverse):bt(o)?nY(yj(o,i),n):e===o$?o:o.slice(0,n)}function yj(e,t,n){return bt(e)&&(t||n)?tY(e,AA(t||[0,1],n)):e}function AA(e,t){return t?e.slice().reverse():e}function zZ(e){ne.call(this,null,e)}be(zZ,ne,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Id(e.sort)),this.modified(n),t}});const vj="zero",BZ="center",HZ="normalize",UZ=["y0","y1"];function eI(e){ne.call(this,null,e)}eI.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:vj,values:[vj,BZ,HZ]},{name:"as",type:"string",array:!0,length:2,default:UZ}]};be(eI,ne,{transform(e,t){var n=e.as||UZ,i=n[0],r=n[1],o=Id(e.sort),a=e.field||bm,s=e.offset===BZ?Fxe:e.offset===HZ?Pxe:Nxe,l,u,c,d;for(l=$xe(t.source,e.groupby,o,a),u=0,c=l.length,d=l.max;u<c;++u)s(l[u],d,a,i,r);return t.reflow(e.modified()).modifies(n)}});function Fxe(e,t,n,i,r){for(var o=(t-e.sum)/2,a=e.length,s=0,l;s<a;++s)l=e[s],l[i]=o,l[r]=o+=Math.abs(n(l))}function Pxe(e,t,n,i,r){for(var o=1/e.sum,a=0,s=e.length,l=0,u=0,c;l<s;++l)c=e[l],c[i]=a,c[r]=a=o*(u+=Math.abs(n(c)))}function Nxe(e,t,n,i,r){for(var o=0,a=0,s=e.length,l=0,u,c;l<s;++l)c=e[l],u=+n(c),u<0?(c[i]=a,c[r]=a+=u):(c[i]=o,c[r]=o+=u)}function $xe(e,t,n,i){var r=[],o=y=>y(c),a,s,l,u,c,d,h,m,g;if(t==null)r.push(e.slice());else for(a={},s=0,l=e.length;s<l;++s)c=e[s],d=t.map(o),h=a[d],h||(a[d]=h=[],r.push(h)),h.push(c);for(d=0,g=0,u=r.length;d<u;++d){for(h=r[d],s=0,m=0,l=h.length;s<l;++s)m+=Math.abs(i(h[s]));h.sum=m,m>g&&(g=m),n&&h.sort(n)}return r.max=g,r}const Ixe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:MZ,datajoin:FZ,encode:PZ,legendentries:NZ,linkpath:J$,pie:Q$,scale:LZ,sortitems:zZ,stack:eI},Symbol.toStringTag,{value:"Module"}));var it=1e-6,Vb=1e-12,Rt=Math.PI,$n=Rt/2,Yb=Rt/4,vr=Rt*2,Dn=180/Rt,Ct=Rt/180,It=Math.abs,$m=Math.atan,ea=Math.atan2,rt=Math.cos,Sx=Math.ceil,WZ=Math.exp,MA=Math.hypot,Zb=Math.log,wk=Math.pow,et=Math.sin,zo=Math.sign||function(e){return e>0?1:e<0?-1:0},xr=Math.sqrt,tI=Math.tan;function GZ(e){return e>1?0:e<-1?Rt:Math.acos(e)}function Xr(e){return e>1?$n:e<-1?-$n:Math.asin(e)}function Ei(){}function Xb(e,t){e&&_j.hasOwnProperty(e.type)&&_j[e.type](e,t)}var xj={Feature:function(e,t){Xb(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Xb(n[i].geometry,t)}},_j={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){FA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)FA(n[i],t,0)},Polygon:function(e,t){bj(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)bj(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Xb(n[i],t)}};function FA(e,t,n){var i=-1,r=e.length-n,o;for(t.lineStart();++i<r;)o=e[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function bj(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)FA(e[n],t,1);t.polygonEnd()}function dl(e,t){e&&xj.hasOwnProperty(e.type)?xj[e.type](e,t):Xb(e,t)}var Kb=new mr,Jb=new mr,qZ,VZ,PA,NA,$A,Ms={point:Ei,lineStart:Ei,lineEnd:Ei,polygonStart:function(){Kb=new mr,Ms.lineStart=Oxe,Ms.lineEnd=Dxe},polygonEnd:function(){var e=+Kb;Jb.add(e<0?vr+e:e),this.lineStart=this.lineEnd=this.point=Ei},sphere:function(){Jb.add(vr)}};function Oxe(){Ms.point=Lxe}function Dxe(){YZ(qZ,VZ)}function Lxe(e,t){Ms.point=YZ,qZ=e,VZ=t,e*=Ct,t*=Ct,PA=e,NA=rt(t=t/2+Yb),$A=et(t)}function YZ(e,t){e*=Ct,t*=Ct,t=t/2+Yb;var n=e-PA,i=n>=0?1:-1,r=i*n,o=rt(t),a=et(t),s=$A*a,l=NA*o+s*rt(r),u=s*i*et(r);Kb.add(ea(u,l)),PA=e,NA=o,$A=a}function jxe(e){return Jb=new mr,dl(e,Ms),Jb*2}function Qb(e){return[ea(e[1],e[0]),Xr(e[2])]}function cd(e){var t=e[0],n=e[1],i=rt(n);return[i*rt(t),i*et(t),et(n)]}function Cx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Sk(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ex(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ew(e){var t=xr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var En,Or,Mn,ao,bf,ZZ,XZ,mp,V0,wu,Bl,ll={point:IA,lineStart:wj,lineEnd:Sj,polygonStart:function(){ll.point=JZ,ll.lineStart=zxe,ll.lineEnd=Bxe,V0=new mr,Ms.polygonStart()},polygonEnd:function(){Ms.polygonEnd(),ll.point=IA,ll.lineStart=wj,ll.lineEnd=Sj,Kb<0?(En=-(Mn=180),Or=-(ao=90)):V0>it?ao=90:V0<-it&&(Or=-90),Bl[0]=En,Bl[1]=Mn},sphere:function(){En=-(Mn=180),Or=-(ao=90)}};function IA(e,t){wu.push(Bl=[En=e,Mn=e]),t<Or&&(Or=t),t>ao&&(ao=t)}function KZ(e,t){var n=cd([e*Ct,t*Ct]);if(mp){var i=Zp(mp,n),r=[i[1],-i[0],0],o=Zp(r,i);ew(o),o=Qb(o);var a=e-bf,s=a>0?1:-1,l=o[0]*Dn*s,u,c=It(a)>180;c^(s*bf<l&&l<s*e)?(u=o[1]*Dn,u>ao&&(ao=u)):(l=(l+360)%360-180,c^(s*bf<l&&l<s*e)?(u=-o[1]*Dn,u<Or&&(Or=u)):(t<Or&&(Or=t),t>ao&&(ao=t))),c?e<bf?oo(En,e)>oo(En,Mn)&&(Mn=e):oo(e,Mn)>oo(En,Mn)&&(En=e):Mn>=En?(e<En&&(En=e),e>Mn&&(Mn=e)):e>bf?oo(En,e)>oo(En,Mn)&&(Mn=e):oo(e,Mn)>oo(En,Mn)&&(En=e)}else wu.push(Bl=[En=e,Mn=e]);t<Or&&(Or=t),t>ao&&(ao=t),mp=n,bf=e}function wj(){ll.point=KZ}function Sj(){Bl[0]=En,Bl[1]=Mn,ll.point=IA,mp=null}function JZ(e,t){if(mp){var n=e-bf;V0.add(It(n)>180?n+(n>0?360:-360):n)}else ZZ=e,XZ=t;Ms.point(e,t),KZ(e,t)}function zxe(){Ms.lineStart()}function Bxe(){JZ(ZZ,XZ),Ms.lineEnd(),It(V0)>it&&(En=-(Mn=180)),Bl[0]=En,Bl[1]=Mn,mp=null}function oo(e,t){return(t-=e)<0?t+360:t}function Hxe(e,t){return e[0]-t[0]}function Cj(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Uxe(e){var t,n,i,r,o,a,s;if(ao=Mn=-(En=Or=1/0),wu=[],dl(e,ll),n=wu.length){for(wu.sort(Hxe),t=1,i=wu[0],o=[i];t<n;++t)r=wu[t],Cj(i,r[0])||Cj(i,r[1])?(oo(i[0],r[1])>oo(i[0],i[1])&&(i[1]=r[1]),oo(r[0],i[1])>oo(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,n=o.length-1,t=0,i=o[n];t<=n;i=r,++t)r=o[t],(s=oo(i[1],r[0]))>a&&(a=s,En=r[0],Mn=i[1])}return wu=Bl=null,En===1/0||Or===1/0?[[NaN,NaN],[NaN,NaN]]:[[En,Or],[Mn,ao]]}var g0,tw,nw,iw,rw,ow,aw,sw,OA,DA,LA,QZ,eX,ur,cr,fr,Ra={sphere:Ei,point:nI,lineStart:Ej,lineEnd:kj,polygonStart:function(){Ra.lineStart=qxe,Ra.lineEnd=Vxe},polygonEnd:function(){Ra.lineStart=Ej,Ra.lineEnd=kj}};function nI(e,t){e*=Ct,t*=Ct;var n=rt(t);Lv(n*rt(e),n*et(e),et(t))}function Lv(e,t,n){++g0,nw+=(e-nw)/g0,iw+=(t-iw)/g0,rw+=(n-rw)/g0}function Ej(){Ra.point=Wxe}function Wxe(e,t){e*=Ct,t*=Ct;var n=rt(t);ur=n*rt(e),cr=n*et(e),fr=et(t),Ra.point=Gxe,Lv(ur,cr,fr)}function Gxe(e,t){e*=Ct,t*=Ct;var n=rt(t),i=n*rt(e),r=n*et(e),o=et(t),a=ea(xr((a=cr*o-fr*r)*a+(a=fr*i-ur*o)*a+(a=ur*r-cr*i)*a),ur*i+cr*r+fr*o);tw+=a,ow+=a*(ur+(ur=i)),aw+=a*(cr+(cr=r)),sw+=a*(fr+(fr=o)),Lv(ur,cr,fr)}function kj(){Ra.point=nI}function qxe(){Ra.point=Yxe}function Vxe(){tX(QZ,eX),Ra.point=nI}function Yxe(e,t){QZ=e,eX=t,e*=Ct,t*=Ct,Ra.point=tX;var n=rt(t);ur=n*rt(e),cr=n*et(e),fr=et(t),Lv(ur,cr,fr)}function tX(e,t){e*=Ct,t*=Ct;var n=rt(t),i=n*rt(e),r=n*et(e),o=et(t),a=cr*o-fr*r,s=fr*i-ur*o,l=ur*r-cr*i,u=MA(a,s,l),c=Xr(u),d=u&&-c/u;OA.add(d*a),DA.add(d*s),LA.add(d*l),tw+=c,ow+=c*(ur+(ur=i)),aw+=c*(cr+(cr=r)),sw+=c*(fr+(fr=o)),Lv(ur,cr,fr)}function Zxe(e){g0=tw=nw=iw=rw=ow=aw=sw=0,OA=new mr,DA=new mr,LA=new mr,dl(e,Ra);var t=+OA,n=+DA,i=+LA,r=MA(t,n,i);return r<Vb&&(t=ow,n=aw,i=sw,tw<it&&(t=nw,n=iw,i=rw),r=MA(t,n,i),r<Vb)?[NaN,NaN]:[ea(n,t)*Dn,Xr(i/r)*Dn]}function jA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function zA(e,t){return It(e)>Rt&&(e-=Math.round(e/vr)*vr),[e,t]}zA.invert=zA;function nX(e,t,n){return(e%=vr)?t||n?jA(Tj(e),Aj(t,n)):Tj(e):t||n?Aj(t,n):zA}function Rj(e){return function(t,n){return t+=e,It(t)>Rt&&(t-=Math.round(t/vr)*vr),[t,n]}}function Tj(e){var t=Rj(e);return t.invert=Rj(-e),t}function Aj(e,t){var n=rt(e),i=et(e),r=rt(t),o=et(t);function a(s,l){var u=rt(l),c=rt(s)*u,d=et(s)*u,h=et(l),m=h*n+c*i;return[ea(d*r-m*o,c*n-h*i),Xr(m*r+d*o)]}return a.invert=function(s,l){var u=rt(l),c=rt(s)*u,d=et(s)*u,h=et(l),m=h*r-d*o;return[ea(d*r+h*o,c*n+m*i),Xr(m*n-c*i)]},a}function Xxe(e){e=nX(e[0]*Ct,e[1]*Ct,e.length>2?e[2]*Ct:0);function t(n){return n=e(n[0]*Ct,n[1]*Ct),n[0]*=Dn,n[1]*=Dn,n}return t.invert=function(n){return n=e.invert(n[0]*Ct,n[1]*Ct),n[0]*=Dn,n[1]*=Dn,n},t}function Kxe(e,t,n,i,r,o){if(n){var a=rt(t),s=et(t),l=i*n;r==null?(r=t+i*vr,o=t-l/2):(r=Mj(a,r),o=Mj(a,o),(i>0?r<o:r>o)&&(r+=i*vr));for(var u,c=r;i>0?c>o:c<o;c-=l)u=Qb([a,-s*rt(c),-s*et(c)]),e.point(u[0],u[1])}}function Mj(e,t){t=cd(t),t[0]-=e,ew(t);var n=GZ(-t[1]);return((-t[2]<0?-n:n)+vr-it)%vr}function iX(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Ei,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function w_(e,t){return It(e[0]-t[0])<it&&It(e[1]-t[1])<it}function kx(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function rX(e,t,n,i,r){var o=[],a=[],s,l;if(e.forEach(function(g){if(!((y=g.length-1)<=0)){var y,x=g[0],b=g[y],w;if(w_(x,b)){if(!x[2]&&!b[2]){for(r.lineStart(),s=0;s<y;++s)r.point((x=g[s])[0],x[1]);r.lineEnd();return}b[0]+=2*it}o.push(w=new kx(x,g,null,!0)),a.push(w.o=new kx(x,null,w,!1)),o.push(w=new kx(b,g,null,!1)),a.push(w.o=new kx(b,null,w,!0))}}),!!o.length){for(a.sort(t),Fj(o),Fj(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var u=o[0],c,d;;){for(var h=u,m=!0;h.v;)if((h=h.n)===u)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(m)for(s=0,l=c.length;s<l;++s)r.point((d=c[s])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(m)for(c=h.p.z,s=c.length-1;s>=0;--s)r.point((d=c[s])[0],d[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,c=h.z,m=!m}while(!h.v);r.lineEnd()}}}function Fj(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Ck(e){return It(e[0])<=Rt?e[0]:zo(e[0])*((It(e[0])+Rt)%vr-Rt)}function Jxe(e,t){var n=Ck(t),i=t[1],r=et(i),o=[et(n),-rt(n),0],a=0,s=0,l=new mr;r===1?i=$n+it:r===-1&&(i=-$n-it);for(var u=0,c=e.length;u<c;++u)if(h=(d=e[u]).length)for(var d,h,m=d[h-1],g=Ck(m),y=m[1]/2+Yb,x=et(y),b=rt(y),w=0;w<h;++w,g=k,x=M,b=T,m=S){var S=d[w],k=Ck(S),R=S[1]/2+Yb,M=et(R),T=rt(R),N=k-g,z=N>=0?1:-1,H=z*N,U=H>Rt,X=x*M;if(l.add(ea(X*z*et(H),b*T+X*rt(H))),a+=U?N+z*vr:N,U^g>=n^k>=n){var B=Zp(cd(m),cd(S));ew(B);var O=Zp(o,B);ew(O);var j=(U^N>=0?-1:1)*Xr(O[2]);(i>j||i===j&&(B[0]||B[1]))&&(s+=U^N>=0?1:-1)}}return(a<-it||a<it&&l<-Vb)^s&1}function oX(e,t,n,i){return function(r){var o=t(r),a=iX(),s=t(a),l=!1,u,c,d,h={point:m,lineStart:y,lineEnd:x,polygonStart:function(){h.point=b,h.lineStart=w,h.lineEnd=S,c=[],u=[]},polygonEnd:function(){h.point=m,h.lineStart=y,h.lineEnd=x,c=QW(c);var k=Jxe(u,i);c.length?(l||(r.polygonStart(),l=!0),rX(c,e_e,k,n,r)):k&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function m(k,R){e(k,R)&&r.point(k,R)}function g(k,R){o.point(k,R)}function y(){h.point=g,o.lineStart()}function x(){h.point=m,o.lineEnd()}function b(k,R){d.push([k,R]),s.point(k,R)}function w(){s.lineStart(),d=[]}function S(){b(d[0][0],d[0][1]),s.lineEnd();var k=s.clean(),R=a.result(),M,T=R.length,N,z,H;if(d.pop(),u.push(d),d=null,!!T){if(k&1){if(z=R[0],(N=z.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),M=0;M<N;++M)r.point((H=z[M])[0],H[1]);r.lineEnd()}return}T>1&&k&2&&R.push(R.pop().concat(R.shift())),c.push(R.filter(Qxe))}}return h}}function Qxe(e){return e.length>1}function e_e(e,t){return((e=e.x)[0]<0?e[1]-$n-it:$n-e[1])-((t=t.x)[0]<0?t[1]-$n-it:$n-t[1])}const Pj=oX(function(){return!0},t_e,i_e,[-Rt,-$n]);function t_e(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(o,a){var s=o>0?Rt:-Rt,l=It(o-t);It(l-Rt)<it?(e.point(t,n=(n+a)/2>0?$n:-$n),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),r=0):i!==s&&l>=Rt&&(It(t-i)<it&&(t-=i*it),It(o-s)<it&&(o-=s*it),n=n_e(t,n,o,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),r=0),e.point(t=o,n=a),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function n_e(e,t,n,i){var r,o,a=et(e-n);return It(a)>it?$m((et(t)*(o=rt(i))*et(n)-et(i)*(r=rt(t))*et(e))/(r*o*a)):(t+i)/2}function i_e(e,t,n,i){var r;if(e==null)r=n*$n,i.point(-Rt,r),i.point(0,r),i.point(Rt,r),i.point(Rt,0),i.point(Rt,-r),i.point(0,-r),i.point(-Rt,-r),i.point(-Rt,0),i.point(-Rt,r);else if(It(e[0]-t[0])>it){var o=e[0]<t[0]?Rt:-Rt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}function r_e(e){var t=rt(e),n=6*Ct,i=t>0,r=It(t)>it;function o(c,d,h,m){Kxe(m,e,n,h,c,d)}function a(c,d){return rt(c)*rt(d)>t}function s(c){var d,h,m,g,y;return{lineStart:function(){g=m=!1,y=1},point:function(x,b){var w=[x,b],S,k=a(x,b),R=i?k?0:u(x,b):k?u(x+(x<0?Rt:-Rt),b):0;if(!d&&(g=m=k)&&c.lineStart(),k!==m&&(S=l(d,w),(!S||w_(d,S)||w_(w,S))&&(w[2]=1)),k!==m)y=0,k?(c.lineStart(),S=l(w,d),c.point(S[0],S[1])):(S=l(d,w),c.point(S[0],S[1],2),c.lineEnd()),d=S;else if(r&&d&&i^k){var M;!(R&h)&&(M=l(w,d,!0))&&(y=0,i?(c.lineStart(),c.point(M[0][0],M[0][1]),c.point(M[1][0],M[1][1]),c.lineEnd()):(c.point(M[1][0],M[1][1]),c.lineEnd(),c.lineStart(),c.point(M[0][0],M[0][1],3)))}k&&(!d||!w_(d,w))&&c.point(w[0],w[1]),d=w,m=k,h=R},lineEnd:function(){m&&c.lineEnd(),d=null},clean:function(){return y|(g&&m)<<1}}}function l(c,d,h){var m=cd(c),g=cd(d),y=[1,0,0],x=Zp(m,g),b=Cx(x,x),w=x[0],S=b-w*w;if(!S)return!h&&c;var k=t*b/S,R=-t*w/S,M=Zp(y,x),T=Ex(y,k),N=Ex(x,R);Sk(T,N);var z=M,H=Cx(T,z),U=Cx(z,z),X=H*H-U*(Cx(T,T)-1);if(!(X<0)){var B=xr(X),O=Ex(z,(-H-B)/U);if(Sk(O,T),O=Qb(O),!h)return O;var j=c[0],q=d[0],K=c[1],W=d[1],J;q<j&&(J=j,j=q,q=J);var Q=q-j,ae=It(Q-Rt)<it,ge=ae||Q<it;if(!ae&&W<K&&(J=K,K=W,W=J),ge?ae?K+W>0^O[1]<(It(O[0]-j)<it?K:W):K<=O[1]&&O[1]<=W:Q>Rt^(j<=O[0]&&O[0]<=q)){var ke=Ex(z,(-H+B)/U);return Sk(ke,T),[O,Qb(ke)]}}}function u(c,d){var h=i?e:Rt-e,m=0;return c<-h?m|=1:c>h&&(m|=2),d<-h?m|=4:d>h&&(m|=8),m}return oX(a,s,o,i?[0,-e]:[-Rt,e-Rt])}function o_e(e,t,n,i,r,o){var a=e[0],s=e[1],l=t[0],u=t[1],c=0,d=1,h=l-a,m=u-s,g;if(g=n-a,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<d&&(d=g)}else if(h>0){if(g>d)return;g>c&&(c=g)}if(g=r-a,!(!h&&g<0)){if(g/=h,h<0){if(g>d)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<d&&(d=g)}if(g=i-s,!(!m&&g>0)){if(g/=m,m<0){if(g<c)return;g<d&&(d=g)}else if(m>0){if(g>d)return;g>c&&(c=g)}if(g=o-s,!(!m&&g<0)){if(g/=m,m<0){if(g>d)return;g>c&&(c=g)}else if(m>0){if(g<c)return;g<d&&(d=g)}return c>0&&(e[0]=a+c*h,e[1]=s+c*m),d<1&&(t[0]=a+d*h,t[1]=s+d*m),!0}}}}}var y0=1e9,Rx=-y0;function aX(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function o(u,c,d,h){var m=0,g=0;if(u==null||(m=a(u,d))!==(g=a(c,d))||l(u,c)<0^d>0)do h.point(m===0||m===3?e:n,m>1?i:t);while((m=(m+d+4)%4)!==g);else h.point(c[0],c[1])}function a(u,c){return It(u[0]-e)<it?c>0?0:3:It(u[0]-n)<it?c>0?2:1:It(u[1]-t)<it?c>0?1:0:c>0?3:2}function s(u,c){return l(u.x,c.x)}function l(u,c){var d=a(u,1),h=a(c,1);return d!==h?d-h:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=iX(),h,m,g,y,x,b,w,S,k,R,M,T={point:N,lineStart:X,lineEnd:B,polygonStart:H,polygonEnd:U};function N(j,q){r(j,q)&&c.point(j,q)}function z(){for(var j=0,q=0,K=m.length;q<K;++q)for(var W=m[q],J=1,Q=W.length,ae=W[0],ge,ke,pe=ae[0],Se=ae[1];J<Q;++J)ge=pe,ke=Se,ae=W[J],pe=ae[0],Se=ae[1],ke<=i?Se>i&&(pe-ge)*(i-ke)>(Se-ke)*(e-ge)&&++j:Se<=i&&(pe-ge)*(i-ke)<(Se-ke)*(e-ge)&&--j;return j}function H(){c=d,h=[],m=[],M=!0}function U(){var j=z(),q=M&&j,K=(h=QW(h)).length;(q||K)&&(u.polygonStart(),q&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),K&&rX(h,s,j,o,u),u.polygonEnd()),c=u,h=m=g=null}function X(){T.point=O,m&&m.push(g=[]),R=!0,k=!1,w=S=NaN}function B(){h&&(O(y,x),b&&k&&d.rejoin(),h.push(d.result())),T.point=N,k&&c.lineEnd()}function O(j,q){var K=r(j,q);if(m&&g.push([j,q]),R)y=j,x=q,b=K,R=!1,K&&(c.lineStart(),c.point(j,q));else if(K&&k)c.point(j,q);else{var W=[w=Math.max(Rx,Math.min(y0,w)),S=Math.max(Rx,Math.min(y0,S))],J=[j=Math.max(Rx,Math.min(y0,j)),q=Math.max(Rx,Math.min(y0,q))];o_e(W,J,e,t,n,i)?(k||(c.lineStart(),c.point(W[0],W[1])),c.point(J[0],J[1]),K||c.lineEnd(),M=!1):K&&(c.lineStart(),c.point(j,q),M=!1)}w=j,S=q,k=K}return T}}function Nj(e,t,n){var i=fo(e,t-it,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function $j(e,t,n){var i=fo(e,t-it,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function a_e(){var e,t,n,i,r,o,a,s,l=10,u=l,c=90,d=360,h,m,g,y,x=2.5;function b(){return{type:"MultiLineString",coordinates:w()}}function w(){return fo(Sx(i/c)*c,n,c).map(g).concat(fo(Sx(s/d)*d,a,d).map(y)).concat(fo(Sx(t/l)*l,e,l).filter(function(S){return It(S%c)>it}).map(h)).concat(fo(Sx(o/u)*u,r,u).filter(function(S){return It(S%d)>it}).map(m))}return b.lines=function(){return w().map(function(S){return{type:"LineString",coordinates:S}})},b.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(y(a).slice(1),g(n).reverse().slice(1),y(s).reverse().slice(1))]}},b.extent=function(S){return arguments.length?b.extentMajor(S).extentMinor(S):b.extentMinor()},b.extentMajor=function(S){return arguments.length?(i=+S[0][0],n=+S[1][0],s=+S[0][1],a=+S[1][1],i>n&&(S=i,i=n,n=S),s>a&&(S=s,s=a,a=S),b.precision(x)):[[i,s],[n,a]]},b.extentMinor=function(S){return arguments.length?(t=+S[0][0],e=+S[1][0],o=+S[0][1],r=+S[1][1],t>e&&(S=t,t=e,e=S),o>r&&(S=o,o=r,r=S),b.precision(x)):[[t,o],[e,r]]},b.step=function(S){return arguments.length?b.stepMajor(S).stepMinor(S):b.stepMinor()},b.stepMajor=function(S){return arguments.length?(c=+S[0],d=+S[1],b):[c,d]},b.stepMinor=function(S){return arguments.length?(l=+S[0],u=+S[1],b):[l,u]},b.precision=function(S){return arguments.length?(x=+S,h=Nj(o,r,90),m=$j(t,e,x),g=Nj(s,a,90),y=$j(i,n,x),b):x},b.extentMajor([[-180,-90+it],[180,90-it]]).extentMinor([[-180,-80-it],[180,80+it]])}const Wy=e=>e;var Ek=new mr,BA=new mr,sX,lX,HA,UA,hl={point:Ei,lineStart:Ei,lineEnd:Ei,polygonStart:function(){hl.lineStart=s_e,hl.lineEnd=u_e},polygonEnd:function(){hl.lineStart=hl.lineEnd=hl.point=Ei,Ek.add(It(BA)),BA=new mr},result:function(){var e=Ek/2;return Ek=new mr,e}};function s_e(){hl.point=l_e}function l_e(e,t){hl.point=uX,sX=HA=e,lX=UA=t}function uX(e,t){BA.add(UA*e-HA*t),HA=e,UA=t}function u_e(){uX(sX,lX)}var Xp=1/0,lw=Xp,Gy=-Xp,uw=Gy,cw={point:c_e,lineStart:Ei,lineEnd:Ei,polygonStart:Ei,polygonEnd:Ei,result:function(){var e=[[Xp,lw],[Gy,uw]];return Gy=uw=-(lw=Xp=1/0),e}};function c_e(e,t){e<Xp&&(Xp=e),e>Gy&&(Gy=e),t<lw&&(lw=t),t>uw&&(uw=t)}var WA=0,GA=0,v0=0,fw=0,dw=0,tp=0,qA=0,VA=0,x0=0,cX,fX,hs,ps,Do={point:fd,lineStart:Ij,lineEnd:Oj,polygonStart:function(){Do.lineStart=h_e,Do.lineEnd=p_e},polygonEnd:function(){Do.point=fd,Do.lineStart=Ij,Do.lineEnd=Oj},result:function(){var e=x0?[qA/x0,VA/x0]:tp?[fw/tp,dw/tp]:v0?[WA/v0,GA/v0]:[NaN,NaN];return WA=GA=v0=fw=dw=tp=qA=VA=x0=0,e}};function fd(e,t){WA+=e,GA+=t,++v0}function Ij(){Do.point=f_e}function f_e(e,t){Do.point=d_e,fd(hs=e,ps=t)}function d_e(e,t){var n=e-hs,i=t-ps,r=xr(n*n+i*i);fw+=r*(hs+e)/2,dw+=r*(ps+t)/2,tp+=r,fd(hs=e,ps=t)}function Oj(){Do.point=fd}function h_e(){Do.point=m_e}function p_e(){dX(cX,fX)}function m_e(e,t){Do.point=dX,fd(cX=hs=e,fX=ps=t)}function dX(e,t){var n=e-hs,i=t-ps,r=xr(n*n+i*i);fw+=r*(hs+e)/2,dw+=r*(ps+t)/2,tp+=r,r=ps*e-hs*t,qA+=r*(hs+e),VA+=r*(ps+t),x0+=r*3,fd(hs=e,ps=t)}function hX(e){this._context=e}hX.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,vr);break}}},result:Ei};var YA=new mr,kk,pX,mX,_0,b0,qy={point:Ei,lineStart:function(){qy.point=g_e},lineEnd:function(){kk&&gX(pX,mX),qy.point=Ei},polygonStart:function(){kk=!0},polygonEnd:function(){kk=null},result:function(){var e=+YA;return YA=new mr,e}};function g_e(e,t){qy.point=gX,pX=_0=e,mX=b0=t}function gX(e,t){_0-=e,b0-=t,YA.add(xr(_0*_0+b0*b0)),_0=e,b0=t}let Dj,hw,Lj,jj;class zj{constructor(t){this._append=t==null?yX:y_e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Lj||this._append!==hw){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Lj=i,hw=this._append,jj=this._,this._=r}this._+=jj;break}}}result(){const t=this._;return this._="",t.length?t:null}}function yX(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function y_e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return yX;if(t!==Dj){const n=10**t;Dj=t,hw=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return hw}function vX(e,t){let n=3,i=4.5,r,o;function a(s){return s&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),dl(s,r(o))),o.result()}return a.area=function(s){return dl(s,r(hl)),hl.result()},a.measure=function(s){return dl(s,r(qy)),qy.result()},a.bounds=function(s){return dl(s,r(cw)),cw.result()},a.centroid=function(s){return dl(s,r(Do)),Do.result()},a.projection=function(s){return arguments.length?(r=s==null?(e=null,Wy):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new zj(n)):new hX(t=s),typeof i!="function"&&o.pointRadius(i),a):t},a.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(o.pointRadius(+s),+s),a):i},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new zj(n)),a},a.projection(e).digits(n).context(t)}function kS(e){return function(t){var n=new ZA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function ZA(){}ZA.prototype={constructor:ZA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function iI(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),dl(n,e.stream(cw)),t(cw.result()),i!=null&&e.clipExtent(i),e}function RS(e,t,n){return iI(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function rI(e,t,n){return RS(e,[[0,0],t],n)}function oI(e,t,n){return iI(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];e.scale(150*o).translate([a,s])},n)}function aI(e,t,n){return iI(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var Bj=16,v_e=rt(30*Ct);function Hj(e,t){return+t?__e(e,t):x_e(e)}function x_e(e){return kS({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function __e(e,t){function n(i,r,o,a,s,l,u,c,d,h,m,g,y,x){var b=u-i,w=c-r,S=b*b+w*w;if(S>4*t&&y--){var k=a+h,R=s+m,M=l+g,T=xr(k*k+R*R+M*M),N=Xr(M/=T),z=It(It(M)-1)<it||It(o-d)<it?(o+d)/2:ea(R,k),H=e(z,N),U=H[0],X=H[1],B=U-i,O=X-r,j=w*B-b*O;(j*j/S>t||It((b*B+w*O)/S-.5)>.3||a*h+s*m+l*g<v_e)&&(n(i,r,o,a,s,l,U,X,z,k/=T,R/=T,M,y,x),x.point(U,X),n(U,X,z,k,R,M,u,c,d,h,m,g,y,x))}}return function(i){var r,o,a,s,l,u,c,d,h,m,g,y,x={point:b,lineStart:w,lineEnd:k,polygonStart:function(){i.polygonStart(),x.lineStart=R},polygonEnd:function(){i.polygonEnd(),x.lineStart=w}};function b(N,z){N=e(N,z),i.point(N[0],N[1])}function w(){d=NaN,x.point=S,i.lineStart()}function S(N,z){var H=cd([N,z]),U=e(N,z);n(d,h,c,m,g,y,d=U[0],h=U[1],c=N,m=H[0],g=H[1],y=H[2],Bj,i),i.point(d,h)}function k(){x.point=b,i.lineEnd()}function R(){w(),x.point=M,x.lineEnd=T}function M(N,z){S(r=N,z),o=d,a=h,s=m,l=g,u=y,x.point=S}function T(){n(d,h,c,m,g,y,o,a,r,s,l,u,Bj,i),x.lineEnd=k,k()}return x}}var b_e=kS({point:function(e,t){this.stream.point(e*Ct,t*Ct)}});function w_e(e){return kS({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function S_e(e,t,n,i,r){function o(a,s){return a*=i,s*=r,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*i,(n-s)/e*r]},o}function Uj(e,t,n,i,r,o){if(!o)return S_e(e,t,n,i,r);var a=rt(o),s=et(o),l=a*e,u=s*e,c=a/e,d=s/e,h=(s*n-a*t)/e,m=(s*t+a*n)/e;function g(y,x){return y*=i,x*=r,[l*y-u*x+t,n-u*y-l*x]}return g.invert=function(y,x){return[i*(c*y-d*x+h),r*(m-d*y-c*x)]},g}function Ls(e){return xX(function(){return e})()}function xX(e){var t,n=150,i=480,r=250,o=0,a=0,s=0,l=0,u=0,c,d=0,h=1,m=1,g=null,y=Pj,x=null,b,w,S,k=Wy,R=.5,M,T,N,z,H;function U(j){return N(j[0]*Ct,j[1]*Ct)}function X(j){return j=N.invert(j[0],j[1]),j&&[j[0]*Dn,j[1]*Dn]}U.stream=function(j){return z&&H===j?z:z=b_e(w_e(c)(y(M(k(H=j)))))},U.preclip=function(j){return arguments.length?(y=j,g=void 0,O()):y},U.postclip=function(j){return arguments.length?(k=j,x=b=w=S=null,O()):k},U.clipAngle=function(j){return arguments.length?(y=+j?r_e(g=j*Ct):(g=null,Pj),O()):g*Dn},U.clipExtent=function(j){return arguments.length?(k=j==null?(x=b=w=S=null,Wy):aX(x=+j[0][0],b=+j[0][1],w=+j[1][0],S=+j[1][1]),O()):x==null?null:[[x,b],[w,S]]},U.scale=function(j){return arguments.length?(n=+j,B()):n},U.translate=function(j){return arguments.length?(i=+j[0],r=+j[1],B()):[i,r]},U.center=function(j){return arguments.length?(o=j[0]%360*Ct,a=j[1]%360*Ct,B()):[o*Dn,a*Dn]},U.rotate=function(j){return arguments.length?(s=j[0]%360*Ct,l=j[1]%360*Ct,u=j.length>2?j[2]%360*Ct:0,B()):[s*Dn,l*Dn,u*Dn]},U.angle=function(j){return arguments.length?(d=j%360*Ct,B()):d*Dn},U.reflectX=function(j){return arguments.length?(h=j?-1:1,B()):h<0},U.reflectY=function(j){return arguments.length?(m=j?-1:1,B()):m<0},U.precision=function(j){return arguments.length?(M=Hj(T,R=j*j),O()):xr(R)},U.fitExtent=function(j,q){return RS(U,j,q)},U.fitSize=function(j,q){return rI(U,j,q)},U.fitWidth=function(j,q){return oI(U,j,q)},U.fitHeight=function(j,q){return aI(U,j,q)};function B(){var j=Uj(n,0,0,h,m,d).apply(null,t(o,a)),q=Uj(n,i-j[0],r-j[1],h,m,d);return c=nX(s,l,u),T=jA(t,q),N=jA(c,T),M=Hj(T,R),O()}function O(){return z=H=null,U}return function(){return t=e.apply(this,arguments),U.invert=t.invert&&X,B()}}function sI(e){var t=0,n=Rt/3,i=xX(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*Ct,n=o[1]*Ct):[t*Dn,n*Dn]},r}function C_e(e){var t=rt(e);function n(i,r){return[i*t,et(r)/t]}return n.invert=function(i,r){return[i/t,Xr(r*t)]},n}function E_e(e,t){var n=et(e),i=(n+et(t))/2;if(It(i)<it)return C_e(e);var r=1+n*(2*i-n),o=xr(r)/i;function a(s,l){var u=xr(r-2*i*et(l))/i;return[u*et(s*=i),o-u*rt(s)]}return a.invert=function(s,l){var u=o-l,c=ea(s,It(u))*zo(u);return u*i<0&&(c-=Rt*zo(s)*zo(u)),[c/i,Xr((r-(s*s+u*u)*i*i)/(2*i))]},a}function pw(){return sI(E_e).scale(155.424).center([0,33.6442])}function _X(){return pw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function k_e(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function R_e(){var e,t,n=_X(),i,r=pw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=pw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(h,m){l=[h,m]}};function c(h){var m=h[0],g=h[1];return l=null,i.point(m,g),l||(o.point(m,g),l)||(s.point(m,g),l)}c.invert=function(h){var m=n.scale(),g=n.translate(),y=(h[0]-g[0])/m,x=(h[1]-g[1])/m;return(x>=.12&&x<.234&&y>=-.425&&y<-.214?r:x>=.166&&x<.234&&y>=-.214&&y<-.115?a:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=k_e([n.stream(t=h),r.stream(h),a.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),d()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var m=n.scale(),g=+h[0],y=+h[1];return i=n.translate(h).clipExtent([[g-.455*m,y-.238*m],[g+.455*m,y+.238*m]]).stream(u),o=r.translate([g-.307*m,y+.201*m]).clipExtent([[g-.425*m+it,y+.12*m+it],[g-.214*m-it,y+.234*m-it]]).stream(u),s=a.translate([g-.205*m,y+.212*m]).clipExtent([[g-.214*m+it,y+.166*m+it],[g-.115*m-it,y+.234*m-it]]).stream(u),d()},c.fitExtent=function(h,m){return RS(c,h,m)},c.fitSize=function(h,m){return rI(c,h,m)},c.fitWidth=function(h,m){return oI(c,h,m)},c.fitHeight=function(h,m){return aI(c,h,m)};function d(){return e=t=null,c}return c.scale(1070)}function bX(e){return function(t,n){var i=rt(t),r=rt(n),o=e(i*r);return o===1/0?[2,0]:[o*r*et(t),o*et(n)]}}function jv(e){return function(t,n){var i=xr(t*t+n*n),r=e(i),o=et(r),a=rt(r);return[ea(t*o,i*a),Xr(i&&n*o/i)]}}var wX=bX(function(e){return xr(2/(1+e))});wX.invert=jv(function(e){return 2*Xr(e/2)});function T_e(){return Ls(wX).scale(124.75).clipAngle(180-.001)}var SX=bX(function(e){return(e=GZ(e))&&e/et(e)});SX.invert=jv(function(e){return e});function A_e(){return Ls(SX).scale(79.4188).clipAngle(180-.001)}function TS(e,t){return[e,Zb(tI(($n+t)/2))]}TS.invert=function(e,t){return[e,2*$m(WZ(t))-$n]};function M_e(){return CX(TS).scale(961/vr)}function CX(e){var t=Ls(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,a=null,s,l,u;t.scale=function(d){return arguments.length?(i(d),c()):i()},t.translate=function(d){return arguments.length?(r(d),c()):r()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?a=s=l=u=null:(a=+d[0][0],s=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):a==null?null:[[a,s],[l,u]]};function c(){var d=Rt*i(),h=t(Xxe(t.rotate()).invert([0,0]));return o(a==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:e===TS?[[Math.max(h[0]-d,a),s],[Math.min(h[0]+d,l),u]]:[[a,Math.max(h[1]-d,s)],[l,Math.min(h[1]+d,u)]])}return c()}function Tx(e){return tI(($n+e)/2)}function F_e(e,t){var n=rt(e),i=e===t?et(e):Zb(n/rt(t))/Zb(Tx(t)/Tx(e)),r=n*wk(Tx(e),i)/i;if(!i)return TS;function o(a,s){r>0?s<-$n+it&&(s=-$n+it):s>$n-it&&(s=$n-it);var l=r/wk(Tx(s),i);return[l*et(i*a),r-l*rt(i*a)]}return o.invert=function(a,s){var l=r-s,u=zo(i)*xr(a*a+l*l),c=ea(a,It(l))*zo(l);return l*i<0&&(c-=Rt*zo(a)*zo(l)),[c/i,2*$m(wk(r/u,1/i))-$n]},o}function P_e(){return sI(F_e).scale(109.5).parallels([30,30])}function mw(e,t){return[e,t]}mw.invert=mw;function N_e(){return Ls(mw).scale(152.63)}function $_e(e,t){var n=rt(e),i=e===t?et(e):(n-rt(t))/(t-e),r=n/i+e;if(It(i)<it)return mw;function o(a,s){var l=r-s,u=i*a;return[l*et(u),r-l*rt(u)]}return o.invert=function(a,s){var l=r-s,u=ea(a,It(l))*zo(l);return l*i<0&&(u-=Rt*zo(a)*zo(l)),[u/i,r-zo(i)*xr(a*a+l*l)]},o}function I_e(){return sI($_e).scale(131.154).center([0,13.9389])}var Y0=1.340264,Z0=-.081106,X0=893e-6,K0=.003796,gw=xr(3)/2,O_e=12;function EX(e,t){var n=Xr(gw*et(t)),i=n*n,r=i*i*i;return[e*rt(n)/(gw*(Y0+3*Z0*i+r*(7*X0+9*K0*i))),n*(Y0+Z0*i+r*(X0+K0*i))]}EX.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,o=0,a,s,l;o<O_e&&(s=n*(Y0+Z0*i+r*(X0+K0*i))-t,l=Y0+3*Z0*i+r*(7*X0+9*K0*i),n-=a=s/l,i=n*n,r=i*i*i,!(It(a)<Vb));++o);return[gw*e*(Y0+3*Z0*i+r*(7*X0+9*K0*i))/rt(n),Xr(et(n)/gw)]};function D_e(){return Ls(EX).scale(177.158)}function kX(e,t){var n=rt(t),i=rt(e)*n;return[n*et(e)/i,et(t)/i]}kX.invert=jv($m);function L_e(){return Ls(kX).scale(144.049).clipAngle(60)}function j_e(){var e=1,t=0,n=0,i=1,r=1,o=0,a,s,l=null,u,c,d,h=1,m=1,g=kS({point:function(k,R){var M=S([k,R]);this.stream.point(M[0],M[1])}}),y=Wy,x,b;function w(){return h=e*i,m=e*r,x=b=null,S}function S(k){var R=k[0]*h,M=k[1]*m;if(o){var T=M*a-R*s;R=R*a+M*s,M=T}return[R+t,M+n]}return S.invert=function(k){var R=k[0]-t,M=k[1]-n;if(o){var T=M*a+R*s;R=R*a-M*s,M=T}return[R/h,M/m]},S.stream=function(k){return x&&b===k?x:x=g(y(b=k))},S.postclip=function(k){return arguments.length?(y=k,l=u=c=d=null,w()):y},S.clipExtent=function(k){return arguments.length?(y=k==null?(l=u=c=d=null,Wy):aX(l=+k[0][0],u=+k[0][1],c=+k[1][0],d=+k[1][1]),w()):l==null?null:[[l,u],[c,d]]},S.scale=function(k){return arguments.length?(e=+k,w()):e},S.translate=function(k){return arguments.length?(t=+k[0],n=+k[1],w()):[t,n]},S.angle=function(k){return arguments.length?(o=k%360*Ct,s=et(o),a=rt(o),w()):o*Dn},S.reflectX=function(k){return arguments.length?(i=k?-1:1,w()):i<0},S.reflectY=function(k){return arguments.length?(r=k?-1:1,w()):r<0},S.fitExtent=function(k,R){return RS(S,k,R)},S.fitSize=function(k,R){return rI(S,k,R)},S.fitWidth=function(k,R){return oI(S,k,R)},S.fitHeight=function(k,R){return aI(S,k,R)},S}function RX(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}RX.invert=function(e,t){var n=t,i=25,r;do{var o=n*n,a=o*o;n-=r=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(It(r)>it&&--i>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function z_e(){return Ls(RX).scale(175.295)}function TX(e,t){return[rt(t)*et(e),et(t)]}TX.invert=jv(Xr);function B_e(){return Ls(TX).scale(249.5).clipAngle(90+it)}function AX(e,t){var n=rt(t),i=1+rt(e)*n;return[n*et(e)/i,et(t)/i]}AX.invert=jv(function(e){return 2*$m(e)});function H_e(){return Ls(AX).scale(250).clipAngle(142)}function MX(e,t){return[Zb(tI(($n+t)/2)),-e]}MX.invert=function(e,t){return[-t,2*$m(WZ(e))-$n]};function U_e(){var e=CX(MX),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var W_e=Math.abs,XA=Math.cos,yw=Math.sin,G_e=1e-6,FX=Math.PI,KA=FX/2,Wj=q_e(2);function Gj(e){return e>1?KA:e<-1?-KA:Math.asin(e)}function q_e(e){return e>0?Math.sqrt(e):0}function V_e(e,t){var n=e*yw(t),i=30,r;do t-=r=(t+yw(t)-n)/(1+XA(t));while(W_e(r)>G_e&&--i>0);return t/2}function Y_e(e,t,n){function i(r,o){return[e*r*XA(o=V_e(n,o)),t*yw(o)]}return i.invert=function(r,o){return o=Gj(o/t),[r/(e*XA(o)),Gj((2*o+yw(2*o))/n)]},i}var Z_e=Y_e(Wj/KA,Wj,FX);function X_e(){return Ls(Z_e).scale(169.529)}const K_e=vX(),JA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function J_e(e,t){return function n(){const i=t();return i.type=e,i.path=vX().projection(i),i.copy=i.copy||function(){const r=n();return JA.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},XV(i)}}function lI(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(vw[e]=J_e(e,t),this):vw[e]||null}function PX(e){return e&&e.path||K_e}const vw={albers:_X,albersusa:R_e,azimuthalequalarea:T_e,azimuthalequidistant:A_e,conicconformal:P_e,conicequalarea:pw,conicequidistant:I_e,equalEarth:D_e,equirectangular:N_e,gnomonic:L_e,identity:j_e,mercator:M_e,mollweide:X_e,naturalEarth1:z_e,orthographic:B_e,stereographic:H_e,transversemercator:U_e};for(const e in vw)lI(e,vw[e]);function Q_e(){}const tl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function NX(){var e=1,t=1,n=s;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return o(l,u,h=>{n(h,l,u),ebe(h)>0?c.push([h]):d.push(h)}),d.forEach(h=>{for(var m=0,g=c.length,y;m<g;++m)if(tbe((y=c[m])[0],h)!==-1){y.push(h);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var d=new Array,h=new Array,m,g,y,x,b,w;for(m=g=-1,x=l[0]>=u,tl[x<<1].forEach(S);++m<e-1;)y=x,x=l[m+1]>=u,tl[y|x<<1].forEach(S);for(tl[x<<0].forEach(S);++g<t-1;){for(m=-1,x=l[g*e+e]>=u,b=l[g*e]>=u,tl[x<<1|b<<2].forEach(S);++m<e-1;)y=x,x=l[g*e+e+m+1]>=u,w=b,b=l[g*e+m+1]>=u,tl[y|x<<1|b<<2|w<<3].forEach(S);tl[x|b<<3].forEach(S)}for(m=-1,b=l[g*e]>=u,tl[b<<2].forEach(S);++m<e-1;)w=b,b=l[g*e+m+1]>=u,tl[b<<2|w<<3].forEach(S);tl[b<<3].forEach(S);function S(k){var R=[k[0][0]+m,k[0][1]+g],M=[k[1][0]+m,k[1][1]+g],T=a(R),N=a(M),z,H;(z=h[T])?(H=d[N])?(delete h[z.end],delete d[H.start],z===H?(z.ring.push(M),c(z.ring)):d[z.start]=h[H.end]={start:z.start,end:H.end,ring:z.ring.concat(H.ring)}):(delete h[z.end],z.ring.push(M),h[z.end=N]=z):(z=d[N])?(H=h[T])?(delete d[z.start],delete h[H.end],z===H?(z.ring.push(M),c(z.ring)):d[H.start]=h[z.end]={start:H.start,end:z.end,ring:H.ring.concat(z.ring)}):(delete d[z.start],z.ring.unshift(R),d[z.start=T]=z):d[T]=h[N]={start:T,end:N,ring:[R,M]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function s(l,u,c){l.forEach(d=>{var h=d[0],m=d[1],g=h|0,y=m|0,x,b=u[y*e+g];h>0&&h<e&&g===h&&(x=u[y*e+g-1],d[0]=h+(c-x)/(b-x)-.5),m>0&&m<t&&y===m&&(x=u[(y-1)*e+g],d[1]=m+(c-x)/(b-x)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||le("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?s:Q_e,i):n===s},i}function ebe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function tbe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=nbe(e,t[n]))return r;return 0}function nbe(e,t){for(var n=t[0],i=t[1],r=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],d=e[s],h=d[0],m=d[1];if(ibe(l,d,t))return 0;c>i!=m>i&&n<(h-u)*(i-c)/(m-c)+u&&(r=-r)}return r}function ibe(e,t,n){var i;return rbe(e,t,n)&&obe(e[i=+(e[0]===t[0])],n[i],t[i])}function rbe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function obe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function $X(e,t,n){return function(i){var r=ks(i),o=n?Math.min(r[0],0):r[0],a=r[1],s=a-o,l=t?uc(o,a,e):s/(e+1);return fo(o+l,a,l)}}function uI(e){ne.call(this,null,e)}uI.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};be(uI,ne,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Qi,o=NX().smooth(e.smooth!==!1),a=e.thresholds||abe(i,r,e),s=e.as===null?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=o.size([c.width,c.height])(c.values,de(a)?a:a(c.values));sbe(d,c,u,e),d.forEach(h=>{l.push(W2(u,qt(s!=null?{[s]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function abe(e,t,n){const i=$X(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Hf(t(r).values)))}function sbe(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(bt(r)&&(r=r(n,i)),bt(o)&&(o=o(n,i)),(r===1||r==null)&&!o)return;const a=(zt(r)?r:r[0])||1,s=(zt(r)?r:r[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(IX(t,a,s,l,u))}function IX(e,t,n,i,r){const o=e.x1||0,a=e.y1||0,s=t*n<0;function l(d){d.forEach(u)}function u(d){s&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-a)*n+r}return function(d){return d.coordinates.forEach(l),d}}function qj(e,t,n){const i=e>=0?e:JP(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function Rk(e){return bt(e)?e:er(+e)}function OX(){var e=l=>l[0],t=l=>l[1],n=bm,i=[-1,-1],r=960,o=500,a=2;function s(l,u){const c=qj(i[0],l,e)>>a,d=qj(i[1],l,t)>>a,h=c?c+2:0,m=d?d+2:0,g=2*h+(r>>a),y=2*m+(o>>a),x=new Float32Array(g*y),b=new Float32Array(g*y);let w=x;l.forEach(k=>{const R=h+(+e(k)>>a),M=m+(+t(k)>>a);R>=0&&R<g&&M>=0&&M<y&&(x[R+M*g]+=+n(k))}),c>0&&d>0?(Ch(g,y,x,b,c),Eh(g,y,b,x,d),Ch(g,y,x,b,c),Eh(g,y,b,x,d),Ch(g,y,x,b,c),Eh(g,y,b,x,d)):c>0?(Ch(g,y,x,b,c),Ch(g,y,b,x,c),Ch(g,y,x,b,c),w=b):d>0&&(Eh(g,y,x,b,d),Eh(g,y,b,x,d),Eh(g,y,x,b,d),w=b);const S=u?Math.pow(2,-2*a):1/eG(w);for(let k=0,R=g*y;k<R;++k)w[k]*=S;return{values:w,scale:1<<a,width:g,height:y,x1:h,y1:m,x2:h+(r>>a),y2:m+(o>>a)}}return s.x=function(l){return arguments.length?(e=Rk(l),s):e},s.y=function(l){return arguments.length?(t=Rk(l),s):t},s.weight=function(l){return arguments.length?(n=Rk(l),s):n},s.size=function(l){if(!arguments.length)return[r,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||le("invalid size"),r=u,o=c,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||le("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),s):1<<a},s.bandwidth=function(l){return arguments.length?(l=$e(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&le("invalid bandwidth"),i=l,s):i},s}function Ch(e,t,n,i,r){const o=(r<<1)+1;for(let a=0;a<t;++a)for(let s=0,l=0;s<e+r;++s)s<e&&(l+=n[s+a*e]),s>=r&&(s>=o&&(l-=n[s-o+a*e]),i[s-r+a*e]=l/Math.min(s+1,e-1+o-s,o))}function Eh(e,t,n,i,r){const o=(r<<1)+1;for(let a=0;a<e;++a)for(let s=0,l=0;s<t+r;++s)s<t&&(l+=n[a+s*e]),s>=r&&(s>=o&&(l-=n[a+(s-o)*e]),i[a+(s-r)*e]=l/Math.min(s+1,t-1+o-s,o))}function cI(e){ne.call(this,null,e)}cI.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const lbe=["x","y","weight","size","cellSize","bandwidth"];function DX(e,t){return lbe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}be(cI,ne,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=ube(i,e.groupby),o=(e.groupby||[]).map(In),a=DX(OX(),e),s=e.as||"grid",l=[];function u(c,d){for(let h=0;h<o.length;++h)c[o[h]]=d[h];return c}return l=r.map(c=>qt(u({[s]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ube(e,t){var n=[],i=c=>c(s),r,o,a,s,l,u;if(t==null)n.push(e);else for(r={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function fI(e){ne.call(this,null,e)}fI.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};be(fI,ne,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=NX().smooth(e.smooth!==!1),r=e.values,o=e.thresholds||$X(e.count||10,e.nice,!!r),a=e.size,s,l;return r||(r=t.materialize(t.SOURCE).source,s=DX(OX(),e)(r,!0),l=IX(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],r=s.values),o=de(o)?o:o(r),r=i.size(a)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(qt),n}});const QA="Feature",dI="FeatureCollection",cbe="MultiPoint";function hI(e){ne.call(this,null,e)}hI.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};be(hI,ne,{transform(e,t){var n=this._features,i=this._points,r=e.fields,o=r&&r[0],a=r&&r[1],s=e.geojson||!r&&Qi,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Yi(s))||o&&t.modified(Yi(o))||a&&t.modified(Yi(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),s&&t.visit(l,c=>n.push(s(c))),o&&a&&(t.visit(l,c=>{var d=o(c),h=a(c);d!=null&&h!=null&&(d=+d)===d&&(h=+h)===h&&i.push([d,h])}),n=n.concat({type:QA,geometry:{type:cbe,coordinates:i}})),this.value={type:dI,features:n}}});function pI(e){ne.call(this,null,e)}pI.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};be(pI,ne,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Qi,o=e.as||"path",a=n.SOURCE;!i||e.modified()?(this.value=i=PX(e.projection),n.materialize().reflow()):a=r===Qi||t.modified(r.fields)?n.ADD_MOD:n.ADD;const s=fbe(i,e.pointRadius);return n.visit(a,l=>l[o]=i(r(l))),i.pointRadius(s),n.modifies(o)}});function fbe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function mI(e){ne.call(this,null,e)}mI.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};be(mI,ne,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],l;function u(c){const d=n([i(c),r(c)]);d?(c[a]=d[0],c[s]=d[1]):(c[a]=void 0,c[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function gI(e){ne.call(this,null,e)}gI.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};be(gI,ne,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=dbe(PX(e.projection),e.field||Xo("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[r]=i),n.modifies(r)}});function dbe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(o),a};return i.context=r=>(e.context(r),i),i}function yI(e){ne.call(this,[],e),this.generator=a_e()}yI.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};be(yI,ne,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const o in e)bt(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(ZG(n[0],r)):t.add.push(qt(r)),n[0]=r,t}});function vI(e){ne.call(this,null,e)}vI.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};be(vI,ne,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Qi,o=pbe(e.opacity,e),a=hbe(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Hf(n.map(u=>Hf(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=_t({},u,l);i||(d.$max=Hf(c.values||[])),u[s]=mbe(c,d,a.dep?a:er(a(d)),o.dep?o:er(o(d)))}),t.reflow(!0).modifies(s)}});function hbe(e,t){let n;return bt(e)?(n=i=>dc(e(i,t)),n.dep=LX(e)):n=er(dc(e||"#888")),n}function pbe(e,t){let n;return bt(e)?(n=i=>e(i,t),n.dep=LX(e)):e?n=er(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function LX(e){if(!bt(e))return!1;const t=Da(Yi(e));return t.$x||t.$y||t.$value||t.$max}function mbe(e,t,n,i){const r=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||r,u=e.y2||o,c=e.values,d=c?x=>c[x]:Tu,h=tc(l-a,u-s),m=h.getContext("2d"),g=m.getImageData(0,0,l-a,u-s),y=g.data;for(let x=s,b=0;x<u;++x){t.$y=x-s;for(let w=a,S=x*r;w<l;++w,b+=4){t.$x=w-a,t.$value=d(w+S);const k=n(t);y[b+0]=k.r,y[b+1]=k.g,y[b+2]=k.b,y[b+3]=~~(255*i(t))}}return m.putImageData(g,0,0),h}function jX(e){ne.call(this,null,e),this.modified(!0)}be(jX,ne,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=ybe(e.type),JA.forEach(i=>{e[i]!=null&&Vj(n,i,e[i])})):JA.forEach(i=>{e.modified(i)&&Vj(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&gbe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function gbe(e,t){const n=vbe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function ybe(e){const t=lI((e||"mercator").toLowerCase());return t||le("Unrecognized projection type: "+e),t()}function Vj(e,t,n){bt(e[t])&&e[t](n)}function vbe(e){return e=$e(e),e.length===1?e[0]:{type:dI,features:e.reduce((t,n)=>t.concat(xbe(n)),[])}}function xbe(e){return e.type===dI?e.features:$e(e).filter(t=>t!=null).map(t=>t.type===QA?t:{type:QA,geometry:t})}const _be=Object.freeze(Object.defineProperty({__proto__:null,contour:fI,geojson:hI,geopath:pI,geopoint:mI,geoshape:gI,graticule:yI,heatmap:vI,isocontour:uI,kde2d:cI,projection:jX},Symbol.toStringTag,{value:"Module"}));function bbe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var o,a=n.length,s,l=0,u=0;for(o=0;o<a;++o)s=n[o],l+=s.x,u+=s.y;for(l=(l/a-e)*i,u=(u/a-t)*i,o=0;o<a;++o)s=n[o],s.x-=l,s.y-=u}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function wbe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return zX(this.cover(t,n),t,n,e)}function zX(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,o=e._root,a={data:i},s=e._x0,l=e._y0,u=e._x1,c=e._y1,d,h,m,g,y,x,b,w;if(!o)return e._root=a,e;for(;o.length;)if((y=t>=(d=(s+u)/2))?s=d:u=d,(x=n>=(h=(l+c)/2))?l=h:c=h,r=o,!(o=o[b=x<<1|y]))return r[b]=a,e;if(m=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===m&&n===g)return a.next=o,r?r[b]=a:e._root=a,e;do r=r?r[b]=new Array(4):e._root=new Array(4),(y=t>=(d=(s+u)/2))?s=d:u=d,(x=n>=(h=(l+c)/2))?l=h:c=h;while((b=x<<1|y)===(w=(g>=h)<<1|m>=d));return r[w]=o,r[b]=a,e}function Sbe(e){var t,n,i=e.length,r,o,a=new Array(i),s=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=r,s[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)zX(this,a[n],s[n],e[n]);return this}function Cbe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var a=r-n||1,s=this._root,l,u;n>e||e>=r||i>t||t>=o;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:r=n+a,o=i+a;break;case 1:n=r-a,o=i+a;break;case 2:r=n+a,i=o-a;break;case 3:n=r-a,i=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function Ebe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kbe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function dr(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Rbe(e,t,n){var i,r=this._x0,o=this._y0,a,s,l,u,c=this._x1,d=this._y1,h=[],m=this._root,g,y;for(m&&h.push(new dr(m,r,o,c,d)),n==null?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);g=h.pop();)if(!(!(m=g.node)||(a=g.x0)>c||(s=g.y0)>d||(l=g.x1)<r||(u=g.y1)<o))if(m.length){var x=(a+l)/2,b=(s+u)/2;h.push(new dr(m[3],x,b,l,u),new dr(m[2],a,b,x,u),new dr(m[1],x,s,l,b),new dr(m[0],a,s,x,b)),(y=(t>=b)<<1|e>=x)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var w=e-+this._x.call(null,m.data),S=t-+this._y.call(null,m.data),k=w*w+S*S;if(k<n){var R=Math.sqrt(n=k);r=e-R,o=t-R,c=e+R,d=t+R,i=m.data}}return i}function Tbe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,i,r,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,d,h,m,g,y,x,b;if(!n)return this;if(n.length)for(;;){if((g=c>=(h=(a+l)/2))?a=h:l=h,(y=d>=(m=(s+u)/2))?s=m:u=m,t=n,!(n=n[x=y<<1|g]))return this;if(!n.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(i=t,b=x)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[x]=o:delete t[x],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[b]=n:this._root=n),this):(this._root=o,this)}function Abe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Mbe(){return this._root}function Fbe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Pbe(e){var t=[],n,i=this._root,r,o,a,s,l;for(i&&t.push(new dr(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&i.length){var u=(o+s)/2,c=(a+l)/2;(r=i[3])&&t.push(new dr(r,u,c,s,l)),(r=i[2])&&t.push(new dr(r,o,c,u,l)),(r=i[1])&&t.push(new dr(r,u,a,s,c)),(r=i[0])&&t.push(new dr(r,o,a,u,c))}return this}function Nbe(e){var t=[],n=[],i;for(this._root&&t.push(new dr(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,a=i.x0,s=i.y0,l=i.x1,u=i.y1,c=(a+l)/2,d=(s+u)/2;(o=r[0])&&t.push(new dr(o,a,s,c,d)),(o=r[1])&&t.push(new dr(o,c,s,l,d)),(o=r[2])&&t.push(new dr(o,a,d,c,u)),(o=r[3])&&t.push(new dr(o,c,d,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function $be(e){return e[0]}function Ibe(e){return arguments.length?(this._x=e,this):this._x}function Obe(e){return e[1]}function Dbe(e){return arguments.length?(this._y=e,this):this._y}function xI(e,t,n){var i=new _I(t??$be,n??Obe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function _I(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Yj(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Sr=xI.prototype=_I.prototype;Sr.copy=function(){var e=new _I(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Yj(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=Yj(i));return e};Sr.add=wbe;Sr.addAll=Sbe;Sr.cover=Cbe;Sr.data=Ebe;Sr.extent=kbe;Sr.find=Rbe;Sr.remove=Tbe;Sr.removeAll=Abe;Sr.root=Mbe;Sr.size=Fbe;Sr.visit=Pbe;Sr.visitAfter=Nbe;Sr.x=Ibe;Sr.y=Dbe;function hr(e){return function(){return e}}function Bu(e){return(e()-.5)*1e-6}function Lbe(e){return e.x+e.vx}function jbe(e){return e.y+e.vy}function zbe(e){var t,n,i,r=1,o=1;typeof e!="function"&&(e=hr(e==null?1:+e));function a(){for(var u,c=t.length,d,h,m,g,y,x,b=0;b<o;++b)for(d=xI(t,Lbe,jbe).visitAfter(s),u=0;u<c;++u)h=t[u],y=n[h.index],x=y*y,m=h.x+h.vx,g=h.y+h.vy,d.visit(w);function w(S,k,R,M,T){var N=S.data,z=S.r,H=y+z;if(N){if(N.index>h.index){var U=m-N.x-N.vx,X=g-N.y-N.vy,B=U*U+X*X;B<H*H&&(U===0&&(U=Bu(i),B+=U*U),X===0&&(X=Bu(i),B+=X*X),B=(H-(B=Math.sqrt(B)))/B*r,h.vx+=(U*=B)*(H=(z*=z)/(x+z)),h.vy+=(X*=B)*H,N.vx-=U*(H=1-H),N.vy-=X*H)}return}return k>m+H||M<m-H||R>g+H||T<g-H}}function s(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return a.initialize=function(u,c){t=u,i=c,l()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:hr(+u),l(),a):e},a}function Bbe(e){return e.index}function Zj(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Hbe(e){var t=Bbe,n=d,i,r=hr(30),o,a,s,l,u,c=1;e==null&&(e=[]);function d(x){return 1/Math.min(s[x.source.index],s[x.target.index])}function h(x){for(var b=0,w=e.length;b<c;++b)for(var S=0,k,R,M,T,N,z,H;S<w;++S)k=e[S],R=k.source,M=k.target,T=M.x+M.vx-R.x-R.vx||Bu(u),N=M.y+M.vy-R.y-R.vy||Bu(u),z=Math.sqrt(T*T+N*N),z=(z-o[S])/z*x*i[S],T*=z,N*=z,M.vx-=T*(H=l[S]),M.vy-=N*H,R.vx+=T*(H=1-H),R.vy+=N*H}function m(){if(a){var x,b=a.length,w=e.length,S=new Map(a.map((R,M)=>[t(R,M,a),R])),k;for(x=0,s=new Array(b);x<w;++x)k=e[x],k.index=x,typeof k.source!="object"&&(k.source=Zj(S,k.source)),typeof k.target!="object"&&(k.target=Zj(S,k.target)),s[k.source.index]=(s[k.source.index]||0)+1,s[k.target.index]=(s[k.target.index]||0)+1;for(x=0,l=new Array(w);x<w;++x)k=e[x],l[x]=s[k.source.index]/(s[k.source.index]+s[k.target.index]);i=new Array(w),g(),o=new Array(w),y()}}function g(){if(a)for(var x=0,b=e.length;x<b;++x)i[x]=+n(e[x],x,e)}function y(){if(a)for(var x=0,b=e.length;x<b;++x)o[x]=+r(e[x],x,e)}return h.initialize=function(x,b){a=x,u=b,m()},h.links=function(x){return arguments.length?(e=x,m(),h):e},h.id=function(x){return arguments.length?(t=x,h):t},h.iterations=function(x){return arguments.length?(c=+x,h):c},h.strength=function(x){return arguments.length?(n=typeof x=="function"?x:hr(+x),g(),h):n},h.distance=function(x){return arguments.length?(r=typeof x=="function"?x:hr(+x),y(),h):r},h}var Ube={value:()=>{}};function BX(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new S_(n)}function S_(e){this._=e}function Wbe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}S_.prototype=BX.prototype={constructor:S_,on:function(e,t){var n=this._,i=Wbe(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=Gbe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=Xj(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Xj(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new S_(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Gbe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Xj(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Ube,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Kp=0,w0=0,jg=0,HX=1e3,xw,S0,_w=0,dd=0,AS=0,Vy=typeof performance=="object"&&performance.now?performance:Date,UX=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bI(){return dd||(UX(qbe),dd=Vy.now()+AS)}function qbe(){dd=0}function bw(){this._call=this._time=this._next=null}bw.prototype=WX.prototype={constructor:bw,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bI():+n)+(t==null?0:+t),!this._next&&S0!==this&&(S0?S0._next=this:xw=this,S0=this),this._call=e,this._time=n,eM()},stop:function(){this._call&&(this._call=null,this._time=1/0,eM())}};function WX(e,t,n){var i=new bw;return i.restart(e,t,n),i}function Vbe(){bI(),++Kp;for(var e=xw,t;e;)(t=dd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Kp}function Kj(){dd=(_w=Vy.now())+AS,Kp=w0=0;try{Vbe()}finally{Kp=0,Zbe(),dd=0}}function Ybe(){var e=Vy.now(),t=e-_w;t>HX&&(AS-=t,_w=e)}function Zbe(){for(var e,t=xw,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xw=n);S0=e,eM(i)}function eM(e){if(!Kp){w0&&(w0=clearTimeout(w0));var t=e-dd;t>24?(e<1/0&&(w0=setTimeout(Kj,e-Vy.now()-AS)),jg&&(jg=clearInterval(jg))):(jg||(_w=Vy.now(),jg=setInterval(Ybe,HX)),Kp=1,UX(Kj))}}function Xbe(e,t,n){var i=new bw,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,a,s){a=+a,s=s==null?bI():+s,i._restart(function l(u){u+=r,i._restart(l,r+=a,s),o(u)},a,s)},i.restart(e,t,n),i)}const Kbe=1664525,Jbe=1013904223,Jj=4294967296;function Qbe(){let e=1;return()=>(e=(Kbe*e+Jbe)%Jj)/Jj}function ewe(e){return e.x}function twe(e){return e.y}var nwe=10,iwe=Math.PI*(3-Math.sqrt(5));function rwe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=WX(d),u=BX("tick","end"),c=Qbe();e==null&&(e=[]);function d(){h(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function h(y){var x,b=e.length,w;y===void 0&&(y=1);for(var S=0;S<y;++S)for(n+=(o-n)*r,s.forEach(function(k){k(n)}),x=0;x<b;++x)w=e[x],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return t}function m(){for(var y=0,x=e.length,b;y<x;++y){if(b=e[y],b.index=y,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var w=nwe*Math.sqrt(.5+y),S=y*iwe;b.x=w*Math.cos(S),b.y=w*Math.sin(S)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function g(y){return y.initialize&&y.initialize(e,c),y}return m(),t={tick:h,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(y){return arguments.length?(e=y,m(),s.forEach(g),t):e},alpha:function(y){return arguments.length?(n=+y,t):n},alphaMin:function(y){return arguments.length?(i=+y,t):i},alphaDecay:function(y){return arguments.length?(r=+y,t):+r},alphaTarget:function(y){return arguments.length?(o=+y,t):o},velocityDecay:function(y){return arguments.length?(a=1-y,t):1-a},randomSource:function(y){return arguments.length?(c=y,s.forEach(g),t):c},force:function(y,x){return arguments.length>1?(x==null?s.delete(y):s.set(y,g(x)),t):s.get(y)},find:function(y,x,b){var w=0,S=e.length,k,R,M,T,N;for(b==null?b=1/0:b*=b,w=0;w<S;++w)T=e[w],k=y-T.x,R=x-T.y,M=k*k+R*R,M<b&&(N=T,b=M);return N},on:function(y,x){return arguments.length>1?(u.on(y,x),t):u.on(y)}}}function owe(){var e,t,n,i,r=hr(-30),o,a=1,s=1/0,l=.81;function u(m){var g,y=e.length,x=xI(e,ewe,twe).visitAfter(d);for(i=m,g=0;g<y;++g)t=e[g],x.visit(h)}function c(){if(e){var m,g=e.length,y;for(o=new Array(g),m=0;m<g;++m)y=e[m],o[y.index]=+r(y,m,e)}}function d(m){var g=0,y,x,b=0,w,S,k;if(m.length){for(w=S=k=0;k<4;++k)(y=m[k])&&(x=Math.abs(y.value))&&(g+=y.value,b+=x,w+=x*y.x,S+=x*y.y);m.x=w/b,m.y=S/b}else{y=m,y.x=y.data.x,y.y=y.data.y;do g+=o[y.data.index];while(y=y.next)}m.value=g}function h(m,g,y,x){if(!m.value)return!0;var b=m.x-t.x,w=m.y-t.y,S=x-g,k=b*b+w*w;if(S*S/l<k)return k<s&&(b===0&&(b=Bu(n),k+=b*b),w===0&&(w=Bu(n),k+=w*w),k<a&&(k=Math.sqrt(a*k)),t.vx+=b*m.value*i/k,t.vy+=w*m.value*i/k),!0;if(m.length||k>=s)return;(m.data!==t||m.next)&&(b===0&&(b=Bu(n),k+=b*b),w===0&&(w=Bu(n),k+=w*w),k<a&&(k=Math.sqrt(a*k)));do m.data!==t&&(S=o[m.data.index]*i/k,t.vx+=b*S,t.vy+=w*S);while(m=m.next)}return u.initialize=function(m,g){e=m,n=g,c()},u.strength=function(m){return arguments.length?(r=typeof m=="function"?m:hr(+m),c(),u):r},u.distanceMin=function(m){return arguments.length?(a=m*m,u):Math.sqrt(a)},u.distanceMax=function(m){return arguments.length?(s=m*m,u):Math.sqrt(s)},u.theta=function(m){return arguments.length?(l=m*m,u):Math.sqrt(l)},u}function awe(e){var t=hr(.1),n,i,r;typeof e!="function"&&(e=hr(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(r[l]-c.x)*i[l]*s}function a(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:hr(+s),a(),o):e},o}function swe(e){var t=hr(.1),n,i,r;typeof e!="function"&&(e=hr(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(r[l]-c.y)*i[l]*s}function a(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:hr(+s),a(),o):e},o}const Qj={center:bbe,collide:zbe,nbody:owe,link:Hbe,x:awe,y:swe},C0="forces",tM=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],lwe=["static","iterations"],GX=["x","y","vx","vy"];function wI(e){ne.call(this,null,e)}wI.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:GX}]};be(wI,ne,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(tM),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&qX(n,e,0,t)):(this.value=n=cwe(t.source,e),n.on("tick",uwe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(lwe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,l=0,u=s.length,c;l<u;++l)if(c=s[l],!(c.name!==C0||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,o=i.length,a;r<o;++r)if(i[r].name==="links"&&(a=i[r].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(GX)}});function uwe(e,t){return()=>e.touch(t).run()}function cwe(e,t){const n=rwe(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),qX(n,t,!0).on("end",()=>o=!0)}function qX(e,t,n,i){var r=$e(t.forces),o,a,s,l;for(o=0,a=tM.length;o<a;++o)s=tM[o],s!==C0&&t.modified(s)&&e[s](t[s]);for(o=0,a=r.length;o<a;++o)l=C0+o,s=n||t.modified(C0,o)?dwe(r[o]):i&&fwe(r[o],i)?e.force(l):null,s&&e.force(l,s);for(a=e.numForces||0;o<a;++o)e.force(C0+o,null);return e.numForces=r.length,e}function fwe(e,t){var n,i;for(n in e)if(bt(i=e[n])&&t.modified(Yi(i)))return 1;return 0}function dwe(e){var t,n;tt(Qj,e.force)||le("Unrecognized force: "+e.force),t=Qj[e.force]();for(n in e)bt(t[n])&&hwe(t[n],e[n],e);return t}function hwe(e,t,n){e(bt(t)?i=>t(i,n):t)}const pwe=Object.freeze(Object.defineProperty({__proto__:null,force:wI},Symbol.toStringTag,{value:"Module"}));function mwe(e,t){return e.parent===t.parent?1:2}function gwe(e){return e.reduce(ywe,0)/e.length}function ywe(e,t){return e+t.x}function vwe(e){return 1+e.reduce(xwe,0)}function xwe(e,t){return Math.max(e,t.y)}function _we(e){for(var t;t=e.children;)e=t[0];return e}function bwe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function wwe(){var e=mwe,t=1,n=1,i=!1;function r(o){var a,s=0;o.eachAfter(function(h){var m=h.children;m?(h.x=gwe(m),h.y=vwe(m)):(h.x=a?s+=e(h,a):0,h.y=0,a=h)});var l=_we(o),u=bwe(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*n}:function(h){h.x=(h.x-c)/(d-c)*t,h.y=(1-(o.y?h.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}function Swe(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Cwe(){return this.eachAfter(Swe)}function Ewe(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function kwe(e,t){for(var n=this,i=[n],r,o,a=-1;n=i.pop();)if(e.call(t,n,++a,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function Rwe(e,t){for(var n=this,i=[n],r=[],o,a,s,l=-1;n=i.pop();)if(r.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)i.push(o[a]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Twe(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Awe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Mwe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Fwe(e){for(var t=this,n=Pwe(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Pwe(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Nwe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function $we(){return Array.from(this)}function Iwe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Owe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Dwe(){var e=this,t,n=[e],i,r,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function SI(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zwe)):t===void 0&&(t=jwe);for(var n=new Jp(e),i,r=[n],o,a,s,l;i=r.pop();)if((a=t(i.data))&&(l=(a=Array.from(a)).length))for(i.children=a,s=l-1;s>=0;--s)r.push(o=a[s]=new Jp(a[s])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(VX)}function Lwe(){return SI(this).eachBefore(Bwe)}function jwe(e){return e.children}function zwe(e){return Array.isArray(e)?e[1]:null}function Bwe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function VX(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Jp(e){this.data=e,this.depth=this.height=0,this.parent=null}Jp.prototype=SI.prototype={constructor:Jp,count:Cwe,each:Ewe,eachAfter:Rwe,eachBefore:kwe,find:Twe,sum:Awe,sort:Mwe,path:Fwe,ancestors:Nwe,descendants:$we,leaves:Iwe,links:Owe,copy:Lwe,[Symbol.iterator]:Dwe};function C_(e){return e==null?null:YX(e)}function YX(e){if(typeof e!="function")throw new Error;return e}function kf(){return 0}function Ih(e){return function(){return e}}const Hwe=1664525,Uwe=1013904223,ez=4294967296;function Wwe(){let e=1;return()=>(e=(Hwe*e+Uwe)%ez)/ez}function Gwe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qwe(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Vwe(e,t){for(var n=0,i=(e=qwe(Array.from(e),t)).length,r=[],o,a;n<i;)o=e[n],a&&ZX(a,o)?++n:(a=Zwe(r=Ywe(r,o)),n=0);return a}function Ywe(e,t){var n,i;if(Tk(t,e))return[t];for(n=0;n<e.length;++n)if(Ax(t,e[n])&&Tk(E0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Ax(E0(e[n],e[i]),t)&&Ax(E0(e[n],t),e[i])&&Ax(E0(e[i],t),e[n])&&Tk(XX(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Ax(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function ZX(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function Tk(e,t){for(var n=0;n<t.length;++n)if(!ZX(e,t[n]))return!1;return!0}function Zwe(e){switch(e.length){case 1:return Xwe(e[0]);case 2:return E0(e[0],e[1]);case 3:return XX(e[0],e[1],e[2])}}function Xwe(e){return{x:e.x,y:e.y,r:e.r}}function E0(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-i,c=s-r,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(i+a+u/d*c)/2,r:(d+r+s)/2}}function XX(e,t,n){var i=e.x,r=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,h=i-a,m=i-u,g=r-s,y=r-c,x=l-o,b=d-o,w=i*i+r*r-o*o,S=w-a*a-s*s+l*l,k=w-u*u-c*c+d*d,R=m*g-h*y,M=(g*k-y*S)/(R*2)-i,T=(y*x-g*b)/R,N=(m*S-h*k)/(R*2)-r,z=(h*b-m*x)/R,H=T*T+z*z-1,U=2*(o+M*T+N*z),X=M*M+N*N-o*o,B=-(Math.abs(H)>1e-6?(U+Math.sqrt(U*U-4*H*X))/(2*H):X/U);return{x:i+M+T*B,y:r+N+z*B,r:B}}function tz(e,t,n){var i=e.x-t.x,r,o,a=e.y-t.y,s,l,u=i*i+a*a;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(r=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-s*a,n.y=e.y-r*a+s*i):(r=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x+r*i-s*a,n.y=t.y+r*a+s*i)):(n.x=t.x+n.r,n.y=t.y)}function nz(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function iz(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function Mx(e){this._=e,this.next=null,this.previous=null}function Kwe(e,t){if(!(o=(e=Gwe(e)).length))return 0;var n,i,r,o,a,s,l,u,c,d,h;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;tz(i,n,r=e[2]),n=new Mx(n),i=new Mx(i),r=new Mx(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<o;++l){tz(n._,i._,r=e[l]),r=new Mx(r),u=i.next,c=n.previous,d=i._.r,h=n._.r;do if(d<=h){if(nz(u._,r._)){i=u,n.next=i,i.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(nz(c._,r._)){n=c,n.next=i,i.previous=n,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,a=iz(n);(r=r.next)!==i;)(s=iz(r))<a&&(n=r,a=s);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Vwe(n,t),l=0;l<o;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function Jwe(e){return Math.sqrt(e.value)}function Qwe(){var e=null,t=1,n=1,i=kf;function r(o){const a=Wwe();return o.x=t/2,o.y=n/2,e?o.eachBefore(rz(e)).eachAfter(Ak(i,.5,a)).eachBefore(oz(1)):o.eachBefore(rz(Jwe)).eachAfter(Ak(kf,1,a)).eachAfter(Ak(i,o.r/Math.min(t,n),a)).eachBefore(oz(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=C_(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Ih(+o),r):i},r}function rz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Ak(e,t,n){return function(i){if(r=i.children){var r,o,a=r.length,s=e(i)*t||0,l;if(s)for(o=0;o<a;++o)r[o].r+=s;if(l=Kwe(r,n),s)for(o=0;o<a;++o)r[o].r-=s;i.r=l+s}}}function oz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function KX(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function zv(e,t,n,i,r){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(i-t)/e.value;++s<l;)a=o[s],a.y0=n,a.y1=r,a.x0=t,a.x1=t+=a.value*u}function e2e(){var e=1,t=1,n=0,i=!1;function r(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),i&&a.eachBefore(KX),a}function o(a,s){return function(l){l.children&&zv(l,l.x0,a*(l.depth+1)/s,l.x1,a*(l.depth+2)/s);var u=l.x0,c=l.y0,d=l.x1-n,h=l.y1-n;d<u&&(u=d=(u+d)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=h}}return r.round=function(a){return arguments.length?(i=!!a,r):i},r.size=function(a){return arguments.length?(e=+a[0],t=+a[1],r):[e,t]},r.padding=function(a){return arguments.length?(n=+a,r):n},r}var t2e={depth:-1},az={},Mk={};function n2e(e){return e.id}function i2e(e){return e.parentId}function sz(){var e=n2e,t=i2e,n;function i(r){var o=Array.from(r),a=e,s=t,l,u,c,d,h,m,g,y,x=new Map;if(n!=null){const b=o.map((k,R)=>r2e(n(k,R,r))),w=b.map(lz),S=new Set(b).add("");for(const k of w)S.has(k)||(S.add(k),b.push(k),w.push(lz(k)),o.push(Mk));a=(k,R)=>b[R],s=(k,R)=>w[R]}for(c=0,l=o.length;c<l;++c)u=o[c],m=o[c]=new Jp(u),(g=a(u,c,r))!=null&&(g+="")&&(y=m.id=g,x.set(y,x.has(y)?az:m)),(g=s(u,c,r))!=null&&(g+="")&&(m.parent=g);for(c=0;c<l;++c)if(m=o[c],g=m.parent){if(h=x.get(g),!h)throw new Error("missing: "+g);if(h===az)throw new Error("ambiguous: "+g);h.children?h.children.push(m):h.children=[m],m.parent=h}else{if(d)throw new Error("multiple roots");d=m}if(!d)throw new Error("no root");if(n!=null){for(;d.data===Mk&&d.children.length===1;)d=d.children[0],--l;for(let b=o.length-1;b>=0&&(m=o[b],m.data===Mk);--b)m.data=null}if(d.parent=t2e,d.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(VX),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=C_(r),i):e},i.parentId=function(r){return arguments.length?(t=C_(r),i):t},i.path=function(r){return arguments.length?(n=C_(r),i):n},i}function r2e(e){e=`${e}`;let t=e.length;return nM(e,t-1)&&!nM(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function lz(e){let t=e.length;if(t<2)return"";for(;--t>1&&!nM(e,t););return e.slice(0,t)}function nM(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function o2e(e,t){return e.parent===t.parent?1:2}function Fk(e){var t=e.children;return t?t[0]:e.t}function Pk(e){var t=e.children;return t?t[t.length-1]:e.t}function a2e(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function s2e(e){for(var t=0,n=0,i=e.children,r=i.length,o;--r>=0;)o=i[r],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function l2e(e,t,n){return e.a.parent===t.parent?e.a:n}function E_(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}E_.prototype=Object.create(Jp.prototype);function u2e(e){for(var t=new E_(e,0),n,i=[t],r,o,a,s;n=i.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)i.push(r=n.children[a]=new E_(o[a],a)),r.parent=n;return(t.parent=new E_(null,0)).children=[t],t}function c2e(){var e=o2e,t=1,n=1,i=null;function r(u){var c=u2e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),i)u.eachBefore(l);else{var d=u,h=u,m=u;u.eachBefore(function(w){w.x<d.x&&(d=w),w.x>h.x&&(h=w),w.depth>m.depth&&(m=w)});var g=d===h?1:e(d,h)/2,y=g-d.x,x=t/(h.x+g+y),b=n/(m.depth||1);u.eachBefore(function(w){w.x=(w.x+y)*x,w.y=w.depth*b})}return u}function o(u){var c=u.children,d=u.parent.children,h=u.i?d[u.i-1]:null;if(c){s2e(u);var m=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+e(u._,h._),u.m=u.z-m):u.z=m}else h&&(u.z=h.z+e(u._,h._));u.parent.A=s(u,h,u.parent.A||d[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,d){if(c){for(var h=u,m=u,g=c,y=h.parent.children[0],x=h.m,b=m.m,w=g.m,S=y.m,k;g=Pk(g),h=Fk(h),g&&h;)y=Fk(y),m=Pk(m),m.a=u,k=g.z+w-h.z-x+e(g._,h._),k>0&&(a2e(l2e(g,u,d),u,k),x+=k,b+=k),w+=g.m,x+=h.m,S+=y.m,b+=m.m;g&&!Pk(m)&&(m.t=g,m.m+=w-b),h&&!Fk(y)&&(y.t=h,y.m+=x-S,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r}function MS(e,t,n,i,r){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(r-n)/e.value;++s<l;)a=o[s],a.x0=t,a.x1=i,a.y0=n,a.y1=n+=a.value*u}var JX=(1+Math.sqrt(5))/2;function QX(e,t,n,i,r,o){for(var a=[],s=t.children,l,u,c=0,d=0,h=s.length,m,g,y=t.value,x,b,w,S,k,R,M;c<h;){m=r-n,g=o-i;do x=s[d++].value;while(!x&&d<h);for(b=w=x,R=Math.max(g/m,m/g)/(y*e),M=x*x*R,k=Math.max(w/M,M/b);d<h;++d){if(x+=u=s[d].value,u<b&&(b=u),u>w&&(w=u),M=x*x*R,S=Math.max(w/M,M/b),S>k){x-=u;break}k=S}a.push(l={value:x,dice:m<g,children:s.slice(c,d)}),l.dice?zv(l,n,i,r,y?i+=g*x/y:o):MS(l,n,i,y?n+=m*x/y:r,o),y-=x,c=d}return a}const eK=function e(t){function n(i,r,o,a,s){QX(t,i,r,o,a,s)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(JX);function f2e(){var e=eK,t=!1,n=1,i=1,r=[0],o=kf,a=kf,s=kf,l=kf,u=kf;function c(h){return h.x0=h.y0=0,h.x1=n,h.y1=i,h.eachBefore(d),r=[0],t&&h.eachBefore(KX),h}function d(h){var m=r[h.depth],g=h.x0+m,y=h.y0+m,x=h.x1-m,b=h.y1-m;x<g&&(g=x=(g+x)/2),b<y&&(y=b=(y+b)/2),h.x0=g,h.y0=y,h.x1=x,h.y1=b,h.children&&(m=r[h.depth+1]=o(h)/2,g+=u(h)-m,y+=a(h)-m,x-=s(h)-m,b-=l(h)-m,x<g&&(g=x=(g+x)/2),b<y&&(y=b=(y+b)/2),e(h,g,y,x,b))}return c.round=function(h){return arguments.length?(t=!!h,c):t},c.size=function(h){return arguments.length?(n=+h[0],i=+h[1],c):[n,i]},c.tile=function(h){return arguments.length?(e=YX(h),c):e},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(o=typeof h=="function"?h:Ih(+h),c):o},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:Ih(+h),c):a},c.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:Ih(+h),c):s},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Ih(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Ih(+h),c):u},c}function d2e(e,t,n,i,r){var o=e.children,a,s=o.length,l,u=new Array(s+1);for(u[0]=l=a=0;a<s;++a)u[a+1]=l+=o[a].value;c(0,s,e.value,t,n,i,r);function c(d,h,m,g,y,x,b){if(d>=h-1){var w=o[d];w.x0=g,w.y0=y,w.x1=x,w.y1=b;return}for(var S=u[d],k=m/2+S,R=d+1,M=h-1;R<M;){var T=R+M>>>1;u[T]<k?R=T+1:M=T}k-u[R-1]<u[R]-k&&d+1<R&&--R;var N=u[R]-S,z=m-N;if(x-g>b-y){var H=m?(g*z+x*N)/m:x;c(d,R,N,g,y,H,b),c(R,h,z,H,y,x,b)}else{var U=m?(y*z+b*N)/m:b;c(d,R,N,g,y,x,U),c(R,h,z,g,U,x,b)}}}function h2e(e,t,n,i,r){(e.depth&1?MS:zv)(e,t,n,i,r)}const p2e=function e(t){function n(i,r,o,a,s){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,d,h=-1,m,g=l.length,y=i.value;++h<g;){for(u=l[h],c=u.children,d=u.value=0,m=c.length;d<m;++d)u.value+=c[d].value;u.dice?zv(u,r,o,a,y?o+=(s-o)*u.value/y:s):MS(u,r,o,y?r+=(a-r)*u.value/y:a,s),y-=u.value}else i._squarify=l=QX(t,i,r,o,a,s),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(JX);function iM(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function CI(e){ne.call(this,null,e)}CI.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const m2e=e=>e.values;be(CI,ne,{transform(e,t){t.source||le("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(a=>{a.children&&U2(a.data)&&r.rem.push(a.data)}),this.value=o=SI({values:$e(e.keys).reduce((a,s)=>(a.key(s),a),g2e()).entries(r.source)},m2e),n&&o.each(a=>{a.children&&(a=qt(a.data),r.add.push(a),r.source.push(a))}),iM(o,Qe,Qe)),r.source.root=o,r}});function g2e(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const a=r.length,s=e[o++],l={},u={};let c=-1,d,h,m;for(;++c<a;)d=s(h=r[c])+"",(m=l[d])?m.push(h):l[d]=[h];for(d in l)u[d]=n(l[d],o);return u}function i(r,o){if(++o>e.length)return r;const a=[];for(const s in r)a.push({key:s,values:i(r[s],o)});return a}return t}function Vl(e){ne.call(this,null,e)}const y2e=(e,t)=>e.parent===t.parent?1:2;be(Vl,ne,{transform(e,t){(!t.source||!t.source.root)&&le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Id(e.sort,a=>a.data)),v2e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?y2e:bm);try{this.value=n(r)}catch(a){le(a)}return r.each(a=>x2e(a,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function v2e(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}function x2e(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}const rM=["x","y","r","depth","children"];function EI(e){Vl.call(this,e)}EI.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rM.length,default:rM}]};be(EI,Vl,{layout:Qwe,params:["radius","size","padding"],fields:rM});const oM=["x0","y0","x1","y1","depth","children"];function kI(e){Vl.call(this,e)}kI.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oM.length,default:oM}]};be(kI,Vl,{layout:e2e,params:["size","round","padding"],fields:oM});function RI(e){ne.call(this,null,e)}RI.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};be(RI,ne,{transform(e,t){t.source||le("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?iM(sz().id(e.key).parentId(e.parentKey)(r.source),e.key,Ko):iM(sz()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const uz={tidy:c2e,cluster:wwe},aM=["x","y","depth","children"];function TI(e){Vl.call(this,e)}TI.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:aM.length,default:aM}]};be(TI,Vl,{layout(e){const t=e||"tidy";if(tt(uz,t))return uz[t]();le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:aM});function AI(e){ne.call(this,[],e)}AI.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};be(AI,ne,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,a=>o[Qe(a)]=1),i.each(a=>{const s=a.data,l=a.parent&&a.parent.data;l&&o[Qe(s)]&&o[Qe(l)]&&r.add.push(qt({source:l,target:s}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Qe(a)]=1),n.forEach(a=>{(o[Qe(a.source)]||o[Qe(a.target)])&&r.mod.push(a)})),r}});const cz={binary:d2e,dice:zv,slice:MS,slicedice:h2e,squarify:eK,resquarify:p2e},sM=["x0","y0","x1","y1","depth","children"];function MI(e){Vl.call(this,e)}MI.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sM.length,default:sM}]};be(MI,Vl,{layout(){const e=f2e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{tt(cz,t)?e.tile(cz[t]):le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:sM});const _2e=Object.freeze(Object.defineProperty({__proto__:null,nest:CI,pack:EI,partition:kI,stratify:RI,tree:TI,treelinks:AI,treemap:MI},Symbol.toStringTag,{value:"Module"})),Nk=4278190080;function b2e(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function w2e(e,t,n,i,r){const o=e.width,a=e.height,s=i||r,l=tc(o,a).getContext("2d"),u=tc(o,a).getContext("2d"),c=s&&tc(o,a).getContext("2d");n.forEach(N=>k_(l,N,!1)),k_(u,t,!1),s&&k_(c,t,!0);const d=$k(l,o,a),h=$k(u,o,a),m=s&&$k(c,o,a),g=e.bitmap(),y=s&&e.bitmap();let x,b,w,S,k,R,M,T;for(b=0;b<a;++b)for(x=0;x<o;++x)k=b*o+x,R=d[k]&Nk,T=h[k]&Nk,M=s&&m[k]&Nk,(R||M||T)&&(w=e(x),S=e(b),!r&&(R||T)&&g.set(w,S),s&&(R||M)&&y.set(w,S));return[g,y]}function $k(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function k_(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(o=>k_(e,o.items,n))}):bo[i].draw(e,{items:n?t.map(S2e):t})}function S2e(e){const t=W2(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const nl=5,rr=31,Yy=32,Su=new Uint32Array(Yy+1),Sa=new Uint32Array(Yy+1);Sa[0]=0;Su[0]=~Sa[0];for(let e=1;e<=Yy;++e)Sa[e]=Sa[e-1]<<1|1,Su[e]=~Sa[e];function C2e(e,t){const n=new Uint32Array(~~((e*t+Yy)/Yy));function i(o,a){n[o]|=a}function r(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>nl]&1<<(s&rr)},set:(o,a)=>{const s=a*e+o;i(s>>>nl,1<<(s&rr))},clear:(o,a)=>{const s=a*e+o;r(s>>>nl,~(1<<(s&rr)))},getRange:(o,a,s,l)=>{let u=l,c,d,h,m;for(;u>=a;--u)if(c=u*e+o,d=u*e+s,h=c>>>nl,m=d>>>nl,h===m){if(n[h]&Su[c&rr]&Sa[(d&rr)+1])return!0}else{if(n[h]&Su[c&rr]||n[m]&Sa[(d&rr)+1])return!0;for(let g=h+1;g<m;++g)if(n[g])return!0}return!1},setRange:(o,a,s,l)=>{let u,c,d,h,m;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>nl,h=c>>>nl,d===h)i(d,Su[u&rr]&Sa[(c&rr)+1]);else for(i(d,Su[u&rr]),i(h,Sa[(c&rr)+1]),m=d+1;m<h;++m)i(m,4294967295)},clearRange:(o,a,s,l)=>{let u,c,d,h,m;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>nl,h=c>>>nl,d===h)r(d,Sa[u&rr]|Su[(c&rr)+1]);else for(r(d,Sa[u&rr]),r(h,Su[(c&rr)+1]),m=d+1;m<h;++m)r(m,0)},outOfBounds:(o,a,s,l)=>o<0||a<0||l>=t||s>=e}}function E2e(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),a=s=>~~((s+n)/i);return a.invert=s=>s*i-n,a.bitmap=()=>C2e(r,o),a.ratio=i,a.padding=n,a.width=e,a.height=t,a}function k2e(e,t,n,i){const r=e.width,o=e.height;return function(a){const s=a.datum.datum.items[i].items,l=s.length,u=a.datum.fontSize,c=mo.width(a.datum,a.datum.text);let d=0,h,m,g,y,x,b,w;for(let S=0;S<l;++S)h=s[S].x,g=s[S].y,m=s[S].x2===void 0?h:s[S].x2,y=s[S].y2===void 0?g:s[S].y2,x=(h+m)/2,b=(g+y)/2,w=Math.abs(m-h+y-g),w>=d&&(d=w,a.x=x,a.y=b);return x=c/2,b=u/2,h=a.x-x,m=a.x+x,g=a.y-b,y=a.y+b,a.align="center",h<0&&m<=r?a.align="left":0<=h&&r<m&&(a.align="right"),a.baseline="middle",g<0&&y<=o?a.baseline="top":0<=g&&o<y&&(a.baseline="bottom"),!0}}function ww(e,t,n,i,r,o){let a=n/2;return e-a<0||e+a>r||t-(a=i/2)<0||t+a>o}function Hu(e,t,n,i,r,o,a,s){const l=r*o/(i*2),u=e(t-l),c=e(t+l),d=e(n-(o=o/2)),h=e(n+o);return a.outOfBounds(u,d,c,h)||a.getRange(u,d,c,h)||s&&s.getRange(u,d,c,h)}function R2e(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1];function l(u,c,d,h,m){const g=e.invert(u),y=e.invert(c);let x=d,b=o,w;if(!ww(g,y,h,m,r,o)&&!Hu(e,g,y,m,h,x,a,s)&&!Hu(e,g,y,m,h,m,a,null)){for(;b-x>=1;)w=(x+b)/2,Hu(e,g,y,m,h,w,a,s)?b=w:x=w;if(x>d)return[g,y,x,!0]}}return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,m=mo.width(u.datum,u.datum.text);let g=n?h:0,y=!1,x=!1,b=0,w,S,k,R,M,T,N,z,H,U,X,B,O,j,q,K,W;for(let J=0;J<d;++J){for(w=c[J].x,k=c[J].y,S=c[J].x2===void 0?w:c[J].x2,R=c[J].y2===void 0?k:c[J].y2,w>S&&(W=w,w=S,S=W),k>R&&(W=k,k=R,R=W),H=e(w),X=e(S),U=~~((H+X)/2),B=e(k),j=e(R),O=~~((B+j)/2),N=U;N>=H;--N)for(z=O;z>=B;--z)K=l(N,z,g,m,h),K&&([u.x,u.y,g,y]=K);for(N=U;N<=X;++N)for(z=O;z<=j;++z)K=l(N,z,g,m,h),K&&([u.x,u.y,g,y]=K);!y&&!n&&(q=Math.abs(S-w+R-k),M=(w+S)/2,T=(k+R)/2,q>=b&&!ww(M,T,m,h,r,o)&&!Hu(e,M,T,h,m,h,a,null)&&(b=q,u.x=M,u.y=T,x=!0))}return y||x?(M=m/2,T=h/2,a.setRange(e(u.x-M),e(u.y-T),e(u.x+M),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const T2e=[-1,-1,1,1],A2e=[-1,1,-1,1];function M2e(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,m=mo.width(u.datum,u.datum.text),g=[];let y=n?h:0,x=!1,b=!1,w=0,S,k,R,M,T,N,z,H,U,X,B,O;for(let j=0;j<d;++j){for(S=c[j].x,R=c[j].y,k=c[j].x2===void 0?S:c[j].x2,M=c[j].y2===void 0?R:c[j].y2,g.push([e((S+k)/2),e((R+M)/2)]);g.length;)if([z,H]=g.pop(),!(a.get(z,H)||s.get(z,H)||l.get(z,H))){l.set(z,H);for(let q=0;q<4;++q)T=z+T2e[q],N=H+A2e[q],l.outOfBounds(T,N,T,N)||g.push([T,N]);if(T=e.invert(z),N=e.invert(H),U=y,X=o,!ww(T,N,m,h,r,o)&&!Hu(e,T,N,h,m,U,a,s)&&!Hu(e,T,N,h,m,h,a,null)){for(;X-U>=1;)B=(U+X)/2,Hu(e,T,N,h,m,B,a,s)?X=B:U=B;U>y&&(u.x=T,u.y=N,y=U,x=!0)}}!x&&!n&&(O=Math.abs(k-S+M-R),T=(S+k)/2,N=(R+M)/2,O>=w&&!ww(T,N,m,h,r,o)&&!Hu(e,T,N,h,m,h,a,null)&&(w=O,u.x=T,u.y=N,b=!0))}return x||b?(T=m/2,N=h/2,a.setRange(e(u.x-T),e(u.y-N),e(u.x+T),e(u.y+N)),u.align="center",u.baseline="middle",!0):!1}}const F2e=["right","center","left"],P2e=["bottom","middle","top"];function N2e(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1],l=i.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>o)return!1;let h=u.textWidth??0,m,g,y,x,b,w,S,k,R,M,T,N,z,H,U;for(let X=0;X<l;++X){if(m=(n[X]&3)-1,g=(n[X]>>>2&3)-1,y=m===0&&g===0||i[X]<0,x=m&&g?Math.SQRT1_2:1,b=i[X]<0?-1:1,w=c[1+m]+i[X]*m*x,T=c[4+g]+b*d*g/2+i[X]*g*x,k=T-d/2,R=T+d/2,N=e(w),H=e(k),U=e(R),!h)if(fz(N,N,H,U,a,s,w,w,k,R,c,y))h=mo.width(u.datum,u.datum.text);else continue;if(M=w+b*h*m/2,w=M-h/2,S=M+h/2,N=e(w),z=e(S),fz(N,z,H,U,a,s,w,S,k,R,c,y))return u.x=m?m*b<0?S:w:M,u.y=g?g*b<0?R:k:T,u.align=F2e[m*b+1],u.baseline=P2e[g*b+1],a.setRange(N,H,z,U),!0}return!1}}function fz(e,t,n,i,r,o,a,s,l,u,c,d){return!(r.outOfBounds(e,n,t,i)||(d&&o||r).getRange(e,n,t,i))}const Ik=0,Ok=4,Dk=8,Lk=0,jk=1,zk=2,$2e={"top-left":Ik+Lk,top:Ik+jk,"top-right":Ik+zk,left:Ok+Lk,middle:Ok+jk,right:Ok+zk,"bottom-left":Dk+Lk,bottom:Dk+jk,"bottom-right":Dk+zk},I2e={naive:k2e,"reduced-search":R2e,floodfill:M2e};function O2e(e,t,n,i,r,o,a,s,l,u,c){if(!e.length)return e;const d=Math.max(i.length,r.length),h=D2e(i,d),m=L2e(r,d),g=j2e(e[0].datum),y=g==="group"&&e[0].datum.items[l].marktype,x=y==="area",b=z2e(g,y,s,l),w=u===null||u===1/0,S=x&&c==="naive";let k=-1,R=-1;const M=e.map(H=>{const U=w?mo.width(H,H.text):void 0;return k=Math.max(k,U),R=Math.max(R,H.fontSize),{datum:H,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(H),textWidth:U}});u=u===null||u===1/0?Math.max(k,R)+Math.max(...i):u;const T=E2e(t[0],t[1],u);let N;if(!S){n&&M.sort((X,B)=>n(X.datum,B.datum));let H=!1;for(let X=0;X<m.length&&!H;++X)H=m[X]===5||h[X]<0;const U=(g&&a||x)&&e.map(X=>X.datum);N=o.length||U?w2e(T,U||[],o,H,x):b2e(T,a&&M)}const z=x?I2e[c](T,N,a,l):N2e(T,N,m,h);return M.forEach(H=>H.opacity=+z(H)),M}function D2e(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function L2e(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=$2e[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function j2e(e){return e&&e.mark&&e.mark.marktype}function z2e(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>r(o.datum):t==="line"?o=>{const a=o.datum.items[i].items;return r(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:r}const lM=["x","y","opacity","align","baseline"],tK=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function FI(e){ne.call(this,null,e)}FI.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:tK},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:lM.length,default:lM}]};be(FI,ne,{transform(e,t){function n(o){const a=e[o];return bt(a)&&t.modified(a.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&le("Size parameter should be specified as a [width, height] array.");const r=e.as||lM;return O2e(t.materialize(t.SOURCE).source||[],e.size,e.sort,$e(e.offset==null?1:e.offset),$e(e.anchor||tK),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[r[0]]=o.x,a[r[1]]=o.y,a[r[2]]=o.opacity,a[r[3]]=o.align,a[r[4]]=o.baseline}),t.reflow(i).modifies(r)}});const B2e=Object.freeze(Object.defineProperty({__proto__:null,label:FI},Symbol.toStringTag,{value:"Module"}));function nK(e,t){var n=[],i=function(c){return c(s)},r,o,a,s,l,u;if(t==null)n.push(e);else for(r={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function PI(e){ne.call(this,null,e)}PI.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};be(PI,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=nK(i,e.groupby),o=(e.groupby||[]).map(In),a=o.length,s=e.as||[In(e.x),In(e.y)],l=[];r.forEach(u=>{hq(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let h=0;h<a;++h)d[o[h]]=u.dims[h];d[s[0]]=c[0],d[s[1]]=c[1],l.push(qt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const uM={constant:cN,linear:fN,log:uq,exp:cq,pow:fq,quad:dN,poly:dq},H2e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function NI(e){ne.call(this,null,e)}NI.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(uM)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};be(NI,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=nK(i,e.groupby),o=(e.groupby||[]).map(In),a=e.method||"linear",s=e.order==null?3:e.order,l=H2e(a,s),u=e.as||[In(e.x),In(e.y)],c=uM[a],d=[];let h=e.extent;tt(uM,a)||le("Invalid regression method: "+a),h!=null&&a==="log"&&h[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),r.forEach(m=>{if(m.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const y=c(m,e.x,e.y,s);if(e.params){d.push(qt({keys:m.dims,coef:y.coef,rSquared:y.rSquared}));return}const x=h||ks(m,e.x),b=w=>{const S={};for(let k=0;k<o.length;++k)S[o[k]]=m.dims[k];S[u[0]]=w[0],S[u[1]]=w[1],d.push(qt(S))};a==="linear"||a==="constant"?x.forEach(w=>b([w,y.predict(w)])):K2(y.predict,x,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const U2e=Object.freeze(Object.defineProperty({__proto__:null,loess:PI,regression:NI},Symbol.toStringTag,{value:"Module"})),Rl=11102230246251565e-32,ji=134217729,W2e=(3+8*Rl)*Rl;function Bk(e,t,n,i,r){let o,a,s,l,u=t[0],c=i[0],d=0,h=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=i[++h]);let m=0;if(d<e&&h<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=c+o,s=o-(a-c),c=i[++h]),o=a,s!==0&&(r[m++]=s);d<e&&h<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h]),o=a,s!==0&&(r[m++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,s!==0&&(r[m++]=s);for(;h<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h],o=a,s!==0&&(r[m++]=s);return(o!==0||m===0)&&(r[m++]=o),m}function G2e(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Bv(e){return new Float64Array(e)}const q2e=(3+16*Rl)*Rl,V2e=(2+12*Rl)*Rl,Y2e=(9+64*Rl)*Rl*Rl,kh=Bv(4),dz=Bv(8),hz=Bv(12),pz=Bv(16),or=Bv(4);function Z2e(e,t,n,i,r,o,a){let s,l,u,c,d,h,m,g,y,x,b,w,S,k,R,M,T,N;const z=e-r,H=n-r,U=t-o,X=i-o;k=z*X,h=ji*z,m=h-(h-z),g=z-m,h=ji*X,y=h-(h-X),x=X-y,R=g*x-(k-m*y-g*y-m*x),M=U*H,h=ji*U,m=h-(h-U),g=U-m,h=ji*H,y=h-(h-H),x=H-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,kh[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,kh[1]=S-(b+d)+(d-M),N=w+b,d=N-w,kh[2]=w-(N-d)+(b-d),kh[3]=N;let B=G2e(4,kh),O=V2e*a;if(B>=O||-B>=O||(d=e-z,s=e-(z+d)+(d-r),d=n-H,u=n-(H+d)+(d-r),d=t-U,l=t-(U+d)+(d-o),d=i-X,c=i-(X+d)+(d-o),s===0&&l===0&&u===0&&c===0)||(O=Y2e*a+W2e*Math.abs(B),B+=z*c+X*s-(U*u+H*l),B>=O||-B>=O))return B;k=s*X,h=ji*s,m=h-(h-s),g=s-m,h=ji*X,y=h-(h-X),x=X-y,R=g*x-(k-m*y-g*y-m*x),M=l*H,h=ji*l,m=h-(h-l),g=l-m,h=ji*H,y=h-(h-H),x=H-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,or[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,or[1]=S-(b+d)+(d-M),N=w+b,d=N-w,or[2]=w-(N-d)+(b-d),or[3]=N;const j=Bk(4,kh,4,or,dz);k=z*c,h=ji*z,m=h-(h-z),g=z-m,h=ji*c,y=h-(h-c),x=c-y,R=g*x-(k-m*y-g*y-m*x),M=U*u,h=ji*U,m=h-(h-U),g=U-m,h=ji*u,y=h-(h-u),x=u-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,or[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,or[1]=S-(b+d)+(d-M),N=w+b,d=N-w,or[2]=w-(N-d)+(b-d),or[3]=N;const q=Bk(j,dz,4,or,hz);k=s*c,h=ji*s,m=h-(h-s),g=s-m,h=ji*c,y=h-(h-c),x=c-y,R=g*x-(k-m*y-g*y-m*x),M=l*u,h=ji*l,m=h-(h-l),g=l-m,h=ji*u,y=h-(h-u),x=u-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,or[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,or[1]=S-(b+d)+(d-M),N=w+b,d=N-w,or[2]=w-(N-d)+(b-d),or[3]=N;const K=Bk(q,hz,4,or,pz);return pz[K-1]}function Fx(e,t,n,i,r,o){const a=(t-o)*(n-r),s=(e-r)*(i-o),l=a-s,u=Math.abs(a+s);return Math.abs(l)>=q2e*u?l:-Z2e(e,t,n,i,r,o,u)}const mz=Math.pow(2,-52),Px=new Uint32Array(512);class Sw{static from(t,n=eSe,i=tSe){const r=t.length,o=new Float64Array(r*2);for(let a=0;a<r;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=i(s)}return new Sw(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,a=t.length>>1;let s=1/0,l=1/0,u=-1/0,c=-1/0;for(let z=0;z<a;z++){const H=t[2*z],U=t[2*z+1];H<s&&(s=H),U<l&&(l=U),H>u&&(u=H),U>c&&(c=U),this._ids[z]=z}const d=(s+u)/2,h=(l+c)/2;let m,g,y;for(let z=0,H=1/0;z<a;z++){const U=Hk(d,h,t[2*z],t[2*z+1]);U<H&&(m=z,H=U)}const x=t[2*m],b=t[2*m+1];for(let z=0,H=1/0;z<a;z++){if(z===m)continue;const U=Hk(x,b,t[2*z],t[2*z+1]);U<H&&U>0&&(g=z,H=U)}let w=t[2*g],S=t[2*g+1],k=1/0;for(let z=0;z<a;z++){if(z===m||z===g)continue;const H=J2e(x,b,w,S,t[2*z],t[2*z+1]);H<k&&(y=z,k=H)}let R=t[2*y],M=t[2*y+1];if(k===1/0){for(let U=0;U<a;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];np(this._ids,this._dists,0,a-1);const z=new Uint32Array(a);let H=0;for(let U=0,X=-1/0;U<a;U++){const B=this._ids[U],O=this._dists[B];O>X&&(z[H++]=B,X=O)}this.hull=z.subarray(0,H),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Fx(x,b,w,S,R,M)<0){const z=g,H=w,U=S;g=y,w=R,S=M,y=z,R=H,M=U}const T=Q2e(x,b,w,S,R,M);this._cx=T.x,this._cy=T.y;for(let z=0;z<a;z++)this._dists[z]=Hk(t[2*z],t[2*z+1],T.x,T.y);np(this._ids,this._dists,0,a-1),this._hullStart=m;let N=3;i[m]=n[y]=g,i[g]=n[m]=y,i[y]=n[g]=m,r[m]=0,r[g]=1,r[y]=2,o.fill(-1),o[this._hashKey(x,b)]=m,o[this._hashKey(w,S)]=g,o[this._hashKey(R,M)]=y,this.trianglesLen=0,this._addTriangle(m,g,y,-1,-1,-1);for(let z=0,H,U;z<this._ids.length;z++){const X=this._ids[z],B=t[2*X],O=t[2*X+1];if(z>0&&Math.abs(B-H)<=mz&&Math.abs(O-U)<=mz||(H=B,U=O,X===m||X===g||X===y))continue;let j=0;for(let Q=0,ae=this._hashKey(B,O);Q<this._hashSize&&(j=o[(ae+Q)%this._hashSize],!(j!==-1&&j!==i[j]));Q++);j=n[j];let q=j,K;for(;K=i[q],Fx(B,O,t[2*q],t[2*q+1],t[2*K],t[2*K+1])>=0;)if(q=K,q===j){q=-1;break}if(q===-1)continue;let W=this._addTriangle(q,X,i[q],-1,-1,r[q]);r[X]=this._legalize(W+2),r[q]=W,N++;let J=i[q];for(;K=i[J],Fx(B,O,t[2*J],t[2*J+1],t[2*K],t[2*K+1])<0;)W=this._addTriangle(J,X,K,r[X],-1,r[J]),r[X]=this._legalize(W+2),i[J]=J,N--,J=K;if(q===j)for(;K=n[q],Fx(B,O,t[2*K],t[2*K+1],t[2*q],t[2*q+1])<0;)W=this._addTriangle(K,X,q,-1,r[q],r[K]),this._legalize(W+2),r[K]=W,i[q]=q,N--,q=K;this._hullStart=n[X]=q,i[q]=n[J]=X,i[X]=J,o[this._hashKey(B,O)]=X,o[this._hashKey(t[2*q],t[2*q+1])]=q}this.hull=new Uint32Array(N);for(let z=0,H=this._hullStart;z<N;z++)this.hull[z]=H,H=i[H];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(X2e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,a=0;for(;;){const s=i[t],l=t-t%3;if(a=l+(t+2)%3,s===-1){if(o===0)break;t=Px[--o];continue}const u=s-s%3,c=l+(t+1)%3,d=u+(s+2)%3,h=n[a],m=n[t],g=n[c],y=n[d];if(K2e(r[2*h],r[2*h+1],r[2*m],r[2*m+1],r[2*g],r[2*g+1],r[2*y],r[2*y+1])){n[t]=y,n[s]=h;const b=i[d];if(b===-1){let S=this._hullStart;do{if(this._hullTri[S]===d){this._hullTri[S]=t;break}S=this._hullPrev[S]}while(S!==this._hullStart)}this._link(t,b),this._link(s,i[a]),this._link(a,d);const w=u+(s+1)%3;o<Px.length&&(Px[o++]=w)}else{if(o===0)break;t=Px[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=i,this._link(s,r),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function X2e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Hk(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function K2e(e,t,n,i,r,o,a,s){const l=e-a,u=t-s,c=n-a,d=i-s,h=r-a,m=o-s,g=l*l+u*u,y=c*c+d*d,x=h*h+m*m;return l*(d*x-y*m)-u*(c*x-y*h)+g*(c*m-d*h)<0}function J2e(e,t,n,i,r,o){const a=n-e,s=i-t,l=r-e,u=o-t,c=a*a+s*s,d=l*l+u*u,h=.5/(a*u-s*l),m=(u*c-s*d)*h,g=(a*d-l*c)*h;return m*m+g*g}function Q2e(e,t,n,i,r,o){const a=n-e,s=i-t,l=r-e,u=o-t,c=a*a+s*s,d=l*l+u*u,h=.5/(a*u-s*l),m=e+(u*c-s*d)*h,g=t+(a*d-l*c)*h;return{x:m,y:g}}function np(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],a=t[o];let s=r-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const r=n+i>>1;let o=n+1,a=i;zg(e,r,o),t[e[n]]>t[e[i]]&&zg(e,n,i),t[e[o]]>t[e[i]]&&zg(e,o,i),t[e[n]]>t[e[o]]&&zg(e,n,o);const s=e[o],l=t[s];for(;;){do o++;while(t[e[o]]<l);do a--;while(t[e[a]]>l);if(a<o)break;zg(e,o,a)}e[n+1]=e[a],e[a]=s,i-o+1>=a-n?(np(e,t,o,i),np(e,t,n,a-1)):(np(e,t,n,a-1),np(e,t,o,i))}}function zg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function eSe(e){return e[0]}function tSe(e){return e[1]}const gz=1e-6;class If{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>gz||Math.abs(this._y1-o)>gz)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class cM{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let nSe=class{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let o,a;const s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y=0,x=0,b=i.length,w,S;y<b;y+=3,x+=2){const k=i[y]*2,R=i[y+1]*2,M=i[y+2]*2,T=t[k],N=t[k+1],z=t[R],H=t[R+1],U=t[M],X=t[M+1],B=z-T,O=H-N,j=U-T,q=X-N,K=(B*q-O*j)*2;if(Math.abs(K)<1e-9){if(o===void 0){o=a=0;for(const J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}const W=1e9*Math.sign((o-T)*q-(a-N)*j);w=(T+U)/2-W*q,S=(N+X)/2+W*j}else{const W=1/K,J=B*B+O*O,Q=j*j+q*q;w=T+(q*J-O*Q)*W,S=N+(B*Q-j*J)*W}s[x]=w,s[x+1]=S}let l=n[n.length-1],u,c=l*4,d,h=t[2*l],m,g=t[2*l+1];r.fill(0);for(let y=0;y<n.length;++y)l=n[y],u=c,d=h,m=g,c=l*4,h=t[2*l],g=t[2*l+1],r[u+2]=r[c]=m-g,r[u+3]=r[c+1]=h-d}render(t){const n=t==null?t=new If:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const h=i[c];if(h<c)continue;const m=Math.floor(c/3)*2,g=Math.floor(h/3)*2,y=a[m],x=a[m+1],b=a[g],w=a[g+1];this._renderSegment(y,x,b,w,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const d=Math.floor(r[u]/3)*2,h=a[d],m=a[d+1],g=l*4,y=this._project(h,m,s[g+2],s[g+3]);y&&this._renderSegment(h,m,y[0],y[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new If:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new If:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&n.lineTo(r[a],r[a+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new cM;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let a;const s=this._regioncode(t,n),l=this._regioncode(i,r);s===0&&l===0?(o.moveTo(t,n),o.lineTo(i,r)):(a=this._clipSegment(t,n,i,r,s,l))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,l=r.length;s<l;s+=2)if(n[o]===r[s]&&n[o+1]===r[s+1]&&n[(o+2)%a]===r[(s+l-2)%l]&&n[(o+3)%a]===r[(s+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,a=i[t];if(a===-1)return null;const s=[];let l=a;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==a&&l!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,o,a,s=n[i-2],l=n[i-1],u,c=this._regioncode(s,l),d,h=0;for(let m=0;m<i;m+=2)if(o=s,a=l,s=n[m],l=n[m+1],u=c,c=this._regioncode(s,l),u===0&&c===0)d=h,h=0,r?r.push(s,l):r=[s,l];else{let g,y,x,b,w;if(u===0){if((g=this._clipSegment(o,a,s,l,u,c))===null)continue;[y,x,b,w]=g}else{if((g=this._clipSegment(s,l,o,a,c,u))===null)continue;[b,w,y,x]=g,d=h,h=this._edgecode(y,x),d&&h&&this._edge(t,d,h,r,r.length),r?r.push(y,x):r=[y,x]}d=h,h=this._edgecode(b,w),d&&h&&this._edge(t,d,h,r,r.length),r?r.push(b,w):r=[b,w]}if(r)d=h,h=this._edgecode(r[0],r[1]),d&&h&&this._edge(t,d,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,a){const s=o<a;for(s&&([t,n,i,r,o,a]=[i,r,t,n,a,o]);;){if(o===0&&a===0)return s?[i,r,t,n]:[t,n,i,r];if(o&a)return null;let l,u,c=o||a;c&8?(l=t+(i-t)*(this.ymax-n)/(r-n),u=this.ymax):c&4?(l=t+(i-t)*(this.ymin-n)/(r-n),u=this.ymin):c&2?(u=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(u=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(i=l,r=u,a=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,o,a){let s=Array.from(n),l;if((l=this._project(s[0],s[1],i,r))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(l[0],l[1]),s=this._clipFinite(t,s))for(let u=0,c=s.length,d,h=this._edgecode(s[c-2],s[c-1]);u<c;u+=2)d=h,h=this._edgecode(s[u],s[u+1]),d&&h&&(u=this._edge(t,d,h,s,u),c=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,i,r,o){for(;n!==i;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(r[o]!==a||r[o+1]!==s)&&this.contains(t,a,s)&&(r.splice(o,0,a,s),o+=2)}return o}_project(t,n,i,r){let o=1/0,a,s,l;if(r<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/r)<o&&(l=this.ymin,s=t+(o=a)*i)}else if(r>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/r)<o&&(l=this.ymax,s=t+(o=a)*i)}if(i>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/i)<o&&(s=this.xmax,l=n+(o=a)*r)}else if(i<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/i)<o&&(s=this.xmin,l=n+(o=a)*r)}return[s,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const iSe=2*Math.PI,Rh=Math.pow;function rSe(e){return e[0]}function oSe(e){return e[1]}function aSe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],a=2*t[i+2];if((n[a]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}function sSe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class $I{static from(t,n=rSe,i=oSe,r){return new $I("length"in t?lSe(t,n,i,r):Float64Array.from(uSe(t,n,i,r)))}constructor(t){this._delaunator=new Sw(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&aSe(t)){this.collinear=Int32Array.from({length:n.length/2},(h,m)=>m).sort((h,m)=>n[2*h]-n[2*m]||n[2*h+1]-n[2*m+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,m=n.length/2;h<m;++h){const g=sSe(n[2*h],n[2*h+1],d);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Sw(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(i[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=r.length;l<u;++l)s[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new nSe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:a,collinear:s}=this;if(s){const d=s.indexOf(t);d>0&&(yield s[d-1]),d<s.length-1&&(yield s[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=o[u],u===-1){const d=i[(r[t]+1)%i.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:a,halfedges:s,triangles:l,points:u}=this;if(r[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=Rh(n-u[t*2],2)+Rh(i-u[t*2+1],2);const h=r[t];let m=h;do{let g=l[m];const y=Rh(n-u[g*2],2)+Rh(i-u[g*2+1],2);if(y<d&&(d=y,c=g),m=m%3===2?m-2:m+1,l[m]!==t)break;if(m=s[m],m===-1){if(m=o[(a[t]+1)%o.length],m!==g&&Rh(n-u[m*2],2)+Rh(i-u[m*2+1],2)<d)return m;break}}while(m!==h);return c}render(t){const n=t==null?t=new If:void 0,{points:i,halfedges:r,triangles:o}=this;for(let a=0,s=r.length;a<s;++a){const l=r[a];if(l<a)continue;const u=o[a]*2,c=o[l]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new If:void 0,{points:r}=this;for(let o=0,a=r.length;o<a;o+=2){const s=r[o],l=r[o+1];t.moveTo(s+n,l),t.arc(s,l,n,0,iSe)}return i&&i.value()}renderHull(t){const n=t==null?t=new If:void 0,{hull:i,points:r}=this,o=i[0]*2,a=i.length;t.moveTo(r[o],r[o+1]);for(let s=1;s<a;++s){const l=2*i[s];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new cM;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new If:void 0,{points:r,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,l=o[t+2]*2;return n.moveTo(r[a],r[a+1]),n.lineTo(r[s],r[s+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new cM;return this.renderTriangle(t,n),n.value()}}function lSe(e,t,n,i){const r=e.length,o=new Float64Array(r*2);for(let a=0;a<r;++a){const s=e[a];o[a*2]=t.call(i,s,a,e),o[a*2+1]=n.call(i,s,a,e)}return o}function*uSe(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}function II(e){ne.call(this,null,e)}II.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const cSe=[-1e5,-1e5,1e5,1e5];be(II,ne,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:cSe;const o=this.value=$I.from(i,e.x,e.y).voronoi(r);for(let a=0,s=i.length;a<s;++a){const l=o.cellPolygon(a);i[a][n]=l&&!dSe(l)?fSe(l):null}return t.reflow(e.modified()).modifies(n)}});function fSe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function dSe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const hSe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:II},Symbol.toStringTag,{value:"Module"}));var Uk=Math.PI/180,k0=64,R_=2048;function pSe(){var e=[256,256],t,n,i,r,o,a,s,l=iK,u=[],c=Math.random,d={};d.layout=function(){for(var g=h(tc()),y=_Se((e[0]>>5)*e[1]),x=null,b=u.length,w=-1,S=[],k=u.map(M=>({text:t(M),font:n(M),style:r(M),weight:o(M),rotate:a(M),size:~~(i(M)+1e-14),padding:s(M),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:M})).sort((M,T)=>T.size-M.size);++w<b;){var R=k[w];R.x=e[0]*(c()+.5)>>1,R.y=e[1]*(c()+.5)>>1,mSe(g,R,k,w),R.hasText&&m(y,R,x)&&(S.push(R),x?ySe(x,R):x=[{x:R.x+R.x0,y:R.y+R.y0},{x:R.x+R.x1,y:R.y+R.y1}],R.x-=e[0]>>1,R.y-=e[1]>>1)}return S};function h(g){g.width=g.height=1;var y=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(k0<<5)/y,g.height=R_/y;var x=g.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",{context:x,ratio:y}}function m(g,y,x){for(var b=y.x,w=y.y,S=Math.sqrt(e[0]*e[0]+e[1]*e[1]),k=l(e),R=c()<.5?1:-1,M=-R,T,N,z;(T=k(M+=R))&&(N=~~T[0],z=~~T[1],!(Math.min(Math.abs(N),Math.abs(z))>=S));)if(y.x=b+N,y.y=w+z,!(y.x+y.x0<0||y.y+y.y0<0||y.x+y.x1>e[0]||y.y+y.y1>e[1])&&(!x||!gSe(y,g,e[0]))&&(!x||vSe(y,x))){for(var H=y.sprite,U=y.width>>5,X=e[0]>>5,B=y.x-(U<<4),O=B&127,j=32-O,q=y.y1-y.y0,K=(y.y+y.y0)*X+(B>>5),W,J=0;J<q;J++){W=0;for(var Q=0;Q<=U;Q++)g[K+Q]|=W<<j|(Q<U?(W=H[J*U+Q])>>>O:0);K+=X}return y.sprite=null,!0}return!1}return d.words=function(g){return arguments.length?(u=g,d):u},d.size=function(g){return arguments.length?(e=[+g[0],+g[1]],d):e},d.font=function(g){return arguments.length?(n=af(g),d):n},d.fontStyle=function(g){return arguments.length?(r=af(g),d):r},d.fontWeight=function(g){return arguments.length?(o=af(g),d):o},d.rotate=function(g){return arguments.length?(a=af(g),d):a},d.text=function(g){return arguments.length?(t=af(g),d):t},d.spiral=function(g){return arguments.length?(l=bSe[g]||g,d):l},d.fontSize=function(g){return arguments.length?(i=af(g),d):i},d.padding=function(g){return arguments.length?(s=af(g),d):s},d.random=function(g){return arguments.length?(c=g,d):c},d}function mSe(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,(k0<<5)/o,R_/o);var a=0,s=0,l=0,u=n.length,c,d,h,m,g;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=r.measureText(t.text+"m").width*o,h=t.size<<1,t.rotate){var y=Math.sin(t.rotate*Uk),x=Math.cos(t.rotate*Uk),b=c*x,w=c*y,S=h*x,k=h*y;c=Math.max(Math.abs(b+k),Math.abs(b-k))+31>>5<<5,h=~~Math.max(Math.abs(w+S),Math.abs(w-S))}else c=c+31>>5<<5;if(h>l&&(l=h),a+c>=k0<<5&&(a=0,s+=l,l=0),s+h>=R_)break;r.translate((a+(c>>1))/o,(s+(h>>1))/o),t.rotate&&r.rotate(t.rotate*Uk),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=h,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var R=r.getImageData(0,0,(k0<<5)/o,R_/o).data,M=[];--i>=0;)if(t=n[i],!!t.hasText){for(c=t.width,d=c>>5,h=t.y1-t.y0,m=0;m<h*d;m++)M[m]=0;if(a=t.xoff,a==null)return;s=t.yoff;var T=0,N=-1;for(g=0;g<h;g++){for(m=0;m<c;m++){var z=d*g+(m>>5),H=R[(s+g)*(k0<<5)+(a+m)<<2]?1<<31-m%32:0;M[z]|=H,T|=H}T?N=g:(t.y0++,h--,g--,s++)}t.y1=t.y0+N,t.sprite=M.slice(0,(t.y1-t.y0)*d)}}}function gSe(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,o=e.x-(r<<4),a=o&127,s=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,d=0;d<l;d++){c=0;for(var h=0;h<=r;h++)if((c<<s|(h<r?(c=i[d*r+h])>>>a:0))&t[u+h])return!0;u+=n}return!1}function ySe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function vSe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function iK(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function xSe(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function _Se(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function af(e){return typeof e=="function"?e:function(){return e}}var bSe={archimedean:iK,rectangular:xSe};const rK=["x","y","font","fontSize","fontStyle","fontWeight","angle"],wSe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function OI(e){ne.call(this,pSe(),e)}OI.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:rK}]};be(OI,ne,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&le("Wordcloud size dimensions must be non-zero.");function n(g){const y=e[g];return bt(y)&&t.modified(y.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||wSe.some(n)))return;const r=t.materialize(t.SOURCE).source,o=this.value,a=e.as||rK;let s=e.fontSize||14,l;if(bt(s)?l=e.fontSizeRange:s=er(s),l){const g=s,y=Ut("sqrt")().domain(ks(r,g)).range(l);s=x=>y(g(x))}r.forEach(g=>{g[a[0]]=NaN,g[a[1]]=NaN,g[a[3]]=0});const u=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Qo).layout(),c=o.size(),d=c[0]>>1,h=c[1]>>1,m=u.length;for(let g=0,y,x;g<m;++g)y=u[g],x=y.datum,x[a[0]]=y.x+d,x[a[1]]=y.y+h,x[a[2]]=y.font,x[a[3]]=y.size,x[a[4]]=y.style,x[a[5]]=y.weight,x[a[6]]=y.rotate;return t.reflow(i).modifies(a)}});const SSe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:OI},Symbol.toStringTag,{value:"Module"})),CSe=e=>new Uint8Array(e),ESe=e=>new Uint16Array(e),J0=e=>new Uint32Array(e);function kSe(){let e=8,t=[],n=J0(0),i=Nx(0,e),r=Nx(0,e);return{data:()=>t,seen:()=>n=RSe(n,t.length),add(o){for(let a=0,s=t.length,l=o.length,u;a<l;++a)u=o[a],u._index=s++,t.push(u)},remove(o,a){const s=t.length,l=Array(s-o),u=t;let c,d,h;for(d=0;!a[d]&&d<s;++d)l[d]=t[d],u[d]=d;for(h=d;d<s;++d)c=t[d],a[d]?u[d]=-1:(u[d]=h,i[h]=i[d],r[h]=r[d],l[h]=c,c._index=h++),i[d]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){i[o]|=a},clear(o,a){i[o]&=~a},resize(o,a){const s=i.length;(o>s||a>e)&&(e=Math.max(a,e),i=Nx(o,e,i),r=Nx(o,e))}}}function RSe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Nx(e,t,n){const i=(t<257?CSe:t<65537?ESe:J0)(e);return n&&i.set(n),i}function yz(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const a=this,s=a.bisect(a.range,r.value),l=r.index,u=s[0],c=s[1],d=l.length;let h;for(h=0;h<u;++h)o[l[h]]|=i;for(h=c;h<d;++h)o[l[h]]|=i;return a}}}function vz(){let e=J0(0),t=[],n=0;function i(s,l,u){if(!l.length)return[];const c=n,d=l.length,h=J0(d);let m=Array(d),g,y,x;for(x=0;x<d;++x)m[x]=s(l[x]),h[x]=x;if(m=TSe(m,h),c)g=t,y=e,t=Array(c+d),e=J0(c+d),ASe(u,g,y,c,m,h,d,t,e);else{if(u>0)for(x=0;x<d;++x)h[x]+=u;t=m,e=h}return n=c+d,{index:h,value:m}}function r(s,l){const u=n;let c,d,h;for(d=0;!l[e[d]]&&d<u;++d);for(h=d;d<u;++d)l[c=e[d]]||(e[h]=c,t[h]=t[d],++h);n=u-s}function o(s){for(let l=0,u=n;l<u;++l)e[l]=s[e[l]]}function a(s,l){let u;return l?u=l.length:(l=t,u=n),[Ufe(l,s[0],0,u),lc(l,s[1],0,u)]}return{insert:i,remove:r,bisect:a,reindex:o,index:()=>e,size:()=>n}}function TSe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),qfe(e,t)}function ASe(e,t,n,i,r,o,a,s,l){let u=0,c=0,d;for(d=0;u<i&&c<a;++d)t[u]<r[c]?(s[d]=t[u],l[d]=n[u++]):(s[d]=r[c],l[d]=o[c++]+e);for(;u<i;++u,++d)s[d]=t[u],l[d]=n[u];for(;c<a;++c,++d)s[d]=r[c],l[d]=o[c]+e}function DI(e){ne.call(this,kSe(),e),this._indices=null,this._dims=null}DI.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};be(DI,ne,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],a=i.length;let s=0,l,u;for(;s<a;++s)l=n[s].fname,u=r[l]||(r[l]=vz()),o.push(yz(u,s,i[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,a=this._dims,s=this.value,l=s.curr(),u=s.prev(),c=s.all(),d=n.rem=n.add,h=n.mod,m=r.length,g={};let y,x,b,w,S,k,R,M,T;if(u.set(l),t.rem.length&&(S=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(k={},w=t.mod,R=0,M=w.length;R<M;++R)k[w[R]._index]=1;for(R=0;R<m;++R)T=i[R],(!a[R]||e.modified("fields",R)||t.modified(T.fields))&&(b=T.fname,(y=g[b])||(o[b]=x=vz(),g[b]=y=x.insert(T,t.source,0)),a[R]=yz(x,R,r[R]).onAdd(y,l));for(R=0,M=s.data().length;R<M;++R)S[R]||(u[R]!==l[R]?d.push(R):k[R]&&l[R]!==c&&h.push(R));return s.mask=(1<<m)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,a=this._indices,s=e.fields,l={},u=n.add,c=r.size()+i.length,d=o.length;let h=r.size(),m,g,y;r.resize(c,d),r.add(i);const x=r.curr(),b=r.prev(),w=r.all();for(m=0;m<d;++m)g=s[m].fname,y=l[g]||(l[g]=a[g].insert(s[m],i,h)),o[m].onAdd(y,x);for(;h<c;++h)b[h]=w,x[h]!==w&&u.push(h)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),a=e.mod;let s,l,u;for(s=0,l=a.length;s<l;++s)u=a[s]._index,r[u]!==o&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),a=r.prev(),s=r.all(),l={},u=n.rem,c=t.rem;let d,h,m,g;for(d=0,h=c.length;d<h;++d)m=c[d]._index,l[m]=1,a[m]=g=o[m],o[m]=s,g!==s&&u.push(m);for(m in i)i[m].remove(h,l);return this.reindex(t,h,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const a in i)i[a].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,a=i.length;let s=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++s);if(s===1)s=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,s=0;u<a;++u)e.modified("query",u)&&(s|=i[u].one,this.incrementAll(i[u],r[u],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),a=r.curr(),s=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],h=c[1],m=u[0],g=u[1],y=e.one;let x,b,w;if(d<m)for(x=d,b=Math.min(m,h);x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;else if(d>m)for(x=m,b=Math.min(d,g);x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;if(h>g)for(x=Math.max(d,g),b=h;x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;else if(h<g)for(x=Math.max(m,h),b=g;x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,o=r.curr(),a=e.index(),s=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=s[0],h=s[1],m=e.one;let g,y,x;if(u<d)for(g=u,y=Math.min(d,c);g<y;++g)x=a[g],o[x]^=m,n.push(x);else if(u>d)for(g=d,y=Math.min(u,h);g<y;++g)x=a[g],o[x]^=m,i.push(x);if(c>h)for(g=Math.max(u,h),y=c;g<y;++g)x=a[g],o[x]^=m,n.push(x);else if(c<h)for(g=Math.max(d,c),y=h;g<y;++g)x=a[g],o[x]^=m,i.push(x);e.range=t.slice()}});function LI(e){ne.call(this,null,e)}LI.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};be(LI,ne,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&n))return t.StopPropagation;const o=t.fork(t.ALL),a=i.data(),s=i.curr(),l=i.prev(),u=c=>s[c]&n?null:a[c];return o.filter(o.MOD,u),r&r-1?(o.filter(o.ADD,c=>{const d=s[c]&n;return!d&&d^l[c]&n?a[c]:null}),o.filter(o.REM,c=>{const d=s[c]&n;return d&&!(d^(d^l[c]&n))?a[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(s[c]&n)===r?a[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const MSe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:DI,resolvefilter:LI},Symbol.toStringTag,{value:"Module"})),FSe="RawCode",hd="Literal",PSe="Property",NSe="Identifier",$Se="ArrayExpression",ISe="BinaryExpression",oK="CallExpression",OSe="ConditionalExpression",DSe="LogicalExpression",LSe="MemberExpression",jSe="ObjectExpression",zSe="UnaryExpression";function Ha(e){this.type=e}Ha.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=BSe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function BSe(e){switch(e.type){case $Se:return e.elements;case ISe:case DSe:return[e.left,e.right];case oK:return[e.callee].concat(e.arguments);case OSe:return[e.test,e.consequent,e.alternate];case LSe:return[e.object,e.property];case jSe:return e.properties;case PSe:return[e.key,e.value];case zSe:return[e.argument];case NSe:case hd:case FSe:default:return[]}}var js,qe,se,Xi,Qt,FS=1,Hv=2,pd=3,Lc=4,PS=5,jd=6,$r=7,Uv=8,HSe=9;js={};js[FS]="Boolean";js[Hv]="<end>";js[pd]="Identifier";js[Lc]="Keyword";js[PS]="Null";js[jd]="Numeric";js[$r]="Punctuator";js[Uv]="String";js[HSe]="RegularExpression";var USe="ArrayExpression",WSe="BinaryExpression",GSe="CallExpression",qSe="ConditionalExpression",aK="Identifier",VSe="Literal",YSe="LogicalExpression",ZSe="MemberExpression",XSe="ObjectExpression",KSe="Property",JSe="UnaryExpression",hi="Unexpected token %0",QSe="Unexpected number",eCe="Unexpected string",tCe="Unexpected identifier",nCe="Unexpected reserved word",iCe="Unexpected end of input",fM="Invalid regular expression",Wk="Invalid regular expression: missing /",sK="Octal literals are not allowed in strict mode.",rCe="Duplicate data property in object literal not allowed in strict mode",ki="ILLEGAL",Zy="Disabled.",oCe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),aCe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function NS(e,t){if(!e)throw new Error("ASSERT: "+t)}function ul(e){return e>=48&&e<=57}function jI(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Q0(e){return"01234567".indexOf(e)>=0}function sCe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Xy(e){return e===10||e===13||e===8232||e===8233}function Wv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&oCe.test(String.fromCharCode(e))}function Cw(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&aCe.test(String.fromCharCode(e))}const lCe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function lK(){for(;se<Xi;){const e=qe.charCodeAt(se);if(sCe(e)||Xy(e))++se;else break}}function dM(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)se<Xi&&jI(qe[se])?(i=qe[se++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):Bt({},hi,ki);return String.fromCharCode(r)}function uCe(){var e,t,n,i;for(e=qe[se],t=0,e==="}"&&Bt({},hi,ki);se<Xi&&(e=qe[se++],!!jI(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Bt({},hi,ki),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function uK(){var e,t;for(e=qe.charCodeAt(se++),t=String.fromCharCode(e),e===92&&(qe.charCodeAt(se)!==117&&Bt({},hi,ki),++se,e=dM("u"),(!e||e==="\\"||!Wv(e.charCodeAt(0)))&&Bt({},hi,ki),t=e);se<Xi&&(e=qe.charCodeAt(se),!!Cw(e));)++se,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),qe.charCodeAt(se)!==117&&Bt({},hi,ki),++se,e=dM("u"),(!e||e==="\\"||!Cw(e.charCodeAt(0)))&&Bt({},hi,ki),t+=e);return t}function cCe(){var e,t;for(e=se++;se<Xi;){if(t=qe.charCodeAt(se),t===92)return se=e,uK();if(Cw(t))++se;else break}return qe.slice(e,se)}function fCe(){var e,t,n;return e=se,t=qe.charCodeAt(se)===92?uK():cCe(),t.length===1?n=pd:lCe.hasOwnProperty(t)?n=Lc:t==="null"?n=PS:t==="true"||t==="false"?n=FS:n=pd,{type:n,value:t,start:e,end:se}}function Gk(){var e=se,t=qe.charCodeAt(se),n,i=qe[se],r,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++se,{type:$r,value:String.fromCharCode(t),start:e,end:se};default:if(n=qe.charCodeAt(se+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return se+=2,{type:$r,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:se};case 33:case 61:return se+=2,qe.charCodeAt(se)===61&&++se,{type:$r,value:qe.slice(e,se),start:e,end:se}}}if(a=qe.substr(se,4),a===">>>=")return se+=4,{type:$r,value:a,start:e,end:se};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return se+=3,{type:$r,value:o,start:e,end:se};if(r=o.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return se+=2,{type:$r,value:r,start:e,end:se};if(r==="//"&&Bt({},hi,ki),"<>=!+-*%&|^/".indexOf(i)>=0)return++se,{type:$r,value:i,start:e,end:se};Bt({},hi,ki)}function dCe(e){let t="";for(;se<Xi&&jI(qe[se]);)t+=qe[se++];return t.length===0&&Bt({},hi,ki),Wv(qe.charCodeAt(se))&&Bt({},hi,ki),{type:jd,value:parseInt("0x"+t,16),start:e,end:se}}function hCe(e){let t="0"+qe[se++];for(;se<Xi&&Q0(qe[se]);)t+=qe[se++];return(Wv(qe.charCodeAt(se))||ul(qe.charCodeAt(se)))&&Bt({},hi,ki),{type:jd,value:parseInt(t,8),octal:!0,start:e,end:se}}function xz(){var e,t,n;if(n=qe[se],NS(ul(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=se,e="",n!=="."){if(e=qe[se++],n=qe[se],e==="0"){if(n==="x"||n==="X")return++se,dCe(t);if(Q0(n))return hCe(t);n&&ul(n.charCodeAt(0))&&Bt({},hi,ki)}for(;ul(qe.charCodeAt(se));)e+=qe[se++];n=qe[se]}if(n==="."){for(e+=qe[se++];ul(qe.charCodeAt(se));)e+=qe[se++];n=qe[se]}if(n==="e"||n==="E")if(e+=qe[se++],n=qe[se],(n==="+"||n==="-")&&(e+=qe[se++]),ul(qe.charCodeAt(se)))for(;ul(qe.charCodeAt(se));)e+=qe[se++];else Bt({},hi,ki);return Wv(qe.charCodeAt(se))&&Bt({},hi,ki),{type:jd,value:parseFloat(e),start:t,end:se}}function pCe(){var e="",t,n,i,r,o=!1;for(t=qe[se],NS(t==="'"||t==='"',"String literal must starts with a quote"),n=se,++se;se<Xi;)if(i=qe[se++],i===t){t="";break}else if(i==="\\")if(i=qe[se++],!i||!Xy(i.charCodeAt(0)))switch(i){case"u":case"x":qe[se]==="{"?(++se,e+=uCe()):e+=dM(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Q0(i)?(r="01234567".indexOf(i),r!==0&&(o=!0),se<Xi&&Q0(qe[se])&&(o=!0,r=r*8+"01234567".indexOf(qe[se++]),"0123".indexOf(i)>=0&&se<Xi&&Q0(qe[se])&&(r=r*8+"01234567".indexOf(qe[se++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&qe[se]===`
`&&++se;else{if(Xy(i.charCodeAt(0)))break;e+=i}return t!==""&&Bt({},hi,ki),{type:Uv,value:e,octal:o,start:n,end:se}}function mCe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Bt({},fM)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Bt({},fM)}try{return new RegExp(e,t)}catch{return null}}function gCe(){var e,t,n,i,r;for(e=qe[se],NS(e==="/","Regular expression literal must start with a slash"),t=qe[se++],n=!1,i=!1;se<Xi;)if(e=qe[se++],t+=e,e==="\\")e=qe[se++],Xy(e.charCodeAt(0))&&Bt({},Wk),t+=e;else if(Xy(e.charCodeAt(0)))Bt({},Wk);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Bt({},Wk),r=t.substr(1,t.length-2),{value:r,literal:t}}function yCe(){var e,t,n;for(t="",n="";se<Xi&&(e=qe[se],!!Cw(e.charCodeAt(0)));)++se,e==="\\"&&se<Xi?Bt({},hi,ki):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Bt({},fM,n),{value:n,literal:t}}function vCe(){var e,t,n,i;return Qt=null,lK(),e=se,t=gCe(),n=yCe(),i=mCe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:se}}function xCe(e){return e.type===pd||e.type===Lc||e.type===FS||e.type===PS}function cK(){if(lK(),se>=Xi)return{type:Hv,start:se,end:se};const e=qe.charCodeAt(se);return Wv(e)?fCe():e===40||e===41||e===59?Gk():e===39||e===34?pCe():e===46?ul(qe.charCodeAt(se+1))?xz():Gk():ul(e)?xz():Gk()}function Lr(){const e=Qt;return se=e.end,Qt=cK(),se=e.end,e}function fK(){const e=se;Qt=cK(),se=e}function _Ce(e){const t=new Ha(USe);return t.elements=e,t}function _z(e,t,n){const i=new Ha(e==="||"||e==="&&"?YSe:WSe);return i.operator=e,i.left=t,i.right=n,i}function bCe(e,t){const n=new Ha(GSe);return n.callee=e,n.arguments=t,n}function wCe(e,t,n){const i=new Ha(qSe);return i.test=e,i.consequent=t,i.alternate=n,i}function zI(e){const t=new Ha(aK);return t.name=e,t}function R0(e){const t=new Ha(VSe);return t.value=e.value,t.raw=qe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function bz(e,t,n){const i=new Ha(ZSe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function SCe(e){const t=new Ha(XSe);return t.properties=e,t}function wz(e,t,n){const i=new Ha(KSe);return i.key=t,i.value=n,i.kind=e,i}function CCe(e,t){const n=new Ha(JSe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Bt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,a)=>(NS(a<i.length,"Message reference must be in range"),i[a]));throw n=new Error(r),n.index=se,n.description=r,n}function $S(e){e.type===Hv&&Bt(e,iCe),e.type===jd&&Bt(e,QSe),e.type===Uv&&Bt(e,eCe),e.type===pd&&Bt(e,tCe),e.type===Lc&&Bt(e,nCe),Bt(e,hi,e.value)}function Ki(e){const t=Lr();(t.type!==$r||t.value!==e)&&$S(t)}function pn(e){return Qt.type===$r&&Qt.value===e}function qk(e){return Qt.type===Lc&&Qt.value===e}function ECe(){const e=[];for(se=Qt.start,Ki("[");!pn("]");)pn(",")?(Lr(),e.push(null)):(e.push(md()),pn("]")||Ki(","));return Lr(),_Ce(e)}function Sz(){se=Qt.start;const e=Lr();return e.type===Uv||e.type===jd?(e.octal&&Bt(e,sK),R0(e)):zI(e.value)}function kCe(){var e,t,n,i;if(se=Qt.start,e=Qt,e.type===pd)return n=Sz(),Ki(":"),i=md(),wz("init",n,i);if(e.type===Hv||e.type===$r)$S(e);else return t=Sz(),Ki(":"),i=md(),wz("init",t,i)}function RCe(){var e=[],t,n,i,r={},o=String;for(se=Qt.start,Ki("{");!pn("}");)t=kCe(),t.key.type===aK?n=t.key.name:n=o(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?Bt({},rCe):r[i]=!0,e.push(t),pn("}")||Ki(",");return Ki("}"),SCe(e)}function TCe(){Ki("(");const e=BI();return Ki(")"),e}const ACe={if:1};function MCe(){var e,t,n;if(pn("("))return TCe();if(pn("["))return ECe();if(pn("{"))return RCe();if(e=Qt.type,se=Qt.start,e===pd||ACe[Qt.value])n=zI(Lr().value);else if(e===Uv||e===jd)Qt.octal&&Bt(Qt,sK),n=R0(Lr());else{if(e===Lc)throw new Error(Zy);e===FS?(t=Lr(),t.value=t.value==="true",n=R0(t)):e===PS?(t=Lr(),t.value=null,n=R0(t)):pn("/")||pn("/=")?(n=R0(vCe()),fK()):$S(Lr())}return n}function FCe(){const e=[];if(Ki("("),!pn(")"))for(;se<Xi&&(e.push(md()),!pn(")"));)Ki(",");return Ki(")"),e}function PCe(){se=Qt.start;const e=Lr();return xCe(e)||$S(e),zI(e.value)}function NCe(){return Ki("."),PCe()}function $Ce(){Ki("[");const e=BI();return Ki("]"),e}function ICe(){var e,t,n;for(e=MCe();;)if(pn("."))n=NCe(),e=bz(".",e,n);else if(pn("("))t=FCe(),e=bCe(e,t);else if(pn("["))n=$Ce(),e=bz("[",e,n);else break;return e}function Cz(){const e=ICe();if(Qt.type===$r&&(pn("++")||pn("--")))throw new Error(Zy);return e}function T_(){var e,t;if(Qt.type!==$r&&Qt.type!==Lc)t=Cz();else{if(pn("++")||pn("--"))throw new Error(Zy);if(pn("+")||pn("-")||pn("~")||pn("!"))e=Lr(),t=T_(),t=CCe(e.value,t);else{if(qk("delete")||qk("void")||qk("typeof"))throw new Error(Zy);t=Cz()}}return t}function Ez(e){let t=0;if(e.type!==$r&&e.type!==Lc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function OCe(){var e,t,n,i,r,o,a,s,l,u;if(e=Qt,l=T_(),i=Qt,r=Ez(i),r===0)return l;for(i.prec=r,Lr(),t=[e,Qt],a=T_(),o=[l,i,a];(r=Ez(Qt))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=_z(s,l,a),o.push(n);i=Lr(),i.prec=r,o.push(i),t.push(Qt),n=T_(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=_z(o[u-1].value,o[u-2],n),u-=2;return n}function md(){var e,t,n;return e=OCe(),pn("?")&&(Lr(),t=md(),Ki(":"),n=md(),e=wCe(e,t,n)),e}function BI(){const e=md();if(pn(","))throw new Error(Zy);return e}function HI(e){qe=e,se=0,Xi=qe.length,Qt=null,fK();const t=BI();if(Qt.type!==Hv)throw new Error("Unexpect token after expression.");return t}var dK={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function hK(e){function t(a,s,l,u){let c=e(s[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,l){return u=>t(a,u,s,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&le("Missing arguments to clamp function."),a.length>3&&le("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&le("Missing arguments to if function."),a.length>3&&le("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function DCe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function pK(e){e=e||{};const t=e.allowed?Da(e.allowed):{},n=e.forbidden?Da(e.forbidden):{},i=e.constants||dK,r=(e.functions||hK)(d),o=e.globalvar,a=e.fieldvar,s=bt(o)?o:g=>`${o}["${g}"]`;let l={},u={},c=0;function d(g){if(Ie(g))return g;const y=h[g.type];return y==null&&le("Unsupported type: "+g.type),y(g)}const h={Literal:g=>g.raw,Identifier:g=>{const y=g.name;return c>0?y:tt(n,y)?le("Illegal identifier: "+y):tt(i,y)?i[y]:tt(t,y)?y:(l[y]=1,s(y))},MemberExpression:g=>{const y=!g.computed,x=d(g.object);y&&(c+=1);const b=d(g.property);return x===a&&(u[DCe(b)]=1),y&&(c-=1),x+(y?"."+b:"["+b+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&le("Illegal callee type: "+g.callee.type);const y=g.callee.name,x=g.arguments,b=tt(r,y)&&r[y];return b||le("Unrecognized function: "+y),bt(b)?b(x):b+"("+x.map(d).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(d).join(",")+"]",BinaryExpression:g=>"("+d(g.left)+" "+g.operator+" "+d(g.right)+")",UnaryExpression:g=>"("+g.operator+d(g.argument)+")",ConditionalExpression:g=>"("+d(g.test)+"?"+d(g.consequent)+":"+d(g.alternate)+")",LogicalExpression:g=>"("+d(g.left)+g.operator+d(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(d).join(",")+"}",Property:g=>{c+=1;const y=d(g.key);return c-=1,y+":"+d(g.value)}};function m(g){const y={code:d(g),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},y}return m.functions=r,m.constants=i,m}const kz=Symbol("vega_selection_getter");function mK(e){return(!e.getter||!e.getter[kz])&&(e.getter=Xo(e.field),e.getter[kz]=!0),e.getter}const UI="intersect",Rz="union",LCe="vlMulti",jCe="vlPoint",Tz="or",zCe="and",cs="_vgsid_",Ky=Xo(cs),BCe="E",HCe="R",UCe="R-E",WCe="R-LE",GCe="R-RE",Ew="index:unit";function Az(e,t){for(var n=t.fields,i=t.values,r=n.length,o=0,a,s;o<r;++o)if(s=n[o],a=mK(s)(e),Ju(a)&&(a=Gi(a)),Ju(i[o])&&(i[o]=Gi(i[o])),de(i[o])&&Ju(i[o][0])&&(i[o]=i[o].map(Gi)),s.type===BCe){if(de(i[o])?i[o].indexOf(a)<0:a!==i[o])return!1}else if(s.type===HCe){if(!Jh(a,i[o]))return!1}else if(s.type===GCe){if(!Jh(a,i[o],!0,!1))return!1}else if(s.type===UCe){if(!Jh(a,i[o],!1,!1))return!1}else if(s.type===WCe&&!Jh(a,i[o],!1,!0))return!1;return!0}function qCe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],o=i?i[Ew]&&i[Ew].value:void 0,a=n===UI,s=r.length,l=0,u,c,d,h,m;l<s;++l)if(u=r[l],o&&a){if(c=c||{},d=c[h=u.unit]||0,d===-1)continue;if(m=Az(t,u),c[h]=m?-1:++d,m&&o.size===1)return!0;if(!m&&d===o.get(h).count)return!1}else if(m=Az(t,u),a^m)return m;return s&&a}const gK=Em(Ky),VCe=gK.left,YCe=gK.right;function ZCe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[Ew]&&i[Ew].value:void 0,a=n===UI,s=Ky(t),l=VCe(r,s);if(l===r.length||Ky(r[l])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(YCe(r,s)-l<o.size)return!1}return!0}function XCe(e,t){return e.map(n=>_t(t.fields?{values:t.fields.map(i=>mK(i)(n.datum))}:{[cs]:Ky(n.datum)},t))}function KCe(e,t,n,i){for(var r=this.context.data[e],o=r?r.values.value:[],a={},s={},l={},u,c,d,h,m,g,y,x,b,w,S=o.length,k=0,R,M;k<S;++k)if(u=o[k],h=u.unit,c=u.fields,d=u.values,c&&d){for(R=0,M=c.length;R<M;++R)m=c[R],y=a[m.field]||(a[m.field]={}),x=y[h]||(y[h]=[]),l[m.field]=b=m.type.charAt(0),w=Vk[`${b}_union`],y[h]=w(x,$e(d[R]));n&&(x=s[h]||(s[h]=[]),x.push($e(d).reduce((T,N,z)=>(T[c[z].field]=N,T),{})))}else m=cs,g=Ky(u),y=a[m]||(a[m]={}),x=y[h]||(y[h]=[]),x.push(g),n&&(x=s[h]||(s[h]=[]),x.push({[cs]:g}));if(t=t||Rz,a[cs]?a[cs]=Vk[`${cs}_${t}`](...Object.values(a[cs])):Object.keys(a).forEach(T=>{a[T]=Object.keys(a[T]).map(N=>a[T][N]).reduce((N,z)=>N===void 0?z:Vk[`${l[T]}_${t}`](N,z))}),o=Object.keys(s),n&&o.length){const T=i?jCe:LCe;a[T]=t===Rz?{[Tz]:o.reduce((N,z)=>(N.push(...s[z]),N),[])}:{[zCe]:o.map(N=>({[Tz]:s[N]}))}}return a}var Vk={[`${cs}_union`]:tde,[`${cs}_intersect`]:Qfe,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Gi(t[0]),i=Gi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Gi(t[0]),i=Gi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const JCe=":",QCe="@";function WI(e,t,n,i){t[0].type!==hd&&le("First argument to selection functions must be a string literal.");const r=t[0].value,o=t.length>=2&&Ot(t).value,a="unit",s=QCe+a,l=JCe+r;o===UI&&!tt(i,s)&&(i[s]=n.getData(r).indataRef(n,a)),tt(i,l)||(i[l]=n.getData(r).tuplesRef())}function yK(e){const t=this.context.data[e];return t?t.values.value:[]}function eEe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function tEe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Ko).insert(t)),1}function nEe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Gv=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},iEe=Gv("format"),vK=Gv("timeFormat"),rEe=Gv("utcFormat"),oEe=Gv("timeParse"),aEe=Gv("utcParse"),$x=new Date(2e3,0,1);function IS(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":($x.setYear(2e3),$x.setMonth(e),$x.setDate(t),vK.call(this,$x,n))}function sEe(e){return IS.call(this,e,1,"%B")}function lEe(e){return IS.call(this,e,1,"%b")}function uEe(e){return IS.call(this,0,2+e,"%A")}function cEe(e){return IS.call(this,0,2+e,"%a")}const fEe=":",dEe="@",hM="%",xK="$";function GI(e,t,n,i){t[0].type!==hd&&le("First argument to data functions must be a string literal.");const r=t[0].value,o=fEe+r;if(!tt(o,i))try{i[o]=n.getData(r).tuplesRef()}catch{}}function hEe(e,t,n,i){t[0].type!==hd&&le("First argument to indata must be a string literal."),t[1].type!==hd&&le("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,a=dEe+o;tt(a,i)||(i[a]=n.getData(r).indataRef(n,o))}function gr(e,t,n,i){if(t[0].type===hd)Mz(n,i,t[0].value);else for(e in n.scales)Mz(n,i,e)}function Mz(e,t,n){const i=hM+n;if(!tt(t,i))try{t[i]=e.scaleRef(n)}catch{}}function zs(e,t){if(bt(e))return e;if(Ie(e)){const n=t.scales[e];return n&&C0e(n.value)?n.value:void 0}}function pEe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=gr,n._range=gr,n._scale=gr;const i=r=>"_["+(r.type===hd?we(hM+r.value):we(hM)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function qI(e,t){return function(n,i,r){if(n){const o=zs(n,(r||this).context);return o&&o.path[e](i)}else return t(i)}}const mEe=qI("area",jxe),gEe=qI("bounds",Uxe),yEe=qI("centroid",Zxe);function vEe(e,t){const n=zs(e,(t||this).context);return n&&n.scale()}function xEe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function VI(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function _Ee(){return VI(this.context.dataflow,"warn",arguments)}function bEe(){return VI(this.context.dataflow,"info",arguments)}function wEe(){return VI(this.context.dataflow,"debug",arguments)}function Yk(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pM(e){const t=dc(e),n=Yk(t.r),i=Yk(t.g),r=Yk(t.b);return .2126*n+.7152*i+.0722*r}function SEe(e,t){const n=pM(e),i=pM(t),r=Math.max(n,i),o=Math.min(n,i);return(r+.05)/(o+.05)}function CEe(){const e=[].slice.call(arguments);return e.unshift({}),_t(...e)}function _K(e,t){return e===t||e!==e&&t!==t?!0:de(e)?de(t)&&e.length===t.length?EEe(e,t):!1:Oe(e)&&Oe(t)?bK(e,t):!1}function EEe(e,t){for(let n=0,i=e.length;n<i;++n)if(!_K(e[n],t[n]))return!1;return!0}function bK(e,t){for(const n in e)if(!_K(e[n],t[n]))return!1;return!0}function Fz(e){return t=>bK(e,t)}function kEe(e,t,n,i,r,o){const a=this.context.dataflow,s=this.context.data[e],l=s.input,u=a.stamp();let c=s.changes,d,h;if(a._trigger===!1||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(s.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{s.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(d=n===!0?Ko:de(n)||U2(n)?n:Fz(n),c.remove(d)),t&&c.insert(t),i&&(d=Fz(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(h in o)c.modify(r,h,o[h]);return 1}function REe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function TEe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Pz={};function AEe(e,t){const n=Pz[t]||(Pz[t]=Xo(t));return de(e)?e.map(n):n(e)}function YI(e){return de(e)||ArrayBuffer.isView(e)?e:null}function ZI(e){return YI(e)||(Ie(e)?e:null)}function MEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return YI(e).join(...n)}function FEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ZI(e).indexOf(...n)}function PEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ZI(e).lastIndexOf(...n)}function NEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ZI(e).slice(...n)}function $Ee(e,t,n){return bt(n)&&le("Function argument passed to replace."),String(e).replace(t,n)}function IEe(e){return YI(e).slice().reverse()}function OEe(e,t,n){return r$(e||0,t||0,n||0)}function DEe(e,t){const n=zs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function LEe(e,t){const n=zs(e,(t||this).context);return n?n.copy():void 0}function jEe(e,t){const n=zs(e,(t||this).context);return n?n.domain():[]}function zEe(e,t,n){const i=zs(e,(n||this).context);return i?de(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function BEe(e,t){const n=zs(e,(t||this).context);return n&&n.range?n.range():[]}function HEe(e,t,n){const i=zs(e,(n||this).context);return i?i(t):void 0}function UEe(e,t,n,i,r){e=zs(e,(r||this).context);const o=mY(t,n);let a=e.domain(),s=a[0],l=Ot(a),u=Qi;return l-s?u=iY(e,s,l):e=(e.interpolator?Ut("sequential")().interpolator(e.interpolator()):Ut("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(a=e.ticks(+i||15),s!==a[0]&&a.unshift(s),l!==Ot(a)&&a.push(l)),a.forEach(c=>o.stop(u(c),e(c))),o}function WEe(e,t,n){const i=zs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function GEe(e){let t=null;return function(n){return n?jy(n,t=t||Gp(e)):e}}const wK=e=>e.data;function SK(e,t){const n=yK.call(t,e);return n.root&&n.root.lookup||{}}function qEe(e,t,n){const i=SK(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(wK):void 0}function VEe(e,t){const n=SK(e,this)[t];return n?n.ancestors().map(wK):void 0}const CK=()=>typeof window<"u"&&window||null;function YEe(){const e=CK();return e?e.screen:{}}function ZEe(){const e=CK();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function XEe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function EK(e,t,n){if(!e)return[];const[i,r]=e,o=new Vn().set(i[0],i[1],r[0],r[1]),a=n||this.context.dataflow.scenegraph().root;return lZ(a,o,KEe(t))}function KEe(e){let t=null;if(e){const n=$e(e.marktype),i=$e(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}function JEe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=$e(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function QEe(e){return $e(e).reduce((t,n,i)=>{let[r,o]=n;return t+=i==0?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `},"")}function eke(e,t,n){const{x:i,y:r,mark:o}=n,a=new Vn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(i,r),EK([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(l=>tke(l.x,l.y,t))}function tke(e,t,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[a,s]=n[o],[l,u]=n[r];u>t!=s>t&&e<(a-l)*(t-u)/(s-u)+l&&i++}return i&1}const Jy={random(){return Qo()},cumulativeNormal:Y2,cumulativeLogNormal:rN,cumulativeUniform:lN,densityNormal:QP,densityLogNormal:iN,densityUniform:sN,quantileNormal:Z2,quantileLogNormal:oN,quantileUniform:uN,sampleNormal:V2,sampleLogNormal:nN,sampleUniform:aN,isArray:de,isBoolean:Nc,isDate:Ju,isDefined(e){return e!==void 0},isNumber:zt,isObject:Oe,isRegExp:OW,isString:Ie,isTuple:U2,isValid(e){return e!=null&&e===e},toBoolean:PP,toDate(e){return NP(e)},toNumber:Gi,toString:$P,indexof:FEe,join:MEe,lastindexof:PEe,replace:$Ee,reverse:IEe,slice:NEe,flush:$W,lerp:DW,merge:CEe,pad:zW,peek:Ot,pluck:AEe,span:_v,inrange:Jh,truncate:BW,rgb:dc,lab:Pb,hcl:Nb,hsl:Mb,luminance:pM,contrast:SEe,sequence:fo,format:iEe,utcFormat:rEe,utcParse:aEe,utcOffset:_G,utcSequence:SG,timeFormat:vK,timeParse:oEe,timeOffset:xG,timeSequence:wG,timeUnitSpecifier:lG,monthFormat:sEe,monthAbbrevFormat:lEe,dayFormat:uEe,dayAbbrevFormat:cEe,quarter:MW,utcquarter:FW,week:cG,utcweek:hG,dayofyear:uG,utcdayofyear:dG,warn:_Ee,info:bEe,debug:wEe,extent(e){return ks(e)},inScope:xEe,intersect:EK,clampRange:PW,pinchDistance:REe,pinchAngle:TEe,screen:YEe,containerSize:XEe,windowSize:ZEe,bandspace:OEe,setdata:tEe,pathShape:GEe,panLinear:kW,panLog:RW,panPow:TW,panSymlog:AW,zoomLinear:kP,zoomLog:RP,zoomPow:yb,zoomSymlog:TP,encode:nEe,modify:kEe,lassoAppend:JEe,lassoPath:QEe,intersectLasso:eke},nke=["view","item","group","xy","x","y"],ike="event.vega.",kK="this.",XI={},RK={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${we(xK+e)}]`,functions:rke,constants:dK,visitors:XI},mM=pK(RK);function rke(e){const t=hK(e);nke.forEach(n=>t[n]=ike+n);for(const n in Jy)t[n]=kK+n;return _t(t,pEe(e,Jy,XI)),t}function Bn(e,t,n){return arguments.length===1?Jy[e]:(Jy[e]=t,n&&(XI[e]=n),mM&&(mM.functions[e]=kK+e),this)}Bn("bandwidth",DEe,gr);Bn("copy",LEe,gr);Bn("domain",jEe,gr);Bn("range",BEe,gr);Bn("invert",zEe,gr);Bn("scale",HEe,gr);Bn("gradient",UEe,gr);Bn("geoArea",mEe,gr);Bn("geoBounds",gEe,gr);Bn("geoCentroid",yEe,gr);Bn("geoShape",WEe,gr);Bn("geoScale",vEe,gr);Bn("indata",eEe,hEe);Bn("data",yK,GI);Bn("treePath",qEe,GI);Bn("treeAncestors",VEe,GI);Bn("vlSelectionTest",qCe,WI);Bn("vlSelectionIdTest",ZCe,WI);Bn("vlSelectionResolve",KCe,WI);Bn("vlSelectionTuples",XCe);function Fs(e,t){const n={};let i;try{e=Ie(e)?e:we(e)+"",i=HI(e)}catch{le("Expression parse error: "+e)}i.visit(o=>{if(o.type!==oK)return;const a=o.callee.name,s=RK.visitors[a];s&&s(a,o.arguments,t,n)});const r=mM(i);return r.globals.forEach(o=>{const a=xK+o;!tt(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:_t({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function oke(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const ake=Da(["rule"]),Nz=Da(["group","image","rect"]);function ske(e,t){let n="";return ake[t]||(e.x2&&(e.x?(Nz[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Nz[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function KI(e){return(e+"").toLowerCase()}function lke(e){return KI(e)==="operator"}function uke(e){return KI(e)==="collect"}function Bg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function cke(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var fke={operator:(e,t)=>Bg(e,["_"],t.code),parameter:(e,t)=>Bg(e,["datum","_"],t.code),event:(e,t)=>Bg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Bg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const a="o["+we(o)+"]";r+=`$=${i[o].code};if(${a}!==$)${a}=$,m=1;`}return r+=ske(i,n),r+="return m;",Bg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(we).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(o,a)=>{const s=t[a];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+a]=o,l=`this.f${a}(a)`,u=`this.f${a}(b)`),cke(l,u,-s,s)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function dke(e){const t=this;lke(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function hke(e){const t=this;if(e.params){const n=t.get(e.id);n||le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function pke(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=de(r)?r.map(o=>$z(o,n,t)):$z(r,n,t)}return t}function $z(e,t,n){if(!e||!Oe(e))return e;for(let i=0,r=Iz.length,o;i<r;++i)if(o=Iz[i],tt(e,o.key))return o.parse(e,t,n);return e}var Iz=[{key:"$ref",parse:mke},{key:"$key",parse:yke},{key:"$expr",parse:gke},{key:"$field",parse:vke},{key:"$encode",parse:_ke},{key:"$compare",parse:xke},{key:"$context",parse:bke},{key:"$subflow",parse:wke},{key:"$tupleid",parse:Ske}];function mke(e,t){return t.get(e.$ref)||le("Operator not defined: "+e.$ref)}function gke(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=eo(t.parameterExpression(e.$expr),e.$fields))}function yke(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=FP(e.$key,e.$flat,t.expr.codegen))}function vke(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Xo(e.$field,e.$name,t.expr.codegen))}function xke(e,t){const n="c:"+e.$compare+"_"+e.$order,i=$e(e.$compare).map(r=>r&&r.$tupleid?Qe:r);return t.fn[n]||(t.fn[n]=AP(i,e.$order,t.expr.codegen))}function _ke(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=eo(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}function bke(e,t){return t}function wke(e,t){const n=e.$subflow;return function(i,r,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(o),s.detachSubflow=()=>t.detach(a),s}}function Ske(){return Qe}function Cke(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(o=>t.get(o)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Eke(e){var t=this,n=Oe(n=e.source)?n.$ref:n,i=t.get(n),r=null,o=e.update,a=void 0;i||le("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,a)}const kke={skip:!0};function Rke(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(i[o]=a.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(r[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Tke(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],kke)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Ko).insert(i[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function TK(e,t,n,i){return new AK(e,t,n,i)}function AK(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||fke,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Oz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}AK.prototype=Oz.prototype={fork(){const e=new Oz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),uke(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[KI(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:oke,parseOperator:dke,parseOperatorParameters:hke,parseParameters:pke,parseStream:Cke,parseUpdate:Eke,getState:Rke,setState:Tke};function Ake(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),MK(t,e.description()))}function MK(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Mke(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Zk="default";function Fke(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Zk,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,o=r?Ie(r)?r:r.user:Zk,a=i.item&&i.item.cursor||null;return r&&o===r.user&&a==r.item?r:{user:o,item:a}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Ie(i)||(r=i.item,i=i.user),gM(e,i&&i!==Zk?i:r||i),r},{cursor:t})}function gM(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function kw(e,t){var n=e._runtime.data;return tt(n,t)||le("Unrecognized data set: "+t),n[t]}function Pke(e,t){return arguments.length<2?kw(this,e).values.value:OS.call(this,e,Od().remove(Ko).insert(t))}function OS(e,t){XG(t)||le("Second argument to changes must be a changeset.");const n=kw(this,e);return n.modified=!0,this.pulse(n.input,t)}function Nke(e,t){return OS.call(this,e,Od().insert(t))}function $ke(e,t){return OS.call(this,e,Od().remove(t))}function FK(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function PK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function DS(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ike(e){var t=DS(e),n=FK(e),i=PK(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}function Oke(e,t,n){var i=e._renderer,r=i&&i.canvas(),o,a,s;return r&&(s=DS(e),a=t.changedTouches?t.changedTouches[0]:t,o=wS(a,r),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=Dke(e,n,o),t}function Dke(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(a){var s=i,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Ie(a)&&(a=r(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:er(e),item:er(t||{}),group:r,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const Dz="view",Lke="timer",jke="window",zke={trap:!1};function Bke(e){const t=_t({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{de(i[o])&&(i[o]=Da(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function NK(e,t,n,i){e._eventListeners.push({type:n,sources:$e(t),handler:i})}function Hke(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function Ix(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Oe(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Uke(e,t,n){var i=this,r=new q2(n),o=function(u,c){i.runAsync(null,()=>{e===Dz&&Hke(i,t)&&u.preventDefault(),r.receive(Oke(i,u,c))})},a;if(e===Lke)Ix(i,"timer",t)&&i.timer(o,t);else if(e===Dz)Ix(i,"view",t)&&i.addEventListener(t,o,zke);else if(e===jke?Ix(i,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&Ix(i,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)i.warn("Can not resolve event source: "+e);else{for(var s=0,l=a.length;s<l;++s)a[s].addEventListener(t,o);NK(i,a,t,o)}return r}function Lz(e){return e.item}function jz(e){return e.item.mark.source}function zz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Wke(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Lz),jz,zz(e)),this.on(this.events("view","pointerout",Lz),jz,zz(t)),this}function Gke(){var e=this._tooltip,t=this._timers,n=this._eventListeners,i,r,o;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(o=n[i],r=o.sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function go(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const qke="vega-bind",Vke="vega-bind-name",Yke="vega-bind-radio";function Zke(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,a)})}},i.debounce&&(r.update=MP(i.debounce,r.update))),(i.input==null&&i.element?Xke:Jke)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Xke(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),NK(i,t,r,o),e.set=a=>{t.value=a,t.dispatchEvent(Kke(r))}}function Kke(e){return typeof Event<"u"?new Event(e):{type:e}}function Jke(e,t,n,i){const r=i.signal(n.signal),o=go("div",{class:qke}),a=n.input==="radio"?o:o.appendChild(go("label"));a.appendChild(go("span",{class:Vke},n.name||n.signal)),t.appendChild(o);let s=Qke;switch(n.input){case"checkbox":s=eRe;break;case"select":s=tRe;break;case"radio":s=nRe;break;case"range":s=iRe;break}s(e,a,n,r)}function Qke(e,t,n,i){const r=go("input");for(const o in n)o!=="signal"&&o!=="element"&&r.setAttribute(o==="input"?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function eRe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=go("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function tRe(e,t,n,i){const r=go("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const l={value:a};Rw(a,i)&&(l.selected=!0),r.appendChild(go("option",l,(o[s]||a)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=a=>{for(let s=0,l=n.options.length;s<l;++s)if(Rw(n.options[s],a)){r.selectedIndex=s;return}}}function nRe(e,t,n,i){const r=go("span",{class:Yke}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((a,s)=>{const l={type:"radio",name:n.signal,value:a};Rw(a,i)&&(l.checked=!0);const u=go("input",l);u.addEventListener("change",()=>e.update(a));const c=go("label",{},(o[s]||a)+"");return c.prepend(u),r.appendChild(c),u}),e.set=a=>{const s=e.elements,l=s.length;for(let u=0;u<l;++u)Rw(s[u].value,a)&&(s[u].checked=!0)}}function iRe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,a=n.step||uc(o,r,100),s=go("input",{type:"range",name:n.signal,min:o,max:r,step:a});s.value=i;const l=go("span",{},+i);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=c=>{s.value=c,l.textContent=c}}function Rw(e,t){return e===t||e+""==t+""}function $K(e,t,n,i,r,o){return t=t||new i(e.loader()),t.initialize(n,FK(e),PK(e),DS(e),r,o).background(e.background())}function JI(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function rRe(e,t,n,i){const r=new i(e.loader(),JI(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,DS(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}function oRe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=CS(i);e=n._el=e?Xk(n,e,!0):null,Ake(n),o||n.error("Unrecognized renderer type: "+i);const a=o.handler||yc,s=e?o.renderer:o.headless;return n._renderer=s?$K(n,n._renderer,e,s):null,n._handler=rRe(n,n._handler,e,a),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=Xk(n,t,!0):e.appendChild(go("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=Xk(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Zke(n,l.element||t,l)})),n}function Xk(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Hg=e=>+e||0,aRe=e=>({top:e,bottom:e,left:e,right:e});function Bz(e){return Oe(e)?{top:Hg(e.top),bottom:Hg(e.bottom),left:Hg(e.left),right:Hg(e.right)}:aRe(Hg(e))}async function QI(e,t,n,i){const r=CS(t),o=r&&r.headless;return o||le("Unrecognized renderer type: "+t),await e.runAsync(),$K(e,null,null,o,n,i).renderAsync(e._scenegraph.root)}async function sRe(e,t){e!==Lu.Canvas&&e!==Lu.SVG&&e!==Lu.PNG&&le("Unrecognized image type: "+e);const n=await QI(this,e,t);return e===Lu.SVG?lRe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function lRe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function uRe(e,t){return(await QI(this,Lu.Canvas,e,t)).canvas()}async function cRe(e){return(await QI(this,Lu.SVG,e)).svg()}function fRe(e,t,n){return TK(e,jp,Jy,n).parse(t)}function dRe(e){var t=this._runtime.scales;return tt(t,e)||le("Unrecognized scale or projection: "+e),t[e].value}var IK="width",OK="height",eO="padding",Hz={skip:!0};function DK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===eO?i.left+i.right:0)}function LK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===eO?i.top+i.bottom:0)}function hRe(e){var t=e._signals,n=t[IK],i=t[OK],r=t[eO];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=DK(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=LK(e,s.size),o()},{size:i});const a=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,a.rank=r.rank+1}function pRe(e,t,n,i,r,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(IK,n,Hz),a._resizeWidth.skip(!0)),a.height()!==i&&(s=1,a.signal(OK,i,Hz),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==r[0]||a._origin[1]!==r[1])&&(a._resize=1,a._origin=r),s&&a.run("enter"),o&&a.runAfter(l=>l.resize())},!1,1)}function mRe(e){return this._runtime.getState(e||{data:gRe,signals:yRe,recurse:!0})}function gRe(e,t){return t.modified&&de(t.input.value)&&!e.startsWith("_:vega:_")}function yRe(e,t){return!(e==="parent"||t instanceof jp.proxy)}function vRe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function xRe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Xbe(n,t))}function _Re(e,t,n,i){const r=e.element();r&&r.setAttribute("title",bRe(i))}function bRe(e){return e==null?"":de(e)?jK(e):Oe(e)&&!Ju(e)?wRe(e):e+""}function wRe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(de(n)?jK(n):zK(n))}).join(`
`)}function jK(e){return"["+e.map(zK).join(", ")+"]"}function zK(e){return de(e)?"[]":Oe(e)&&!Ju(e)?"{}":e}function SRe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function BK(e,t){const n=this;if(t=t||{},dp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=_t({},e.locale,t.locale);n.locale(zG(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Lu.Canvas,n._scenegraph=new $$;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||_Re,n._redraw=!0,n._handler=new yc().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Bke(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=fRe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:_t({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=DK(n,n._width),n._viewHeight=LK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,hRe(n),Mke(n),Fke(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Ox(e,t){return tt(e._signals,t)?e._signals[t]:le("Unrecognized signal name: "+we(t))}function HK(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function Uz(e,t,n,i){let r=HK(n,i);return r||(r=JI(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Wz(e,t,n){const i=HK(t,n);return i&&t._targets.remove(i),e}be(BK,dp,{async evaluate(e,t,n){if(await dp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ike(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&d_(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&MK(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=Ox(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Bz(e)):Bz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(CS(e)||le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(dp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Ox(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:pRe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=JI(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,o;--i>=0;)if(o=n[i].type,r=n[i].handler,e===o&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Uz(this,e,Ox(this,e),t)},removeSignalListener(e,t){return Wz(this,Ox(this,e),t)},addDataListener(e,t){return Uz(this,e,kw(this,e).values,t)},removeDataListener(e,t){return Wz(this,kw(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=gM(this,null);this._globalCursor=!!e,t&&gM(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:xRe,events:Uke,finalize:Gke,hover:Wke,data:Pke,change:OS,insert:Nke,remove:$ke,scale:dRe,initialize:oRe,toImageURL:sRe,toCanvas:uRe,toSVG:cRe,getState:mRe,setState:vRe,_watchPixelRatio:SRe});const CRe="view",Tw="[",Aw="]",UK="{",WK="}",ERe=":",GK=",",kRe="@",RRe=">",TRe=/[[\]{}]/,ARe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let qK,VK;function jc(e,t,n){return qK=t||CRe,VK=n||ARe,YK(e.trim()).map(yM)}function MRe(e){return VK[e]}function ey(e,t,n,i,r){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;r&&r.indexOf(s)>=0?--a:i&&i.indexOf(s)>=0&&++a}return t}function YK(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=ey(e,r,GK,Tw+UK,Aw+WK),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function yM(e){return e[0]==="["?FRe(e):PRe(e)}function FRe(e){const t=e.length;let n=1,i;if(n=ey(e,n,Aw,Tw,Aw),n===t)throw"Empty between selector: "+e;if(i=YK(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==RRe)throw"Expected '>' after between selector: "+e;i=i.map(yM);const r=yM(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function PRe(e){const t={source:qK},n=[];let i=[0,0],r=0,o=0,a=e.length,s=0,l,u;if(e[a-1]===WK){if(s=e.lastIndexOf(UK),s>=0){try{i=NRe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===kRe&&(r=++s),l=ey(e,s,ERe),l<a&&(n.push(e.substring(o,l).trim()),o=s=++l),s=ey(e,s,Tw),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),u=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=ey(e,s,Aw),s===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==Tw)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||TRe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],r?t.markname=n[0].slice(1):MRe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function NRe(e){const t=e.split(GK);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function $Re(e){return Oe(e)?e:{type:e||"pad"}}const Ug=e=>+e||0,IRe=e=>({top:e,bottom:e,left:e,right:e});function ORe(e){return Oe(e)?e.signal?e:{top:Ug(e.top),bottom:Ug(e.bottom),left:Ug(e.left),right:Ug(e.right)}:IRe(Ug(e))}const pi=e=>Oe(e)&&!de(e)?_t({},e):{value:e};function Gz(e,t,n,i){return n!=null?(Oe(n)&&!de(n)||de(n)&&n.length&&Oe(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Fi(e,t,n){for(const i in t)Gz(e,i,t[i]);for(const i in n)Gz(e,i,n[i],"update")}function Im(e,t,n){for(const i in t)n&&tt(n,i)||(e[i]=_t(e[i]||{},t[i]));return e}function Oh(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const tO="mark",nO="frame",iO="scope",DRe="axis",LRe="axis-domain",jRe="axis-grid",zRe="axis-label",BRe="axis-tick",HRe="axis-title",URe="legend",WRe="legend-band",GRe="legend-entry",qRe="legend-gradient",ZK="legend-label",VRe="legend-symbol",YRe="legend-title",ZRe="title",XRe="title-text",KRe="title-subtitle";function JRe(e,t,n,i,r){const o={},a={};let s,l,u,c;l="lineBreak",t==="text"&&r[l]!=null&&!Oh(l,e)&&Kk(o,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===nO?r.group:n===tO?_t({},r.mark,r[t]):null;for(l in c)u=Oh(l,e)||(l==="fill"||l==="stroke")&&(Oh("fill",e)||Oh("stroke",e)),u||Kk(o,l,c[l]);$e(i).forEach(d=>{const h=r.style&&r.style[d];for(const m in h)Oh(m,e)||Kk(o,m,h[m])}),e=_t({},e);for(l in o)c=o[l],c.signal?(s=s||{})[l]=c:a[l]=c;return e.enter=_t(a,e.enter),s&&(e.update=_t(s,e.update)),e}function Kk(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const XK=e=>Ie(e)?we(e):e.signal?`(${e.signal})`:KK(e);function LS(e){if(e.gradient!=null)return eTe(e);let t=e.signal?`(${e.signal})`:e.color?QRe(e.color):e.field!=null?KK(e.field):e.value!==void 0?we(e.value):void 0;return e.scale!=null&&(t=tTe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${A_(e.exponent)})`),e.mult!=null&&(t+=`*${A_(e.mult)}`),e.offset!=null&&(t+=`+${A_(e.offset)}`),e.round&&(t=`round(${t})`),t}const Dx=(e,t,n,i)=>`(${e}(${[t,n,i].map(LS).join(",")})+'')`;function QRe(e){return e.c?Dx("hcl",e.h,e.c,e.l):e.h||e.s?Dx("hsl",e.h,e.s,e.l):e.l||e.a?Dx("lab",e.l,e.a,e.b):e.r||e.g||e.b?Dx("rgb",e.r,e.g,e.b):null}function eTe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:we(n));for(;t.length&&Ot(t)==null;)t.pop();return t.unshift(XK(e.gradient)),`gradient(${t.join(",")})`}function A_(e){return Oe(e)?"("+LS(e)+")":e}function KK(e){return JK(Oe(e)?e:{datum:e})}function JK(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):le("Invalid field reference: "+we(e));return e.signal||(i=Ie(i)?Is(i).map(we).join("]["):JK(i)),t+"["+i+"]"}function tTe(e,t){const n=XK(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+A_(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function nTe(e){let t="";return e.forEach(n=>{const i=LS(n);t+=n.test?`(${n.test})?${i}:`:i}),Ot(t)===":"&&(t+="null"),t}function QK(e,t,n,i,r,o){const a={};o=o||{},o.encoders={$encode:a},e=JRe(e,t,n,i,r.config);for(const s in e)a[s]=iTe(e[s],t,o,r);return o}function iTe(e,t,n,i){const r={},o={};for(const a in e)e[a]!=null&&(r[a]=oTe(rTe(e[a]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function rTe(e){return de(e)?nTe(e):LS(e)}function oTe(e,t,n,i){const r=Fs(e,t);return r.$fields.forEach(o=>i[o]=1),_t(n,r.$params),r.$expr}const aTe="outer",sTe=["value","update","init","react","bind"];function qz(e,t){le(e+' for "outer" push: '+we(t))}function eJ(e,t){const n=e.name;if(e.push===aTe)t.signals[n]||qz("No prior signal definition",n),sTe.forEach(i=>{e[i]!==void 0&&qz("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function vM(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function jS(e,t,n,i){return new vM(e,t,n,i)}function Mw(e,t){return jS("operator",e,t)}function Je(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Qy(e,t){return t?{$field:e,$name:t}:{$field:e}}const xM=Qy("key");function Vz(e,t){return{$compare:e,$order:t}}function lTe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const uTe="ascending",cTe="descending";function fTe(e){return Oe(e)?(e.order===cTe?"-":"+")+zS(e.op,e.field):""}function zS(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const rO="scope",_M="view";function ni(e){return e&&e.signal}function dTe(e){return e&&e.expr}function M_(e){if(ni(e))return!0;if(Oe(e)){for(const t in e)if(M_(e[t]))return!0}return!1}function xa(e,t){return e??t}function qf(e){return e&&e.signal||e}const Yz="timer";function ev(e,t){return(e.merge?pTe:e.stream?mTe:e.type?gTe:le("Invalid stream specification: "+we(e)))(e,t)}function hTe(e){return e===rO?_M:e||_M}function pTe(e,t){const n=e.merge.map(r=>ev(r,t)),i=oO({merge:n},e,t);return t.addStream(i).id}function mTe(e,t){const n=ev(e.stream,t),i=oO({stream:n},e,t);return t.addStream(i).id}function gTe(e,t){let n;e.type===Yz?(n=t.event(Yz,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(hTe(e.source),e.type);const i=oO({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function oO(e,t,n){let i=t.between;return i&&(i.length!==2&&le('Stream "between" parameter must have 2 entries: '+we(t)),e.between=[ev(i[0],n),ev(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(yTe(t.marktype,t.markname,t.markrole)),t.source===rO&&i.push("inScope(event.item)"),i.length&&(e.filter=Fs("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function yTe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const vTe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function xTe(e,t,n){const i=e.encode,r={target:n};let o=e.events,a=e.update,s=[];o||le("Signal update missing events specification."),Ie(o)&&(o=jc(o,t.isSubscope()?rO:_M)),o=$e(o).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[bTe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),i!=null&&(a&&le("Signal encode and update are mutually exclusive."),a="encode(item(),"+we(i)+")"),r.update=Ie(a)?Fs(a,t):a.expr!=null?Fs(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:vTe,$params:{$value:t.signalRef(a.signal)}}:le("Invalid signal update specification."),e.force&&(r.options={force:!0}),s.forEach(l=>t.addUpdate(_t(_Te(l,t),r)))}function _Te(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ev(e,t)}}function bTe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function wTe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?le("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Fs(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>xTe(r,t,n.id))}const an=e=>(t,n,i)=>jS(e,n,t||void 0,i),tJ=an("aggregate"),STe=an("axisticks"),nJ=an("bound"),Ua=an("collect"),Zz=an("compare"),CTe=an("datajoin"),iJ=an("encode"),ETe=an("expression"),kTe=an("facet"),RTe=an("field"),TTe=an("key"),ATe=an("legendentries"),MTe=an("load"),FTe=an("mark"),PTe=an("multiextent"),NTe=an("multivalues"),$Te=an("overlap"),ITe=an("params"),rJ=an("prefacet"),OTe=an("projection"),DTe=an("proxy"),LTe=an("relay"),oJ=an("render"),jTe=an("scale"),zd=an("sieve"),zTe=an("sortitems"),aJ=an("viewlayout"),BTe=an("values");let HTe=0;const sJ={min:"min",max:"max",count:"sum"};function UTe(e,t){const n=e.type||"linear";KV(n)||le("Unrecognized scale type: "+we(n)),t.addScale(e.name,{type:n,domain:void 0})}function WTe(e,t){const n=t.getScale(e.name).params;let i;n.domain=lJ(e.domain,e,t),e.range!=null&&(n.range=cJ(e,t,n)),e.interpolate!=null&&eAe(e.interpolate,n),e.nice!=null&&(n.nice=QTe(e.nice)),e.bins!=null&&(n.bins=JTe(e.bins,t));for(i in e)tt(n,i)||i==="name"||(n[i]=Bo(e[i],t))}function Bo(e,t){return Oe(e)?e.signal?t.signalRef(e.signal):le("Unsupported object: "+we(e)):e}function F_(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Bo(n,t))}function BS(e){le("Can not find data set: "+we(e))}function lJ(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(de(e)?GTe:e.fields?VTe:qTe)(e,t,n)}function GTe(e,t,n){return e.map(i=>Bo(i,n))}function qTe(e,t,n){const i=n.getData(e.data);return i||BS(e.data),Wp(t.type)?i.valuesRef(n,e.field,uJ(e.sort,!1)):eY(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function VTe(e,t,n){const i=e.data,r=e.fields.reduce((o,a)=>(a=Ie(a)?{data:i,field:a}:de(a)||a.signal?YTe(a,n):a,o.push(a),o),[]);return(Wp(t.type)?ZTe:eY(t.type)?XTe:KTe)(e,n,r)}function YTe(e,t){const n="_:vega:_"+HTe++,i=Ua({});if(de(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+we(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,zd({})]),{data:n,field:"data"}}function ZTe(e,t,n){const i=uJ(e.sort,!0);let r,o;const a=n.map(u=>{const c=t.getData(u.data);return c||BS(u.data),c.countsRef(t,u.field,i)}),s={groupby:xM,pulse:a};i&&(r=i.op||"count",o=i.field?zS(r,i.field):"count",s.ops=[sJ[r]],s.fields=[t.fieldRef(o)],s.as=[o]),r=t.add(tJ(s));const l=t.add(Ua({pulse:Je(r)}));return o=t.add(BTe({field:xM,sort:t.sortRef(i),pulse:Je(l)})),Je(o)}function uJ(e,t){return e&&(!e.field&&!e.op?Oe(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!sJ[e.op]&&le("Multiple domain scales can not be sorted using "+e.op)),e}function XTe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||BS(r.data),o.domainRef(t,r.field)});return Je(t.add(NTe({values:i})))}function KTe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||BS(r.data),o.extentRef(t,r.field)});return Je(t.add(PTe({extents:i})))}function JTe(e,t){return e.signal||de(e)?F_(e,t):t.objectProperty(e)}function QTe(e){return Oe(e)?{interval:Bo(e.interval),step:Bo(e.step)}:Bo(e)}function eAe(e,t){t.interpolate=Bo(e.type||e),e.gamma!=null&&(t.interpolateGamma=Bo(e.gamma))}function cJ(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Ie(r)){if(i&&tt(i,r))return e=_t({},e,{range:i[r]}),cJ(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Wp(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:le("Unrecognized scale range value: "+we(r))}else if(r.scheme){n.scheme=de(r.scheme)?F_(r.scheme,t):Bo(r.scheme,t),r.extent&&(n.schemeExtent=F_(r.extent,t)),r.count&&(n.schemeCount=Bo(r.count,t));return}else if(r.step){n.rangeStep=Bo(r.step,t);return}else{if(Wp(e.type)&&!de(r))return lJ(r,e,t);de(r)||le("Unsupported range type: "+we(r))}return r.map(o=>(de(o)?F_:Bo)(o,t))}function tAe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=bM(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=bM(n[r],r,t));t.addProjection(e.name,i)}function bM(e,t,n){return de(e)?e.map(i=>bM(i,t,n)):Oe(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:le("Unsupported parameter object: "+we(e)):e}const Wa="top",Om="left",Dm="right",xc="bottom",fJ="center",nAe="vertical",iAe="start",rAe="middle",oAe="end",wM="index",aO="label",aAe="offset",Qp="perc",sAe="perc2",Wo="value",qv="guide-label",sO="guide-title",lAe="group-title",uAe="group-subtitle",Xz="symbol",P_="gradient",SM="discrete",CM="size",cAe="shape",fAe="fill",dAe="stroke",hAe="strokeWidth",pAe="strokeDash",mAe="opacity",lO=[CM,cAe,fAe,dAe,hAe,pAe,mAe],Vv={name:1,style:1,interactive:1},Lt={value:0},Go={value:1},HS="group",dJ="rect",uO="rule",gAe="symbol",Bd="text";function tv(e){return e.type=HS,e.interactive=e.interactive||!1,e}function to(e,t){const n=(i,r)=>xa(e[i],xa(t[i],r));return n.isVertical=i=>nAe===xa(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>xa(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>xa(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>xa(e.columns,xa(t.columns,+n.isVertical(!0))),n}function hJ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function yAe(e,t,n){const i=t.config.style[n];return i&&i[e]}function US(e,t,n){return`item.anchor === '${iAe}' ? ${e} : item.anchor === '${oAe}' ? ${t} : ${n}`}const cO=US(we(Om),we(Dm),we(fJ));function vAe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Oe(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function pJ(e,t){return t?e?Oe(e)?Object.assign({},e,{offset:pJ(e.offset,t)}):{value:e,offset:t}:t:e}function wo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Im(e.encode,t,Vv)):e.interactive=!1,e}function xAe(e,t,n,i){const r=to(e,n),o=r.isVertical(),a=r.gradientThickness(),s=r.gradientLength();let l,u,c,d,h;o?(u=[0,1],c=[0,0],d=a,h=s):(u=[0,0],c=[1,0],d=s,h=a);const m={enter:l={opacity:Lt,x:Lt,y:Lt,width:pi(d),height:pi(h)},update:_t({},l,{opacity:Go,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Lt}};return Fi(m,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),wo({type:dJ,role:qRe,encode:m},i)}function _Ae(e,t,n,i,r){const o=to(e,n),a=o.isVertical(),s=o.gradientThickness(),l=o.gradientLength();let u,c,d,h,m="";a?(u="y",d="y2",c="x",h="width",m="1-"):(u="x",d="x2",c="y",h="height");const g={opacity:Lt,fill:{scale:t,field:Wo}};g[u]={signal:m+"datum."+Qp,mult:l},g[c]=Lt,g[d]={signal:m+"datum."+sAe,mult:l},g[h]=pi(s);const y={enter:g,update:_t({},g,{opacity:Go}),exit:{opacity:Lt}};return Fi(y,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),wo({type:dJ,role:WRe,key:Wo,from:r,encode:y},i)}const bAe=`datum.${Qp}<=0?"${Om}":datum.${Qp}>=1?"${Dm}":"${fJ}"`,wAe=`datum.${Qp}<=0?"${xc}":datum.${Qp}>=1?"${Wa}":"${rAe}"`;function Kz(e,t,n,i){const r=to(e,t),o=r.isVertical(),a=pi(r.gradientThickness()),s=r.gradientLength();let l=r("labelOverlap"),u,c,d,h,m="";const g={enter:u={opacity:Lt},update:c={opacity:Go,text:{field:aO}},exit:{opacity:Lt}};return Fi(g,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:xa(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:wAe},d="y",h="x",m="1-"):(u.align=c.align={signal:bAe},u.baseline={value:"top"},d="x",h="y"),u[d]=c[d]={signal:m+"datum."+Qp,mult:s},u[h]=c[h]=a,a.offset=xa(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+wM}:void 0,wo({type:Bd,role:ZK,style:qv,key:Wo,from:i,encode:g,overlap:l},n)}function SAe(e,t,n,i,r){const o=to(e,t),a=n.entries,s=!!(a&&a.interactive),l=a?a.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},h=`(${r}) ? datum.${aAe} : datum.${CM}`,m=u?pi(u):{field:CM},g=`datum.${wM}`,y=`max(1, ${r})`;let x,b,w,S,k;m.mult=.5,x={enter:b={opacity:Lt,x:{signal:h,mult:.5,offset:c},y:m},update:w={opacity:Go,x:b.x,y:b.y},exit:{opacity:Lt}};let R=null,M=null;e.fill||(R=t.symbolBaseFillColor,M=t.symbolBaseStrokeColor),Fi(x,{fill:o("symbolFillColor",R),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",M),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),lO.forEach(H=>{e[H]&&(w[H]=b[H]={scale:e[H],field:Wo})});const T=wo({type:gAe,role:VRe,key:Wo,from:d,clip:u?!0:void 0,encode:x},n.symbols),N=pi(c);N.offset=o("labelOffset"),x={enter:b={opacity:Lt,x:{signal:h,offset:N},y:m},update:w={opacity:Go,text:{field:aO},x:b.x,y:b.y},exit:{opacity:Lt}},Fi(x,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const z=wo({type:Bd,role:ZK,style:qv,key:Wo,from:d,encode:x},n.labels);return x={enter:{noBound:{value:!u},width:Lt,height:u?pi(u):Lt,opacity:Lt},exit:{opacity:Lt},update:w={opacity:Go,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(S=`ceil(item.mark.items.length / ${y})`,w.row.signal=`${g}%${S}`,w.column.signal=`floor(${g} / ${S})`,k={field:["row",g]}):(w.row.signal=`floor(${g} / ${y})`,w.column.signal=`${g} % ${y}`,k={field:g}),w.column.signal=`(${r})?${w.column.signal}:${g}`,i={facet:{data:i,name:"value",groupby:wM}},tv({role:iO,from:i,encode:Im(x,a,Vv),marks:[T,z],name:l,interactive:s,sort:k})}function CAe(e,t){const n=to(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const fO='item.orient === "left"',dO='item.orient === "right"',WS=`(${fO} || ${dO})`,EAe=`datum.vgrad && ${WS}`,kAe=US('"top"','"bottom"','"middle"'),RAe=US('"right"','"left"','"center"'),TAe=`datum.vgrad && ${dO} ? (${RAe}) : (${WS} && !(datum.vgrad && ${fO})) ? "left" : ${cO}`,AAe=`item._anchor || (${WS} ? "middle" : "start")`,MAe=`${EAe} ? (${fO} ? -90 : 90) : 0`,FAe=`${WS} ? (datum.vgrad ? (${dO} ? "bottom" : "top") : ${kAe}) : "top"`;function PAe(e,t,n,i){const r=to(e,t),o={enter:{opacity:Lt},update:{opacity:Go,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Lt}};return Fi(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:AAe},angle:{signal:MAe},align:{signal:TAe},baseline:{signal:FAe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),wo({type:Bd,role:YRe,style:sO,from:i,encode:o},n)}function NAe(e,t){let n;return Oe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Jz(e.path)+")":e.sphere&&(n="geoShape("+Jz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Jz(e){return Oe(e)&&e.signal?e.signal:we(e)}function mJ(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===HS?iO:t||tO}function $Ae(e){return{marktype:e.type,name:e.name||void 0,role:e.role||mJ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function IAe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function hO(e,t){const n=QG(e.type);n||le("Unrecognized transform type: "+we(e.type));const i=jS(n.type.toLowerCase(),null,gJ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function gJ(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const a=e.params[o];i[a.name]=OAe(a,t,n)}return i}function OAe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return DAe(e,t,n);if(r===void 0){e.required&&le("Missing required "+we(t.type)+" parameter: "+we(e.name));return}else{if(i==="param")return LAe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!ni(r)?r.map(o=>Qz(e,o,n)):Qz(e,r,n)}function Qz(e,t,n){const i=e.type;if(ni(t))return t6(i)?le("Expression references can not be signals."):Jk(i)?n.fieldRef(t):n6(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||Jk(i);return r&&jAe(t)?n.exprRef(t.expr,t.as):r&&zAe(t)?Qy(t.field,t.as):t6(i)?Fs(t,n):BAe(i)?Je(n.getData(t).values):Jk(i)?Qy(t):n6(i)?n.compareRef(t):t}}function DAe(e,t,n){return Ie(t.from)||le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function LAe(e,t,n){const i=t[e.name];return e.array?(de(i)||le("Expected an array of sub-parameters. Instead: "+we(i)),i.map(r=>e6(e,r,n))):e6(e,i,n)}function e6(e,t,n){const i=e.params.length;let r;for(let a=0;a<i;++a){r=e.params[a];for(const s in r.key)if(r.key[s]!==t[s]){r=null;break}if(r)break}r||le("Unsupported parameter: "+we(t));const o=_t(gJ(r,t,n),r.key);return Je(n.add(ITe(o)))}const jAe=e=>e&&e.expr,zAe=e=>e&&e.field,BAe=e=>e==="data",t6=e=>e==="expr",Jk=e=>e==="field",n6=e=>e==="compare";function HAe(e,t,n){let i,r,o,a,s;return e?(i=e.facet)&&(t||le("Only group marks can be faceted."),i.field!=null?a=s=N_(i,n):(e.data?s=Je(n.getData(e.data).aggregate):(o=hO(_t({type:"aggregate",groupby:$e(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=N_(i,n),a=s=Je(n.add(o))),r=n.keyRef(i.groupby,!0))):a=Je(n.add(Ua(null,[{}]))),a||(a=N_(e,n)),{key:r,pulse:a,parent:s}}function N_(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Je(t.getData(e.data).output)}function gd(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}gd.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Je(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new gd(e,o,r,i,a)};function yJ(e){return Ie(e)?e:null}function i6(e,t,n){const i=zS(n.op,n.field);let r;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Wg(e,t,n,i,r,o,a){const s=t[n]||(t[n]={}),l=fTe(o);let u=yJ(r),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=s[u]),!c){const h=o?{field:xM,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Je(t.output)};l&&(h.sort=e.sortRef(o)),d=e.add(jS(i,void 0,h)),a&&(t.index[r]=d),c=Je(d),u!=null&&(s[u]=c)}return c}gd.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=yJ(t);let a,s,l;return o!=null&&(e=i.scope,a=r[o]),a?n&&n.field&&i6(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Je(i.output)},n&&n.field&&i6(e,l,n),s=e.add(tJ(l)),a=e.add(Ua({pulse:Je(s)})),a={agg:s,ref:Je(a)},o!=null&&(r[o]=a)),a.ref},tuplesRef(){return Je(this.values)},extentRef(e,t){return Wg(e,this,"extent","extent",t,!1)},domainRef(e,t){return Wg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Wg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Wg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Wg(e,this,"indata","tupleindex",t,!0,!0)}};function UAe(e,t,n){const i=e.from.facet,r=i.name,o=N_(i,t);let a;i.name||le("Facet must have a name: "+we(i)),i.data||le("Facet must reference a data set: "+we(i)),i.field?a=t.add(rJ({field:t.fieldRef(i.field),pulse:o})):i.groupby?a=t.add(kTe({key:t.keyRef(i.groupby),group:Je(t.proxy(n.parent)),pulse:o})):le("Facet must specify groupby or field: "+we(i));const s=t.fork(),l=s.add(Ua()),u=s.add(zd({pulse:Je(l)}));s.addData(r,new gd(s,l,l,u)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function WAe(e,t,n){const i=t.add(rJ({pulse:n.pulse})),r=t.fork();r.add(zd()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function vJ(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,a=e.modify,s=e.values,l=t.add(Mw()),u="if("+e.trigger+',modify("'+n+'",'+[r,i,o,a,s].map(d=>d??"null").join(",")+"),0)",c=Fs(u,t);l.update=c.$expr,l.params=c.$params}function GS(e,t){const n=mJ(e),i=e.type===HS,r=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===iO||n===nO,s,l,u,c,d,h,m;const g=n===tO||a||r,y=HAe(e.from,i,t);l=t.add(CTe({key:y.key||(e.key?Qy(e.key):void 0),pulse:y.pulse,clean:!i}));const x=Je(l);l=u=t.add(Ua({pulse:x})),l=t.add(FTe({markdef:$Ae(e),interactive:IAe(e.interactive,t),clip:NAe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Je(l)}));const b=Je(l);l=c=t.add(iJ(QK(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(M=>{const T=hO(M,t),N=T.metadata;(N.generates||N.changes)&&le("Mark transforms should not generate new data."),N.nomod||(c.params.mod=!0),T.params.pulse=Je(l),t.add(l=T)}),e.sort&&(l=t.add(zTe({sort:t.compareRef(e.sort),pulse:Je(l)})));const w=Je(l);(r||a)&&(a=t.add(aJ({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:w})),h=Je(a));const S=t.add(nJ({mark:b,pulse:h||w}));m=Je(S),i&&(g&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(w,h||m,x),r?UAe(e,t,y):g?WAe(e,t,y):t.parse(e),t.popState(),g&&(a&&s.push(a),s.push(S))),o&&(m=GAe(o,m,t));const k=t.add(oJ({pulse:m})),R=t.add(zd({pulse:Je(k)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new gd(t,u,k,R)),e.on&&e.on.forEach(M=>{(M.insert||M.remove||M.toggle)&&le("Marks only support modify triggers."),vJ(M,t,d)}))}function GAe(e,t,n){const i=e.method,r=e.bound,o=e.separation,a={separation:ni(o)?n.signalRef(o.signal):o,method:ni(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),r){const s=r.tolerance;a.boundTolerance=ni(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(r.scale),a.boundOrient=r.orient}return Je(n.add($Te(a)))}function qAe(e,t){const n=t.config.legend,i=e.encode||{},r=to(e,n),o=i.legend||{},a=o.name||void 0,s=o.interactive,l=o.style,u={};let c=0,d,h,m;lO.forEach(S=>e[S]?(u[S]=e[S],c=c||e[S]):0),c||le("Missing valid scale for legend.");const g=VAe(e,t.scaleType(c)),y={title:e.title!=null,scales:u,type:g,vgrad:g!=="symbol"&&r.isVertical()},x=Je(t.add(Ua(null,[y]))),b={enter:{x:{value:0},y:{value:0}}},w=Je(t.add(ATe(h={type:g,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===P_?(m=[xAe(e,c,n,i.gradient),Kz(e,n,i.labels,w)],h.count=h.count||t.signalRef(`max(2,2*floor((${qf(r.gradientLength())})/100))`)):g===SM?m=[_Ae(e,c,n,i.gradient,w),Kz(e,n,i.labels,w)]:(d=CAe(e,n),m=[SAe(e,n,i,w,qf(d.columns))],h.size=XAe(e,t,m[0].marks)),m=[tv({role:GRe,from:x,encode:b,marks:m,layout:d,interactive:s})],y.title&&m.push(PAe(e,n,i.title,x)),GS(tv({role:URe,from:x,encode:Im(ZAe(r,e,n),o,Vv),marks:m,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:a,interactive:s,style:l}),t)}function VAe(e,t){let n=e.type||Xz;return!e.type&&YAe(e)===1&&(e.fill||e.stroke)&&(n=u$(t)?P_:pA(t)?SM:Xz),n!==P_?n:pA(t)?SM:P_}function YAe(e){return lO.reduce((t,n)=>t+(e[n]?1:0),0)}function ZAe(e,t,n){const i={enter:{},update:{}};return Fi(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function XAe(e,t,n){const i=qf(r6("size",e,n)),r=qf(r6("strokeWidth",e,n)),o=qf(KAe(n[1].encode,t,qv));return Fs(`max(ceil(sqrt(${i})+${r}),${o})`,t)}function r6(e,t,n){return t[e]?`scale("${t[e]}",datum)`:hJ(e,n[0].encode)}function KAe(e,t,n){return hJ("fontSize",e)||yAe("fontSize",t,n)}const JAe=`item.orient==="${Om}"?-90:item.orient==="${Dm}"?90:0`;function QAe(e,t){e=Ie(e)?{text:e}:e;const n=to(e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,a=r.interactive,s=r.style,l=[],u={},c=Je(t.add(Ua(null,[u])));return l.push(nMe(e,n,eMe(e),c)),e.subtitle&&l.push(iMe(e,n,i.subtitle,c)),GS(tv({role:ZRe,from:c,encode:tMe(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function eMe(e){const t=e.encode;return t&&t.title||_t({name:e.name,interactive:e.interactive,style:e.style},t)}function tMe(e,t){const n={enter:{},update:{}};return Fi(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:cO},angle:{signal:JAe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Im(n,t,Vv)}function nMe(e,t,n,i){const r={value:0},o=e.text,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Fi(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),wo({type:Bd,role:XRe,style:lAe,from:i,encode:a},n)}function iMe(e,t,n,i){const r={value:0},o=e.subtitle,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Fi(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),wo({type:Bd,role:KRe,style:uAe,from:i,encode:a},n)}function rMe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(hO(i,t))}),e.on&&e.on.forEach(i=>{vJ(i,t,e.name)}),t.addDataPipeline(e.name,oMe(e,t,n))}function oMe(e,t,n){const i=[];let r=null,o=!1,a=!1,s,l,u,c,d;for(e.values?ni(e.values)||M_(e.format)?(i.push(o6(t,e)),i.push(r=sf())):i.push(r=sf({$ingest:e.values,$format:e.format})):e.url?M_(e.url)||M_(e.format)?(i.push(o6(t,e)),i.push(r=sf())):i.push(r=sf({$request:e.url,$format:e.format})):e.source&&(r=s=$e(e.source).map(h=>Je(t.getData(h).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=sf()),i.push(c),d.generates&&(a=!0),d.modifies&&!a&&(o=!0),d.source?r=c:d.changes&&(r=null);return s&&(u=s.length-1,i[0]=LTe({derive:o,pulse:u?s:s[0]}),(o||u)&&i.splice(1,0,sf())),r||i.push(sf()),i.push(zd({})),i}function sf(e){const t=Ua({},e);return t.metadata={source:!0},t}function o6(e,t){return MTe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const xJ=e=>e===xc||e===Wa,qS=(e,t,n)=>ni(e)?uMe(e.signal,t,n):e===Om||e===Wa?t:n,mi=(e,t,n)=>ni(e)?sMe(e.signal,t,n):xJ(e)?t:n,Na=(e,t,n)=>ni(e)?lMe(e.signal,t,n):xJ(e)?n:t,_J=(e,t,n)=>ni(e)?cMe(e.signal,t,n):e===Wa?{value:t}:{value:n},aMe=(e,t,n)=>ni(e)?fMe(e.signal,t,n):e===Dm?{value:t}:{value:n},sMe=(e,t,n)=>bJ(`${e} === '${Wa}' || ${e} === '${xc}'`,t,n),lMe=(e,t,n)=>bJ(`${e} !== '${Wa}' && ${e} !== '${xc}'`,t,n),uMe=(e,t,n)=>pO(`${e} === '${Om}' || ${e} === '${Wa}'`,t,n),cMe=(e,t,n)=>pO(`${e} === '${Wa}'`,t,n),fMe=(e,t,n)=>pO(`${e} === '${Dm}'`,t,n),bJ=(e,t,n)=>(t=t!=null?pi(t):t,n=n!=null?pi(n):n,a6(t)&&a6(n)?(t=t?t.signal||we(t.value):null,n=n?n.signal||we(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[_t({test:e},t)].concat(n||[])),a6=e=>e==null||Object.keys(e).length===1,pO=(e,t,n)=>({signal:`${e} ? (${ip(t)}) : (${ip(n)})`}),dMe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Om}' ? (${ip(i)}) : `:"")+(n!=null?`${e} === '${xc}' ? (${ip(n)}) : `:"")+(r!=null?`${e} === '${Dm}' ? (${ip(r)}) : `:"")+(t!=null?`${e} === '${Wa}' ? (${ip(t)}) : `:"")+"(null)"}),ip=e=>ni(e)?e.signal:e==null?null:we(e),hMe=(e,t)=>t===0?0:ni(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},gp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Th(e,t,n,i){let r;if(t&&tt(t,e))return t[e];if(tt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[sO][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[qv][r]}return null}function s6(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function pMe(e,t){var n=t.config,i=n.style,r=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,l,u;if(ni(a)){const d=s6([n.axisX,n.axisY]),h=s6([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(u of d)s[u]=mi(a,Th(u,n.axisX,r,i),Th(u,n.axisY,r,i));l={};for(u of h)l[u]=dMe(a.signal,Th(u,n.axisTop,r,i),Th(u,n.axisBottom,r,i),Th(u,n.axisLeft,r,i),Th(u,n.axisRight,r,i))}else s=a===Wa||a===xc?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||l||o?_t({},r,s,l,o):r}function mMe(e,t,n,i){const r=to(e,t),o=e.orient;let a,s;const l={enter:a={opacity:Lt},update:s={opacity:Go},exit:{opacity:Lt}};Fi(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=l6(e,0),c=l6(e,1);return a.x=s.x=mi(o,u,Lt),a.x2=s.x2=mi(o,c),a.y=s.y=Na(o,u,Lt),a.y2=s.y2=Na(o,c),wo({type:uO,role:LRe,from:i,encode:l},n)}function l6(e,t){return{scale:e.scale,range:t}}function gMe(e,t,n,i,r){const o=to(e,t),a=e.orient,s=e.gridScale,l=qS(a,1,-1),u=yMe(e.offset,l);let c,d,h;const m={enter:c={opacity:Lt},update:h={opacity:Go},exit:d={opacity:Lt}};Fi(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:Wo,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},y=mi(a,{signal:"height"},{signal:"width"}),x=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},b=s?{scale:s,range:1,mult:l,offset:u}:_t(y,{mult:l,offset:u});return c.x=h.x=mi(a,g,x),c.y=h.y=Na(a,g,x),c.x2=h.x2=Na(a,b),c.y2=h.y2=mi(a,b),d.x=mi(a,g),d.y=Na(a,g),wo({type:uO,role:jRe,key:Wo,from:i,encode:m},n)}function yMe(e,t){if(t!==1)if(!Oe(e))e=ni(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=_t({},e);for(;n.mult!=null;)if(Oe(n.mult))n=n.mult=_t({},n.mult);else return n.mult=ni(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function vMe(e,t,n,i,r,o){const a=to(e,t),s=e.orient,l=qS(s,-1,1);let u,c,d;const h={enter:u={opacity:Lt},update:d={opacity:Go},exit:c={opacity:Lt}};Fi(h,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const m=pi(r);m.mult=l;const g={scale:e.scale,field:Wo,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=u.y=mi(s,Lt,g),d.y2=u.y2=mi(s,m),c.x=mi(s,g),d.x=u.x=Na(s,Lt,g),d.x2=u.x2=Na(s,m),c.y=Na(s,g),wo({type:uO,role:BRe,key:Wo,from:i,encode:h},n)}function Qk(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function xMe(e,t,n,i,r,o){const a=to(e,t),s=e.orient,l=e.scale,u=qS(s,-1,1),c=qf(a("labelFlush")),d=qf(a("labelFlushOffset")),h=a("labelAlign"),m=a("labelBaseline");let g=c===0||!!c,y;const x=pi(r);x.mult=u,x.offset=pi(a("labelPadding")||0),x.offset.mult=u;const b={scale:l,field:Wo,band:.5,offset:pJ(o.offset,a("labelOffset"))},w=mi(s,g?Qk(l,c,'"left"','"right"','"center"'):{value:"center"},aMe(s,"left","right")),S=mi(s,_J(s,"bottom","top"),g?Qk(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),k=Qk(l,c,`-(${d})`,d,0);g=g&&d;const R={opacity:Lt,x:mi(s,b,x),y:Na(s,b,x)},M={enter:R,update:y={opacity:Go,text:{field:aO},x:R.x,y:R.y,align:w,baseline:S},exit:{opacity:Lt,x:R.x,y:R.y}};Fi(M,{dx:!h&&g?mi(s,k):null,dy:!m&&g?Na(s,k):null}),Fi(M,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:h,baseline:m});const T=a("labelBound");let N=a("labelOverlap");return N=N||T?{separation:a("labelSeparation"),method:N,order:"datum.index",bound:T?{scale:l,orient:s,tolerance:T}:null}:void 0,y.align!==w&&(y.align=gp(y.align,w)),y.baseline!==S&&(y.baseline=gp(y.baseline,S)),wo({type:Bd,role:zRe,style:qv,key:Wo,from:i,encode:M,overlap:N},n)}function _Me(e,t,n,i){const r=to(e,t),o=e.orient,a=qS(o,-1,1);let s,l;const u={enter:s={opacity:Lt,anchor:pi(r("titleAnchor",null)),align:{signal:cO}},update:l=_t({},s,{opacity:Go,text:pi(e.title)}),exit:{opacity:Lt}},c={signal:`lerp(range("${e.scale}"), ${US(0,1,.5)})`};return l.x=mi(o,c),l.y=Na(o,c),s.angle=mi(o,Lt,hMe(a,90)),s.baseline=mi(o,_J(o,xc,Wa),{value:xc}),l.angle=s.angle,l.baseline=s.baseline,Fi(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),bMe(r,o,u,n),u.update.align=gp(u.update.align,s.align),u.update.angle=gp(u.update.angle,s.angle),u.update.baseline=gp(u.update.baseline,s.baseline),wo({type:Bd,role:HRe,style:sO,from:i,encode:u},n)}function bMe(e,t,n,i){const r=(s,l)=>s!=null?(n.update[l]=gp(pi(s),n.update[l]),!1):!Oh(l,i),o=r(e("titleX"),"x"),a=r(e("titleY"),"y");n.enter.auto=a===o?pi(a):mi(t,pi(a),pi(o))}function wMe(e,t){const n=pMe(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,a=r.interactive,s=r.style,l=to(e,n),u=vAe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Je(t.add(Ua({},[c]))),h=Je(t.add(STe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),m=[];let g;return c.grid&&m.push(gMe(e,n,i.grid,h,u)),c.ticks&&(g=l("tickSize"),m.push(vMe(e,n,i.ticks,h,g,u))),c.labels&&(g=c.ticks?g:0,m.push(xMe(e,n,i.labels,h,g,u))),c.domain&&m.push(mMe(e,n,i.domain,d)),c.title&&m.push(_Me(e,n,i.title,d)),GS(tv({role:DRe,from:d,encode:Im(SMe(l,e),r,Vv),marks:m,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:a,style:s}),t)}function SMe(e,t){const n={enter:{},update:{}};return Fi(n,{orient:e("orient"),offset:e("offset")||0,position:xa(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function wJ(e,t,n){const i=$e(e.signals),r=$e(e.scales);return n||i.forEach(o=>eJ(o,t)),$e(e.projections).forEach(o=>tAe(o,t)),r.forEach(o=>UTe(o,t)),$e(e.data).forEach(o=>rMe(o,t)),r.forEach(o=>WTe(o,t)),(n||i).forEach(o=>wTe(o,t)),$e(e.axes).forEach(o=>wMe(o,t)),$e(e.marks).forEach(o=>GS(o,t)),$e(e.legends).forEach(o=>qAe(o,t)),e.title&&QAe(e.title,t),t.parseLambdas(),t}const CMe=e=>Im({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function EMe(e,t){const n=t.config,i=Je(t.root=t.add(Mw())),r=kMe(e,n);r.forEach(u=>eJ(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ua()),a=t.add(iJ(QK(CMe(e.encode),HS,nO,e.style,t,{pulse:Je(o)}))),s=t.add(aJ({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Je(a)}));t.operators.pop(),t.pushState(Je(a),Je(s),null),wJ(e,t,r),t.operators.push(s);let l=t.add(nJ({mark:i,pulse:Je(s)}));return l=t.add(oJ({pulse:Je(l)})),l=t.add(zd({pulse:Je(l)})),t.addData("root",new gd(t,o,o,l)),t}function Gg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function kMe(e,t){const n=a=>xa(e[a],t[a]),i=[Gg("background",n("background")),Gg("autosize",$Re(n("autosize"))),Gg("padding",ORe(n("padding"))),Gg("width",n("width")||0),Gg("height",n("height")||0)],r=i.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return $e(e.signals).forEach(a=>{tt(r,a.name)?a=_t(r[a.name],a):i.push(a),o[a.name]=a}),$e(t.signals).forEach(a=>{!tt(o,a.name)&&!tt(r,a.name)&&i.push(a)}),i}function SJ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function u6(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}SJ.prototype=u6.prototype={parse(e){return wJ(e,this)},fork(){return new u6(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof vM?Je(e):e;return this.add(DTe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let a,s;i&&(a=i.data||(i.data={}),s=a[r]||(a[r]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Je(this.add(zd({pulse:e})))),this._parent.push(t),this._lookup.push(n?Je(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ot(this._parent)},encode(){return Ot(this._encode)},lookup(){return Ot(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ie(e))return Qy(e,t);e.signal||le("Unsupported field reference: "+we(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Je(this.add(RTe(r)))}return i},compareRef(e){let t=!1;const n=o=>ni(o)?(t=!0,this.signalRef(o.signal)):dTe(o)?(t=!0,this.exprRef(o.expr)):o,i=$e(e.field).map(n),r=$e(e.order).map(n);return t?Je(this.add(Zz({fields:i,orders:r}))):Vz(i,r)},keyRef(e,t){let n=!1;const i=o=>ni(o)?(n=!0,Je(r[o.signal])):o,r=this.signals;return e=$e(e).map(i),n?Je(this.add(TTe({fields:e,flat:t}))):lTe(e,t)},sortRef(e){if(!e)return e;const t=zS(e.op,e.field),n=e.order||uTe;return n.signal?Je(this.add(Zz({fields:t,orders:this.signalRef(n.signal)}))):Vz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return tt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&le("Duplicate signal name: "+we(e));const n=t instanceof vM?t:this.add(Mw(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||le("Unrecognized signal name: "+we(e)),this.signals[e]},signalRef(e){return this.signals[e]?Je(this.signals[e]):(tt(this.lambdas,e)||(this.lambdas[e]=this.add(Mw(null))),Je(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Fs(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Oe(e)?e:this.signalRef(e.signal||mO(e))},exprRef(e,t){const n={expr:Fs(e,this)};return t&&(n.expr.$name=t),Je(this.add(ETe(n)))},addBinding(e,t){this.bindings||le("Nested signals do not support binding: "+we(e)),this.bindings.push(_t({signal:e},t))},addScaleProj(e,t){tt(this.scales,e)&&le("Duplicate scale or projection name: "+we(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,jTe(t))},addProjection(e,t){this.addScaleProj(e,OTe(t))},getScale(e){return this.scales[e]||le("Unrecognized scale name: "+we(e)),this.scales[e]},scaleRef(e){return Je(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return tt(this.data,e)&&le("Duplicate data set name: "+we(e)),this.data[e]=t},getData(e){return this.data[e]||le("Undefined data set name: "+we(e)),this.data[e]},addDataPipeline(e,t){return tt(this.data,e)&&le("Duplicate data set name: "+we(e)),this.addData(e,gd.fromEntries(this,t))}};function mO(e){return(de(e)?RMe:TMe)(e)}function RMe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Oe(r)?r.signal||mO(r):we(r))}return n+"]"}function TMe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+we(i)+":"+(Oe(r)?r.signal||mO(r):we(r));return t+"}"}function AMe(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function MMe(e,t,n){return Oe(e)||le("Input Vega specification must be an object."),t=wm(AMe(),t,e.config),EMe(e,new SJ(t,n)).toRuntime()}var FMe="5.27.0";_t(jp,Ome,ixe,Ixe,_be,pwe,B2e,_2e,U2e,hSe,SSe,MSe);const PMe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Vn,CanvasHandler:yc,CanvasRenderer:Uy,DATE:Zr,DAY:Wi,DAYOFYEAR:As,Dataflow:dp,Debug:bW,Error:SP,EventStream:q2,Gradient:mY,GroupItem:mS,HOURS:xo,Handler:gc,HybridHandler:U$,HybridRenderer:qb,Info:_W,Item:pS,MILLISECONDS:La,MINUTES:_o,MONTH:Zi,Marks:bo,MultiPulse:YP,None:xW,Operator:sn,Parameters:G2,Pulse:ec,QUARTER:Yr,RenderType:Lu,Renderer:ko,ResourceLoader:v$,SECONDS:Jo,SVGHandler:O$,SVGRenderer:SS,SVGStringRenderer:H$,Scenegraph:$$,TIME_UNITS:LP,Transform:ne,View:BK,WEEK:Qn,Warn:CP,YEAR:Ti,accessor:eo,accessorFields:Yi,accessorName:In,array:$e,ascending:$2,bandwidthNRD:JP,bin:nq,bootstrapCI:iq,boundClip:dZ,boundContext:$v,boundItem:_A,boundMark:$Y,boundStroke:ql,changeset:Od,clampRange:PW,codegenExpression:pK,compare:AP,constant:er,cumulativeLogNormal:rN,cumulativeNormal:Y2,cumulativeUniform:lN,dayofyear:uG,debounce:MP,defaultLocale:UP,definition:QG,densityLogNormal:iN,densityNormal:QP,densityUniform:sN,domChild:Kn,domClear:Oo,domCreate:Ou,domFind:I$,dotbin:rq,error:le,expressionFunction:Bn,extend:_t,extent:ks,extentIndex:NW,falsy:hu,fastmap:Cm,field:Xo,flush:$W,font:_S,fontFamily:Dv,fontSize:Ds,format:f_,formatLocale:Sb,formats:qP,hasOwnProperty:tt,id:xv,identity:Qi,inferType:HG,inferTypes:UG,ingest:qt,inherits:be,inrange:Jh,interpolate:c$,interpolateColors:dS,interpolateRange:tY,intersect:lZ,intersectBoxLine:Qh,intersectPath:x$,intersectPoint:_$,intersectRule:SY,isArray:de,isBoolean:Nc,isDate:Ju,isFunction:bt,isIterable:IW,isNumber:zt,isObject:Oe,isRegExp:OW,isString:Ie,isTuple:U2,key:FP,lerp:DW,lineHeight:pc,loader:B2,locale:zG,logger:EP,lruCache:LW,markup:B$,merge:jW,mergeConfig:wm,multiLineOffset:F$,one:bm,pad:zW,panLinear:kW,panLog:RW,panPow:TW,panSymlog:AW,parse:MMe,parseExpression:HI,parseSelector:jc,path:Q2,pathCurves:m$,pathEqual:hZ,pathParse:Gp,pathRectangle:vY,pathRender:jy,pathSymbols:yY,pathTrail:xY,peek:Ot,point:wS,projection:lI,quantileLogNormal:oN,quantileNormal:Z2,quantileUniform:uN,quantiles:XP,quantizeInterpolator:nY,quarter:MW,quartiles:KP,get random(){return Qo},randomInteger:zpe,randomKDE:tN,randomLCG:jpe,randomLogNormal:aq,randomMixture:sq,randomNormal:eN,randomUniform:lq,read:qG,regressionConstant:cN,regressionExp:cq,regressionLinear:fN,regressionLoess:hq,regressionLog:uq,regressionPoly:dq,regressionPow:fq,regressionQuad:dN,renderModule:CS,repeat:s0,resetDefaultLocale:Ohe,resetSVGClipId:bY,resetSVGDefIds:b1e,responseType:GG,runtimeContext:TK,sampleCurve:K2,sampleLogNormal:nN,sampleNormal:V2,sampleUniform:aN,scale:Ut,sceneEqual:W$,sceneFromJSON:OY,scenePickVisit:Db,sceneToJSON:IY,sceneVisit:ja,sceneZOrder:b$,scheme:f$,serializeXML:QY,setHybridRendererOptions:y1e,setRandom:Dpe,span:_v,splitAccessPath:Is,stringValue:we,textMetrics:mo,timeBin:kG,timeFloor:gG,timeFormatLocale:Ny,timeInterval:Tm,timeOffset:xG,timeSequence:wG,timeUnitSpecifier:lG,timeUnits:jP,toBoolean:PP,toDate:NP,toNumber:Gi,toSet:Da,toString:$P,transform:eq,transforms:jp,truncate:BW,truthy:Ko,tupleid:Qe,typeParsers:nA,utcFloor:yG,utcInterval:Am,utcOffset:_G,utcSequence:SG,utcdayofyear:dG,utcquarter:FW,utcweek:hG,version:FMe,visitArray:_u,week:cG,writeConfig:Sm,zero:Tu,zoomLinear:kP,zoomLog:RP,zoomPow:yb,zoomSymlog:TP},Symbol.toStringTag,{value:"Module"}));function NMe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var $Me={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},IMe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},OMe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const DMe=Array.prototype.slice,lf=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,DMe.call(t,1))},LMe=(e,t,n,i,r,o,a)=>new Date(e,t||0,n??1,i||0,r||0,o||0,a||0);var jMe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:LMe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return lf("join",arguments)},indexof:function(){return lf("indexOf",arguments)},lastindexof:function(){return lf("lastIndexOf",arguments)},slice:function(){return lf("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return lf("substring",arguments,String)},split:function(){return lf("split",arguments,String)},replace:function(){return lf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const zMe=["view","item","group","xy","x","y"],EM=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&EM.add(setImmediate);const BMe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:$Me[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),EM.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||jMe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>IMe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>OMe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,EM.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function qg(e,t,n,i,r,o){const a=s=>BMe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=i,a.event=r,a.item=o,zMe.forEach(s=>a.fn[s]=function(){return r.vega[s](...arguments)}),a(e)}var HMe={operator(e,t){const n=t.ast,i=e.functions;return r=>qg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>qg(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>qg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>{const a=o.item&&o.item.datum;return qg(n,i,r,a,o)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{const l=a.datum;let u=0,c;for(const d in i)c=qg(i[d].ast,r,s,l,void 0,a),a[d]!==c&&(a[d]=c,u=1);return n!=="rule"&&NMe(a,i,o),u}}};const UMe="vega-lite",WMe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',GMe="5.16.3",qMe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],VMe="https://vega.github.io/vega-lite/",YMe="Vega-Lite is a concise high-level language for interactive visualization.",ZMe=["vega","chart","visualization"],XMe="build/vega-lite.js",KMe="build/vega-lite.min.js",JMe="build/vega-lite.min.js",QMe="build/src/index",eFe="build/src/index.d.ts",tFe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},nFe=["bin","build","src","vega-lite*","tsconfig.json"],iFe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},rFe={type:"git",url:"https://github.com/vega/vega-lite.git"},oFe="BSD-3-Clause",aFe={url:"https://github.com/vega/vega-lite/issues"},sFe={"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},lFe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},uFe={vega:"^5.24.0"},cFe={node:">=18"},fFe={name:UMe,author:WMe,version:GMe,collaborators:qMe,homepage:VMe,description:YMe,keywords:ZMe,main:XMe,unpkg:KMe,jsdelivr:JMe,module:QMe,types:eFe,bin:tFe,files:nFe,scripts:iFe,repository:rFe,license:oFe,bugs:aFe,devDependencies:sFe,dependencies:lFe,peerDependencies:uFe,engines:cFe};function gO(e){return!!e.or}function yO(e){return!!e.and}function vO(e){return!!e.not}function $_(e,t){if(vO(e))$_(e.not,t);else if(yO(e))for(const n of e.and)$_(n,t);else if(gO(e))for(const n of e.or)$_(n,t);else t(e)}function yp(e,t){return vO(e)?{not:yp(e.not,t)}:yO(e)?{and:e.and.map(n=>yp(n,t))}:gO(e)?{or:e.or.map(n=>yp(n,t))}:t(e)}const ht=structuredClone;function CJ(e){throw new Error(e)}function em(e,t){const n={};for(const i of t)tt(e,i)&&(n[i]=e[i]);return n}function qr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>on(e)).join(",")})`};function Mt(e){if(zt(e))return e;const t=Ie(e)?e:on(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function kM(e){return e===!1||e===null}function Ft(e,t){return e.includes(t)}function yd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function xO(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function EJ(e,...t){for(const n of t)dFe(e,n??{});return e}function dFe(e,t){for(const n of me(t))Sm(e,n,t[n],!0)}function ms(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function hFe(e,t){const n=me(e),i=me(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function kJ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function _O(e,t){for(const n of e)if(t.has(n))return!0;return!1}function RM(e){const t=new Set;for(const n of e){const r=Is(n).map((a,s)=>s===0?a:`[${a}]`),o=r.map((a,s)=>r.slice(0,s+1).join(""));for(const a of o)t.add(a)}return t}function bO(e,t){return e===void 0||t===void 0?!0:_O(RM(e),RM(t))}function rn(e){return me(e).length===0}const me=Object.keys,Ai=Object.values,_c=Object.entries;function nv(e){return e===!0||e===!1}function wn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ty(e,t){return vO(e)?`!(${ty(e.not,t)})`:yO(e)?`(${e.and.map(n=>ty(n,t)).join(") && (")})`:gO(e)?`(${e.or.map(n=>ty(n,t)).join(") || (")})`:t(e)}function Fw(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Fw(e[n],t)&&delete e[n],rn(e)}function Yv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function wO(e,t="datum"){const n=Is(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(we).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function RJ(e,t="datum"){return`${t}[${we(Is(e).join("."))}]`}function pFe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ta(e){return`${Is(e).map(pFe).join("\\.")}`}function vd(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function SO(e){return`${Is(e).join(".")}`}function tm(e){return e?Is(e).length:0}function jn(...e){for(const t of e)if(t!==void 0)return t}let TJ=42;function AJ(e){const t=++TJ;return e?String(e)+t:t}function mFe(){TJ=42}function MJ(e){return FJ(e)?e:`__${e}`}function FJ(e){return e.startsWith("__")}function iv(e){if(e!==void 0)return(e%360+360)%360}function VS(e){return zt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const c6=Object.getPrototypeOf(structuredClone({}));function ho(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ho(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!ho(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==c6.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==c6.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const o=r[i];if(!ho(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function on(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,o;if(Array.isArray(i)){for(o="[",r=0;r<i.length;r++)r&&(o+=","),o+=n(i[r])||"null";return o+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const a=t.push(i)-1,s=Object.keys(i).sort();for(o="",r=0;r<s.length;r++){const l=s[r],u=n(i[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(a,1),`{${o}}`}(e)}const Tl="row",Al="column",YS="facet",Sn="x",_i="y",Ga="x2",Bs="y2",zc="xOffset",Lm="yOffset",qa="radius",Yl="radius2",ra="theta",Zl="theta2",Va="latitude",Ya="longitude",Za="latitude2",na="longitude2",Kr="color",Hs="fill",Us="stroke",Jr="shape",Xl="size",Hd="angle",Kl="opacity",Bc="fillOpacity",Hc="strokeOpacity",Uc="strokeWidth",Wc="strokeDash",Zv="text",nm="order",Xv="detail",ZS="key",xd="tooltip",XS="href",KS="url",JS="description",gFe={x:1,y:1,x2:1,y2:1},PJ={theta:1,theta2:1,radius:1,radius2:1};function NJ(e){return e in PJ}const CO={longitude:1,longitude2:1,latitude:1,latitude2:1};function $J(e){switch(e){case Va:return"y";case Za:return"y2";case Ya:return"x";case na:return"x2"}}function IJ(e){return e in CO}const yFe=me(CO),EO={...gFe,...PJ,...CO,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function vp(e){return e===Kr||e===Hs||e===Us}const OJ={row:1,column:1,facet:1},Ho=me(OJ),kO={...EO,...OJ},vFe=me(kO),{order:Q6e,detail:eBe,tooltip:tBe,...xFe}=kO,{row:nBe,column:iBe,facet:rBe,..._Fe}=xFe;function bFe(e){return!!_Fe[e]}function DJ(e){return!!kO[e]}const wFe=[Ga,Bs,Za,na,Zl,Yl];function LJ(e){return Ud(e)!==e}function Ud(e){switch(e){case Ga:return Sn;case Bs:return _i;case Za:return Va;case na:return Ya;case Zl:return ra;case Yl:return qa}return e}function bc(e){if(NJ(e))switch(e){case ra:return"startAngle";case Zl:return"endAngle";case qa:return"outerRadius";case Yl:return"innerRadius"}return e}function Ws(e){switch(e){case Sn:return Ga;case _i:return Bs;case Va:return Za;case Ya:return na;case ra:return Zl;case qa:return Yl}}function Qr(e){switch(e){case Sn:case Ga:return"width";case _i:case Bs:return"height"}}function jJ(e){switch(e){case Sn:return"xOffset";case _i:return"yOffset";case Ga:return"x2Offset";case Bs:return"y2Offset";case ra:return"thetaOffset";case qa:return"radiusOffset";case Zl:return"theta2Offset";case Yl:return"radius2Offset"}}function RO(e){switch(e){case Sn:return"xOffset";case _i:return"yOffset"}}function SFe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const CFe=me(EO),{x:oBe,y:aBe,x2:sBe,y2:lBe,xOffset:uBe,yOffset:cBe,latitude:fBe,longitude:dBe,latitude2:hBe,longitude2:pBe,theta:mBe,theta2:gBe,radius:yBe,radius2:vBe,...TO}=EO,EFe=me(TO),AO={x:1,y:1},Gs=me(AO);function zn(e){return e in AO}const MO={theta:1,radius:1},kFe=me(MO);function QS(e){return e==="width"?Sn:_i}const zJ={xOffset:1,yOffset:1};function Kv(e){return e in zJ}const{text:xBe,tooltip:_Be,href:bBe,url:wBe,description:SBe,detail:CBe,key:EBe,order:kBe,...BJ}=TO,RFe=me(BJ);function TFe(e){return!!TO[e]}function AFe(e){switch(e){case Kr:case Hs:case Us:case Xl:case Jr:case Kl:case Uc:case Wc:return!0;case Bc:case Hc:case Hd:return!1}}const HJ={...AO,...MO,...zJ,...BJ},eC=me(HJ);function Jl(e){return!!HJ[e]}function MFe(e,t){return PFe(e)[t]}const UJ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:RBe,...FFe}=UJ;function PFe(e){switch(e){case Kr:case Hs:case Us:case JS:case Xv:case ZS:case xd:case XS:case nm:case Kl:case Bc:case Hc:case Uc:case YS:case Tl:case Al:return UJ;case Sn:case _i:case zc:case Lm:case Va:case Ya:return FFe;case Ga:case Bs:case Za:case na:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Xl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Wc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Jr:return{point:"always",geoshape:"always"};case Zv:return{text:"always"};case Hd:return{point:"always",square:"always",text:"always"};case KS:return{image:"always"};case ra:return{text:"always",arc:"always"};case qa:return{text:"always",arc:"always"};case Zl:case Yl:return{arc:"always"}}}function eR(e){switch(e){case Sn:case _i:case ra:case qa:case zc:case Lm:case Xl:case Hd:case Uc:case Kl:case Bc:case Hc:case Ga:case Bs:case Zl:case Yl:return;case YS:case Tl:case Al:case Jr:case Wc:case Zv:case xd:case XS:case KS:case JS:return"discrete";case Kr:case Hs:case Us:return"flexible";case Va:case Ya:case Za:case na:case Xv:case ZS:case nm:return}}const NFe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},$Fe={count:1,min:1,max:1};function Hl(e){return!!e&&!!e.argmin}function Gc(e){return!!e&&!!e.argmax}function FO(e){return Ie(e)&&!!NFe[e]}const IFe=new Set(["count","valid","missing","distinct"]);function WJ(e){return Ie(e)&&IFe.has(e)}function OFe(e){return Ie(e)&&Ft(["min","max"],e)}const DFe=new Set(["count","sum","distinct","valid","missing"]),LFe=new Set(["mean","average","median","q1","q3","min","max"]);function GJ(e){return Nc(e)&&(e=dC(e,void 0)),"bin"+me(e).map(t=>tC(e[t])?wn(`_${t}_${_c(e[t])}`):wn(`_${t}_${e[t]}`)).join("")}function cn(e){return e===!0||Wd(e)&&!e.binned}function Ci(e){return e==="binned"||Wd(e)&&e.binned===!0}function Wd(e){return Oe(e)}function tC(e){return e==null?void 0:e.param}function f6(e){switch(e){case Tl:case Al:case Xl:case Kr:case Hs:case Us:case Uc:case Kl:case Bc:case Hc:case Jr:return 6;case Wc:return 4;default:return 10}}function Jv(e){return!!(e!=null&&e.expr)}function Dr(e){const t=me(e||{}),n={};for(const i of t)n[i]=lo(e[i]);return n}function qJ(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:h,subtitleLineHeight:m,subtitlePadding:g,...y}=e,x={...y,...s?{fill:s}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...o!==void 0?{angle:o}:{},...a!==void 0?{limit:a}:{}},w={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...h?{subtitleFontWeight:h}:{},...m?{subtitleLineHeight:m}:{},...g?{subtitlePadding:g}:{}},S=em(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:x,subtitleMarkConfig:S,nonMarkTitleProperties:b,subtitle:w}}function Cu(e){return Ie(e)||de(e)&&Ie(e[0])}function Ve(e){return!!(e!=null&&e.signal)}function qc(e){return!!e.step}function jFe(e){return de(e)?!1:"fields"in e&&!("data"in e)}function zFe(e){return de(e)?!1:"fields"in e&&"data"in e}function wl(e){return de(e)?!1:"field"in e&&"data"in e}const BFe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},HFe=me(BFe),UFe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},TM=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function VJ(e){const t=de(e.condition)?e.condition.map(d6):d6(e.condition);return{...lo(e),condition:t}}function lo(e){if(Jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function d6(e){if(Jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function mn(e){if(Jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ve(e)?e:e!==void 0?{value:e}:void 0}function WFe(e){return Ve(e)?e.signal:we(e)}function h6(e){return Ve(e)?e.signal:we(e.value)}function Ta(e){return Ve(e)?e.signal:e==null?null:we(e)}function GFe(e,t,n){for(const i of n){const r=Ul(i,t.markDef,t.config);r!==void 0&&(e[i]=mn(r))}return e}function YJ(e){return[].concat(e.type,e.style??[])}function Kt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:o&&(!r||r===e)?void 0:Ul(e,t,n,i)}function Ul(e,t,n,{vgChannel:i}={}){return jn(i?Pw(e,t,n.style):void 0,Pw(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function Pw(e,t,n){return ZJ(e,YJ(t),n)}function ZJ(e,t,n){t=$e(t);let i;for(const r of t){const o=n[r];o&&o[e]!==void 0&&(i=o[e])}return i}function XJ(e,t){return $e(e).reduce((n,i)=>(n.field.push(Ae(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function KJ(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ho(r,i))return;n.push(i)}),n}function JJ(e,t){return ho(e,t)||!t?e:e?[...$e(e),...$e(t)].join(", "):t}function QJ(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Cu(n)||Ve(n))&&(Cu(i)||Ve(i)))return{explicit:e.explicit,value:JJ(n,i)};if(Cu(n)||Ve(n))return{explicit:e.explicit,value:n};if(Cu(i)||Ve(i))return{explicit:e.explicit,value:i};if(!Cu(n)&&!Ve(n)&&!Cu(i)&&!Ve(i))return{explicit:e.explicit,value:KJ(n,i)};throw new Error("It should never reach here")}function PO(e){return`Invalid specification ${on(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const qFe='Autosize "fit" only works for single views and layered views.';function p6(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function m6(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function g6(e){return e?`Dropping "fit-${e}" because spec has discrete ${Qr(e)}.`:'Dropping "fit" because spec has discrete size.'}function NO(e){return`Unknown field for ${e}. Cannot calculate view size.`}function y6(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function VFe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function YFe(e){return`The "nearest" transform is not supported for ${e} marks.`}function eQ(e){return`Selection not supported for ${e} yet.`}function ZFe(e){return`Cannot find a selection named "${e}".`}const XFe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",KFe="Legend bindings are only supported for selections over an individual field or encoding channel.";function JFe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function QFe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const ePe="The same selection must be used to override scale domains in a layered view.",tPe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function nPe(e){return`Unknown repeated value "${e}".`}function v6(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const iPe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function rPe(e){return`Unrecognized parse "${e}".`}function x6(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const oPe="Attempt to add the same child twice.";function aPe(e){return`Ignoring an invalid transform: ${on(e)}.`}const sPe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function _6(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function lPe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${on(t)} is overridden by a child projection ${on(n)}.`}const uPe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function cPe(e){return`${e}Offset dropped because ${e} is continuous`}function fPe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${on(n)}}.`}function tQ(e){return`Invalid field type "${e}".`}function dPe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function hPe(e){return`Invalid aggregation operator "${e}".`}function nQ(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function pPe(e){return`Position range does not support relative band size for ${e}.`}function AM(e,t){return`Dropping ${on(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const mPe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function nC(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function gPe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function yPe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function vPe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function xPe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function tR(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function _Pe(e){return`The ${e} for range marks cannot be an expression`}function bPe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function wPe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function SPe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function CPe(e){return`Cannot use the relative band size with ${e} scale.`}function EPe(e){return`Using unaggregated domain with raw field has no effect (${on(e)}).`}function kPe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function RPe(e){return`Unaggregated domain is currently unsupported for log scale (${on(e)}).`}function TPe(e){return`Cannot apply size to non-oriented mark "${e}".`}function APe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function MPe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function iQ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function rQ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function FPe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${on(n)} and ${on(i)}). Using ${on(n)}.`}function PPe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${on(n)} and ${on(i)}). Using the union of the two domains.`}function NPe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function $Pe(e){return`Dropping sort property ${on(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const b6="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",IPe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",OPe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",DPe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function LPe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function jPe(e){return`Cannot stack non-linear scale (${e}).`}function zPe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Nw(e,t){return`Invalid ${e}: ${on(t)}.`}function BPe(e){return`Dropping day from datetime ${on(e)} as day cannot be combined with other units.`}function HPe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function UPe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function WPe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function w6(e){return`1D error band does not support ${e}.`}function oQ(e){return`Channel ${e} is required for "binned" bin.`}function GPe(e){return`Channel ${e} should not be used with "binned" bin.`}function qPe(e){return`Domain for ${e} is required for threshold scale.`}const aQ=EP(CP);let im=aQ;function VPe(e){return im=e,im}function YPe(){return im=aQ,im}function xe(...e){im.warn(...e)}function ZPe(...e){im.debug(...e)}function Gd(e){if(e&&Oe(e)){for(const t of IO)if(t in e)return!0}return!1}const sQ=["january","february","march","april","may","june","july","august","september","october","november","december"],XPe=sQ.map(e=>e.substr(0,3)),lQ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],KPe=lQ.map(e=>e.substr(0,3));function JPe(e){if(VS(e)&&(e=+e),zt(e))return e>4&&xe(Nw("quarter",e)),e-1;throw new Error(Nw("quarter",e))}function QPe(e){if(VS(e)&&(e=+e),zt(e))return e-1;{const t=e.toLowerCase(),n=sQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=XPe.indexOf(i);if(r!==-1)return r;throw new Error(Nw("month",e))}}function eNe(e){if(VS(e)&&(e=+e),zt(e))return e%7;{const t=e.toLowerCase(),n=lQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=KPe.indexOf(i);if(r!==-1)return r;throw new Error(Nw("day",e))}}function $O(e,t){const n=[];if(t&&e.day!==void 0&&me(e).length>1&&(xe(BPe(e)),e=ht(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?QPe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?JPe(e.quarter):e.quarter;n.push(zt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?eNe(e.day):e.day;n.push(zt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function _d(e){const n=$O(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function tNe(e){const n=$O(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function nNe(e){const t=$O(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const uQ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},IO=me(uQ);function iNe(e){return!!uQ[e]}function qd(e){return Oe(e)?e.binned:cQ(e)}function cQ(e){return e&&e.startsWith("binned")}function OO(e){return e.startsWith("utc")}function rNe(e){return e.substring(3)}const oNe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function iC(e){return IO.filter(t=>dQ(e,t))}function fQ(e){const t=iC(e);return t[t.length-1]}function dQ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function aNe(e,t,{end:n}={end:!1}){const i=wO(t),r=OO(e)?"utc":"";function o(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let a;const s={};for(const l of IO)dQ(e,l)&&(s[l]=o(l),a=l);return n&&(s[a]+="+1"),tNe(s)}function hQ(e){if(!e)return;const t=iC(e);return`timeUnitSpecifier(${on(t)}, ${on(oNe)})`}function sNe(e,t,n){if(!e)return;const i=hQ(e);return`${n||OO(e)?"utc":"time"}Format(${t}, ${i})`}function yi(e){if(!e)return;let t;return Ie(e)?cQ(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Oe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),OO(t.unit)&&(t.utc=!0,t.unit=rNe(t.unit)),t}function lNe(e){const{utc:t,...n}=yi(e);return n.unit?(t?"utc":"")+me(n).map(i=>wn(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+me(n).map(i=>wn(`_${i}_${n[i]}`)).join("")}function pQ(e,t=n=>n){const n=yi(e),i=fQ(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=mQ(i,n.step),s={...r,[a]:+r[a]+o};return`${t(_d(s))} - ${t(_d(r))}`}}const uNe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function cNe(e){return!!uNe[e]}function mQ(e,t=1){if(cNe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function fNe(e){return e==null?void 0:e.param}function DO(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function LO(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function jO(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function zO(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function BO(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function HO(e){if(e!=null&&e.field){if(de(e.range)&&e.range.length===2)return!0;if(Ve(e.range))return!0}return!1}function UO(e){return!!(e!=null&&e.field)&&(de(e.oneOf)||de(e.in))}function dNe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function gQ(e){return UO(e)||DO(e)||HO(e)||LO(e)||zO(e)||jO(e)||BO(e)}function os(e,t){return hC(e,{timeUnit:t,wrapTime:!0})}function hNe(e,t){return e.map(n=>os(n,t))}function yQ(e,t=!0){const{field:n}=e,i=yi(e.timeUnit),{unit:r,binned:o}=i||{},a=Ae(e,{expr:"datum"}),s=r?`time(${o?a:aNe(r,n)})`:a;if(DO(e))return`${s}===${os(e.equal,r)}`;if(LO(e)){const l=e.lt;return`${s}<${os(l,r)}`}else if(zO(e)){const l=e.gt;return`${s}>${os(l,r)}`}else if(jO(e)){const l=e.lte;return`${s}<=${os(l,r)}`}else if(BO(e)){const l=e.gte;return`${s}>=${os(l,r)}`}else{if(UO(e))return`indexof([${hNe(e.oneOf,r).join(",")}], ${s}) !== -1`;if(dNe(e))return WO(s,e.valid);if(HO(e)){const{range:l}=e,u=Ve(l)?{signal:`${l.signal}[0]`}:l[0],c=Ve(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+s+", ["+os(u,r)+", "+os(c,r)+"])";const d=[];return u!==null&&d.push(`${s} >= ${os(u,r)}`),c!==null&&d.push(`${s} <= ${os(c,r)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${on(e)}`)}function WO(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function pNe(e){return gQ(e)&&e.timeUnit?{...e,timeUnit:yi(e.timeUnit)}:e}const Qv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function mNe(e){return e==="quantitative"||e==="temporal"}function vQ(e){return e==="ordinal"||e==="nominal"}const bd=Qv.quantitative,GO=Qv.ordinal,rm=Qv.temporal,qO=Qv.nominal,jm=Qv.geojson;function gNe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case bd:return"quantitative";case"t":case rm:return"temporal";case"o":case GO:return"ordinal";case"n":case qO:return"nominal";case jm:return"geojson"}}const Vr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},MM={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function yNe(e,t){const n=MM[e],i=MM[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const vNe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function S6(e){return vNe[e]}const xQ=new Set(["linear","log","pow","sqrt","symlog"]),_Q=new Set([...xQ,"time","utc"]);function bQ(e){return xQ.has(e)}const wQ=new Set(["quantile","quantize","threshold"]),xNe=new Set([..._Q,...wQ,"sequential","identity"]),_Ne=new Set(["ordinal","bin-ordinal","point","band"]);function vi(e){return _Ne.has(e)}function So(e){return xNe.has(e)}function Aa(e){return _Q.has(e)}function om(e){return wQ.has(e)}const bNe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function wNe(e){return!Ie(e)&&!!e.name}function SQ(e){return e==null?void 0:e.param}function SNe(e){return e==null?void 0:e.unionWith}function CNe(e){return Oe(e)&&"field"in e}const ENe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:TBe,domain:ABe,range:MBe,rangeMax:FBe,rangeMin:PBe,scheme:NBe,...kNe}=ENe,RNe=me(kNe);function FM(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Aa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Aa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Aa(e);case"nice":return Aa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return So(e)&&!Ft(["log","time","utc","threshold","quantile"],e)}}function CQ(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return vp(e)?void 0:SPe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function TNe(e,t){return Ft([GO,qO],t)?e===void 0||vi(e):t===rm?Ft([Vr.TIME,Vr.UTC,void 0],e):t===bd?bQ(e)||om(e)||e===void 0:!0}function ANe(e,t,n=!1){if(!Jl(e))return!1;switch(e){case Sn:case _i:case zc:case Lm:case ra:case qa:return Aa(t)||t==="band"?!0:t==="point"?!n:!1;case Xl:case Uc:case Kl:case Bc:case Hc:case Hd:return Aa(t)||om(t)||Ft(["band","point","ordinal"],t);case Kr:case Hs:case Us:return t!=="band";case Wc:case Jr:return t==="ordinal"||om(t)}}const Cr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},EQ=Cr.arc,rC=Cr.area,oC=Cr.bar,MNe=Cr.image,aC=Cr.line,sC=Cr.point,FNe=Cr.rect,$w=Cr.rule,kQ=Cr.text,VO=Cr.tick,PNe=Cr.trail,YO=Cr.circle,ZO=Cr.square,RQ=Cr.geoshape;function Vc(e){return["line","area","trail"].includes(e)}function rv(e){return["rect","bar","image","arc"].includes(e)}const NNe=new Set(me(Cr));function Ps(e){return e.type}const $Ne=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],INe=["fill","fillOpacity"],ONe=[...$Ne,...INe],DNe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},C6=me(DNe),LNe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},jNe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},zNe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},TQ=me(zNe);function wd(e){return e&&e.band!=null}const BNe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},AQ=5,HNe={binSpacing:1,continuousBandSize:AQ,minBandSize:.25,timeUnitBandPosition:.5},UNe={binSpacing:0,continuousBandSize:AQ,minBandSize:.25,timeUnitBandPosition:.5},WNe={thickness:1};function GNe(e){return Ps(e)?e.type:e}function XO(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:o}=e,a=JO(e);return ve(n)&&!WJ(n.aggregate)&&r&&Aa(r.get("type"))?qNe({fieldDef:n,channel:t,markDef:i,ref:a,config:o}):a}function qNe({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return Vc(n.type)?i:Kt("invalid",n,r)===null?[VNe(e,t),i]:i}function VNe(e,t){const n=KO(e,!0),r=Ud(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...r}}function KO(e,t=!0){return WO(Ie(e)?e:Ae(e,{expr:"datum"}),!t)}function YNe(e){const{datum:t}=e;return Gd(t)?_d(t):`${on(t)}`}function Vf(e,t,n,i){const r={};if(t&&(r.scale=t),qs(e)){const{datum:o}=e;Gd(o)?r.signal=_d(o):Ve(o)?r.signal=o.signal:Jv(o)?r.signal=o.expr:r.value=o}else r.field=Ae(e,n);if(i){const{offset:o,band:a}=i;o&&(r.offset=o),a&&(r.band=a)}return r}function Iw({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:o="end",bandPosition:a=.5}){const s=!Ve(a)&&0<a&&a<1?"datum":void 0,l=Ae(t,{expr:s,suffix:r}),u=n!==void 0?Ae(n,{expr:s}):Ae(t,{suffix:o,expr:s}),c={};if(a===0||a===1){c.scale=e;const d=a===0?l:u;c.field=d}else{const d=Ve(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${u}`:`${1-a} * ${l} + ${a} * ${u}`;c.signal=`scale("${e}", ${d})`}return i&&(c.offset=i),c}function ZNe({scaleName:e,fieldDef:t}){const n=Ae(t,{expr:"datum"}),i=Ae(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function JO({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u,bandPosition:c}){if(t){if(mt(t)){const d=a==null?void 0:a.get("type");if(_r(t)){c??(c=wc({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:h,timeUnit:m,type:g}=t;if(cn(h)||c&&m&&g===rm)return s!=null&&s.impute?Vf(t,o,{binSuffix:"mid"},{offset:l}):c&&!vi(d)?Iw({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Vf(t,o,i1(t,e)?{binSuffix:"range"}:{},{offset:l});if(Ci(h)){if(ve(n))return Iw({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});xe(oQ(e===Sn?Ga:Bs))}}return Vf(t,o,vi(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(za(t)){const d=t.value,h=l?{offset:l}:{};return{...ny(e,d),...h}}}return bt(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function ny(e,t){return Ft(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ft(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:mn(t)}function Sd(e){return e&&e!=="number"&&e!=="time"}function MQ(e,t,n){return`${e}(${t}${n?`, ${on(n)}`:""})`}const XNe="  ";function QO({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){var l,u;if(Sd(n))return Ma({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const a=FQ(e,i,r),s=am(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(r&&o.normalizedNumberFormatType)return Ma({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Ma({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if(s==="temporal"&&o.timeFormatType&&ve(e)&&e.timeUnit===void 0)return Ma({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(lm(e)){const c=JNe({field:a,timeUnit:ve(e)?(l=yi(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Vd(e)&&((u=e.scale)==null?void 0:u.type)===Vr.UTC});return c?{signal:c}:void 0}if(t=PM({type:s,specifiedFormat:t,config:o,normalizeStack:r}),ve(e)&&cn(e.bin)){const c=Ae(e,{expr:i,binSuffix:"end"});return{signal:e1(a,c,t,n,o)}}else return t||am(e)==="quantitative"?{signal:`${$Q(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function FQ(e,t,n){return ve(e)?n?`${Ae(e,{expr:t,suffix:"end"})}-${Ae(e,{expr:t,suffix:"start"})}`:Ae(e,{expr:t}):YNe(e)}function Ma({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:a}){if(a??(a=FQ(e,i,r)),a!=="datum.value"&&ve(e)&&cn(e.bin)){const s=Ae(e,{expr:i,binSuffix:"end"});return{signal:e1(a,s,t,n,o)}}return{signal:MQ(n,a,t)}}function PQ(e,t,n,i,r,o){var a;if(!(Ie(i)&&Sd(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&am(e)==="quantitative"&&(r.normalizedNumberFormatType&&sm(e)&&e.stack==="normalize"||r.numberFormatType))){if(sm(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return PM({type:"quantitative",config:r,normalizeStack:!0});if(lm(e)){const s=ve(e)?(a=yi(e.timeUnit))==null?void 0:a.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:KNe({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:o})}return PM({type:t,specifiedFormat:n,config:r})}}function NQ(e,t,n){var i;if(e&&(Ve(e)||e==="number"||e==="time"))return e;if(lm(t)&&n!=="time"&&n!=="utc")return ve(t)&&((i=yi(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function PM({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Ie(t))return t;if(e===bd)return i?n.normalizedNumberFormat:n.numberFormat}function KNe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:hQ(t)}:i?void 0:n.timeFormat)}function $Q(e,t){return`format(${e}, "${t||""}")`}function E6(e,t,n,i){return Sd(n)?MQ(n,e,t):$Q(e,(Ie(t)?t:void 0)??i.numberFormat)}function e1(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return e1(e,t,r.numberFormat,r.numberFormatType,r);const o=E6(e,n,i,r),a=E6(t,n,i,r);return`${WO(e,!1)} ? "null" : ${o} + "${XNe}" + ${a}`}function JNe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=Ie(n)?n:r,`${o?"utc":"time"}Format(${e}, '${n}')`):sNe(t,e,o)}const lC="min",QNe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function k6(e){return e in QNe}function IQ(e){return!!(e!=null&&e.encoding)}function Ss(e){return e&&(e.op==="count"||!!e.field)}function OQ(e){return e&&de(e)}function t1(e){return"row"in e||"column"in e}function eD(e){return!!e&&"header"in e}function uC(e){return"facet"in e}function e$e(e){return e.param}function t$e(e){return e&&!Ie(e)&&"repeat"in e}function R6(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function tD(e){return"sort"in e}function wc({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(mt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ve(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return Ul("timeUnitBandPosition",n,i);if(cn(o))return .5}}function DQ({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:a}){var u,c,d;const s=Qr(e),l=Kt(a?"size":s,i,r,{vgChannel:s});if(l!==void 0)return l;if(ve(t)){const{timeUnit:h,bin:m}=t;if(h&&!n)return{band:Ul("timeUnitBandSize",i,r)};if(cn(m)&&!vi(o))return{band:1}}if(rv(i.type))return o?vi(o)?((u=r[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=r[i.type])==null?void 0:c.continuousBandSize:(d=r[i.type])==null?void 0:d.discreteBandSize}function LQ(e,t,n,i){return cn(e.bin)||e.timeUnit&&_r(e)&&e.type==="temporal"?wc({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function jQ(e){return e&&!!e.sort&&!e.field}function cC(e){return e&&"condition"in e}function fC(e){const t=e==null?void 0:e.condition;return!!t&&!de(t)&&ve(t)}function n1(e){const t=e==null?void 0:e.condition;return!!t&&!de(t)&&mt(t)}function n$e(e){const t=e==null?void 0:e.condition;return!!t&&(de(t)||za(t))}function ve(e){return e&&(!!e.field||e.aggregate==="count")}function am(e){return e==null?void 0:e.type}function qs(e){return e&&"datum"in e}function Uu(e){return _r(e)&&!Dw(e)||Ow(e)}function T6(e){return _r(e)&&e.type==="quantitative"&&!e.bin||Ow(e)}function Ow(e){return qs(e)&&zt(e.datum)}function mt(e){return ve(e)||qs(e)}function _r(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function za(e){return e&&"value"in e&&"value"in e}function Vd(e){return e&&("scale"in e||"sort"in e)}function sm(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function zQ(e){return e&&"legend"in e}function BQ(e){return e&&("format"in e||"formatType"in e)}function i$e(e){return qr(e,["legend","axis","header","scale"])}function r$e(e){return"op"in e}function Ae(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,o="";if(a$e(e))n=MJ("count");else{let a;if(!t.nofn)if(r$e(e))a=e.op;else{const{bin:s,aggregate:l,timeUnit:u}=e;cn(s)?(a=GJ(s),r=(t.binSuffix??"")+(t.suffix??"")):l?Gc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Hl(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):a=String(l):u&&!qd(u)&&(a=lNe(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?SO(n):t.expr?RJ(n,t.expr)+o:ta(n)+o}function Dw(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ve(e)&&!!e.bin;case"temporal":return!1}throw new Error(tQ(e.type))}function o$e(e){var t;return Vd(e)&&om((t=e.scale)==null?void 0:t.type)}function a$e(e){return e.aggregate==="count"}function s$e(e,t){var a;const{field:n,bin:i,timeUnit:r,aggregate:o}=e;if(o==="count")return t.countTitle;if(cn(i))return`${n} (binned)`;if(r&&!qd(r)){const s=(a=yi(r))==null?void 0:a.unit;if(s)return`${n} (${iC(s).join("-")})`}else if(o)return Gc(o)?`${n} for max ${o.argmax}`:Hl(o)?`${n} for min ${o.argmin}`:`${Yv(o)} of ${n}`;return n}function l$e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Gc(t))return`${r} for argmax(${t.argmax})`;if(Hl(t))return`${r} for argmin(${t.argmin})`;const o=i&&!qd(i)?yi(i):void 0,a=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||cn(n)&&"bin";return a?`${a.toUpperCase()}(${r})`:r}const HQ=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return l$e(e);default:return s$e(e,t)}};let UQ=HQ;function WQ(e){UQ=e}function u$e(){WQ(HQ)}function xp(e,t,{allowDisabling:n,includeDefault:i=!0}){var s;const r=(s=nD(e))==null?void 0:s.title;if(!ve(e))return r??e.title;const o=e,a=i?iD(o,t):void 0;return n?jn(r,o.title,a):r??o.title??a}function nD(e){if(sm(e)&&e.axis)return e.axis;if(zQ(e)&&e.legend)return e.legend;if(eD(e)&&e.header)return e.header}function iD(e,t){return UQ(e,t)}function Lw(e){if(BQ(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=nD(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function c$e(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(tD(e)&&de(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Gc(n)&&!Hl(n))return"quantitative";if(Vd(e)&&((o=e.scale)!=null&&o.type))switch(MM[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ns(e){if(ve(e))return e;if(fC(e))return e.condition}function ei(e){if(mt(e))return e;if(n1(e))return e.condition}function GQ(e,t,n,i={}){if(Ie(e)||zt(e)||Nc(e)){const r=Ie(e)?"string":zt(e)?"number":"boolean";return xe(fPe(t,r,e)),{value:e}}return mt(e)?jw(e,t,n,i):n1(e)?{...e,condition:jw(e.condition,t,n,i)}:e}function jw(e,t,n,i){if(BQ(e)){const{format:r,formatType:o,...a}=e;if(Sd(o)&&!n.customFormatTypes)return xe(_6(t)),jw(a,t,n,i)}else{const r=sm(e)?"axis":zQ(e)?"legend":eD(e)?"header":null;if(r&&e[r]){const{format:o,formatType:a,...s}=e[r];if(Sd(a)&&!n.customFormatTypes)return xe(_6(t)),jw({...e,[r]:s},t,n,i)}}return ve(e)?rD(e,t,i):f$e(e)}function f$e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=zt(n)?"quantitative":Ie(n)?"nominal":Gd(n)?"temporal":void 0,{...e,type:t}}function rD(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:a}=e,s={...e};if(!n&&i&&!FO(i)&&!Gc(i)&&!Hl(i)&&(xe(hPe(i)),delete s.aggregate),r&&(s.timeUnit=yi(r)),a&&(s.field=`${a}`),cn(o)&&(s.bin=dC(o,t)),Ci(o)&&!zn(t)&&xe(GPe(t)),_r(s)){const{type:l}=s,u=gNe(l);l!==u&&(s.type=u),l!=="quantitative"&&WJ(i)&&(xe(dPe(l,i)),s.type="quantitative")}else if(!LJ(t)){const l=c$e(s,t);s.type=l}if(_r(s)){const{compatible:l,warning:u}=d$e(s,t)||{};l===!1&&xe(u)}if(tD(s)&&Ie(s.sort)){const{sort:l}=s;if(k6(l))return{...s,sort:{encoding:l}};const u=l.substr(1);if(l.charAt(0)==="-"&&k6(u))return{...s,sort:{encoding:u,order:"descending"}}}if(eD(s)){const{header:l}=s;if(l){const{orient:u,...c}=l;if(u)return{...s,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return s}function dC(e,t){return Nc(e)?{maxbins:f6(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:f6(t)}:e}const Ah={compatible:!0};function d$e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Tl:case Al:case YS:return Dw(e)?Ah:{compatible:!1,warning:yPe(t)};case Sn:case _i:case zc:case Lm:case Kr:case Hs:case Us:case Zv:case Xv:case ZS:case xd:case XS:case KS:case Hd:case ra:case qa:case JS:return Ah;case Ya:case na:case Va:case Za:return n!==bd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ah;case Kl:case Bc:case Hc:case Uc:case Xl:case Zl:case Yl:case Ga:case Bs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ah;case Jr:case Wc:return!Dw(e)&&!o$e(e)?{compatible:!1,warning:vPe(t)}:Ah;case nm:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ah}}function lm(e){const{formatType:t}=Lw(e);return t==="time"||!t&&h$e(e)}function h$e(e){return e&&(e.type==="temporal"||ve(e)&&!!e.timeUnit)}function hC(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const o=t&&((l=yi(t))==null?void 0:l.unit);let a=o||n==="temporal",s;return Jv(e)?s=e.expr:Ve(e)?s=e.signal:Gd(e)?(a=!0,s=_d(e)):(Ie(e)||zt(e))&&a&&(s=`datetime(${on(e)})`,iNe(o)&&(zt(e)&&e<1e4||Ie(e)&&isNaN(Date.parse(e)))&&(s=_d({[o]:e}))),s?i&&a?`time(${s})`:s:r?void 0:on(e)}function qQ(e,t){const{type:n}=e;return t.map(i=>{const r=ve(e)&&!qd(e.timeUnit)?e.timeUnit:void 0,o=hC(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:i})}function i1(e,t){return cn(e.bin)?Jl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const A6={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function r1(e){return e==null?void 0:e.condition}const VQ=["domain","grid","labels","ticks","title"],p$e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},YQ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},m$e={...YQ,style:1,labelExpr:1,encoding:1};function M6(e){return!!m$e[e]}const g$e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},ZQ=me(g$e);function Ql(e){return"mark"in e}class pC{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ql(t)?GNe(t.mark)===this.name:!1}}function Yf(e,t){const n=e&&e[t];return n?de(n)?yd(n,i=>!!i.field):ve(n)||fC(n):!1}function XQ(e,t){const n=e&&e[t];return n?de(n)?yd(n,i=>!!i.field):ve(n)||qs(n)||n1(n):!1}function KQ(e,t){if(zn(t)){const n=e[t];if((ve(n)||qs(n))&&(vQ(n.type)||ve(n)&&n.timeUnit)){const i=RO(t);return XQ(e,i)}}return!1}function oD(e){return yd(vFe,t=>{if(Yf(e,t)){const n=e[t];if(de(n))return yd(n,i=>!!i.aggregate);{const i=Ns(n);return i&&!!i.aggregate}}return!1})}function JQ(e,t){const n=[],i=[],r=[],o=[],a={};return aD(e,(s,l)=>{if(ve(s)){const{field:u,aggregate:c,bin:d,timeUnit:h,...m}=s;if(c||h||d){const g=nD(s),y=g==null?void 0:g.title;let x=Ae(s,{forAs:!0});const b={...y?[]:{title:xp(s,t,{allowDisabling:!0})},...m,field:x};if(c){let w;if(Gc(c)?(w="argmax",x=Ae({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${x}.${u}`):Hl(c)?(w="argmin",x=Ae({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${x}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(w=c),w){const S={op:w,as:x};u&&(S.field=u),o.push(S)}}else if(n.push(x),_r(s)&&cn(d)){if(i.push({bin:d,field:u,as:x}),n.push(Ae(s,{binSuffix:"end"})),i1(s,l)&&n.push(Ae(s,{binSuffix:"range"})),zn(l)){const w={field:`${x}_end`};a[`${l}2`]=w}b.bin="binned",LJ(l)||(b.type=bd)}else if(h&&!qd(h)){r.push({timeUnit:h,field:u,as:x});const w=_r(s)&&s.type!==rm&&"time";w&&(l===Zv||l===xd?b.formatType=w:TFe(l)?b.legend={formatType:w,...b.legend}:zn(l)&&(b.axis={formatType:w,...b.axis}))}a[l]=b}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:a}}function y$e(e,t,n){const i=MFe(t,n);if(i){if(i==="binned"){const r=e[t===Ga?Sn:_i];return!!(ve(r)&&ve(e[t])&&Ci(r.bin))}}else return!1;return!0}function v$e(e,t,n,i){const r={};for(const o of me(e))DJ(o)||xe(gPe(o));for(let o of CFe){if(!e[o])continue;const a=e[o];if(Kv(o)){const s=SFe(o),l=r[s];if(ve(l)&&mNe(l.type)&&ve(a)&&!l.timeUnit){xe(cPe(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(xe(uPe),o=ra),!y$e(e,o,t)){xe(nC(o,t));continue}if(o===Xl&&t==="line"){const s=Ns(e[o]);if(s!=null&&s.aggregate){xe(mPe);continue}}if(o===Kr&&(n?"fill"in e:"stroke"in e)){xe(nQ("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Xv||o===nm&&!de(a)&&!za(a)||o===xd&&de(a)){if(a){if(o===nm){const s=e[o];if(jQ(s)){r[o]=s;continue}}r[o]=$e(a).reduce((s,l)=>(ve(l)?s.push(rD(l,o)):xe(AM(l,o)),s),[])}}else{if(o===xd&&a===null)r[o]=null;else if(!ve(a)&&!qs(a)&&!za(a)&&!cC(a)&&!Ve(a)){xe(AM(a,o));continue}r[o]=GQ(a,o,i)}}return r}function mC(e,t){const n={};for(const i of me(e)){const r=GQ(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function x$e(e){const t=[];for(const n of me(e))if(Yf(e,n)){const i=e[n],r=$e(i);for(const o of r)ve(o)?t.push(o):fC(o)&&t.push(o.condition)}return t}function aD(e,t,n){if(e)for(const i of me(e)){const r=e[i];if(de(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function _$e(e,t,n,i){return e?me(e).reduce((r,o)=>{const a=e[o];return de(a)?a.reduce((s,l)=>t.call(i,s,l,o),r):t.call(i,r,a,o)},n):n}function QQ(e,t){return me(t).reduce((n,i)=>{switch(i){case Sn:case _i:case XS:case JS:case KS:case Ga:case Bs:case zc:case Lm:case ra:case Zl:case qa:case Yl:case Va:case Ya:case Za:case na:case Zv:case Jr:case Hd:case xd:return n;case nm:if(e==="line"||e==="trail")return n;case Xv:case ZS:{const r=t[i];if(de(r)||ve(r))for(const o of $e(r))o.aggregate||n.push(Ae(o,{}));return n}case Xl:if(e==="trail")return n;case Kr:case Hs:case Us:case Kl:case Bc:case Hc:case Wc:case Uc:{const r=Ns(t[i]);return r&&!r.aggregate&&n.push(Ae(r,{})),n}}},[])}function b$e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(de(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return de(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function NM(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:a,titlePrefix:s})=>{const l=i?` of ${sD(t)}`:"";return{field:a+t.field,type:t.type,title:Ve(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),o=x$e(n).map(i$e);return{tooltip:[...r,...ms(o,Mt)]}}function sD(e){const{title:t,field:n}=e;return jn(t,n)}function lD(e,t,n,i,r){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const h=sD(n);return eee(e,s,r,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...h!==void 0?{title:h}:{},...o!==void 0?{scale:o}:{},...a!==void 0?{axis:a}:{}},...Ie(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...i,...d}})}}function eee(e,t,n,i){const{clip:r,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...o?{color:o}:{},...a?{opacity:a}:{},...Ps(i.mark)?i.mark:{type:i.mark},style:`${s}-${String(t)}`,...Nc(e[t])?{}:e[t]}}]:[]}function tee(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",o=i[r],a=i[`${r}2`],s=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:Lx(o,n),continuousAxisChannelDef2:Lx(a,n),continuousAxisChannelDefError:Lx(s,n),continuousAxisChannelDefError2:Lx(l,n),continuousAxis:r}}function Lx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&xe(WPe(n,t)),i}else return e}function nee(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(Ps(n)&&n.orient)return n.orient;if(Uu(r)){if(Uu(o)){const a=ve(r)&&r.aggregate,s=ve(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return lm(o)&&!lm(r)?"horizontal":"vertical"}return"horizontal"}else{if(Uu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const zw="boxplot",w$e=["box","median","outliers","rule","ticks"],S$e=new pC(zw,ree);function iee(e){return zt(e)?"tukey":e}function ree(e,{config:t}){e={...e,encoding:mC(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:o,...a}=e,s=Ps(n)?n:{type:n};r&&xe(eQ("boxplot"));const l=s.extent??t.boxplot.extent,u=Kt("size",s,t),c=s.invalid,d=iee(l),{bins:h,timeUnits:m,transform:g,continuousAxisChannelDef:y,continuousAxis:x,groupby:b,aggregate:w,encodingWithoutContinuousAxis:S,ticksOrient:k,boxOrient:R,customTooltipWithoutAggregatedField:M}=C$e(e,l,t),{color:T,size:N,...z}=S,H=Vt=>lD(s,x,y,Vt,t.boxplot),U=H(z),X=H(S),B=H({...z,...N?{size:N}:{}}),O=NM([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],y,S),j={type:"tick",color:"black",opacity:1,orient:k,invalid:c,aria:!1},q=d==="min-max"?O:NM([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,S),K=[...U({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...U({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...U({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:q}),...U({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:q})],W=[...d!=="tukey"?K:[],...X({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:R,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:O}),...B({partName:"median",mark:{type:"tick",invalid:c,...Oe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:k,aria:!1},positionPrefix:"mid_box",extraEncoding:O})];if(d==="min-max")return{...a,transform:(a.transform??[]).concat(g),layer:W};const J=`datum["lower_box_${y.field}"]`,Q=`datum["upper_box_${y.field}"]`,ae=`(${Q} - ${J})`,ge=`${J} - ${l} * ${ae}`,ke=`${Q} + ${l} * ${ae}`,pe=`datum["${y.field}"]`,Se={joinaggregate:oee(y.field),groupby:b},Fe={transform:[{filter:`(${ge} <= ${pe}) && (${pe} <= ${ke})`},{aggregate:[{op:"min",field:y.field,as:`lower_whisker_${y.field}`},{op:"max",field:y.field,as:`upper_whisker_${y.field}`},{op:"min",field:`lower_box_${y.field}`,as:`lower_box_${y.field}`},{op:"max",field:`upper_box_${y.field}`,as:`upper_box_${y.field}`},...w],groupby:b}],layer:K},{tooltip:Nt,...Et}=z,{scale:Te,axis:Ye}=y,Be=sD(y),ce=qr(Ye,["title"]),Tt=eee(s,"outliers",t.boxplot,{transform:[{filter:`(${pe} < ${ge}) || (${pe} > ${ke})`}],mark:"point",encoding:{[x]:{field:y.field,type:y.type,...Be!==void 0?{title:Be}:{},...Te!==void 0?{scale:Te}:{},...rn(ce)?{}:{axis:ce}},...Et,...T?{color:T}:{},...M?{tooltip:M}:{}}})[0];let ft;const Xe=[...h,...m,Se];return Tt?ft={transform:Xe,layer:[Tt,Fe]}:(ft=Fe,ft.transform.unshift(...Xe)),{...a,layer:[ft,{transform:g,layer:W}]}}function oee(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function C$e(e,t,n){const i=nee(e,zw),{continuousAxisChannelDef:r,continuousAxis:o}=tee(e,i,zw),a=r.field,s=iee(t),l=[...oee(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],u=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=b$e(d),{bins:g,timeUnits:y,aggregate:x,groupby:b,encoding:w}=JQ(m,n),S=i==="vertical"?"horizontal":"vertical",k=i,R=[...g,...y,{aggregate:[...x,...l],groupby:b},...u];return{bins:g,timeUnits:y,transform:R,groupby:b,aggregate:x,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:S,boxOrient:k,customTooltipWithoutAggregatedField:h}}const uD="errorbar",E$e=["ticks","rule"],k$e=new pC(uD,aee);function aee(e,{config:t}){e={...e,encoding:mC(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=see(e,uD,t);delete o.size;const c=lD(s,r,i,o,t.errorbar),d=s.thickness,h=s.size,m={type:"tick",orient:a,aria:!1,...d!==void 0?{thickness:d}:{},...h!==void 0?{size:h}:{}},g=[...c({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...g.length>1?{layer:g}:{...g[0]}}}function R$e(e,t){const{encoding:n}=e;if(T$e(n))return{orient:nee(e,t),inputType:"raw"};const i=A$e(n),r=M$e(n),o=n.x,a=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(mt(s)&&mt(l))throw new Error(`${t} cannot have both x2 and y2`);if(mt(s)){if(Uu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(mt(l)){if(Uu(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(mt(l)&&!mt(s))throw new Error(`${t} cannot have xError2 without xError`);if(mt(c)&&!mt(u))throw new Error(`${t} cannot have yError2 without yError`);if(mt(s)&&mt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(mt(s)){if(Uu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(mt(u)){if(Uu(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function T$e(e){return(mt(e.x)||mt(e.y))&&!mt(e.x2)&&!mt(e.y2)&&!mt(e.xError)&&!mt(e.xError2)&&!mt(e.yError)&&!mt(e.yError2)}function A$e(e){return mt(e.x2)||mt(e.y2)}function M$e(e){return mt(e.xError)||mt(e.xError2)||mt(e.yError)||mt(e.yError2)}function see(e,t,n){const{mark:i,encoding:r,params:o,projection:a,...s}=e,l=Ps(i)?i:{type:i};o&&xe(eQ(t));const{orient:u,inputType:c}=R$e(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=tee(e,u,t),{errorBarSpecificAggregate:x,postAggregateCalculates:b,tooltipSummary:w,tooltipTitleWithFieldName:S}=F$e(l,d,h,m,g,c,t,n),{[y]:k,[y==="x"?"x2":"y2"]:R,[y==="x"?"xError":"yError"]:M,[y==="x"?"xError2":"yError2"]:T,...N}=r,{bins:z,timeUnits:H,aggregate:U,groupby:X,encoding:B}=JQ(N,n),O=[...U,...x],j=c!=="raw"?[]:X,q=NM(w,d,B,S);return{transform:[...s.transform??[],...z,...H,...O.length===0?[]:[{aggregate:O,groupby:j}],...b],groupby:j,continuousAxisChannelDef:d,continuousAxis:y,encodingWithoutContinuousAxis:B,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:q}}function F$e(e,t,n,i,r,o,a,s){let l=[],u=[];const c=t.field;let d,h=!1;if(o==="raw"){const m=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,g=e.extent?e.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(g==="iqr")&&xe(UPe(m,g,a)),g==="stderr"||g==="stdev")l=[{op:g,field:c,as:`extent_${c}`},{op:m,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:Yv(m)},{fieldPrefix:"upper_",titlePrefix:F6(m,g,"+")},{fieldPrefix:"lower_",titlePrefix:F6(m,g,"-")}],h=!0;else{let y,x,b;g==="ci"?(y="mean",x="ci0",b="ci1"):(y="median",x="q1",b="q3"),l=[{op:x,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:y,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:xp({field:c,aggregate:b,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:xp({field:c,aggregate:x,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:xp({field:c,aggregate:y,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&xe(HPe(e.center,e.extent)),o==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],r?u.push({calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const m of u)d.push({fieldPrefix:m.as.substring(0,6),titlePrefix:vd(vd(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:h}}function F6(e,t,n){return`${Yv(e)} ${n} ${t}`}const cD="errorband",P$e=["band","borders"],N$e=new pC(cD,lee);function lee(e,{config:t}){e={...e,encoding:mC(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=see(e,cD,t),u=a,c=lD(u,r,i,o,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let h={type:d?"area":"rect"},m={type:d?"line":"rule"};const g={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(h={...h,...g,ariaRoleDescription:"errorband"},m={...m,...g,aria:!1}):u.interpolate?xe(w6("interpolate")):u.tension&&xe(w6("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:l})]}}const uee={};function fD(e,t,n){const i=new pC(e,t);uee[e]={normalizer:i,parts:n}}function $$e(){return me(uee)}fD(zw,ree,w$e);fD(uD,aee,E$e);fD(cD,lee,P$e);const I$e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],cee={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},fee={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},O$e=me(cee),D$e=me(fee),L$e={header:1,headerRow:1,headerColumn:1,headerFacet:1},dee=me(L$e),hee=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],j$e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},z$e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ba="_vgsid_",B$e={point:{on:"click",fields:[Ba],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function dD(e){return e==="legend"||!!(e!=null&&e.legend)}function nR(e){return dD(e)&&Oe(e)}function hD(e){return!!(e!=null&&e.select)}function pee(e){const t=[];for(const n of e||[]){if(hD(n))continue;const{expr:i,bind:r,...o}=n;if(r&&i){const a={...o,bind:r,init:i};t.push(a)}else{const a={...o,...i?{update:i}:{},...r?{bind:r}:{}};t.push(a)}}return t}function H$e(e){return gC(e)||mD(e)||pD(e)}function pD(e){return"concat"in e}function gC(e){return"vconcat"in e}function mD(e){return"hconcat"in e}function mee({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function $s(e){return Oe(e)&&e.step!==void 0}function P6(e){return e.view||e.width||e.height}const N6=20,U$e={align:1,bounds:1,center:1,columns:1,spacing:1},W$e=me(U$e);function G$e(e,t,n){const i=n[t],r={},{spacing:o,columns:a}=i;o!==void 0&&(r.spacing=o),a!==void 0&&(uC(e)&&!t1(e.facet)||pD(e))&&(r.columns=a),gC(e)&&(r.columns=1);for(const s of W$e)if(e[s]!==void 0)if(s==="spacing"){const l=e[s];r[s]=zt(l)?l:{row:l.row??o,column:l.column??o}}else r[s]=e[s];return r}function $M(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function Bw(e,t){const n=Hw(e,t);return $s(n)?n.step:gee}function Hw(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return jn(n,{step:e.step})}const gee=20,q$e={continuousWidth:200,continuousHeight:200,step:gee},V$e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:q$e,mark:jNe,arc:{},area:{},bar:HNe,circle:{},geoshape:{},image:{},line:{},point:{},rect:UNe,rule:{color:"black"},square:{},text:{color:"black"},tick:WNe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:bNe,projection:{},legend:j$e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:B$e,style:{},title:{},facet:{spacing:N6},concat:{spacing:N6},normalizedNumberFormat:".0%"},il=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],$6={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},I6={blue:il[0],orange:il[1],red:il[2],teal:il[3],green:il[4],yellow:il[5],purple:il[6],pink:il[7],brown:il[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Y$e(e={}){return{signals:[{name:"color",value:Oe(e)?{...I6,...e}:I6}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Z$e(e){return{signals:[{name:"fontSize",value:Oe(e)?{...$6,...e}:$6}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function X$e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function yee(e){const t=me(e||{}),n={};for(const i of t){const r=e[i];n[i]=r1(r)?VJ(r):lo(r)}return n}function K$e(e){const t=me(e),n={};for(const i of t)n[i]=yee(e[i]);return n}const J$e=[...TQ,...ZQ,...dee,"background","padding","legend","lineBreak","scale","style","title","view"];function vee(e={}){const{color:t,font:n,fontSize:i,selection:r,...o}=e,a=wm({},ht(V$e),n?X$e(n):{},t?Y$e(t):{},i?Z$e(i):{},o||{});r&&Sm(a,"selection",r,!0);const s=qr(a,J$e);for(const l of["background","lineBreak","padding"])a[l]&&(s[l]=lo(a[l]));for(const l of TQ)a[l]&&(s[l]=Dr(a[l]));for(const l of ZQ)a[l]&&(s[l]=yee(a[l]));for(const l of dee)a[l]&&(s[l]=Dr(a[l]));return a.legend&&(s.legend=Dr(a.legend)),a.scale&&(s.scale=Dr(a.scale)),a.style&&(s.style=K$e(a.style)),a.title&&(s.title=Dr(a.title)),a.view&&(s.view=Dr(a.view)),s}const Q$e=new Set(["view",...NNe]),eIe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],tIe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...LNe};function nIe(e){e=ht(e);for(const t of eIe)delete e[t];if(e.axis)for(const t in e.axis)r1(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of I$e)delete e.legend[t];if(e.mark){for(const t of C6)delete e.mark[t];e.mark.tooltip&&Oe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(pee(e.params)),delete e.params);for(const t of Q$e){for(const i of C6)delete e[t][i];const n=tIe[t];if(n)for(const i of n)delete e[t][i];rIe(e,t)}for(const t of $$e())delete e[t];iIe(e);for(const t in e)Oe(e[t])&&rn(e[t])&&delete e[t];return rn(e)?void 0:e}function iIe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=qJ(e.title);rn(t)||(e.style["group-title"]={...e.style["group-title"],...t}),rn(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),rn(i)?delete e.title:e.title=i}function rIe(e,t,n,i){const r=i?e[t][i]:e[t];t==="view"&&(n="cell");const o={...r,...e.style[n??t]};rn(o)||(e.style[n??t]=o),i||delete e[t]}function yC(e){return"layer"in e}function oIe(e){return"repeat"in e}function aIe(e){return!de(e.repeat)&&e.repeat.layer}class gD{map(t,n){return uC(t)?this.mapFacet(t,n):oIe(t)?this.mapRepeat(t,n):mD(t)?this.mapHConcat(t,n):gC(t)?this.mapVConcat(t,n):pD(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(yC(t))return this.mapLayer(t,n);if(Ql(t))return this.mapUnit(t,n);throw new Error(PO(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const sIe={zero:1,center:1,normalize:1};function lIe(e){return e in sIe}const uIe=new Set([EQ,oC,rC,$w,sC,YO,ZO,aC,kQ,VO]),cIe=new Set([oC,rC,EQ]);function Mh(e){return ve(e)&&am(e)==="quantitative"&&!e.bin}function O6(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(i),a=e[t],s=e[r];if(ve(a)&&ve(s))if(Mh(a)&&Mh(s)){if(a.stack)return t;if(s.stack)return r;const l=ve(a)&&!!a.aggregate,u=ve(s)&&!!s.aggregate;if(l!==u)return l?t:r;if(o){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Mh(a))return t;if(Mh(s))return r}else{if(Mh(a))return o&&n==="vertical"?void 0:t;if(Mh(s))return o&&n==="horizontal"?void 0:r}}function fIe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function xee(e,t){var y,x;const n=Ps(e)?e:{type:e},i=n.type;if(!uIe.has(i))return null;const r=O6(t,"x",n)||O6(t,"theta",n);if(!r)return null;const o=t[r],a=ve(o)?Ae(o,{}):void 0,s=fIe(r),l=[],u=new Set;if(t[s]){const b=t[s],w=ve(b)?Ae(b,{}):void 0;w&&w!==a&&(l.push(s),u.add(w))}const c=s==="x"?"xOffset":"yOffset",d=t[c],h=ve(d)?Ae(d,{}):void 0;h&&h!==a&&(l.push(c),u.add(h));const m=EFe.reduce((b,w)=>{if(w!=="tooltip"&&Yf(t,w)){const S=t[w];for(const k of $e(S)){const R=Ns(k);if(R.aggregate)continue;const M=Ae(R,{});(!M||!u.has(M))&&b.push({channel:w,fieldDef:R})}}return b},[]);let g;return o.stack!==void 0?Nc(o.stack)?g=o.stack?"zero":null:g=o.stack:cIe.has(i)&&(g="zero"),!g||!lIe(g)||oD(t)&&m.length===0?null:(y=o==null?void 0:o.scale)!=null&&y.type&&((x=o==null?void 0:o.scale)==null?void 0:x.type)!==Vr.LINEAR?(o!=null&&o.stack&&xe(jPe(o.scale.type)),null):mt(t[Ws(r)])?(o.stack!==void 0&&xe(LPe(r)),null):(ve(o)&&o.aggregate&&!DFe.has(o.aggregate)&&xe(zPe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:r,impute:o.impute===null?!1:Vc(i),stackBy:m,offset:g})}function _ee(e,t,n){const i=Dr(e),r=Kt("orient",i,n);if(i.orient=mIe(i.type,t,r),r!==void 0&&r!==i.orient&&xe(wPe(i.orient,r)),i.type==="bar"&&i.orient){const s=Kt("cornerRadiusEnd",i,n);if(s!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:BNe[i.orient];for(const u of l)i[u]=s;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Kt("opacity",i,n)===void 0&&(i.opacity=hIe(i.type,t)),Kt("cursor",i,n)===void 0&&(i.cursor=dIe(i,t,n)),i}function dIe(e,t,n){return t.href||e.href||Kt("href",e,n)?"pointer":e.cursor}function hIe(e,t){if(Ft([sC,VO,YO,ZO],e)&&!oD(t))return .7}function pIe(e,t,{graticule:n}){if(n)return!1;const i=Ul("filled",e,t),r=e.type;return jn(i,r!==sC&&r!==aC&&r!==$w)}function mIe(e,t,n){switch(e){case sC:case YO:case ZO:case kQ:case FNe:case MNe:return}const{x:i,y:r,x2:o,y2:a}=t;switch(e){case oC:if(ve(i)&&(Ci(i.bin)||ve(r)&&r.aggregate&&!i.aggregate))return"vertical";if(ve(r)&&(Ci(r.bin)||ve(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(ve(i)&&i.type===bd&&!cn(i.bin)||Ow(i))&&ve(r)&&Ci(r.bin)?"horizontal":"vertical";if(!a)return(ve(r)&&r.type===bd&&!cn(r.bin)||Ow(r))&&ve(i)&&Ci(i.bin)?"vertical":"horizontal"}case $w:if(o&&!(ve(i)&&Ci(i.bin))&&a&&!(ve(r)&&Ci(r.bin)))return;case rC:if(a)return ve(r)&&Ci(r.bin)?"horizontal":"vertical";if(o)return ve(i)&&Ci(i.bin)?"vertical":"horizontal";if(e===$w){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case aC:case VO:{const s=T6(i),l=T6(r);if(n)return n;if(s&&!l)return e!=="tick"?"horizontal":"vertical";if(!s&&l)return e!=="tick"?"vertical":"horizontal";if(s&&l)return"vertical";{const u=_r(i)&&i.type===rm,c=_r(r)&&r.type===rm;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function gIe(e){const{point:t,line:n,...i}=e;return me(i).length>1?i:i.type}function yIe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:qr(e[t],["point","line"])});return e}function iR(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Oe(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Oe(t.point)?t.point:{}:void 0}function D6(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class vIe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ql(t)){const{mark:i,encoding:r}=t,o=Ps(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!iR(o,n[o.type],r);case"area":return!!iR(o,n[o.type],r)||!!D6(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:a,mark:s,name:l,encoding:u,...c}=t,d=mC(u,r),h=Ps(s)?s:{type:s},m=iR(h,r[h.type],d),g=h.type==="area"&&D6(h,r[h.type]),y=[{name:l,...o?{params:o}:{},mark:gIe({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:qr(d,["shape"])}],x=xee(_ee(h,d,r),d);let b=d;if(x){const{fieldChannel:w,offset:S}=x;b={...d,[w]:{...d[w],...S?{stack:S}:{}}}}return b=qr(b,["y2","x2"]),g&&y.push({...a?{projection:a}:{},mark:{type:"line",...em(h,["clip","interpolate","tension","tooltip"]),...g},encoding:b}),m&&y.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...em(h,["clip","tooltip"]),...m},encoding:b}),i({...c,layer:y},{...n,config:yIe(r)})}}function xIe(e,t){return t?t1(e)?wee(e,t):bee(e,t):e}function rR(e,t){return t?wee(e,t):e}function IM(e,t,n){const i=t[e];if(t$e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};xe(nPe(i.repeat));return}return t}function bee(e,t){if(e=IM("field",e,t),e!==void 0){if(e===null)return null;if(tD(e)&&Ss(e.sort)){const n=IM("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function L6(e,t){if(ve(e))return bee(e,t);{const n=IM("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function j6(e,t){if(mt(e)){const n=L6(e,t);if(n)return n;if(cC(e))return{condition:e.condition}}else{if(n1(e)){const n=L6(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function wee(e,t){const n={};for(const i in e)if(tt(e,i)){const r=e[i];if(de(r))n[i]=r.map(o=>j6(o,t)).filter(o=>o);else{const o=j6(r,t);o!==void 0&&(n[i]=o)}}return n}class _Ie{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ql(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ps(i)&&i.type==="line")for(const r of wFe){const o=Ud(r),a=n[o];if(n[r]&&(ve(a)&&!Ci(a.bin)||qs(a)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return xe(bPe(!!r.x2,!!r.y2)),i({...t,mark:Oe(o)?{...o,type:"rule"}:"rule"},n)}}class bIe extends gD{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[S$e,k$e,N$e,new vIe,new _Ie]}map(t,n){if(Ql(t)){const i=Yf(t.encoding,Tl),r=Yf(t.encoding,Al),o=Yf(t.encoding,YS);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=rR(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,s);return a}mapRepeat(t,n){return aIe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...o}=t,{row:a,column:s,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return a||s?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...s?{column:s}:{}},spec:{repeat:{layer:l},spec:r}},n):{...o,layer:l.map(d=>{const h={...u,layer:d},m=`${(r.name?`${r.name}_`:"")+c}child__layer_${wn(d)}`,g=this.mapLayerOrUnit(r,{...n,repeater:h,repeaterPrefix:m});return g.name=m,g})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:o,...a}=t;!de(i)&&t.columns&&(t=qr(t,["columns"]),xe(v6("repeat")));const s=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!de(i)&&i.row||[l?l.row:null],d=!de(i)&&i.column||[l?l.column:null],h=de(i)&&i||[l?l.repeat:null];for(const g of h)for(const y of c)for(const x of d){const b={repeat:g,row:y,column:x,layer:l.layer},w=(r.name?`${r.name}_`:"")+u+"child__"+(de(i)?`${wn(g)}`:(i.row?`row_${wn(y)}`:"")+(i.column?`column_${wn(x)}`:"")),S=this.map(r,{...n,repeater:b,repeaterPrefix:w});S.name=w,s.push(qr(S,["data"]))}const m=de(i)?t.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...a,columns:m,concat:s}}mapFacet(t,n){const{facet:i}=t;return t1(i)&&t.columns&&(t=qr(t,["columns"]),xe(v6("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:a,config:s}=n,l=B6({parentProjection:a,projection:r}),u=z6({parentEncoding:o,encoding:rR(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:s})}mapFacetedUnit(t,n){const{row:i,column:r,facet:o,...a}=t.encoding,{mark:s,width:l,projection:u,height:c,view:d,params:h,encoding:m,...g}=t,{facetMapping:y,layout:x}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},n),b=rR(a,n.repeater);return this.mapFacet({...g,...x,facet:y,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:s,encoding:b,...h?{params:h}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:o}=t;if(i||r){o&&xe(xPe([...i?[Tl]:[],...r?[Al]:[]]));const a={},s={};for(const l of[Tl,Al]){const u=t[l];if(u){const{align:c,center:d,spacing:h,columns:m,...g}=u;a[l]=g;for(const y of["align","center","spacing"])u[y]!==void 0&&(s[y]??(s[y]={}),s[y][l]=u[y])}}return{facetMapping:a,layout:s}}else{const{align:a,center:s,spacing:l,columns:u,...c}=o;return{facetMapping:xIe(c,n.repeater),layout:{...a?{align:a}:{},...s?{center:s}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:o,projection:a,...s}=t,l={...r,parentEncoding:z6({parentEncoding:n,encoding:o,layer:!0}),parentProjection:B6({parentProjection:i,projection:a})};return super.mapLayer({...s,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function z6({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...me(e),...me(t)]);for(const o of r){const a=t[o],s=e[o];if(mt(a)){const l={...s,...a};i[o]=l}else n1(a)?i[o]={...a,condition:{...s,...a.condition}}:a||a===null?i[o]=a:(n||za(s)||Ve(s)||mt(s)||de(s))&&(i[o]=s)}}else i=t;return!i||rn(i)?void 0:i}function B6(e){const{parentProjection:t,projection:n}=e;return t&&n&&xe(lPe({parentProjection:t,projection:n})),n??t}function yD(e){return"filter"in e}function wIe(e){return(e==null?void 0:e.stop)!==void 0}function See(e){return"lookup"in e}function SIe(e){return"data"in e}function CIe(e){return"param"in e}function EIe(e){return"pivot"in e}function kIe(e){return"density"in e}function RIe(e){return"quantile"in e}function TIe(e){return"regression"in e}function AIe(e){return"loess"in e}function MIe(e){return"sample"in e}function FIe(e){return"window"in e}function PIe(e){return"joinaggregate"in e}function NIe(e){return"flatten"in e}function $Ie(e){return"calculate"in e}function Cee(e){return"bin"in e}function IIe(e){return"impute"in e}function OIe(e){return"timeUnit"in e}function DIe(e){return"aggregate"in e}function LIe(e){return"stack"in e}function jIe(e){return"fold"in e}function zIe(e){return"extent"in e&&!("density"in e)}function BIe(e){return e.map(t=>yD(t)?{filter:yp(t.filter,pNe)}:t)}class HIe extends gD{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=H6(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=H6(t,n),t.encoding){const i={};for(const[r,o]of _c(t.encoding))i[r]=Eee(o,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:_c(i).map(([o,a])=>{const{init:s,bind:l,empty:u,...c}=a;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const d of Ai(n.selectionPredicates[o]??{}))d.empty=u!=="none";return{name:o,value:s,select:c,bind:l}})}:t}}function H6(e,t){const{transform:n,...i}=e;if(n){const r=n.map(o=>{if(yD(o))return{filter:OM(o,t)};if(Cee(o)&&Wd(o.bin))return{...o,bin:kee(o.bin)};if(See(o)){const{selection:a,...s}=o.from;return a?{...o,from:{param:a,...s}}:o}return o});return{...i,transform:r}}return e}function Eee(e,t){var i,r;const n=ht(e);if(ve(n)&&Wd(n.bin)&&(n.bin=kee(n.bin)),Vd(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:o,...a}=n.scale.domain;n.scale.domain={...a,...o?{param:o}:{}}}if(cC(n))if(de(n.condition))n.condition=n.condition.map(o=>{const{selection:a,param:s,test:l,...u}=o;return s?o:{...u,test:OM(o,t)}});else{const{selection:o,param:a,test:s,...l}=Eee(n.condition,t);n.condition=a?n.condition:{...l,test:OM(n.condition,t)}}return n}function kee(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function OM(e,t){const n=i=>yp(i,r=>{var o;const a=t.emptySelections[r]??!0,s={param:r,empty:a};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):yp(e.test||e.filter,i=>i.selection?n(i.selection):i)}class DM extends gD{map(t,n){const i=n.selections??[];if(t.params&&!Ql(t)){const r=[];for(const o of t.params)hD(o)?i.push(o):r.push(o);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),o=[];for(const a of i)if(!a.views||!a.views.length)o.push(a);else for(const s of a.views)(Ie(s)&&(s===t.name||r.includes(s))||de(s)&&s.map(l=>r.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(a);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=DM.prototype[e];DM.prototype[e]=function(n,i){return t.call(this,n,UIe(n,i))}}function UIe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Ree(e,t){t===void 0&&(t=vee(e.config));const n=VIe(e,t),{width:i,height:r}=e,o=YIe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const WIe=new bIe,GIe=new HIe,qIe=new DM;function VIe(e,t={}){const n={config:t};return qIe.map(WIe.map(GIe.map(e,n),n),n)}function U6(e){return Ie(e)?{type:e}:e??{}}function YIe(e,t,n){let{width:i,height:r}=t;const o=Ql(e)||yC(e),a={};o?i=="container"&&r=="container"?(a.type="fit",a.contains="padding"):i=="container"?(a.type="fit-x",a.contains="padding"):r=="container"&&(a.type="fit-y",a.contains="padding"):(i=="container"&&(xe(p6("width")),i=void 0),r=="container"&&(xe(p6("height")),r=void 0));const s={type:"pad",...a,...n?U6(n.autosize):{},...U6(e.autosize)};if(s.type==="fit"&&!o&&(xe(qFe),s.type="pad"),i=="container"&&!(s.type=="fit"||s.type=="fit-x")&&xe(m6("width")),r=="container"&&!(s.type=="fit"||s.type=="fit-y")&&xe(m6("height")),!ho(s,{type:"pad"}))return s}function ZIe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function XIe(e){return e?`fit-${QS(e)}`:"fit"}const KIe=["background","padding"];function W6(e,t){const n={};for(const i of KIe)e&&e[i]!==void 0&&(n[i]=lo(e[i]));return t&&(n.params=e.params),n}class eu{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new eu(ht(this.explicit),ht(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return jn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of me(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function us(e){return{explicit:!0,value:e}}function io(e){return{explicit:!1,value:e}}function Tee(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:vC(t,n,i,r)}}function vC(e,t,n,i){return e.explicit&&t.explicit&&xe(FPe(n,i,e.value,t.value)),e}function Sc(e,t,n,i,r=vC){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ho(e.value,t.value)?e:r(e,t,n,i)}class JIe extends eu{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function um(e){return"url"in e}function ov(e){return"values"in e}function Aee(e){return"name"in e&&!um(e)&&!ov(e)&&!ic(e)}function ic(e){return e&&(Mee(e)||Fee(e)||vD(e))}function Mee(e){return"sequence"in e}function Fee(e){return"sphere"in e}function vD(e){return"graticule"in e}var ln;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ln||(ln={}));function Pee(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=ta(r.field),r}function Cd(e,t=!0,n=Qi){if(de(e)){const i=e.map(r=>Cd(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Gd(e))return n(t?_d(e):nNe(e));return t?n(on(e)):e}function QIe(e,t){for(const n of Ai(e.component.selection??{})){const i=n.name;let r=`${i}${Ec}, ${n.resolve==="global"?"true":`{unit: ${Zf(e)}}`}`;for(const o of wC)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(r=o.modifyExpr(e,n,r)));t.push({name:i+FOe,on:[{events:{signal:n.name+Ec},update:`modify(${we(n.name+Ed)}, ${r})`}]})}return xD(t)}function eOe(e,t){if(e.component.selection&&me(e.component.selection).length){const n=we(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:jc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return xD(t)}function tOe(e,t){let n=!1;for(const i of Ai(e.component.selection??{})){const r=i.name,o=we(r+Ed);if(t.filter(s=>s.name===r).length===0){const s=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${Xee}(${o}, ${we(s)}${l}`})}n=!0;for(const s of wC)s.defined(i)&&s.topLevelSignals&&(t=s.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),xD(t)}function nOe(e,t){const n=[...t],i=Zf(e,{escape:!1});for(const r of Ai(e.component.selection??{})){const o={name:r.name+Ed};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ba}}]),r.init){const s=r.project.items.map(Pee);o.values=r.project.hasSelectionId?r.init.map(l=>({unit:i,[Ba]:Cd(l,!1)[0]})):r.init.map(l=>({unit:i,fields:s,values:Cd(l,!1)}))}n.filter(s=>s.name===r.name+Ed).length||n.push(o)}return n}function Nee(e,t){for(const n of Ai(e.component.selection??{}))for(const i of wC)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function iOe(e,t){for(const n of e.children)Nn(n)&&(t=Nee(n,t));return t}function rOe(e,t,n,i){const r=tte(e,t.param,t);return{signal:So(n.get("type"))&&de(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function xD(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class tn{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){xe(oPe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class yr extends tn{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${AJ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function oR(e){return e.as!==void 0}function G6(e){return`${e}_end`}class Cs extends tn{clone(){return new Cs(null,ht(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,a)=>{const{field:s,timeUnit:l}=o;if(l){let u;if(qd(l)){if(Nn(n)){const{mark:c,markDef:d,config:h}=n,m=wc({fieldDef:o,markDef:d,config:h});(rv(c)||m)&&(u={timeUnit:yi(l),field:s})}}else u={as:Ae(o,{forAs:!0}),field:s,timeUnit:l};if(Nn(n)){const{mark:c,markDef:d,config:h}=n,m=wc({fieldDef:o,markDef:d,config:h});rv(c)&&zn(a)&&m!==.5&&(u.rectBandPosition=m)}u&&(r[Mt(u)]=u)}return r},{});return rn(i)?null:new Cs(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},o=yi(i),a={...r,timeUnit:o};return new Cs(t,{[Mt(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of _c(this.timeUnits)){const o=oR(r)?r.as:`${r.field}_end`;t.has(o)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Ai(this.timeUnits).map(t=>oR(t)?t.as:G6(t.field)))}dependentFields(){return new Set(Ai(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Mt(this.timeUnits)}`}assemble(){const t=[];for(const n of Ai(this.timeUnits)){const{rectBandPosition:i}=n,r=yi(n.timeUnit);if(oR(n)){const{field:o,as:a}=n,{unit:s,utc:l,...u}=r,c=[a,`${a}_end`];t.push({field:ta(o),type:"timeunit",...s?{units:iC(s)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...q6(c,i,r))}else if(n){const{field:o}=n,a=o.replaceAll("\\.","."),s=$ee({timeUnit:r,field:a}),l=G6(a);t.push({type:"formula",expr:s,as:l}),t.push(...q6([a,l],i,r))}}return t}}const xC="offsetted_rect_start",_C="offsetted_rect_end";function $ee({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,o=fQ(i),{part:a,step:s}=mQ(o,e.step);return`${r?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function q6([e,t],n,i){if(n!==void 0&&n!==.5){const r=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:V6([$ee({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${xC}`},{type:"formula",expr:V6([r,o],n+.5),as:`${e}_${_C}`}]}return[]}function V6([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const o1="_tuple_fields";class oOe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const aOe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new oOe),o={},a={},s=new Set,l=(g,y)=>{const x=y==="visual"?g.channel:g.field;let b=wn(`${i}_${x}`);for(let w=1;s.has(b);w++)b=wn(`${i}_${x}_${w}`);return s.add(b),{[y]:b}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?$e(n.value):null;let{fields:h,encodings:m}=Oe(n.select)?n.select:{};if(!h&&!m&&d){for(const g of d)if(Oe(g))for(const y of me(g))bFe(y)?(m||(m=[])).push(y):u==="interval"?(xe(tPe),m=c.encodings):(h??(h=[])).push(y)}!h&&!m&&(m=c.encodings,"fields"in c&&(h=c.fields));for(const g of m??[]){const y=e.fieldDef(g);if(y){let x=y.field;if(y.aggregate){xe(VFe(g,y.aggregate));continue}else if(!x){xe(y6(g));continue}if(y.timeUnit&&!qd(y.timeUnit)){x=e.vgField(g);const b={timeUnit:y.timeUnit,as:x,field:y.field};a[Mt(b)]=b}if(!o[x]){const b=u==="interval"&&Jl(g)&&So(e.getScaleComponent(g).get("type"))?"R":y.bin?"R-RE":"E",w={field:x,channel:g,type:b,index:r.items.length};w.signals={...l(w,"data"),...l(w,"visual")},r.items.push(o[x]=w),r.hasField[x]=o[x],r.hasSelectionId=r.hasSelectionId||x===Ba,IJ(g)?(w.geoChannel=g,w.channel=$J(g),r.hasChannel[w.channel]=o[x]):r.hasChannel[g]=o[x]}}else xe(y6(g))}for(const g of h??[]){if(r.hasField[g])continue;const y={type:"E",field:g,index:r.items.length};y.signals={...l(y,"data")},r.items.push(y),r.hasField[g]=y,r.hasSelectionId=r.hasSelectionId||g===Ba}d&&(t.init=d.map(g=>r.items.map(y=>Oe(g)?g[y.geoChannel||y.channel]!==void 0?g[y.geoChannel||y.channel]:g[y.field]:g))),rn(a)||(r.timeUnit=new Cs(null,a))},signals:(e,t,n)=>{const i=t.name+o1;return n.filter(o=>o.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(Pee)})}},Ml={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Jl(r))continue;const o=e.getScaleComponent(r),a=o?o.get("type"):void 0;if(!o||!So(a)){xe(XFe);continue}o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||Y6(e)||i.length===0)return n;const r=n.filter(a=>a.name===t.name)[0];let o=r.update;if(o.indexOf(Xee)>=0)r.update=`{${i.map(a=>`${we(ta(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of i){const s=`${we(ta(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}r.update=o}return n.concat(i.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Y6(e))for(const i of t.scales){const r=n.filter(o=>o.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function LM(e,t){return`domain(${we(e.scaleName(t))})`}function Y6(e){return e.parent&&Wm(e.parent)&&!e.parent.parent}const _p="_brush",Iee="_scale_trigger",Vg="geo_interval_init_tick",Oee="_init",sOe="_center",lOe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...Oe(n.select)?n.select:{}};r.fields=[Ba],r.encodings||(r.encodings=n.value?me(n.value):[Ya,Va]),n.select={type:"interval",...r}}if(t.translate&&!Ml.defined(t)){const r=`!event.item || event.item.mark.name !== ${we(t.name+_p)}`;for(const o of t.events){if(!o.between){xe(`${o} is not an ordered event stream for interval selections.`);continue}const a=$e((i=o.between[0]).filter??(i.filter=[]));a.indexOf(r)<0&&a.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+Ec,o=Ai(t.project.hasChannel).filter(s=>s.channel===Sn||s.channel===_i),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,l)=>s.concat(uOe(e,t,l,a&&a[l.index])),[])),e.hasProjection){const s=we(e.projectionName()),l=e.projectionName()+sOe,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,h=c&&c.signals.visual,m=u?a&&a[u.index]:`${l}[0]`,g=c?a&&a[c.index]:`${l}[1]`,y=R=>e.getSizeSignalRef(R).signal,x=`[[${d?d+"[0]":"0"}, ${h?h+"[0]":"0"}],[${d?d+"[1]":y("width")}, ${h?h+"[1]":y("height")}]]`;a&&(n.unshift({name:i+Oee,init:`[scale(${s}, [${u?m[0]:m}, ${c?g[0]:g}]), scale(${s}, [${u?m[1]:m}, ${c?g[1]:g}])]`}),(!u||!c)&&(n.find(M=>M.name===l)||n.unshift({name:l,update:`invert(${s}, [${y("width")}/2, ${y("height")}/2])`})));const b=`intersect(${x}, {markname: ${we(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Zf(e)}}`,S=`vlSelectionTuples(${b}, ${w})`,k=o.map(R=>R.signals.visual);return n.concat({name:r,on:[{events:[...k.length?[{signal:k.join(" || ")}]:[],...a?[{signal:Vg}]:[]],update:S}]})}else{if(!Ml.defined(t)){const u=i+Iee,c=o.map(d=>{const h=d.channel,{data:m,visual:g}=d.signals,y=we(e.scaleName(h)),x=e.getScaleComponent(h).get("type"),b=So(x)?"+":"";return`(!isArray(${m}) || (${b}invert(${y}, ${g})[0] === ${b}${m}[0] && ${b}invert(${y}, ${g})[1] === ${b}${m}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const s=o.map(u=>u.signals.data),l=`unit: ${Zf(e)}, fields: ${i+o1}, values`;return n.concat({name:r,...a?{init:`{${l}: ${Cd(a)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Nn(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===Vg).length||n.unshift({name:Vg,value:null,on:[{events:"timer{1}",update:`${Vg} === null ? {} : ${Vg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,a=r==null?void 0:r.signals.visual,s=o==null?void 0:o.signals.visual,l=`data(${we(t.name+Ed)})`;if(Ml.defined(t)||!r&&!o)return n;const u={x:r!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:r!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of me(u))u[y]=[{test:`${l}.length && ${l}[0].unit === ${Zf(e)}`,...u[y]},{value:0}];const{fill:c,fillOpacity:d,cursor:h,...m}=t.mark,g=me(m).reduce((y,x)=>(y[x]=[{test:[r!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(b=>b).join(" && "),value:m[x]},{value:null}],y),{});return[{name:`${i+_p}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:i+_p,type:"rect",clip:!0,encode:{enter:{...h?{cursor:{value:h}}:{},fill:{value:"transparent"}},update:{...u,...g}}}]}};function uOe(e,t,n,i){const r=!e.hasProjection,o=n.channel,a=n.signals.visual,s=we(r?e.scaleName(o):e.projectionName()),l=h=>`scale(${s}, ${h})`,u=e.getSizeSignalRef(o===Sn?"width":"height").signal,c=`${o}(unit)`,d=t.events.reduce((h,m)=>[...h,{events:m.between[0],update:`[${c}, ${c}]`},{events:m,update:`[${a}[0], clamp(${c}, 0, ${u})]`}],[]);if(r){const h=n.signals.data,m=Ml.defined(t),g=e.getScaleComponent(o),y=g?g.get("type"):void 0,x=i?{init:Cd(i,!0,l)}:{value:[]};return d.push({events:{signal:t.name+Iee},update:So(y)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),m?[{name:h,on:[]}]:[{name:a,...x,on:d},{name:h,...i?{init:Cd(i)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]}]}else{const h=o===Sn?0:1,m=t.name+Oee,g=i?{init:`[${m}[0][${h}], ${m}[1][${h}]]`}:{value:[]};return[{name:a,...g,on:d}]}}const cOe={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,r=i+o1,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=Ai(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+_p):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let u=`unit: ${Zf(e)}, `;if(t.project.hasSelectionId)u+=`${Ba}: ${a}[${we(Ba)}]`;else{const d=o.items.map(h=>{const m=e.fieldDef(h.channel);return m!=null&&m.bin?`[${a}[${we(e.vgField(h.channel,{}))}], ${a}[${we(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${a}[${we(h.field)}]`}).join(", ");u+=`fields: ${r}, values: [${d}]`}const c=t.events;return n.concat([{name:i+Ec,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function zm(e,t,n,i){const r=cC(t)&&t.condition,o=i(t);if(r){const s=$e(r).map(l=>{const u=i(l);if(e$e(l)){const{param:c,empty:d}=l;return{test:ete(e,{param:c,empty:d}),...u}}else return{test:Gw(e,l.test),...u}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function _D(e,t="text"){const n=e.encoding[t];return zm(e,n,t,i=>bC(i,e.config))}function bC(e,t,n="datum"){if(e){if(za(e))return mn(e.value);if(mt(e)){const{format:i,formatType:r}=Lw(e);return QO({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function Dee(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,a=n.tooltip;if(de(a))return{tooltip:Z6({tooltip:a},o,r,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return zm(e,a,"tooltip",l=>{const u=bC(l,r,s);if(u)return u;if(l===null)return;let c=Kt("tooltip",i,r);if(c===!0&&(c={content:"encoding"}),Ie(c))return{value:c};if(Oe(c))return Ve(c)?c:c.content==="encoding"?Z6(n,o,r,t):{signal:s}})}}function Lee(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},o={},a=i?"datum.datum":"datum",s=[];function l(c,d){const h=Ud(d),m=_r(c)?c:{...c,type:e[h].type},g=m.title||iD(m,r),y=$e(g).join(", ").replaceAll(/"/g,'\\"');let x;if(zn(d)){const b=d==="x"?"x2":"y2",w=Ns(e[b]);if(Ci(m.bin)&&w){const S=Ae(m,{expr:a}),k=Ae(w,{expr:a}),{format:R,formatType:M}=Lw(m);x=e1(S,k,R,M,r),o[b]=!0}}if((zn(d)||d===ra||d===qa)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:b,formatType:w}=Lw(m);x=QO({fieldOrDatumDef:m,format:b,formatType:w,expr:a,config:r,normalizeStack:!0}).signal}x??(x=bC(m,r,a).signal),s.push({channel:d,key:y,value:x})}aD(e,(c,d)=>{ve(c)?l(c,d):fC(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:h}of s)!o[c]&&!u[d]&&(u[d]=h);return u}function Z6(e,t,n,{reactiveGeom:i}={}){const r=Lee(e,t,n,{reactiveGeom:i}),o=_c(r).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function fOe(e){const{markDef:t,config:n}=e,i=Kt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...dOe(e),...hOe(e)}}function dOe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=Kt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in UFe?{}:{ariaRoleDescription:{value:t}}}function hOe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return zm(e,o,"description",l=>bC(l,e.config));const a=Kt("description",n,i);if(a!=null)return{description:mn(a)};if(i.aria===!1)return{};const s=Lee(t,r,i);if(!rn(s))return{description:{signal:_c(s).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function ci(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;s===void 0&&(l??(l=Kt(e,i,o,{vgChannel:a,ignoreVgConfig:!0})),l!==void 0&&(s=mn(l)));const u=r[e];return zm(t,u,a??e,c=>JO({channel:e,channelDef:c,markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function jee(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:o}=n,a=t.filled??Kt("filled",n,r),s=Ft(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Kt(a===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[a===!0&&"color"]??s,u=Kt(a===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[a===!1&&"color"],c=a?"fill":"stroke",d={...l?{fill:mn(l)}:{},...u?{stroke:mn(u)}:{}};return n.color&&(a?n.fill:n.stroke)&&xe(nQ("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...ci("color",e,{vgChannel:c,defaultValue:a?l:u}),...ci("fill",e,{defaultValue:i.fill?l:void 0}),...ci("stroke",e,{defaultValue:i.stroke?u:void 0})}}function pOe(e){const{encoding:t,mark:n}=e,i=t.order;return!Vc(n)&&za(i)?zm(e,i,"zindex",r=>mn(r.value)):{}}function cm({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:JO({channel:o,channelDef:s,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:mn(a),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function qi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:a,stack:s}=t,l=r[e],u=r[Ws(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:h,offsetType:m}=cm({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),g=bD({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),y=!l&&zn(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:mOe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:a,scaleName:c,scale:d,stack:s,offset:h,defaultRef:g,bandPosition:m==="encoding"?0:void 0});return y?{[i||e]:y}:void 0}function mOe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:a}=e;if(mt(n)&&r&&t===r.fieldChannel){if(ve(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return Iw({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return Vf(n,i,{suffix:"end"},{offset:o})}return XO(e)}function bD({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:a}=e;return()=>{const s=Ud(n),l=bc(n),u=Kt(n,o,a,{vgChannel:l});if(u!==void 0)return ny(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const c=r.get("type");if(!Ft([Vr.LOG,Vr.TIME,Vr.UTC],c)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Qr(n)],mult:.5}}}}const gOe={left:"x",center:"xc",right:"x2"},yOe={top:"y",middle:"yc",bottom:"y2"};function zee(e,t,n,i="middle"){if(e==="radius"||e==="theta")return bc(e);const r=e==="x"?"align":"baseline",o=Kt(r,t,n);let a;return Ve(o)?(xe(_Pe(r)),a=void 0):a=o,e==="x"?gOe[a||(i==="top"?"left":"center")]:yOe[a||i]}function Uw(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?Bee(e,t,{defaultPos:n,defaultPos2:i}):qi(e,t,{defaultPos:n})}function Bee(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,a=Ws(e),s=Qr(e),l=vOe(t,i,a),u=l[s]?zee(e,r,o):bc(e);return{...qi(e,t,{defaultPos:n,vgChannel:u}),...l}}function vOe(e,t,n){const{encoding:i,mark:r,markDef:o,stack:a,config:s}=e,l=Ud(n),u=Qr(n),c=bc(n),d=i[l],h=e.scaleName(l),m=e.getScaleComponent(l),{offset:g}=n in i||n in o?cm({channel:n,markDef:o,encoding:i,model:e}):cm({channel:l,markDef:o,encoding:i,model:e});if(!d&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const x=Qr(n),b=e.markDef[x];return b!=null?{[x]:{value:b}}:{[c]:{field:e.getName(n)}}}const y=xOe({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:s,scaleName:h,scale:m,stack:a,offset:g,defaultRef:void 0});return y!==void 0?{[c]:y}:jx(n,o)||jx(n,{[n]:Pw(n,o,s.style),[u]:Pw(u,o,s.style)})||jx(n,s[r])||jx(n,s.mark)||{[c]:bD({model:e,defaultPos:t,channel:n,scaleName:h,scale:m})()}}function xOe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){return mt(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Vf(t,o,{suffix:"start"},{offset:l}):XO({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:i,config:r,offset:l,defaultRef:u})}function jx(e,t){const n=Qr(e),i=bc(e);if(t[i]!==void 0)return{[i]:ny(e,t[i])};if(t[e]!==void 0)return{[i]:ny(e,t[e])};if(t[n]){const r=t[n];if(wd(r))xe(pPe(n));else return{[n]:ny(e,r)}}}function Cc(e,t){const{config:n,encoding:i,markDef:r}=e,o=r.type,a=Ws(t),s=Qr(t),l=i[t],u=i[a],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,h=r.orient,m=i[s]??i.size??Kt("size",r,n,{vgChannel:s}),g=jJ(t),y=o==="bar"&&(t==="x"?h==="vertical":h==="horizontal");return ve(l)&&(cn(l.bin)||Ci(l.bin)||l.timeUnit&&!u)&&!(m&&!wd(m))&&!i[g]&&!vi(d)?wOe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(mt(l)&&vi(d)||y)&&!u?bOe(l,t,e):Bee(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function _Oe(e,t,n,i,r,o,a){if(wd(r))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;r.band!==1&&(u=`${r.band} * ${u}`);const c=Ul("minBandSize",{type:a},i);return{signal:c?`max(${Ta(c)}, ${u})`:u}}else r.band!==1&&(xe(CPe(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ve(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(qc(l)&&zt(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c}=i.scale,d=jn(l,a==="bar"?u:c);if(Ve(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(zt(d))return{signal:`${1-d} * ${e}`}}return{value:Bw(i.view,e)-2}}function bOe(e,t,n){var z,H;const{markDef:i,encoding:r,config:o,stack:a}=n,s=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=Qr(t),d=Ws(t),h=jJ(t),m=n.scaleName(h),g=n.getScaleComponent(RO(t)),y=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let x;(r.size||i.size)&&(y?x=ci("size",n,{vgChannel:c,defaultRef:mn(i.size)}):xe(TPe(i.type)));const b=!!x,w=DQ({channel:t,fieldDef:e,markDef:i,config:o,scaleType:(z=u||g)==null?void 0:z.get("type"),useVlSizeChannel:y});x=x||{[c]:_Oe(c,m||l,g||u,o,w,!!e,i.type)};const S=((H=u||g)==null?void 0:H.get("type"))==="band"&&wd(w)&&!b?"top":"middle",k=zee(t,i,o,S),R=k==="xc"||k==="yc",{offset:M,offsetType:T}=cm({channel:t,markDef:i,encoding:r,model:n,bandPosition:R?.5:0}),N=XO({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:a,offset:M,defaultRef:bD({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:R?T==="encoding"?0:.5:Ve(w)?{signal:`(1-${w})/2`}:wd(w)?(1-w.band)/2:0});if(c)return{[k]:N,...x};{const U=bc(d),X=x[c],B=M?{...X,offset:M}:X;return{[k]:N,[U]:de(N)?[N[0],{...N[1],offset:B}]:{...N,offset:B}}}}function X6(e,t,n,i,r,o,a){if(NJ(e))return 0;const s=e==="x"||e==="y2",l=s?-t/2:t/2;if(Ve(n)||Ve(r)||Ve(i)||o){const u=Ta(n),c=Ta(r),d=Ta(i),h=Ta(o),g=o?`(${a} < ${h} ? ${s?"":"-"}0.5 * (${h} - (${a})) : ${l})`:l,y=d?`${d} + `:"",x=u?`(${u} ? -1 : 1) * `:"",b=c?`(${c} + ${g})`:g;return{signal:y+x+b}}else return r=r||0,i+(n?-r-l:+r+l)}function wOe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var H;const{config:r,markDef:o,encoding:a}=i,s=i.getScaleComponent(n),l=i.scaleName(n),u=s?s.get("type"):void 0,c=s.get("reverse"),d=DQ({channel:n,fieldDef:e,markDef:o,config:r,scaleType:u}),h=(H=i.component.axes[n])==null?void 0:H[0],m=(h==null?void 0:h.get("translate"))??.5,g=zn(n)?Kt("binSpacing",o,r)??0:0,y=Ws(n),x=bc(n),b=bc(y),w=Ul("minBandSize",o,r),{offset:S}=cm({channel:n,markDef:o,encoding:a,model:i,bandPosition:0}),{offset:k}=cm({channel:y,markDef:o,encoding:a,model:i,bandPosition:0}),R=ZNe({fieldDef:e,scaleName:l}),M=X6(n,g,c,m,S,w,R),T=X6(y,g,c,m,k??S,w,R),N=Ve(d)?{signal:`(1-${d.signal})/2`}:wd(d)?(1-d.band)/2:.5,z=wc({fieldDef:e,fieldDef2:t,markDef:o,config:r});if(cn(e.bin)||e.timeUnit){const U=e.timeUnit&&z!==.5;return{[b]:K6({fieldDef:e,scaleName:l,bandPosition:N,offset:T,useRectOffsetField:U}),[x]:K6({fieldDef:e,scaleName:l,bandPosition:Ve(N)?{signal:`1-${N.signal}`}:1-N,offset:M,useRectOffsetField:U})}}else if(Ci(e.bin)){const U=Vf(e,l,{},{offset:T});if(ve(t))return{[b]:U,[x]:Vf(t,l,{},{offset:M})};if(Wd(e.bin)&&e.bin.step)return{[b]:U,[x]:{signal:`scale("${l}", ${Ae(e,{expr:"datum"})} + ${e.bin.step})`,offset:M}}}xe(oQ(y))}function K6({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Iw({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:xC,endSuffix:_C}:{}})}const SOe=new Set(["aria","width","height"]);function oa(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?jee(e):{};return{...COe(e.markDef,t),...J6(e,"fill",n),...J6(e,"stroke",i),...ci("opacity",e),...ci("fillOpacity",e),...ci("strokeOpacity",e),...ci("strokeWidth",e),...ci("strokeDash",e),...pOe(e),...Dee(e),..._D(e,"href"),...fOe(e)}}function J6(e,t,n){const{config:i,mark:r,markDef:o}=e;if(Kt("invalid",o,i)==="hide"&&n&&!Vc(r)){const s=EOe(e,{invalid:!0,channels:eC});if(s)return{[t]:[{test:s,value:null},...$e(n)]}}return n?{[t]:n}:{}}function COe(e,t){return HFe.reduce((n,i)=>(!SOe.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=mn(e[i])),n),{})}function EOe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const l=s.get("type"),u=e.vgField(a,{expr:"datum"});u&&So(l)&&(o[u]=!0)}return o},{}),r=me(i);if(r.length>0){const o=t?"||":"&&";return r.map(a=>KO(a,t)).join(` ${o} `)}}function wD(e){const{config:t,markDef:n}=e;if(Kt("invalid",n,t)){const r=kOe(e,{channels:Gs});if(r)return{defined:{signal:r}}}return{}}function kOe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,a)=>{var l;const s=e.getScaleComponent(a);if(s){const u=s.get("type"),c=e.vgField(a,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&So(u)&&(o[c]=!0)}return o},{}),r=me(i);if(r.length>0){const o=t?"||":"&&";return r.map(a=>KO(a,t)).join(` ${o} `)}}function Q6(e,t){if(t!==void 0)return{[e]:mn(t)}}const aR="voronoi",Hee={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(aR)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(Vc(o))return xe(YFe(o)),n;const a={name:e.getName(aR),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Dee(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?s=c:d.indexOf(aR)>=0&&(l=!0)}),l||n.splice(s+1,0,a),n}},Uee={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!dD(e.bind),parse:(e,t,n)=>Kee(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,a=t.init&&t.init[0],s=Hee.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{const c=wn(`${i}_${l.field}`);n.filter(h=>h.name===c).length||n.unshift({name:c,...a?{init:Cd(a[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${we(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.filter(u=>u.name===i+Ec)[0],a=i+o1,s=r.items.map(u=>wn(`${i}_${u.field}`)),l=s.map(u=>`${u} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},Ww="_toggle",Wee={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Ww,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ec,i=t.name+Ww;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Zf(e)}}, `)+`${i} ? ${n} : null`}},ROe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Ie(t.clear)?jc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Uee.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===wn(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const r of t.project.items){const o=n.findIndex(a=>a.name===r.signals.visual);if(i(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===r.signals.data);i(a,"null")}}else{let r=n.findIndex(o=>o.name===t.name+Ec);i(r,"null"),Wee.defined(t)&&(r=n.findIndex(o=>o.name===t.name+Ww),i(r,"false"))}return n}},Gee={defined:e=>{const t=e.resolve==="global"&&e.bind&&dD(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ba;return t&&!n&&xe(KFe),t&&n},parse:(e,t,n)=>{const i=ht(n);if(i.select=Ie(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},Kee(t,i),Oe(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of t.events)s.filter=$e(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}const r=nR(t.bind)?t.bind.legend:"click",o=Ie(r)?jc(r,"view"):$e(r);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=nR(t.bind)&&t.bind.legend,o=a=>s=>{const l=ht(s);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${wn(a.field)}_legend`,l=`${i}_${s}`;if(n.filter(c=>c.name===l).length===0){const c=r.merge.map(o(`${s}_symbols`)).concat(r.merge.map(o(`${s}_labels`))).concat(r.merge.map(o(`${s}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(h=>h.name===i+Ec),a=i+o1,s=r.items.filter(h=>h.hasLegend).map(h=>wn(`${i}_${wn(h.field)}_legend`)),u=`${s.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(h=>({signal:h})),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(h=>h.name===i+Ww),d=nR(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function TOe(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const o of Ai(e.component.selection??{})){const a=o.project.hasField[i]??o.project.hasChannel[t];if(a&&Gee.defined(o)){const s=n.get("selections")??[];s.push(o.name),n.set("selections",s,!1),a.hasLegend=!0}}}const qee="_translate_anchor",Vee="_translate_delta",AOe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Ml.defined(t),o=i+qee,{x:a,y:s}=t.project.hasChannel;let l=jc(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+_p,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${r?LM(e,Sn):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${r?LM(e,_i):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:i+Vee,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&eB(e,t,a,"width",n),s!==void 0&&eB(e,t,s,"height",n),n}};function eB(e,t,n,i,r){const o=t.name,a=o+qee,s=o+Vee,l=n.channel,u=Ml.defined(t),c=r.filter(R=>R.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(i).signal,h=e.getScaleComponent(l),m=h&&h.get("type"),g=h&&h.get("reverse"),y=u?l===Sn?g?"":"-":g?"-":"":"",x=`${a}.extent_${l}`,b=`${y}${s}.${l} / ${u?`${d}`:`span(${x})`}`,w=!u||!h?"panLinear":m==="log"?"panLog":m==="symlog"?"panSymlog":m==="pow"?"panPow":"panLinear",S=u?m==="pow"?`, ${h.get("exponent")??1}`:m==="symlog"?`, ${h.get("constant")??1}`:"":"",k=`${w}(${x}, ${b}${S})`;c.on.push({events:{signal:s},update:u?k:`clampRange(${k}, 0, ${d})`})}const Yee="_zoom_anchor",Zee="_zoom_delta",MOe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Ml.defined(t),o=i+Zee,{x:a,y:s}=t.project.hasChannel,l=we(e.scaleName(Sn)),u=we(e.scaleName(_i));let c=jc(t.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+_p,d))),n.push({name:i+Yee,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&tB(e,t,a,"width",n),s!==void 0&&tB(e,t,s,"height",n),n}};function tB(e,t,n,i,r){const o=t.name,a=n.channel,s=Ml.defined(t),l=r.filter(w=>w.name===n.signals[s?"data":"visual"])[0],u=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(a),d=c&&c.get("type"),h=s?LM(e,a):l.name,m=o+Zee,g=`${o}${Yee}.${a}`,y=!s||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",x=s?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${y}(${h}, ${g}, ${m}${x})`;l.on.push({events:{signal:m},update:s?b:`clampRange(${b}, 0, ${u})`})}const Ed="_store",Ec="_tuple",FOe="_modify",Xee="vlSelectionResolve",wC=[cOe,lOe,aOe,Wee,Uee,Ml,Gee,ROe,AOe,MOe,Hee];function POe(e){let t=e.parent;for(;t&&!Ia(t);)t=t.parent;return t}function Zf(e,{escape:t}={escape:!0}){let n=t?we(e.name):e.name;const i=POe(e);if(i){const{facet:r}=i;for(const o of Ho)r[o]&&(n+=` + '__facet_${o}_' + (facet[${we(i.vgField(o))}])`)}return n}function SD(e){return Ai(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Kee(e,t){(Ie(t.select)||!t.select.on)&&delete e.events,(Ie(t.select)||!t.select.clear)&&delete e.clear,(Ie(t.select)||!t.select.toggle)&&delete e.toggle}function jM(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...jM(e.object)),t.push(...jM(e.property))),t)}function Jee(e){return e.object.type==="MemberExpression"?Jee(e.object):e.object.name==="datum"}function Qee(e){const t=HI(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&Jee(i)&&n.add(jM(i).slice(1).join("."))}),n}class Bm extends tn{clone(){return new Bm(null,this.model,ht(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Gw(this.model,this.filter,this),this._dependentFields=Qee(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function NOe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const o=wn(r.name),a=r.select,s=Ie(a)?a:a.type,l=Oe(a)?ht(a):{type:s},u=i[s];for(const h in u)h==="fields"||h==="encodings"||(h==="mark"&&(l[h]={...u[h],...l[h]}),(l[h]===void 0||l[h]===!0)&&(l[h]=ht(u[h]??l[h])));const c=n[o]={...l,name:o,type:s,init:r.value,bind:r.bind,events:Ie(l.on)?jc(l.on,"scope"):$e(ht(l.on))},d=ht(r);for(const h of wC)h.defined(c)&&h.parse&&h.parse(e,c,d)}return n}function ete(e,t,n,i="datum"){const r=Ie(t)?t:t.param,o=wn(r),a=we(o+Ed);let s;try{s=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(s.project.timeUnit){const h=n??e.component.data.raw,m=s.project.timeUnit.clone();h.parent?m.insertAsParentOf(h):h.parent=m}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=s.resolve==="global"?")":`, ${we(s.resolve)})`,c=`${l}${a}, ${i}${u}`,d=`length(data(${a}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function tte(e,t,n){const i=wn(t),r=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!o)o=a.project.items[0].field,a.project.items.length>1&&xe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${we(o)}.`);else if(r&&!o){const s=a.project.items.filter(l=>l.channel===r);!s.length||s.length>1?(o=a.project.items[0].field,xe((s.length?"Multiple ":"No ")+`matching ${we(r)} encoding found for selection ${we(n.param)}. Using "field": ${we(o)}.`)):o=s[0].field}return`${a.name}[${we(ta(o))}]`}function $Oe(e,t){for(const[n,i]of _c(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new yr(new Bm(t,e,{param:n}),r,ln.Lookup,e.component.data.outputNodeRefCounts)}}function Gw(e,t,n){return ty(t,i=>Ie(i)?i:fNe(i)?ete(e,i,n):yQ(i))}function IOe(e,t){if(e)return de(e)&&!Cu(e)?e.map(n=>iD(n,t)).join(", "):e}function sR(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function T0(e,t,n,i={header:!1}){var d,h;const{disable:r,orient:o,scale:a,labelExpr:s,title:l,zindex:u,...c}=e.combine();if(!r){for(const m in c){const g=p$e[m],y=c[m];if(g&&g!==t&&g!=="both")delete c[m];else if(r1(y)){const{condition:x,...b}=y,w=$e(x),S=A6[m];if(S){const{vgProp:k,part:R}=S,M=[...w.map(T=>{const{test:N,...z}=T;return{test:Gw(null,N),...z}}),b];sR(c,R,k,M),delete c[m]}else if(S===null){const k={signal:w.map(R=>{const{test:M,...T}=R;return`${Gw(null,M)} ? ${h6(T)} : `}).join("")+h6(b)};c[m]=k}}else if(Ve(y)){const x=A6[m];if(x){const{vgProp:b,part:w}=x;sR(c,w,b,y),delete c[m]}}Ft(["labelAlign","labelBaseline"],m)&&c[m]===null&&delete c[m]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:m}=c.encode;c.encode={...m?{grid:m}:{}},rn(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:jn(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(s!==void 0){let g=s;(h=(d=c.encode)==null?void 0:d.labels)!=null&&h.update&&Ve(c.encode.labels.update.text)&&(g=vd(s,"datum.label",c.encode.labels.update.text.signal)),sR(c,"labels","text",{signal:g})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const g of VQ)e.hasAxisPart(g)||delete c.encode[g];rn(c.encode)&&delete c.encode}const m=IOe(l,n);return{scale:a,orient:o,grid:!1,...m?{title:m}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:jn(u,0)}}}}function nte(e){const{axes:t}=e.component,n=[];for(const i of Gs)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o=i==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function OOe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>T0(r,"grid",t)),...i.map(r=>T0(r,"grid",t)),...n.map(r=>T0(r,"main",t)),...i.map(r=>T0(r,"main",t))].filter(r=>r)}function nB(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...me(a),...me(s)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${Ta(a[c])} : ${Ta(s[c])}`};return u}return t[r]})])}function DOe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:bQ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=Ve(n)?"axisOrient":`axis${Yv(n)}`,s=[...r,...r.map(u=>o+u.substr(4))],l=["axis",a,o];return{vlOnlyAxisConfig:nB(s,i,e,n),vgAxisConfig:nB(l,i,e,n),axisConfigStyle:LOe([...l,...s],i)}}function LOe(e,t){var i;const n=[{}];for(const r of e){let o=(i=t[r])==null?void 0:i.style;if(o){o=$e(o);for(const a of o)n.push(t.style[a])}}return Object.assign.apply(null,n)}function zM(e,t,n,i={}){var o;const r=ZJ(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=i[a])==null?void 0:o[e])!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const iB={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??jOe(n,e),gridScale:({model:e,channel:t})=>zOe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||rte(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||ite(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??HOe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??UOe(t.type,n,ve(t)&&!!t.timeUnit,ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??GOe({fieldOrDatumDef:i,scaleType:r,size:a,values:n.values})},tickMinStep:qOe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=ote(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return KJ(r?[R6(r)]:[],ve(a)?[R6(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>VOe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??YOe(n,t)};function jOe(e,t){return!vi(e)&&ve(t)&&!cn(t==null?void 0:t.bin)&&!Ci(t==null?void 0:t.bin)}function zOe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function BOe(e,t,n,i,r){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Ve(o)?o:iv(o);{const{configValue:a}=zM("labelAngle",i,t==null?void 0:t.style,r);return a!==void 0?iv(a):n===Sn&&Ft([qO,GO],e.type)&&!(ve(e)&&e.timeUnit)?270:void 0}}function BM(e){return`(((${e.signal} % 360) + 360) % 360)`}function ite(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ve(e)){const r=BM(e),o=Ve(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ve(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ve(e)){const r=BM(e),o=Ve(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ve(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function rte(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,o=i?"bottom":"left";if(Ve(e)){const a=BM(e),s=Ve(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${r?`(${a} + 90)`:a} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${a} && ${a} < ${180+r}) === ${s} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ve(t)){const a=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===o)?"left":"right"}function HOe(e,t){if(t==="x"&&Ft(["quantitative","temporal"],e))return!0}function UOe(e,t,n,i){if(n&&!Oe(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function WOe(e){return e==="x"?"bottom":"left"}function GOe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!vi(t)&&t!=="log"){if(ve(e)){if(cn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ft(["month","hours","day","quarter"],(r=yi(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function qOe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ve(t)){const{timeUnit:n}=t;if(n){const i=pQ(n);if(i)return{signal:i}}}}function ote(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,a=r?r.title:void 0;if(o&&a)return JJ(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function VOe(e,t){const n=e.values;if(de(n))return qQ(t,n);if(Ve(n))return n}function YOe(e,t){return e==="rect"&&Dw(t)?1:0}class fm extends tn{clone(){return new fm(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Qee(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Vd(i)&&OQ(i.sort)){const{field:o,timeUnit:a}=i,s=i.sort,l=s.map((u,c)=>`${yQ({field:o,timeUnit:a,equal:u})} ? ${c} : `).join("")+s.length;t=new fm(t,{calculate:l,as:dm(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mt(this.transform)}`}}function dm(e,t,n){return Ae(e,{prefix:t,suffix:"sort_index",...n??{}})}function SC(e,t){return Ft(["top","bottom"],t)?"column":Ft(["left","right"],t)||e==="row"?"row":"column"}function hm(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return jn((t||{})[e],r[e],n.header[e])}function CC(e,t,n,i){const r={};for(const o of e){const a=hm(o,t||{},n,i);a!==void 0&&(r[o]=a)}return r}const CD=["row","column"],ED=["header","footer"];function ZOe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=CC(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=SC(t,s),u=iv(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...ste(u,l),...ate(l,u,o),...lte(i,r,t,O$e,cee)}}}function ate(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=rte(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function ste(e,t){const n=ite(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function XOe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of ED)if(n[r])for(const o of n[r]){const a=JOe(e,t,r,n,o);a!=null&&i.push(a)}return i}function KOe(e,t){const{sort:n}=e;return Ss(n)?{field:Ae(n,{expr:"datum"}),order:n.order??"ascending"}:de(n)?{field:dm(e,t,{expr:"datum"}),order:"ascending"}:{field:Ae(e,{expr:"datum"}),order:n??"ascending"}}function HM(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=CC(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=QO({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=SC(t,s);return{text:{signal:l?vd(vd(l,"datum.label",u),"datum.value",Ae(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...ste(o,c),...ate(c,o,a),...lte(n,e,t,D$e,fee)}}function JOe(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:a}=i,s=e.config?e.config:void 0;if(a&&r.labels){const{labelOrient:d}=CC(["labelOrient"],a.header,s,t);(t==="row"&&!Ft(["top","bottom"],d)||t==="column"&&!Ft(["left","right"],d))&&(o=HM(a,t,s))}const l=Ia(e)&&!t1(e.facet),u=r.axes,c=(u==null?void 0:u.length)>0;if(o||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:KOe(a,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const QOe={column:{start:0,end:1},row:{start:1,end:0}};function eDe(e,t){return QOe[t][e]}function tDe(e,t){const n={};for(const i of Ho){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:o,titleOrient:a}=CC(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),s=SC(i,a),l=eDe(o,s);l!==void 0&&(n[s]=l)}}return rn(n)?void 0:n}function lte(e,t,n,i,r){const o={};for(const a of i){if(!r[a])continue;const s=hm(a,t==null?void 0:t.header,e,n);s!==void 0&&(o[r[a]]=s)}return o}function kD(e){return[...zx(e,"width"),...zx(e,"height"),...zx(e,"childWidth"),...zx(e,"childHeight")]}function zx(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(vi(a)&&qc(s)){const l=e.scaleName(n);return Ia(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[rB(l,s)]:[rB(l,s),{name:r,update:ute(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const o=r.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=$M(e.config.view,o?"width":"height"),l=`isFinite(${a}) ? ${a} : ${s}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function rB(e,t){const n=`${e}_step`;return Ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function ute(e,t,n){const i=t.get("type"),r=t.get("padding"),o=jn(t.get("paddingOuter"),r);let a=t.get("paddingInner");return a=i==="band"?a!==void 0?a:r:1,`bandspace(${n}, ${Ta(a)}, ${Ta(o)}) * ${e}_step`}function cte(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function fte(e,t){return me(e).reduce((n,i)=>{const r=e[i];return{...n,...zm(t,r,i,o=>mn(o.value))}},{})}function dte(e,t){if(Ia(t))return e==="theta"?"independent":"shared";if(Wm(t))return"shared";if(ND(t))return zn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function RD(e,t){const n=e.scale[t],i=zn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&xe(NPe(t)),"independent"):e[i][t]||"shared"}const nDe={...z$e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},hte=me(nDe);class iDe extends eu{}const oB={symbols:rDe,gradient:oDe,labels:aDe,entries:sDe};function rDe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){if(o!=="symbol")return;const{markDef:a,encoding:s,config:l,mark:u}=n,c=a.filled&&u!=="trail";let d={...GFe({},n,ONe),...jee(n,{filled:c})};const h=r.get("symbolOpacity")??l.legend.symbolOpacity,m=r.get("symbolFillColor")??l.legend.symbolFillColor,g=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,y=h===void 0?pte(s.opacity)??a.opacity:void 0;if(d.fill){if(i==="fill"||c&&i===Kr)delete d.fill;else if(d.fill.field)m?delete d.fill:(d.fill=mn(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=mn(y??1));else if(de(d.fill)){const x=UM(s.fill??s.color)??a.fill??(c&&a.color);x&&(d.fill=mn(x))}}if(d.stroke){if(i==="stroke"||!c&&i===Kr)delete d.stroke;else if(d.stroke.field||g)delete d.stroke;else if(de(d.stroke)){const x=jn(UM(s.stroke||s.color),a.stroke,c?a.color:void 0);x&&(d.stroke={value:x})}}if(i!==Kl){const x=ve(t)&&gte(n,r,t);x?d.opacity=[{test:x,...mn(y??1)},mn(l.legend.unselectedOpacity)]:y&&(d.opacity=mn(y))}return d={...d,...e},rn(d)?void 0:d}function oDe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:o,encoding:a}=t;let s={};const u=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?pte(a.opacity)||o.opacity:void 0;return u&&(s.opacity=mn(u)),s={...s,...e},rn(s)?void 0:s}function aDe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},a=n.config,s=ve(t)?gte(n,r,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;Sd(c)?d=Ma({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):u===void 0&&c===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?d=Ma({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&ve(t)&&t.timeUnit===void 0&&(d=Ma({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const h={...l?{opacity:l}:{},...d?{text:d}:{},...e};return rn(h)?void 0:h}function sDe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function pte(e){return mte(e,(t,n)=>Math.max(t,n.value))}function UM(e){return mte(e,(t,n)=>jn(t,n.value))}function mte(e,t){if(n$e(e))return $e(e.condition).reduce(t,e.value);if(za(e))return e.value}function gte(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=we(n.field);return i.map(o=>`(!length(data(${we(wn(o)+Ed)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const aB={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return PQ(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return NQ(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??pDe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??mDe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??uDe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>xp(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(vp(n)&&Aa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>lDe(t,e)};function lDe(e,t){const n=e.values;if(de(n))return qQ(t,n);if(Ve(n))return n}function uDe(e,t,n,i){if(t!=="shape"){const r=UM(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function cDe(e){const{legend:t}=e;return jn(t.type,fDe(e))}function fDe({channel:e,timeUnit:t,scaleType:n}){if(vp(e)){if(Ft(["quarter","month","day"],t))return"symbol";if(Aa(n))return"gradient"}return"symbol"}function dDe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??hDe(n,t)}function hDe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function pDe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(Aa(r))return n==="horizontal"?i==="top"||i==="bottom"?sB(t,"width",a,o):a:sB(t,"height",l,s)}function sB(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function mDe(e){if(Ft(["quantile","threshold","log","symlog"],e))return"greedy"}function yte(e){const t=Nn(e)?gDe(e):_De(e);return e.component.legends=t,t}function gDe(e){const{encoding:t}=e,n={};for(const i of[Kr,...hee]){const r=ei(t[i]);!r||!e.getScaleComponent(i)||i===Jr&&ve(r)&&r.type===jm||(n[i]=xDe(e,i))}return n}function yDe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function vDe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function xDe(e,t){var k;let n=e.legend(t);const{markDef:i,encoding:r,config:o}=e,a=o.legend,s=new iDe({},yDe(e,t));TOe(e,t,s);const l=n!==void 0?!n:a.disable;if(s.set("disable",l,n!==void 0),l)return s;n=n||{};const u=e.getScaleComponent(t).get("type"),c=ei(r[t]),d=ve(c)?(k=yi(c.timeUnit))==null?void 0:k.unit:void 0,h=n.orient||o.legend.orient||"right",m=cDe({legend:n,channel:t,timeUnit:d,scaleType:u}),g=dDe({legend:n,legendType:m,orient:h,legendConfig:a}),y={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:u,orient:h,legendType:m,direction:g};for(const R of hte){if(m==="gradient"&&R.startsWith("symbol")||m==="symbol"&&R.startsWith("gradient"))continue;const M=R in aB?aB[R](y):n[R];if(M!==void 0){const T=vDe(M,R,n,e.fieldDef(t));(T||o.legend[R]===void 0)&&s.set(R,M,T)}}const x=(n==null?void 0:n.encoding)??{},b=s.get("selections"),w={},S={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:m};for(const R of["labels","legend","title","symbols","gradient","entries"]){const M=fte(x[R]??{},e),T=R in oB?oB[R](M,S):M;T!==void 0&&!rn(T)&&(w[R]={...b!=null&&b.length&&ve(c)?{name:`${wn(c.field)}_legend_${R}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:T})}return rn(w)||s.set("encode",w,!!(n!=null&&n.encoding)),s}function _De(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){yte(i);for(const r of me(i.component.legends))n.legend[r]=RD(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=vte(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of me(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function vte(e,t){var o,a,s,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const u of hte){const c=Sc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,h)=>{switch(u){case"symbolType":return bDe(d,h);case"title":return QJ(d,h);case"type":return r=!0,io("symbol")}return vC(d,h,u,"legend")});e.setWithExplicit(u,c)}return r&&((a=(o=e.implicit)==null?void 0:o.encode)!=null&&a.gradient&&Fw(e.implicit,["encode","gradient"]),(l=(s=e.explicit)==null?void 0:s.encode)!=null&&l.gradient&&Fw(e.explicit,["encode","gradient"])),e}function bDe(e,t){return t.value==="circle"?t:e}function wDe(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function xte(e){const t=e.component.legends,n={};for(const r of me(t)){const o=e.getScaleComponent(r),a=on(o.get("domains"));if(n[a])for(const s of n[a])vte(s,t[r])||n[a].push(t[r]);else n[a]=[t[r].clone()]}return Ai(n).flat().map(r=>SDe(r,e.config)).filter(r=>r!==void 0)}function SDe(e,t){var a,s,l;const{disable:n,labelExpr:i,selections:r,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(a=o.encode)!=null&&a.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of hee)o[c]&&delete u[c]}if(o.title||delete o.title,i!==void 0){let u=i;(l=(s=o.encode)==null?void 0:s.labels)!=null&&l.update&&Ve(o.encode.labels.update.text)&&(u=vd(i,"datum.label",o.encode.labels.update.text.signal)),wDe(o,"labels","text",{signal:u})}return o}}function CDe(e){return Wm(e)||ND(e)?EDe(e):_te(e)}function EDe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),_te(e))}function _te(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const l=Ve(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ft(a,l)||a.push(l),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const kDe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class bte extends eu{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function wte(e){e.component.projection=Nn(e)?RDe(e):MDe(e)}function RDe(e){if(e.hasProjection){const t=Dr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?TDe(e):void 0,o=new bte(e.projectionName(!0),{...Dr(e.config.projection)??{},...t??{}},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}function TDe(e){const t=[],{encoding:n}=e;for(const i of[[Ya,Va],[na,Za]])(ei(n[i[0]])||ei(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Jr)&&e.typedFieldDef(Jr).type===jm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ln.Main)),t}function ADe(e,t){const n=xO(kDe,r=>!!(!tt(e.explicit,r)&&!tt(t.explicit,r)||tt(e.explicit,r)&&tt(t.explicit,r)&&ho(e.get(r),t.get(r))));if(ho(e.size,t.size)){if(n)return e;if(ho(e.explicit,{}))return t;if(ho(t.explicit,{}))return e}return null}function MDe(e){if(e.children.length===0)return;let t;for(const i of e.children)wte(i);const n=xO(e.children,i=>{const r=i.component.projection;if(r)if(t){const o=ADe(t,r);return o&&(t=o),!!o}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new bte(i,t.specifiedProjection,t.size,ht(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),i),a.merged=!0)}return r}}function FDe(e,t,n,i){if(i1(t,n)){const r=Nn(e)?e.axis(n)??e.legend(n)??{}:{},o=Ae(t,{expr:"datum"}),a=Ae(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ae(t,{binSuffix:"range",forAs:!0}),formula:e1(o,a,r.format,r.formatType,i)}}return{}}function Ste(e,t){return`${GJ(e)}_${t}`}function PDe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function TD(e,t,n){const i=dC(n,void 0)??{},r=Ste(i,t);return e.getName(`${r}_bins`)}function NDe(e){return"as"in e}function lB(e,t,n){let i,r;NDe(e)?i=Ie(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[Ae(e,{forAs:!0}),Ae(e,{binSuffix:"end",forAs:!0})];const o={...dC(t,void 0)},a=Ste(o,e.field),{signal:s,extentSignal:l}=PDe(n,a);if(tC(o.extent)){const c=o.extent;r=tte(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[i],...s?{signal:s}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:a,binComponent:u}}class Es extends tn{clone(){return new Es(null,ht(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,a)=>{if(_r(o)&&cn(o.bin)){const{key:s,binComponent:l}=lB(o,o.bin,n);r[s]={...l,...r[s],...FDe(n,o,a,n.config)}}return r},{});return rn(i)?null:new Es(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=lB(n,n.bin,i);return new Es(t,{[r]:o})}merge(t,n){for(const i of me(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=ms([...this.bins[i].as,...t.bins[i].as],Mt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Ai(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ai(this.bins).map(t=>t.field))}hash(){return`Bin ${Mt(this.bins)}`}assemble(){return Ai(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:o,...a}=t.bin,s={type:"bin",field:ta(t.field),as:i,signal:t.signal,...tC(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!o&&t.extentSignal&&(n.push({type:"extent",field:ta(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(const l of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ae({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function $De(e,t,n,i){var o;const r=Nn(i)?i.encoding[Ws(t)]:void 0;if(_r(n)&&Nn(i)&&LQ(n,r,i.markDef,i.config)){e.add(Ae(n,{})),e.add(Ae(n,{suffix:"end"}));const{mark:a,markDef:s,config:l}=i,u=wc({fieldDef:n,markDef:s,config:l});rv(a)&&u!==.5&&zn(t)&&(e.add(Ae(n,{suffix:xC})),e.add(Ae(n,{suffix:_C}))),n.bin&&i1(n,t)&&e.add(Ae(n,{binSuffix:"range"}))}else if(IJ(t)){const a=$J(t);e.add(i.getName(a))}else e.add(Ae(n));return Vd(n)&&CNe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function IDe(e,t){for(const n of me(t)){const i=t[n];for(const r of me(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class $a extends tn{clone(){return new $a(null,new Set(this.dimensions),ht(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const r={},o=new Set;return!i||(n.forEachFieldDef((a,s)=>{const{aggregate:l,field:u}=a;if(l)if(l==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([Ae(a,{forAs:!0})]);else{if(Hl(l)||Gc(l)){const c=Hl(l)?"argmin":"argmax",d=l[c];r[d]??(r[d]={}),r[d][c]=new Set([Ae({op:c,field:d},{forAs:!0})])}else r[u]??(r[u]={}),r[u][l]=new Set([Ae(a,{forAs:!0})]);Jl(s)&&n.scaleDomain(s)==="unaggregated"&&(r[u]??(r[u]={}),r[u].min=new Set([Ae({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([Ae({field:u,aggregate:"max"},{forAs:!0})]))}else $De(o,s,a,n)}),o.size+me(r).length===0)?null:new $a(t,o,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const o of n.aggregate){const{op:a,field:s,as:l}=o;a&&(a==="count"?(r["*"]??(r["*"]={}),r["*"].count=new Set([l||Ae(o,{forAs:!0})])):(r[s]??(r[s]={}),r[s][a]=new Set([l||Ae(o,{forAs:!0})])))}for(const o of n.groupby??[])i.add(o);return i.size+me(r).length===0?null:new $a(t,i,r)}merge(t){return kJ(this.dimensions,t.dimensions)?(IDe(this.measures,t.measures),!0):(ZPe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...me(this.measures)])}producedFields(){const t=new Set;for(const n of me(this.measures))for(const i of me(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Mt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of me(this.measures))for(const a of me(this.measures[o]))for(const s of this.measures[o][a])i.push(s),t.push(a),n.push(o==="*"?null:ta(o));return{type:"aggregate",groupby:[...this.dimensions].map(ta),ops:t,fields:n,as:i}}}class Hm extends tn{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of Ho){const a=n.facet[o];if(a){const{bin:s,sort:l}=a;this[o]={name:n.getName(`${o}_domain`),fields:[Ae(a),...cn(s)?[Ae(a,{binSuffix:"end"})]:[]],...Ss(l)?{sortField:l}:de(l)?{sortIndexField:dm(a,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ho)this[n]&&(t+=` ${n.charAt(0)}:${Mt(this[n])}`);return t}get fields(){var n;const t=[];for(const i of Ho)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ho)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Gs){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(vi(r)&&qc(o)){const a=EC(this.childModel,n),s=PD(a);s?t[n]=s:xe(NO(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),a.push("max")):(o.push(i[r]),a.push("distinct")),s.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=lC,field:d}=l;o.push(d),a.push(c),s.push(Ae(l,{forAs:!0}))}else u&&(o.push(u),a.push("max"),s.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:a,as:s}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const u of CD){for(const c of ED){const d=(i[u]&&i[u][c])??[];for(const h of d)if(((l=h.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:a,column:s}=o;return(a||s)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:a}=this;if(r&&o&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const s=[].concat(i.x??[],i.y??[]),l=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(const s of[Al,Tl])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,i));if(a){const s=this.assembleFacetHeaderData(i);s&&t.push(...s)}return t}}function uB(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ODe(e,t){const n=wO(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=uB(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=uB(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return xe(rPe(t)),null}function DDe(e){const t={};return $_(e.filter,n=>{if(gQ(n)){let i=null;DO(n)?i=lo(n.equal):jO(n)?i=lo(n.lte):LO(n)?i=lo(n.lt):zO(n)?i=lo(n.gt):BO(n)?i=lo(n.gte):HO(n)?i=n.range[0]:UO(n)&&(i=(n.oneOf??n.in)[0]),i&&(Gd(i)?t[n.field]="date":zt(i)?t[n.field]="number":Ie(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function LDe(e){const t={};function n(i){lm(i)?t[i.field]="date":i.type==="quantitative"&&OFe(i.aggregate)?t[i.field]="number":tm(i.field)>1?i.field in t||(t[i.field]="flatten"):Vd(i)&&Ss(i.sort)&&tm(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Nn(e)||Ia(e))&&e.forEachFieldDef((i,r)=>{if(_r(i))n(i);else{const o=Ud(r),a=e.fieldDef(o);n({...i,type:a.type})}}),Nn(e)){const{mark:i,markDef:r,encoding:o}=e;if(Vc(i)&&!e.encoding.order){const a=r.orient==="horizontal"?"y":"x",s=o[a];ve(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function jDe(e){const t={};if(Nn(e)&&e.component.selection)for(const n of me(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&tm(r.field)>1&&(t[r.field]="flatten")}return t}class Vi extends tn{clone(){return new Vi(null,ht(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Mt(this._parse)}`}static makeExplicit(t,n,i){var a;let r={};const o=n.data;return!ic(o)&&((a=o==null?void 0:o.format)!=null&&a.parse)&&(r=o.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const s of me(i)){const l=r.getWithExplicit(s);l.value!==void 0&&(l.explicit||l.value===i[s]||l.value==="derived"||i[s]==="flatten"?delete i[s]:xe(x6(s,i[s],l.value)))}for(const s of me(n)){const l=r.get(s);l!==void 0&&(l===n[s]?delete n[s]:xe(x6(s,n[s],l)))}const o=new eu(n,i);r.copyAll(o);const a={};for(const s of me(o.combine())){const l=o.get(s);l!==null&&(a[s]=l)}return me(a).length===0||r.parseNothing?null:new Vi(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of me(this._parse)){const i=this._parse[n];tm(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(me(this._parse))}dependentFields(){return new Set(me(this._parse))}assembleTransforms(t=!1){return me(this._parse).filter(n=>t?tm(n)>1:!0).map(n=>{const i=ODe(n,this._parse[n]);return i?{type:"formula",expr:i,as:SO(n)}:null}).filter(n=>n!==null)}}class kc extends tn{clone(){return new kc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ba])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ba}}}class a1 extends tn{clone(){return new a1(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class s1 extends tn{clone(){return new s1(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Mt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kd extends tn{constructor(t){super(null),t??(t={name:"source"});let n;if(ic(t)||(n=t.format?{...qr(t.format,["parse"])}:{}),ov(t))this._data={values:t.values};else if(um(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ft(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else Fee(t)?this._data={values:[{type:"Sphere"}]}:(Aee(t)||ic(t))&&(this._data={});this._generator=ic(t),t.name&&(this._name=t.name),n&&!rn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var cB=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},zDe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},A0;function AD(e){return e instanceof kd||e instanceof a1||e instanceof s1}class MD{constructor(){A0.set(this,void 0),cB(this,A0,!1,"f")}setModified(){cB(this,A0,!0,"f")}get modifiedFlag(){return zDe(this,A0,"f")}}A0=new WeakMap;class Yd extends MD{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class FD extends MD{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class BDe extends FD{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of me(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class HDe extends FD{constructor(t){super(),this.requiresSelectionId=t&&SD(t)}run(t){t instanceof kc&&(this.requiresSelectionId&&(AD(t.parent)||t.parent instanceof $a||t.parent instanceof Vi)||(this.setModified(),t.remove()))}}class UDe extends MD{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Cs&&(i=t.producedFields(),_O(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class WDe extends FD{constructor(){super()}run(t){t instanceof yr&&!t.isRequired()&&(this.setModified(),t.remove())}}class GDe extends Yd{run(t){if(!AD(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Vi)if(t instanceof Vi)this.setModified(),t.merge(n);else{if(bO(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class qDe extends Yd{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Vi);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const a of i){const s=a.parse;for(const l of me(s))l in r?r[l]!==s[l]&&o.add(l):r[l]=s[l]}for(const a of o)delete r[a];if(!rn(r)){this.setModified();const a=new Vi(t,r);for(const s of n){if(s instanceof Vi)for(const l of me(r))delete s.parse[l];t.removeChild(s),s.parent=a,s instanceof Vi&&me(s.parse).length===0&&s.remove()}}}}}class VDe extends Yd{run(t){t instanceof yr||t.numChildren()>0||t instanceof Hm||t instanceof kd||(this.setModified(),t.remove())}}class YDe extends Yd{run(t){const n=t.children.filter(r=>r instanceof Cs),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class ZDe extends Yd{run(t){const n=t.children.filter(r=>r instanceof $a),i={};for(const r of n){const o=Mt(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of me(i)){const o=i[r];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class XDe extends Yd{constructor(t){super(),this.model=t}run(t){const n=!(AD(t)||t instanceof Bm||t instanceof Vi||t instanceof kc),i=[],r=[];for(const o of t.children)o instanceof Es&&(n&&!bO(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Es?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class KDe extends Yd{run(t){const n=[...t.children];if(!yd(n,a=>a instanceof yr)||t.numChildren()<=1)return;const r=[];let o;for(const a of n)if(a instanceof yr){let s=a;for(;s.numChildren()===1;){const[l]=s.children;if(l instanceof yr)s=l;else break}r.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else r.push(a);if(r.length){this.setModified();for(const a of r)a.parent.removeChild(a),a.parent=o}}}class Zd extends tn{clone(){return new Zd(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ms(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ae(t)}hash(){return`JoinAggregateTransform ${Mt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}function JDe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=Ae(i);return r&&t.push(r),t},[])}function QDe(e){return de(e)&&e.every(t=>Ie(t))&&e.length>1}class Fl extends tn{clone(){return new Fl(null,ht(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:a="zero"}=n,s=[],l=[];if(n.sort!==void 0)for(const d of n.sort)s.push(d.field),l.push(jn(d.order,"ascending"));const u={field:s,order:l};let c;return QDe(o)?c=o:Ie(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Fl(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:l}=i,u=o.map(m=>{const g=r[m];return Ns(g)}).filter(m=>!!m),c=JDe(n),d=n.encoding.order;let h;if(de(d)||ve(d))h=XJ(d);else{const m=jQ(d)?d.sort:a==="y"?"descending":"ascending";h=c.reduce((g,y)=>(g.field.push(y),g.order.push(m),g),{field:[],order:[]})}return new Fl(t,{dimensionFieldDefs:u,stackField:n.vgField(a),facetby:[],stackby:c,sort:h,offset:s,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[Ae(r,{binSuffix:"mid"})]:[Ae(r,{}),Ae(r,{binSuffix:"end"})]:[Ae(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:a,offset:s,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:h}=c;if(h){const m=Ae(c,{expr:"datum"}),g=Ae(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${d}*${m}+${1-d}*${g}`,as:Ae(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:Ae(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:a,as:u,offset:s}),t}}class Um extends tn{clone(){return new Um(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ms(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ae(t)}hash(){return`WindowTransform ${Mt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(d=>FO(d)))return{type:"joinaggregate",as:i,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const s=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)s.push(d.field),l.push(d.order??"ascending");const u={field:s,order:l},c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...a!==void 0?{groupby:a}:{},...o!==void 0?{frame:o}:{}}}}function eLe(e){function t(n){if(!(n instanceof Hm)){const i=n.clone();if(i instanceof yr){const r=GM+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof $a||i instanceof Fl||i instanceof Um||i instanceof Zd)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function WM(e){if(e instanceof Hm)if(e.numChildren()===1&&!(e.children[0]instanceof yr)){const t=e.children[0];(t instanceof $a||t instanceof Fl||t instanceof Um||t instanceof Zd)&&t.addDimensions(e.fields),t.swapWithParent(),WM(e)}else{const t=e.model.component.data.main;Cte(t);const n=eLe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(WM)}function Cte(e){if(e instanceof yr&&e.type===ln.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Hm||(t.swapWithParent(),Cte(e))}}const GM="scale_",Bx=5;function qM(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!qM(t.children))return!1}return!0}function fa(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function fB(e,t,n){let i=e.sources,r=!1;return r=fa(new WDe,i)||r,r=fa(new HDe(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=fa(new VDe,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=fa(new GDe,i)||r,r=fa(new XDe(t),i)||r,r=fa(new UDe,i)||r,r=fa(new qDe,i)||r,r=fa(new ZDe,i)||r,r=fa(new YDe,i)||r,r=fa(new BDe,i)||r,r=fa(new KDe,i)||r),e.sources=i,r}function tLe(e,t){qM(e.sources);let n=0,i=0;for(let r=0;r<Bx&&fB(e,t,!0);r++)n++;e.sources.map(WM);for(let r=0;r<Bx&&fB(e,t,!1);r++)i++;qM(e.sources),Math.max(n,i)===Bx&&xe(`Maximum optimization runs(${Bx}) reached.`)}class ui{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ui(()=>t(n))}}function Ete(e){Nn(e)?nLe(e):iLe(e)}function nLe(e){const t=e.component.scales;for(const n of me(t)){const i=oLe(e,n);if(t[n].setWithExplicit("domains",i),sLe(e,n),e.component.data.isFaceted){let o=e;for(;!Ia(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const s of i.value)wl(s)&&(s.data=GM+s.data.replace(GM,""))}}}function iLe(e){for(const n of e.children)Ete(n);const t=e.component.scales;for(const n of me(t)){let i,r=null;for(const o of e.children){const a=o.component.scales[n];if(a){i===void 0?i=a.getWithExplicit("domains"):i=Sc(i,a.getWithExplicit("domains"),"domains","scale",VM);const s=a.get("selectionExtent");r&&s&&r.param!==s.param&&xe(ePe),r=s}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function rLe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:o}=dB(t,n);if(!r){xe(o);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=dB(t,n);if(r)return"unaggregated"}return e}function oLe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=rLe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&ei(i.x2)?ei(i.x)?Sc(mu(n,r,e,"x"),mu(n,r,e,"x2"),"domain","scale",VM):mu(n,r,e,"x2"):t==="y"&&ei(i.y2)?ei(i.y)?Sc(mu(n,r,e,"y"),mu(n,r,e,"y2"),"domain","scale",VM):mu(n,r,e,"y2"):mu(n,r,e,t)}function aLe(e,t,n){return e.map(i=>({signal:`{data: ${hC(i,{timeUnit:n,type:t})}}`}))}function lR(e,t,n){var r;const i=(r=yi(n))==null?void 0:r.unit;return t==="temporal"||i?aLe(e,t,i):[e]}function mu(e,t,n,i){const{encoding:r,markDef:o,mark:a,config:s,stack:l}=n,u=ei(r[i]),{type:c}=u,d=u.timeUnit;if(SNe(t)){const g=mu(e,void 0,n,i),y=lR(t.unionWith,c,d);return us([...y,...g.value])}else{if(Ve(t))return us([t]);if(t&&t!=="unaggregated"&&!SQ(t))return us(lR(t,c,d))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return io([[0,1]]);const g=n.requestDataName(ln.Main);return io([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const h=Jl(i)&&ve(u)?lLe(n,i,e):void 0;if(qs(u)){const g=lR([u.datum],c,d);return io(g)}const m=u;if(t==="unaggregated"){const g=n.requestDataName(ln.Main),{field:y}=u;return io([{data:g,field:Ae({field:y,aggregate:"min"})},{data:g,field:Ae({field:y,aggregate:"max"})}])}else if(cn(m.bin)){if(vi(e))return io(e==="bin-ordinal"?[]:[{data:nv(h)?n.requestDataName(ln.Main):n.requestDataName(ln.Raw),field:n.vgField(i,i1(m,i)?{binSuffix:"range"}:{}),sort:h===!0||!Oe(h)?{field:n.vgField(i,{}),op:"min"}:h}]);{const{bin:g}=m;if(cn(g)){const y=TD(n,m.field,g);return io([new ui(()=>{const x=n.getSignalName(y);return`[${x}.start, ${x}.stop]`})])}else return io([{data:n.requestDataName(ln.Main),field:n.vgField(i,{})}])}}else if(m.timeUnit&&Ft(["time","utc"],e)){const g=r[Ws(i)];if(LQ(m,g,o,s)){const y=n.requestDataName(ln.Main),x=wc({fieldDef:m,fieldDef2:g,markDef:o,config:s}),b=rv(a)&&x!==.5&&zn(i);return io([{data:y,field:n.vgField(i,b?{suffix:xC}:{})},{data:y,field:n.vgField(i,{suffix:b?_C:"end"})}])}}return io(h?[{data:nv(h)?n.requestDataName(ln.Main):n.requestDataName(ln.Raw),field:n.vgField(i),sort:h}]:[{data:n.requestDataName(ln.Main),field:n.vgField(i)}])}function uR(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":lC),...i?{field:ta(i)}:{},...r?{order:r}:{}}}function sLe(e,t){var s;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(s=e.fieldDef(t))==null?void 0:s.bin,o=SQ(i)&&i,a=Wd(r)&&tC(r.extent)&&r.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function lLe(e,t,n){if(!vi(n))return;const i=e.fieldDef(t),r=i.sort;if(OQ(r))return{op:"min",field:dm(i,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Ss(r)){const s=o&&!a.has(r.field);return uR(r,s)}else if(IQ(r)){const{encoding:s,order:l}=r,u=e.fieldDef(s),{aggregate:c,field:d}=u,h=o&&!a.has(d);if(Hl(c)||Gc(c))return uR({field:Ae(u),order:l},h);if(FO(c)||!c)return uR({op:c,field:d,order:l},h)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ft(["ascending",void 0],r))return!0}}function dB(e,t){const{aggregate:n,type:i}=e;return n?Ie(n)&&!LFe.has(n)?{valid:!1,reason:kPe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:RPe(e)}:{valid:!0}:{valid:!1,reason:EPe(e)}}function VM(e,t,n,i){return e.explicit&&t.explicit&&xe(PPe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function uLe(e){const t=ms(e.map(a=>{if(wl(a)){const{sort:s,...l}=a;return l}return a}),Mt),n=ms(e.map(a=>{if(wl(a)){const s=a.sort;return s!==void 0&&!nv(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),Mt);if(t.length===0)return;if(t.length===1){const a=e[0];if(wl(a)&&n.length>0){let s=n[0];if(n.length>1){xe(b6);const l=n.filter(u=>Oe(u)&&"op"in u&&u.op!=="min");n.every(u=>Oe(u)&&"op"in u)&&l.length===1?s=l[0]:s=!0}else if(Oe(s)&&"field"in s){const l=s.field;a.field===l&&(s=s.order?{order:s.order}:!0)}return{...a,sort:s}}return a}const i=ms(n.map(a=>nv(a)||!("op"in a)||Ie(a.op)&&a.op in $Fe?a:(xe($Pe(a)),!0)),Mt);let r;i.length===1?r=i[0]:i.length>1&&(xe(b6),r=!0);const o=ms(e.map(a=>wl(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(s=>s.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function PD(e){if(wl(e)&&Ie(e.field))return e.field;if(jFe(e)){let t;for(const n of e.fields)if(wl(n)&&Ie(n.field)){if(!t)t=n.field;else if(t!==n.field)return xe(IPe),t}return xe(OPe),t}else if(zFe(e)){xe(DPe);const t=e.fields[0];return Ie(t)?t:void 0}}function EC(e,t){const i=e.component.scales[t].get("domains").map(r=>(wl(r)&&(r.data=e.lookupDataSource(r.data)),r));return uLe(i)}function kte(e){return Wm(e)||ND(e)?e.children.reduce((t,n)=>t.concat(kte(n)),hB(e)):hB(e)}function hB(e){return me(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u,reverse:c,...d}=r,h=cLe(r.range,o,n,e),m=EC(e,n),g=s?rOe(e,s,i,m):null;return t.push({name:o,type:a,...m?{domain:m}:{},...g?{domainRaw:g}:{},range:h,...c!==void 0?{reverse:c}:{},...d}),t},[])}function cLe(e,t,n,i){if(zn(n)){if(qc(e))return{step:{signal:`${t}_step`}}}else if(Oe(e)&&wl(e))return{...e,data:i.lookupDataSource(e.data)};return e}class Rte extends eu{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:yd(this.get("domains"),t=>de(t)&&t.length===2&&zt(t[0])&&t[0]<=0&&zt(t[1])&&t[1]>=0)}}const fLe=["range","scheme"];function dLe(e){const t=e.component.scales;for(const n of eC){const i=t[n];if(!i)continue;const r=hLe(n,e);i.setWithExplicit("range",r)}}function pB(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,o=Qr(t),a=e.getName(o);if(Oe(i)&&i.binned&&i.step!==void 0)return new ui(()=>{const s=e.scaleName(t),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${i.step}`;return`${e.getSignalName(a)} / (${l})`});if(cn(i)){const s=TD(e,r,i);return new ui(()=>{const l=e.getSignalName(s),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${u})`})}}}function hLe(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of fLe)if(n[d]!==void 0){const h=FM(o,d),m=CQ(e,d);if(!h)xe(iQ(o,d,e));else if(m)xe(m);else switch(d){case"range":{const g=n.range;if(de(g)){if(zn(e))return us(g.map(y=>{if(y==="width"||y==="height"){const x=t.getName(y),b=t.getSignalName.bind(t);return ui.fromName(b,x)}return y}))}else if(Oe(g))return us({data:t.requestDataName(ln.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return us(g)}case"scheme":return us(pLe(n[d]))}}const a=e===Sn||e==="xOffset"?"width":"height",s=i[a];if($s(s)){if(zn(e))if(vi(o)){const d=Ate(s,t,e);if(d)return us({step:d})}else xe(rQ(a));else if(Kv(e)){const d=e===zc?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const g=Mte(s,o);if(g)return us(g)}}}const{rangeMin:l,rangeMax:u}=n,c=mLe(e,t);return(l!==void 0||u!==void 0)&&FM(o,"rangeMin")&&de(c)&&c.length===2?us([l??c[0],u??c[1]]):io(c)}function pLe(e){return wNe(e)?{scheme:e.name,...qr(e,["name"])}:{scheme:e}}function Tte(e,t,n,{center:i}={}){const r=Qr(e),o=t.getName(r),a=t.getSignalName.bind(t);return e===_i&&So(n)?i?[ui.fromName(s=>`${a(s)}/2`,o),ui.fromName(s=>`-${a(s)}/2`,o)]:[ui.fromName(a,o),0]:i?[ui.fromName(s=>`-${a(s)}/2`,o),ui.fromName(s=>`${a(s)}/2`,o)]:[0,ui.fromName(a,o)]}function mLe(e,t){const{size:n,config:i,mark:r,encoding:o}=t,{type:a}=ei(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Sn:case _i:{if(Ft(["point","band"],l)){const d=Fte(e,n,i.view);if($s(d))return{step:Ate(d,t,e)}}return Tte(e,t,l)}case zc:case Lm:return gLe(e,t,l);case Xl:{const d=t.component.scales[e].get("zero"),h=Pte(r,d,i),m=xLe(r,n,t,i);return om(l)?vLe(h,m,yLe(l,i,u,e)):[h,m]}case ra:return[0,Math.PI*2];case Hd:return[0,360];case qa:return[0,new ui(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Uc:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Wc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Jr:return"symbol";case Kr:case Hs:case Us:return l==="ordinal"?a==="nominal"?"category":"ordinal":c!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Kl:case Bc:case Hc:return[i.scale.minOpacity,i.scale.maxOpacity]}}function Ate(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),o=RO(n),a=i[o];if(mee({step:e,offsetIsDiscrete:mt(a)&&vQ(a.type)})==="offset"&&XQ(i,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const h=l.get("paddingInner")??l.get("padding")??0,m=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${h}, ${m})`}const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${c} / (1-${WFe(d)})`}}else return e.step}function Mte(e,t){if(mee({step:e,offsetIsDiscrete:vi(t)})==="offset")return{step:e.step}}function gLe(e,t,n){const i=e===zc?"x":"y",r=t.getScaleComponent(i);if(!r)return Tte(i,t,n,{center:!0});const o=r.get("type"),a=t.scaleName(i),{markDef:s,config:l}=t;if(o==="band"){const u=Fte(i,t.size,t.config.view);if($s(u)){const c=Mte(u,n);if(c)return c}return[0,{signal:`bandwidth('${a}')`}]}else{const u=t.encoding[i];if(ve(u)&&u.timeUnit){const c=pQ(u.timeUnit,g=>`scale('${a}', ${g})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,h=wc({fieldDef:u,markDef:s,config:l})-.5,m=h!==0?` + ${h}`:"";if(d){const g=Ve(d)?`${d.signal}/2`+m:`${d/2+h}`,y=Ve(d)?`(1 - ${d.signal}/2)`+m:`${1-d/2+h}`;return[{signal:`${g} * (${c})`},{signal:`${y} * (${c})`}]}return[0,{signal:c}]}return CJ(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function Fte(e,t,n){const i=e===Sn?"width":"height",r=t[i];return r||Hw(n,i)}function yLe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&de(n)?n.length+1:(xe(qPe(i)),3)}}function vLe(e,t,n){const i=()=>{const r=Ta(t),o=Ta(e),a=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${a}, ${a})`};return Ve(t)?new ui(i):{signal:i()}}function Pte(e,t,n){if(t)return Ve(t)?{signal:`${t.signal} ? 0 : ${Pte(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(nC("size",e))}const mB=.95;function xLe(e,t,n,i){const r={x:pB(n,"x"),y:pB(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const o=gB(t,r,i.view);return zt(o)?o-1:new ui(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=gB(t,r,i.view);return zt(o)?Math.pow(mB*o,2):new ui(()=>`pow(${mB} * ${o.signal}, 2)`)}}throw new Error(nC("size",e))}function gB(e,t,n){const i=$s(e.width)?e.width.step:Bw(n,"width"),r=$s(e.height)?e.height.step:Bw(n,"height");return t.x||t.y?new ui(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function Nte(e,t){Nn(e)?_Le(e,t):Ite(e,t)}function _Le(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:a}=e;for(const s of me(n)){const l=a[s],u=n[s],c=e.getScaleComponent(s),d=ei(r[s]),h=l[t],m=c.get("type"),g=c.get("padding"),y=c.get("paddingInner"),x=FM(m,t),b=CQ(s,t);if(h!==void 0&&(x?b&&xe(b):xe(iQ(m,t,s))),x&&b===void 0)if(h!==void 0){const w=d.timeUnit,S=d.type;switch(t){case"domainMax":case"domainMin":Gd(l[t])||S==="temporal"||w?u.set(t,{signal:hC(l[t],{type:S,timeUnit:w})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const w=t in yB?yB[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:m,scalePadding:g,scalePaddingInner:y,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:KQ(r,s),hasSecondaryRangeChannel:!!r[Ws(s)]}):i.scale[t];w!==void 0&&u.set(t,w,!1)}}}const yB={bins:({model:e,fieldOrDatumDef:t})=>ve(t)?bLe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>wLe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>SLe(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>CLe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>ELe(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>kLe(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=ve(e)?e.sort:void 0;return RLe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:a})=>TLe(e,t,n,i,r,o.scale,a)};function $te(e){Nn(e)?dLe(e):Ite(e,"range")}function Ite(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?$te(i):Nte(i,t);for(const i of me(n)){let r;for(const o of e.children){const a=o.component.scales[i];if(a){const s=a.getWithExplicit(t);r=Sc(r,s,t,"scale",Tee((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function bLe(e,t){const n=t.bin;if(cn(n)){const i=TD(e,t.field,n);return new ui(()=>e.getSignalName(i))}else if(Ci(n)&&Wd(n)&&n.step!==void 0)return{step:n.step}}function wLe(e,t){if(Ft([Kr,Hs,Us],e)&&t!=="nominal")return"hcl"}function SLe(e,t,n,i,r,o){var a;if(!((a=Ns(o))!=null&&a.bin||de(n)||r!=null||i!=null||Ft([Vr.TIME,Vr.UTC],e)))return zn(t)?!0:void 0}function CLe(e,t,n,i,r,o){if(zn(e)){if(Aa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=r;if(a==="bar"&&!(ve(i)&&(i.bin||i.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Vr.POINT)return n.pointPadding}}function ELe(e,t,n,i,r,o=!1){if(e===void 0){if(zn(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=r;return o?u:jn(a,n==="bar"?s:l)}else if(Kv(t)&&i===Vr.BAND)return r.offsetBandPaddingInner}}function kLe(e,t,n,i,r,o=!1){if(e===void 0){if(zn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=r;if(o)return s;if(n===Vr.BAND)return jn(a,Ve(i)?{signal:`${i.signal}/2`}:i/2)}else if(Kv(t)){if(n===Vr.POINT)return .5;if(n===Vr.BAND)return r.offsetBandPaddingOuter}}}function RLe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return So(e)&&t==="descending"?Ve(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(So(e)&&t==="descending")return!0}function TLe(e,t,n,i,r,o,a){if(!!n&&n!=="unaggregated"&&So(r)){if(de(n)){const l=n[0],u=n[n.length-1];if(zt(l)&&l<=0&&zt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!om(r))return!0;if(!(ve(t)&&t.bin)&&Ft([...Gs,...kFe],e)){const{orient:l,type:u}=i;return Ft(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ft(["bar","area"],u)&&!a?!0:o==null?void 0:o.zero}return!1}function ALe(e,t,n,i,r=!1){const o=MLe(t,n,i,r),{type:a}=e;return Jl(t)?a!==void 0?ANe(t,a)?ve(n)&&!TNe(a,n.type)?(xe(MPe(a,o)),o):a:(xe(APe(t,a,o)),o):o:null}function MLe(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(vp(e)||eR(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&xe(tR(e,"ordinal")),"ordinal";if(zn(e)||Kv(e)){if(Ft(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&e in MO)return"band";const o=n[Qr(e)];return wd(o)||sm(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return vp(e)?"time":eR(e)==="discrete"?(xe(tR(e,"temporal")),"ordinal"):ve(t)&&t.timeUnit&&yi(t.timeUnit).utc?"utc":"time";case"quantitative":return vp(e)?ve(t)&&cn(t.bin)?"bin-ordinal":"linear":eR(e)==="discrete"?(xe(tR(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(tQ(t.type))}function FLe(e,{ignoreRange:t}={}){Ote(e),Ete(e);for(const n of RNe)Nte(e,n);t||$te(e)}function Ote(e){Nn(e)?e.component.scales=PLe(e):e.component.scales=$Le(e)}function PLe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of eC){const a=ei(t[o]);if(a&&n===RQ&&o===Jr&&a.type===jm)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});const l=KQ(t,o),u=ALe(s,o,a,i,l);r[o]=new Rte(e.scaleName(`${o}`,!0),{value:u,explicit:s.type===u})}}return r}const NLe=Tee((e,t)=>S6(e)-S6(t));function $Le(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){Ote(o);for(const a of me(o.component.scales))if((t=r.scale)[a]??(t[a]=dte(a,e)),r.scale[a]==="shared"){const s=i[a],l=o.component.scales[a].getWithExplicit("type");s?yNe(s.value,l.value)?i[a]=Sc(s,l,"type","scale",NLe):(r.scale[a]="independent",delete i[a]):i[a]=l}}for(const o of me(i)){const a=e.scaleName(o,!0),s=i[o];n[o]=new Rte(a,s);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),a),u.merged=!0)}}return n}class cR{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Nn(e){return(e==null?void 0:e.type)==="unit"}function Ia(e){return(e==null?void 0:e.type)==="facet"}function ND(e){return(e==null?void 0:e.type)==="concat"}function Wm(e){return(e==null?void 0:e.type)==="layer"}class $D{constructor(t,n,i,r,o,a,s){this.type=n,this.parent=i,this.config=o,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=i,this.config=o,this.view=Dr(s),this.name=t.name??r,this.title=Cu(t.title)?{text:t.title}:t.title?Dr(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new cR,this.projectionNameMap=i?i.projectionNameMap:new cR,this.signalNameMap=i?i.signalNameMap:new cR,this.data=t.data,this.description=t.description,this.transforms=BIe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:G$e(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:uC(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new eu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?ht(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){FLe(this)}parseProjection(){wte(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){yte(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const o of me(i)){const a=i[o];a!==void 0&&(r[o]=mn(a))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=mn(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:rn(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,o=tDe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Ho)t[i].title&&n.push(ZOe(this,i));for(const i of CD)n=n.concat(XOe(this,i));return n}assembleAxes(){return OOe(this.component.axes,this.config)}assembleLegends(){return xte(this)}assembleProjections(){return CDe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...qJ(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ft(["unit","layer"],this.type)?Ft(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),rn(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Ia(this.parent)?kte(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return wn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ln[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Ia(this.parent)){const n=cte(t),i=QS(n),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),a=r.get("range");if(vi(o)&&qc(a)){const s=r.get("name"),l=EC(this,i),u=PD(l);if(u){const c=Ae({aggregate:"distinct",field:u},{expr:"datum"});return{signal:ute(s,r,c)}}else return xe(NO(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(DJ(t)&&Jl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(ZFe(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class Dte extends $D{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Ae(i,n)}reduceFieldDef(t,n){return _$e(this.getMapping(),(i,r,o)=>{const a=Ns(r);return a?t(i,a,o):i},n)}forEachFieldDef(t,n){aD(this.getMapping(),(i,r)=>{const o=Ns(i);o&&t(o,r)},n)}}class kC extends tn{clone(){return new kC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return this.transform.groupby&&(i.resolve="shared"),i}}class RC extends tn{clone(){return new RC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Mt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class av extends tn{clone(){return new av(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:i,mark:r,markDef:o}=n;if(Kt("invalid",o,i)!=="filter")return null;const s=n.reduceFieldDef((l,u,c)=>{const d=Jl(c)&&n.getScaleComponent(c);if(d){const h=d.get("type");So(h)&&u.aggregate!=="count"&&!Vc(r)&&(l[u.field]=u)}return l},{});return me(s).length?new av(t,s):null}dependentFields(){return new Set(me(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mt(this.filter)}`}assemble(){const t=me(this.filter).reduce((n,i)=>{const r=this.filter[i],o=Ae(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):r.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class TC extends tn{clone(){return new TC(this.parent,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,a)=>r[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class AC extends tn{clone(){return new AC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class bp extends tn{clone(){return new bp(null,ht(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ya,Va],[na,Za]]){const o=r.map(a=>{const s=ei(n.encoding[a]);return ve(s)?s.field:qs(s)?{expr:`${s.datum}`}:za(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new bp(t,o,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Jr)){const r=n.typedFieldDef(Jr);r.type===jm&&(t=new bp(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Ie);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sv extends tn{clone(){return new sv(null,this.projection,ht(this.fields),ht(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ya,Va],[na,Za]]){const r=i.map(a=>{const s=ei(n.encoding[a]);return ve(s)?s.field:qs(s)?{expr:`${s.datum}`}:za(s)?{expr:`${s.value}`}:void 0}),o=i[0]===na?"2":"";(r[0]||r[1])&&(t=new sv(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ie))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mt(this.fields)} ${Mt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Xf extends tn{clone(){return new Xf(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Xf(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(ve(r)&&ve(o)){const a=r.impute?r:o.impute?o:void 0;if(a===void 0)return;const s=r.impute?o:o.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=a.impute,h=QQ(n.mark,i);return new Xf(t,{impute:a.field,key:s.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${Mt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:a,frame:s=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:wIe(i)?this.processSequence(i):i}:{},method:"value",...o?{groupby:o}:{},value:!r||r==="value"?a:null};if(r&&r!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:s,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class MC extends tn{clone(){return new MC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class lv extends tn{clone(){return new lv(null,ht(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const o=n.component.data.sources,{from:a}=i;let s=null;if(SIe(a)){let l=zte(a.data,o);l||(l=new kd(a.data),o.push(l));const u=n.getName(`lookup_${r}`);s=new yr(l,u,ln.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=s}else if(CIe(a)){const l=a.param;i={as:l,...i};let u;try{u=n.getSelectionComponent(wn(l),l)}catch{throw new Error(JFe(l))}if(s=u.materialized,!s)throw new Error(QFe(l))}return new lv(t,i,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?$e(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:$e(this.transform.as)}:{}};else{let n=this.transform.as;Ie(n)||(xe(sPe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class FC extends tn{clone(){return new FC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class PC extends tn{clone(){return new PC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class NC extends tn{clone(){return new NC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ms((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Mt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...o!==void 0?{op:o}:{},...i!==void 0?{groupby:i}:{}}}}class $C extends tn{clone(){return new $C(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Lte(e){let t=0;function n(i,r){if(i instanceof kd&&!i.isGenerator&&!um(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Vi&&(i.parent instanceof kd&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Hm){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof a1||i instanceof s1||i instanceof av||i instanceof Bm||i instanceof fm||i instanceof sv||i instanceof $a||i instanceof lv||i instanceof Um||i instanceof Zd||i instanceof AC||i instanceof TC||i instanceof kC||i instanceof MC||i instanceof FC||i instanceof PC||i instanceof kc||i instanceof $C||i instanceof NC||i instanceof RC)&&r.transform.push(i.assemble()),(i instanceof Es||i instanceof Cs||i instanceof Xf||i instanceof Fl||i instanceof bp)&&r.transform.push(...i.assemble()),i instanceof yr&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof yr?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof yr&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const a of i.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function ILe(e){const t=[],n=Lte(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function OLe(e,t){const n=[],i=Lte(n);let r=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${r++}`);const s=a.assemble();i(a,s)}for(const a of n)a.transform.length===0&&delete a.transform;let o=0;for(const[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(const a of n)for(const s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function DLe(e){return e==="top"||e==="left"||Ve(e)?"header":"footer"}function LLe(e){for(const t of Ho)jLe(e,t);vB(e,"x"),vB(e,"y")}function jLe(e,t){var a;const{facet:n,config:i,child:r,component:o}=e;if(e.channelHasField(t)){const s=n[t],l=hm("title",null,i,t);let u=xp(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(u=de(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=hm("labelOrient",s.header,i,t),d=s.header!==null?jn((a=s.header)==null?void 0:a.labels,i.header.labels,!0):!1,h=Ft(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[h]:t==="facet"?[]:[jte(e,t,d)]}}}function jte(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function vB(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=RD(r,t),r.axis[t]==="shared"){const o=t==="x"?"column":"row",a=i[o];for(const s of n.component.axes[t]){const l=DLe(s.get("orient"));a[l]??(a[l]=[jte(e,o,!1)]);const u=T0(s,"main",e.config,{header:!0});u&&a[l][0].axes.push(u),s.mainExtracted=!0}}}}function zLe(e){ID(e),qw(e,"width"),qw(e,"height")}function BLe(e){ID(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";qw(e,t),qw(e,n)}function ID(e){for(const t of e.children)t.parseLayoutSize()}function qw(e,t){const n=cte(t),i=QS(n),r=e.component.resolve,o=e.component.layoutSize;let a;for(const s of e.children){const l=s.component.layoutSize.getWithExplicit(n),u=r.scale[i]??dte(i,e);if(u==="independent"&&l.value==="step"){a=void 0;break}if(a){if(u==="independent"&&a.value!==l.value){a=void 0;break}a=Sc(a,l,n,"")}else a=l}if(a){for(const s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function HLe(e){const{size:t,component:n}=e;for(const i of Gs){const r=Qr(i);if(t[r]){const o=t[r];n.layoutSize.set(r,$s(o)?"step":o,!0)}else{const o=ULe(e,r);n.layoutSize.set(r,o,!1)}}}function ULe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const o=r.get("type"),a=r.get("range");if(vi(o)){const s=Hw(i.view,t);return qc(a)||$s(s)?"step":s}else return $M(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return $M(i.view,t);{const o=Hw(i.view,t);return $s(o)?o.step:o}}}function YM(e,t,n){return Ae(t,{suffix:`by_${Ae(e)}`,...n??{}})}class iy extends Dte{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=zD(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!t1(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=me(t),i={};for(const r of n){if(![Tl,Al].includes(r)){xe(nC(r,"facet"));break}const o=t[r];if(o.field===void 0){xe(AM(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=rD(t,n);return i.header?i.header=Dr(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=IC(this),this.child.parseData()}parseLayoutSize(){ID(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),LLe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ho)for(const i of ED){const r=this.component.layoutHeaders[n],o=r[i],{facetFieldDef:a}=r;if(a){const s=hm("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){const l=SC(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const s=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof iy))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof iy?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ae(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof iy){if(this.child.channelHasField("column")){const r=Ae(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Gs){const o=this.child.component.scales[r];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(vi(a)&&qc(s)){const l=EC(this.child,r),u=PD(l);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):xe(NO(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const c of Ho){const d=this.facet[c];if(d){l.push(Ae(d));const{bin:h,sort:m}=d;if(cn(h)&&l.push(Ae(d,{binSuffix:"end"})),Ss(m)){const{field:g,op:y=lC}=m,x=YM(d,m);i&&r?(o.push(x),a.push("max"),s.push(x)):(o.push(g),a.push(y),s.push(x))}else if(de(m)){const g=dm(d,c);o.push(g),a.push("max"),s.push(g)}}}const u=!!i&&!!r;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:a,as:s}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Ss(i.sort)?[YM(i,i.sort,{expr:"datum"})]:de(i.sort)?[dm(i,t,{expr:"datum"})]:[Ae(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Ss(r)?r.order:!de(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var r;const{facet:t,config:n}=this;if(t.facet)return HM(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const o of CD)if(t[o]){const a=hm("labelOrient",(r=t[o])==null?void 0:r.header,n,o);if(i[o].includes(a))return HM(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=ILe(n),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:Ho.map(l=>this.facetSortFields(l)).flat(),order:Ho.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(eOe(this,[]))}]}getMapping(){return this.facet}}function WLe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(Ss(o.sort)){const{field:a,op:s=lC}=o.sort;e=r=new Zd(e,{joinaggregate:[{op:s,field:a,as:YM(o,o.sort,{forAs:!0})}],groupby:[Ae(o)]})}return r}return null}function zte(e,t){var n,i,r,o;for(const a of t){const s=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(i=s.format)==null?void 0:i.feature;if(l&&u)continue;const c=(r=e.format)==null?void 0:r.feature;if((c||u)&&c!==u)continue;const d=(o=s.format)==null?void 0:o.mesh;if(!((l||d)&&l!==d)){if(ov(e)&&ov(s)){if(ho(e.values,s.values))return a}else if(um(e)&&um(s)){if(e.url===s.url)return a}else if(Aee(e)&&e.name===a.dataName)return a}}return null}function GLe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new kd({values:[]});return t.push(i),i}const n=zte(e.data,t);if(n)return ic(e.data)||(n.data.format=EJ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new kd(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function qLe(e,t,n){let i=0;for(const r of t.transforms){let o,a;if($Ie(r))a=e=new fm(e,r),o="derived";else if(yD(r)){const s=DDe(r);a=e=Vi.makeWithAncestors(e,{},s,n)??e,e=new Bm(e,t,r.filter)}else if(Cee(r))a=e=Es.makeFromTransform(e,r,t),o="number";else if(OIe(r))o="date",n.getWithExplicit(r.field).value===void 0&&(e=new Vi(e,{[r.field]:o}),n.set(r.field,o,!1)),a=e=Cs.makeFromTransform(e,r);else if(DIe(r))a=e=$a.makeFromTransform(e,r),o="number",SD(t)&&(e=new kc(e));else if(See(r))a=e=lv.make(e,t,r,i++),o="derived";else if(FIe(r))a=e=new Um(e,r),o="number";else if(PIe(r))a=e=new Zd(e,r),o="number";else if(LIe(r))a=e=Fl.makeFromTransform(e,r),o="derived";else if(jIe(r))a=e=new AC(e,r),o="derived";else if(zIe(r))a=e=new RC(e,r),o="derived";else if(NIe(r))a=e=new TC(e,r),o="derived";else if(EIe(r))a=e=new NC(e,r),o="derived";else if(MIe(r))e=new $C(e,r);else if(IIe(r))a=e=Xf.makeFromTransform(e,r),o="derived";else if(kIe(r))a=e=new kC(e,r),o="derived";else if(RIe(r))a=e=new FC(e,r),o="derived";else if(TIe(r))a=e=new PC(e,r),o="derived";else if(AIe(r))a=e=new MC(e,r),o="derived";else{xe(aPe(r));continue}if(a&&o!==void 0)for(const s of a.producedFields()??[])n.set(s,o,!1)}return e}function IC(e){var y;let t=GLe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,a=!(r&&(ic(r)||um(r)||ov(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new JIe;ic(r)?(Mee(r)?t=new s1(t,r.sequence):vD(r)&&(t=new a1(t,r.graticule)),a.parseNothing=!0):((y=r==null?void 0:r.format)==null?void 0:y.parse)===null&&(a.parseNothing=!0),t=Vi.makeExplicit(t,e,a)??t,t=new kc(t);const s=e.parent&&Wm(e.parent);(Nn(e)||Ia(e))&&s&&(t=Es.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=qLe(t,e,a));const l=jDe(e),u=LDe(e);t=Vi.makeWithAncestors(t,{},{...l,...u},a)??t,Nn(e)&&(t=bp.parseAll(t,e),t=sv.parseAll(t,e)),(Nn(e)||Ia(e))&&(s||(t=Es.makeFromEncoding(t,e)??t),t=Cs.makeFromEncoding(t,e)??t,t=fm.parseAllForSortIndex(t,e));const c=e.getDataName(ln.Raw),d=new yr(t,c,ln.Raw,i);if(n[c]=d,t=d,Nn(e)){const x=$a.makeFromEncoding(t,e);x&&(t=x,SD(e)&&(t=new kc(t))),t=Xf.makeFromEncoding(t,e)??t,t=Fl.makeFromEncoding(t,e)??t}Nn(e)&&(t=av.make(t,e)??t);const h=e.getDataName(ln.Main),m=new yr(t,h,ln.Main,i);n[h]=m,t=m,Nn(e)&&$Oe(e,m);let g=null;if(Ia(e)){const x=e.getName("facet");t=WLe(t,e.facet)??t,g=new Hm(t,e,x,m.getSource()),n[x]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:m,facetRoot:g,ancestorParse:a}}class VLe extends $D{constructor(t,n,i,r){var o,a,s,l;super(t,"concat",n,i,r,t.resolve),(((a=(o=t.resolve)==null?void 0:o.axis)==null?void 0:a.x)==="shared"||((l=(s=t.resolve)==null?void 0:s.axis)==null?void 0:l.y)==="shared")&&xe(iPe),this.children=this.getChildren(t).map((u,c)=>zD(u,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=IC(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of me(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return gC(t)?t.vconcat:mD(t)?t.hconcat:t.concat}parseLayoutSize(){BLe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=kD(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function YLe(e){return e===!1||e===null}const ZLe={disable:1,gridScale:1,scale:1,...YQ,labelExpr:1,encode:1},Bte=me(ZLe);class OD extends eu{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new OD(ht(this.explicit),ht(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!YLe(this.get(t))}hasOrientSignalRef(){return Ve(this.explicit.orient)}}function XLe(e,t,n){const{encoding:i,config:r}=e,o=ei(i[t])??ei(i[Ws(t)]),a=e.axis(t)||{},{format:s,formatType:l}=a;if(Sd(l))return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:l,config:r}),...n};if(s===void 0&&l===void 0&&r.customFormatTypes){if(am(o)==="quantitative"){if(sm(o)&&o.stack==="normalize"&&r.normalizedNumberFormatType)return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(am(o)==="temporal"&&r.timeFormatType&&ve(o)&&!o.timeUnit)return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function KLe(e){return Gs.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[r5e(n,e)]),t),{})}const JLe={bottom:"top",top:"bottom",left:"right",right:"left"};function QLe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of me(r.component.axes))n.axis[o]=RD(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=e5e(t[o],r.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const r of Gs){for(const o of e.children)if(o.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(o.component.axes[r]);for(const a of o.component.axes[r]){const{value:s,explicit:l}=a.getWithExplicit("orient");if(!Ve(s)){if(i[s]>0&&!l){const u=JLe[s];i[s]>i[u]&&a.set("orient",u,!1)}i[s]++}}}delete o.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[o,a]of(t[r]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function e5e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const a=r.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[i]=t5e(r,o)}}}else return t.map(n=>n.clone());return e}function t5e(e,t){for(const n of Bte){const i=Sc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return QJ(r,o);case"gridScale":return{explicit:r.explicit,value:jn(r.value,o.value)}}return vC(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function n5e(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ve(n.labelAngle)?n.labelAngle:iv(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===ote(i,r))return!0}return e===n[t]}const i5e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function r5e(e,t){var b,w;let n=t.axis(e);const i=new OD,r=ei(t.encoding[e]),{mark:o,config:a}=t,s=(n==null?void 0:n.orient)||((b=a[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((w=a.axis)==null?void 0:w.orient)||WOe(e),l=t.getScaleComponent(e).get("type"),u=DOe(e,l,s,t.config),c=n!==void 0?!n:zM("disable",a.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",c,n!==void 0),c)return i;n=n||{};const d=BOe(r,n,e,a.style,u),h=NQ(n.formatType,r,l),m=PQ(r,r.type,n.format,n.formatType,a,!0),g={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:s,labelAngle:d,format:m,formatType:h,mark:o,config:a};for(const S of Bte){const k=S in iB?iB[S](g):M6(S)?n[S]:void 0,R=k!==void 0,M=n5e(k,S,n,t,e);if(R&&M)i.set(S,k,M);else{const{configValue:T=void 0,configFrom:N=void 0}=M6(S)&&S!=="values"?zM(S,a.style,n.style,u):{},z=T!==void 0;R&&!z?i.set(S,k,M):(N!=="vgAxisConfig"||i5e.has(S)&&z||r1(T)||Ve(T))&&i.set(S,T,!1)}}const y=n.encoding??{},x=VQ.reduce((S,k)=>{if(!i.hasAxisPart(k))return S;const R=fte(y[k]??{},t),M=k==="labels"?XLe(t,e,R):R;return M!==void 0&&!rn(M)&&(S[k]={update:M}),S},{});return rn(x)||i.set("encode",x,!!n.encoding||n.labelAngle!==void 0),i}function o5e({encoding:e,size:t}){for(const n of Gs){const i=Qr(n);$s(t[i])&&Uu(e[n])&&(delete t[i],xe(rQ(i)))}return t}const a5e={vgMark:"arc",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qi("x",e,{defaultPos:"mid"}),...qi("y",e,{defaultPos:"mid"}),...Cc(e,"radius"),...Cc(e,"theta")})},s5e={vgMark:"area",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Uw("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Uw("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...wD(e)})},l5e={vgMark:"rect",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Cc(e,"x"),...Cc(e,"y")})},u5e={vgMark:"shape",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ve(n)&&n.type===jm?{field:Ae(n,{expr:"datum"})}:{}}]}},c5e={vgMark:"image",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Cc(e,"x"),...Cc(e,"y"),..._D(e,"url")})},f5e={vgMark:"line",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qi("x",e,{defaultPos:"mid"}),...qi("y",e,{defaultPos:"mid"}),...ci("size",e,{vgChannel:"strokeWidth"}),...wD(e)})},d5e={vgMark:"trail",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qi("x",e,{defaultPos:"mid"}),...qi("y",e,{defaultPos:"mid"}),...ci("size",e),...wD(e)})};function DD(e,t){const{config:n}=e;return{...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qi("x",e,{defaultPos:"mid"}),...qi("y",e,{defaultPos:"mid"}),...ci("size",e),...ci("angle",e),...h5e(e,n,t)}}function h5e(e,t,n){return n?{shape:{value:n}}:ci("shape",e)}const p5e={vgMark:"symbol",encodeEntry:e=>DD(e)},m5e={vgMark:"symbol",encodeEntry:e=>DD(e,"circle")},g5e={vgMark:"symbol",encodeEntry:e=>DD(e,"square")},y5e={vgMark:"rect",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Cc(e,"x"),...Cc(e,"y")})},v5e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Uw("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Uw("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ci("size",e,{vgChannel:"strokeWidth"})}}},x5e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...oa(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...qi("x",e,{defaultPos:"mid"}),...qi("y",e,{defaultPos:"mid"}),..._D(e),...ci("size",e,{vgChannel:"fontSize"}),...ci("angle",e),...Q6("align",_5e(e.markDef,n,t)),...Q6("baseline",b5e(e.markDef,n,t)),...qi("radius",e,{defaultPos:null}),...qi("theta",e,{defaultPos:null})}}};function _5e(e,t,n){if(Kt("align",e,n)===void 0)return"center"}function b5e(e,t,n){if(Kt("baseline",e,n)===void 0)return"middle"}const w5e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",o=i==="horizontal"?"height":"width";return{...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...qi("x",e,{defaultPos:"mid",vgChannel:"xc"}),...qi("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ci("size",e,{defaultValue:S5e(e),vgChannel:r}),[o]:mn(Kt("thickness",n,t))}}};function S5e(e){const{config:t,markDef:n}=e,{orient:i}=n,r=i==="horizontal"?"width":"height",o=e.getScaleComponent(i==="horizontal"?"x":"y"),a=Kt("size",n,t,{vgChannel:r})??t.tick.bandSize;if(a!==void 0)return a;{const s=o?o.get("range"):void 0;return s&&qc(s)&&zt(s.step)?s.step*3/4:Bw(t.view,r)*3/4}}const Hx={arc:a5e,area:s5e,bar:l5e,circle:m5e,geoshape:u5e,image:c5e,line:f5e,point:p5e,rect:y5e,rule:v5e,square:g5e,text:x5e,tick:w5e,trail:d5e};function C5e(e){if(Ft([aC,rC,PNe],e.mark)){const t=QQ(e.mark,e.encoding);if(t.length>0)return E5e(e,t)}else if(e.mark===oC){const t=TM.some(n=>Kt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return k5e(e)}return LD(e)}const xB="faceted_path_";function E5e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:xB+e.requestDataName(ln.Main),data:e.requestDataName(ln.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:LD(e,{fromPrefix:xB})}]}const _B="stack_group_";function k5e(e){var u;const[t]=LD(e,{fromPrefix:_B}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${c}(${h.map(m=>`scale('${n}',${m})`).join(",")})`};let o,a;e.stack.fieldChannel==="x"?(o={...em(t.encode.update,["y","yc","y2","height",...TM]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...qr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...em(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...qr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of TM){const d=Ul(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):d&&(o[c]=mn(d)),d&&(t.encode.update[c]={value:0})}const s=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),h=Ae(d);h&&s.push(h),(d!=null&&d.bin||d!=null&&d.timeUnit)&&s.push(Ae(d,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const h=Ul(d,e.markDef,e.config);return h!==void 0?{...c,[d]:mn(h)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ln.Main),name:_B+e.requestDataName(ln.Main),groupby:s,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function R5e(e){var s;const{encoding:t,stack:n,mark:i,markDef:r,config:o}=e,a=t.order;if(!(!de(a)&&za(a)&&kM(a.value)||!a&&kM(Kt("order",r,o)))){if((de(a)||ve(a))&&!n)return XJ(a,{expr:"datum"});if(Vc(i)){const l=r.orient==="horizontal"?"y":"x",u=t[l];if(ve(u)){const c=u.sort;if(de(c))return{field:Ae(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(Ss(c))return{field:Ae({aggregate:oD(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(IQ(c)){const d=e.fieldDef(c.encoding);return{field:Ae(d,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Ae(u,{binSuffix:(s=e.stack)!=null&&s.impute?"mid":void 0,expr:"datum"})}}return}}}function LD(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,a=jn(i.clip,T5e(e),A5e(e)),s=YJ(i),l=r.key,u=R5e(e),c=M5e(e),d=Kt("aria",i,o),h=Hx[n].postEncodingTransform?Hx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Hx[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(ln.Main)},encode:{update:Hx[n].encodeEntry(e)},...h?{transform:h}:{}}]}function T5e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function A5e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function M5e(e){if(!e.component.selection)return null;const t=me(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=me(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}class Hte extends Dte{constructor(t,n,i,r={},o){super(t,"unit",n,i,o,void 0,P6(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=Ps(t.mark)?{...t.mark}:{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=pIe(a,o,{graticule:t.data&&vD(t.data)}));const l=this.encoding=v$e(t.encoding||{},s,a.filled,o);this.markDef=_ee(a,l,o),this.size=o5e({encoding:l,size:P6(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=xee(this.markDef,l),this.specifiedScales=this.initScales(s,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>hD(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===RQ,i=t&&yFe.some(r=>mt(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return eC.reduce((i,r)=>{const o=ei(n[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Dr(t);return de(n)&&(r.domain=n.map(lo)),de(i)&&(r.range=i.map(lo)),r}initAxes(t){return Gs.reduce((n,i)=>{const r=t[i];if(mt(r)||i===Sn&&mt(t.x2)||i===_i&&mt(t.y2)){const o=mt(r)?r.axis:void 0;n[i]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=me(t),i={};for(const r of n){const o=t[r];i[r]=r1(o)?VJ(o):lo(o)}return i}initLegends(t){return RFe.reduce((n,i)=>{const r=ei(t[i]);if(r&&AFe(i)){const o=r.legend;n[i]=o&&Dr(o)}return n},{})}parseData(){this.component.data=IC(this)}parseLayoutSize(){HLe(this)}parseSelections(){this.component.selection=NOe(this,this.selection)}parseMarkGroup(){this.component.mark=C5e(this)}parseAxesAndHeaders(){this.component.axes=KLe(this)}assembleSelectionTopLevelSignals(t){return tOe(this,t)}assembleSignals(){return[...nte(this),...QIe(this,[])]}assembleSelectionData(t){return nOe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return kD(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Wm(this.parent))&&(t=Nee(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Yf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ns(n)}typedFieldDef(t){const n=this.fieldDef(t);return _r(n)?n:null}}class jD extends $D{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const a={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((s,l)=>{if(yC(s))return new jD(s,this,this.getName(`layer_${l}`),a,o);if(Ql(s))return new Hte(s,this,this.getName(`layer_${l}`),a,o);throw new Error(PO(s))})}parseData(){this.component.data=IC(this);for(const t of this.children)t.parseData()}parseLayoutSize(){zLe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of me(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){QLe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),nte(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),kD(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of $e(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return iOe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),xte(this))}}function zD(e,t,n,i,r){if(uC(e))return new iy(e,t,n,r);if(yC(e))return new jD(e,t,n,i,r);if(Ql(e))return new Hte(e,t,n,i,r);if(H$e(e))return new VLe(e,t,n,r);throw new Error(PO(e))}function F5e(e,t={}){t.logger&&VPe(t.logger),t.fieldTitle&&WQ(t.fieldTitle);try{const n=vee(wm(t.config,e.config)),i=Ree(e,n),r=zD(i,null,"",void 0,n);return r.parse(),tLe(r.component.data,r),{spec:N5e(r,P5e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&YPe(),t.fieldTitle&&u$e()}}function P5e(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Ie(t)&&(t={type:t}),r&&o&&ZIe(t.type)){if(r==="step"&&o==="step")xe(g6()),t.type="pad";else if(r==="step"||o==="step"){const a=r==="step"?"width":"height";xe(g6(QS(a)));const s=a==="width"?"height":"width";t.type=XIe(s)}}return{...me(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...W6(n,!1),...W6(e,!0)}}function N5e(e,t,n={},i){const r=e.config?nIe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),OLe(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(t[m.name]=+m.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...s?{title:s}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...pee(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const $5e=fFe.version,I5e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:tm,accessPathWithDatum:wO,compile:F5e,contains:Ft,deepEqual:ho,deleteNestedProperty:Fw,duplicate:ht,entries:_c,every:xO,fieldIntersection:bO,flatAccessWithDatum:RJ,getFirstDefined:jn,hasIntersection:_O,hash:Mt,internalField:MJ,isBoolean:nv,isEmpty:rn,isEqual:hFe,isInternalField:FJ,isNullOrFalse:kM,isNumeric:VS,keys:me,logicalExpr:ty,mergeDeep:EJ,never:CJ,normalize:Ree,normalizeAngle:iv,omit:qr,pick:em,prefixGenerator:RM,removePathFromField:SO,replaceAll:vd,replacePathInField:ta,resetIdCounter:mFe,setEqual:kJ,some:yd,stringify:on,titleCase:Yv,unique:ms,uniqueId:AJ,vals:Ai,varName:wn,version:$5e},Symbol.toStringTag,{value:"Module"}));function Ute(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var O5e="vega-themes",D5e="2.14.0",L5e="Themes for stylized Vega and Vega-Lite visualizations.",j5e=["vega","vega-lite","themes","style"],z5e="BSD-3-Clause",B5e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},H5e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],U5e="build/vega-themes.js",W5e="build/vega-themes.module.js",G5e="build/vega-themes.min.js",q5e="build/vega-themes.min.js",V5e="build/vega-themes.module.d.ts",Y5e={type:"git",url:"https://github.com/vega/vega-themes.git"},Z5e=["src","build"],X5e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},K5e={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},J5e={vega:"*","vega-lite":"*"},Q5e={},e3e={name:O5e,version:D5e,description:L5e,keywords:j5e,license:z5e,author:B5e,contributors:H5e,main:U5e,module:W5e,unpkg:G5e,jsdelivr:q5e,types:V5e,repository:Y5e,files:Z5e,scripts:X5e,devDependencies:K5e,peerDependencies:J5e,dependencies:Q5e};const Fh="#fff",bB="#888",t3e={background:"#333",view:{stroke:bB},title:{color:Fh,subtitleColor:Fh},style:{"guide-label":{fill:Fh},"guide-title":{fill:Fh}},axis:{domainColor:Fh,gridColor:bB,tickColor:Fh}},uf="#4572a7",n3e={background:"#fff",arc:{fill:uf},area:{fill:uf},line:{stroke:uf,strokeWidth:2},path:{stroke:uf},rect:{fill:uf},shape:{stroke:uf},symbol:{fill:uf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},cf="#30a2da",fR="#cbcbcb",i3e="#999",r3e="#333",wB="#f0f0f0",SB="#333",o3e={arc:{fill:cf},area:{fill:cf},axis:{domainColor:fR,grid:!0,gridColor:fR,gridWidth:1,labelColor:i3e,labelFontSize:10,titleColor:r3e,tickColor:fR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:wB,group:{fill:wB},legend:{labelColor:SB,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:SB,titleFontSize:14,titlePadding:10},line:{stroke:cf,strokeWidth:2},path:{stroke:cf,strokeWidth:.5},rect:{fill:cf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:cf},bar:{binSpacing:2,fill:cf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ff="#000",a3e={group:{fill:"#e5e5e5"},arc:{fill:ff},area:{fill:ff},line:{stroke:ff},path:{stroke:ff},rect:{fill:ff},shape:{stroke:ff},symbol:{fill:ff,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},s3e=22,l3e="normal",CB="Benton Gothic, sans-serif",EB=11.5,u3e="normal",df="#82c6df",dR="Benton Gothic Bold, sans-serif",kB="normal",RB=13,Yg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},c3e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:dR,fontSize:s3e,fontWeight:l3e},arc:{fill:df},area:{fill:df},line:{stroke:df,strokeWidth:2},path:{stroke:df},rect:{fill:df},shape:{stroke:df},symbol:{fill:df,size:30},axis:{labelFont:CB,labelFontSize:EB,labelFontWeight:u3e,titleFont:dR,titleFontSize:RB,titleFontWeight:kB},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:CB,labelFontSize:EB,symbolType:"square",titleFont:dR,titleFontSize:RB,titleFontWeight:kB},range:{category:Yg["category-6"],diverging:Yg["fireandice-6"],heatmap:Yg["fire-7"],ordinal:Yg["fire-7"],ramp:Yg["fire-7"]}},hf="#ab5787",Ux="#979797",f3e={background:"#f9f9f9",arc:{fill:hf},area:{fill:hf},line:{stroke:hf},path:{stroke:hf},rect:{fill:hf},shape:{stroke:hf},symbol:{fill:hf,size:30},axis:{domainColor:Ux,domainWidth:.5,gridWidth:.2,labelColor:Ux,tickColor:Ux,tickWidth:.2,titleColor:Ux},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pf="#3e5c69",d3e={background:"#fff",arc:{fill:pf},area:{fill:pf},line:{stroke:pf},path:{stroke:pf},rect:{fill:pf},shape:{stroke:pf},symbol:{fill:pf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Po="#1696d2",TB="#000000",h3e="#FFFFFF",Wx="Lato",hR="Lato",p3e="Lato",m3e="#DEDDDD",g3e=18,Zg={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},y3e={background:h3e,title:{anchor:"start",fontSize:g3e,font:Wx},axisX:{domain:!0,domainColor:TB,domainWidth:1,grid:!1,labelFontSize:12,labelFont:hR,labelAngle:0,tickColor:TB,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Wx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:m3e,gridWidth:1,labelFontSize:12,labelFont:hR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Wx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:hR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Wx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Zg["six-groups-cat-1"],diverging:Zg["diverging-colors"],heatmap:Zg["diverging-colors"],ordinal:Zg["six-groups-seq"],ramp:Zg["shades-blue"]},area:{fill:Po},rect:{fill:Po},line:{color:Po,stroke:Po,strokeWidth:5},trail:{color:Po,stroke:Po,strokeWidth:0,size:1},path:{stroke:Po,strokeWidth:.5},point:{filled:!0},text:{font:p3e,color:Po,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Po,stroke:null}},arc:{fill:Po},shape:{stroke:Po},symbol:{fill:Po,size:30}},mf="#3366CC",AB="#ccc",Gx="Arial, sans-serif",v3e={arc:{fill:mf},area:{fill:mf},path:{stroke:mf},rect:{fill:mf},shape:{stroke:mf},symbol:{stroke:mf},circle:{fill:mf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Gx,fontSize:12},"guide-title":{font:Gx,fontSize:12},"group-title":{font:Gx,fontSize:12}},title:{font:Gx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:AB,tickColor:AB,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},BD=e=>e*(1/3+1),MB=BD(9),FB=BD(10),PB=BD(12),Xg="Segoe UI",NB="wf_standard-font, helvetica, arial, sans-serif",$B="#252423",Kg="#605E5C",IB="transparent",x3e="#C8C6C4",ha="#118DFF",_3e="#12239E",b3e="#E66C37",w3e="#6B007B",S3e="#E044A7",C3e="#744EC2",E3e="#D9B300",k3e="#D64550",Wte=ha,Gte="#DEEFFF",OB=[Gte,Wte],R3e=[Gte,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Wte],T3e={view:{stroke:IB},background:IB,font:Xg,header:{titleFont:NB,titleFontSize:PB,titleColor:$B,labelFont:Xg,labelFontSize:FB,labelColor:Kg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Kg,labelFontSize:MB,titleFont:NB,titleColor:$B,titleFontSize:PB,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:x3e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ha},line:{stroke:ha,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Xg,fontSize:MB,fill:Kg},arc:{fill:ha},area:{fill:ha,line:!0,opacity:.6},path:{stroke:ha},rect:{fill:ha},point:{fill:ha,filled:!0,size:75},shape:{stroke:ha},symbol:{fill:ha,strokeWidth:1.5,size:50},legend:{titleFont:Xg,titleFontWeight:"bold",titleColor:Kg,labelFont:Xg,labelFontSize:FB,labelColor:Kg,symbolType:"circle",symbolSize:75},range:{category:[ha,_3e,b3e,w3e,S3e,C3e,E3e,k3e],diverging:OB,heatmap:OB,ordinal:R3e}},pR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',DB=400,A3e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],M3e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function OC({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",i=e==="dark"?"#f4f4f4":"#161616",r=e==="dark"?A3e:M3e,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:pR,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:pR,fill:i,fontWeight:DB},"guide-title":{font:pR,fill:i,fontWeight:DB}},range:{category:r,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const F3e=OC({type:"light",background:"#ffffff"}),P3e=OC({type:"light",background:"#f4f4f4"}),N3e=OC({type:"dark",background:"#262626"}),$3e=OC({type:"dark",background:"#161616"}),I3e=e3e.version,O3e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:P3e,carbong100:$3e,carbong90:N3e,carbonwhite:F3e,dark:t3e,excel:n3e,fivethirtyeight:o3e,ggplot2:a3e,googlecharts:v3e,latimes:c3e,powerbi:T3e,quartz:f3e,urbaninstitute:y3e,version:I3e,vox:d3e},Symbol.toStringTag,{value:"Module"}));function D3e(e,t,n,i){if(de(e))return`[${e.map(r=>t(Ie(r)?r:LB(r,n))).join(", ")}]`;if(Oe(e)){let r="";const{title:o,image:a,...s}=e;o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${new URL(t(a),i||location.href).href}">`);const l=Object.keys(s);if(l.length>0){r+="<table>";for(const u of l){let c=s[u];c!==void 0&&(Oe(c)&&(c=LB(c,n)),r+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function L3e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function LB(e,t){return JSON.stringify(e,L3e(t))}var j3e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const qte="vg-tooltip-element",z3e={offsetX:10,offsetY:10,id:qte,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:B3e,maxDepth:2,formatTooltip:D3e,baseURL:""};function B3e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function H3e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return j3e.toString().replace(qte,e)}function U3e(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:r,y:o}}class W3e{constructor(t){this.options={...z3e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=H3e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=U3e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}}var mR={};function G3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gR,jB;function q3e(){return jB||(jB=1,gR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),gR}var V3e=Wt;Wt.Node=Rd;Wt.create=Wt;function Wt(e){var t=this;if(t instanceof Wt||(t=new Wt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}Wt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Wt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Wt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Wt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Z3e(this,arguments[e]);return this.length};Wt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)X3e(this,arguments[e]);return this.length};Wt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Wt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Wt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};Wt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};Wt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Wt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Wt.prototype.map=function(e,t){t=t||this;for(var n=new Wt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};Wt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Wt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};Wt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};Wt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};Wt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Wt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Wt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};Wt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};Wt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(var o=[],i=0;r&&i<t;i++)o.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=Y3e(this,r,n[i]);return o};Wt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function Y3e(e,t,n){var i=t===e.head?new Rd(n,null,t,e):new Rd(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function Z3e(e,t){e.tail=new Rd(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function X3e(e,t){e.head=new Rd(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Rd(e,t,n,i){if(!(this instanceof Rd))return new Rd(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{q3e()(Wt)}catch{}const K3e=V3e,Rf=Symbol("max"),cl=Symbol("length"),Ph=Symbol("lengthCalculator"),ry=Symbol("allowStale"),Of=Symbol("maxAge"),al=Symbol("dispose"),zB=Symbol("noDisposeOnSet"),si=Symbol("lruList"),pa=Symbol("cache"),Vte=Symbol("updateAgeOnGet"),yR=()=>1;class J3e{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Rf]=t.max||1/0;const n=t.length||yR;if(this[Ph]=typeof n!="function"?yR:n,this[ry]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Of]=t.maxAge||0,this[al]=t.dispose,this[zB]=t.noDisposeOnSet||!1,this[Vte]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Rf]=t||1/0,Jg(this)}get max(){return this[Rf]}set allowStale(t){this[ry]=!!t}get allowStale(){return this[ry]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Of]=t,Jg(this)}get maxAge(){return this[Of]}set lengthCalculator(t){typeof t!="function"&&(t=yR),t!==this[Ph]&&(this[Ph]=t,this[cl]=0,this[si].forEach(n=>{n.length=this[Ph](n.value,n.key),this[cl]+=n.length})),Jg(this)}get lengthCalculator(){return this[Ph]}get length(){return this[cl]}get itemCount(){return this[si].length}rforEach(t,n){n=n||this;for(let i=this[si].tail;i!==null;){const r=i.prev;BB(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[si].head;i!==null;){const r=i.next;BB(this,t,i,n),i=r}}keys(){return this[si].toArray().map(t=>t.key)}values(){return this[si].toArray().map(t=>t.value)}reset(){this[al]&&this[si]&&this[si].length&&this[si].forEach(t=>this[al](t.key,t.value)),this[pa]=new Map,this[si]=new K3e,this[cl]=0}dump(){return this[si].map(t=>Vw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[si]}set(t,n,i){if(i=i||this[Of],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,o=this[Ph](n,t);if(this[pa].has(t)){if(o>this[Rf])return wp(this,this[pa].get(t)),!1;const l=this[pa].get(t).value;return this[al]&&(this[zB]||this[al](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[cl]+=o-l.length,l.length=o,this.get(t),Jg(this),!0}const a=new Q3e(t,n,o,r,i);return a.length>this[Rf]?(this[al]&&this[al](t,n),!1):(this[cl]+=a.length,this[si].unshift(a),this[pa].set(t,this[si].head),Jg(this),!0)}has(t){if(!this[pa].has(t))return!1;const n=this[pa].get(t).value;return!Vw(this,n)}get(t){return vR(this,t,!0)}peek(t){return vR(this,t,!1)}pop(){const t=this[si].tail;return t?(wp(this,t),t.value):null}del(t){wp(this,this[pa].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],o=r.e||0;if(o===0)this.set(r.k,r.v);else{const a=o-n;a>0&&this.set(r.k,r.v,a)}}}prune(){this[pa].forEach((t,n)=>vR(this,n,!1))}}const vR=(e,t,n)=>{const i=e[pa].get(t);if(i){const r=i.value;if(Vw(e,r)){if(wp(e,i),!e[ry])return}else n&&(e[Vte]&&(i.value.now=Date.now()),e[si].unshiftNode(i));return r.value}},Vw=(e,t)=>{if(!t||!t.maxAge&&!e[Of])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Of]&&n>e[Of]},Jg=e=>{if(e[cl]>e[Rf])for(let t=e[si].tail;e[cl]>e[Rf]&&t!==null;){const n=t.prev;wp(e,t),t=n}},wp=(e,t)=>{if(t){const n=t.value;e[al]&&e[al](n.key,n.value),e[cl]-=n.length,e[pa].delete(n.key),e[si].removeNode(t)}};class Q3e{constructor(t,n,i,r,o){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=o||0}}const BB=(e,t,n,i)=>{let r=n.value;Vw(e,r)&&(wp(e,n),e[ry]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var e4e=J3e;const t4e=Object.freeze({loose:!0}),n4e=Object.freeze({}),i4e=e=>e?typeof e!="object"?t4e:e:n4e;var HD=i4e,ZM={exports:{}};const r4e="2.0.0",Yte=256,o4e=Number.MAX_SAFE_INTEGER||9007199254740991,a4e=16,s4e=Yte-6,l4e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var UD={MAX_LENGTH:Yte,MAX_SAFE_COMPONENT_LENGTH:a4e,MAX_SAFE_BUILD_LENGTH:s4e,MAX_SAFE_INTEGER:o4e,RELEASE_TYPES:l4e,SEMVER_SPEC_VERSION:r4e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const u4e=typeof process=="object"&&mR&&mR.NODE_DEBUG&&/\bsemver\b/i.test(mR.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var DC=u4e;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=UD,o=DC;t=e.exports={};const a=t.re=[],s=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",r],[d,i]],m=y=>{for(const[x,b]of h)y=y.split(`${x}*`).join(`${x}{0,${b}}`).split(`${x}+`).join(`${x}{1,${b}}`);return y},g=(y,x,b)=>{const w=m(x),S=c++;o(y,S,x),u[y]=S,l[S]=x,a[S]=new RegExp(x,b?"g":void 0),s[S]=new RegExp(w,b?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),g("FULL",`^${l[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),g("LOOSE",`^${l[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),g("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),g("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),g("COERCERTL",l[u.COERCE],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ZM,ZM.exports);var WD=ZM.exports;const HB=/^[0-9]+$/,Zte=(e,t)=>{const n=HB.test(e),i=HB.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},c4e=(e,t)=>Zte(t,e);var f4e={compareIdentifiers:Zte,rcompareIdentifiers:c4e};const qx=DC,{MAX_LENGTH:UB,MAX_SAFE_INTEGER:Vx}=UD,{safeRe:WB,t:GB}=WD,d4e=HD,{compareIdentifiers:Nh}=f4e;let h4e=class as{constructor(t,n){if(n=d4e(n),t instanceof as){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>UB)throw new TypeError(`version is longer than ${UB} characters`);qx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?WB[GB.LOOSE]:WB[GB.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Vx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vx||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const o=+r;if(o>=0&&o<Vx)return o}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(qx("SemVer.compare",this.version,this.options,t),!(t instanceof as)){if(typeof t=="string"&&t===this.version)return 0;t=new as(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof as||(t=new as(t,this.options)),Nh(this.major,t.major)||Nh(this.minor,t.minor)||Nh(this.patch,t.patch)}comparePre(t){if(t instanceof as||(t=new as(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(qx("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Nh(i,r)}while(++n)}compareBuild(t){t instanceof as||(t=new as(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(qx("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Nh(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let o=[n,r];i===!1&&(o=[n]),Nh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var GD=h4e;const qB=GD,p4e=(e,t,n)=>new qB(e,n).compare(new qB(t,n));var Gm=p4e;const m4e=Gm,g4e=(e,t,n)=>m4e(e,t,n)===0;var y4e=g4e;const v4e=Gm,x4e=(e,t,n)=>v4e(e,t,n)!==0;var _4e=x4e;const b4e=Gm,w4e=(e,t,n)=>b4e(e,t,n)>0;var S4e=w4e;const C4e=Gm,E4e=(e,t,n)=>C4e(e,t,n)>=0;var k4e=E4e;const R4e=Gm,T4e=(e,t,n)=>R4e(e,t,n)<0;var A4e=T4e;const M4e=Gm,F4e=(e,t,n)=>M4e(e,t,n)<=0;var P4e=F4e;const N4e=y4e,$4e=_4e,I4e=S4e,O4e=k4e,D4e=A4e,L4e=P4e,j4e=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return N4e(e,n,i);case"!=":return $4e(e,n,i);case">":return I4e(e,n,i);case">=":return O4e(e,n,i);case"<":return D4e(e,n,i);case"<=":return L4e(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var z4e=j4e,xR,VB;function B4e(){if(VB)return xR;VB=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const d=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],h=c.match(d);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new s(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}xR=t;const n=HD,{safeRe:i,t:r}=WD,o=z4e,a=DC,s=GD,l=Xte();return xR}var _R,YB;function Xte(){if(YB)return _R;YB=1;class e{constructor(O,j){if(j=i(j),O instanceof e)return O.loose===!!j.loose&&O.includePrerelease===!!j.includePrerelease?O:new e(O.raw,j);if(O instanceof r)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(K=>!g(K[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&y(K[0])){this.set=[K];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const q=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+O,K=n.get(q);if(K)return K;const W=this.options.loose,J=W?s[l.HYPHENRANGELOOSE]:s[l.HYPHENRANGE];O=O.replace(J,U(this.options.includePrerelease)),o("hyphen replace",O),O=O.replace(s[l.COMPARATORTRIM],u),o("comparator trim",O),O=O.replace(s[l.TILDETRIM],c),o("tilde trim",O),O=O.replace(s[l.CARETTRIM],d),o("caret trim",O);let Q=O.split(" ").map(pe=>b(pe,this.options)).join(" ").split(/\s+/).map(pe=>H(pe,this.options));W&&(Q=Q.filter(pe=>(o("loose invalid filter",pe,this.options),!!pe.match(s[l.COMPARATORLOOSE])))),o("range list",Q);const ae=new Map,ge=Q.map(pe=>new r(pe,this.options));for(const pe of ge){if(g(pe))return[pe];ae.set(pe.value,pe)}ae.size>1&&ae.has("")&&ae.delete("");const ke=[...ae.values()];return n.set(q,ke),ke}intersects(O,j){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(q=>x(q,j)&&O.set.some(K=>x(K,j)&&q.every(W=>K.every(J=>W.intersects(J,j)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new a(O,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(X(this.set[j],O,this.options))return!0;return!1}}_R=e;const t=e4e,n=new t({max:1e3}),i=HD,r=B4e(),o=DC,a=GD,{safeRe:s,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=WD,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=UD,g=B=>B.value==="<0.0.0-0",y=B=>B.value==="",x=(B,O)=>{let j=!0;const q=B.slice();let K=q.pop();for(;j&&q.length;)j=q.every(W=>K.intersects(W,O)),K=q.pop();return j},b=(B,O)=>(o("comp",B,O),B=R(B,O),o("caret",B),B=S(B,O),o("tildes",B),B=T(B,O),o("xrange",B),B=z(B,O),o("stars",B),B),w=B=>!B||B.toLowerCase()==="x"||B==="*",S=(B,O)=>B.trim().split(/\s+/).map(j=>k(j,O)).join(" "),k=(B,O)=>{const j=O.loose?s[l.TILDELOOSE]:s[l.TILDE];return B.replace(j,(q,K,W,J,Q)=>{o("tilde",B,q,K,W,J,Q);let ae;return w(K)?ae="":w(W)?ae=`>=${K}.0.0 <${+K+1}.0.0-0`:w(J)?ae=`>=${K}.${W}.0 <${K}.${+W+1}.0-0`:Q?(o("replaceTilde pr",Q),ae=`>=${K}.${W}.${J}-${Q} <${K}.${+W+1}.0-0`):ae=`>=${K}.${W}.${J} <${K}.${+W+1}.0-0`,o("tilde return",ae),ae})},R=(B,O)=>B.trim().split(/\s+/).map(j=>M(j,O)).join(" "),M=(B,O)=>{o("caret",B,O);const j=O.loose?s[l.CARETLOOSE]:s[l.CARET],q=O.includePrerelease?"-0":"";return B.replace(j,(K,W,J,Q,ae)=>{o("caret",B,K,W,J,Q,ae);let ge;return w(W)?ge="":w(J)?ge=`>=${W}.0.0${q} <${+W+1}.0.0-0`:w(Q)?W==="0"?ge=`>=${W}.${J}.0${q} <${W}.${+J+1}.0-0`:ge=`>=${W}.${J}.0${q} <${+W+1}.0.0-0`:ae?(o("replaceCaret pr",ae),W==="0"?J==="0"?ge=`>=${W}.${J}.${Q}-${ae} <${W}.${J}.${+Q+1}-0`:ge=`>=${W}.${J}.${Q}-${ae} <${W}.${+J+1}.0-0`:ge=`>=${W}.${J}.${Q}-${ae} <${+W+1}.0.0-0`):(o("no pr"),W==="0"?J==="0"?ge=`>=${W}.${J}.${Q}${q} <${W}.${J}.${+Q+1}-0`:ge=`>=${W}.${J}.${Q}${q} <${W}.${+J+1}.0-0`:ge=`>=${W}.${J}.${Q} <${+W+1}.0.0-0`),o("caret return",ge),ge})},T=(B,O)=>(o("replaceXRanges",B,O),B.split(/\s+/).map(j=>N(j,O)).join(" ")),N=(B,O)=>{B=B.trim();const j=O.loose?s[l.XRANGELOOSE]:s[l.XRANGE];return B.replace(j,(q,K,W,J,Q,ae)=>{o("xRange",B,q,K,W,J,Q,ae);const ge=w(W),ke=ge||w(J),pe=ke||w(Q),Se=pe;return K==="="&&Se&&(K=""),ae=O.includePrerelease?"-0":"",ge?K===">"||K==="<"?q="<0.0.0-0":q="*":K&&Se?(ke&&(J=0),Q=0,K===">"?(K=">=",ke?(W=+W+1,J=0,Q=0):(J=+J+1,Q=0)):K==="<="&&(K="<",ke?W=+W+1:J=+J+1),K==="<"&&(ae="-0"),q=`${K+W}.${J}.${Q}${ae}`):ke?q=`>=${W}.0.0${ae} <${+W+1}.0.0-0`:pe&&(q=`>=${W}.${J}.0${ae} <${W}.${+J+1}.0-0`),o("xRange return",q),q})},z=(B,O)=>(o("replaceStars",B,O),B.trim().replace(s[l.STAR],"")),H=(B,O)=>(o("replaceGTE0",B,O),B.trim().replace(s[O.includePrerelease?l.GTE0PRE:l.GTE0],"")),U=B=>(O,j,q,K,W,J,Q,ae,ge,ke,pe,Se,Fe)=>(w(q)?j="":w(K)?j=`>=${q}.0.0${B?"-0":""}`:w(W)?j=`>=${q}.${K}.0${B?"-0":""}`:J?j=`>=${j}`:j=`>=${j}${B?"-0":""}`,w(ge)?ae="":w(ke)?ae=`<${+ge+1}.0.0-0`:w(pe)?ae=`<${ge}.${+ke+1}.0-0`:Se?ae=`<=${ge}.${ke}.${pe}-${Se}`:B?ae=`<${ge}.${ke}.${+pe+1}-0`:ae=`<=${ae}`,`${j} ${ae}`.trim()),X=(B,O,j)=>{for(let q=0;q<B.length;q++)if(!B[q].test(O))return!1;if(O.prerelease.length&&!j.includePrerelease){for(let q=0;q<B.length;q++)if(o(B[q].semver),B[q].semver!==r.ANY&&B[q].semver.prerelease.length>0){const K=B[q].semver;if(K.major===O.major&&K.minor===O.minor&&K.patch===O.patch)return!0}return!1}return!0};return _R}const H4e=Xte(),U4e=(e,t,n)=>{try{t=new H4e(t,n)}catch{return!1}return t.test(e)};var W4e=U4e,Kte=G3e(W4e);function G4e(e,t,n){const i=e.open(t),r=1e4,o=250,{origin:a}=new URL(t);let s=~~(r/o);function l(c){c.source===i&&(s=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){s<=0||(i.postMessage(n,a),setTimeout(u,o),s-=1)}setTimeout(u,o)}var q4e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Jte(e,...t){for(const n of t)V4e(e,n);return e}function V4e(e,t){for(const n of Object.keys(t))Sm(e,n,t[n],!0)}const ga=PMe;let uv=I5e;const Yx=typeof window<"u"?window:void 0;var y8;uv===void 0&&((y8=Yx==null?void 0:Yx.vl)!=null&&y8.compile)&&(uv=Yx.vl);const Y4e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Z4e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},M0={vega:"Vega","vega-lite":"Vega-Lite"},Yw={vega:ga.version,"vega-lite":uv?uv.version:"not available"},X4e={vega:e=>e,"vega-lite":(e,t)=>uv.compile(e,{config:t}).spec},K4e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,J4e="chart-wrapper";function Q4e(e){return typeof e=="function"}function ZB(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(r+e+o),a.document.title=`${M0[i]} JSON Source`}function eje(e,t){if(e.$schema){const n=Ute(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${M0[n.library]}, but mode argument sets ${M0[t]??t}.`);const i=n.library;return Kte(Yw[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${M0[i]} ${n.version}, but the current version of ${M0[i]} is v${Yw[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Qte(e){return!!(e&&"load"in e)}function XB(e){return Qte(e)?e:ga.loader(e)}function tje(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Ie(t.defaultStyle)&&(t.defaultStyle=!1),t}async function nje(e,t,n={}){let i,r;Ie(t)?(r=XB(n.loader),i=JSON.parse(await r.load(t))):i=t;const o=tje(i),a=o.loader;(!r||a)&&(r=XB(n.loader??a));const s=await KB(o,r),l=await KB(n,r),u={...Jte(l,s),config:wm(l.config??{},s.config??{})};return await rje(e,i,u,r)}async function KB(e,t){const n=Ie(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Ie(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function ije(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function rje(e,t,n={},i){const r=n.theme?wm(O3e[n.theme],n.config??{}):n.config,o=Nc(n.actions)?n.actions:Jte({},Y4e,n.actions??{}),a={...Z4e,...n.i18n},s=n.renderer??"canvas",l=n.logLevel??ga.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const R="vega-embed-style",{root:M,rootContainer:T}=ije(c);if(!M.getElementById(R)){const N=document.createElement("style");N.id=R,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?q4e.toString():n.defaultStyle,T.appendChild(N)}}const d=eje(t,n.mode);let h=X4e[d](t,r);if(d==="vega-lite"&&h.$schema){const R=Ute(h.$schema);Kte(Yw.vega,`^${R.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${R.version}, but current version is v${Yw.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let m=c;if(o){const R=document.createElement("div");R.classList.add(J4e),c.appendChild(R),m=R}const g=n.patch;if(g&&(h=g instanceof Function?g(h):F2(h,g,!0,!1).newDocument),n.formatLocale&&ga.formatLocale(n.formatLocale),n.timeFormatLocale&&ga.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const R in n.expressionFunctions){const M=n.expressionFunctions[R];"fn"in M?ga.expressionFunction(R,M.fn,M.visitor):M instanceof Function&&ga.expressionFunction(R,M)}const{ast:y}=n,x=ga.parse(h,d==="vega-lite"?{}:r,{ast:y}),b=new(n.viewClass||ga.View)(x,{loader:i,logLevel:l,renderer:s,...y?{expr:ga.expressionInterpreter??n.expr??HMe}:{}});if(b.addSignalListener("autosize",(R,M)=>{const{type:T}=M;T=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):T=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):T=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:R,tooltip:M}=n,T=R&&!Qte(R)?R==null?void 0:R.baseURL:void 0,N=Q4e(M)?M:new W3e({baseURL:T,...M===!0?{}:M}).call;b.tooltip(N)}let{hover:w}=n;if(w===void 0&&(w=d==="vega"),w){const{hoverSet:R,updateSet:M}=typeof w=="boolean"?{}:w;b.hover(R,M)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(m,n.bind).runAsync();let S;if(o!==!1){let R=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=a.CLICK_TO_VIEW_ACTIONS,c.append(T),R=T;const N=document.createElement("summary");N.innerHTML=K4e,T.append(N),S=z=>{T.contains(z.target)||T.removeAttribute("open")},document.addEventListener("click",S)}const M=document.createElement("div");if(R.append(M),M.classList.add("vega-actions"),o===!0||o.export!==!1){for(const T of["svg","png"])if(o===!0||o.export===!0||o.export[T]){const N=a[`${T.toUpperCase()}_ACTION`],z=document.createElement("a"),H=Oe(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;z.text=N,z.href="#",z.target="_blank",z.download=`${u}.${T}`,z.addEventListener("mousedown",async function(U){U.preventDefault();const X=await b.toImageURL(T,H);this.href=X}),M.append(z)}}if(o===!0||o.source!==!1){const T=document.createElement("a");T.text=a.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(N){ZB(YE(t),n.sourceHeader??"",n.sourceFooter??"",d),N.preventDefault()}),M.append(T)}if(d==="vega-lite"&&(o===!0||o.compiled!==!1)){const T=document.createElement("a");T.text=a.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(N){ZB(YE(h),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),M.append(T)}if(o===!0||o.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=a.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(z){G4e(window,T,{config:r,mode:d,renderer:s,spec:YE(t)}),z.preventDefault()}),M.append(N)}}function k(){S&&document.removeEventListener("click",S),b.finalize()}return{view:b,spec:t,vgSpec:h,finalize:k,embedOptions:n}}function oje(e){return!!e&&{}.toString.call(e)==="[object Function]"}function aje(e,t,n){n&&(oje(n)?n(e.data(t)):e.change(t,ga.changeset().remove(()=>!0).insert(n)))}function sje(e,t){Object.keys(t).forEach(n=>{aje(e,n,t[n])})}function ene(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(i=>{t.add(i)})}),t}const tne=()=>{};function bR(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}var lje=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){var a=o[r];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const uje=Td(lje);function cje(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i=ene([e,t]);return i.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),i.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(r=>!(r in e)||!(r in t)||!uje(e[r],t[r]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function JB(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function wR(e){const{spec:t,width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function F0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nne extends $t.PureComponent{constructor(){super(...arguments),F0(this,"containerRef",$t.createRef()),F0(this,"resultPromise",void 0),F0(this,"handleError",t=>{const{onError:n=tne}=this.props;n(t,this.containerRef.current),console.warn(t)}),F0(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=ene([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(i=>this.props[i]!==t[i]))this.clearView(),this.createView();else{const i=cje(wR(this.props),wR(t)),{signalListeners:r}=this.props,{signalListeners:o}=t;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const a=!DT(r,o);this.modifyView(s=>{i.width!==!1&&s.width(i.width),i.height!==!1&&s.height(i.height),a&&(o&&JB(s,o),r&&bR(s,r)),s.run()})}else DT(r,o)||this.modifyView(a=>{o&&JB(a,o),r&&bR(a,r),a.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:i={},width:r,height:o,...a}=this.props;if(this.containerRef.current){const s=wR(this.props);this.resultPromise=nje(this.containerRef.current,s,a).then(l=>{if(l){const{view:u}=l;bR(u,i)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return $t.createElement("div",{ref:this.containerRef,className:t,style:n})}}F0(nne,"propTypes",{className:_n.string,onError:_n.func});function XM(){return XM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},XM.apply(this,arguments)}function KM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const fje={};class qD extends $t.PureComponent{constructor(){super(...arguments),KM(this,"vegaEmbed",$t.createRef()),KM(this,"handleNewView",t=>{this.update();const{onNewView:n=tne}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){DT(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{sje(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return $t.createElement(nne,XM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}KM(qD,"defaultProps",{data:fje});var ine={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},QB=$t.createContext&&$t.createContext(ine),dje=["attr","size","title"];function hje(e,t){if(e==null)return{};var n=pje(e,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function pje(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zw.apply(this,arguments)}function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Xw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(n),!0).forEach(function(i){mje(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function mje(e,t,n){return t=gje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gje(e){var t=yje(e,"string");return typeof t=="symbol"?t:String(t)}function yje(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rne(e){return e&&e.map((t,n)=>$t.createElement(t.tag,Xw({key:n},t.attr),rne(t.child)))}function Xd(e){return t=>$t.createElement(vje,Zw({attr:Xw({},e.attr)},t),rne(e.child))}function vje(e){var t=n=>{var{attr:i,size:r,title:o}=e,a=hje(e,dje),s=r||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),$t.createElement("svg",Zw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:l,style:Xw(Xw({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&$t.createElement("title",null,o),e.children)};return QB!==void 0?$t.createElement(QB.Consumer,null,n=>t(n)):t(ine)}function xje(e){return Xd({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function _je(e){return Xd({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function bje(e){return Xd({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function wje(e){return Xd({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"},child:[]}]})(e)}function Sje(e){return Xd({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(e)}const Cje={0:"#E90051",1:"#ED2641",2:"#F24C31",3:"#F67120",4:"#FB9710",5:"#FFBD00",6:"#F5C029",7:"#ECC352",8:"#E2C67A",9:"#D9C9A3",10:"#CFCCCC",11:"#AAC2C6",12:"#86B9BF",13:"#61AFB9",14:"#3DA6B2",15:"#189CAC",16:"#2B8BAC",17:"#3E7AAC",18:"#5068AD",19:"#6357AD"},Eje={0:"#73B2FF",1:"#738FE5",2:"#746DCB",3:"#754BB1",4:"#5D5CAC",5:"#3F77AC",6:"#2192AC",7:"#48B0AF",8:"#91D0B5",9:"#DAEFBB",10:"#FFF4A0",11:"#FFDF64",12:"#FFCA28",13:"#FCA908",14:"#F56D22",15:"#EE313B",16:"#EA0956",17:"#F14178",18:"#F87A99",19:"#FFB3BB"},kje={0:"#FFB3BB",1:"#F87A99",2:"#F14178",3:"#EA0956",4:"#EE313B",5:"#F56D22",6:"#FCA908",7:"#FFCA28",8:"#FFDF64",9:"#FFF4A0",10:"#DAEFBB",11:"#91D0B5",12:"#48B0AF",13:"#2192AC",14:"#3F77AC",15:"#5D5CAC",16:"#754BB1",17:"#746DCB",18:"#738FE5",19:"#73B2FF"},Rje={ciff_divergent:Cje,CIFF20:Eje,CIFF20_r:kje};function Tje(e){return[].map.call(e,(t,n)=>[t,n]).reduce((t,n)=>n[0]<t[0]?n:t)[1]}function Dh(e,t=3){return e?parseFloat(e).toFixed(t):"-"}function one(e,t,n){if(e===null||e<-90)return"#D3D3D3";{e=(e-t[0])/(t[1]-t[0]);const i=Rje[n],r=Math.min(Math.max(0,parseInt(19*e)),19),o=String(r);return i[o]}}function Aje({name:e,items:t,defaultOpt:n,value:i,pass:r,noDefault:o,extras:a}){i===void 0&&(i=n);function s(l){r(l.target.value),a&&a()}return v.jsx("div",{children:v.jsxs(Nr.Select,{id:"select"+e,value:i,onChange:s,children:[o?"":v.jsx("option",{value:""}),t.map((l,u)=>{const c=l.replaceAll(" ","");return v.jsx("option",{value:c,children:l},u)})]},"select"+e)})}function t8(){return v.jsx(v.Fragment,{})}function Mje(e){return Xd({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"},child:[]}]})(e)}function Fje(e){return Xd({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"},child:[]}]})(e)}const Pje="/ciff_portal/assets/exceedance-Rf9d3zmr.png",Nje=v.jsxs("div",{children:[v.jsx("b",{children:"For indicators where an increase in the value means improvement over time"}),v.jsxs("p",{children:["An area presenting the smallest increase (or a decrease in value) over time of the selected indicator is classified as being ",v.jsx("i",{children:"the least performing"}),". An area presenting the highest increase over time of the selected indicator is classified as being ",v.jsx("i",{children:"the highest performing"}),"."]}),v.jsx("b",{children:"For indicators where a decrease in the value means improvement over time"}),v.jsxs("p",{children:["An area presenting the highest decrease over time of the selected indicator is classified as being ",v.jsx("i",{children:"the highest performing"}),". An area presenting the smallest decrease over time of the selected indicator (or an increase in value) is classified as being ",v.jsx("i",{children:"the least performing"}),"."]})]}),$je=v.jsx("div",{children:v.jsxs("blockquote",{children:["Irrespective of the direction of each indicator, the legend displays a better condition (improvement over time when looking at time change) in blue, and a worse condition (worsening over time when looking at time change) in red. For example,",v.jsxs("ul",{children:[v.jsx("li",{children:" increasing value meaning better condition like % of contraceptive prevalence "}),v.jsx("li",{children:" increasing value meaning worse condition like % of low birth weight "})]})]})}),Ije=v.jsxs("div",{children:[v.jsx("p",{children:'The values shown on the map are our "best guess" given the data and modelling but as with any statistics there are a range of plausible values.'}),v.jsx("p",{children:"The user can choose the probability that there is meaningful improvement or worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),v.jsx(ane,{}),v.jsx("b",{children:"Technical:"}),v.jsxs("p",{children:["The ",v.jsx("i",{children:"exceedance probability"})," is the probability, given the observed data, that the true change in a district is negative for improvement or positive for worsening."]}),v.jsx("p",{children:"We use that to filter which districts to show on the map. Districts where the exceedance probability is less than the selected limit will be filtered out."}),v.jsx("hr",{})]}),Oje=v.jsxs("div",{children:[v.jsx("p",{children:'The values shown on the map are our "best guess" given the data and modelling but as with any statistics there are a range of plausible values.'}),v.jsx("p",{children:"The user can choose the probability that there is meaningful improvement or worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),v.jsx(ane,{}),v.jsx("b",{children:"Technical:"}),v.jsxs("p",{children:["The ",v.jsx("i",{children:"exceedance probability"})," is the probability, given the observed data, that the true change in a district is positive for improvement or negative for worsening."]}),v.jsx("p",{children:"We use that to filter which districts to show on the map. Districts where the exceedance probability is less than the selected limit will be filtered out."}),v.jsx("hr",{})]}),Dje=v.jsxs("div",{children:[v.jsx("p",{children:"While the surveys were designed to be representative at the district level, caution is advised in interpreting and utilizing the findings due to the inherent limitations posed by small sample sizes for the mentioned indicators. Furthermore, it is important to note that the indicators discussed herein are rare events, further emphasizing the need for careful consideration and caution in their interpretation, given the limited sample sizes at the district level."}),v.jsxs("p",{children:["See ",v.jsx("a",{href:"#tech-note-1",target:"_blank",children:"Technical Note 1"})," from round 1 (NFHS-4) to round 2 (NFHS-5) and national official boundaries to enable over time comparisons."]})]}),Lje=v.jsxs("div",{children:["Since census boundaries aligned with NFHS-4 boundaries, the same two-step approached as described in the ",v.jsx("a",{href:"#tech-note-1",children:"Technical Note 1"})," was applied."]});function ane(){const[e,t]=P.useState(!1);function n(){t(!0)}function i(){t(!1)}return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx(Fse,{variant:"danger",size:"sm",onClick:n,children:"Illustration"}),v.jsxs(cp,{show:e,onHide:i,size:"lg",children:[v.jsx(cp.Header,{closeButton:!0,children:v.jsx("h4",{children:"Illustration"})}),v.jsxs(cp.Body,{children:[v.jsxs("p",{children:["How ",v.jsx("b",{children:"certain"})," are we with the changes? ",v.jsx("br",{}),"Example: Change defined as ANC4 (R2) - ANC4 (R1) for Kwale, Kenya."]}),v.jsx("img",{alt:"exceedance",src:Pje,width:"100%"}),v.jsxs("p",{className:"mt-3",children:["We have varying levels of certainty regarding improvements in different sub-counties. As we move from panels (a) to (c), we see fewer colored sub-counties showing meaningful improvements. For example, without filtering (panel a), we observe ANC4 coverage improvements in ",v.jsx("i",{children:"Msambweni"})," (circled in ",v.jsx("mark",{style:{color:"red"},children:"red"}),") and ",v.jsx("i",{children:"Lunga Lunga"})," (circled in ",v.jsx("mark",{style:{color:"orange"},children:"orange"}),"). However, with a 95% certainty filter (panel b), we cannot be highly certain that there is an improvement in ",v.jsx("i",{children:"Msambweni"}),", and with a 99% certainty filter (panel c), we cannot be almost certain that there is an improvement in ",v.jsx("i",{children:"Lunga Lunga"}),". Further detail can be found in the Technical Note 2."]})]})]})]})}function jje({content:e}){const t=v.jsx(fp,{children:v.jsx(fp.Body,{children:v.jsx("div",{dangerouslySetInnerHTML:{__html:e}})})});return v.jsx(eW,{trigger:"click",placement:"bottom-start",overlay:t,children:v.jsx("span",{className:"mx-1",title:"Click for more",children:v.jsx(Mje,{})})})}function VD({about:e,positive:t=!0,placement:n="auto-start"}){const i={"How to read table":Nje,"About this color bar":$je,"NNote on the change certainty":Ije,"Note on the change certainty":Oje,"Note on changing boundaries":Dje,"Note on census boundaries":Lje},r=t?i[e]:i["N"+e],o=v.jsxs(fp,{children:[v.jsx(fp.Header,{children:e}),v.jsx(fp.Body,{children:r})]});return v.jsx(eW,{trigger:"click",placement:n,overlay:o,children:v.jsx("span",{className:"mx-1",title:e,children:v.jsx(Fje,{})})})}const Kw={burkinafaso:{Name:"Burkina Faso",TLC:"BFA",Prefix:"BFA",Adm1:"Region",Adm2:"Province",Center:[12.7,-1.8],Zoom:[6],DistrictOnly:[],StateOnly:[""],NoR1:[],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"}}},india:{Name:"India",TLC:"IND",Prefix:"",N1:36,N2:742,Adm1:"State",Adm2:"District",Center:[22.9,79.6],Zoom:[4],DistrictOnly:["NMR","Unsafe_Ab","CHMR","Lab_child","Stillbirth"],StateOnly:[""],NoR1:[],NoR2:["Lab_child"],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"Child age in India is between 5-14. For child worker, census estimates were used to calculate the indicator, and only had one point in time.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"}}},kenya:{Name:"Kenya",TLC:"KEN",Prefix:"KEN_",N1:47,N2:335,Adm1:"County",Adm2:"Sub-county",Center:[.6,37.5],Zoom:[6],DistrictOnly:["LBW","Stillbirth","Lab_child","Breastfeed"],StateOnly:["LBW","Stillbirth","Lab_child","Breastfeed"],NoR1:["Lab_child","NTDs_helm","NTDs_schi"],NoR2:["NAR_prim","NAR_sec"],indicators:{Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-20,CHMax:56,CHDelta:4,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:84,CHDelta:6,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-24,CHMax:40,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:51,Delta:3,CHMin:-6,CHMax:30,CHDelta:2,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:15,Max:90,Delta:5,CHMin:-35,CHMax:60,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-90,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-90,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NTDs_fil:{Indicator:"NTDs: Lymphatic filariasis",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see <a href='#/technote-3'>Technical Note 3</a> for more information.",Min:0,Max:5,Delta:.2,CHMin:-1,CHMax:2,CHDelta:.2,Precision:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2018"},NTDs_oncho:{Indicator:"NTDs: Onchocerciasis",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see <a href='#/technote-3'>Technical Note 3</a> for more information.",Min:0,Max:3,Delta:.2,CHMin:-.5,CHMax:.01,CHDelta:.1,Precision:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2018"},NTDs_helm:{Indicator:"NTDs: Soil-transmitted helminth infections",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the WHO-ESPEN programme. Please see <a href='#/technote-4'>Technical Note 4</a> for more information.",Min:0,Max:50,Delta:.02,CHMin:-20,CHMax:20,CHDelta:.02,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"",R2:"WHO-ESPEN",Y1:"",Y2:"2010-2014"},NTDs_schi:{Indicator:"NTDs: Schistosomiasis",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the WHO-ESPEN programme. Please see <a href='#/technote-4'>Technical Note 4</a> for more information.",Min:0,Max:20,Delta:.01,CHMin:-10,CHMax:10,CHDelta:.002,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"",R2:"WHO-ESPEN",Y1:"",Y2:"2010-2018"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:15,Max:80,Delta:5,CHMin:-60,CHMax:30,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:72,Delta:4,CHMin:-45,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:76,Delta:4,CHMin:-27,CHMax:18,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wasting:{Indicator:"Prevalence of wasting",Theme:"Nutrition",Remark:"",Min:0,Max:64,Delta:4,CHMin:-16,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:40,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"",Y1:"2014",Y2:""},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:0,Max:72,Delta:4,CHMin:-60,CHMax:40,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"",Y1:"2014",Y2:""},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:0,Max:100,Delta:5,CHMin:-64,CHMax:64,CHDelta:8,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:76,Delta:4,CHMin:-25,CHMax:50,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"Child age in Kenya is between 5-17. For child worker, census estimates were used to calculate the indicator, and one point in time only was available.",Min:0,Max:40,Delta:.05,CHMin:-20,CHMax:20,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"",R2:"Census",Y1:null,Y2:"2019"},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, estimates were produced only at the county level. All sub-counties within each county were assigned the same value as their respective county.",Min:0,Max:80,Delta:2,CHMin:-60,CHMax:60,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"County",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see Technical Note 3 for more information.",Min:10,Max:40,Delta:2.5,CHMin:-3,CHMax:0,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2017"},U5:{Indicator:"Under five mortality rate",Theme:"Child Health",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see Technical Note 3 for more information.",Min:20,Max:100,Delta:1,CHMin:-10,CHMax:-2,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2017"},LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"For this indicator, estimates were produced only at the county level. All sub-counties within each county were assigned the same value as their respective county.",Min:0,Max:30,Delta:2.5,CHMin:-15,CHMax:15,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"}}},nigeria:{Name:"Nigeria",TLC:"NGA",Prefix:"NGA",Adm1:"State",Adm2:"Local Government Area",Center:[9.5,8],Zoom:[6],DistrictOnly:[],StateOnly:[""],NoR1:[],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NAR_prim:{Indicator:"Net primary school attendace",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"}}}},rc={LBW:{Indicator:"Low birth weight",Theme:"Child health",Definition:"Percentage (%) of live births in the 5 years preceding the survey weighed at birth reported as less than 2.5 kg",Unit:"per cent",Denominator:"live births in the five (or three) years preceding the survey with a reported birth weight",Statement:"of live births weighed less than 2.5 kg at birth",Proportional:!1},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Definition:"Percentage (%) of children aged 6 to 23 months who had at least minimum meal frequency and minimum diversified diet during the previous day",Unit:"per cent",Denominator:"children aged 6 to 23 months",Statement:"of children aged 6 to 23 months had at least minimum meal frequency and minimum diversified diet during the previous day",Proportional:!0},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Definition:"Percentage (%) of children wasted (below -3 SD of weight for height according to the WHOs standard)",Unit:"per cent",Denominator:"children under age five",Statement:"of children under age five were wasted",Proportional:!1},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Definition:"Percentage (%) of women 15 to 19 years old who had given birth or were pregnant with their first child over the full sample of women aged 15 to 49",Unit:"per cent",Denominator:"women aged 15 to 49",Statement:"of women aged 15 to 19 years old (over the full sample of women aged 15 to 49) had given birth or were pregnant with their first child",Proportional:!1},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Definition:"Percentage (%) of births that were either wanted earlier or later than occurred (mistimed) or not wanted at all",Unit:"per cent",Denominator:"",Statement:"of births were either wanted earlier or later than occurred (mistimed) or not wanted at all",Proportional:!1},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Definition:"Percentage of women age 15 to 49 with mild, moderate or severe anaemia or with any anaemia",Unit:"per cent",Denominator:"women interviewed (check with DHS if it's all women 15 ot 49 or a subsample of women who were asked about anaemia",Statement:"of women age 15 to 49 had mild, moderate or severe anaemia",Proportional:!1},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a birth in the last 5 years, who had at least 4 antenatal care visits for most recent birth",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey",Statement:"of women with a birth in the last 5 years had at least 4 antenatal care visits for most recent birth",Proportional:!0},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a live birth in the five years preceding the survey who received antenatal care (ANC) for the most recent birth with blood sample taken.",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey and received ANC",Statement:"of women with a live birth in the last five years received antenatal care (ANC) for the most recent birth with blood sample taken",Proportional:!0},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Definition:"Among women who received antenatal care for their most recent live birth in the past 5 years, the percentage (%) that received supplements (IFA, MMS).",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey",Statement:"of women received antenatal care and supplements (IFA, MMS) for their most recent live birth in the past 5 years",Proportional:!0},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Definition:"Percentage (%) of women who had a live birth in the five years preceding the survey whose first antenatal care visit was at less than 4 months ",Unit:"per cent",Denominator:"",Statement:"of women had the first antenatal care visit at less than 4 months during their pregnancies",Proportional:!0},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a live birth in the five years preceding the survey who received antenatal care (ANC) for the most recent birth with urine sample taken.",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey and received ANC",Statement:"of women with a live birth in the last five years received antenatal care (ANC) for the most recent birth with urine sample taken",Proportional:!0},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Definition:"Percentage (%) of youngest children under 6 months who were living with their mother who were exclusively breastfed under 6 months of age",Unit:"per cent",Denominator:"children under age 6 months",Statement:"of youngest children under 6 months who were living with their mother who were exclusively breastfed under 6 months of age",Proportional:!0},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Definition:"Percentage (%) of currently married or in union women currently using any modern method of contraception",Unit:"per cent",Denominator:"all women",Statement:"of married or in union women currently use any modern method of contraception",Proportional:!0},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Definition:"Percentage (%) of women aged 20 to 24 years who were married or in a union before age 18. ",Unit:"per cent",Denominator:"women aged 15 to 49",Statement:"of women aged 20 to 24 years were married or in union before age 18",Proportional:!1},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Definition:"Percentage (%) of currently married or in union women employed in the 12 months preceding the survey. The indicator includes those who worked in the past year, those who were currently working and those who have a job but were on leave over the last 7 days.",Unit:"per cent",Denominator:"women currently in a union",Statement:"of currently married or in union women were employed",Proportional:!0},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Definition:"Percentage (%) of children of official primary school-age who were enrolled in primary education",Unit:"per cent",Denominator:"de facto household population of primary school age (this varies by Country)",Statement:"of children of official primary school age were enrolled in primary education",Proportional:!0},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Definition:"Percentage (%) of children of official secondary school-age who were enrolled in secondary education",Unit:"per cent",Denominator:"de facto household population of secondary school age (this varies by Country)",Statement:"Percentage (%) of children of official secondary school-age who were enrolled in secondary education",Proportional:!0},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Definition:"Percentage (%) of children under age five years stunted (below  to 2SD of height-for-age according to the World Health Organisations (WHO) standard).",Unit:"per cent",Denominator:"children under age five",Statement:"of children under age five years were stunted",Proportional:!1},Wasting:{Indicator:"Prevalence of wasting",Theme:"Nutrition",Definition:"Percentage (%) of children wasted (below  to 2SD of weight-for-height according to the World Health Organisations (WHO) standard).",Unit:"per cent",Denominator:"children",Statement:"of children were wasted",Proportional:!1},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Definition:"Percentage (%) of the population with access to improved toilet facilities (Improved sanitation facilities include flush toilet, pit latrine (with at least a slab) or a composting toilet)",Unit:"per cent",Denominator:"household level",Statement:"of the population had access to improved toilet facilities",Proportional:!0},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Definition:"Percentage (%) of the population with access to improved drinking water (Improved sources of drinking water include water piped into dwelling or yard/plot, to a neighbour, access to a public tap/standpipe, tube well or borehole, protected well, protected spring, rainwater, tanker truck, cart with small tank and bottled water)",Unit:"per cent",Denominator:"household level",Statement:"of the population had access to improved drinking water",Proportional:!0},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Definition:"Probability (expressed per 1,000 live births) of a child dying before reaching the age of 1 month over a 5-year reference period",Unit:"per 1,000 live births",Denominator:"admin unit level",Statement:"were dying before reaching the age of 1 month over a 5-year reference period",Proportional:!1},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Definition:"Percentage (%) of pregnancies terminated either by persons lacking the necessary skills or in an environment that does not conform to minimal medical standards or both ",Unit:"per cent",Denominator:"",Statement:"of pregnancies  were terminated either by persons lacking the necessary skills or in an environment that does not conform to minimal medical standards",Proportional:!1},U5:{Indicator:"Under five mortality rate",Theme:"Child Health",Definition:"Probability of death amongst children aged under 5 years",Unit:"per 1,000 live briths",Denominator:"admin unit level",Statement:"were dead before reaching the age of five years",Proportional:!1},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Definition:"Probability (expressedper 1,000 children surviving their first birthday) of a child dying on or after their first birthday but before reaching the age of five years over a 5-year reference period.",Unit:"per 1,000 children surviving to their first birthday",Denominator:"admin unit level",Statement:"were dying on or after their first birthday but before reaching the age of five years",Proportional:!1},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Definition:"Percentage (%) of children engaged in any form of work (both marginal and full-time) that may compromise their physical, mental, social or educational development. The official definition of child age may vary between countries.",Unit:"per cent",Denominator:"",Statement:"of children engaged in any form of work that may compromise their physical, mental, social or educational development",Proportional:!1},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Definition:"Number of pregnancies that lasted seven or more months and terminated in a foetal death in the five years preceding the survey per 1,000 births (stillbirths plus the number of live births in the five years preceding the survey)",Unit:"per 1,000 births",Denominator:"admin unit level",Statement:"were associated with pregnancies that lasted seven or more months and terminated in a foetal death",Proportional:!1},NTDs_helm:{Indicator:"NTDs: Soil-transmitted helminth infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of soil-transmitted helminth infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got soil-transmitted helminth infection",Proportional:!1},NTDs_schi:{Indicator:"NTDs: Schistosomiasis",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of schistosomiasis infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got schistosomiasis infection",Proportional:!1},NTDs_fil:{Indicator:"NTDs: Lymphatic filariasis infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of lymphatic filariasis infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got lymphatic filariasis infection",Proportional:!1},NTDs_oncho:{Indicator:"NTDs: Onchocerciasis infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of onchocerciasis infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got onchocerciasis infection",Proportional:!1}},n8=()=>({weight:1,opacity:.5,color:"black",fillOpacity:0}),zje=()=>({weight:3,opacity:1,color:"black",fillOpacity:0}),Bje=()=>({weight:.8,opacity:1,color:"#000000",fillOpacity:0}),i8={ciff_divergent:{0:"#E90051",1:"#ED2641",2:"#F24C31",3:"#F67120",4:"#FB9710",5:"#FFBD00",6:"#F5C029",7:"#ECC352",8:"#E2C67A",9:"#D9C9A3",10:"#CFCCCC",11:"#AAC2C6",12:"#86B9BF",13:"#61AFB9",14:"#3DA6B2",15:"#189CAC",16:"#2B8BAC",17:"#3E7AAC",18:"#5068AD",19:"#6357AD"},CIFF20:{0:"#73B2FF",1:"#738FE5",2:"#746DCB",3:"#754BB1",4:"#5D5CAC",5:"#3F77AC",6:"#2192AC",7:"#48B0AF",8:"#91D0B5",9:"#DAEFBB",10:"#FFF4A0",11:"#FFDF64",12:"#FFCA28",13:"#FCA908",14:"#F56D22",15:"#EE313B",16:"#EA0956",17:"#F14178",18:"#F87A99",19:"#FFB3BB"},CIFF20_r:{0:"#FFB3BB",1:"#F87A99",2:"#F14178",3:"#EA0956",4:"#EE313B",5:"#F56D22",6:"#FCA908",7:"#FFCA28",8:"#FFDF64",9:"#FFF4A0",10:"#DAEFBB",11:"#91D0B5",12:"#48B0AF",13:"#2192AC",14:"#3F77AC",15:"#5D5CAC",16:"#754BB1",17:"#746DCB",18:"#738FE5",19:"#73B2FF"}};let sne=[];Object.keys(rc).forEach(e=>{rc[e].Proportional&&sne.push(e)});const JM=sne,Qg={"Show Improvement":{posA:{label:"any (>0%)",limit:0},posB:{label:"highly likely (>95%)",limit:95},posC:{label:"almost certain (>99%)",limit:99}},"Show Worsening":{negA:{label:"any (>0%)",limit:0},negB:{label:"highly likely (>95%)",limit:95},negC:{label:"almost certain (>99%)",limit:99}}},Hje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,title:{text:"An increase in the indicator below means improvement",anchor:"start"},data:[{name:"input_data",values:[]},{name:"data_0",source:"input_data",transform:[{type:"filter",expr:"(datum.Proportional === true)"},{type:"filter",expr:'isValid(datum["Mean"]) && isFinite(+datum["Mean"])'}]},{name:"row_domain",source:"data_0",transform:[{type:"aggregate",groupby:["Indicator"]}]}],signals:[{name:"child_width",value:200},{name:"child_height",value:15}],layout:{padding:{row:2,column:20},columns:1,bounds:"full",align:"all"},marks:[{name:"row_header",type:"group",role:"row-header",from:{data:"row_domain"},sort:{field:'datum["Indicator"]',order:"ascending"},title:{text:{signal:'isValid(parent["Indicator"]) ? parent["Indicator"] : ""+parent["Indicator"]'},orient:"left",style:"guide-label",frame:"group",baseline:"middle",align:"left",anchor:"middle",angle:0,offset:10},encode:{update:{height:{signal:"child_height"}}},axes:[{scale:"y",orient:"left",grid:!1,labels:!1,zindex:0}]},{name:"column_footer",type:"group",role:"column-footer",encode:{update:{width:{signal:"child_width"}}},axes:[{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(child_width/40)"},zindex:0}]},{name:"cell",type:"group",style:"cell",from:{facet:{name:"facet",data:"data_0",groupby:["Indicator"]}},sort:{field:['datum["Indicator"]'],order:["ascending"]},encode:{update:{width:{signal:"child_width"},height:{signal:"child_height"}}},marks:[{name:"child_marks",type:"rect",style:["bar"],from:{data:"facet"},encode:{update:{fill:{scale:"color",field:"Round"},tooltip:{signal:'{"Round": isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"], "Mean": format(datum["Mean"], ".1f"), "Std": format(datum["Std"], ".1f")}'},ariaRoleDescription:{value:"bar"},description:{signal:'"Round: " + (isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"]) + "; Mean: " + (format(datum["Mean"], ".1f")) + "; Std: " + (format(datum["Std"], ".1f"))'},x:[{test:'!isValid(datum["Mean"]) || !isFinite(+datum["Mean"])',value:0},{scale:"x",field:"Mean"}],x2:{value:0},y:{scale:"y",field:"Round"},height:{scale:"y",band:1}}}}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(child_width/40)"},domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0}]}],scales:[{name:"x",type:"linear",domain:{data:"data_0",field:"Mean"},range:[0,{signal:"child_width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{data:"data_0",field:"Round",sort:!0},range:[0,{signal:"child_height"}],paddingInner:.1,paddingOuter:.05},{name:"color",type:"ordinal",domain:{data:"data_0",field:"Round",sort:!0},range:["#2b2b2b","#e90051"]}],legends:[{orient:"top",columns:2,fill:"color",symbolType:"square",title:""}]},Uje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,width:200,height:275,data:[{name:"input_data",values:[]},{name:"data_0",source:"input_data",transform:[{type:"formula",expr:"datum.ANC_4plus_R1L",as:"R1L"},{type:"formula",expr:"datum.ANC_4plus_R1",as:"R1"},{type:"formula",expr:"datum.ANC_4plus_R1U",as:"R1U"},{type:"formula",expr:"datum.ANC_4plus_R2L",as:"R2L"},{type:"formula",expr:"datum.ANC_4plus_R2",as:"R2"},{type:"formula",expr:"datum.ANC_4plus_R2U",as:"R2U"},{type:"formula",expr:"datum.R1",as:"sorter"},{type:"fold",fields:["R1","R2"],as:["Round","Avg"]}]},{name:"data_2",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["Avg"]) && isFinite(+datum["Avg"])'}]},{name:"data_3",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_4",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]},{name:"data_5",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["Avg"]) && isFinite(+datum["Avg"])'}]}],marks:[{name:"layer_0_marks",type:"rect",style:["tick"],from:{data:"data_2"},encode:{update:{opacity:{value:.7},fill:{value:"#ffffff"},ariaRoleDescription:{value:"tick"},description:{signal:'"Avg: " + (format(datum["Avg"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"])'},xc:{scale:"x",field:"Avg"},yc:{scale:"y",field:"district",band:.5},height:{value:4},width:{value:1}}}},{name:"layer_1_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R1: " + (format(datum["R1"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R1L: " + (format(datum["R1L"], "")) + "; R2: " + (format(datum["R2"], ".1f"))'},x:{scale:"x",field:"R1"},x2:{scale:"x",field:"R1L"},yc:{scale:"y",field:"district",offset:-5,band:.5},height:{value:6}}}},{name:"layer_2_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R1: " + (format(datum["R1"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R1U: " + (format(datum["R1U"], "")) + "; R2: " + (format(datum["R2"], ".1f"))'},x:{scale:"x",field:"R1"},x2:{scale:"x",field:"R1U"},yc:{scale:"y",field:"district",offset:-5,band:.5},height:{value:6}}}},{name:"layer_3_marks",type:"rect",style:["rect"],from:{data:"data_4"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R2: " + (format(datum["R2"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R2L: " + (format(datum["R2L"], "")) + "; R1: " + (format(datum["R1"], ".1f"))'},x:{scale:"x",field:"R2"},x2:{scale:"x",field:"R2L"},yc:{scale:"y",field:"district",offset:5,band:.5},height:{value:6}}}},{name:"layer_4_marks",type:"rect",style:["rect"],from:{data:"data_4"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R2: " + (format(datum["R2"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R2U: " + (format(datum["R2U"], "")) + "; R1: " + (format(datum["R1"], ".1f"))'},x:{scale:"x",field:"R2"},x2:{scale:"x",field:"R2U"},yc:{scale:"y",field:"district",offset:5,band:.5},height:{value:6}}}},{name:"layer_5_marks",type:"rect",style:["tick"],from:{data:"data_5"},encode:{update:{opacity:{value:.7},fill:{scale:"color",field:"Round"},ariaRoleDescription:{value:"tick"},description:{signal:'"Avg: " + (format(datum["Avg"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; Round: " + (isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"])'},xc:{scale:"x",field:"Avg"},yc:{scale:"y",field:"district",offset:{scale:"yOffset",field:"Round"}},height:{value:8},width:{value:3}}}}],scales:[{name:"x",type:"linear",domain:{fields:[{data:"data_2",field:"Avg"},{data:"data_3",field:"R1"},{data:"data_3",field:"R1L"},{data:"data_3",field:"R1U"},{data:"data_4",field:"R2"},{data:"data_4",field:"R2L"},{data:"data_4",field:"R2U"},{data:"data_5",field:"Avg"}]},range:[0,{signal:"width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{data:"data_0",field:"district",sort:{op:"min",field:"sorter",order:"descending"}},range:[0,{signal:"height"}],paddingInner:0,paddingOuter:0},{name:"yOffset",type:"point",domain:{data:"data_5",field:"Round",sort:!0},range:[0,{signal:"bandwidth('y')"}],paddingOuter:.5},{name:"color",type:"ordinal",domain:{data:"data_5",field:"Round",sort:!0},range:["black","red"]}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(width/40)"},domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(width/40)"},zindex:0},{scale:"y",orient:"left",grid:!0,zindex:0}],legends:[{columns:2,orient:"top",fill:"color",direction:"horizontal",symbolType:"square",encode:{symbols:{update:{opacity:{value:.7}}}}}]},Wje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,width:250,title:{text:"A decrease in the indicator below means improvement",fontSize:12,subtitle:" ",frame:"group"},data:[{name:"data-input",values:[]},{name:"data_0",source:"data-input",transform:[{type:"fold",fields:["R1","R2"],as:["key","value"]},{type:"filter",expr:"(datum.Proportional === true)"}]},{name:"data_2",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["value"]) && isFinite(+datum["value"])'}]},{name:"data_3",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_4",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_5",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]},{name:"data_6",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]}],signals:[{name:"y_step",value:20},{name:"height",update:"bandspace(domain('y').length, 0, 0) * y_step"}],marks:[{name:"layer_0_marks",type:"symbol",style:["square"],from:{data:"data_2"},encode:{update:{opacity:{value:.7},size:{value:1},fill:{scale:"color",field:"key"},x:[{test:'!isValid(datum["value"]) || !isFinite(+datum["value"])',value:0},{scale:"x",field:"value"}],y:{scale:"y",field:"Indicator",band:.5},shape:{value:"square"}}}},{name:"layer_1_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R1": format(datum["R1"], ".2f")}`},x:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],x2:[{test:'!isValid(datum["R1L"]) || !isFinite(+datum["R1L"])',value:0},{scale:"x",field:"R1L"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5}}}},{name:"layer_2_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R1": format(datum["R1"], ".2f")}`},x:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],x2:[{test:'!isValid(datum["R1U"]) || !isFinite(+datum["R1U"])',value:0},{scale:"x",field:"R1U"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5}}}},{name:"layer_3_marks",type:"rect",style:["tick"],from:{data:"data_4"},encode:{update:{opacity:{value:.7},height:{value:6},fill:{value:"#000000"},xc:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5},width:{value:3}}}},{name:"layer_4_marks",type:"rect",style:["rect"],from:{data:"data_5"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R2": format(datum["R2"], ".2f")}`},x:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],x2:[{test:'!isValid(datum["R2L"]) || !isFinite(+datum["R2L"])',value:0},{scale:"x",field:"R2L"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5}}}},{name:"layer_5_marks",type:"rect",style:["rect"],from:{data:"data_5"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R2": format(datum["R2"], ".2f")}`},x:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],x2:[{test:'!isValid(datum["R2U"]) || !isFinite(+datum["R2U"])',value:0},{scale:"x",field:"R2U"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5}}}},{name:"layer_6_marks",type:"rect",style:["tick"],from:{data:"data_6"},encode:{update:{opacity:{value:.7},height:{value:6},fill:{value:"#ff0000"},xc:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5},width:{value:3}}}}],scales:[{name:"x",type:"linear",domain:{fields:[{data:"data_2",field:"value"},{data:"data_3",field:"R1"},{data:"data_3",field:"R1L"},{data:"data_3",field:"R1U"},{data:"data_4",field:"R1"},{data:"data_5",field:"R2"},{data:"data_5",field:"R2L"},{data:"data_5",field:"R2U"},{data:"data_6",field:"R2"}]},range:[0,{signal:"width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{fields:[{data:"data_0",field:"Indicator"},{data:"data_4",field:"Indicator"},{data:"data_6",field:"Indicator"}],sort:!0},range:{step:{signal:"y_step"}},paddingInner:0,paddingOuter:0},{name:"color",type:"ordinal",domain:{data:"data_2",field:"key",sort:!0},range:["black","red"]}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(width/40)"},domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"y",orient:"left",gridScale:"x",grid:!0,domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(width/40)"},zindex:0},{scale:"y",orient:"left",grid:!1,zindex:0}],legends:[{columns:2,orient:"top",fill:"color",direction:"horizontal",symbolType:"square",encode:{symbols:{update:{opacity:{value:.7}}}}}],config:{axis:{grid:!0}}},lne={StateAggregate:Hje,DistrictRanges:Uje,AllInRanges:Wje};function r8({input:e,proportional:t}){let n=JSON.parse(JSON.stringify(lne.AllInRanges));return n.data[0].values=e,n.width=Math.max(200,100*Math.floor(window.innerWidth/500)),t?(n.title.text="Higher value means improvement",n.data[1].transform[1].expr="(datum.Proportional === true)"):(n.title.text="Lower value means improvement",n.data[1].transform[1].expr="(datum.Proportional === false)"),v.jsx(qD,{spec:n,actions:!1})}function Gje(e,t){let n=[];return t.forEach(i=>{n.push({State:e.state,District:e.district,R1L:e[i+"_R1L"],R1U:e[i+"_R1U"],R1:e[i+"_R1"],R2L:e[i+"_R2L"],R2U:e[i+"_R2U"],R2:e[i+"_R2"],Indicator:rc[i].Indicator,Abbreviation:i,Proportional:rc[i].Proportional})}),n}function qje({obj:e,indicators:t}){const[n,i]=P.useState(!1);function r(){i(!0)}function o(){i(!1)}const a=Gje(e.original,t);return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx("i",{className:"mx-1 pi pi-arrow-circle-right",title:"Show all indicator comparison",onClick:r}),v.jsxs(cp,{show:n,onHide:o,size:"lg",children:[v.jsx(cp.Header,{closeButton:!0,children:v.jsx("h4",{children:"All Indicator Comparison"})}),v.jsx(cp.Body,{children:v.jsxs("div",{children:[v.jsxs("div",{className:"p-0 m-0 mb-2",children:["The charts below summarise the average values of all indicators in ",v.jsxs("b",{children:[e.original.district,", ",e.original.state]}),"."]}),v.jsx("hr",{}),v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"d-flex justify-content-center",children:v.jsx(r8,{input:a,proportional:!0})}),v.jsx("div",{className:"d-flex justify-content-center",children:v.jsx(r8,{input:a,proportional:!1})})]})]})})]})]})}function o8({columns:e,data:t,palette:n,indicators:i}){if(t.length===0)return v.jsx("kbd",{children:"No data displayed. Modify the filter."});{const{getTableProps:r,getTableBodyProps:o,headerGroups:a,rows:s,prepareRow:l}=w3.useTable({columns:e,data:t},w3.useSortBy);return v.jsx("div",{style:{fontSize:"small"},children:v.jsxs($u,{bordered:!0,hover:!0,size:"sm",children:[v.jsx("thead",{children:a.map((u,c)=>v.jsxs("tr",{children:[v.jsx("td",{}),u.headers.map((d,h)=>v.jsxs("th",{...d.getHeaderProps(d.getSortByToggleProps()),children:[d.render("Header"),d.disableSortBy?v.jsx(v.Fragment,{}):v.jsx("span",{children:d.isSorted?d.isSortedDesc?" ":" ":" "})]},h))]},c))}),v.jsx("tbody",{children:s.map((u,c)=>(l(u),v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx(qje,{obj:u,indicators:i})}),u.cells.map((d,h)=>{let m={};if(n[d.column.Header]){const g=one(d.value,n[d.column.Header].Minmax,n[d.column.Header].Palette);m.backgroundColor=g,m.fontWeight="bold",m.textAlign=d.column.align}else m.textAlign=d.column.align;return v.jsx("td",{style:m,children:d.render("Cell")},h)})]},c)))})]})})}}function a8({input:e,field:t}){if(e.length===0)return v.jsx("div",{children:v.jsx("kbd",{children:"No data displayed. Modify the filter."})});{const[n,i]=P.useState("SortbyName"),[r,o]=P.useState("ascending"),a=[t+"_R1",t+"_R2",t+"_CH"],s={SortbyName:"district",SortbyR1:a[0],SortbyR2:a[1],SortbyChange:a[2]};let l=JSON.parse(JSON.stringify(lne.DistrictRanges));return l.height=25*e.length,l.width=Math.max(300,100*Math.floor(window.innerWidth/500)),l.data[0].values=e,l.data[1].transform[0].expr="datum."+t+"_R1L",l.data[1].transform[1].expr="datum."+t+"_R1",l.data[1].transform[2].expr="datum."+t+"_R1U",l.data[1].transform[3].expr="datum."+t+"_R2L",l.data[1].transform[4].expr="datum."+t+"_R2",l.data[1].transform[5].expr="datum."+t+"_R2U",l.data[1].transform[6].expr="datum."+s[n],l.scales[1].domain.sort.order=r,v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"p-0 mb-2",children:[v.jsx("div",{className:"float-start",style:{width:"180px"},children:v.jsx(Aje,{items:["Sort by Name","Sort by R1","Sort by R2","Sort by Change"],defaultOpt:"SortbyName",noDefault:!0,name:"sortChart",value:n,pass:i})}),v.jsx("div",{className:"float-start m-2",children:v.jsx("button",{className:"map-btn",title:"reverse sort",onClick:()=>{o(r==="ascending"?"descending":"ascending")},children:r==="ascending"?" ":" "})})]}),v.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:v.jsx(qD,{spec:l,actions:!1})})]})}}function Vje({param:e,data:t,stat:n,filterFunc:i}){const o=t.length===0?"":t[0].state,a=String(e.config.Adm1).toLowerCase(),s=String(e.config.Adm2).toLowerCase(),l=s.slice(-1)==="y"?s.slice(0,-1)+"ies":s+"s",u=e.config.indicators[e.indicator],c=Object.keys(e.config.indicators),d=rc[e.indicator],h=["R1","R2","CH"],m=t.filter(i);let g=[structuredClone(m[0])],y=e.config.Adm2+" Name";g[0]&&e.config.StateOnly.includes(e.indicator)&&(g[0].district=g[0].state,y=e.config.Adm1+" Name");let x={};h.forEach(O=>{x[O]={},O==="CH"?(x[O].Palette=u.Palette2,x[O].Minmax=[u.CHMin,u.CHMax]):(x[O].Palette=u.Palette1,x[O].Minmax=[u.Min,u.Max])});function b({value:O}){return O?parseFloat(O).toFixed(u.Precision):"-"}const w=[{Header:`${y}`,accessor:"district",align:"left"},{Header:"R1",accessor:`${e.indicator}_R1`,Cell:b,sortType:"basic",align:"center"},{Header:"CI_R1",accessor:`${e.indicator}_R1CI`,disableSortBy:!0,align:"center"},{Header:"R2",accessor:`${e.indicator}_R2`,Cell:b,sortType:"basic",align:"center"},{Header:"CI_R2",accessor:`${e.indicator}_R2CI`,disableSortBy:!0,align:"center"},{Header:"CH",accessor:`${e.indicator}_CH`,Cell:b,sortType:"basic",align:"center"},{Header:"CI_CH",accessor:`${e.indicator}_CHCI`,disableSortBy:!0,align:"center"}],S=P.useMemo(()=>v.jsx(a8,{input:m,field:e.indicator}),[m]),k=P.useMemo(()=>["_R1","_R2","_CH"].map(O=>{let j={};const q=e.indicator+O;return j.avg=Dh(n[0][q+"_wavg"],u.Precision),JM.includes(e.indicator)?(j.best=n[0][q+"_max_unit"],j.worst=n[0][q+"_min_unit"],j.bestVal=Dh(n[0][q+"_max"],u.Precision),j.worstVal=Dh(n[0][q+"_min"],u.Precision)):(j.best=n[0][q+"_min_unit"],j.worst=n[0][q+"_max_unit"],j.bestVal=Dh(n[0][q+"_min"],u.Precision),j.worstVal=Dh(n[0][q+"_max"],u.Precision)),j}),[t,e]),R=k[0].avg==="-"&&k[1].avg==="-";let M="";u.R1!==""?(M+=`approximately ${k[0].avg} ${d.Unit} ${d.Statement} in round 1 (${u.R1}, ${u.Y1}).`,u.R2!==""&&(M+=` In round 2 (${u.R2}, ${u.Y2}), the figure was ${k[1].avg} ${d.Unit}.`)):M+=`approximately ${k[1].avg} ${d.Unit} ${d.Statement} in round 2 (${u.R2}, ${u.Y2}).`;let T=[];JM.includes(e.indicator)?k[2].bestVal.startsWith("-")?T.push("experienced the smallest decrease"):(T.push("had the highest increase"),T.push(", showing an improvement in conditions")):k[2].bestVal.startsWith("-")?(T.push("experience the largest decrease"),T.push(", showing an improvement in conditions")):T.push("had the lowest increase");const N=v.jsxs(v.Fragment,{children:["Among the listed ",l,", ",v.jsx("b",{children:k[2].best})," ",T[0]," in ",u.Indicator," with a ",k[2].bestVal," ",u.Unit," change from round 1 (",u.R1,", ",u.Y1,") to round 2 (",u.R2,", ",u.Y2,")",T[1],"."]}),z=v.jsxs("div",{children:[v.jsx("div",{className:"row p-2",children:v.jsxs($u,{striped:!0,bordered:!0,size:"sm",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx(VD,{about:"How to read table"})}),v.jsx("td",{children:"Round 1"}),v.jsx("td",{children:"Round 2"}),v.jsx("td",{children:"Change"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsxs("td",{children:[e.config.Adm1," Level Average"]}),v.jsx("td",{children:k[0].avg}),v.jsx("td",{children:k[1].avg}),v.jsx("td",{children:k[2].avg})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Highest Performing"}),v.jsx("td",{children:k[0].best}),v.jsx("td",{children:k[1].best}),v.jsx("td",{children:k[2].best})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Least Performing"}),v.jsx("td",{children:k[0].worst}),v.jsx("td",{children:k[1].worst}),v.jsx("td",{children:k[2].worst})]})]})]})}),v.jsxs("p",{children:["In the ",a," of ",v.jsx("b",{children:o}),", ",M]}),v.jsx("p",{children:k[2].best?N:""})]}),H=v.jsxs("div",{className:"row p-0",children:[v.jsxs("p",{children:["The chart below summarises the indicator values aggregated at ",s," level. If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," are represented as washout rectangles around the mean values."]}),v.jsxs("p",{style:{fontSize:"80%"},children:["The data can be sorted by name, round 1 ",v.jsx("b",{children:"(R1)"})," values, round 2 ",v.jsx("b",{children:"(R2)"})," values and change ",v.jsx("b",{children:"(CH)"})," values by clicking on each heading."]}),v.jsx("hr",{}),S]}),U=v.jsxs("div",{className:"p-0 m-0",children:[v.jsxs("p",{children:["The table below summarises the indicator values aggregated at ",s," level. If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," can be found in brackets."]}),v.jsxs("p",{style:{fontSize:"80%"},children:["The data can be sorted by name, round 1 ",v.jsx("b",{children:"(R1)"})," values, round 2 ",v.jsx("b",{children:"(R2)"})," values and change ",v.jsx("b",{children:"(CH)"})," values by clicking on each heading. Additionally, all-indicator summary can be displayed by clicking ",v.jsx("i",{className:"pi pi-arrow-circle-right"})," on each row."]}),v.jsx("hr",{}),v.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:v.jsx(o8,{columns:w,data:m,palette:x,indicators:c})})]}),X=v.jsxs("div",{className:"p-0 m-0",children:[v.jsxs("p",{children:["The table below summarises the indicator values aggregated at ",v.jsxs("b",{children:[a," level"]}),". If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," can be found in brackets."]}),v.jsx("hr",{}),v.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:v.jsx(o8,{columns:w,data:g,palette:x,indicators:c})})]}),B=v.jsxs("div",{className:"row p-0",children:[v.jsxs("p",{children:["The chart below summarises the indicator values aggregated at ",v.jsxs("b",{children:[a," level"]}),". If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," are represented as washout rectangles around the mean values."]}),v.jsx("hr",{}),v.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:v.jsx(a8,{input:g,field:e.indicator})})]});return v.jsxs("div",{className:"row m-0 p-0",children:[v.jsxs("div",{className:"row m-0 p-2 pt-2 rounded-3 bg-secondary-subtle",children:[v.jsx("div",{className:"p-0",children:v.jsxs("h5",{children:[v.jsx(ub,{bg:"danger",style:{marginRight:"8px"},children:u.Indicator}),v.jsxs(ub,{bg:"danger",children:[o," (",t.length," ",l,")"]})]})}),v.jsx("div",{className:"p-0",children:v.jsxs("p",{children:[e.config.Adm2," and ",a," level summary estimates are presented for the selected indicators and for each survey round and for the change between the two rounds."]})})]}),R?v.jsx("div",{className:"m-0 p-0 mt-2",children:v.jsxs("kbd",{children:["No data for this ",e.config.Adm1.toLowerCase()]})}):e.config.StateOnly.includes(e.indicator)?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"m-0 p-0 mt-2",children:v.jsxs("kbd",{children:["For this indicator, only ",a," level data is available"]})}),v.jsxs(Ay,{defaultActiveKey:"table",id:"data-tabs",className:"mt-2",children:[v.jsx(Ru,{eventKey:"table",title:"Table",children:X}),v.jsx(Ru,{eventKey:"chart",title:"Chart",children:B})]})]}):v.jsx(v.Fragment,{children:v.jsxs(Ay,{defaultActiveKey:"summary",id:"data-tabs",className:"mt-2",children:[v.jsx(Ru,{eventKey:"summary",title:"Summary",children:z}),v.jsx(Ru,{eventKey:"table",title:"Table",children:U}),v.jsx(Ru,{eventKey:"chart",title:"Chart",children:H})]})})]})}function YD(e,t){const n=P.useRef(t);P.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function Yje(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const une=1;function cne(e){return Object.freeze({__version:une,map:e})}function fne(e,t){return Object.freeze({...e,...t})}const ZD=P.createContext(null),LC=ZD.Provider;function Kd(){const e=P.useContext(ZD);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function XD(e){function t(n,i){const{instance:r,context:o}=e(n).current;return P.useImperativeHandle(i,()=>r),n.children==null?null:$t.createElement(LC,{value:o},n.children)}return P.forwardRef(t)}function dne(e){function t(n,i){const[r,o]=P.useState(!1),{instance:a}=e(n,o).current;P.useImperativeHandle(i,()=>a),P.useEffect(function(){r&&a.update()},[a,r,n.children]);const s=a._contentNode;return s?v2.createPortal(n.children,s):null}return P.forwardRef(t)}function KD(e){function t(n,i){const{instance:r}=e(n).current;return P.useImperativeHandle(i,()=>r),null}return P.forwardRef(t)}function hne(e){return function(n){const i=Kd(),r=e(n,i),{instance:o}=r.current,a=P.useRef(n.position),{position:s}=n;return P.useEffect(function(){return o.addTo(i.map),function(){o.remove()}},[i.map,o]),P.useEffect(function(){s!=null&&s!==a.current&&(o.setPosition(s),a.current=s)},[o,s]),r}}function jC(e,t){const n=P.useRef();P.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function l1(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function pne(e,t){return function(i,r){const o=Kd(),a=e(l1(i,o),o);return YD(o.map,i.attribution),jC(a.current,i.eventHandlers),t(a.current,o,i,r),a}}var QM={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(v8,function(n){var i="1.9.4";function r(f){var p,_,E,A;for(_=1,E=arguments.length;_<E;_++){A=arguments[_];for(p in A)f[p]=A[p]}return f}var o=Object.create||function(){function f(){}return function(p){return f.prototype=p,new f}}();function a(f,p){var _=Array.prototype.slice;if(f.bind)return f.bind.apply(f,_.call(arguments,1));var E=_.call(arguments,2);return function(){return f.apply(p,E.length?E.concat(_.call(arguments)):arguments)}}var s=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++s),f._leaflet_id}function u(f,p,_){var E,A,I,Y;return Y=function(){E=!1,A&&(I.apply(_,A),A=!1)},I=function(){E?A=arguments:(f.apply(_,arguments),setTimeout(Y,p),E=!0)},I}function c(f,p,_){var E=p[1],A=p[0],I=E-A;return f===E&&_?f:((f-A)%I+I)%I+A}function d(){return!1}function h(f,p){if(p===!1)return f;var _=Math.pow(10,p===void 0?6:p);return Math.round(f*_)/_}function m(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function g(f){return m(f).split(/\s+/)}function y(f,p){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?o(f.options):{});for(var _ in p)f.options[_]=p[_];return f.options}function x(f,p,_){var E=[];for(var A in f)E.push(encodeURIComponent(_?A.toUpperCase():A)+"="+encodeURIComponent(f[A]));return(!p||p.indexOf("?")===-1?"?":"&")+E.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function w(f,p){return f.replace(b,function(_,E){var A=p[E];if(A===void 0)throw new Error("No value provided for variable "+_);return typeof A=="function"&&(A=A(p)),A})}var S=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function k(f,p){for(var _=0;_<f.length;_++)if(f[_]===p)return _;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var T=0;function N(f){var p=+new Date,_=Math.max(0,16-(p-T));return T=p+_,window.setTimeout(f,_)}var z=window.requestAnimationFrame||M("RequestAnimationFrame")||N,H=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function U(f,p,_){if(_&&z===N)f.call(p);else return z.call(window,a(f,p))}function X(f){f&&H.call(window,f)}var B={__proto__:null,extend:r,create:o,bind:a,get lastId(){return s},stamp:l,throttle:u,wrapNum:c,falseFn:d,formatNum:h,trim:m,splitWords:g,setOptions:y,getParamString:x,template:w,isArray:S,indexOf:k,emptyImageUrl:R,requestFn:z,cancelFn:H,requestAnimFrame:U,cancelAnimFrame:X};function O(){}O.extend=function(f){var p=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=p.__super__=this.prototype,E=o(_);E.constructor=p,p.prototype=E;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(p[A]=this[A]);return f.statics&&r(p,f.statics),f.includes&&(j(f.includes),r.apply(null,[E].concat(f.includes))),r(E,f),delete E.statics,delete E.includes,E.options&&(E.options=_.options?o(_.options):{},r(E.options,f.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,Y=E._initHooks.length;I<Y;I++)E._initHooks[I].call(this)}},p},O.include=function(f){var p=this.prototype.options;return r(this.prototype,f),f.options&&(this.prototype.options=p,this.mergeOptions(f.options)),this},O.mergeOptions=function(f){return r(this.prototype.options,f),this},O.addInitHook=function(f){var p=Array.prototype.slice.call(arguments,1),_=typeof f=="function"?f:function(){this[f].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function j(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=S(f)?f:[f];for(var p=0;p<f.length;p++)f[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(f,p,_){if(typeof f=="object")for(var E in f)this._on(E,f[E],p);else{f=g(f);for(var A=0,I=f.length;A<I;A++)this._on(f[A],p,_)}return this},off:function(f,p,_){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var E in f)this._off(E,f[E],p);else{f=g(f);for(var A=arguments.length===1,I=0,Y=f.length;I<Y;I++)A?this._off(f[I]):this._off(f[I],p,_)}return this},_on:function(f,p,_,E){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(f,p,_)===!1){_===this&&(_=void 0);var A={fn:p,ctx:_};E&&(A.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(A)}},_off:function(f,p,_){var E,A,I;if(this._events&&(E=this._events[f],!!E)){if(arguments.length===1){if(this._firingCount)for(A=0,I=E.length;A<I;A++)E[A].fn=d;delete this._events[f];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var Y=this._listens(f,p,_);if(Y!==!1){var ee=E[Y];this._firingCount&&(ee.fn=d,this._events[f]=E=E.slice()),E.splice(Y,1)}}},fire:function(f,p,_){if(!this.listens(f,_))return this;var E=r({},p,{type:f,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var A=this._events[f];if(A){this._firingCount=this._firingCount+1||1;for(var I=0,Y=A.length;I<Y;I++){var ee=A[I],te=ee.fn;ee.once&&this.off(f,te,ee.ctx),te.call(ee.ctx||this,E)}this._firingCount--}}return _&&this._propagateEvent(E),this},listens:function(f,p,_,E){typeof f!="string"&&console.warn('"string" type argument expected');var A=p;typeof p!="function"&&(E=!!p,A=void 0,_=void 0);var I=this._events&&this._events[f];if(I&&I.length&&this._listens(f,A,_)!==!1)return!0;if(E){for(var Y in this._eventParents)if(this._eventParents[Y].listens(f,p,_,E))return!0}return!1},_listens:function(f,p,_){if(!this._events)return!1;var E=this._events[f]||[];if(!p)return!!E.length;_===this&&(_=void 0);for(var A=0,I=E.length;A<I;A++)if(E[A].fn===p&&E[A].ctx===_)return A;return!1},once:function(f,p,_){if(typeof f=="object")for(var E in f)this._on(E,f[E],p,!0);else{f=g(f);for(var A=0,I=f.length;A<I;A++)this._on(f[A],p,_,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var p in this._eventParents)this._eventParents[p].fire(f.type,r({layer:f.target,propagatedFrom:f.target},f),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var K=O.extend(q);function W(f,p,_){this.x=_?Math.round(f):f,this.y=_?Math.round(p):p}var J=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(f){return this.clone()._add(Q(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(Q(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new W(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new W(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(f){f=Q(f);var p=f.x-this.x,_=f.y-this.y;return Math.sqrt(p*p+_*_)},equals:function(f){return f=Q(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=Q(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function Q(f,p,_){return f instanceof W?f:S(f)?new W(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new W(f.x,f.y):new W(f,p,_)}function ae(f,p){if(f)for(var _=p?[f,p]:f,E=0,A=_.length;E<A;E++)this.extend(_[E])}ae.prototype={extend:function(f){var p,_;if(!f)return this;if(f instanceof W||typeof f[0]=="number"||"x"in f)p=_=Q(f);else if(f=ge(f),p=f.min,_=f.max,!p||!_)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=_.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(f){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var p,_;return typeof f[0]=="number"||f instanceof W?f=Q(f):f=ge(f),f instanceof ae?(p=f.min,_=f.max):p=_=f,p.x>=this.min.x&&_.x<=this.max.x&&p.y>=this.min.y&&_.y<=this.max.y},intersects:function(f){f=ge(f);var p=this.min,_=this.max,E=f.min,A=f.max,I=A.x>=p.x&&E.x<=_.x,Y=A.y>=p.y&&E.y<=_.y;return I&&Y},overlaps:function(f){f=ge(f);var p=this.min,_=this.max,E=f.min,A=f.max,I=A.x>p.x&&E.x<_.x,Y=A.y>p.y&&E.y<_.y;return I&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var p=this.min,_=this.max,E=Math.abs(p.x-_.x)*f,A=Math.abs(p.y-_.y)*f;return ge(Q(p.x-E,p.y-A),Q(_.x+E,_.y+A))},equals:function(f){return f?(f=ge(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function ge(f,p){return!f||f instanceof ae?f:new ae(f,p)}function ke(f,p){if(f)for(var _=p?[f,p]:f,E=0,A=_.length;E<A;E++)this.extend(_[E])}ke.prototype={extend:function(f){var p=this._southWest,_=this._northEast,E,A;if(f instanceof Se)E=f,A=f;else if(f instanceof ke){if(E=f._southWest,A=f._northEast,!E||!A)return this}else return f?this.extend(Fe(f)||pe(f)):this;return!p&&!_?(this._southWest=new Se(E.lat,E.lng),this._northEast=new Se(A.lat,A.lng)):(p.lat=Math.min(E.lat,p.lat),p.lng=Math.min(E.lng,p.lng),_.lat=Math.max(A.lat,_.lat),_.lng=Math.max(A.lng,_.lng)),this},pad:function(f){var p=this._southWest,_=this._northEast,E=Math.abs(p.lat-_.lat)*f,A=Math.abs(p.lng-_.lng)*f;return new ke(new Se(p.lat-E,p.lng-A),new Se(_.lat+E,_.lng+A))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof Se||"lat"in f?f=Fe(f):f=pe(f);var p=this._southWest,_=this._northEast,E,A;return f instanceof ke?(E=f.getSouthWest(),A=f.getNorthEast()):E=A=f,E.lat>=p.lat&&A.lat<=_.lat&&E.lng>=p.lng&&A.lng<=_.lng},intersects:function(f){f=pe(f);var p=this._southWest,_=this._northEast,E=f.getSouthWest(),A=f.getNorthEast(),I=A.lat>=p.lat&&E.lat<=_.lat,Y=A.lng>=p.lng&&E.lng<=_.lng;return I&&Y},overlaps:function(f){f=pe(f);var p=this._southWest,_=this._northEast,E=f.getSouthWest(),A=f.getNorthEast(),I=A.lat>p.lat&&E.lat<_.lat,Y=A.lng>p.lng&&E.lng<_.lng;return I&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,p){return f?(f=pe(f),this._southWest.equals(f.getSouthWest(),p)&&this._northEast.equals(f.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(f,p){return f instanceof ke?f:new ke(f,p)}function Se(f,p,_){if(isNaN(f)||isNaN(p))throw new Error("Invalid LatLng object: ("+f+", "+p+")");this.lat=+f,this.lng=+p,_!==void 0&&(this.alt=+_)}Se.prototype={equals:function(f,p){if(!f)return!1;f=Fe(f);var _=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return _<=(p===void 0?1e-9:p)},toString:function(f){return"LatLng("+h(this.lat,f)+", "+h(this.lng,f)+")"},distanceTo:function(f){return Et.distance(this,Fe(f))},wrap:function(){return Et.wrapLatLng(this)},toBounds:function(f){var p=180*f/40075017,_=p/Math.cos(Math.PI/180*this.lat);return pe([this.lat-p,this.lng-_],[this.lat+p,this.lng+_])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Fe(f,p,_){return f instanceof Se?f:S(f)&&typeof f[0]!="object"?f.length===3?new Se(f[0],f[1],f[2]):f.length===2?new Se(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new Se(f.lat,"lng"in f?f.lng:f.lon,f.alt):p===void 0?null:new Se(f,p,_)}var Nt={latLngToPoint:function(f,p){var _=this.projection.project(f),E=this.scale(p);return this.transformation._transform(_,E)},pointToLatLng:function(f,p){var _=this.scale(p),E=this.transformation.untransform(f,_);return this.projection.unproject(E)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var p=this.projection.bounds,_=this.scale(f),E=this.transformation.transform(p.min,_),A=this.transformation.transform(p.max,_);return new ae(E,A)},infinite:!1,wrapLatLng:function(f){var p=this.wrapLng?c(f.lng,this.wrapLng,!0):f.lng,_=this.wrapLat?c(f.lat,this.wrapLat,!0):f.lat,E=f.alt;return new Se(_,p,E)},wrapLatLngBounds:function(f){var p=f.getCenter(),_=this.wrapLatLng(p),E=p.lat-_.lat,A=p.lng-_.lng;if(E===0&&A===0)return f;var I=f.getSouthWest(),Y=f.getNorthEast(),ee=new Se(I.lat-E,I.lng-A),te=new Se(Y.lat-E,Y.lng-A);return new ke(ee,te)}},Et=r({},Nt,{wrapLng:[-180,180],R:6371e3,distance:function(f,p){var _=Math.PI/180,E=f.lat*_,A=p.lat*_,I=Math.sin((p.lat-f.lat)*_/2),Y=Math.sin((p.lng-f.lng)*_/2),ee=I*I+Math.cos(E)*Math.cos(A)*Y*Y,te=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*te}}),Te=6378137,Ye={R:Te,MAX_LATITUDE:85.0511287798,project:function(f){var p=Math.PI/180,_=this.MAX_LATITUDE,E=Math.max(Math.min(_,f.lat),-_),A=Math.sin(E*p);return new W(this.R*f.lng*p,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(f){var p=180/Math.PI;return new Se((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*p,f.x*p/this.R)},bounds:function(){var f=Te*Math.PI;return new ae([-f,-f],[f,f])}()};function Be(f,p,_,E){if(S(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=p,this._c=_,this._d=E}Be.prototype={transform:function(f,p){return this._transform(f.clone(),p)},_transform:function(f,p){return p=p||1,f.x=p*(this._a*f.x+this._b),f.y=p*(this._c*f.y+this._d),f},untransform:function(f,p){return p=p||1,new W((f.x/p-this._b)/this._a,(f.y/p-this._d)/this._c)}};function ce(f,p,_,E){return new Be(f,p,_,E)}var Tt=r({},Et,{code:"EPSG:3857",projection:Ye,transformation:function(){var f=.5/(Math.PI*Ye.R);return ce(f,.5,-f,.5)}()}),ft=r({},Tt,{code:"EPSG:900913"});function Xe(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Vt(f,p){var _="",E,A,I,Y,ee,te;for(E=0,I=f.length;E<I;E++){for(ee=f[E],A=0,Y=ee.length;A<Y;A++)te=ee[A],_+=(A?"L":"M")+te.x+" "+te.y;_+=p?Ze.svg?"z":"x":""}return _||"M0 0"}var yn=document.documentElement.style,tr="ActiveXObject"in window,Vs=tr&&!document.addEventListener,Ni="msLaunchUri"in navigator&&!("documentMode"in document),Er=Ao("webkit"),aa=Ao("android"),Ro=Ao("android 2")||Ao("android 3"),nr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),To=aa&&Ao("Google")&&nr<537&&!("AudioNode"in window),vt=!!window.opera,$i=!Ni&&Ao("chrome"),no=Ao("gecko")&&!Er&&!vt&&!tr,eh=!$i&&Ao("safari"),tu=Ao("phantom"),Yc="OTransition"in yn,dt=navigator.platform.indexOf("Win")===0,Gt=tr&&"transition"in yn,Ii="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ro,sa="MozPerspective"in yn,th=!window.L_DISABLE_3D&&(Gt||Ii||sa)&&!Yc&&!tu,nu=typeof orientation<"u"||Ao("mobile"),p1=nu&&Er,m1=nu&&Ii,Vm=!window.PointerEvent&&window.MSPointerEvent,Ym=!!(window.PointerEvent||Vm),Zm="ontouchstart"in window||!!window.TouchEvent,g1=!window.L_NO_TOUCH&&(Zm||Ym),Zc=nu&&vt,y1=nu&&no,VC=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,YC=function(){var f=!1;try{var p=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",d,p),window.removeEventListener("testPassiveEventSupport",d,p)}catch{}return f}(),v1=function(){return!!document.createElement("canvas").getContext}(),Xm=!!(document.createElementNS&&Xe("svg").createSVGRect),ZC=!!Xm&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),x1=!Xm&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var p=f.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),_1=navigator.platform.indexOf("Mac")===0,XC=navigator.platform.indexOf("Linux")===0;function Ao(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ze={ie:tr,ielt9:Vs,edge:Ni,webkit:Er,android:aa,android23:Ro,androidStock:To,opera:vt,chrome:$i,gecko:no,safari:eh,phantom:tu,opera12:Yc,win:dt,ie3d:Gt,webkit3d:Ii,gecko3d:sa,any3d:th,mobile:nu,mobileWebkit:p1,mobileWebkit3d:m1,msPointer:Vm,pointer:Ym,touch:g1,touchNative:Zm,mobileOpera:Zc,mobileGecko:y1,retina:VC,passiveEvents:YC,canvas:v1,svg:Xm,vml:x1,inlineSvg:ZC,mac:_1,linux:XC},b1=Ze.msPointer?"MSPointerDown":"pointerdown",w1=Ze.msPointer?"MSPointerMove":"pointermove",S1=Ze.msPointer?"MSPointerUp":"pointerup",C1=Ze.msPointer?"MSPointerCancel":"pointercancel",Km={touchstart:b1,touchmove:w1,touchend:S1,touchcancel:C1},E1={touchstart:QC,touchmove:nh,touchend:nh,touchcancel:nh},Ys={},Jm=!1;function Qm(f,p,_){return p==="touchstart"&&JC(),E1[p]?(_=E1[p].bind(this,_),f.addEventListener(Km[p],_,!1),_):(console.warn("wrong event specified:",p),d)}function Xc(f,p,_){if(!Km[p]){console.warn("wrong event specified:",p);return}f.removeEventListener(Km[p],_,!1)}function k1(f){Ys[f.pointerId]=f}function KC(f){Ys[f.pointerId]&&(Ys[f.pointerId]=f)}function eg(f){delete Ys[f.pointerId]}function JC(){Jm||(document.addEventListener(b1,k1,!0),document.addEventListener(w1,KC,!0),document.addEventListener(S1,eg,!0),document.addEventListener(C1,eg,!0),Jm=!0)}function nh(f,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var _ in Ys)p.touches.push(Ys[_]);p.changedTouches=[p],f(p)}}function QC(f,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Yn(p),nh(f,p)}function R1(f){var p={},_,E;for(E in f)_=f[E],p[E]=_&&_.bind?_.bind(f):_;return f=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var T1=200;function eE(f,p){f.addEventListener("dblclick",p);var _=0,E;function A(I){if(I.detail!==1){E=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var Y=P1(I);if(!(Y.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!Y.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var ee=Date.now();ee-_<=T1?(E++,E===2&&p(R1(I))):E=1,_=ee}}}return f.addEventListener("click",A),{dblclick:p,simDblclick:A}}function tE(f,p){f.removeEventListener("dblclick",p.dblclick),f.removeEventListener("click",p.simDblclick)}var ih=sh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),iu=sh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),A1=iu==="webkitTransition"||iu==="OTransition"?iu+"End":"transitionend";function M1(f){return typeof f=="string"?document.getElementById(f):f}function Kc(f,p){var _=f.style[p]||f.currentStyle&&f.currentStyle[p];if((!_||_==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(f,null);_=E?E[p]:null}return _==="auto"?null:_}function Dt(f,p,_){var E=document.createElement(f);return E.className=p||"",_&&_.appendChild(E),E}function fn(f){var p=f.parentNode;p&&p.removeChild(f)}function rh(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function ru(f){var p=f.parentNode;p&&p.lastChild!==f&&p.appendChild(f)}function ou(f){var p=f.parentNode;p&&p.firstChild!==f&&p.insertBefore(f,p.firstChild)}function tg(f,p){if(f.classList!==void 0)return f.classList.contains(p);var _=ah(f);return _.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(_)}function xt(f,p){if(f.classList!==void 0)for(var _=g(p),E=0,A=_.length;E<A;E++)f.classList.add(_[E]);else if(!tg(f,p)){var I=ah(f);oh(f,(I?I+" ":"")+p)}}function Cn(f,p){f.classList!==void 0?f.classList.remove(p):oh(f,m((" "+ah(f)+" ").replace(" "+p+" "," ")))}function oh(f,p){f.className.baseVal===void 0?f.className=p:f.className.baseVal=p}function ah(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function kr(f,p){"opacity"in f.style?f.style.opacity=p:"filter"in f.style&&nE(f,p)}function nE(f,p){var _=!1,E="DXImageTransform.Microsoft.Alpha";try{_=f.filters.item(E)}catch{if(p===1)return}p=Math.round(p*100),_?(_.Enabled=p!==100,_.Opacity=p):f.style.filter+=" progid:"+E+"(opacity="+p+")"}function sh(f){for(var p=document.documentElement.style,_=0;_<f.length;_++)if(f[_]in p)return f[_];return!1}function Zs(f,p,_){var E=p||new W(0,0);f.style[ih]=(Ze.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(_?" scale("+_+")":"")}function An(f,p){f._leaflet_pos=p,Ze.any3d?Zs(f,p):(f.style.left=p.x+"px",f.style.top=p.y+"px")}function Xa(f){return f._leaflet_pos||new W(0,0)}var au,su,ng;if("onselectstart"in document)au=function(){gt(window,"selectstart",Yn)},su=function(){Jt(window,"selectstart",Yn)};else{var Jc=sh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);au=function(){if(Jc){var f=document.documentElement.style;ng=f[Jc],f[Jc]="none"}},su=function(){Jc&&(document.documentElement.style[Jc]=ng,ng=void 0)}}function ig(){gt(window,"dragstart",Yn)}function lh(){Jt(window,"dragstart",Yn)}var uh,rg;function og(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Qc(),uh=f,rg=f.style.outlineStyle,f.style.outlineStyle="none",gt(window,"keydown",Qc))}function Qc(){uh&&(uh.style.outlineStyle=rg,uh=void 0,rg=void 0,Jt(window,"keydown",Qc))}function F1(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function ag(f){var p=f.getBoundingClientRect();return{x:p.width/f.offsetWidth||1,y:p.height/f.offsetHeight||1,boundingClientRect:p}}var iE={__proto__:null,TRANSFORM:ih,TRANSITION:iu,TRANSITION_END:A1,get:M1,getStyle:Kc,create:Dt,remove:fn,empty:rh,toFront:ru,toBack:ou,hasClass:tg,addClass:xt,removeClass:Cn,setClass:oh,getClass:ah,setOpacity:kr,testProp:sh,setTransform:Zs,setPosition:An,getPosition:Xa,get disableTextSelection(){return au},get enableTextSelection(){return su},disableImageDrag:ig,enableImageDrag:lh,preventOutline:og,restoreOutline:Qc,getSizedParentNode:F1,getScale:ag};function gt(f,p,_,E){if(p&&typeof p=="object")for(var A in p)nf(f,A,p[A],_);else{p=g(p);for(var I=0,Y=p.length;I<Y;I++)nf(f,p[I],_,E)}return this}var Rr="_leaflet_events";function Jt(f,p,_,E){if(arguments.length===1)ef(f),delete f[Rr];else if(p&&typeof p=="object")for(var A in p)ch(f,A,p[A],_);else if(p=g(p),arguments.length===2)ef(f,function(ee){return k(p,ee)!==-1});else for(var I=0,Y=p.length;I<Y;I++)ch(f,p[I],_,E);return this}function ef(f,p){for(var _ in f[Rr]){var E=_.split(/\d/)[0];(!p||p(E))&&ch(f,E,null,null,_)}}var tf={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function nf(f,p,_,E){var A=p+l(_)+(E?"_"+l(E):"");if(f[Rr]&&f[Rr][A])return this;var I=function(ee){return _.call(E||f,ee||window.event)},Y=I;!Ze.touchNative&&Ze.pointer&&p.indexOf("touch")===0?I=Qm(f,p,I):Ze.touch&&p==="dblclick"?I=eE(f,I):"addEventListener"in f?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?f.addEventListener(tf[p]||p,I,Ze.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(I=function(ee){ee=ee||window.event,ug(f,ee)&&Y(ee)},f.addEventListener(tf[p],I,!1)):f.addEventListener(p,Y,!1):f.attachEvent("on"+p,I),f[Rr]=f[Rr]||{},f[Rr][A]=I}function ch(f,p,_,E,A){A=A||p+l(_)+(E?"_"+l(E):"");var I=f[Rr]&&f[Rr][A];if(!I)return this;!Ze.touchNative&&Ze.pointer&&p.indexOf("touch")===0?Xc(f,p,I):Ze.touch&&p==="dblclick"?tE(f,I):"removeEventListener"in f?f.removeEventListener(tf[p]||p,I,!1):f.detachEvent("on"+p,I),f[Rr][A]=null}function Ka(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function sg(f){return nf(f,"wheel",Ka),this}function Xs(f){return gt(f,"mousedown touchstart dblclick contextmenu",Ka),f._leaflet_disable_click=!0,this}function Yn(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Ks(f){return Yn(f),Ka(f),this}function P1(f){if(f.composedPath)return f.composedPath();for(var p=[],_=f.target;_;)p.push(_),_=_.parentNode;return p}function lg(f,p){if(!p)return new W(f.clientX,f.clientY);var _=ag(p),E=_.boundingClientRect;return new W((f.clientX-E.left)/_.x-p.clientLeft,(f.clientY-E.top)/_.y-p.clientTop)}var rE=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function N1(f){return Ze.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/rE:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function ug(f,p){var _=p.relatedTarget;if(!_)return!0;try{for(;_&&_!==f;)_=_.parentNode}catch{return!1}return _!==f}var oE={__proto__:null,on:gt,off:Jt,stopPropagation:Ka,disableScrollPropagation:sg,disableClickPropagation:Xs,preventDefault:Yn,stop:Ks,getPropagationPath:P1,getMousePosition:lg,getWheelDelta:N1,isExternalTarget:ug,addListener:gt,removeListener:Jt},fh=K.extend({run:function(f,p,_,E){this.stop(),this._el=f,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Xa(f),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(f){var p=+new Date-this._startTime,_=this._duration*1e3;p<_?this._runFrame(this._easeOut(p/_),f):(this._runFrame(1),this._complete())},_runFrame:function(f,p){var _=this._startPos.add(this._offset.multiplyBy(f));p&&_._round(),An(this._el,_),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),C=K.extend({options:{crs:Tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,p){p=y(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(Fe(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=iu&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gt(this._proxy,A1,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,p,_){if(p=p===void 0?this._zoom:this._limitZoom(p),f=this._limitCenter(Fe(f),p,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var E=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,p,_.zoom):this._tryAnimatedPan(f,_.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(f,p,_.pan&&_.pan.noMoveStart),this},setZoom:function(f,p){return this._loaded?this.setView(this.getCenter(),f,{zoom:p}):(this._zoom=f,this)},zoomIn:function(f,p){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,p)},zoomOut:function(f,p){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,p)},setZoomAround:function(f,p,_){var E=this.getZoomScale(p),A=this.getSize().divideBy(2),I=f instanceof W?f:this.latLngToContainerPoint(f),Y=I.subtract(A).multiplyBy(1-1/E),ee=this.containerPointToLatLng(A.add(Y));return this.setView(ee,p,{zoom:_})},_getBoundsCenterZoom:function(f,p){p=p||{},f=f.getBounds?f.getBounds():pe(f);var _=Q(p.paddingTopLeft||p.padding||[0,0]),E=Q(p.paddingBottomRight||p.padding||[0,0]),A=this.getBoundsZoom(f,!1,_.add(E));if(A=typeof p.maxZoom=="number"?Math.min(p.maxZoom,A):A,A===1/0)return{center:f.getCenter(),zoom:A};var I=E.subtract(_).divideBy(2),Y=this.project(f.getSouthWest(),A),ee=this.project(f.getNorthEast(),A),te=this.unproject(Y.add(ee).divideBy(2).add(I),A);return{center:te,zoom:A}},fitBounds:function(f,p){if(f=pe(f),!f.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(f,p);return this.setView(_.center,_.zoom,p)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,p){return this.setView(f,this._zoom,{pan:p})},panBy:function(f,p){if(f=Q(f).round(),p=p||{},!f.x&&!f.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){xt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,_,p.duration||.25,p.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,p,_){if(_=_||{},_.animate===!1||!Ze.any3d)return this.setView(f,p,_);this._stop();var E=this.project(this.getCenter()),A=this.project(f),I=this.getSize(),Y=this._zoom;f=Fe(f),p=p===void 0?Y:p;var ee=Math.max(I.x,I.y),te=ee*this.getZoomScale(Y,p),he=A.distanceTo(E)||1,Le=1.42,ct=Le*Le;function kt(Un){var H1=Un?-1:1,hie=Un?te:ee,pie=te*te-ee*ee+H1*ct*ct*he*he,mie=2*hie*ct*he,hE=pie/mie,NL=Math.sqrt(hE*hE+1)-hE,gie=NL<1e-9?-18:Math.log(NL);return gie}function ir(Un){return(Math.exp(Un)-Math.exp(-Un))/2}function ai(Un){return(Math.exp(Un)+Math.exp(-Un))/2}function Mo(Un){return ir(Un)/ai(Un)}var Fr=kt(0);function gh(Un){return ee*(ai(Fr)/ai(Fr+Le*Un))}function uie(Un){return ee*(ai(Fr)*Mo(Fr+Le*Un)-ir(Fr))/ct}function cie(Un){return 1-Math.pow(1-Un,1.5)}var fie=Date.now(),FL=(kt(1)-Fr)/Le,die=_.duration?1e3*_.duration:1e3*FL*.8;function PL(){var Un=(Date.now()-fie)/die,H1=cie(Un)*FL;Un<=1?(this._flyToFrame=U(PL,this),this._move(this.unproject(E.add(A.subtract(E).multiplyBy(uie(H1)/he)),Y),this.getScaleZoom(ee/gh(H1),Y),{flyTo:!0})):this._move(f,p)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),PL.call(this),this},flyToBounds:function(f,p){var _=this._getBoundsCenterZoom(f,p);return this.flyTo(_.center,_.zoom,p)},setMaxBounds:function(f){return f=pe(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var p=this.options.minZoom;return this.options.minZoom=f,this._loaded&&p!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var p=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&p!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,p){this._enforcingBounds=!0;var _=this.getCenter(),E=this._limitCenter(_,this._zoom,pe(f));return _.equals(E)||this.panTo(E,p),this._enforcingBounds=!1,this},panInside:function(f,p){p=p||{};var _=Q(p.paddingTopLeft||p.padding||[0,0]),E=Q(p.paddingBottomRight||p.padding||[0,0]),A=this.project(this.getCenter()),I=this.project(f),Y=this.getPixelBounds(),ee=ge([Y.min.add(_),Y.max.subtract(E)]),te=ee.getSize();if(!ee.contains(I)){this._enforcingBounds=!0;var he=I.subtract(ee.getCenter()),Le=ee.extend(I).getSize().subtract(te);A.x+=he.x<0?-Le.x:Le.x,A.y+=he.y<0?-Le.y:Le.y,this.panTo(this.unproject(A),p),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=r({animate:!1,pan:!0},f===!0?{animate:!0}:f);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),E=p.divideBy(2).round(),A=_.divideBy(2).round(),I=E.subtract(A);return!I.x&&!I.y?this:(f.animate&&f.pan?this.panBy(I):(f.pan&&this._rawPanBy(I),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=r({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=a(this._handleGeolocationResponse,this),_=a(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,_,f):navigator.geolocation.getCurrentPosition(p,_,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var p=f.code,_=f.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var p=f.coords.latitude,_=f.coords.longitude,E=new Se(p,_),A=E.toBounds(f.coords.accuracy*2),I=this._locateOptions;if(I.setView){var Y=this.getBoundsZoom(A);this.setView(E,I.maxZoom?Math.min(Y,I.maxZoom):Y)}var ee={latlng:E,bounds:A,timestamp:f.timestamp};for(var te in f.coords)typeof f.coords[te]=="number"&&(ee[te]=f.coords[te]);this.fire("locationfound",ee)}},addHandler:function(f,p){if(!p)return this;var _=this[f]=new p(this);return this._handlers.push(_),this.options[f]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)fn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,p){var _="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),E=Dt("div",_,p||this._mapPane);return f&&(this._panes[f]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),p=this.unproject(f.getBottomLeft()),_=this.unproject(f.getTopRight());return new ke(p,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,p,_){f=pe(f),_=Q(_||[0,0]);var E=this.getZoom()||0,A=this.getMinZoom(),I=this.getMaxZoom(),Y=f.getNorthWest(),ee=f.getSouthEast(),te=this.getSize().subtract(_),he=ge(this.project(ee,E),this.project(Y,E)).getSize(),Le=Ze.any3d?this.options.zoomSnap:1,ct=te.x/he.x,kt=te.y/he.y,ir=p?Math.max(ct,kt):Math.min(ct,kt);return E=this.getScaleZoom(ir,E),Le&&(E=Math.round(E/(Le/100))*(Le/100),E=p?Math.ceil(E/Le)*Le:Math.floor(E/Le)*Le),Math.max(A,Math.min(I,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,p){var _=this._getTopLeftPoint(f,p);return new ae(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,p){var _=this.options.crs;return p=p===void 0?this._zoom:p,_.scale(f)/_.scale(p)},getScaleZoom:function(f,p){var _=this.options.crs;p=p===void 0?this._zoom:p;var E=_.zoom(f*_.scale(p));return isNaN(E)?1/0:E},project:function(f,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(Fe(f),p)},unproject:function(f,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Q(f),p)},layerPointToLatLng:function(f){var p=Q(f).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(f){var p=this.project(Fe(f))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(Fe(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(pe(f))},distance:function(f,p){return this.options.crs.distance(Fe(f),Fe(p))},containerPointToLayerPoint:function(f){return Q(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return Q(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var p=this.containerPointToLayerPoint(Q(f));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Fe(f)))},mouseEventToContainerPoint:function(f){return lg(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var p=this._container=M1(f);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gt(p,"scroll",this._onScroll,this),this._containerId=l(p)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,xt(f,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Kc(f,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),An(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(f.markerPane,"leaflet-zoom-hide"),xt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,p,_){An(this._mapPane,new W(0,0));var E=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var A=this._zoom!==p;this._moveStart(A,_)._move(f,p)._moveEnd(A),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(f,p){return f&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(f,p,_,E){p===void 0&&(p=this._zoom);var A=this._zoom!==p;return this._zoom=p,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),E?_&&_.pinch&&this.fire("zoom",_):((A||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){An(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var p=f?Jt:gt;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,p){for(var _=[],E,A=p==="mouseout"||p==="mouseover",I=f.target||f.srcElement,Y=!1;I;){if(E=this._targets[l(I)],E&&(p==="click"||p==="preclick")&&this._draggableMoved(E)){Y=!0;break}if(E&&E.listens(p,!0)&&(A&&!ug(I,f)||(_.push(E),A))||I===this._container)break;I=I.parentNode}return!_.length&&!Y&&!A&&this.listens(p,!0)&&(_=[this]),_},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var p=f.target||f.srcElement;if(!(!this._loaded||p._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(p))){var _=f.type;_==="mousedown"&&og(p),this._fireDOMEvent(f,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,p,_){if(f.type==="click"){var E=r({},f);E.type="preclick",this._fireDOMEvent(E,E.type,_)}var A=this._findEventTargets(f,p);if(_){for(var I=[],Y=0;Y<_.length;Y++)_[Y].listens(p,!0)&&I.push(_[Y]);A=I.concat(A)}if(A.length){p==="contextmenu"&&Yn(f);var ee=A[0],te={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var he=ee.getLatLng&&(!ee._radius||ee._radius<=10);te.containerPoint=he?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(f),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=he?ee.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(Y=0;Y<A.length;Y++)if(A[Y].fire(p,te,!0),te.originalEvent._stopped||A[Y].options.bubblingMouseEvents===!1&&k(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,p=this._handlers.length;f<p;f++)this._handlers[f].disable()},whenReady:function(f,p){return this._loaded?f.call(p||this,{target:this}):this.on("load",f,p),this},_getMapPanePos:function(){return Xa(this._mapPane)||new W(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,p){var _=f&&p!==void 0?this._getNewPixelOrigin(f,p):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,p){var _=this.getSize()._divideBy(2);return this.project(f,p)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,p,_){var E=this._getNewPixelOrigin(_,p);return this.project(f,p)._subtract(E)},_latLngBoundsToNewLayerBounds:function(f,p,_){var E=this._getNewPixelOrigin(_,p);return ge([this.project(f.getSouthWest(),p)._subtract(E),this.project(f.getNorthWest(),p)._subtract(E),this.project(f.getSouthEast(),p)._subtract(E),this.project(f.getNorthEast(),p)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,p,_){if(!_)return f;var E=this.project(f,p),A=this.getSize().divideBy(2),I=new ae(E.subtract(A),E.add(A)),Y=this._getBoundsOffset(I,_,p);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?f:this.unproject(E.add(Y),p)},_limitOffset:function(f,p){if(!p)return f;var _=this.getPixelBounds(),E=new ae(_.min.add(f),_.max.add(f));return f.add(this._getBoundsOffset(E,p))},_getBoundsOffset:function(f,p,_){var E=ge(this.project(p.getNorthEast(),_),this.project(p.getSouthWest(),_)),A=E.min.subtract(f.min),I=E.max.subtract(f.max),Y=this._rebound(A.x,-I.x),ee=this._rebound(A.y,-I.y);return new W(Y,ee)},_rebound:function(f,p){return f+p>0?Math.round(f-p)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(p))},_limitZoom:function(f){var p=this.getMinZoom(),_=this.getMaxZoom(),E=Ze.any3d?this.options.zoomSnap:1;return E&&(f=Math.round(f/E)*E),Math.max(p,Math.min(_,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Cn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,p){var _=this._getCenterOffset(f)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,p),!0)},_createAnimProxy:function(){var f=this._proxy=Dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(p){var _=ih,E=this._proxy.style[_];Zs(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),E===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),p=this.getZoom();Zs(this._proxy,this.project(f,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,p,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(p),A=this._getCenterOffset(f)._divideBy(1-1/E);return _.animate!==!0&&!this.getSize().contains(A)?!1:(U(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(f,p,!0)},this),!0)},_animateZoom:function(f,p,_,E){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=p,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:p,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Cn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function F(f,p){return new C(f,p)}var $=O.extend({options:{position:"topright"},initialize:function(f){y(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var p=this._map;return p&&p.removeControl(this),this.options.position=f,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var p=this._container=this.onAdd(f),_=this.getPosition(),E=f._controlCorners[_];return xt(p,"leaflet-control"),_.indexOf("bottom")!==-1?E.insertBefore(p,E.firstChild):E.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),D=function(f){return new $(f)};C.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},p="leaflet-",_=this._controlContainer=Dt("div",p+"control-container",this._container);function E(A,I){var Y=p+A+" "+p+I;f[A+I]=Dt("div",Y,_)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)fn(this._controlCorners[f]);fn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var V=$.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,p,_,E){return _<E?-1:E<_?1:0}},initialize:function(f,p,_){y(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in f)this._addLayer(f[E],E);for(E in p)this._addLayer(p[E],E,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return $.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,p){return this._addLayer(f,p),this._map?this._update():this},addOverlay:function(f,p){return this._addLayer(f,p,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var p=this._getLayer(l(f));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Cn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Cn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",p=this._container=Dt("div",f),_=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Xs(p),sg(p);var E=this._section=Dt("section",f+"-list");_&&(this._map.on("click",this.collapse,this),gt(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Dt("a",f+"-toggle",p);A.href="#",A.title="Layers",A.setAttribute("role","button"),gt(A,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){Yn(I),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Dt("div",f+"-base",E),this._separator=Dt("div",f+"-separator",E),this._overlaysList=Dt("div",f+"-overlays",E),p.appendChild(E)},_getLayer:function(f){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&l(this._layers[p].layer)===f)return this._layers[p]},_addLayer:function(f,p,_){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:p,overlay:_}),this.options.sortLayers&&this._layers.sort(a(function(E,A){return this.options.sortFunction(E.layer,A.layer,E.name,A.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rh(this._baseLayersList),rh(this._overlaysList),this._layerControlInputs=[];var f,p,_,E,A=0;for(_=0;_<this._layers.length;_++)E=this._layers[_],this._addItem(E),p=p||E.overlay,f=f||!E.overlay,A+=E.overlay?0:1;return this.options.hideSingleBase&&(f=f&&A>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=p&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var p=this._getLayer(l(f.target)),_=p.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;_&&this._map.fire(_,p)},_createRadioElement:function(f,p){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(p?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=_,E.firstChild},_addItem:function(f){var p=document.createElement("label"),_=this._map.hasLayer(f.layer),E;f.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=_):E=this._createRadioElement("leaflet-base-layers_"+l(this),_),this._layerControlInputs.push(E),E.layerId=l(f.layer),gt(E,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+f.name;var I=document.createElement("span");p.appendChild(I),I.appendChild(E),I.appendChild(A);var Y=f.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,p,_,E=[],A=[];this._handlingClick=!0;for(var I=f.length-1;I>=0;I--)p=f[I],_=this._getLayer(p.layerId).layer,p.checked?E.push(_):p.checked||A.push(_);for(I=0;I<A.length;I++)this._map.hasLayer(A[I])&&this._map.removeLayer(A[I]);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])||this._map.addLayer(E[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,p,_,E=this._map.getZoom(),A=f.length-1;A>=0;A--)p=f[A],_=this._getLayer(p.layerId).layer,p.disabled=_.options.minZoom!==void 0&&E<_.options.minZoom||_.options.maxZoom!==void 0&&E>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,gt(f,"click",Yn),this.expand();var p=this;setTimeout(function(){Jt(f,"click",Yn),p._preventClick=!1})}}),G=function(f,p,_){return new V(f,p,_)},Z=$.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var p="leaflet-control-zoom",_=Dt("div",p+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,p+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,p+"-out",_,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,p,_,E,A){var I=Dt("a",_,E);return I.innerHTML=f,I.href="#",I.title=p,I.setAttribute("role","button"),I.setAttribute("aria-label",p),Xs(I),gt(I,"click",Ks),gt(I,"click",A,this),gt(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var f=this._map,p="leaflet-disabled";Cn(this._zoomInButton,p),Cn(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(xt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(xt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});C.mergeOptions({zoomControl:!0}),C.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Z,this.addControl(this.zoomControl))});var ie=function(f){return new Z(f)},re=$.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var p="leaflet-control-scale",_=Dt("div",p),E=this.options;return this._addScales(E,p+"-line",_),f.on(E.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),_},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,p,_){f.metric&&(this._mScale=Dt("div",p,_)),f.imperial&&(this._iScale=Dt("div",p,_))},_update:function(){var f=this._map,p=f.getSize().y/2,_=f.distance(f.containerPointToLatLng([0,p]),f.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(_)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var p=this._getRoundNum(f),_=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,_,p/f)},_updateImperial:function(f){var p=f*3.2808399,_,E,A;p>5280?(_=p/5280,E=this._getRoundNum(_),this._updateScale(this._iScale,E+" mi",E/_)):(A=this._getRoundNum(p),this._updateScale(this._iScale,A+" ft",A/p))},_updateScale:function(f,p,_){f.style.width=Math.round(this.options.maxWidth*_)+"px",f.innerHTML=p},_getRoundNum:function(f){var p=Math.pow(10,(Math.floor(f)+"").length-1),_=f/p;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,p*_}}),ue=function(f){return new re(f)},Re='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ye=$.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?Re+" ":"")+"Leaflet</a>"},initialize:function(f){y(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Dt("div","leaflet-control-attribution"),Xs(this._container);for(var p in f._layers)f._layers[p].getAttribution&&this.addAttribution(f._layers[p].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var p in this._attributions)this._attributions[p]&&f.push(p);var _=[];this.options.prefix&&_.push(this.options.prefix),f.length&&_.push(f.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});C.mergeOptions({attributionControl:!0}),C.addInitHook(function(){this.options.attributionControl&&new ye().addTo(this)});var Ce=function(f){return new ye(f)};$.Layers=V,$.Zoom=Z,$.Scale=re,$.Attribution=ye,D.layers=G,D.zoom=ie,D.scale=ue,D.attribution=Ce;var fe=O.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fe.addTo=function(f,p){return f.addHandler(p,this),this};var Ee={Events:q},Ne=Ze.touch?"touchstart mousedown":"mousedown",Pe=K.extend({options:{clickTolerance:3},initialize:function(f,p,_,E){y(this,E),this._element=f,this._dragStartTarget=p||f,this._preventOutline=_},enable:function(){this._enabled||(gt(this._dragStartTarget,Ne,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pe._dragging===this&&this.finishDrag(!0),Jt(this._dragStartTarget,Ne,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!tg(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Pe._dragging===this&&this.finishDrag();return}if(!(Pe._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Pe._dragging=this,this._preventOutline&&og(this._element),ig(),au(),!this._moving)){this.fire("down");var p=f.touches?f.touches[0]:f,_=F1(this._element);this._startPoint=new W(p.clientX,p.clientY),this._startPos=Xa(this._element),this._parentScale=ag(_);var E=f.type==="mousedown";gt(document,E?"mousemove":"touchmove",this._onMove,this),gt(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var p=f.touches&&f.touches.length===1?f.touches[0]:f,_=new W(p.clientX,p.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Yn(f),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),An(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Cn(document.body,"leaflet-dragging"),this._lastTarget&&(Cn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Jt(document,"mousemove touchmove",this._onMove,this),Jt(document,"mouseup touchend touchcancel",this._onUp,this),lh(),su();var p=this._moved&&this._moving;this._moving=!1,Pe._dragging=!1,p&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function Ge(f,p,_){var E,A=[1,4,2,8],I,Y,ee,te,he,Le,ct,kt;for(I=0,Le=f.length;I<Le;I++)f[I]._code=yt(f[I],p);for(ee=0;ee<4;ee++){for(ct=A[ee],E=[],I=0,Le=f.length,Y=Le-1;I<Le;Y=I++)te=f[I],he=f[Y],te._code&ct?he._code&ct||(kt=St(he,te,ct,p,_),kt._code=yt(kt,p),E.push(kt)):(he._code&ct&&(kt=St(he,te,ct,p,_),kt._code=yt(kt,p),E.push(kt)),E.push(te));f=E}return f}function pt(f,p){var _,E,A,I,Y,ee,te,he,Le;if(!f||f.length===0)throw new Error("latlngs not passed");ut(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var ct=Fe([0,0]),kt=pe(f),ir=kt.getNorthWest().distanceTo(kt.getSouthWest())*kt.getNorthEast().distanceTo(kt.getNorthWest());ir<1700&&(ct=He(f));var ai=f.length,Mo=[];for(_=0;_<ai;_++){var Fr=Fe(f[_]);Mo.push(p.project(Fe([Fr.lat-ct.lat,Fr.lng-ct.lng])))}for(ee=te=he=0,_=0,E=ai-1;_<ai;E=_++)A=Mo[_],I=Mo[E],Y=A.y*I.x-I.y*A.x,te+=(A.x+I.x)*Y,he+=(A.y+I.y)*Y,ee+=Y*3;ee===0?Le=Mo[0]:Le=[te/ee,he/ee];var gh=p.unproject(Q(Le));return Fe([gh.lat+ct.lat,gh.lng+ct.lng])}function He(f){for(var p=0,_=0,E=0,A=0;A<f.length;A++){var I=Fe(f[A]);p+=I.lat,_+=I.lng,E++}return Fe([p/E,_/E])}var Me={__proto__:null,clipPolygon:Ge,polygonCenter:pt,centroid:He};function lt(f,p){if(!p||!f.length)return f.slice();var _=p*p;return f=ot(f,_),f=wt(f,_),f}function je(f,p,_){return Math.sqrt(Ue(f,p,_,!0))}function at(f,p,_){return Ue(f,p,_)}function wt(f,p){var _=f.length,E=typeof Uint8Array<"u"?Uint8Array:Array,A=new E(_);A[0]=A[_-1]=1,Ke(f,A,p,0,_-1);var I,Y=[];for(I=0;I<_;I++)A[I]&&Y.push(f[I]);return Y}function Ke(f,p,_,E,A){var I=0,Y,ee,te;for(ee=E+1;ee<=A-1;ee++)te=Ue(f[ee],f[E],f[A],!0),te>I&&(Y=ee,I=te);I>_&&(p[Y]=1,Ke(f,p,_,E,Y),Ke(f,p,_,Y,A))}function ot(f,p){for(var _=[f[0]],E=1,A=0,I=f.length;E<I;E++)Yt(f[E],f[A])>p&&(_.push(f[E]),A=E);return A<I-1&&_.push(f[I-1]),_}var At;function st(f,p,_,E,A){var I=E?At:yt(f,_),Y=yt(p,_),ee,te,he;for(At=Y;;){if(!(I|Y))return[f,p];if(I&Y)return!1;ee=I||Y,te=St(f,p,ee,_,A),he=yt(te,_),ee===I?(f=te,I=he):(p=te,Y=he)}}function St(f,p,_,E,A){var I=p.x-f.x,Y=p.y-f.y,ee=E.min,te=E.max,he,Le;return _&8?(he=f.x+I*(te.y-f.y)/Y,Le=te.y):_&4?(he=f.x+I*(ee.y-f.y)/Y,Le=ee.y):_&2?(he=te.x,Le=f.y+Y*(te.x-f.x)/I):_&1&&(he=ee.x,Le=f.y+Y*(ee.x-f.x)/I),new W(he,Le,A)}function yt(f,p){var _=0;return f.x<p.min.x?_|=1:f.x>p.max.x&&(_|=2),f.y<p.min.y?_|=4:f.y>p.max.y&&(_|=8),_}function Yt(f,p){var _=p.x-f.x,E=p.y-f.y;return _*_+E*E}function Ue(f,p,_,E){var A=p.x,I=p.y,Y=_.x-A,ee=_.y-I,te=Y*Y+ee*ee,he;return te>0&&(he=((f.x-A)*Y+(f.y-I)*ee)/te,he>1?(A=_.x,I=_.y):he>0&&(A+=Y*he,I+=ee*he)),Y=f.x-A,ee=f.y-I,E?Y*Y+ee*ee:new W(A,I)}function ut(f){return!S(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function dn(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ut(f)}function oi(f,p){var _,E,A,I,Y,ee,te,he;if(!f||f.length===0)throw new Error("latlngs not passed");ut(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Le=Fe([0,0]),ct=pe(f),kt=ct.getNorthWest().distanceTo(ct.getSouthWest())*ct.getNorthEast().distanceTo(ct.getNorthWest());kt<1700&&(Le=He(f));var ir=f.length,ai=[];for(_=0;_<ir;_++){var Mo=Fe(f[_]);ai.push(p.project(Fe([Mo.lat-Le.lat,Mo.lng-Le.lng])))}for(_=0,E=0;_<ir-1;_++)E+=ai[_].distanceTo(ai[_+1])/2;if(E===0)he=ai[0];else for(_=0,I=0;_<ir-1;_++)if(Y=ai[_],ee=ai[_+1],A=Y.distanceTo(ee),I+=A,I>E){te=(I-E)/A,he=[ee.x-te*(ee.x-Y.x),ee.y-te*(ee.y-Y.y)];break}var Fr=p.unproject(Q(he));return Fe([Fr.lat+Le.lat,Fr.lng+Le.lng])}var nt={__proto__:null,simplify:lt,pointToSegmentDistance:je,closestPointOnSegment:at,clipSegment:st,_getEdgeIntersection:St,_getBitCode:yt,_sqClosestPointOnSegment:Ue,isFlat:ut,_flat:dn,polylineCenter:oi},nn={project:function(f){return new W(f.lng,f.lat)},unproject:function(f){return new Se(f.y,f.x)},bounds:new ae([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ae([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var p=Math.PI/180,_=this.R,E=f.lat*p,A=this.R_MINOR/_,I=Math.sqrt(1-A*A),Y=I*Math.sin(E),ee=Math.tan(Math.PI/4-E/2)/Math.pow((1-Y)/(1+Y),I/2);return E=-_*Math.log(Math.max(ee,1e-10)),new W(f.lng*p*_,E)},unproject:function(f){for(var p=180/Math.PI,_=this.R,E=this.R_MINOR/_,A=Math.sqrt(1-E*E),I=Math.exp(-f.y/_),Y=Math.PI/2-2*Math.atan(I),ee=0,te=.1,he;ee<15&&Math.abs(te)>1e-7;ee++)he=A*Math.sin(Y),he=Math.pow((1-he)/(1+he),A/2),te=Math.PI/2-2*Math.atan(I*he)-Y,Y+=te;return new Se(Y*p,f.x*p/_)}},bi={__proto__:null,LonLat:nn,Mercator:vn,SphericalMercator:Ye},Hn=r({},Et,{code:"EPSG:3395",projection:vn,transformation:function(){var f=.5/(Math.PI*vn.R);return ce(f,.5,-f,.5)}()}),la=r({},Et,{code:"EPSG:4326",projection:nn,transformation:ce(1/180,1,-1/180,.5)}),ua=r({},Nt,{projection:nn,transformation:ce(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,p){var _=p.lng-f.lng,E=p.lat-f.lat;return Math.sqrt(_*_+E*E)},infinite:!0});Nt.Earth=Et,Nt.EPSG3395=Hn,Nt.EPSG3857=Tt,Nt.EPSG900913=ft,Nt.EPSG4326=la,Nt.Simple=ua;var Tr=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var p=f.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var _=this.getEvents();p.on(_,this),this.once("remove",function(){p.off(_,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});C.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var p=l(f);return this._layers[p]?this:(this._layers[p]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var p=l(f);return this._layers[p]?(this._loaded&&f.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,p){for(var _ in this._layers)f.call(p,this._layers[_]);return this},_addLayers:function(f){f=f?S(f)?f:[f]:[];for(var p=0,_=f.length;p<_;p++)this.addLayer(f[p])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var p=l(f);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,p=-1/0,_=this._getZoomSpan();for(var E in this._zoomBoundLayers){var A=this._zoomBoundLayers[E].options;f=A.minZoom===void 0?f:Math.min(f,A.minZoom),p=A.maxZoom===void 0?p:Math.max(p,A.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=f===1/0?void 0:f,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ja=Tr.extend({initialize:function(f,p){y(this,p),this._layers={};var _,E;if(f)for(_=0,E=f.length;_<E;_++)this.addLayer(f[_])},addLayer:function(f){var p=this.getLayerId(f);return this._layers[p]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var p=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(f){var p=typeof f=="number"?f:this.getLayerId(f);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var p=Array.prototype.slice.call(arguments,1),_,E;for(_ in this._layers)E=this._layers[_],E[f]&&E[f].apply(E,p);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,p){for(var _ in this._layers)f.call(p,this._layers[_]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),aE=function(f,p){return new Ja(f,p)},Ar=Ja.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),Ja.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),Ja.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new ke;for(var p in this._layers){var _=this._layers[p];f.extend(_.getBounds?_.getBounds():_.getLatLng())}return f}}),sE=function(f,p){return new Ar(f,p)},Js=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){y(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,p){var _=this._getIconUrl(f);if(!_){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(_,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(E,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(f,p){var _=this.options,E=_[p+"Size"];typeof E=="number"&&(E=[E,E]);var A=Q(E),I=Q(p==="shadow"&&_.shadowAnchor||_.iconAnchor||A&&A.divideBy(2,!0));f.className="leaflet-marker-"+p+" "+(_.className||""),I&&(f.style.marginLeft=-I.x+"px",f.style.marginTop=-I.y+"px"),A&&(f.style.width=A.x+"px",f.style.height=A.y+"px")},_createImg:function(f,p){return p=p||document.createElement("img"),p.src=f,p},_getIconUrl:function(f){return Ze.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function dh(f){return new Js(f)}var Qa=Js.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Qa.imagePath!="string"&&(Qa.imagePath=this._detectIconPath()),(this.options.imagePath||Qa.imagePath)+Js.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var p=function(_,E,A){var I=E.exec(_);return I&&I[A]};return f=p(f,/^url\((['"])?(.+)\1\)$/,2),f&&p(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Dt("div","leaflet-default-icon-path",document.body),p=Kc(f,"background-image")||Kc(f,"backgroundImage");if(document.body.removeChild(f),p=this._stripUrl(p),p)return p;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),cg=fe.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Pe(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Cn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var p=this._marker,_=p._map,E=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,I=Xa(p._icon),Y=_.getPixelBounds(),ee=_.getPixelOrigin(),te=ge(Y.min._subtract(ee).add(A),Y.max._subtract(ee).subtract(A));if(!te.contains(I)){var he=Q((Math.max(te.max.x,I.x)-te.max.x)/(Y.max.x-te.max.x)-(Math.min(te.min.x,I.x)-te.min.x)/(Y.min.x-te.min.x),(Math.max(te.max.y,I.y)-te.max.y)/(Y.max.y-te.max.y)-(Math.min(te.min.y,I.y)-te.min.y)/(Y.min.y-te.min.y)).multiplyBy(E);_.panBy(he,{animate:!1}),this._draggable._newPos._add(he),this._draggable._startPos._add(he),An(p._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=U(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,f)))},_onDrag:function(f){var p=this._marker,_=p._shadow,E=Xa(p._icon),A=p._map.layerPointToLatLng(E);_&&An(_,E),p._latlng=A,f.latlng=A,f.oldLatLng=this._oldLatLng,p.fire("move",f).fire("drag",f)},_onDragEnd:function(f){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),rf=Tr.extend({options:{icon:new Qa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,p){y(this,p),this._latlng=Fe(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var p=this._latlng;return this._latlng=Fe(f),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=f.icon.createIcon(this._icon),E=!1;_!==this._icon&&(this._icon&&this._removeIcon(),E=!0,f.title&&(_.title=f.title),_.tagName==="IMG"&&(_.alt=f.alt||"")),xt(_,p),f.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(_,"focus",this._panOnFocus,this);var A=f.icon.createShadow(this._shadow),I=!1;A!==this._shadow&&(this._removeShadow(),I=!0),A&&(xt(A,p),A.alt=""),this._shadow=A,f.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&I&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(this._icon,"focus",this._panOnFocus,this),fn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&An(this._icon,f),this._shadow&&An(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),cg)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cg(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&kr(this._icon,f),this._shadow&&kr(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var p=this.options.icon.options,_=p.iconSize?Q(p.iconSize):Q(0,0),E=p.iconAnchor?Q(p.iconAnchor):Q(0,0);f.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:_.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function lE(f,p){return new rf(f,p)}var es=Tr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return y(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wi=es.extend({options:{fill:!0,radius:10},initialize:function(f,p){y(this,p),this._latlng=Fe(f),this._radius=this.options.radius},setLatLng:function(f){var p=this._latlng;return this._latlng=Fe(f),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var p=f&&f.radius||this._radius;return es.prototype.setStyle.call(this,f),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,p=this._radiusY||f,_=this._clickTolerance(),E=[f+_,p+_];this._pxBounds=new ae(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fg(f,p){return new wi(f,p)}var dg=wi.extend({initialize:function(f,p,_){if(typeof p=="number"&&(p=r({},_,{radius:p})),y(this,p),this._latlng=Fe(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new ke(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:es.prototype.setStyle,_project:function(){var f=this._latlng.lng,p=this._latlng.lat,_=this._map,E=_.options.crs;if(E.distance===Et.distance){var A=Math.PI/180,I=this._mRadius/Et.R/A,Y=_.project([p+I,f]),ee=_.project([p-I,f]),te=Y.add(ee).divideBy(2),he=_.unproject(te).lat,Le=Math.acos((Math.cos(I*A)-Math.sin(p*A)*Math.sin(he*A))/(Math.cos(p*A)*Math.cos(he*A)))/A;(isNaN(Le)||Le===0)&&(Le=I/Math.cos(Math.PI/180*p)),this._point=te.subtract(_.getPixelOrigin()),this._radius=isNaN(Le)?0:te.x-_.project([he,f-Le]).x,this._radiusY=te.y-Y.y}else{var ct=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(ct).x}this._updateBounds()}});function hh(f,p,_){return new dg(f,p,_)}var Zt=es.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,p){y(this,p),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var p=1/0,_=null,E=Ue,A,I,Y=0,ee=this._parts.length;Y<ee;Y++)for(var te=this._parts[Y],he=1,Le=te.length;he<Le;he++){A=te[he-1],I=te[he];var ct=E(f,A,I,!0);ct<p&&(p=ct,_=E(f,A,I))}return _&&(_.distance=Math.sqrt(p)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,p){return p=p||this._defaultShape(),f=Fe(f),p.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new ke,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var p=[],_=ut(f),E=0,A=f.length;E<A;E++)_?(p[E]=Fe(f[E]),this._bounds.extend(p[E])):p[E]=this._convertLatLngs(f[E]);return p},_project:function(){var f=new ae;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),p=new W(f,f);this._rawPxBounds&&(this._pxBounds=new ae([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(f,p,_){var E=f[0]instanceof Se,A=f.length,I,Y;if(E){for(Y=[],I=0;I<A;I++)Y[I]=this._map.latLngToLayerPoint(f[I]),_.extend(Y[I]);p.push(Y)}else for(I=0;I<A;I++)this._projectLatlngs(f[I],p,_)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,_,E,A,I,Y,ee,te;for(_=0,A=0,I=this._rings.length;_<I;_++)for(te=this._rings[_],E=0,Y=te.length;E<Y-1;E++)ee=st(te[E],te[E+1],f,E,!0),ee&&(p[A]=p[A]||[],p[A].push(ee[0]),(ee[1]!==te[E+1]||E===Y-2)&&(p[A].push(ee[1]),A++))}},_simplifyPoints:function(){for(var f=this._parts,p=this.options.smoothFactor,_=0,E=f.length;_<E;_++)f[_]=lt(f[_],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,p){var _,E,A,I,Y,ee,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(_=0,I=this._parts.length;_<I;_++)for(ee=this._parts[_],E=0,Y=ee.length,A=Y-1;E<Y;A=E++)if(!(!p&&E===0)&&je(f,ee[A],ee[E])<=te)return!0;return!1}});function $1(f,p){return new Zt(f,p)}Zt._flat=dn;var lu=Zt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var p=Zt.prototype._convertLatLngs.call(this,f),_=p.length;return _>=2&&p[0]instanceof Se&&p[0].equals(p[_-1])&&p.pop(),p},_setLatLngs:function(f){Zt.prototype._setLatLngs.call(this,f),ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,p=this.options.weight,_=new W(p,p);if(f=new ae(f.min.subtract(_),f.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,A=this._rings.length,I;E<A;E++)I=Ge(this._rings[E],f,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var p=!1,_,E,A,I,Y,ee,te,he;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(I=0,te=this._parts.length;I<te;I++)for(_=this._parts[I],Y=0,he=_.length,ee=he-1;Y<he;ee=Y++)E=_[Y],A=_[ee],E.y>f.y!=A.y>f.y&&f.x<(A.x-E.x)*(f.y-E.y)/(A.y-E.y)+E.x&&(p=!p);return p||Zt.prototype._containsPoint.call(this,f,!0)}});function uE(f,p){return new lu(f,p)}var Mr=Ar.extend({initialize:function(f,p){y(this,p),this._layers={},f&&this.addData(f)},addData:function(f){var p=S(f)?f:f.features,_,E,A;if(p){for(_=0,E=p.length;_<E;_++)A=p[_],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var I=this.options;if(I.filter&&!I.filter(f))return this;var Y=uu(f,I);return Y?(Y.feature=D1(f),Y.defaultOptions=Y.options,this.resetStyle(Y),I.onEachFeature&&I.onEachFeature(f,Y),this.addLayer(Y)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=r({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(p){this._setLayerStyle(p,f)},this)},_setLayerStyle:function(f,p){f.setStyle&&(typeof p=="function"&&(p=p(f.feature)),f.setStyle(p))}});function uu(f,p){var _=f.type==="Feature"?f.geometry:f,E=_?_.coordinates:null,A=[],I=p&&p.pointToLayer,Y=p&&p.coordsToLatLng||cE,ee,te,he,Le;if(!E&&!_)return null;switch(_.type){case"Point":return ee=Y(E),hg(I,f,ee,p);case"MultiPoint":for(he=0,Le=E.length;he<Le;he++)ee=Y(E[he]),A.push(hg(I,f,ee,p));return new Ar(A);case"LineString":case"MultiLineString":return te=I1(E,_.type==="LineString"?0:1,Y),new Zt(te,p);case"Polygon":case"MultiPolygon":return te=I1(E,_.type==="Polygon"?1:2,Y),new lu(te,p);case"GeometryCollection":for(he=0,Le=_.geometries.length;he<Le;he++){var ct=uu({geometry:_.geometries[he],type:"Feature",properties:f.properties},p);ct&&A.push(ct)}return new Ar(A);case"FeatureCollection":for(he=0,Le=_.features.length;he<Le;he++){var kt=uu(_.features[he],p);kt&&A.push(kt)}return new Ar(A);default:throw new Error("Invalid GeoJSON object.")}}function hg(f,p,_,E){return f?f(p,_):new rf(_,E&&E.markersInheritOptions&&E)}function cE(f){return new Se(f[1],f[0],f[2])}function I1(f,p,_){for(var E=[],A=0,I=f.length,Y;A<I;A++)Y=p?I1(f[A],p-1,_):(_||cE)(f[A]),E.push(Y);return E}function fE(f,p){return f=Fe(f),f.alt!==void 0?[h(f.lng,p),h(f.lat,p),h(f.alt,p)]:[h(f.lng,p),h(f.lat,p)]}function O1(f,p,_,E){for(var A=[],I=0,Y=f.length;I<Y;I++)A.push(p?O1(f[I],ut(f[I])?0:p-1,_,E):fE(f[I],E));return!p&&_&&A.length>0&&A.push(A[0].slice()),A}function ph(f,p){return f.feature?r({},f.feature,{geometry:p}):D1(p)}function D1(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var dE={toGeoJSON:function(f){return ph(this,{type:"Point",coordinates:fE(this.getLatLng(),f)})}};rf.include(dE),dg.include(dE),wi.include(dE),Zt.include({toGeoJSON:function(f){var p=!ut(this._latlngs),_=O1(this._latlngs,p?1:0,!1,f);return ph(this,{type:(p?"Multi":"")+"LineString",coordinates:_})}}),lu.include({toGeoJSON:function(f){var p=!ut(this._latlngs),_=p&&!ut(this._latlngs[0]),E=O1(this._latlngs,_?2:p?1:0,!0,f);return p||(E=[E]),ph(this,{type:(_?"Multi":"")+"Polygon",coordinates:E})}}),Ja.include({toMultiPoint:function(f){var p=[];return this.eachLayer(function(_){p.push(_.toGeoJSON(f).geometry.coordinates)}),ph(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(f){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(f);var _=p==="GeometryCollection",E=[];return this.eachLayer(function(A){if(A.toGeoJSON){var I=A.toGeoJSON(f);if(_)E.push(I.geometry);else{var Y=D1(I);Y.type==="FeatureCollection"?E.push.apply(E,Y.features):E.push(Y)}}}),_?ph(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function pL(f,p){return new Mr(f,p)}var Xne=pL,L1=Tr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,p,_){this._url=f,this._bounds=pe(p),y(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&ru(this._image),this},bringToBack:function(){return this._map&&ou(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=pe(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",p=this._image=f?this._url:Dt("img");if(xt(p,"leaflet-image-layer"),this._zoomAnimated&&xt(p,"leaflet-zoom-animated"),this.options.className&&xt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onload=a(this.fire,this,"load"),p.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(f){var p=this._map.getZoomScale(f.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Zs(this._image,_,p)},_reset:function(){var f=this._image,p=new ae(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=p.getSize();An(f,p.min),f.style.width=_.x+"px",f.style.height=_.y+"px"},_updateOpacity:function(){kr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Kne=function(f,p,_){return new L1(f,p,_)},mL=L1.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",p=this._image=f?this._url:Dt("video");if(xt(p,"leaflet-image-layer"),this._zoomAnimated&&xt(p,"leaflet-zoom-animated"),this.options.className&&xt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onloadeddata=a(this.fire,this,"load"),f){for(var _=p.getElementsByTagName("source"),E=[],A=0;A<_.length;A++)E.push(_[A].src);this._url=_.length>0?E:[p.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var Y=Dt("source");Y.src=this._url[I],p.appendChild(Y)}}});function Jne(f,p,_){return new mL(f,p,_)}var gL=L1.extend({_initImage:function(){var f=this._image=this._url;xt(f,"leaflet-image-layer"),this._zoomAnimated&&xt(f,"leaflet-zoom-animated"),this.options.className&&xt(f,this.options.className),f.onselectstart=d,f.onmousemove=d}});function Qne(f,p,_){return new gL(f,p,_)}var ts=Tr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,p){f&&(f instanceof Se||S(f))?(this._latlng=Fe(f),y(this,p)):(y(this,f),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&kr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&kr(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(kr(this._container,0),this._removeTimeout=setTimeout(a(fn,void 0,this._container),200)):fn(this._container),this.options.interactive&&(Cn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=Fe(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ru(this._container),this},bringToBack:function(){return this._map&&ou(this._container),this},_prepareOpen:function(f){var p=this._source;if(!p._map)return!1;if(p instanceof Ar){p=null;var _=this._source._layers;for(var E in _)if(_[E]._map){p=_[E];break}if(!p)return!1;this._source=p}if(!f)if(p.getCenter)f=p.getCenter();else if(p.getLatLng)f=p.getLatLng();else if(p.getBounds)f=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")f.innerHTML=p;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),p=Q(this.options.offset),_=this._getAnchor();this._zoomAnimated?An(this._container,f.add(_)):p=p.add(f).add(_);var E=this._containerBottom=-p.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=E+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});C.include({_initOverlay:function(f,p,_,E){var A=p;return A instanceof f||(A=new f(E).setContent(p)),_&&A.setLatLng(_),A}}),Tr.include({_initOverlay:function(f,p,_,E){var A=_;return A instanceof f?(y(A,E),A._source=this):(A=p&&!E?p:new f(E,this),A.setContent(_)),A}});var j1=ts.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,ts.prototype.openOn.call(this,f)},onAdd:function(f){ts.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof es||this._source.on("preclick",Ka))},onRemove:function(f){ts.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof es||this._source.off("preclick",Ka))},getEvents:function(){var f=ts.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",p=this._container=Dt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Dt("div",f+"-content-wrapper",p);if(this._contentNode=Dt("div",f+"-content",_),Xs(p),sg(this._contentNode),gt(p,"contextmenu",Ka),this._tipContainer=Dt("div",f+"-tip-container",p),this._tip=Dt("div",f+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=Dt("a",f+"-close-button",p);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',gt(E,"click",function(A){Yn(A),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,p=f.style;p.width="",p.whiteSpace="nowrap";var _=f.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),p.width=_+1+"px",p.whiteSpace="",p.height="";var E=f.offsetHeight,A=this.options.maxHeight,I="leaflet-popup-scrolled";A&&E>A?(p.height=A+"px",xt(f,I)):Cn(f,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),_=this._getAnchor();An(this._container,p.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,p=parseInt(Kc(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+p,E=this._containerWidth,A=new W(this._containerLeft,-_-this._containerBottom);A._add(Xa(this._container));var I=f.layerPointToContainerPoint(A),Y=Q(this.options.autoPanPadding),ee=Q(this.options.autoPanPaddingTopLeft||Y),te=Q(this.options.autoPanPaddingBottomRight||Y),he=f.getSize(),Le=0,ct=0;I.x+E+te.x>he.x&&(Le=I.x+E-he.x+te.x),I.x-Le-ee.x<0&&(Le=I.x-ee.x),I.y+_+te.y>he.y&&(ct=I.y+_-he.y+te.y),I.y-ct-ee.y<0&&(ct=I.y-ee.y),(Le||ct)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Le,ct]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),eie=function(f,p){return new j1(f,p)};C.mergeOptions({closePopupOnClick:!0}),C.include({openPopup:function(f,p,_){return this._initOverlay(j1,f,p,_).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Tr.include({bindPopup:function(f,p){return this._popup=this._initOverlay(j1,this._popup,f,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Ar||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){Ks(f);var p=f.layer||f.target;if(this._popup._source===p&&!(p instanceof es)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=p,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var z1=ts.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){ts.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){ts.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=ts.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",p=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var p,_,E=this._map,A=this._container,I=E.latLngToContainerPoint(E.getCenter()),Y=E.layerPointToContainerPoint(f),ee=this.options.direction,te=A.offsetWidth,he=A.offsetHeight,Le=Q(this.options.offset),ct=this._getAnchor();ee==="top"?(p=te/2,_=he):ee==="bottom"?(p=te/2,_=0):ee==="center"?(p=te/2,_=he/2):ee==="right"?(p=0,_=he/2):ee==="left"?(p=te,_=he/2):Y.x<I.x?(ee="right",p=0,_=he/2):(ee="left",p=te+(Le.x+ct.x)*2,_=he/2),f=f.subtract(Q(p,_,!0)).add(Le).add(ct),Cn(A,"leaflet-tooltip-right"),Cn(A,"leaflet-tooltip-left"),Cn(A,"leaflet-tooltip-top"),Cn(A,"leaflet-tooltip-bottom"),xt(A,"leaflet-tooltip-"+ee),An(A,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&kr(this._container,f)},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(p)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),tie=function(f,p){return new z1(f,p)};C.include({openTooltip:function(f,p,_){return this._initOverlay(z1,f,p,_).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Tr.include({bindTooltip:function(f,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(z1,this._tooltip,f,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var p=f?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[p](_),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Ar||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var p=typeof f.getElement=="function"&&f.getElement();p&&(gt(p,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),gt(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var p=typeof f.getElement=="function"&&f.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var p=f.latlng,_,E;this._tooltip.options.sticky&&f.originalEvent&&(_=this._map.mouseEventToContainerPoint(f.originalEvent),E=this._map.containerPointToLayerPoint(_),p=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(p)}});var yL=Js.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var p=f&&f.tagName==="DIV"?f:document.createElement("div"),_=this.options;if(_.html instanceof Element?(rh(p),p.appendChild(_.html)):p.innerHTML=_.html!==!1?_.html:"",_.bgPos){var E=Q(_.bgPos);p.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function nie(f){return new yL(f)}Js.Default=Qa;var pg=Tr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){y(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),fn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ru(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ou(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof W?f:new W(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var p=this.getPane().children,_=-f(-1/0,1/0),E=0,A=p.length,I;E<A;E++)I=p[E].style.zIndex,p[E]!==this._container&&I&&(_=f(_,+I));isFinite(_)&&(this.options.zIndex=_+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){kr(this._container,this.options.opacity);var f=+new Date,p=!1,_=!1;for(var E in this._tiles){var A=this._tiles[E];if(!(!A.current||!A.loaded)){var I=Math.min(1,(f-A.loaded)/200);kr(A.el,I),I<1?p=!0:(A.active?_=!0:this._onOpaqueTile(A),A.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),p&&(X(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,p=this.options.maxZoom;if(f!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===f?(this._levels[_].el.style.zIndex=p-Math.abs(f-_),this._onUpdateLevel(_)):(fn(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var E=this._levels[f],A=this._map;return E||(E=this._levels[f]={},E.el=Dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=p,E.origin=A.project(A.unproject(A.getPixelOrigin()),f).round(),E.zoom=f,this._setZoomTransform(E,A.getCenter(),A.getZoom()),d(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var f,p,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)p=this._tiles[f],p.retain=p.current;for(f in this._tiles)if(p=this._tiles[f],p.current&&!p.active){var E=p.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var p in this._tiles)this._tiles[p].coords.z===f&&this._removeTile(p)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)fn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,p,_,E){var A=Math.floor(f/2),I=Math.floor(p/2),Y=_-1,ee=new W(+A,+I);ee.z=+Y;var te=this._tileCoordsToKey(ee),he=this._tiles[te];return he&&he.active?(he.retain=!0,!0):(he&&he.loaded&&(he.retain=!0),Y>E?this._retainParent(A,I,Y,E):!1)},_retainChildren:function(f,p,_,E){for(var A=2*f;A<2*f+2;A++)for(var I=2*p;I<2*p+2;I++){var Y=new W(A,I);Y.z=_+1;var ee=this._tileCoordsToKey(Y),te=this._tiles[ee];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);_+1<E&&this._retainChildren(A,I,_+1,E)}},_resetView:function(f){var p=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var p=this.options;return p.minNativeZoom!==void 0&&f<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<f?p.maxNativeZoom:f},_setView:function(f,p,_,E){var A=Math.round(p);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var I=this.options.updateWhenZooming&&A!==this._tileZoom;(!E||I)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(f),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(f,p)},_setZoomTransforms:function(f,p){for(var _ in this._levels)this._setZoomTransform(this._levels[_],f,p)},_setZoomTransform:function(f,p,_){var E=this._map.getZoomScale(_,f.zoom),A=f.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(p,_)).round();Ze.any3d?Zs(f.el,A,E):An(f.el,A)},_resetGrid:function(){var f=this._map,p=f.options.crs,_=this._tileSize=this.getTileSize(),E=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,p.wrapLng[0]],E).x/_.x),Math.ceil(f.project([0,p.wrapLng[1]],E).x/_.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([p.wrapLat[0],0],E).y/_.x),Math.ceil(f.project([p.wrapLat[1],0],E).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var p=this._map,_=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),E=p.getZoomScale(_,this._tileZoom),A=p.project(f,this._tileZoom).floor(),I=p.getSize().divideBy(E*2);return new ae(A.subtract(I),A.add(I))},_update:function(f){var p=this._map;if(p){var _=this._clampZoom(p.getZoom());if(f===void 0&&(f=p.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(f),A=this._pxBoundsToTileRange(E),I=A.getCenter(),Y=[],ee=this.options.keepBuffer,te=new ae(A.getBottomLeft().subtract([ee,-ee]),A.getTopRight().add([ee,-ee]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var he in this._tiles){var Le=this._tiles[he].coords;(Le.z!==this._tileZoom||!te.contains(new W(Le.x,Le.y)))&&(this._tiles[he].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(f,_);return}for(var ct=A.min.y;ct<=A.max.y;ct++)for(var kt=A.min.x;kt<=A.max.x;kt++){var ir=new W(kt,ct);if(ir.z=this._tileZoom,!!this._isValidTile(ir)){var ai=this._tiles[this._tileCoordsToKey(ir)];ai?ai.current=!0:Y.push(ir)}}if(Y.sort(function(Fr,gh){return Fr.distanceTo(I)-gh.distanceTo(I)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mo=document.createDocumentFragment();for(kt=0;kt<Y.length;kt++)this._addTile(Y[kt],Mo);this._level.el.appendChild(Mo)}}}},_isValidTile:function(f){var p=this._map.options.crs;if(!p.infinite){var _=this._globalTileRange;if(!p.wrapLng&&(f.x<_.min.x||f.x>_.max.x)||!p.wrapLat&&(f.y<_.min.y||f.y>_.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(f);return pe(this.options.bounds).overlaps(E)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var p=this._map,_=this.getTileSize(),E=f.scaleBy(_),A=E.add(_),I=p.unproject(E,f.z),Y=p.unproject(A,f.z);return[I,Y]},_tileCoordsToBounds:function(f){var p=this._tileCoordsToNwSe(f),_=new ke(p[0],p[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var p=f.split(":"),_=new W(+p[0],+p[1]);return _.z=+p[2],_},_removeTile:function(f){var p=this._tiles[f];p&&(fn(p.el),delete this._tiles[f],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){xt(f,"leaflet-tile");var p=this.getTileSize();f.style.width=p.x+"px",f.style.height=p.y+"px",f.onselectstart=d,f.onmousemove=d,Ze.ielt9&&this.options.opacity<1&&kr(f,this.options.opacity)},_addTile:function(f,p){var _=this._getTilePos(f),E=this._tileCoordsToKey(f),A=this.createTile(this._wrapCoords(f),a(this._tileReady,this,f));this._initTile(A),this.createTile.length<2&&U(a(this._tileReady,this,f,null,A)),An(A,_),this._tiles[E]={el:A,coords:f,current:!0},p.appendChild(A),this.fire("tileloadstart",{tile:A,coords:f})},_tileReady:function(f,p,_){p&&this.fire("tileerror",{error:p,tile:_,coords:f});var E=this._tileCoordsToKey(f);_=this._tiles[E],_&&(_.loaded=+new Date,this._map._fadeAnimated?(kr(_.el,0),X(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),p||(xt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var p=new W(this._wrapX?c(f.x,this._wrapX):f.x,this._wrapY?c(f.y,this._wrapY):f.y);return p.z=f.z,p},_pxBoundsToTileRange:function(f){var p=this.getTileSize();return new ae(f.min.unscaleBy(p).floor(),f.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function iie(f){return new pg(f)}var mh=pg.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,p){this._url=f,p=y(this,p),p.detectRetina&&Ze.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,p){return this._url===f&&p===void 0&&(p=!0),this._url=f,p||this.redraw(),this},createTile:function(f,p){var _=document.createElement("img");return gt(_,"load",a(this._tileOnLoad,this,p,_)),gt(_,"error",a(this._tileOnError,this,p,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(f),_},getTileUrl:function(f){var p={r:Ze.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-f.y;this.options.tms&&(p.y=_),p["-y"]=_}return w(this._url,r(p,this.options))},_tileOnLoad:function(f,p){Ze.ielt9?setTimeout(a(f,this,null,p),0):f(null,p)},_tileOnError:function(f,p,_){var E=this.options.errorTileUrl;E&&p.getAttribute("src")!==E&&(p.src=E),f(_,p)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,p=this.options.maxZoom,_=this.options.zoomReverse,E=this.options.zoomOffset;return _&&(f=p-f),f+E},_getSubdomain:function(f){var p=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var f,p;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(p=this._tiles[f].el,p.onload=d,p.onerror=d,!p.complete)){p.src=R;var _=this._tiles[f].coords;fn(p),delete this._tiles[f],this.fire("tileabort",{tile:p,coords:_})}},_removeTile:function(f){var p=this._tiles[f];if(p)return p.el.setAttribute("src",R),pg.prototype._removeTile.call(this,f)},_tileReady:function(f,p,_){if(!(!this._map||_&&_.getAttribute("src")===R))return pg.prototype._tileReady.call(this,f,p,_)}});function vL(f,p){return new mh(f,p)}var xL=mh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,p){this._url=f;var _=r({},this.defaultWmsParams);for(var E in p)E in this.options||(_[E]=p[E]);p=y(this,p);var A=p.detectRetina&&Ze.retina?2:1,I=this.getTileSize();_.width=I.x*A,_.height=I.y*A,this.wmsParams=_},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,mh.prototype.onAdd.call(this,f)},getTileUrl:function(f){var p=this._tileCoordsToNwSe(f),_=this._crs,E=ge(_.project(p[0]),_.project(p[1])),A=E.min,I=E.max,Y=(this._wmsVersion>=1.3&&this._crs===la?[A.y,A.x,I.y,I.x]:[A.x,A.y,I.x,I.y]).join(","),ee=mh.prototype.getTileUrl.call(this,f);return ee+x(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(f,p){return r(this.wmsParams,f),p||this.redraw(),this}});function rie(f,p){return new xL(f,p)}mh.WMS=xL,vL.wms=rie;var Qs=Tr.extend({options:{padding:.1},initialize:function(f){y(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,p){var _=this._map.getZoomScale(p,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,p),I=E.multiplyBy(-_).add(A).subtract(this._map._getNewPixelOrigin(f,p));Ze.any3d?Zs(this._container,I,_):An(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,p=this._map.getSize(),_=this._map.containerPointToLayerPoint(p.multiplyBy(-f)).round();this._bounds=new ae(_,_.add(p.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_L=Qs.extend({options:{tolerance:0},getEvents:function(){var f=Qs.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");gt(f,"mousemove",this._onMouseMove,this),gt(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gt(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,fn(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var p in this._layers)f=this._layers[p],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qs.prototype._update.call(this);var f=this._bounds,p=this._container,_=f.getSize(),E=Ze.retina?2:1;An(p,f.min),p.width=E*_.x,p.height=E*_.y,p.style.width=_.x+"px",p.style.height=_.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Qs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var p=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var p=f._order,_=p.next,E=p.prev;_?_.prev=E:this._drawLast=E,E?E.next=_:this._drawFirst=_,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var p=f.options.dashArray.split(/[, ]+/),_=[],E,A;for(A=0;A<p.length;A++){if(E=Number(p[A]),isNaN(E))return;_.push(E)}f.options._dashArray=_}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var p=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ae,this._redrawBounds.extend(f._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(f._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var p=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,p=this._redrawBounds;if(this._ctx.save(),p){var _=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)f=E.layer,(!p||f._pxBounds&&f._pxBounds.intersects(p))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,p){if(this._drawing){var _,E,A,I,Y=f._parts,ee=Y.length,te=this._ctx;if(ee){for(te.beginPath(),_=0;_<ee;_++){for(E=0,A=Y[_].length;E<A;E++)I=Y[_][E],te[E?"lineTo":"moveTo"](I.x,I.y);p&&te.closePath()}this._fillStroke(te,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var p=f._point,_=this._ctx,E=Math.max(Math.round(f._radius),1),A=(Math.max(Math.round(f._radiusY),1)||E)/E;A!==1&&(_.save(),_.scale(1,A)),_.beginPath(),_.arc(p.x,p.y/A,E,0,Math.PI*2,!1),A!==1&&_.restore(),this._fillStroke(_,f)}},_fillStroke:function(f,p){var _=p.options;_.fill&&(f.globalAlpha=_.fillOpacity,f.fillStyle=_.fillColor||_.color,f.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(f.setLineDash&&f.setLineDash(p.options&&p.options._dashArray||[]),f.globalAlpha=_.opacity,f.lineWidth=_.weight,f.strokeStyle=_.color,f.lineCap=_.lineCap,f.lineJoin=_.lineJoin,f.stroke())},_onClick:function(f){for(var p=this._map.mouseEventToLayerPoint(f),_,E,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(p)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(_))&&(E=_);this._fireEvent(E?[E]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,p)}},_handleMouseOut:function(f){var p=this._hoveredLayer;p&&(Cn(this._container,"leaflet-interactive"),this._fireEvent([p],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,p){if(!this._mouseHoverThrottled){for(var _,E,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(p)&&(E=_);E!==this._hoveredLayer&&(this._handleMouseOut(f),E&&(xt(this._container,"leaflet-interactive"),this._fireEvent([E],f,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,p,_){this._map._fireDOMEvent(p,_||p.type,f)},_bringToFront:function(f){var p=f._order;if(p){var _=p.next,E=p.prev;if(_)_.prev=E;else return;E?E.next=_:_&&(this._drawFirst=_),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(f)}},_bringToBack:function(f){var p=f._order;if(p){var _=p.next,E=p.prev;if(E)E.next=_;else return;_?_.prev=E:E&&(this._drawLast=E),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(f)}}});function bL(f){return Ze.canvas?new _L(f):null}var mg=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),oie={_initContainer:function(){this._container=Dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qs.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var p=f._container=mg("shape");xt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",f._path=mg("path"),p.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var p=f._container;this._container.appendChild(p),f.options.interactive&&f.addInteractiveTarget(p)},_removePath:function(f){var p=f._container;fn(p),f.removeInteractiveTarget(p),delete this._layers[l(f)]},_updateStyle:function(f){var p=f._stroke,_=f._fill,E=f.options,A=f._container;A.stroked=!!E.stroke,A.filled=!!E.fill,E.stroke?(p||(p=f._stroke=mg("stroke")),A.appendChild(p),p.weight=E.weight+"px",p.color=E.color,p.opacity=E.opacity,E.dashArray?p.dashStyle=S(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=E.lineCap.replace("butt","flat"),p.joinstyle=E.lineJoin):p&&(A.removeChild(p),f._stroke=null),E.fill?(_||(_=f._fill=mg("fill")),A.appendChild(_),_.color=E.fillColor||E.color,_.opacity=E.fillOpacity):_&&(A.removeChild(_),f._fill=null)},_updateCircle:function(f){var p=f._point.round(),_=Math.round(f._radius),E=Math.round(f._radiusY||_);this._setPath(f,f._empty()?"M0 0":"AL "+p.x+","+p.y+" "+_+","+E+" 0,"+65535*360)},_setPath:function(f,p){f._path.v=p},_bringToFront:function(f){ru(f._container)},_bringToBack:function(f){ou(f._container)}},B1=Ze.vml?mg:Xe,gg=Qs.extend({_initContainer:function(){this._container=B1("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=B1("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fn(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qs.prototype._update.call(this);var f=this._bounds,p=f.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,_.setAttribute("width",p.x),_.setAttribute("height",p.y)),An(_,f.min),_.setAttribute("viewBox",[f.min.x,f.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(f){var p=f._path=B1("path");f.options.className&&xt(p,f.options.className),f.options.interactive&&xt(p,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){fn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var p=f._path,_=f.options;p&&(_.stroke?(p.setAttribute("stroke",_.color),p.setAttribute("stroke-opacity",_.opacity),p.setAttribute("stroke-width",_.weight),p.setAttribute("stroke-linecap",_.lineCap),p.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?p.setAttribute("stroke-dasharray",_.dashArray):p.removeAttribute("stroke-dasharray"),_.dashOffset?p.setAttribute("stroke-dashoffset",_.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),_.fill?(p.setAttribute("fill",_.fillColor||_.color),p.setAttribute("fill-opacity",_.fillOpacity),p.setAttribute("fill-rule",_.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(f,p){this._setPath(f,Vt(f._parts,p))},_updateCircle:function(f){var p=f._point,_=Math.max(Math.round(f._radius),1),E=Math.max(Math.round(f._radiusY),1)||_,A="a"+_+","+E+" 0 1,0 ",I=f._empty()?"M0 0":"M"+(p.x-_)+","+p.y+A+_*2+",0 "+A+-_*2+",0 ";this._setPath(f,I)},_setPath:function(f,p){f._path.setAttribute("d",p)},_bringToFront:function(f){ru(f._path)},_bringToBack:function(f){ou(f._path)}});Ze.vml&&gg.include(oie);function wL(f){return Ze.svg||Ze.vml?new gg(f):null}C.include({getRenderer:function(f){var p=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var p=this._paneRenderers[f];return p===void 0&&(p=this._createRenderer({pane:f}),this._paneRenderers[f]=p),p},_createRenderer:function(f){return this.options.preferCanvas&&bL(f)||wL(f)}});var SL=lu.extend({initialize:function(f,p){lu.prototype.initialize.call(this,this._boundsToLatLngs(f),p)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=pe(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function aie(f,p){return new SL(f,p)}gg.create=B1,gg.pointsToPath=Vt,Mr.geometryToLayer=uu,Mr.coordsToLatLng=cE,Mr.coordsToLatLngs=I1,Mr.latLngToCoords=fE,Mr.latLngsToCoords=O1,Mr.getFeature=ph,Mr.asFeature=D1,C.mergeOptions({boxZoom:!0});var CL=fe.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),au(),ig(),this._startPoint=this._map.mouseEventToContainerPoint(f),gt(document,{contextmenu:Ks,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Dt("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var p=new ae(this._point,this._startPoint),_=p.getSize();An(this._box,p.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(fn(this._box),Cn(this._container,"leaflet-crosshair")),su(),lh(),Jt(document,{contextmenu:Ks,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var p=new ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});C.addInitHook("addHandler","boxZoom",CL),C.mergeOptions({doubleClickZoom:!0});var EL=fe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var p=this._map,_=p.getZoom(),E=p.options.zoomDelta,A=f.originalEvent.shiftKey?_-E:_+E;p.options.doubleClickZoom==="center"?p.setZoom(A):p.setZoomAround(f.containerPoint,A)}});C.addInitHook("addHandler","doubleClickZoom",EL),C.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var kL=fe.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Pe(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Cn(this._map._container,"leaflet-grab"),Cn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=pe(this._map.options.maxBounds);this._offsetLimit=ge(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var p=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(p),this._prunePositions(p)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,p){return f-(f-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;f.x<p.min.x&&(f.x=this._viscousLimit(f.x,p.min.x)),f.y<p.min.y&&(f.y=this._viscousLimit(f.y,p.min.y)),f.x>p.max.x&&(f.x=this._viscousLimit(f.x,p.max.x)),f.y>p.max.y&&(f.y=this._viscousLimit(f.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,p=Math.round(f/2),_=this._initialWorldOffset,E=this._draggable._newPos.x,A=(E-p+_)%f+p-_,I=(E+p+_)%f-p-_,Y=Math.abs(A+_)<Math.abs(I+_)?A:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(f){var p=this._map,_=p.options,E=!_.inertia||f.noInertia||this._times.length<2;if(p.fire("dragend",f),E)p.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,Y=_.easeLinearity,ee=A.multiplyBy(Y/I),te=ee.distanceTo([0,0]),he=Math.min(_.inertiaMaxSpeed,te),Le=ee.multiplyBy(he/te),ct=he/(_.inertiaDeceleration*Y),kt=Le.multiplyBy(-ct/2).round();!kt.x&&!kt.y?p.fire("moveend"):(kt=p._limitOffset(kt,p.options.maxBounds),U(function(){p.panBy(kt,{duration:ct,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});C.addInitHook("addHandler","dragging",kL),C.mergeOptions({keyboard:!0,keyboardPanDelta:80});var RL=fe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),gt(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,p=document.documentElement,_=f.scrollTop||p.scrollTop,E=f.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(E,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var p=this._panKeys={},_=this.keyCodes,E,A;for(E=0,A=_.left.length;E<A;E++)p[_.left[E]]=[-1*f,0];for(E=0,A=_.right.length;E<A;E++)p[_.right[E]]=[f,0];for(E=0,A=_.down.length;E<A;E++)p[_.down[E]]=[0,f];for(E=0,A=_.up.length;E<A;E++)p[_.up[E]]=[0,-1*f]},_setZoomDelta:function(f){var p=this._zoomKeys={},_=this.keyCodes,E,A;for(E=0,A=_.zoomIn.length;E<A;E++)p[_.zoomIn[E]]=f;for(E=0,A=_.zoomOut.length;E<A;E++)p[_.zoomOut[E]]=-f},_addHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var p=f.keyCode,_=this._map,E;if(p in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(E=this._panKeys[p],f.shiftKey&&(E=Q(E).multiplyBy(3)),_.options.maxBounds&&(E=_._limitOffset(Q(E),_.options.maxBounds)),_.options.worldCopyJump){var A=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(E)));_.panTo(A)}else _.panBy(E)}else if(p in this._zoomKeys)_.setZoom(_.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Ks(f)}}});C.addInitHook("addHandler","keyboard",RL),C.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var TL=fe.extend({addHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var p=N1(f),_=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var E=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),E),Ks(f)},_performZoom:function(){var f=this._map,p=f.getZoom(),_=this._map.options.zoomSnap||0;f._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,I=_?Math.ceil(A/_)*_:A,Y=f._limitZoom(p+(this._delta>0?I:-I))-p;this._delta=0,this._startTime=null,Y&&(f.options.scrollWheelZoom==="center"?f.setZoom(p+Y):f.setZoomAround(this._lastMousePos,p+Y))}});C.addInitHook("addHandler","scrollWheelZoom",TL);var sie=600;C.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var AL=fe.extend({addHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var p=f.touches[0];this._startPos=this._newPos=new W(p.clientX,p.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(gt(document,"touchend",Yn),gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),sie),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Jt(document,"touchend",Yn),Jt(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)},_onMove:function(f){var p=f.touches[0];this._newPos=new W(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,p){var _=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});_._simulated=!0,p.target.dispatchEvent(_)}});C.addInitHook("addHandler","tapHold",AL),C.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var ML=fe.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Cn(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var p=this._map;if(!(!f.touches||f.touches.length!==2||p._animatingZoom||this._zooming)){var _=p.mouseEventToContainerPoint(f.touches[0]),E=p.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(_.add(E)._divideBy(2))),this._startDist=_.distanceTo(E),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),Yn(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var p=this._map,_=p.mouseEventToContainerPoint(f.touches[0]),E=p.mouseEventToContainerPoint(f.touches[1]),A=_.distanceTo(E)/this._startDist;if(this._zoom=p.getScaleZoom(A,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&A<1||this._zoom>p.getMaxZoom()&&A>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var I=_._add(E)._divideBy(2)._subtract(this._centerPoint);if(A===1&&I.x===0&&I.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var Y=a(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(Y,this,!0),Yn(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});C.addInitHook("addHandler","touchZoom",ML),C.BoxZoom=CL,C.DoubleClickZoom=EL,C.Drag=kL,C.Keyboard=RL,C.ScrollWheelZoom=TL,C.TapHold=AL,C.TouchZoom=ML,n.Bounds=ae,n.Browser=Ze,n.CRS=Nt,n.Canvas=_L,n.Circle=dg,n.CircleMarker=wi,n.Class=O,n.Control=$,n.DivIcon=yL,n.DivOverlay=ts,n.DomEvent=oE,n.DomUtil=iE,n.Draggable=Pe,n.Evented=K,n.FeatureGroup=Ar,n.GeoJSON=Mr,n.GridLayer=pg,n.Handler=fe,n.Icon=Js,n.ImageOverlay=L1,n.LatLng=Se,n.LatLngBounds=ke,n.Layer=Tr,n.LayerGroup=Ja,n.LineUtil=nt,n.Map=C,n.Marker=rf,n.Mixin=Ee,n.Path=es,n.Point=W,n.PolyUtil=Me,n.Polygon=lu,n.Polyline=Zt,n.Popup=j1,n.PosAnimation=fh,n.Projection=bi,n.Rectangle=SL,n.Renderer=Qs,n.SVG=gg,n.SVGOverlay=gL,n.TileLayer=mh,n.Tooltip=z1,n.Transformation=Be,n.Util=B,n.VideoOverlay=mL,n.bind=a,n.bounds=ge,n.canvas=bL,n.circle=hh,n.circleMarker=fg,n.control=D,n.divIcon=nie,n.extend=r,n.featureGroup=sE,n.geoJSON=pL,n.geoJson=Xne,n.gridLayer=iie,n.icon=dh,n.imageOverlay=Kne,n.latLng=Fe,n.latLngBounds=pe,n.layerGroup=aE,n.map=F,n.marker=lE,n.point=Q,n.polygon=uE,n.polyline=$1,n.popup=eie,n.rectangle=aie,n.setOptions=y,n.stamp=l,n.svg=wL,n.svgOverlay=Qne,n.tileLayer=vL,n.tooltip=tie,n.transformation=ce,n.version=i,n.videoOverlay=Jne;var lie=window.L;n.noConflict=function(){return window.L=lie,this},window.L=n})})(QM,QM.exports);var oe=QM.exports;function mne(e){return e.split(" ").filter(Boolean)}function JD(e,t){mne(t).forEach(n=>{oe.DomUtil.addClass(e,n)})}function gne(e,t){mne(t).forEach(n=>{oe.DomUtil.removeClass(e,n)})}function Zje(e,t,n){e!=null&&n!==t&&(t!=null&&t.length>0&&gne(e,t),n!=null&&n.length>0&&JD(e,n))}function zC(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function qm(e,t){return t==null?function(i,r){const o=P.useRef();return o.current||(o.current=e(i,r)),o}:function(i,r){const o=P.useRef();o.current||(o.current=e(i,r));const a=P.useRef(i),{instance:s}=o.current;return P.useEffect(function(){a.current!==i&&(t(s,i,a.current),a.current=i)},[s,i,r]),o}}function QD(e,t){P.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var o;(o=t.layerContainer)==null||o.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function eL(e){return function(n){const i=Kd(),r=e(l1(n,i),i);return YD(i.map,n.attribution),jC(r.current,n.eventHandlers),QD(r.current,i),r}}function yne(e,t){const n=P.useRef();P.useEffect(function(){if(t.pathOptions!==n.current){const r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}},[e,t])}function vne(e){return function(n){const i=Kd(),r=e(l1(n,i),i);return jC(r.current,n.eventHandlers),QD(r.current,i),yne(r.current,n),r}}function Xje(e){function t(r,o){return zC(e(r),o)}const n=qm(t),i=hne(n);return KD(i)}function Kje(e,t){const n=qm(e,t),i=eL(n);return XD(i)}function Jje(e,t){const n=qm(e),i=pne(n,t);return dne(i)}function xne(e,t){const n=qm(e,t),i=vne(n);return XD(i)}function _ne(e,t){const n=qm(e,t),i=eL(n);return KD(i)}function bne(e,t,n){const{opacity:i,zIndex:r}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),r!=null&&r!==n.zIndex&&e.setZIndex(r)}function Qje(e,t,n){t.bounds instanceof oe.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}const eze=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:une,LeafletContext:ZD,LeafletProvider:LC,addClassName:JD,createContainerComponent:XD,createControlComponent:Xje,createControlHook:hne,createDivOverlayComponent:dne,createDivOverlayHook:pne,createElementHook:qm,createElementObject:zC,createLayerComponent:Kje,createLayerHook:eL,createLeafComponent:KD,createLeafletContext:cne,createOverlayComponent:Jje,createPathComponent:xne,createPathHook:vne,createTileLayerComponent:_ne,extendContext:fne,removeClassName:gne,updateCircle:Yje,updateClassName:Zje,updateGridLayer:bne,updateMediaOverlay:Qje,useAttribution:YD,useEventHandlers:jC,useLayerLifecycle:QD,useLeafletContext:Kd,usePathOptions:yne,withPane:l1},Symbol.toStringTag,{value:"Module"}));function tze(){return Kd().map}const e0=xne(function({data:t,...n},i){const r=new oe.GeoJSON(t,n);return zC(r,fne(i,{overlayContainer:r}))},function(t,n,i){n.style!==i.style&&(n.style==null?t.resetStyle():t.setStyle(n.style))});function eF(){return eF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eF.apply(this,arguments)}function nze({bounds:e,boundsOptions:t,center:n,children:i,className:r,id:o,placeholder:a,style:s,whenReady:l,zoom:u,...c},d){const[h]=P.useState({className:r,id:o,style:s}),[m,g]=P.useState(null);P.useImperativeHandle(d,()=>(m==null?void 0:m.map)??null,[m]);const y=P.useCallback(b=>{if(b!==null&&m===null){const w=new oe.Map(b,c);n!=null&&u!=null?w.setView(n,u):e!=null&&w.fitBounds(e,t),l!=null&&w.whenReady(l),g(cne(w))}},[]);P.useEffect(()=>()=>{m==null||m.map.remove()},[m]);const x=m?$t.createElement(LC,{value:m},i):a??null;return $t.createElement("div",eF({},h,{ref:y}),x)}const ize=P.forwardRef(nze),rze=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function s8(e,t){const{[t]:n,...i}=e;return i}function oze(e,t,n){if(rze.indexOf(e)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${e}`);if(n.map.getPane(e)!=null)throw new Error(`A pane with this name already exists: ${e}`);const i=t.pane??n.pane,r=i?n.map.getPane(i):void 0,o=n.map.createPane(e,r);return t.className!=null&&JD(o,t.className),t.style!=null&&Object.keys(t.style).forEach(a=>{o.style[a]=t.style[a]}),o}function aze(e,t){const[n]=P.useState(e.name),[i,r]=P.useState(null);P.useImperativeHandle(t,()=>i,[i]);const o=Kd(),a=P.useMemo(()=>({...o,pane:n}),[o]);return P.useEffect(()=>(r(oze(n,e,o)),function(){var u;const l=o.map.getPane(n);(u=l==null?void 0:l.remove)==null||u.call(l),o.map._panes!=null&&(o.map._panes=s8(o.map._panes,n),o.map._paneRenderers=s8(o.map._paneRenderers,n))}),[]),e.children!=null&&i!=null?v2.createPortal($t.createElement(LC,{value:a},e.children),i):null}const Zx=P.forwardRef(aze),l8=_ne(function({url:t,...n},i){const r=new oe.TileLayer(t,l1(n,i));return zC(r,i)},function(t,n,i){bne(t,n,i);const{url:r}=n;r!=null&&r!==i.url&&t.setUrl(r)});var so={},Jd={};const sze="esri-leaflet",lze="Leaflet plugins for consuming ArcGIS Online and ArcGIS Server services.",uze="3.0.12",cze="Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)",fze={url:"https://github.com/esri/esri-leaflet/issues"},dze=["Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","John Gravois (https://johngravois.com)","Gavin Rehkemper <grehkemper@esri.com> (https://gavinr.com)","Jacob Wasilkowski (https://jwasilgeo.github.io)"],hze={"@terraformer/arcgis":"^2.1.0","tiny-binary-search":"^1.0.3"},pze={"@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-terser":"^0.3.0",chai:"4.3.7","chokidar-cli":"^3.0.0","gh-release":"^7.0.1","highlight.js":"^11.7.0","http-server":"^14.1.1",husky:"^1.1.1",karma:"^6.4.1","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-edgium-launcher":"github:matracey/karma-edgium-launcher","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-safari-launcher":"~1.0.0","karma-sinon-chai":"^2.0.2","karma-sourcemap-loader":"^0.3.8",leaflet:"^1.6.0",mkdirp:"^1.0.4",mocha:"^10.2.0","npm-run-all":"^4.1.5",rollup:"^2.79.1",semistandard:"^14.2.3",sinon:"^15.0.1","sinon-chai":"3.7.0",snazzy:"^9.0.0"},mze=["src/**/*.js","dist/esri-leaflet.js","dist/esri-leaflet.js.map","dist/esri-leaflet-debug.js.map","dist/siteData.json","profiles/*.js"],gze="https://developers.arcgis.com/esri-leaflet/",yze="src/EsriLeaflet.js",vze={registry:"npm",format:"es6",main:"src/EsriLeaflet.js"},xze=["arcgis","esri","esri leaflet","gis","leaflet plugin","mapping"],_ze="Apache-2.0",bze="dist/esri-leaflet-debug.js",wze={leaflet:"^1.0.0"},Sze="README.md",Cze={type:"git",url:"git@github.com:Esri/esri-leaflet.git"},Eze={build:"rollup -c profiles/debug.js & rollup -c profiles/production.js",lint:"semistandard | snazzy",prebuild:"mkdirp dist",pretest:"npm run build",fix:"semistandard --fix",release:"./scripts/release.sh","start-watch":'chokidar src -c "npm run build"',start:"run-p start-watch serve",serve:"http-server -p 5000 -c-1 -o",test:"npm run lint && karma start"},kze={globals:["expect","L","XMLHttpRequest","sinon","xhr","proj4"]},Rze="dist/esri-leaflet-debug.js",Tze={hooks:{"pre-commit":"npm run lint"}},Aze={name:sze,description:lze,version:uze,author:cze,bugs:fze,contributors:dze,dependencies:hze,devDependencies:pze,files:mze,homepage:gze,module:yze,"jsnext:main":"src/EsriLeaflet.js",jspm:vze,keywords:xze,license:_ze,main:bze,peerDependencies:wze,readmeFilename:Sze,repository:Cze,scripts:Eze,semistandard:kze,unpkg:Rze,husky:Tze};var BC=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,gu=document.documentElement.style.pointerEvents==="",Au={cors:BC,pointerEvents:gu},wne={attributionWidthOffset:55},u8=0;function HC(e){var t="";e.f=e.f||"json";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n],r=Object.prototype.toString.call(i),o;t.length&&(t+="&"),r==="[object Array]"?o=Object.prototype.toString.call(i[0])==="[object Object]"?JSON.stringify(i):i.join(","):r==="[object Object]"?o=JSON.stringify(i):r==="[object Date]"?o=i.valueOf():o=i,t+=encodeURIComponent(n)+"="+encodeURIComponent(o)}return t.replaceAll("'","%27")}function tL(e,t){var n=new window.XMLHttpRequest;return n.onerror=function(i){n.onreadystatechange=oe.Util.falseFn,e.call(t,{error:{code:500,message:"XMLHttpRequest error"}},null)},n.onreadystatechange=function(){var i,r;if(n.readyState===4){try{i=JSON.parse(n.responseText)}catch{i=null,r={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!r&&i.error&&(r=i.error,i=null),n.onerror=oe.Util.falseFn,e.call(t,r,i)}},n.ontimeout=function(){this.onerror()},n}function Sne(e,t,n,i){var r=tL(n,i);return r.open("POST",e),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(r.timeout=i.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(HC(t)),r}function Cne(e,t,n,i){var r=tL(n,i);return r.open("GET",e+"?"+HC(t),!0),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(r.timeout=i.options.timeout,i.options.withCredentials&&(r.withCredentials=!0)),r.send(null),r}function nL(e,t,n,i){var r=HC(t),o=tL(n,i),a=(e+"?"+r).length;if(a<=2e3&&Au.cors?o.open("GET",e+"?"+r):a>2e3&&Au.cors&&(o.open("POST",e),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(o.timeout=i.options.timeout,i.options.withCredentials&&(o.withCredentials=!0)),a<=2e3&&Au.cors)o.send(null);else if(a>2e3&&Au.cors)o.send(r);else{if(a<=2e3&&!Au.cors)return iL(e,t,n,i);Rc("a request to "+e+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return o}function iL(e,t,n,i){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var r="c"+u8;t.callback="window._EsriLeafletCallbacks."+r,window._EsriLeafletCallbacks[r]=function(a){if(window._EsriLeafletCallbacks[r]!==!0){var s,l=Object.prototype.toString.call(a);l==="[object Object]"||l==="[object Array]"||(s={error:{code:500,message:"Expected array or object as JSONP response"}},a=null),!s&&a.error&&(s=a,a=null),n.call(i,s,a),window._EsriLeafletCallbacks[r]=!0}};var o=oe.DomUtil.create("script",null,document.body);return o.type="text/javascript",o.src=e+"?"+HC(t),o.id=r,o.onerror=function(a){if(a&&window._EsriLeafletCallbacks[r]!==!0){var s={error:{code:500,message:"An unknown error occurred"}};n.call(i,s),window._EsriLeafletCallbacks[r]=!0}},oe.DomUtil.addClass(o,"esri-leaflet-jsonp"),u8++,{id:r,url:o.src,abort:function(){window._EsriLeafletCallbacks._callback[r]({code:0,message:"Request aborted."})}}}var UC=Au.cors?Cne:iL;UC.CORS=Cne;UC.JSONP=iL;function Rc(){console&&console.warn&&console.warn.apply(console,arguments)}var Jw={request:nL,get:UC,post:Sne};/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var Mze=function(t,n,i,r){var o=(r[0]-i[0])*(t[1]-i[1])-(r[1]-i[1])*(t[0]-i[0]),a=(n[0]-t[0])*(t[1]-i[1])-(n[1]-t[1])*(t[0]-i[0]),s=(r[1]-i[1])*(n[0]-t[0])-(r[0]-i[0])*(n[1]-t[1]);if(s!==0){var l=o/s,u=a/s;if(l>=0&&l<=1&&u>=0&&u<=1)return!0}return!1},Fze=function(t,n){for(var i=!1,r=-1,o=t.length,a=o-1;++r<o;a=r)(t[r][1]<=n[1]&&n[1]<t[a][1]||t[a][1]<=n[1]&&n[1]<t[r][1])&&n[0]<(t[a][0]-t[r][0])*(n[1]-t[r][1])/(t[a][1]-t[r][1])+t[r][0]&&(i=!i);return i},Pze=function(t,n){for(var i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},Ene=function(t,n){for(var i=0;i<t.length-1;i++)for(var r=0;r<n.length-1;r++)if(Mze(t[i],t[i+1],n[r],n[r+1]))return!0;return!1},tF=function(t){return Pze(t[0],t[t.length-1])||t.push(t[0]),t},nF=function(t){var n=0,i=0,r=t.length,o=t[i],a;for(i;i<r-1;i++)a=t[i+1],n+=(a[0]-o[0])*(a[1]+o[1]),o=a;return n>=0},kne=function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},Nze=function(t,n){var i=Ene(t,n),r=Fze(t,n[0]);return!!(!i&&r)},$ze=function(t){for(var n=[],i=[],r,o,a,s=0;s<t.length;s++){var l=tF(t[s].slice(0));if(!(l.length<4))if(nF(l)){var u=[l.slice().reverse()];n.push(u)}else i.push(l.slice().reverse())}for(var c=[];i.length;){a=i.pop();var d=!1;for(r=n.length-1;r>=0;r--)if(o=n[r][0],Nze(o,a)){n[r].push(a),d=!0;break}d||c.push(a)}for(;c.length;){a=c.pop();var h=!1;for(r=n.length-1;r>=0;r--)if(o=n[r][0],Ene(o,a)){n[r].push(a),h=!0;break}h||n.push([a.reverse()])}return n.length===1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}},Ize=function(t,n){for(var i=n?[n,"OBJECTID","FID"]:["OBJECTID","FID"],r=0;r<i.length;r++){var o=i[r];if(o in t&&(typeof t[o]=="string"||typeof t[o]=="number"))return t[o]}throw Error("No valid id attribute found")},Oze=function e(t,n){var i={};if(t.features){i.type="FeatureCollection",i.features=[];for(var r=0;r<t.features.length;r++)i.features.push(e(t.features[r],n))}if(typeof t.x=="number"&&typeof t.y=="number"&&(i.type="Point",i.coordinates=[t.x,t.y],typeof t.z=="number"&&i.coordinates.push(t.z)),t.points&&(i.type="MultiPoint",i.coordinates=t.points.slice(0)),t.paths&&(t.paths.length===1?(i.type="LineString",i.coordinates=t.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=t.paths.slice(0))),t.rings&&(i=$ze(t.rings.slice(0))),typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"&&(i.type="Polygon",i.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(i.type="Feature",i.geometry=t.geometry?e(t.geometry):null,i.properties=t.attributes?kne(t.attributes):null,t.attributes))try{i.id=Ize(t.attributes,n)}catch{}return JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),t.spatialReference&&t.spatialReference.wkid&&t.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),i},Rne=function(t){var n=[],i=t.slice(0),r=tF(i.shift().slice(0));if(r.length>=4){nF(r)||r.reverse(),n.push(r);for(var o=0;o<i.length;o++){var a=tF(i[o].slice(0));a.length>=4&&(nF(a)&&a.reverse(),n.push(a))}}return n},Dze=function(t){for(var n=[],i=0;i<t.length;i++)for(var r=Rne(t[i]),o=r.length-1;o>=0;o--){var a=r[o].slice(0);n.push(a)}return n},Lze=function e(t,n){n=n||"OBJECTID";var i={wkid:4326},r={},o;switch(t.type){case"Point":r.x=t.coordinates[0],r.y=t.coordinates[1],t.coordinates[2]!=null&&(r.z=t.coordinates[2]),r.spatialReference=i;break;case"MultiPoint":r.points=t.coordinates.slice(0),t.coordinates[0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"LineString":r.paths=[t.coordinates.slice(0)],t.coordinates[0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"MultiLineString":r.paths=t.coordinates.slice(0),t.coordinates[0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"Polygon":r.rings=Rne(t.coordinates.slice(0)),t.coordinates[0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"MultiPolygon":r.rings=Dze(t.coordinates.slice(0)),t.coordinates[0][0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"Feature":t.geometry&&(r.geometry=e(t.geometry,n)),r.attributes=t.properties?kne(t.properties):{},t.id&&(r.attributes[n]=t.id);break;case"FeatureCollection":for(r=[],o=0;o<t.features.length;o++)r.push(e(t.features[o],n));break;case"GeometryCollection":for(r=[],o=0;o<t.geometries.length;o++)r.push(e(t.geometries[o],n));break}return r},jze='Powered by <a href="https://www.esri.com">Esri</a>';function cv(e,t){return Lze(e,t)}function Tne(e,t){return Oze(e,t)}function iF(e){if(e.xmin!=="NaN"&&e.ymin!=="NaN"&&e.xmax!=="NaN"&&e.ymax!=="NaN"){var t=oe.latLng(e.ymin,e.xmin),n=oe.latLng(e.ymax,e.xmax);return oe.latLngBounds(t,n)}else return null}function rL(e){return e=oe.latLngBounds(e),{xmin:e.getSouthWest().lng,ymin:e.getSouthWest().lat,xmax:e.getNorthEast().lng,ymax:e.getNorthEast().lat,spatialReference:{wkid:4326}}}var Ane=/^(OBJECTID|FID|OID|ID)$/i;function Mne(e){var t;if(e.objectIdFieldName)t=e.objectIdFieldName;else if(e.fields){for(var n=0;n<=e.fields.length-1;n++)if(e.fields[n].type==="esriFieldTypeOID"){t=e.fields[n].name;break}if(!t){for(n=0;n<=e.fields.length-1;n++)if(e.fields[n].name.match(Ane)){t=e.fields[n].name;break}}}return t}function Fne(e){for(var t in e.attributes)if(t.match(Ane))return t}function u1(e,t){var n,i=e.features||e.results,r=i&&i.length;t?n=t:n=Mne(e);var o={type:"FeatureCollection",features:[]};if(r)for(var a=i.length-1;a>=0;a--){var s=Tne(i[a],n||Fne(i[a]));o.features.push(s)}return o}function WC(e){return e=oe.Util.trim(e),e[e.length-1]!=="/"&&(e+="/"),e}function Qd(e){if(e.url.indexOf("?")!==-1){e.requestParams=e.requestParams||{};var t=e.url.substring(e.url.indexOf("?")+1);e.url=e.url.split("?")[0],e.requestParams=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return e.url=WC(e.url.split("?")[0]),e}function Pne(e){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(e)}function rF(e){var t;switch(e){case"Point":t="esriGeometryPoint";break;case"MultiPoint":t="esriGeometryMultipoint";break;case"LineString":t="esriGeometryPolyline";break;case"MultiLineString":t="esriGeometryPolyline";break;case"Polygon":t="esriGeometryPolygon";break;case"MultiPolygon":t="esriGeometryPolygon";break}return t}function Qw(e){return e.getSize().x-wne.attributionWidthOffset+"px"}function c1(e){if(e.attributionControl){if(e.attributionControl._esriAttributionLayerCount||(e.attributionControl._esriAttributionLayerCount=0),e.attributionControl._esriAttributionLayerCount===0){if(!e.attributionControl._esriAttributionAddedOnce){var t=document.createElement("style");t.type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t);var n=document.createElement("style");n.type="text/css",n.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+Qw(e)+";}",document.getElementsByTagName("head")[0].appendChild(n),e.on("resize",function(i){e.attributionControl&&(e.attributionControl._container.style.maxWidth=Qw(i.target))}),e.attributionControl._esriAttributionAddedOnce=!0}oe.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),oe.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution")}e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount+1}}function f1(e){e.attributionControl&&(e.attributionControl._esriAttributionLayerCount&&e.attributionControl._esriAttributionLayerCount===1&&(oe.DomUtil.removeClass(e.attributionControl._container,"esri-truncated-attribution:hover"),oe.DomUtil.removeClass(e.attributionControl._container,"esri-truncated-attribution")),e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount-1)}function oL(e){var t={geometry:null,geometryType:null};if(e instanceof oe.LatLngBounds)return t.geometry=rL(e),t.geometryType="esriGeometryEnvelope",t;if(e.getLatLng&&(e=e.getLatLng()),e instanceof oe.LatLng&&(e={type:"Point",coordinates:[e.lng,e.lat]}),e instanceof oe.GeoJSON&&(e=e.getLayers()[0].feature.geometry,t.geometry=cv(e),t.geometryType=rF(e.type)),e.toGeoJSON&&(e=e.toGeoJSON()),e.type==="Feature"&&(e=e.geometry),e.type==="Point"||e.type==="LineString"||e.type==="Polygon"||e.type==="MultiPolygon")return t.geometry=cv(e),t.geometryType=rF(e.type),t;Rc("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function Nne(e,t){Au.cors&&nL(e,{},oe.Util.bind(function(n,i){if(!n){t._esriAttributions=[];for(var r=0;r<i.contributors.length;r++)for(var o=i.contributors[r],a=0;a<o.coverageAreas.length;a++){var s=o.coverageAreas[a],l=oe.latLng(s.bbox[0],s.bbox[1]),u=oe.latLng(s.bbox[2],s.bbox[3]);t._esriAttributions.push({attribution:o.attribution,score:s.score,bounds:oe.latLngBounds(l,u),minZoom:s.zoomMin,maxZoom:s.zoomMax})}t._esriAttributions.sort(function(d,h){return h.score-d.score});var c={target:t};e2(c)}},this))}function e2(e){var t=e.target,n=t._esriAttributions;if(!(!t||!t.attributionControl)){var i=t.attributionControl._container.querySelector(".esri-dynamic-attribution");if(i&&n){for(var r="",o=t.getBounds(),a=oe.latLngBounds(o.getSouthWest().wrap(),o.getNorthEast().wrap()),s=t.getZoom(),l=0;l<n.length;l++){var u=n[l],c=u.attribution;!r.match(c)&&u.bounds.intersects(a)&&s>=u.minZoom&&s<=u.maxZoom&&(r+=", "+c)}r=jze+" | "+r.substr(2),i.innerHTML=r,i.style.maxWidth=Qw(t),t.fire("attributionupdated",{attribution:r})}}}var zze={warn:Rc,cleanUrl:WC,getUrlParams:Qd,isArcgisOnline:Pne,geojsonTypeToArcGIS:rF,responseToFeatureCollection:u1,geojsonToArcGIS:cv,arcgisToGeoJSON:Tne,boundsToExtent:rL,extentToBounds:iF,calcAttributionWidth:Qw,setEsriAttribution:c1,removeEsriAttribution:f1,_setGeometry:oL,_getAttributionData:Nne,_updateMapAttribution:e2,_findIdAttributeFromFeature:Fne,_findIdAttributeFromResponse:Mne},d1=oe.Class.extend({options:{proxy:!1,useCors:BC},generateSetter:function(e,t){return oe.Util.bind(function(n){return this.params[e]=n,this},t)},initialize:function(e){if(e.request&&e.options?(this._service=e,oe.Util.setOptions(this,e.options)):(oe.Util.setOptions(this,e),this.options.url=WC(e.url)),this.params=oe.Util.extend({},this.params||{}),this.setters)for(var t in this.setters){var n=this.setters[t];this[t]=this.generateSetter(n,this)}},token:function(e){return this._service?this._service.authenticate(e):this.params.token=e,this},apikey:function(e){return this.token(e)},format:function(e){return this.params.returnUnformattedValues=!e,this},request:function(e,t){return this.options.requestParams&&oe.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,e,t):this._request("request",this.path,this.params,e,t)},_request:function(e,t,n,i,r){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(e==="get"||e==="request")&&!this.options.useCors?Jw.get.JSONP(o,n,i,r):Jw[e](o,n,i,r)}});function Bze(e){return e=Qd(e),new d1(e)}var $ne=d1.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(e,t){return e=oe.latLng(e),this.params.geometry=[e.lng,e.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=t,this.params.inSR=4326,this},where:function(e){return this.params.where=e,this},between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},orderBy:function(e,t){return t=t||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[e,t].join(" "),this},run:function(e,t){return this._cleanParams(),this.options.isModern||Pne(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i,i)},this)):this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i&&u1(i),i)},this)},count:function(e,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(n,i){e.call(this,n,i&&i.count,i)},t)},ids:function(e,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(n,i){e.call(this,n,i&&i.objectIds,i)},t)},bounds:function(e,t){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(n,i){i&&i.extent&&iF(i.extent)?e.call(t,n,iF(i.extent),i):(n={message:"Invalid Bounds"},e.call(t,n,null,i))},t)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(e){var t=oe.point(e);return this.params.pixelSize=[t.x,t.y],this},layer:function(e){return this.path=e+"/query",this},_trapSQLerrors:function(e){e&&e.code==="400"&&Rc("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(e){this.params.inSR=4326;var t=oL(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function GC(e){return new $ne(e)}var Ine=d1.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&u1(i),i)},t)}});function One(e){return new Ine(e)}var qC=d1.extend({path:"identify",between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this}});function Hze(e){return new qC(e)}var Dne=qC.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(e){var t=rL(e.getBounds()),n=e.getSize();return this.params.imageDisplay=[n.x,n.y,96],this.params.mapExtent=[t.xmin,t.ymin,t.xmax,t.ymax],this},at:function(e){return e.length===2&&(e=oe.latLng(e)),this._setGeometryParams(e),this},layerDef:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){if(n)e.call(t,n,void 0,i);else{var r=u1(i);i.results=i.results.reverse();for(var o=0;o<r.features.length;o++){var a=r.features[o];a.layerId=i.results[o].layerId}e.call(t,void 0,r,i)}})},_setGeometryParams:function(e){var t=oL(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function Lne(e){return new Dne(e)}var jne=qC.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(e){return e=oe.latLng(e),this.params.geometry=JSON.stringify({x:e.lng,y:e.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(e){var t=e.location,n=e.catalogItems,i=e.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},crs:{type:"EPSG",properties:{code:t.spatialReference.wkid}},properties:{OBJECTID:e.objectId,name:e.name,value:e.value},id:e.objectId}};if(e.properties&&e.properties.Values&&(r.pixel.properties.values=e.properties.Values),n&&n.features&&(r.catalogItems=u1(n),i&&i.length===r.catalogItems.features.length))for(var o=i.length-1;o>=0;o--)r.catalogItems.features[o].properties.catalogItemVisibility=i[o];return r}});function zne(e){return new jne(e)}var h1=oe.Evented.extend({options:{proxy:!1,useCors:BC,timeout:0},initialize:function(e){e=e||{},this._requestQueue=[],this._authenticating=!1,oe.Util.setOptions(this,e),this.options.url=WC(this.options.url)},get:function(e,t,n,i){return this._request("get",e,t,n,i)},post:function(e,t,n,i){return this._request("post",e,t,n,i)},request:function(e,t,n,i){return this._request("request",e,t,n,i)},metadata:function(e,t){return this._request("get","",{},e,t)},authenticate:function(e){return this._authenticating=!1,this.options.token=e,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(e){this.options.timeout=e},_request:function(e,t,n,i,r){this.fire("requeststart",{url:this.options.url+t,params:n,method:e},!0);var o=this._createServiceCallback(e,t,n,i,r);if(this.options.token&&(n.token=this.options.token),this.options.requestParams&&oe.Util.extend(n,this.options.requestParams),this._authenticating)this._requestQueue.push([e,t,n,i,r]);else{var a=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(e==="get"||e==="request")&&!this.options.useCors?Jw.get.JSONP(a,n,o,r):Jw[e](a,n,o,r)}},_createServiceCallback:function(e,t,n,i,r){return oe.Util.bind(function(o,a){o&&(o.code===499||o.code===498)&&(this._authenticating=!0,this._requestQueue.push([e,t,n,i,r]),this.fire("authenticationrequired",{authenticate:oe.Util.bind(this.authenticate,this)},!0),o.authenticate=oe.Util.bind(this.authenticate,this)),i.call(r,o,a),o?this.fire("requesterror",{url:this.options.url+t,params:n,message:o.message,code:o.code,method:e},!0):this.fire("requestsuccess",{url:this.options.url+t,params:n,response:a,method:e},!0),this.fire("requestend",{url:this.options.url+t,params:n,method:e},!0)},this)},_runQueue:function(){for(var e=this._requestQueue.length-1;e>=0;e--){var t=this._requestQueue[e],n=t.shift();this[n].apply(this,t)}this._requestQueue=[]}});function Uze(e){return e=Qd(e),new h1(e)}var Bne=h1.extend({identify:function(){return Lne(this)},find:function(){return One(this)},query:function(){return GC(this)}});function aL(e){return new Bne(e)}var Hne=h1.extend({query:function(){return GC(this)},identify:function(){return zne(this)}});function Une(e){return new Hne(e)}var Wne=h1.extend({options:{idAttribute:"OBJECTID"},query:function(){return GC(this)},addFeature:function(e,t,n){this.addFeatures(e,t,n)},addFeatures:function(e,t,n){for(var i=e.features?e.features:[e],r=i.length-1;r>=0;r--)delete i[r].id;return e=cv(e),e=i.length>1?e:[e],this.post("addFeatures",{features:e},function(o,a){var s=a&&a.addResults?a.addResults.length>1?a.addResults:a.addResults[0]:void 0;t&&t.call(n,o||a.addResults[0].error,s)},n)},updateFeature:function(e,t,n){this.updateFeatures(e,t,n)},updateFeatures:function(e,t,n){var i=e.features?e.features:[e];return e=cv(e,this.options.idAttribute),e=i.length>1?e:[e],this.post("updateFeatures",{features:e},function(r,o){var a=o&&o.updateResults?o.updateResults.length>1?o.updateResults:o.updateResults[0]:void 0;t&&t.call(n,r||o.updateResults[0].error,a)},n)},deleteFeature:function(e,t,n){this.deleteFeatures(e,t,n)},deleteFeatures:function(e,t,n){return this.post("deleteFeatures",{objectIds:e},function(i,r){var o=r&&r.deleteResults?r.deleteResults.length>1?r.deleteResults:r.deleteResults[0]:void 0;t&&t.call(n,i||r.deleteResults[0].error,o)},n)}});function Gne(e){return new Wne(e)}var Wn=window.location.protocol!=="https:"?"http:":"https:",t2=oe.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Wn+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:gu?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Wn+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Wn+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Wn+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Wn+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(e,t){var n;if(typeof e=="object"&&e.urlTemplate&&e.options)n=e;else if(typeof e=="string"&&t2.TILES[e])n=t2.TILES[e];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var i=oe.Util.extend(n.options,t);oe.Util.setOptions(this,i),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&n.urlTemplate.indexOf("token=")===-1&&(n.urlTemplate+="?token="+this.options.token),this.options.proxy&&(n.urlTemplate=this.options.proxy+"?"+n.urlTemplate),oe.TileLayer.prototype.initialize.call(this,n.urlTemplate,i)},onAdd:function(e){c1(e),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&Nne((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,e),e.on("moveend",e2),oe.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){f1(e),e.off("moveend",e2),oe.TileLayer.prototype.onRemove.call(this,e)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var e=this._map.createPane(this.options.pane);e.style.pointerEvents="none",e.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var e='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return e}});function Wze(e,t){return new t2(e,t)}var sL=oe.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(e){e=oe.Util.setOptions(this,e),e=Qd(e),this.tileUrl=(e.proxy?e.proxy+"?":"")+e.url+"tile/{z}/{y}/{x}"+(e.requestParams&&Object.keys(e.requestParams).length>0?oe.Util.getParamString(e.requestParams):""),e.url.indexOf("{s}")!==-1&&e.subdomains&&(e.url=e.url.replace("{s}",e.subdomains[0])),this.service=aL(e),this.service.addEventParent(this);var t=new RegExp(/tiles.arcgis(online)?\.com/g);t.test(e.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),e.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),oe.TileLayer.prototype.initialize.call(this,this.tileUrl,e)},getTileUrl:function(e){var t=this._getZoomForUrl();return oe.Util.template(this.tileUrl,oe.Util.extend({s:this._getSubdomain(e),x:e.x,y:e.y,z:this._lodMap&&this._lodMap[t]!==void 0?this._lodMap[t]:t},this.options))},createTile:function(e,t){var n=document.createElement("img");return oe.DomEvent.on(n,"load",oe.Util.bind(this._tileOnLoad,this,t,n)),oe.DomEvent.on(n,"error",oe.Util.bind(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]!==void 0?n.src=this.getTileUrl(e):this.once("lodmap",function(){n.src=this.getTileUrl(e)},this),n},onAdd:function(e){c1(e),this._lodMap||this.metadata(function(t,n){if(!t&&n.spatialReference){var i=n.spatialReference.latestWkid||n.spatialReference.wkid;if(!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution())),e.options.crs===oe.CRS.EPSG3857&&(i===102100||i===3857)){this._lodMap={};for(var r=n.tileInfo.lods,o=sL.MercatorZoomLevels,a=0;a<r.length;a++){var s=r[a];for(var l in o){var u=o[l];if(this._withinPercentage(s.resolution,u,this.options.zoomOffsetAllowance)){this._lodMap[l]=s.level;break}}}this.fire("lodmap")}else e.options.crs&&e.options.crs.code&&e.options.crs.code.indexOf(i)>-1||Rc("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),oe.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){f1(e),oe.TileLayer.prototype.onRemove.call(this,e)},metadata:function(e,t){return this.service.metadata(e,t),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(e){var t="?token="+e;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,t):this.tileUrl+t,this.options.token=e,this.service.authenticate(e),this},_withinPercentage:function(e,t,n){var i=Math.abs(e/t-1);return i<n}});function Gze(e,t){return new sL(e,t)}var qze=oe.ImageOverlay.extend({onAdd:function(e){this._topLeft=e.getPixelBounds().min,oe.ImageOverlay.prototype.onAdd.call(this,e)},_reset:function(){this._map.options.crs===oe.CRS.EPSG3857?oe.ImageOverlay.prototype._reset.call(this):oe.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),lL=oe.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:BC,attribution:null,interactive:!1,alt:""},onAdd:function(e){c1(e),this.options.zIndex&&(this.options.position=null),this._update=oe.Util.throttle(this._update,this.options.updateInterval,this),e.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,n){!t&&!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(e){f1(e),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(e,t){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=oe.popup(t),this._popupFunction=e,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(e){return this.options.zIndex=e,this._currentImage&&this._currentImage.setZIndex(e),this},_setAutoZIndex:function(e){if(this._currentImage){for(var t=this._currentImage.getPane().children,n=-e(-1/0,1/0),i=0,r=t.length,o;i<r;i++)o=t[i].style.zIndex,t[i]!==this._currentImage._image&&o&&(n=e(n,+o));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t){return this.options.from=e,this.options.to=t,this._update(),this},metadata:function(e,t){return this.service.metadata(e,t),this},authenticate:function(e){return this.service.authenticate(e),this},redraw:function(){this._update()},_renderImage:function(e,t,n){if(this._map){if(n&&(e="data:"+n+";base64,"+e),!e)return;var i=new qze(e,t,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(){this._map.removeLayer(i),this.fire("error"),i.off("load",o,this)},o=function(a){if(i.off("error",r,this),this._map){var s=a.target,l=this._currentImage;s._bounds.equals(t)&&s._bounds.equals(this._map.getBounds())?(this._currentImage=s,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),l&&this._map&&this._map.removeLayer(l),l&&l._map&&l._map.removeLayer(l)):this._map.removeLayer(s)}this.fire("load",{bounds:t})};i.once("error",r,this),i.once("load",o,this)}},_update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(e>this.options.maxZoom||e<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var n=this._buildExportParams();oe.Util.extend(n,this.options.requestParams),n?(this._requestExport(n,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(e,t,n,i){if(e=oe.latLng(e),this._shouldRenderPopup&&this._lastClick.equals(e)){var r=this._popupFunction(t,n,i);r&&this._popup.setLatLng(e).setContent(r).openOn(this._map)}},_resetPopupState:function(e){this._shouldRenderPopup=!1,this._lastClick=e.latlng},_calculateBbox:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),n=this._map.unproject(e.getTopRight()),i=this._map.options.crs.project(n),r=this._map.options.crs.project(t),o=oe.bounds(i,r);return[o.getBottomLeft().x,o.getBottomLeft().y,o.getTopRight().x,o.getTopRight().y].join(",")},_calculateImageSize:function(){var e=this._map.getPixelBounds(),t=this._map.getSize(),n=this._map.unproject(e.getBottomLeft()),i=this._map.unproject(e.getTopRight()),r=this._map.latLngToLayerPoint(i).y,o=this._map.latLngToLayerPoint(n).y;return(r>0||o<t.y)&&(t.y=o-r),t.x+","+t.y}}),qne=lL.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(e){e=Qd(e),this.service=Une(e),this.service.addEventParent(this),oe.Util.setOptions(this,e)},setPixelType:function(e){return this.options.pixelType=e,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(e){return oe.Util.isArray(e)?this.options.bandIds=e.join(","):this.options.bandIds=e.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(e,t){return oe.Util.isArray(e)?this.options.noData=e.join(","):this.options.noData=e.toString(),t&&(this.options.noDataInterpretation=t),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(e){this.options.renderingRule=e,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(e){this.options.mosaicRule=e,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(e){var t=oe.Util.bind(function(i,r,o){i||setTimeout(oe.Util.bind(function(){this._renderPopup(e.latlng,i,r,o)},this),300)},this),n=this.identify().at(e.latlng);this.options.mosaicRule&&n.setMosaicRule(this.options.mosaicRule),n.run(t),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(e,t){if(this.options.f==="json")this.service.request("exportImage",e,function(i,r){i||(this.options.token&&(r.href+="?token="+this.options.token),this.options.proxy&&(r.href=this.options.proxy+"?"+r.href),this._renderImage(r.href,t))},this);else{e.f="image";var n=this.options.url+"exportImage"+oe.Util.getParamString(e);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,t)}}});function Vze(e,t){return new qne(e,t)}var Vne=lL.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(e){e=Qd(e),this.service=aL(e),this.service.addEventParent(this),oe.Util.setOptions(this,e)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(e){return this.options.dynamicLayers=e,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(e){return this.options.layers=e,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(e){return this.options.layerDefs=e,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(e){return this.options.timeOptions=e,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(e){var t=oe.Util.bind(function(r,o,a){r||setTimeout(oe.Util.bind(function(){this._renderPopup(e.latlng,r,o,a)},this),300)},this),n;if(this.options.popup?n=this.options.popup.on(this._map).at(e.latlng):n=this.identify().on(this._map).at(e.latlng),n.params.maxAllowableOffset||n.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?n.layers("visible:"+this.options.layers.join(",")):n.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!n.params.layerDefs)for(var i in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,i)&&n.layerDef(i,this.options.layerDefs[i]);n.run(t),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(e,t){if(this.options.f==="json")this.service.request("export",e,function(i,r){i||(this.options.token&&r.href&&(r.href+="?token="+this.options.token),this.options.proxy&&r.href&&(r.href=this.options.proxy+"?"+r.href),r.href?this._renderImage(r.href,t):this._renderImage(r.imageData,t,r.contentType))},this);else{e.f="image";var n=this.options.url+"export"+oe.Util.getParamString(e);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,t)}}});function Yze(e,t){return new Vne(e,t)}var Xx=oe.Layer.extend({options:{cellSize:512,updateWhenIdle:oe.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(e){oe.Util.setOptions(this,e)},onAdd:function(e){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(e){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=oe.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),e},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var e=this.options.cellSize;return e instanceof oe.Point?e:new oe.Point(e,e)},_pruneCells:function(){if(this._map){var e,t;for(e in this._cells)t=this._cells[e],t.retain=t.current;for(e in this._cells)if(t=this._cells[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._cells)this._cells[e].retain||this._removeCell(e)}},_removeAllCells:function(){for(var e in this._cells)this._removeCell(e)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),o=Math.floor(t/2),a=n-1,s=new oe.Point(+r,+o);s.z=+a;var l=this._cellCoordsToKey(s),u=this._cells[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>i?this._retainParent(r,o,a,i):!1)},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var a=new oe.Point(r,o);a.z=n+1;var s=this._cellCoordsToKey(a),l=this._cells[s];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);n+1<i&&this._retainChildren(r,o,n+1,i)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(e,t,n,i){var r=Math.round(t);i||(this._cellZoom=r,this._abortLoading&&this._abortLoading(),this._resetGrid(),r!==void 0&&this._update(e),n||this._pruneCells(),this._noPrune=!!n)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._cellSize=this.getCellSize(),i=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(e){var t=e&&(e.pinch||e.flyTo);t||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._cellZoom),r=t.project(e,this._cellZoom).floor(),o=t.getSize().divideBy(i*2);return new oe.Bounds(r.subtract(o),r.add(o))},_update:function(e){var t=this._map;if(t){var n=Math.round(t.getZoom());e===void 0&&(e=t.getCenter());var i=this._getCelldPixelBounds(e),r=this._pxBoundsToCellRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new oe.Bounds(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var u in this._cells){var c=this._cells[u].coords;(c.z!==this._cellZoom||!l.contains(new oe.Point(c.x,c.y)))&&(this._cells[u].current=!1)}if(Math.abs(n-this._cellZoom)>1){this._setView(e,n);return}for(var d=r.min.y;d<=r.max.y;d++)for(var h=r.min.x;h<=r.max.x;h++){var m=new oe.Point(h,d);if(m.z=this._cellZoom,!!this._isValidCell(m)){var g=this._cells[this._cellCoordsToKey(m)];g?g.current=!0:a.push(m)}}if(a.sort(function(b,w){return b.distanceTo(o)-w.distanceTo(o)}),a.length!==0)for(this._loading||(this._loading=!0),h=0;h<a.length;h++){var y=this._cellCoordsToKey(a[h]),x=this._keyToCellCoords(y);this._activeCells[x]?this._reuseCell(a[h]):this._createCell(a[h])}}},_isValidCell:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalCellRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._cellCoordsToBounds(e);return oe.toLatLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._cellCoordsToBounds(this._keyToCellCoords(e))},_cellCoordsToNwSe:function(e){var t=this._map,n=this.getCellSize(),i=e.scaleBy(n),r=i.add(n),o=t.unproject(i,e.z),a=t.unproject(r,e.z);return[o,a]},_cellCoordsToBounds:function(e){var t=this._cellCoordsToNwSe(e),n=new oe.LatLngBounds(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_cellCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToCellCoords:function(e){var t=e.split(":"),n=new oe.Point(+t[0],+t[1]);return n.z=+t[2],n},_removeCell:function(e){var t=this._cells[e];if(t){var n=this._keyToCellCoords(e),i=this._wrapCoords(n),r=this._cellCoordsToBounds(this._wrapCoords(n));t.current=!1,delete this._cells[e],this._activeCells[e]=t,this.cellLeave(r,i,e),this.fire("cellleave",{key:e,coords:i,bounds:r})}},_reuseCell:function(e){var t=this._cellCoordsToKey(e);this._cells[t]=this._activeCells[t],this._cells[t].current=!0;var n=this._wrapCoords(e),i=this._cellCoordsToBounds(this._wrapCoords(e));this.cellEnter(i,n,t),this.fire("cellenter",{key:t,coords:n,bounds:i})},_createCell:function(e){var t=this._cellCoordsToKey(e),n=this._wrapCoords(e),i=this._cellCoordsToBounds(this._wrapCoords(e));this.createCell(i,n,t),this.fire("cellcreate",{key:t,coords:n,bounds:i}),this._cells[t]={coords:e,current:!0},oe.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(e,t,n){var i=this._cellCoordsToKey(e);n=this._cells[i],n&&(n.loaded=+new Date,n.active=!0)},_getCellPos:function(e){return e.scaleBy(this.getCellSize())},_wrapCoords:function(e){var t=new oe.Point(this._wrapX?oe.Util.wrapNum(e.x,this._wrapX):e.x,this._wrapY?oe.Util.wrapNum(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToCellRange:function(e){var t=this.getCellSize();return new oe.Bounds(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))}});function Pl(e){this.values=[].concat(e||[])}Pl.prototype.query=function(e){var t=this.getIndex(e);return this.values[t]};Pl.prototype.getIndex=function(t){this.dirty&&this.sort();for(var n=0,i=this.values.length-1,r,o;n<=i;)if(r=(n+i)/2|0,o=this.values[Math.round(r)],+o.value<+t)n=r+1;else if(+o.value>+t)i=r-1;else return r;return Math.abs(~i)};Pl.prototype.between=function(t,n){var i=this.getIndex(t),r=this.getIndex(n);if(i===0&&r===0)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[r+1]&&this.values[r+1].value===n;)r++;return this.values[r]&&this.values[r].value===n&&this.values[r+1]&&r++,this.values.slice(i,r)};Pl.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this};Pl.prototype.bulkAdd=function(t,n){return this.values=this.values.concat([].concat(t||[])),n?this.sort():this.dirty=!0,this};Pl.prototype.sort=function(){return this.values.sort(function(t,n){return+n.value-+t.value}).reverse(),this.dirty=!1,this};var I_=Xx.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(e){if(Xx.prototype.initialize.call(this,e),e=Qd(e),e=oe.Util.setOptions(this,e),this.service=Gne(e),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var t=!1,n=0;n<this.options.fields.length;n++)this.options.fields[n].match(/^(OBJECTID|FID|OID|ID)$/i)&&(t=!0);t===!1&&Rc("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Pl,this._endTimeIndex=new Pl):this.options.timeField&&(this._timeIndex=new Pl),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(e){return c1(e),this.service.metadata(function(t,n){if(!t){var i=n.supportedQueryFormats,r=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(r=!0),!r&&i&&i.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),n.objectIdField&&(this.service.options.idAttribute=n.objectIdField),!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))}},this),e.on("zoomend",this._handleZoomChange,this),Xx.prototype.onAdd.call(this,e)},onRemove:function(e){return f1(e),e.off("zoomend",this._handleZoomChange,this),Xx.prototype.onRemove.call(this,e)},getAttribution:function(){return this.options.attribution},createCell:function(e,t){this._visibleZoom()&&this._requestFeatures(e,t)},_requestFeatures:function(e,t,n,i){this._activeRequests++,i=i||0;var r=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:e},!0),this._buildQuery(e,i).run(function(o,a,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===r&&(!o&&a&&a.features.length&&oe.Util.requestAnimFrame(oe.Util.bind(function(){this._addFeatures(a.features,t),this._postProcessFeatures(e)},this)),!o&&a&&!a.features.length&&this._postProcessFeatures(e),o&&this._postProcessFeatures(e),n&&n.call(this,o,a),s&&(s.exceededTransferLimit||s.properties&&s.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(e,t,n,i+a.features.length))},this)},_postProcessFeatures:function(e){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:e})},_cacheKey:function(e){return e.z+":"+e.x+":"+e.y},_addFeatures:function(e,t){if(t){var n=this._cacheKey(t);this._cache[n]=this._cache[n]||[]}for(var i=e.length-1;i>=0;i--){var r=e[i].id;this._currentSnapshot.indexOf(r)===-1&&this._currentSnapshot.push(r),typeof n<"u"&&this._cache[n].indexOf(r)===-1&&this._cache[n].push(r)}this.options.timeField&&this._buildTimeIndexes(e),this.createLayers(e)},_buildQuery:function(e,t){var n=this.service.query().intersects(e).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(t))&&(n=n.offset(t)),n.params.resultType="tile",this.options.requestParams&&oe.Util.extend(n.params,this.options.requestParams),this.options.simplifyFactor&&n.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&n.between(this.options.from,this.options.to),n},setWhere:function(e,t,n){this.options.where=e&&e.length?e:"1=1";for(var i=[],r=[],o=0,a=null,s=oe.Util.bind(function(h,m){if(h&&(a=h),m)for(var g=m.features.length-1;g>=0;g--)r.push(m.features[g].id);o--,o<=0&&this._visibleZoom()&&e===this.options.where&&(this._currentSnapshot=r,oe.Util.requestAnimFrame(oe.Util.bind(function(){this.removeLayers(i),this.addLayers(r),t&&t.call(n,a)},this)))},this),l=this._currentSnapshot.length-1;l>=0;l--)i.push(this._currentSnapshot[l]);this._cache={};for(var u in this._cells){o++;var c=this._keyToCellCoords(u),d=this._cellCoordsToBounds(c);this._requestFeatures(d,c,s)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t,n,i){var r=this.options.from,o=this.options.to,a=0,s=null,l=oe.Util.bind(function(h){h&&(s=h),this._filterExistingFeatures(r,o,e,t),a--,n&&a<=0&&n.call(i,s)},this);if(this.options.from=e,this.options.to=t,this._filterExistingFeatures(r,o,e,t),this.options.timeFilterMode==="server")for(var u in this._cells){a++;var c=this._keyToCellCoords(u),d=this._cellCoordsToBounds(c);this._requestFeatures(d,c,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(e,t,n,i){var r=e&&t?this._getFeaturesInTimeRange(e,t):this._currentSnapshot,o=this._getFeaturesInTimeRange(n,i);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);s>=0&&r.splice(s,1)}oe.Util.requestAnimFrame(oe.Util.bind(function(){this.removeLayers(r),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(e,t){var n=[],i;if(this.options.timeField.start&&this.options.timeField.end){var r=this._startTimeIndex.between(e,t),o=this._endTimeIndex.between(e,t);i=r.concat(o)}else if(this._timeIndex)i=this._timeIndex.between(e,t);else return Rc("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var a=i.length-1;a>=0;a--)n.push(i[a].id);return n},_buildTimeIndexes:function(e){var t,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],r=[];for(t=e.length-1;t>=0;t--)n=e[t],i.push({id:n.id,value:new Date(n.properties[this.options.timeField.start])}),r.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(r)}else{var o=[];for(t=e.length-1;t>=0;t--)n=e[t],o.push({id:n.id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(e){if(!this.options.from||!this.options.to)return!0;var t=+this.options.from.valueOf(),n=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var i=+e.properties[this.options.timeField];return i>=t&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var r=+e.properties[this.options.timeField.start],o=+e.properties[this.options.timeField.end];return r>=t&&r<=n||o>=t&&o<=n||r<=t&&o>=n}},_visibleZoom:function(){if(!this._map)return!1;var e=this._map.getZoom();return!(e>this.options.maxZoom||e<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var e in this._cells){var t=this._cells[e].coords,n=this._cacheKey(t);this._cache[n]&&this.addLayers(this._cache[n])}},authenticate:function(e){return this.service.authenticate(e),this},metadata:function(e,t){return this.service.metadata(e,t),this},query:function(){return this.service.query()},_getMetadata:function(e){if(this._metadata){var t;e(t,this._metadata)}else this.metadata(oe.Util.bind(function(n,i){this._metadata=i,e(n,this._metadata)},this))},addFeature:function(e,t,n){this.addFeatures(e,t,n)},addFeatures:function(e,t,n){this._getMetadata(oe.Util.bind(function(i,r){if(i){t&&t.call(this,i,null);return}var o=e.features?e.features:[e];this.service.addFeatures(e,oe.Util.bind(function(a,s){if(!a){for(var l=o.length-1;l>=0;l--)o[l].properties[r.objectIdField]=o.length>1?s[l].objectId:s.objectId,o[l].id=o.length>1?s[l].objectId:s.objectId;this._addFeatures(o)}t&&t.call(n,a,s)},this))},this))},updateFeature:function(e,t,n){this.updateFeatures(e,t,n)},updateFeatures:function(e,t,n){var i=e.features?e.features:[e];this.service.updateFeatures(e,function(r,o){if(!r){for(var a=i.length-1;a>=0;a--)this.removeLayers([i[a].id],!0);this._addFeatures(i)}t&&t.call(n,r,o)},this)},deleteFeature:function(e,t,n){this.deleteFeatures(e,t,n)},deleteFeatures:function(e,t,n){return this.service.deleteFeatures(e,function(i,r){var o=r.length?r:[r];if(!i&&o.length>0)for(var a=o.length-1;a>=0;a--)this.removeLayers([o[a].objectId],!0);t&&t.call(n,i,r)},this)}}),Yne=I_.extend({options:{cacheLayers:!0},initialize:function(e){e.apikey&&(e.token=e.apikey),I_.prototype.initialize.call(this,e),this._originalStyle=this.options.style,this._layers={}},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t]),this.fire("removefeature",{feature:this._layers[t].feature,permanent:!1},!0);return I_.prototype.onRemove.call(this,e)},createNewLayer:function(e){var t=oe.GeoJSON.geometryToLayer(e,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(e,t){var n=[],i=this.options.coordsToLatLng||oe.GeoJSON.coordsToLatLng;switch(t.properties&&(e.feature.properties=t.properties),t.geometry.type){case"Point":n=oe.GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(n);break;case"LineString":n=oe.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0,i),e.setLatLngs(n);break;case"MultiLineString":n=oe.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),e.setLatLngs(n);break;case"Polygon":n=oe.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),e.setLatLngs(n);break;case"MultiPolygon":n=oe.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2,i),e.setLatLngs(n);break}this.redraw(e.feature.id)},createLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=this._layers[n.id],r;this._visibleZoom()&&i&&!this._map.hasLayer(i)&&(!this.options.timeField||this._featureWithinTimeRange(n))&&(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature},!0)),i&&(i.setLatLngs||i.setLatLng)&&this._updateLayer(i,n),i||(r=this.createNewLayer(n),r?(r.feature=n,r.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(r.feature,r),this._layers[r.feature.id]=r,this.setFeatureStyle(r.feature.id,this.options.style),this.fire("createfeature",{feature:r.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(r)):Rc("invalid GeoJSON encountered"))}},addLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=this._layers[e[t]];n&&(!this.options.timeField||this._featureWithinTimeRange(n.feature))&&(this._map.addLayer(n),this.fire("addfeature",{feature:n.feature},!0))}},removeLayers:function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n],r=this._layers[i];r&&(this.fire("removefeature",{feature:r.feature,permanent:t},!0),this._map.removeLayer(r)),r&&t&&delete this._layers[i]}},cellEnter:function(e,t){this._visibleZoom()&&!this._zooming&&this._map&&oe.Util.requestAnimFrame(oe.Util.bind(function(){var n=this._cacheKey(t),i=this._cellCoordsToKey(t),r=this._cache[n];this._activeCells[i]&&r&&this.addLayers(r)},this))},cellLeave:function(e,t){this._zooming||oe.Util.requestAnimFrame(oe.Util.bind(function(){if(this._map){var n=this._cacheKey(t),i=this._cellCoordsToKey(t),r=this._cache[n],o=this._map.getBounds();if(!this._activeCells[i]&&r){for(var a=!0,s=0;s<r.length;s++){var l=this._layers[r[s]];l&&l.getBounds&&o.intersects(l.getBounds())&&(a=!1)}a&&this.removeLayers(r,!this.options.cacheLayers),!this.options.cacheLayers&&a&&(delete this._cache[n],delete this._cells[i],delete this._activeCells[i])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(e){this.resetFeatureStyle(e.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(e){var t=this._layers[e],n=this._originalStyle||oe.Path.prototype.options;return t&&(oe.Util.extend(t.options,t.defaultOptions),this.setFeatureStyle(e,n)),this},setFeatureStyle:function(e,t){var n=this._layers[e];return typeof t=="function"&&(t=t(n.feature)),n.setStyle&&n.setStyle(t),this},eachActiveFeature:function(e,t){if(this._map){var n=this._map.getBounds();for(var i in this._layers)this._currentSnapshot.indexOf(this._layers[i].feature.id)!==-1&&(typeof this._layers[i].getLatLng=="function"&&n.contains(this._layers[i].getLatLng())?e.call(t,this._layers[i]):typeof this._layers[i].getBounds=="function"&&n.intersects(this._layers[i].getBounds())&&e.call(t,this._layers[i]))}return this},eachFeature:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getFeature:function(e){return this._layers[e]},bringToBack:function(){this.eachFeature(function(e){e.bringToBack&&e.bringToBack()})},bringToFront:function(){this.eachFeature(function(e){e.bringToFront&&e.bringToFront()})},redraw:function(e){return e&&this._redraw(e),this},_redraw:function(e){var t=this._layers[e],n=t.feature;if(t&&t.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var i=this.options.pointToLayer(n,oe.latLng(n.geometry.coordinates[1],n.geometry.coordinates[0])),r=i.options.icon;t.setIcon(r)}if(t&&t.setStyle&&this.options.pointToLayer){var o=this.options.pointToLayer(n,oe.latLng(n.geometry.coordinates[1],n.geometry.coordinates[0])),a=o.options;this.setFeatureStyle(n.id,a)}t&&t.setStyle&&this.options.style&&this.resetFeatureStyle(n.id)},openPopup(e){return this._popup&&this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(e){return this._tooltip&&this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});function Zze(e){return new Yne(e)}var Xze=Aze.version;const Kze=Object.freeze(Object.defineProperty({__proto__:null,BasemapLayer:t2,DynamicMapLayer:Vne,FeatureLayer:Yne,FeatureLayerService:Wne,FeatureManager:I_,Find:Ine,Identify:qC,IdentifyFeatures:Dne,IdentifyImage:jne,ImageMapLayer:qne,ImageService:Hne,MapService:Bne,Query:$ne,RasterLayer:lL,Service:h1,Support:Au,Task:d1,TiledMapLayer:sL,Util:zze,VERSION:Xze,basemapLayer:Wze,dynamicMapLayer:Yze,featureLayer:Zze,featureLayerService:Gne,find:One,get:UC,identify:Hze,identifyFeatures:Lne,identifyImage:zne,imageMapLayer:Vze,imageService:Une,mapService:aL,options:wne,post:Sne,query:GC,request:nL,service:Uze,task:Bze,tiledMapLayer:Gze},Symbol.toStringTag,{value:"Module"})),Jze=x8(Kze),Qze=x8(eze);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.updateEsriLayer=void 0;const t=Jze,n=Qze,i=(a,s)=>{var l;const{layerType:u,name:c}=a;switch(u){case"basemapLayer":l=t.basemapLayer(c,{...a});break;default:l=new t[u]({...a})}return{instance:l,context:s}},r=(a,s,l)=>{l.url!==s.url&&a.setUrl&&a.setUrl(s.url),l.opacity!==s.opacity&&a.setOpacity&&a.setOpacity(s.opacity),l.zIndex!==s.zIndex&&a.setZIndex&&a.setZIndex(s.zIndex),(l.to!==s.to||l.from!==s.from)&&a.setTimeRange&&a.setTimeRange(s.to,s.from,s.setTimeCallback||null),l.style!==s.style&&a.setStyle&&a.setStyle(s.style),l.where!==s.where&&a.setWhere&&a.setWhere(s.where),l.layers!==s.layers&&a.setLayers&&a.setLayers(s.layers),l.layerDefs!==s.layerDefs&&a.setLayerDefs&&a.setLayerDefs(s.layerDefs),l.dynamicLayers!==s.dynamicLayers&&a.setDynamicLayers&&a.setDynamicLayers(s.dynamicLayers),l.timeOptions!==s.timeOptions&&a.setTimeOptions&&a.setTimeOptions(s.timeOptions),l.bandIds!==s.bandIds&&a.setBandIds&&a.setBandIds(s.bandIds),l.noData!==s.noData&&a.setNoData&&a.setNoData(s.bandIds),l.pixelType!==s.pixelType&&a.setPixelType&&a.setPixelType(s.bandIds),l.renderingRule!==s.renderingRule&&a.setRenderingRule&&a.setRenderingRule(s.renderingRule),l.mosaicRule!==s.mosaicRule&&a.setMosaicRule&&a.setMosaicRule(s.mosaicRule)};e.updateEsriLayer=r;const o=(0,n.createLayerComponent)(i,e.updateEsriLayer);e.default=o})(Jd);var uL={};Object.defineProperty(uL,"__esModule",{value:!0});const c8=P,e6e=Jd,t6e=c8.forwardRef((e,t)=>c8.createElement(e6e.default,{ref:t,layerType:"basemapLayer",...e}));uL.default=t6e;var cL={};Object.defineProperty(cL,"__esModule",{value:!0});const f8=P,n6e=Jd,i6e=f8.forwardRef((e,t)=>f8.createElement(n6e.default,{ref:t,layerType:"featureLayer",...e}));cL.default=i6e;var fL={};Object.defineProperty(fL,"__esModule",{value:!0});const d8=P,r6e=Jd,o6e=d8.forwardRef((e,t)=>d8.createElement(r6e.default,{ref:t,layerType:"imageMapLayer",...e}));fL.default=o6e;var dL={};Object.defineProperty(dL,"__esModule",{value:!0});const h8=P,a6e=Jd,s6e=h8.forwardRef((e,t)=>h8.createElement(a6e.default,{ref:t,layerType:"dynamicMapLayer",...e}));dL.default=s6e;var hL={};Object.defineProperty(hL,"__esModule",{value:!0});const p8=P,l6e=Jd,u6e=p8.forwardRef((e,t)=>p8.createElement(l6e.default,{ref:t,layerType:"tiledMapLayer",...e}));hL.default=u6e;Object.defineProperty(so,"__esModule",{value:!0});var Zne=so.TiledMapLayer=so.DynamicMapLayer=so.ImageMapLayer=so.FeatureLayer=so.BasemapLayer=so.EsriLeafletLayer=void 0;const c6e=Jd;so.EsriLeafletLayer=c6e.default;const f6e=uL;so.BasemapLayer=f6e.default;const d6e=cL;so.FeatureLayer=d6e.default;const h6e=fL;so.ImageMapLayer=h6e.default;const p6e=dL;so.DynamicMapLayer=p6e.default;const m6e=hL;Zne=so.TiledMapLayer=m6e.default;function g6e({param:e,opt:t}){let n=t==="CH"?[e.CHMin,e.CHMax]:[e.Min,e.Max];const i=t==="CH"?i8[e.Palette2]:i8[e.Palette1],r=[...Array(20).keys()],o=e.Unit==="per cent"?"value in %":e.Unit,a=e.Proportional?"increasing value means better condition":"increasing value means worse condition";let s=[.001,.002,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20],l=[3,3,3,2,2,2,2,1,1,0,0,0,0,0];const u=Tje(s.map(g=>Math.abs(6-(n[1]-n[0])/g)));s=s[u],l=l[u];let c=[n[0]],d=[10];const h=80*s/(n[1]-n[0]);for(;c[c.length-1]<=n[1]-s;){const g=c.length;c.push(c[g-1]+s),d.push(d[g-1]+h)}const m=v.jsxs("div",{className:"text-center",children:[v.jsxs("svg",{width:"100%",height:"65",children:[r.slice(0,20).map(g=>v.jsx("rect",{x:10+g*4+"%",y:"0%",rx:"3px",ry:"3px",width:"4%",height:"30",stroke:"#2b2b2b",fill:i[g]},g)),v.jsx("line",{x1:"10%",x2:"90%",y1:"40",y2:"40",stroke:"black",weight:"2"}),d.map((g,y)=>v.jsx("line",{x1:g+"%",x2:g+"%",y1:"37",y2:"43",stroke:"black",weight:"2"},y)),c.map((g,y)=>v.jsx("text",{x:d[y]+"%",y:"55",textAnchor:"middle",fontSize:"90%",children:parseFloat(g).toFixed(l)},y))]}),v.jsx("span",{children:v.jsx("b",{children:o})}),v.jsx("br",{}),v.jsx("span",{children:v.jsx("i",{children:a})})]});return v.jsxs("div",{className:"row m-0 p-2 mb-2 rounded-3 bg-secondary-subtle",style:{maxWidth:"800px"},children:[v.jsx("div",{className:"p-0",children:v.jsx("h5",{children:v.jsx(ub,{bg:"danger",children:e.Indicator})})}),v.jsxs("div",{className:"row p-0 m-0",children:[v.jsxs("div",{className:"col-4 p-0 m-0",style:{fontSize:"75%"},children:[v.jsxs("p",{children:[v.jsx("b",{children:"Definition"}),v.jsx("br",{}),e.Definition]}),e.Remark?v.jsxs("p",{children:[v.jsx("b",{children:"Note"}),v.jsx(jje,{content:e.Remark})]}):v.jsx(v.Fragment,{})]}),v.jsx("div",{className:"col-8",style:{fontSize:"75%"},children:v.jsxs("div",{className:"row p-0 m-0 justify-content-between",children:[v.jsxs("div",{className:"col-md-6 p-0 m-0",children:[v.jsx("b",{children:"Remarks"}),v.jsx("br",{}),v.jsxs("b",{children:["Round 2",""]})," ",e.R2?e.R2+", "+e.Y2:"NA",v.jsx("br",{}),v.jsxs("b",{children:["Round 1",""]})," ",e.R1?e.R1+", "+e.Y1:"NA",v.jsx("br",{}),v.jsxs("b",{children:["Change",""]})," ",e.R1&&e.R2?v.jsx(v.Fragment,{children:"Round 2 - Round 1"}):"NA"]}),v.jsxs("div",{className:"col-md-6 p-0 m-0",children:[v.jsx("div",{className:"float-end",children:v.jsx(VD,{about:"About this color bar"})}),m]})]})})]})]})}const m8={esri:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",label:"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",positron:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png"};function y6e({param:e,data:t,boundary:n,func:i,filterFunc:r}){const o=Kw[e.country],a=o.indicators[e.indicator],s=o.NoR2.includes(e.indicator)?"R1":"R2",[l,u]=P.useState(),[c,d]=P.useState({round:s,field:e.indicator+"_"+s,showRaster:!1,showLabel:!1});P.useEffect(()=>{const O=o.NoR2.includes(e.indicator)?"R1":"R2";d({round:O,field:e.indicator+"_"+O,showRaster:!1,showLabel:!1}),u()},[e.indicator]);const h=P.useRef(),m=P.useRef(),g=P.useRef(),y=P.useRef();var x;const b=()=>(x=tze(),null),w=n.features.map(O=>O.properties);function S(O){x.fitBounds(O)}function k(){return v.jsx("div",{id:"zoomPanel",className:"leaflet-bottom leaflet-left",children:v.jsxs("div",{className:"leaflet-control btn-group-vertical",children:[v.jsx("button",{className:"map-btn",title:"Zoom-in",onClick:()=>x.zoomIn(),children:v.jsx(Sje,{})}),v.jsx("button",{className:"map-btn",title:"Zoom-out",onClick:()=>x.zoomOut(),children:v.jsx(wje,{})}),v.jsx("button",{className:"map-btn",title:"Reset View",onClick:()=>x.setView(o.Center,o.Zoom),children:v.jsx(bje,{})})]})})}function R(){const[O,j]=P.useState(!0);let q=!!o.DistrictOnly.includes(e.indicator),K=!!o.NoR1.includes(e.indicator),W=!!o.NoR2.includes(e.indicator);function J(){let ke=document.getElementById("layerControl");ke.getAttribute("style")==="display: block;"?(ke.style.display="none",j(!1)):(ke.style.display="block",j(!0))}function Q(ke){let pe={...c};pe.round=ke,pe.field=e.indicator+"_"+ke,pe.showRaster=!1,d(pe,{replace:!0})}function ae(ke){let pe={...c};pe.showRaster=ke,d(pe,{replace:!0})}function ge(){let ke={...c};ke.showLabel=!c.showLabel,d(ke,{replace:!0})}return v.jsx("div",{className:"leaflet-top leaflet-left",children:v.jsx("div",{className:"leaflet-control m-1 p-0 m-0",children:v.jsxs("div",{className:"p-1 m-0 mt-1 rounded-2 bg-secondary-subtle",style:{display:"block"},children:[v.jsxs("div",{className:"subtitle",onClick:J,style:{height:"25px",width:"140px"},children:[v.jsx("b",{children:"Control"}),v.jsx("i",{className:"float-end",children:O?v.jsx(_je,{title:"minimize"}):v.jsx(xje,{title:"maximize"})})]}),v.jsxs("div",{id:"layerControl",children:[v.jsxs(Nr,{children:[v.jsx(Nr.Check,{defaultChecked:c.round==="R2",disabled:W,type:"radio",id:"radio2",label:"Round 2",name:"optRound",title:W?"Unavailable for this indicator":"Show round 2 data",onClick:()=>Q("R2")}),v.jsx(Nr.Check,{defaultChecked:c.round==="R1",disabled:K,type:"radio",id:"radio1",label:"Round 1",name:"optRound",title:K?"Unavailable for this indicator":"Show round 1 data",onClick:()=>Q("R1")}),v.jsx(Nr.Check,{defaultChecked:c.round==="CH",disabled:W||K,type:"radio",id:"radio3",label:"Change",name:"optRound",title:W?"Unavailable for this indicator":"Show change",onClick:()=>Q("CH")})]}),v.jsx("hr",{className:"mb-2 mt-0"}),v.jsxs(Nr,{children:[v.jsx(Nr.Check,{defaultChecked:c.showRaster===!1,type:"radio",id:"radio_agg",label:"Administrative Level",name:"optRaster",title:"Show aggregated data",onClick:()=>ae(!1)}),v.jsx(Nr.Check,{defaultChecked:c.showRaster===!0,disabled:q,type:"radio",id:"radio_grid",label:"Grid Level",name:"optRaster",title:q?"Unavailable for this indicator":"Show gridded data",onClick:()=>ae(!0)})]}),v.jsx("hr",{className:"mb-2 mt-0"}),v.jsx(Nr,{children:v.jsx(Nr.Check,{type:"switch",id:"showLabel",label:"Show label",defaultChecked:c.showLabel,onChange:ge})})]})]})})})}const M=P.useMemo(()=>(a.Definition=rc[e.indicator].Definition,a.Unit=rc[e.indicator].Unit,a.Proportional=rc[e.indicator].Proportional,v.jsx(g6e,{param:a,opt:c.round})),[e.indicator,c.round]),T=P.useMemo(()=>v.jsx(R,{}),[e.indicator,c]),N=P.useMemo(()=>{function O(j){u(j.target.value),i(j.target.value)}return v.jsxs("div",{children:[v.jsxs("b",{children:["Select ",e.config.Adm1]}),v.jsxs(Nr.Select,{id:"selectState",onChange:O,value:l,children:[v.jsx("option",{value:""}),w.map((j,q)=>v.jsx("option",{value:j.state,x:j.x,y:j.y,children:j.state},q))]})]})},[l]);P.useMemo(()=>v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"col-lg-7"}),v.jsx("div",{className:"col-lg-5",children:v.jsx("b",{children:"Inspect Map"})})]}),[c]);const z=P.useCallback(O=>{let j=a.Palette1,q=[a.Min,a.Max];return c.round==="CH"&&(j=a.Palette2,q=[a.CHMin,a.CHMax]),{zIndex:2,weight:.5,opacity:1,color:"#FFFFFF",fillOpacity:1,fillColor:one(O.properties[c.field],q,j)}},[e.indicator,c]);let H=t?t.features.filter(O=>O.properties.state===l):[];H.forEach(O=>{const j=c.round==="CH"?{R1:O.properties[e.indicator+"_R1"],R2:O.properties[e.indicator+"_R2"],CH:O.properties[e.indicator+"_CH"]}:{[c.round]:O.properties[c.field]};O.properties.toDisplay=j}),P.useEffect(()=>{h.current&&(h.current.clearLayers(),h.current.addData(H))},[h,H]),P.useEffect(()=>{m.current&&(m.current.clearLayers(),m.current.addData(n))},[h,n]),P.useEffect(()=>{if(g.current){const O=n.features.filter(j=>j.properties.state===l);g.current.clearLayers(),g.current.addData(O)}},[g,l]),P.useEffect(()=>{let O={...t};O.features=t.features.filter(j=>r(j.properties)),y.current&&(y.current.clearLayers(),y.current.addData(O),y.current.setStyle(z))},[y,e.indicator,c,r]);const U=P.useMemo(()=>{if(c.showRaster){let O="https://tiles.arcgis.com/tiles/7vxqqNxnsIHE3EKt/arcgis/rest/services/";return O+=`${e.config.Prefix}${c.field}/MapServer`,v.jsx(Zne,{name:"thisRaster",url:O})}else return v.jsx(e0,{data:t,ref:y,style:z,attribution:'Powered by <a href="https://www.esri.com">Esri</a>'})},[c.showRaster,c.field,e.indicator,t]),X=(O,j)=>{j.on({mouseover:function(q){let W=`<div><b>${q.target.feature.properties.state}</b></div>`;j.setStyle({weight:3}),j.bindTooltip(W),j.openTooltip()},mouseout:function(q){j.setStyle({weight:.5}),j.closeTooltip()},click:function(q){const K=q.target.feature.properties.state;j.setStyle({weight:3}),S(q.target._bounds),u(K),i(K)}})},B=(O,j)=>{function q(K){let W=`<div><b>${K.district}</b>`;const J={R1:"R<sub>1</sub>",R2:"R<sub>2</sub>",CH:"Change"};return W+=`<br/>${K.state}<br/>`,Object.keys(K.toDisplay).forEach((Q,ae)=>{W+=`<br/> ${J[Q]} ${Dh(K.toDisplay[Q],2)}`}),W+="</div>",W}j.on({mouseover:function(K){const W=K.target.feature.properties,J=q(W);j.setStyle({weight:3,fillOpacity:.7}),j.bindTooltip(J),j.openTooltip()},mouseout:function(K){j.setStyle({weight:.5,fillOpacity:0}),j.closeTooltip()}})};return v.jsxs("div",{id:"map-container",className:"row p-0 m-0",children:[M,v.jsx("div",{className:"row m-0 p-0 mb-2",children:v.jsxs(ize,{zoomControl:!1,center:e.config.Center,zoom:e.config.Zoom,minZoom:3,maxZoom:9,style:{width:"100%",height:"60vh",minHeight:"400px",background:"#fff",borderRadius:"10px"},children:[v.jsx(b,{}),v.jsx(k,{}),T,v.jsx(Zx,{name:"basemap",style:{zIndex:0},children:v.jsx(l8,{url:m8.positron})}),c.showLabel?v.jsx(l8,{url:m8.label,zIndex:500}):v.jsx(v.Fragment,{}),v.jsx(Zx,{name:"tiles",style:{zIndex:55},children:U}),v.jsxs(Zx,{name:"selected",style:{zIndex:60},children:[v.jsx(e0,{data:l,ref:g,style:zje,zIndex:400}),v.jsx(e0,{data:n,ref:m,style:n8,onEachFeature:X})]}),c.showLabel?null:v.jsxs(Zx,{name:"boundary",style:{zIndex:65},children:[v.jsx(e0,{data:n,style:n8,onEachFeature:X}),v.jsx(e0,{data:H,ref:h,style:Bje,onEachFeature:B})]})]})}),v.jsxs("div",{className:"row m-0 p-0 mb-2 bg-secondary-subtle rounded-3",children:[v.jsxs("div",{className:"col-5 p-2",style:{fontSize:"75%"},children:[e.config.Adm1," of interest can be selected by clicking the map or using dropdown menu on the right."]}),v.jsx("div",{className:"col-7 p-2",children:N})]})]})}const g8=Object.keys(Kw),v6e=["Burkina Faso","Kenya","Nigeria"],x6e=["Burkina Faso","Nigeria"],du=async(e,t)=>{await fetch(e).then(n=>n.json()).then(n=>t(n))};function SR(){let e=vae(),t=eP();const[n,i]=P.useState({country:"",indicator:"",config:"",showData:"all",probLimit:0}),[r,o]=P.useState(),[a,s]=P.useState(),[l,u]=P.useState(),[c,d]=P.useState(),[h,m]=P.useState(),[g,y]=P.useState(),[x,b]=P.useState();P.useEffect(()=>{const X=t.pathname.split("/");let B={country:"",indicator:"",config:"",showData:"all",probLimit:0};if(g8.includes(X[1])){B.country=X[1],B.config=Kw[X[1]];const O=Object.keys(B.config.indicators);X.length===3&O.includes(X[2])?B.indicator=X[2]:B.indicator="";const j=`./public/data/${B.country}`;du(`${j}/${B.config.TLC}_adm1.json`,o),du(`${j}/${B.config.TLC}_data.json`,s),du(`${j}/${B.config.TLC}_data_adm1.json`,u),du(`${j}/${B.config.TLC}_table.json`,d)}i(B,{replace:!0})},[n.country]),P.useEffect(()=>{if(x){const X=c.filter(O=>O.state===x);m(X,{replace:!0});const B=l.filter(O=>O.state===x);y(B,{replace:!0})}},[x]),P.useMemo(()=>v.jsx("div",{children:v.jsx(Zse,{variant:"light"})}),[]);const w=P.useMemo(()=>{let X={rounds:""};if(n.indicator){const B=n.config.indicators[n.indicator],O=!n.config.NoR1.includes(n.indicator)&!n.config.NoR2.includes(n.indicator),j=n.config.NoR1.includes(n.indicator)?`Round 2 (${B.R2}, ${B.Y2})`:`Round 1 (${B.R1}, ${B.Y1})`;X={rounds:O?`Round 1 (${B.R1}, ${B.Y1}), Round 2 (${B.R2}, ${B.Y2}), or the change between rounds (Round 2 and Round 1)`:j}}return X},[n.indicator]),S=P.useCallback(X=>{const B=X[`${n.indicator}_CH`],O=X[`${n.indicator}_CH_P`];let j=!0;return JM.includes(n.indicator)?j=n.showData==="pos"?B>0&&O>n.probLimit:n.showData==="neg"?B<=0&&O<100-n.probLimit:!0:j=n.showData==="neg"?B>0&&O>n.probLimit:n.showData==="pos"?B<=0&&O<100-n.probLimit:!0,j},[n.showData,n.probLimit]);function k(X){const B=X.target.value;let O={country:B,indicator:"",config:Kw[B],showData:"all",probLimit:0};if(b(),s(),u(),m(),y(),i(O,{replace:!0}),e("/"+B,{replace:!0}),g8.includes(B[1])){const j=`./public/data/${O.country}`;console.log("fetch data",j),du(`${j}/${O.config.TLC}_adm1.json`,o),du(`${j}/${O.config.TLC}_data.json`,s),du(`${j}/${O.config.TLC}_data_adm1.json`,u),du(`${j}/${O.config.TLC}_table.json`,d)}document.getElementById("selectIndicator")&&(document.getElementById("selectIndicator").value="")}function R(X){const B=X.target.value;let O={...n};O.indicator=B,O.showData="all",O.probLimit=0,b(),m(),y(),i(O,{replace:!0}),e(`/${n.country}/${B}`,{replace:!0});const j=document.getElementById("selectFilter");j&&(j.value="all")}function M(X){const B=X.target.value;let O={...n};B.slice(0,3)==="pos"?(O.showData="pos",O.probLimit=Qg["Show Improvement"][B].limit):B.slice(0,3)==="neg"?(O.showData="neg",O.probLimit=Qg["Show Worsening"][B].limit):(O.showData="all",O.probLimit=0),i(O,{replace:!0})}function T(){return v.jsxs("div",{children:[v.jsx("b",{children:"Select country"}),v.jsxs(Nr.Select,{id:"selectCountry",onChange:k,defaultValue:n.country,children:[v.jsx("option",{value:""}),v6e.map((X,B)=>{const O=X.replace(" ","").toLowerCase();return v.jsx("option",{value:O,disabled:x6e.includes(X),children:X},B)})]})]})}const N=P.useMemo(()=>{function X(B,O){return B.Indicator<O.Indicator?-1:B.Indicator>O.Indicator?1:0}if(n.country!=""){let B={};return Object.keys(n.config.indicators).forEach(O=>{const j=n.config.indicators[O].Theme;Object.keys(B).includes(j)?B[j].push({Key:O,Indicator:n.config.indicators[O].Indicator}):B[j]=[{Key:O,Indicator:n.config.indicators[O].Indicator}]}),v.jsxs("div",{children:[v.jsx("b",{children:"Select indicator"}),v.jsxs(Nr.Select,{id:"selectIndicator",onChange:R,defaultValue:n.indicator,children:[v.jsx("option",{value:""}),Object.keys(B).map((O,j)=>v.jsx("optgroup",{label:O,children:B[O].sort(X).map((q,K)=>v.jsx("option",{value:q.Key,children:q.Indicator},K))},j))]})]})}else return v.jsx(v.Fragment,{})},[n.country]),z=P.useMemo(()=>{const X=c?!(n.indicator+"_CH_P"in c[0]):!1;return X?v.jsx(v.Fragment,{}):v.jsxs("div",{className:"row rounded-3 m-0 bg-secondary-subtle",children:[v.jsx("div",{className:"col-5 p-2",style:{fontSize:"75%"},children:"The data displayed can also be filtered according to how significant the change is. This applies when the unit-level confidence interval is available."}),v.jsxs("div",{className:"col-7 p-2 ",id:"selection",children:[v.jsx("b",{children:"Filter by Change Significance"}),v.jsx(VD,{about:"Note on the change certainty",positive:!0}),v.jsxs(Nr.Select,{id:"selectFilter",onChange:M,disabled:X,defaultValue:"all",children:[v.jsx("option",{value:"all",children:"Show all"}),Object.keys(Qg).map((B,O)=>v.jsx("optgroup",{label:B,children:Object.keys(Qg[B]).map((j,q)=>v.jsx("option",{value:j,children:Qg[B][j].label},q))},O))]})]})]})},[n.indicator]),H=P.useMemo(()=>a?v.jsx(y6e,{param:n,boundary:r,data:a,func:b,filterFunc:S}):v.jsx("div",{className:"m-0 p-3",children:v.jsx("kbd",{children:"Refresh the page to reload the data"})}),[n,a]),U=P.useMemo(()=>h?v.jsx(Vje,{data:h,stat:g,param:n,filterFunc:S}):v.jsx(v.Fragment,{}),[h,n]);return v.jsxs("div",{className:"container-fluid",children:[v.jsx("blockquote",{className:"blockquote text-center p-2",children:v.jsx("h1",{className:"display-6",children:"Subnational mapping of child and maternal health and development indicators in selected low- and middle-income countries"})}),v.jsx("div",{className:"row mt-3 p-2 mb-3 rounded-3 bg-secondary-subtle",children:v.jsxs("div",{className:"row d-flex justify-content-between",children:[v.jsxs("div",{className:"col-lg-8",children:[v.jsx("p",{children:"This web application presents a summary of the child and maternal health and development indicators calculated at subnational level (geographic areas below the national level) for a selection of countries of interest to CIFF."}),v.jsx("p",{children:"Multiple indicators are presented in map, chart, and tabulated form, and for multiple time points based on data availability. Changes over time for each indicator are also presented."}),v.jsxs("p",{children:["Please consult the ",v.jsx("a",{href:"./#/guide",children:"Guide"})," and the ",v.jsx("a",{href:"./#/about",children:"About"})," sections for more information on how to use this portal."]})]}),v.jsxs("div",{className:"col-lg-4 px-3",id:"selection",children:[v.jsx(T,{}),v.jsx("br",{}),N]})]})}),n.indicator===""?v.jsx(v.Fragment,{}):v.jsxs("div",{className:"p-0 m-0",children:[v.jsx("div",{className:"row",children:v.jsxs("div",{className:"col p-2 mb-3 rounded-3 bg-secondary-subtle",children:[v.jsx("h3",{children:v.jsxs(ub,{bg:"danger",children:[n.config.indicators[n.indicator].Indicator," in ",n.config.Name]})}),v.jsx("hr",{}),v.jsxs("p",{children:["The map below displays surfaces of subnational areas (either at ",n.config.Adm1.toLowerCase()," and ",n.config.Adm2.toLowerCase()," level or high-resolution 5x5km - pixel level data) of a particular indicator in ",n.config.Name,"."]}),v.jsxs("p",{children:["Data from ",w.rounds," for ",n.config.Name," can be selected and displayed."]}),v.jsxs("p",{children:["To get deeper information on a specific ",n.config.Adm1.toLowerCase()," or ",n.config.Adm2.toLowerCase()," in ",n.config.Name,", click on an area on the map or use the drop-down menu below. Once an area on the map has been selected, an additional set of information including tables or graphs to facilitate the interpretation of the data is displayed on the right side panel (Summary, Chart, and Table tabs)."]})]})}),v.jsxs("div",{className:"row mt-3 p-0 mb-3",children:[v.jsxs("div",{className:"col-xl-7 p-0 m-0 px-1",children:[v.jsx(t8,{element:H,elemID:"map-container",param:["map",n],title:v.jsx("div",{className:"subtitle",children:v.jsxs("h4",{children:["Map of ",n.country]})})}),H,z]}),v.jsx("div",{className:"col-xl-5 p-0 m-0 px-1",children:x?v.jsxs(v.Fragment,{children:[v.jsx(t8,{element:U,param:["table",n],elemID:"chart-container"}),U]}):v.jsx(v.Fragment,{})})]})]})]})}const _6e="/ciff_portal/assets/exceedance-2-zf-W3bHS.png",b6e="/ciff_portal/assets/aggregation-25r2IAUX.png",w6e="/ciff_portal/assets/disaggregation-2WkmDDpY.png",S6e="/ciff_portal/assets/type-1-QWprYAVG.png",C6e="/ciff_portal/assets/type-2-ICDnb6Aq.png",E6e="/ciff_portal/assets/workflow-S-atE33Q.png";function t0({which:e}){return{zero:T6e(),boundary:A6e(),change:M6e(),ihme:F6e(),espen:P6e()}[e]}function Lh({src:e,label:t,number:n,caption:i,width:r="80%"}){return v.jsxs("div",{id:t,className:"m-2 text-center",children:[v.jsx("div",{className:"text-center",children:v.jsx(Pue,{alt:t,src:e})}),v.jsxs("figcaption",{className:"text-center",children:[v.jsxs("b",{children:["Figure ",n,"."]})," ",i]})]})}function k6e({obj:e}){return v.jsx("div",{children:v.jsx(On,{border:"primary",children:v.jsxs(On.Body,{children:[v.jsx(On.Title,{children:e.title}),v.jsx(On.Subtitle,{children:e.subtitle?e.subtitle:""}),e.items?v.jsx(On.Text,{children:v.jsx("div",{children:v.jsx("ul",{children:e.items.map((t,n)=>v.jsx("li",{children:t},n))})})}):""]})})})}function R6e(){return v.jsx(nW,{xs:1,md:3,className:"g-2",children:z6e.map((e,t)=>v.jsx(DH,{children:v.jsx(k6e,{obj:e},t)},t))})}function T6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Notes"}),v.jsxs(nW,{xs:1,md:3,className:"g-2",children:[v.jsx(On,{style:{width:"18rem"},children:v.jsxs(On.Body,{children:[v.jsx(On.Title,{children:v.jsx("a",{href:"#/technote-1",className:"subtitle",children:"Technical Note 1"})}),v.jsx(On.Text,{children:"This note explains how we manage and harmonise the changes of administrative boundaries from round 1 to round 2. Careful harmonisation of the boundaries enables us to examine how a particular indicator changes over time."}),v.jsxs("a",{href:"#/technote-1",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})}),v.jsx(On,{style:{width:"18rem"},children:v.jsxs(On.Body,{children:[v.jsx(On.Title,{children:v.jsx("a",{href:"#/technote-0",className:"subtitle",children:"Technical Note 2"})}),v.jsx(On.Text,{children:"Change of an indicator over time can be appreciated as either improvement or worsening. In this technical note, we explain the use of Exceedance Probability to statistically determine the direction of the change."}),v.jsxs("a",{href:"#/technote-0",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})}),v.jsx(On,{style:{width:"18rem"},children:v.jsxs(On.Body,{children:[v.jsx(On.Title,{children:v.jsx("a",{href:"#/technote-3",className:"subtitle",children:"Technical Note 3"})}),v.jsx(On.Text,{children:"Technical note on the use of the Institute for Health Metrics and Evaluation (IHME) data in the modeling."}),v.jsxs("a",{href:"#/technote-3",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})}),v.jsx(On,{style:{width:"18rem"},children:v.jsxs(On.Body,{children:[v.jsx(On.Title,{children:v.jsx("a",{href:"#/technote-4",className:"subtitle",children:"Technical Note 4"})}),v.jsx(On.Text,{children:"Technical note on the use of the WHO's Expanded Special Project for Elimination of Tropical Diseases (WHO-ESPEN) data in the modeling."}),v.jsxs("a",{href:"#/technote-4",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})})]})]})}function A6e(){const e=["Kenya"],t={India:N6e(),Kenya:$6e()};return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 1"}),v.jsx("h3",{children:"National and subnational boundaries"}),v.jsx("hr",{}),v.jsx(Ay,{className:"mb-3",children:e.map((n,i)=>v.jsx(Ru,{eventKey:n,title:n,children:t[n]},i))})]})}function M6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 2"}),v.jsx("h3",{children:"Exceedance probability and confidence in changes over time"}),v.jsx("hr",{}),v.jsx("h4",{children:"Background"}),v.jsx("p",{children:"We have produced 5x5km high-resolution (also referred to as grid level) prediction and uncertainty maps illustrating changes over time for health and development indicators within specific subnational areas, such as districts or similar administrative divisions varying by country. Our methodology relies on data from the two most recent rounds of the nationally representative Demographic and Health Surveys (DHS), which are available at the cluster level, and mapped through GPS coordinates of the cluster centres. In the case of India, we utilised the National Family Health Surveys (NFHS), specifically NFHS-4 (2015-16) denoted as Round 1, and NFHS-5 (2019-22) denoted as Round 2. Measuring changes between these survey rounds allows us to track and assess the progress of the health and development indicators over time"}),v.jsx("p",{children:"To ensure the reliability of our estimates of the changes within each subnational area, we employed exceedance probability to quantify our confidence in these observed changes. Exceedance probability, commonly applied in environmental and risk analysis Richards et al., 2014, assesses the likelihood of an event surpassing a specific limit within a defined period (Soch, 2020). In simpler terms, exceedance probability helps us assess potential improvements or worsening of our health and development indicators. We express this likelihood as a percentage, indicating the probability of an indicator exceeding our defined threshold. For this work, we use the statistical significance levels of 90% (likely), 95% (highly likely), and 99% (almost certain)."}),v.jsx("h4",{children:"Outline"}),v.jsx("p",{children:'We outline the entire process of implementing and applying exceedance probability using the indicator "Percentage of women who had 4 or more antenatal visits" (ANC4+) in India as an example. For India, the subnational areas are the districts. This outline unfolds in three main steps: (1) preparation, (2) implementation, and (3) application. Further detail can be found in the Methods section.'}),v.jsxs("div",{className:"border border-secondary rounded-4 p-3 mb-4",children:[v.jsx("h5",{children:"Preparation"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ol",{children:[v.jsx("li",{children:"Sample grid-level estimates from the posterior distributions of the models. These models, processed through the Integrated Nested Laplace Approximation  Stochastic Partial Differential Equation method (INLA-SPDE) (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013), pertain to the two rounds of survey data for ANC4+."}),v.jsx("li",{children:"Derive grid-level change estimate samples by calculating the difference between the grid-level estimate samples of Round 2 and Round 1."}),v.jsx("li",{children:"Aggregate the grid level change estimate samples to the subnational level, specifically at the district level, to obtain district level change estimate samples (see Figure 1a)."})]})}),v.jsx("h5",{children:"Implementation"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ol",{children:[v.jsx("li",{children:"The district level change estimate samples can be depicted using an empirical cumulative density function (ECDF) (Dekking et al., 2005). The ECDF offers insights into the probability, given the data, that the true change is equal to or less than a specified value. It derives from the proportion of samples that are equal to or less than the specified value. For change in ANC4+, we are interested in the district estimate value zero, because we want to observe where there have been meaningful improvements for ANC4+."}),v.jsx("li",{children:"The ECDF at zero for each district indicates the proportion of samples equal to or less than zero. This informs us of the probability, given the data, that the true change is less than or equal to zero."}),v.jsx("li",{children:"The complement of the ECDF at zero, calculated as 1 - ECDF(0), tells us the proportion of samples greater than zero. This provides the probability, given the data, that the true change is greater than zero (see Figure 1b)."})]})}),v.jsx("h5",{children:"Application"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ol",{children:[v.jsx("li",{children:"To ensure a high level of certainty (95% certain) that district level estimates are greater than zero, compare the probability (or proportion) obtained with 95% (or 0.95). Adjust the slider in the Portal to highlight districts where improvements are highly certain (95% certain)."}),v.jsx("li",{children:"Conversely, if the probability (or proportion) is below 95% (less than 0.95), it indicates a lack of high certainty (95% certain) regarding meaningful improvements in those districts."}),v.jsx("li",{children:"Steps 1 and 2 can be repeated for various certainty levels (see Figure 1c)."})]})}),v.jsx("br",{}),v.jsx(Lh,{src:_6e,label:"fig-exceedance",number:"1",caption:"Workflow highlighting some of the key steps of the process described in the Outline for implementing and applying exceedance probability using the indicator ANC4+ in selected districts in India. Panel (a) links to Step 1.3 in the Outline and shows the samples of district level estimates for the change over time between NFHS-4 (Round 1) and NFHS-5 (Round2) for the ANC4+ indicator in the state of Odisha, India. Panel (b) links to Step 2.3 in the Outline and shows the histograms and proportions of samples for estimates of change over time in two districts within the state of Odisha, India. Panel (c) links to Step 3 in the Outline and is a visual representation of how changing significance levels affect the confidence (uncertainty) around the estimated improvement of ANC4+ over time for the selected districts."})]}),v.jsx("h4",{children:"Methods"}),v.jsx("p",{children:'In examining changes in ANC4, we employed the statistical method INLA-SPDE to estimate ANC4+ values. This method generates "best estimations" (posterior distributions) based on available data, enabling us to predict potential ANC4 values. By comparing these values across different survey rounds, we obtain samples representing changes at grid and district levels.'}),v.jsx("p",{children:"To ensure reliability in these estimates, we utilised the ECDF. The ECDF visually represents the likelihood of observing specific changes in ANC4+. For example, the ECDF at zero indicates the likelihood of observing changes equal to or less than zero in ANC4+. Its complement, calculated as 1 minus the ECDF value at zero, informs us about the probability, given the data, of observing changes greater than zero (see Figure 1c). We then apply this information by comparing probabilities from the ECDF at zero against a 95% threshold, illustrated in Figure 1d, to highlight districts where improvements are highly certain (95% certain)."}),v.jsx("h4",{children:"Conclusion"}),v.jsx("p",{children:"Our utilisation of exceedance probability establishes a robust framework for interpreting changes over time, offering critical insights into trends and the potential for achieving significant improvements within specified timeframes. For example, assessing the exceedance probability associated with the prevalence of stunting provides valuable insights into the reduction of stunting over time. This methodology empowers policymakers by providing a credible assessment of trends, enabling informed decisions for effective interventions."}),v.jsxs("div",{id:"reference",children:[v.jsx("h4",{children:"Reference"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{children:[v.jsxs("li",{children:["Dekking, F. M., Kraaikamp, C., Lopuha, H. P., & Meester, L. E. (2005). A Modern Introduction to Probability and Statistics: Understanding why and how (Vol. 488). London: springer. DOI: ",v.jsx("a",{href:"https://link.springer.com/book/10.1007/1-84628-168-7",target:"_blank",children:"10.1007/1-84628-168-7"}),"."]}),v.jsxs("li",{children:["Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",target:"_blank",children:"10.1111/j.1467-9868.2011.00777.x"}),"."]}),v.jsxs("li",{children:["Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",target:"_blank",children:"10.1016/j.csda.2013.04.014"}),"."]}),v.jsxs("li",{children:["Richards, K. K., Hazelton, M. L., Stevenson, M. A., Lockhart, C. Y., Pinto, J., & Nguyen, L. (2014). Using exceedance probabilities to detect anomalies in routinely recorded animal health data, with particular reference to foot-and-mouth disease in Viet Nam. Spatial and Spatio-Temporal Epidemiology, 11, 125-133. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.sste.2014.08.002",target:"_blank",children:"10.1016/j.sste.2014.08.002"})]}),v.jsxs("li",{children:["Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",target:"_blank",children:"10.1111/j.1467-9868.2008.00700.x"}),"."]}),v.jsxs("li",{children:["Soch, J. (2020). Definition: Exceedance probability. The Book of Statistical Proofs. Url: ",v.jsx("a",{href:"https://statproofbook.github.io/D/prob-exc.html",target:"_blank",children:"https://statproofbook.github.io/D/prob-exc.html"})]})]})})]})]})}function F6e(){const e=["Kenya"],t={"Burkina Faso":I6e(),Kenya:O6e()};return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 1"}),v.jsx("h3",{children:"Data sourced from the Institute for Health Metrics and Evaluation (IHME)"}),v.jsx("hr",{}),v.jsx(Ay,{className:"mb-3",children:e.map((n,i)=>v.jsx(Ru,{eventKey:n,title:n,children:t[n]},i))}),v.jsx("hr",{}),v.jsx("h4",{children:"IHME Data license"}),v.jsxs("p",{children:["IHME specify that the data made available for download on IHME Websites can be used, shared, modified, or built upon by non-commercial users in accordance with the IHME Free-Of-Charge Non-Commercial User Agreement. ",v.jsx("a",{href:"https://www.healthdata.org/Data-tools-practices/data-practices/ihme-free-charge-non-commercial-user-agreement",target:"_blank",children:v.jsx("i",{className:"pi pi-external-link"})})]})]})}function P6e(){const e=["Kenya"],t={Kenya:D6e()};return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 4"}),v.jsx("h3",{children:"Data sourced from ESPEN programme from WHO"}),v.jsx("hr",{}),v.jsx(Ay,{className:"mb-3",children:e.map((n,i)=>v.jsx(Ru,{eventKey:n,title:n,children:t[n]},i))}),v.jsx("hr",{})]})}function N6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h4",{children:"Background"}),v.jsxs("p",{children:["The India NFHS surveys are constructed to be representative at national, province and district level for most of the indicators. In the case of rare events indicators such as stillbirth rates, or where more sophisticated estimation methods were needed such as mortality rates (child and neonatal mortality rates), indicators were constructed and mapped at district level using the surveys. Specifically, for four indicators named, unsafe abortion, neonatal mortality rate, child mortality rate and stillbirth rate we used a two-step approach: ",v.jsx("b",{children:"Step 1"}),". We followed the methods described in Subramaniam et al. (2021) and Ulahannan et al. (2022) to match the 2015-16 NFHS-4 data to 2019-21 NFHS-5 boundaries (ICF. The Demographic and Health Surveys Program Spatial Data Repository), in order to be able to compare changing districts over time; ",v.jsx("b",{children:"Step 2"}),". Once all data were available at NFHS-5 boundaries, we rasterised the data for the whole country and then aggregated the data using the district level official boundaries of India (Ministry of Science and Technology, Government of India), which were used for final display on the online portal. Average values for districts were used for aggregation."]}),v.jsx("p",{children:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available. Since census boundaries aligned with NFHS-4 boundaries, the same two-step approached as described above was applied."}),v.jsx("p",{children:"While the surveys were designed to be representative at the district level, caution is advised in interpreting and utilizing the findings due to the inherent limitations posed by small sample sizes for the mentioned indicators"}),v.jsx("p",{children:"Furthermore, it is important to note that the indicators discussed herein are rare events, further emphasizing the need for careful consideration and caution in their interpretation, given the limited sample sizes at the district level."}),v.jsx("h5",{children:"Step 1. Harmonising boundaries from round 1 (NFHS-4) to round 2 (NFHS-5) to match round 2 (NFHS-5)"}),v.jsx("p",{children:"The administrative boundaries of India for the year 2015-2016 (NFHS-4) count a total of 640 districts while the administrative boundaries of India for the year 2019-2021 (NFHS-5) count a total of 707 districts (67 additional districts) (ICF. The Demographic and Health Surveys Program Spatial Data Repository). However, there are 36 states in both years with changes. The boundary changes begin with the addition of new states and the removal of some states, for example, at the state level, a new state Ladakh was created in 2019-2021 from Jammu and Kashmir, as shown in Figure 1 below."}),v.jsx(Lh,{src:w6e,label:"dissagregation",number:"1",width:"600px",caption:"States dissagregation example"}),v.jsx("p",{children:"Meanwhile, Dadra and Nagar Haveli and Daman and Diu, two distinct states have now merged to form a new state called Dadra & Nagar Haveli & Daman & Diu as shown below in Figure 2."}),v.jsx(Lh,{src:b6e,label:"aggregation",number:"2",width:"550px",caption:"States agregation example"}),v.jsx("p",{children:"For the additional 67 districts, data from NFHS-4 are not available therefore, to be able to compare changes in indicators aggregated at the district level, we applied a simple methodology to harmonize geographical boundaries across the two time periods and assign the corresponding indicator value following Subramaniam et al. (2021) and Ulahannan et al. (2022). The methodology that we applied involves re-assigning indicators' values calculated from NFHS-4 data to all the 2019-21 NFHS-5 districts. This approach therefore does not make any alterations to the 2019-21 NFHS-5 data that are reported at the district level."}),v.jsx("p",{children:"The newly created 67 districts were formed from one or more districts included in the NFHS-4 dataset and can be divided into two different categories: type 1 and type 2. Type 1 districts (55 districts) were formed by altering the boundaries of one single district from 2015-16 NFHS-4 administrative boundaries and creating one new district. In comparison, type 2 districts (12 districts) were formed by adding geographical units from two or more parent districts. For the type 1 districts formed from one single parent district we assigned the same indicator's value as the parent district (Figure 3 and Table 1)"}),v.jsx(Lh,{src:S6e,label:"type1",number:"3",width:"400px",caption:"Example of type 1 districts (Assam State)"}),v.jsx("p",{children:"In the example above the type 1 districts Biswanath and Hojai were formed from the parent district Sonitpur and Nagaon, respectively. For example, to calculate the NFHS-5 Unsafe abortion values, the new district (Biswanath) takes the same value for its parent district (Sonitpur). The same is applicable to the 95% Lower and Upper Confidence Intervals (CI) as shown in the table below:"}),v.jsxs("div",{id:"table1",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 1."})," Example of indicator's value assignment for type 1 districts"]}),v.jsxs($u,{hover:!0,striped:"columns",children:[v.jsxs("thead",{children:[v.jsxs("tr",{children:[v.jsx("td",{}),v.jsx("td",{colSpan:4,className:"text-center",children:"Unsafe Abortion Value"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"District"}),v.jsx("td",{children:"NFHS-4 (mean)"}),v.jsx("td",{children:"NFHS-4 (lower CI)"}),v.jsx("td",{children:"NFHS-4 (upper CI)"}),v.jsx("td",{children:"NFHS-5 (mean)"})]})]}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Sonitpur"}),v.jsx("td",{children:"21.3"}),v.jsx("td",{children:"8.8"}),v.jsx("td",{children:"43.0"}),v.jsx("td",{children:"35.9"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Biswanath"}),v.jsx("td",{children:"21.3"}),v.jsx("td",{children:"8.8"}),v.jsx("td",{children:"43.0"}),v.jsx("td",{children:"35.9"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"*Sonitpur"}),v.jsx("td",{children:"21.3"}),v.jsx("td",{children:"8.8"}),v.jsx("td",{children:"43.0"}),v.jsx("td",{children:"35.9"})]})]}),v.jsx("tfoot",{children:v.jsx("tr",{children:v.jsx("td",{colSpan:5,children:"Notes: *Sonitpur is the altered version of Sonitpur from NFHS-4 after Biswanath was created from it."})})})]})]}),v.jsx("p",{children:"For type 2 districts, which were formed by adding areas from two or more parent districts, we assigned the average indicator's value of the respective parent district (Figure 4 and Table 2)."}),v.jsx(Lh,{src:C6e,label:"type2",number:"4",width:"450px",caption:"Example of type 2 districts (Gujarat State)"}),v.jsx("p",{children:"In the example above the type 2 district Botad was formed from the parent districts Ahmadabad and Bhavnagar."}),v.jsxs("div",{id:"table2",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 2."})," Example of indicator's value assignment for type 2 districts"]}),v.jsxs($u,{hover:!0,striped:"columns",children:[v.jsxs("thead",{children:[v.jsxs("tr",{children:[v.jsx("td",{}),v.jsx("td",{colSpan:4,className:"text-center",children:"Total Fertility Rate"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"District"}),v.jsx("td",{children:"NFHS-4 (mean)"}),v.jsx("td",{children:"NFHS-4 (lower CI)"}),v.jsx("td",{children:"NFHS-4 (upper CI)"}),v.jsx("td",{children:"NFHS-5 (mean)"})]})]}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Ahmadabad"}),v.jsx("td",{children:"0.256"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"0.284"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Bhavnagar"}),v.jsx("td",{children:"0.000"}),v.jsx("td",{children:"n/a"}),v.jsx("td",{children:"n/a"}),v.jsx("td",{children:"0.000"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Botad"}),v.jsx("td",{children:"0.128"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"0.000"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"*Ahmadabad"}),v.jsx("td",{children:"0.256"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"1.712"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"*Bhavnagar"}),v.jsx("td",{children:"0.000"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"1.794"})]})]}),v.jsxs("tfoot",{children:[v.jsx("tr",{children:v.jsx("td",{colSpan:5,children:"Notes: *Ahmadabad and *Bhavnagar are the altered versions of Ahmadabad and Bhavnagar from NFHS-4 after Botad was created from it."})}),v.jsx("tr",{children:v.jsx("td",{colSpan:5,children:"n/a = not applicable, only *Ahmadabad and *Bhavnagar are part of NFHS-5"})})]})]})]}),v.jsx("p",{children:"Out of 36 states, 22 states have neither type 1 nor type 2 boundaries, these states are listed below with their numbers of unchanging district boundaries, that is, same number of boundaries in 2015-16 and 2019-21 (Table 3)."}),v.jsxs("div",{id:"table3",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 3."})," Number of districts in each state in 2019-21"]}),v.jsxs($u,{hover:!0,striped:"columns",size:"lg",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"No."}),v.jsx("td",{children:"State"}),v.jsx("td",{children:"Total Districts in 2019-2021"})]})}),v.jsx("tbody",{children:L6e.map((e,t)=>v.jsxs("tr",{children:[v.jsx("td",{children:t+1}),v.jsx("td",{children:e.State}),v.jsx("td",{children:e.Count})]},t))}),v.jsx("tfoot",{children:v.jsxs("tr",{style:{fontWeight:"bold"},children:[v.jsx("td",{colSpan:2,children:"SUM"}),v.jsx("td",{children:"307"})]})})]})]}),v.jsx("p",{children:"These constitute 307 out of 707 districts that have not changed boundaries to either type 1 or type 2. The remaining 400 districts fall within 14 states, and all have type 1 districts, the only states without type 2 district boundaries are Assam, Chhattisgarh, Haryana, Madhya Pradesh, Maharashtra, Meghalaya, Punjab, Tripura, and West Bengal states."}),v.jsx("p",{children:"The following are the number of type 1 and type 2 districts with the total districts in each respective year, stating the number of new districts created in each state (Table 4)."}),v.jsxs("div",{id:"table4",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 4."})," Number of districts in each state in 2019-21"]}),v.jsxs($u,{hover:!0,striped:"columns",size:"lg",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"No."}),v.jsx("td",{children:"State"}),v.jsx("td",{children:"Type-1 Districts"}),v.jsx("td",{children:"Type-2 Districts"}),v.jsx("td",{children:"Total Districts in 2015-2016"}),v.jsx("td",{children:"Total Districts in 2019-2021"}),v.jsx("td",{children:"New Districts"})]})}),v.jsx("tbody",{children:j6e.map((e,t)=>v.jsxs("tr",{children:[v.jsx("td",{children:t+1}),v.jsx("td",{children:e.State}),v.jsx("td",{children:e.Type1}),v.jsx("td",{children:e.Type2}),v.jsx("td",{children:e.Count15}),v.jsx("td",{children:e.Count19}),v.jsx("td",{children:e.New})]},t))}),v.jsx("tfoot",{children:v.jsxs("tr",{style:{fontWeight:"bold"},children:[v.jsx("td",{colSpan:2,children:"Total"}),v.jsx("td",{}),v.jsx("td",{}),v.jsx("td",{children:"333"}),v.jsx("td",{children:"400"}),v.jsx("td",{children:"67"})]})})]})]}),v.jsx(Nu,{className:"mb-3",children:v.jsxs(Nu.Item,{eventKey:"0",children:[v.jsx(Nu.Header,{children:"Click to show the details on the changes."}),v.jsx(Nu.Body,{children:v.jsx(R6e,{})})]})}),v.jsx("h5",{children:"Step 2. Rasterization and harmonisation to national official boundaries to enable over time comparisons"}),v.jsx("p",{children:"With indicator values for the 707 NFHS-5 districts in table format, these are joined to the NFHS-5 district boundary shapefile using a common attribute (State_District). For each indicator and confidence intervals within the joined table, the shapefile is rasterized, to match the raster properties (coordinate system, cell size and grid alignment) derived from a common mastergrid of the national boundaries (WorldPop et al, 2018). The rasterized indicator values are then summarized using the district level official boundaries of India (Ministry of Science and Technology, Government of India) by using a GIS tool that calculates the zonal statistics using R (2021) software. This produces statistics (mean and median) from all the raster cells that sit within each district boundary so that indicator values are generated for each of the 742 districts. Medians were used to summarise the indicators of interest. This outputted table can be exported as a csv file or shapefile. A flowchart of the steps can be found in Figure 5."}),v.jsx(Lh,{src:E6e,label:"flowchart",number:"5",caption:"Flowchart illustrating the process of convering indicator values from NFHS-5 district boundaries to official distric boundaries"}),v.jsxs("div",{id:"reference",children:[v.jsx("h4",{children:"Reference"}),v.jsxs("ul",{children:[v.jsx("li",{id:"subramaniam2021",children:"Subramaniam SV, Kumar A, Tripathi N. Geographic insights lab. NFHS policy Tracker for districts. Cambridge, USA: Harvard Center for Population and Development Studies and Center for Geographic Analysis at Harvard, 2021."}),v.jsx("li",{id:"ulahannan2022",children:v.jsx("a",{href:"https://gh.bmj.com/content/7/4/e007798.abstract",target:"_blank",children:'Ulahannan, Sabu Kochupurackal, et al. "Alarming level of severe acute malnutrition in Indian districts." BMJ global health 7.4 (2022): e007798.'})}),v.jsx("li",{id:"worldpop2018",children:v.jsx("a",{href:"https://hub.worldpop.org/geodata/summary?id=29691",target:"_blank",children:"WorldPop (www.worldpop.org - School of Geography and Environmental Science, University of Southampton; Department of Geography and Geosciences, University of Louisville; Departement de Geographie, Universite de Namur) and Center for International Earth Science Information Network (CIESIN), Columbia University (2018). Global High Resolution Population Denominators Project - Funded by The Bill and Melinda Gates Foundation (OPP1134076). https://hub.worldpop.org/geodata/summary?id=29691 . [Accessed 09 January 2023]."})}),v.jsx("li",{id:"rcoreteam2021",children:v.jsx("a",{href:"https://R-project.org",target:"_blank",children:"R Core Team (2021). R: A language and environment for statistical. computing. R Foundation for Statistical Computing, Vienna, Austria"})})]})]}),v.jsx("br",{}),v.jsx("hr",{}),v.jsx("h4",{children:"."})]})}function $6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsxs("p",{children:["For this work, Population Division, United States Census Bureau (USCB) open access boundaries were used for geographical aggregations and for displaying purposes. USCB produced administrative level 1 and 2 boundaries in line with the subnational administrative structure used for Kenyas 2019 census. Kenya national boundaries as reported by the USCB datasets were made to align to the Large Scale International Boundary Line (LSIB) dataset from the United States. The U.S. Census Bureaus products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",target:"_blank",children:"here"}),"."]}),v.jsx("p",{children:"For modelled-based indicators (5x5km high resolution maps), official national country boundaries were used to model and summarise the estimates at sub-county level (US Census Bureau). Pixels coinciding with known water bodies were left as NAs and were ignored when aggregating to administrative boundaries."}),v.jsx("p",{children:"For selected indicators where high resolution modelling of the DHS data was not appropriate (e.g. rare events indicators such as stillbirth rate and low birth weight), county level only estimates were used. The DHS data are representative of counties as defined by the DHS (KNBS and ICF, 2023). This required processing to join the tabular data to the DHS county-level boundaries used in the original data collection for both round 1 (Kenya DHS-7, 2014) and 2 (Kenya DHS-8, 2022, DHS Spatial Data Repository), before rasterizing in line with a Kenya mastergrid and re-summarising using the USCB county-level boundaries, taking the mean pixel value falling within a given boundary. KPHC data (Child Labour) was joined to the USCB county-level boundaries based on name. Changes in the areas between DHS-7 and DHS-8 in selected counties were inspected and considered negligible for this work. All GIS processing was carried out in ArcGIS Pro 2.7.3."}),v.jsxs("div",{id:"reference",children:[v.jsx("h4",{children:"Reference"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{style:{marginBottom:"20px"},children:[v.jsxs("li",{children:["Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",target:"_blank",children:"here"}),"."]}),v.jsx("li",{children:"KNBS and ICF. 2023. Kenya Demographic and Health Survey 2022: Volume 1. Nairobi, Kenya, and Rockville, Maryland, USA: KNBS and ICF."}),v.jsxs("li",{children:["Spatial Data Repository: Kenya 2014 & 2020 DHS - National and Sub-National Boundaries. ",v.jsx("a",{href:"https://spatialdata.dhsprogram.com",target:"_blank",children:"spatialdata.dhsprogram.com"}),". [Accessed 01-01-2024]. ICF, The Demographic and Health Surveys Program Spatial Data Repository. Funded by USAID."]})]})})]})]})}function I6e(){return v.jsx(v.Fragment,{})}function O6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("div",{id:"table1",className:"px-5",children:v.jsxs($u,{striped:!0,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"Indicator"}),v.jsx("td",{children:"Definition"}),v.jsx("td",{children:"Year(s)"}),v.jsx("td",{children:"Geographical level"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Onchocerciasis infection"}),v.jsx("td",{children:"Prevalence (%) of onchocerciasis infection in the population"}),v.jsx("td",{children:"2014 and 2018"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Lymphatic filariasis infection"}),v.jsx("td",{children:"Prevalence (%) of lymphatic filariasis infection in the population"}),v.jsx("td",{children:"2014 and 2018"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Under five mortality"}),v.jsx("td",{children:"Probability of death amongst children aged under 5 years, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("td",{children:"2014 and 2017"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Neonatal mortality"}),v.jsx("td",{children:"Probability of death amongst children aged 0-28 days, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("td",{children:"2014 and 2017"}),v.jsx("td",{children:"5x5km and sub-county"})]})]})]})}),v.jsx("h4",{children:"Introduction"}),v.jsxs("p",{children:["In this work, 5x5 km cell-level estimates for two separate time points2014 and 2018 for the two NTDs, and 2014 and 2017 for the two mortality indicatorswere sourced and downloaded from ",v.jsx("a",{href:"https://ghdx.healthdata.org/",target:"_blank",children:"the IHME websites"}),". The data were further aggregated to sub-counties (second-level administrative units) of Kenya using the Population Division. US Census Bureau national and subnational boundaries."]}),v.jsx("h4",{children:"Data"}),v.jsx("h5",{children:"Prevalence (%) of onchocerciasis infection in the population"}),v.jsx("p",{children:'The source data used to populate this indicator describe onchocerciasis prevalence across Africa and Yemen from 2000 to 2018, and were produced by the Institute for Health Metrics and Evaluation (IHME, 2022; Schmidt et al. 2022). To produce these data a systematic review of published literature on onchocerciasis-related infection and prevalence from 1975-2017 was first undertaken by IHME. Prevalence data linked to 14,043 unique locations across the Americas, Africa and Yemen were extracted from 259 peer-reviewed articles identified by the review. These data were modelled alongside several ecological, environmental and epidemiological covariates in a Bayesian geostatistical framework to estimate the annual prevalence of onchocerciasis from 2000 to 2018 in 5km2 spatial resolution grid cells. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level estimates were extracted from the predictive posterior distribution, and represent the estimated percentage of the (all ages and both sexes) population at that location who are prevalent with onchocerciasis at the relevant timepoint. Prevalent cases are those with presence of microfiladermia, detected by skin snip microscopy. Estimates were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.'}),v.jsx("p",{children:"The data shown represent the prevalence (%) of onchocerciasis infection in the population, indicated by the presence of microfiladermia as detected by skin snip microscopy (%)"}),v.jsx("h5",{children:"Prevalence (%) of lymphatic filariasis infection in the population"}),v.jsx("p",{children:`The source data used to populate this indicator describe global lymphatic filariasis prevalence from 2000 to 2018 and were produced by the Institute for Health Metrics and Evaluation (IHME, 2020; Local burden of Disease NTD collaborators, 2020). To produce these data a systematic review of published literature on lymphatic filariasis-related infection and prevalence from 1990 onwards was first undertaken by IHME. This was further supplemented by additional programme monitoring data obtained from: (i) the WHO's Global Programme to Eliminate Lymphatic Filariasis; and (ii) the WHO's Expanded Special Project for Elimination of Neglected Tropical Diseases. Prevalence data linked to 15,829 unique global locations were extracted from 301 peer-reviewed articles identified by the review. These data were modelled alongside several covariates representing ecological, demographic, and programmatic factors related to lymphatic filariasis in a Bayesian geostatistical framework to estimate the annual prevalence from 2000 to 2018 in 5km2 spatial resolution grid cells. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level estimates were extracted from the predictive posterior distribution, and represent the estimated percentage of the (all ages and both sexes) population at that location who are prevalent at the relevant timepoint. Prevalent cases are those with lymphatic filariasis as measured by the immunochromatographic (ICT) antigen test. Estimates were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.`}),v.jsx("p",{children:"The data shown represent the prevalence (%) of lymphatic filariasis infection in the population, as measured by the ICT antigen test."}),v.jsx("h5",{children:"Under five mortality"}),v.jsx("p",{children:'The source data used to populate this indicator describe estimated child mortality rates across 99 low-and middle-income countries from 2000 to 2017 and were produced by the Institute for Health Metrics and Evaluation (IHME, 2019; Burstein et al. 2019). To produce estimates in 5km2 spatial resolution grid cells, input data from the Global Burden of Disease study were modelled by IHME alongside several sociodemographic, environmental and epidemiological covariates in a Bayesian geostatistical framework. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level mortality probabilities amongst children aged 0-28 days (neonates), under 1 year (infants), and under 5 years (under 5s) were separately estimated from the posterior probability distribution. Estimated probabilities were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.'}),v.jsx("p",{children:"The data shown represent the modelled probability of death amongst children aged under 5 years, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("h5",{children:"Neonatal mortality"}),v.jsx("p",{children:'The source data used to populate this indicator describe estimated child mortality rates across 99 low-and middle-income countries from 2000 to 2017 and were produced by the Institute for Health Metrics and Evaluation (IHME, 2019; Burstein et al. 2019). To produce estimates in 5km2 spatial resolution grid cells, input data from the Global Burden of Disease study were modelled by IHME alongside several sociodemographic, environmental and epidemiological covariates in a Bayesian geostatistical framework. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level mortality probabilities amongst children aged 0-28 days (neonates), under 1 year (infants), and under 5 years (under 5s) were separately estimated from the posterior probability distribution. Estimated probabilities were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.'}),v.jsx("p",{children:"The data shown represent the modelled probability of death amongst children aged 0-28 days, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("h4",{children:"Processing"}),v.jsx("p",{children:"IHME data is provided at a resolution of 5km. Data was resampled and re-projected to align with a 1km mastergrid covering the full extent of Kenya. Sub-county level summaries were captured using this resampled 1km data, whilst high-resolution output maps (raster) were produced from the original 5km resolution data aligned to the mastergrid."}),v.jsx("p",{children:"Where there were missing/NA pixels in the original raster's due to differing coastline definitions between datasets, cell values were interpolated. Otherwise, all other missing/NA pixels present in the original data were left as missing/NA."}),v.jsx("p",{children:"All processing was carried out in ArcGIS Pro 2.7.3"}),v.jsx("h4",{children:"References"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{style:{marginBottom:"20px"},children:[v.jsxs("li",{children:["Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",target:"_blank",children:"here"}),"."]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (IHME). Africa and Yemen Onchocerciasis Prevalence Geospatial Estimates 2000-2018. Seattle, United States of America: Institute for Health Metrics and Evaluation (IHME), 2022. DOI: ",v.jsx("a",{href:"https://doi.org/10.6069/11JK-D224",children:"10.6069/11JK-D224"}),". Data are visualised ",v.jsx("a",{href:"https://vizhub.healthdata.org/lbd/oncho#",target:"_blank",children:"here"}),"."]}),v.jsxs("li",{children:["Schmidt et al. (2022) The prevalence of onchocerciasis in Africa and Yemen, 20002018: a geospatial analysis. BMC Med 20, 293. DOI: ",v.jsx("a",{href:"https://doi.org/10.1186/s12916-022-02486-y",target:"_blank",children:"10.1186/s12916-022-02486-y"}),"."]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (IHME). Global Lymphatic Filariasis Prevalence Geospatial Estimates 2000-2018. Seattle, United States of America: Institute for Health Metrics and Evaluation (IHME), 2020. DOI:",v.jsx("a",{href:"https://doi.org/10.6069/8NA6-6Z2",target:"_blank",children:"10.6069/8NA6-6Z2"}),". Data are visualised ",v.jsx("a",{href:"https://vizhub.healthdata.org/lbd/lf#",target:"_blank",children:"here"}),"."]}),v.jsxs("li",{children:["Local Burden of Disease 2019 Neglected Tropical Diseases Collaborators (2020) The global distribution of lymphatic filariasis, 200018: a geospatial analysis. The Lancet Global Health 8(9): e1186-e1194. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/S2214-109X(20)30286-2",target:"_blank",children:"10.1016/S2214-109X(20)30286-2"})]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (IHME). Low- and Middle-Income Country Neonatal, Infant, and Under-5 Mortality Geospatial Estimates 2000-2017. Seattle, United States of America: Institute for Health Metrics and Evaluation (IHME), 2019. DOI:",v.jsx("a",{href:"https://doi.org/10.6069/9ABZ-XG84",target:"_blank",children:"10.6069/9ABZ-XG84"}),". Data are visualised ",v.jsx("a",{href:"https://vizhub.healthdata.org/lbd/under5#",target:"_blank",children:"here"})]}),v.jsxs("li",{children:["Burstein et al. (2019) Mapping 123 million neonatal, infant, and child deaths between 2000 and 2017. Nature 574: 353358. DOI: ",v.jsx("a",{href:"https://doi.org/10.1038/s41586-019-1545-0",target:"_blank",children:"10.1038/s41586-019-1545-0"}),"."]})]})})]})}function D6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("div",{id:"table1",className:"px-5",children:v.jsxs($u,{striped:!0,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"Indicator"}),v.jsx("td",{children:"Definition"}),v.jsx("td",{children:"Year(s)"}),v.jsx("td",{children:"Geographical level"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Soil-transmitted helminth infections"}),v.jsx("td",{children:"Prevalence (%) of soil-transmitted helminth infection in the population (STH)"}),v.jsx("td",{children:"2010-2015"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Schistosomiasis"}),v.jsx("td",{children:"Prevalence (%) of schistosomiasis infection (SCHI)"}),v.jsx("td",{children:"2010-2018"}),v.jsx("td",{children:"5x5km and sub-county"})]})]})]})}),v.jsx("h4",{children:"Introduction"}),v.jsx("p",{children:"In this work, 5x5 km high spatial resolution surfaces for Soil-transmitted helminth infection (STH) and Schistosomiasis (SCHI) in Kenya were produced using Bayesian geostatistical models. These geostatistical models were constructed using WHOs Expanded Special Project for Elimination of Tropical Diseases (ESPEN) site units locations for a range of years (WHO-ESPEN). All clusters surveyed between 2010 and 2015 (for soil-transmitted helminth infection) and between 2010 and 2018 (for schistosomiasis infection) were employed as input data in the model; while we used a range of environmental, climatic, geographical, and socio-economic datasets as covariates."}),v.jsx("p",{children:"A Bayesian geostatistical modeling approach was employed to construct 5x5 km high spatial resolution surfaces, including the prediction (mean) and uncertainty (standard deviation) surfaces. Also, using the grid-level high-resolution modelled outputs and uncertainty surfaces produced, we performed population-weighted aggregation up to the county and subcounty levels (US Census Bureau)."}),v.jsx("h4",{children:"Data"}),v.jsx("p",{children:"The source data used to populate this indicator describe STH and SCHI in Kenya, and were sourced from the WHOs Expanded Special Project for Elimination of Tropical Diseases (ESPEN) database. ESPEN covers all 47 countries of the WHO AFRO region and five countries of the WHO EMRO region (Sudan, Egypt, Somalia, Djibouti and Yemen). The source STH and SCHI prevalence data had been extracted from the Global Atlas of Helminth Infections (see Pullan et al., 2011) and were available at the level of site units, which are the sites of cross-sectional prevalence surveys conducted in representative research or sentinel populations. Relevant surveys were identified through structured searches of electronic bibliographic databases, manual searches of local archives and libraries, and direct contact with researchers. Any data based on hospital or clinic surveys, post-intervention surveys, or surveys among sub-populations (such as refugees, prisoners or nomads) were excluded from the ESPEN database. The database collects all surveys found to meet the inclusion criteria, regardless of the year of collection/publication, many of which reported a prevalence value linked to GPS coordinates. While most surveys had included participants of all ages, some were limited to a specific age group only; surveys of the latter type usually involved a population of children and/or adolescents, but alternate age ranges were sometimes used. All available survey data were used to fit the models described below."}),v.jsx("p",{children:"Also, a range of environmental, climatic, geographical, and socioeconomic covariates were selected and incorporated within the statistical models for predicting the health indicators."}),v.jsx("h4",{children:"Methods"}),v.jsx("p",{children:"The geospatial modelling methodology utilised in this work made use of data for the STH and SCHI from WHO ESPEN, along with environmental, climatic, geographical, and socioeconomic variables incorporated as predictors within the statistical model for predicting health and development indicators from household surveys. These covariates represent the candidate covariates on which robust covariate selection was performed."}),v.jsx("p",{children:"These data were employed using the disease site units' locations as inputs in our analyses, with the indicator being STH and SCHI used as the outcome variables to be predicted, and the geospatial covariates used as predictors in the model."}),v.jsx("p",{children:"For STH the modelled indicator was the cumulative infection by any of the soil transmitted helminths Ascaris lumbricoides, Trichuris trichiura and the hookworms Ancylostoma duodenale and Necator americanus. This was calculated from the individual infection rates using the method suggested in de Silva and Hall (2010)."}),v.jsx("p",{children:"A geostatistical model was fitted using the integrated nested Laplace approximation  stochastic partial differential equations (INLA-SPDE) method. From this model 5x5 km high spatial resolution surfaces, including the prediction (mean) and uncertainty (standard deviation) surfaces, were constructed (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013). The high-resolution outputs of the model were also aggregated to county and subcounty level using population weighted averaging using unadjusted population counts for Kenya."}),v.jsx("h4",{children:"Notes"}),v.jsx("p",{children:"Estimates for counties for which there were fewer than 5 clusters were disregarded, while counties where surveyed points were between 5 and 30 were flagged as showing high uncertainty."}),v.jsx("p",{children:"Counties which do not have environmental suitability for STH infection (defined as maximum daytime land surface temperature exceeding 40 degrees Celsius) were not modelled and are marked grey. This is based on indications described in the Pullan et al. (2011)."}),v.jsx("h4",{children:"References"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{style:{marginBottom:"20px"},children:[v.jsxs("li",{children:["Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",target:"_blank",children:"here"}),"."]}),v.jsxs("li",{children:["World Health Organisation Regional Office for Africa (2024) Expanded Special Project for Elimination of Neglected Tropical Diseases. Data and more information can be accessed from ",v.jsx("a",{href:"https://espen.afro.who.int/",target:"_blank",children:"here"}),"."]}),v.jsxs("li",{children:["Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",target:"_blank",children:"10.1111/j.1467-9868.2008.00700.x"}),"."]}),v.jsxs("li",{children:["Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",target:"_blank",children:"10.1111/j.1467-9868.2011.00777.x"}),"."]}),v.jsxs("li",{children:["Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",target:"_blank",children:"10.1016/j.csda.2013.04.014"})]}),v.jsxs("li",{children:["de Silva N, Hall A. Using the prevalence of individual species of intestinal nematode worms to estimate the combined prevalence of any species. PLoS Negl Trop Dis. 2010 Apr 13;4(4):e655. DOI: ",v.jsx("a",{href:"https://doi.org/10.1371/journal.pntd.0000655",target:"_blank",children:"10.1371/journal.pntd.0000655"}),"."]})]})})]})}const L6e=[{State:"Andaman & Nicobar Islands",Count:"3"},{State:"Andhra Pradesh",Count:"13"},{State:"Bihar",Count:"38"},{State:"Chandigarh",Count:"1"},{State:"Dandra & Nagar Haveli & Daman & Diu",Count:"3"},{State:"Goa",Count:"2"},{State:"Himachal Pradesh",Count:"12"},{State:"Jammu and Kashmir",Count:"20"},{State:"Jharkhand",Count:"24"},{State:"Karnataka",Count:"30"},{State:"Kerala",Count:"2"},{State:"Ladakh",Count:"1"},{State:"Lakshadweep",Count:"14"},{State:"Manipur",Count:"9"},{State:"Mizoram",Count:"8"},{State:"Nagaland",Count:"11"},{State:"Odisha",Count:"30"},{State:"Puducherry",Count:"4"},{State:"Rajasthan",Count:"33"},{State:"Sikkim",Count:"4"},{State:"Tamil Nadu",Count:"32"},{State:"Uttarakhand",Count:"13"}],j6e=[{State:"Arunachal Pradesh",Type1:"6",Type2:"1",Count15:"16",Count19:"20",New:"4"},{State:"Assam",Type1:"12",Type2:"-",Count15:"27",Count19:"33",New:"6"},{State:"Chhattisgarh",Type1:"15",Type2:"-",Count15:"18",Count19:"27",New:"9"},{State:"Gujarat",Type1:"8",Type2:"3",Count15:"26",Count19:"33",New:"7"},{State:"Haryana",Type1:"1",Type2:"-",Count15:"21",Count19:"22",New:"1"},{State:"Madhya Pradesh",Type1:"2",Type2:"-",Count15:"50",Count19:"51",New:"1"},{State:"Maharashtra",Type1:"2",Type2:"-",Count15:"35",Count19:"36",New:"1"},{State:"Meghalaya",Type1:"8",Type2:"-",Count15:"7",Count19:"11",New:"4"},{State:"NCT of Delhi",Type1:"4",Type2:"4",Count15:"9",Count19:"11",New:"2"},{State:"Punjab",Type1:"4",Type2:"-",Count15:"20",Count19:"22",New:"2"},{State:"Telangana",Type1:"23",Type2:"7",Count15:"10",Count19:"31",New:"21"},{State:"Tripura",Type1:"7",Type2:"-",Count15:"4",Count19:"8",New:"4"},{State:"Uttar Pradesh",Type1:"4",Type2:"2",Count15:"71",Count19:"75",New:"4"},{State:"West Bengal",Type1:"2",Type2:"-",Count15:"19",Count19:"20",New:"1"}],z6e=[{title:"Arunachal Pradesh",items:["A new district (Kra Daadi) was formed from Kurung Kumey district.","Longding district was created from Tirap district.","Namsai district was created from Lohit district.","A new Siang district was created from Parent districts West Siang and East Siang."]},{title:"Assam",subtitle:"All 6 new districts created from type 1 Parent districts include:",items:["Biswanath district was created from Sonitpur","Charaideo from Sivasagar","Hojai from Nagaon","Majuli from Jorhat","South Salmara Mancachar from Dhubri","West Karbi Anglong from Karbi Anglong"]},{title:"Gujarat",subtitle:"New districts formed include:",items:["Botad from Bhavnagar and Ahmadabad","Chhota Udaipur from Vadodara","Devbhumi Dwarka from Jamnagar","Gir Somnath from Junagadh","Mahisagar from Panchmahal and Kheda","Morbi from Rajkot and Surrendranagar"]},{title:"Chhattisgarh",subtitle:"Dakshin Bastar Dantewada district in 2015-16 no longer exists, as two new districts: Dantewada and Sukma were created from it in 2019-21. Balod and Bemetara districts were also created from Durg district, thus forming three new districts including Durg.  Surguja district in 2015-16 has also been divided into three: Balarampur, Surajpur, and Surguja. Other districts formed include:",items:["Baloda Bazar from Raipur","Kodagaon from Bastar","Mungeli from Bilaspur"]},{title:"NCT of Delhi",subtitle:"Two entirely new districts: Shahdara (formed from North East and East districts), and South East Delhi (formed from South district) have been added. Although other districts bear the same name as in 2015-16, they have changed boundaries, for example,",items:["Central district and North district boundaries have been merged to form a new Central district in 2019-21","With the 2015-16 North merging as stated above, the 2015-16 North West district was also divided into new North and North West districts","New Delhi district in 2019-21 now includes a part of the 2015-16 South West boundaries with the 2015-16 New Delhi boundary","2015-16 South district is now divided into two 2019-21 districts- South and South East"]},{title:"Telangana",subtitle:"The following type 1 and type 2 districts exist in Telangana state in 2019-21:",items:["Komaram Bheem Asifabad, Mancherial, and Nirmal from Adilabad district in 2015-16","Jagitial, Peddapalli, and Rajanna Sircilla districts from Karimnagar 2015-16 district","Kothagudem from Khammam","Jogulamba Gadwal and Nagarkurnool from Mahbubnagar","Kamareddy from Nizamabad","Medchal-Malkajgiri from RangaReddy","Sangareddy from Medak","Suryapet and Yadadri Bhuvanagiri from Nalgonda","Warangal Rural from Warangal","Jangoan from Warangal and Nalgonda","Jayashankar Bhupalapally from Karimnagar, Warangal, and Khammam","Mahabubabad from Warangal and Khammam","Ranga Reddy and Vikarabad from RangaReddy and Mahabubnagar","Siddipet from Medak, Warangal, and Karimnagar","Warangal Urban from Warangal and Karimnagar"]},{title:"Haryana",subtitle:"The only new district formed is Charkhi Dadri from Bhiwani district.",items:""},{title:"Madhya Pradesh",subtitle:"Only one new district was formed: Agar Malwa from Shajapur district.",items:""},{title:"Punjab",subtitle:"The two new districts formed are:",items:["Fazilka from Firozpur","Pathankot from Gurdaspur"]},{title:"Meghalaya",subtitle:"Jaintia Hills no longer exists in 2015-16 as the district now includes two new districts: East Jaintia Hills and West Jaintia Hills. Other new districts formed include:",items:["North Garo Hills from East Garo Hills","South West Garo Hills from West Garo Hills","South West Khasi Hills from West Khasi Hills"]},{title:"Uttar Pradesh",subtitle:"Four new districts formed are:",items:["Amethi from Sultanpur and Rae Bareli","Hapur from Ghaziabad","Sambhal from Moradabad and Budaun","Shamli from Muzaffarnagar"]},{title:"West Bengal",subtitle:"Barddhaman district no longer exists, but has two new districts created from it:",items:["Paschim Barddhaman and Purba Barddhaman"]},{title:"Tripura",subtitle:"The new districts formed include:",items:["Khowai and Sepahijala from West district","Unakoti from North district"]}],B6e=["Kenya"],H6e={Kenya:U6e()};function U6e(){return v.jsx("div",{className:"row m-0 p-0 px-3",children:v.jsxs("ul",{children:[v.jsxs("li",{children:["Administrative Boundary of Kenya: Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",children:"here"}),"."]}),v.jsx("li",{children:"2014 Kenya DHS: Kenya National Bureau of Statistics, Ministry of Health/Kenya, National AIDS Control Council/Kenya, Kenya Medical Research Institute, National Council for Population and Development/Kenya, and ICF International. 2015. Kenya Demographic and Health Survey 2014 [DATASETS]. Rockville, MD, USA: Kenya National Bureau of Statistics, Ministry of Health/Kenya, National AIDS Control Council/Kenya, Kenya Medical Research Institute, National Council for Population and Development/Kenya, and ICF International."}),v.jsx("li",{children:"2022 Kenya DHS: KNBS and ICF. 2023. Kenya Demographic and Health Survey 2022: [DATASETS]. Nairobi, Kenya, and Rockville, Maryland, USA: KNBS and ICF."}),v.jsxs("li",{children:["World Health Organisation Regional Office for Africa (2024) Expanded Special Project for Elimination of Neglected Tropical Diseases. Data and more information can be accessed ",v.jsx("a",{href:"https://espen.afro.who.int/",children:"here"}),"."]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (2024) Global Health Data Exchange (GHDx). Data and more information can be accessed from ",v.jsx("a",{href:"https://ghdx.healthdata.org/",children:"here"}),"."]})]})})}function W6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"About"}),v.jsx("hr",{}),v.jsx("p",{children:"This web application presents a summary of maternal and child health characteristics alongside socio-economic and Sustainable Development Goals (SDG)-related indicators at subnational scales. Multiple indicators are presented in map, chart, and tabulated form, and for different time points and data sources."}),v.jsx("h3",{children:"Methods"}),v.jsx("p",{children:"We have produced 5x5km high-resolution (also referred to as grid level) prediction and uncertainty maps illustrating changes over time for health and development indicators within specific subnational areas, such as districts or similar administrative divisions varying by country."}),v.jsx("p",{children:"The methodology employs a Bayesian geostatistical modeling approach using the Integrated Nested Laplace Approximation  Stochastic Partial Differential Equation method (INLA-SPDE) statistical method (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013) to estimate the indicators."}),v.jsx("p",{children:"This approach relies on data from the two most recent rounds of the nationally representative Demographic and Health Surveys (DHS), which are available at the cluster level (primary sampling unit), and mapped through GPS coordinates of the cluster centroids. In the modelling process, the cluster locations serve as the primary input data; open-access, raster-based geographical, climatic, and socio-economic datasets are used as covariates."}),v.jsx("p",{children:"The estimates presented in this portal are the result of a standard modelling approach for estimating high resolution maps and there may be deviations from aggregated measures published elsewhere."}),v.jsxs("p",{children:["Please consult the ",v.jsx("a",{href:"#/technote-0",children:"Technical Notes"})," section for more information on data sources and specific indicators."]}),v.jsx("h3",{children:"Disclaimer"}),v.jsx("p",{children:"Maps used on this website are for general illustration only, and are not intended to be used for reference purposes."}),v.jsx("p",{children:"The representation of political boundaries does not necessarily reflect the organization's view on the legal status of a country or territory."}),v.jsx("h3",{children:"Acknowledgement"}),v.jsx(Nu,{className:"mb-3",flush:!0,children:B6e.map((e,t)=>v.jsxs(Nu.Item,{eventKey:t,children:[v.jsx(Nu.Header,{children:e}),v.jsx(Nu.Body,{children:H6e[e]})]},t))}),v.jsx("h3",{children:"References"}),v.jsx("div",{className:"row m-0 p-0 px-3",children:v.jsxs("ul",{children:[v.jsxs("li",{children:["Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",children:"10.1111/j.1467-9868.2008.00700.x"}),"."]}),v.jsxs("li",{children:["Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",children:"10.1111/j.1467-9868.2011.00777.x"}),"."]}),v.jsxs("li",{children:["Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",children:"10.1016/j.csda.2013.04.014"}),"."]})]})})]})}const G6e="/ciff_portal/assets/guide-1-kqAcHqte.png",q6e="/ciff_portal/assets/guide-2-evoF8DQF.png",V6e="/ciff_portal/assets/guide-3-3GTO60In.png";function Y6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Guide"}),v.jsx("hr",{}),v.jsx("div",{className:"row",children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"col-lg-5 pb-3",children:v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"pb-3",children:[v.jsx("h4",{children:"Basic Usage"}),v.jsxs("ol",{children:[v.jsx("li",{children:"Select a country and indicator to display. A subnational map of the indicator will be displayed on the left."}),v.jsx("li",{children:"By default, indicator value from the Round 2 survey is displayed on the map."}),v.jsxs("ul",{children:[v.jsxs("li",{children:["Click ",v.jsx("kbd",{children:"Round 1"})," to see the value from the Round 1 survey."]}),v.jsxs("li",{children:["Click ",v.jsx("kbd",{children:"Change"})," to see the difference between the values from two rounds."]}),v.jsxs("li",{children:["Click ",v.jsx("kbd",{children:"Grid Level"})," to load the grid level data (5x5 km)."]})]}),v.jsxs("li",{children:["Click ",v.jsx("i",{className:"pi pi-plus-circle"})," or ",v.jsx("i",{className:"pi pi-minus-circle"})," to zoom-in or zoom-out the map. Click ",v.jsx("i",{className:"pi pi-home"})," to reset the map view."]}),v.jsx("li",{children:"Select an administrative unit by clicking any region on the map or use the dropdown menu available below the map."}),v.jsx("li",{children:"Chart and tabulated data for the selected unit is displayed on the right. The data can be sorted according to the sub-unit name or the indicator values."}),v.jsxs("li",{children:["By clicking ",v.jsx("i",{className:"pi pi-arrow-circle-right"}),", the aggregated values of all indicators from the selected unit can be displayed."]}),v.jsxs("li",{children:["Throughout the site, additional information can be accessed by hovering over or clicking on the ",v.jsx("i",{className:"pi pi-question-circle"})," icon where available."]}),v.jsx("li",{children:"For a selected number of indicators, additional technical notes were created. These notes can be accessed here and through the menu bar on the top of this site."})]})]}),v.jsxs("div",{children:[v.jsx("h4",{children:"Filtering by change"}),v.jsxs("ol",{start:9,children:[v.jsx("li",{children:'If the underlying dataset is statistically sufficient to estimate the significance in change between rounds, "Filtering by change" can be performed. Use the dropdown to display subnational units with significant improvement or worsening through time for the selected indicator. This allows the user to choose the probability that there is meaningful improvement/worsening. The map filters out units where it is unlikely that there have been meaningful improvements.'}),v.jsxs("li",{children:["Additional information can be found by clicking on the ",v.jsx("i",{className:"pi pi-question-circle"})," icon on top of the change significance slider. ",v.jsx("a",{href:"#/technote-0",children:"Technical Note 2"}),' provides details on "Exceedance Probability and Confidence in Changes Over Time", which is the basis of the filtering.']})]})]})]})}),v.jsxs("div",{className:"col-lg-7 text-center",children:[v.jsx("img",{alt:"guide",src:G6e,width:"100%"}),v.jsx("img",{alt:"guide",src:q6e,width:"100%"}),v.jsx("img",{alt:"guide",src:V6e,width:"100%"})]})]})})]})}function Z6e(){return v.jsx(jae,{children:v.jsx(Dae,{children:v.jsxs(No,{path:"/",element:v.jsx(X6e,{}),exact:!0,children:[v.jsx(No,{index:!0,element:v.jsx(SR,{})}),v.jsx(No,{path:":country",element:v.jsx(SR,{}),children:v.jsx(No,{path:":indicator",element:v.jsx(SR,{})})}),v.jsx(No,{path:"about",element:v.jsx(W6e,{})}),v.jsx(No,{path:"guide",element:v.jsx(Y6e,{})}),v.jsx(No,{path:"technote-0",element:v.jsx(t0,{which:"zero"})}),v.jsx(No,{path:"technote-1",element:v.jsx(t0,{which:"boundary"})}),v.jsx(No,{path:"technote-2",element:v.jsx(t0,{which:"change"})}),v.jsx(No,{path:"technote-3",element:v.jsx(t0,{which:"ihme"})}),v.jsx(No,{path:"technote-4",element:v.jsx(t0,{which:"espen"})})]})})})}function X6e(){return v.jsxs("div",{children:[v.jsx("div",{className:"shadow mb-2",children:v.jsx("div",{className:"container-xl px-2",children:v.jsxs(VE,{expand:"md",children:[v.jsx(VE.Toggle,{}),v.jsx(VE.Collapse,{children:v.jsxs($h,{children:[v.jsxs($h.Link,{href:"./",children:[v.jsx("i",{className:"pi pi-home mx-1"}),"Home"]}),v.jsxs($h.Link,{href:"#/about",children:[v.jsx("i",{className:"pi pi-info-circle mx-1"}),"About"]}),v.jsxs($h.Link,{href:"#/guide",children:[v.jsx("i",{className:"pi pi-question-circle mx-1"}),"Guide"]}),v.jsxs($h.Link,{href:"#/technote-0",children:[v.jsx("i",{className:"pi pi-question-circle mx-1"}),"Technical Notes"]})]})})]})})}),v.jsx("div",{className:"container-xl px-2",style:{paddingBottom:"50px"},children:v.jsx(Iae,{})}),v.jsxs("div",{className:"footer fixed-bottom p-2",children:[" 2024 ",v.jsx("a",{href:"https://sdi.worldpop.org",children:"WorldPop SDI"})]})]})}CR.createRoot(document.getElementById("root")).render(v.jsx($t.StrictMode,{children:v.jsx(Z6e,{})}));
